steal.packages({});
steal.has("stealconfig.js","main.js","js/Libs.js","resources/AppResources.js","lib/external/stealjquery.js","vendor/json2/json2.js","vendor/jquery/jquery.js","vendor/jquery-ui/jquery-ui.min.js","lib/external/stealDatatables.js","vendor/datatables/js/jquery.dataTables.js","vendor/datatables-plugins/js/dataTables.bootstrap.js","vendor/datatables-colreorder/js/dataTables.colReorder.js","lib/external/CanJS/v2.2.6/can.custom.js","lib/external/stealHighcharts.js","vendor/highcharts-release/highcharts.js","vendor/highcharts-release/highcharts-more.js",
"vendor/highcharts-release/modules/exporting.src.js","vendor/highcharts-release/modules/data.src.js","lib/external/Highcharts-regression/highcharts-regression.js","lib/external/ace-editor/ace.js","lib/external/stealjqueryPlugins.js","vendor/jQuery.Hotkeys/jquery.hotkeys.js","vendor/jquery.cookie/jquery.cookie.js","vendor/jcarousel/jquery.jcarousel.js","lib/external/pixel-admin/stealPixelAdmin.js","lib/external/pixel-admin/javascripts/bootstrap.min.js","lib/external/stealBlockUI.js","vendor/blockui/jquery.blockUI.js",
"lib/external/stealjsTree.js","vendor/jstree/jquery.jstree.js","lib/external/stealQtip.js","vendor/qtip2/jquery.qtip.min.js","lib/external/stealSmartWizard.js","vendor/jQuery-Smart-Wizard/js/jquery.smartWizard.js","lib/external/Uploader/jquery.ajaxfileupload.js","lib/sentrana/SentranaJQRangeSlider/stealSentranaJQRangeSlider.js","lib/external/jQRangeSlider/StealjQRangeSlider.js","lib/external/jQRangeSlider/jQEditRangeSlider-min.js","lib/external/jquery.textarea.caret/jquery.textarea.caret.js","lib/external/stealsffjs.js",
"vendor/sffjs/sffjs.js","lib/external/SmartSidebar/stealSmartSidebar.js","lib/external/SmartSidebar/js/jquery.smartsidebar.js","lib/external/InputHints/jquery.inputhints.js","lib/external/pivot/StealPivot.js","js/Sentrana.js","lib/sentrana/Utils.js","lib/sentrana/DialogControl/stealDialogControl.js","lib/sentrana/DialogControl/SentranaDialog.js","lib/sentrana/DialogControl/ContentPluginDialog.js","lib/sentrana/DialogControl/ConfirmDialog.js","lib/sentrana/DialogControl/AlertDialog.js","lib/sentrana/DialogControl/ConfirmDialogYNC.js",
"lib/sentrana/AppShell/ApplicationShellController.js","lib/sentrana/AppShell/ApplicationStorage.js","lib/sentrana/AppShell/SessionKeepAliveController.js","lib/sentrana/AppShell/SentranaApplicationShell.js","lib/sentrana/Navigation/stealNavigation.js","lib/sentrana/Navigation/NavigationController.js","lib/sentrana/AppSwitcher/StealAppSwitcher.js","lib/sentrana/AppSwitcher/AppSwitcherController.js","lib/sentrana/Authentication/StealAuthenticationModule.js","lib/sentrana/Authentication/LoginController.js",
"lib/sentrana/Authentication/AuthenticationModel.js","lib/sentrana/ChangePassword/ChangePasswordController.js","lib/sentrana/AppShell/RouterController.js","lib/sentrana/WidgetsBase/stealWidgetsBase.js","lib/sentrana/WidgetsBase/Model/WidgetsStyleModelBase.js","lib/sentrana/WidgetsBase/Model/WidgetsPropertiesModelBase.js","lib/sentrana/WidgetsBase/Control/WidgetsControlBase.js","lib/sentrana/WidgetsBase/Control/WidgetsStyleControlBase.js","lib/sentrana/WidgetsBase/Control/WidgetsPropertiesControlBase.js",
"lib/sentrana/SideBar/stealSideBar.js","lib/sentrana/SideBar/SideBar.js","lib/sentrana/PlainList/stealPlainList.js","lib/sentrana/PlainList/PlainListStyleModel.js","lib/sentrana/PlainList/PlainListPropertyModel.js","lib/sentrana/PlainList/PlainListPropertyControl.js","lib/sentrana/PlainList/PlainList.js","lib/sentrana/PageWidget/StealPage.js","lib/sentrana/PageWidget/Page.js","lib/sentrana/PageWidget/PropertyModel.js","lib/sentrana/PageWidget/PropertyController.js","lib/sentrana/PageWidget/PageModel.js",
"lib/sentrana/LayoutWidgets/stealLayoutWidget.js","lib/sentrana/LayoutWidgets/LayoutWidget.js","lib/sentrana/ReportChartCanJS/StealReportChart.js","lib/sentrana/ReportChartCanJS/SentranaEnums.js","lib/sentrana/ReportChartCanJS/ReportChartOptions.js","lib/sentrana/ReportChartCanJS/ReportChartOptionsDialog.js","lib/sentrana/ReportChartCanJS/ReportChart.js","lib/sentrana/ReportChartCanJS/PivotChart/PivotChartOptions.js","lib/sentrana/ReportChartCanJS/PivotChart/PivotChartDataAdapter.js","lib/sentrana/ReportChartCanJS/PivotChart/PivotChart.js",
"lib/sentrana/ReportGrid-bootstrap/StealReportGrid.js","lib/sentrana/ReportGrid-bootstrap/ReportGrid.js","lib/sentrana/ReportText/stealReportText.js","lib/sentrana/ReportText/ReportText.js","lib/sentrana/GoldenLayout/StealGoldenLayout.js","js/controllers/BIQLayoutController.js","js/controllers/TopNavDWSelectorController.js","js/controllers/TopNavController.js","js/controllers/FirstLookDialog.js","js/controllers/FilterControlController.js","lib/sentrana/collapsible/StealCollapsibleContainer.js","lib/sentrana/collapsible/CollapsibleContainer.js",
"js/controllers/RepositoryMetadataDialog.js","js/controllers/DuplicateReportDialog.js","js/controllers/ShareReportDialog.js","js/controllers/DeleteReportDialog.js","js/controllers/DeleteBookletDialog.js","js/models/ReusableColumnsModel.js","js/constructs/DataWarehouseRepository.js","js/controllers/DataWarehouseAsControlsController.js","js/observes/ObjectSelectionObserve.js","js/observes/ReportDefinObserve.js","js/controllers/ReportDefnEditorController.js","js/controllers/ReportUnitController.js",
"js/controllers/TemplateUnitController.js","js/controllers/DiagnosticsController.js","js/controllers/PageBySelectorController.js","js/controllers/ExecutionMonitorController.js","js/observes/ExecutionMonitorObserve.js","js/controllers/DrillMenuController.js","js/controllers/TwoRibbonNavBarController.js","js/observes/TwoRibbonNavBarObserve.js","js/observes/TopNavBarObserve.js","js/controllers/SaveAsReportDialog.js","js/controllers/SaveReportDialog.js","js/constructs/ReportFilterUtil.js","js/controllers/BuilderPageController.js",
"js/models/ReportRecipientsModel.js","js/models/CommentItemModel.js","js/observes/CommentStreamObserve.js","js/controllers/CommentStreamController.js","js/models/ReportDefinitionInfoModel.js","js/controllers/ReportDefinitionInfoController.js","js/controllers/ReportDefinitionInfoListController.js","js/observes/ViewListObserve.js","js/observes/ReportDefinitionInfoListObserve.js","js/controllers/SavedReportsPageController.js","js/controllers/DWSelectorController.js","js/observes/ChoicesObserve.js","js/constructs/FirstLook.js",
"js/controllers/FilterGroupController.js","js/controllers/FilterControlCheckboxController.js","js/controllers/FilterControlTreeController.js","js/controllers/FilterControlListBoxController.js","js/controllers/FilterControlCalendarController.js","js/controllers/UserOptionsController.js","js/controllers/ChangePasswordDialog.js","js/controllers/SideBarCollapsibleContainerController.js","js/controllers/RepositoryCompositePageController.js","js/controllers/RepositoryCreatePageController.js","js/controllers/HandleMetadataController.js",
"js/controllers/ReviewTableDataController.js","js/controllers/ColumnMappingUIController.js","js/controllers/FormMappingUIController.js","js/controllers/CompositeMetricsController.js","js/controllers/TablesController.js","js/observes/RepositoryCreateAttrsObserve.js","js/controllers/RepositoryManagerController.js","js/controllers/NewDimensionDialog.js","js/controllers/NewMetricGroupDialog.js","js/controllers/MaltypedDataDialog.js","js/controllers/DynamicElementsDialog.js","js/controllers/SelectDataDialog.js",
"js/controllers/SegmentsDialog.js","js/controllers/DataDialog.js","js/controllers/EditMetricDialog.js","js/controllers/EditAttributeDialog.js","js/controllers/RootFilterDialog.js","js/controllers/RepositoryEditPageController.js","js/controllers/DeleteCommentDialog.js","js/controllers/EditCommentDialog.js","js/ClientSidePrinting.js","js/controllers/BookletCompositionController.js","js/models/BookletModel.js","js/controllers/SaveUpdateBookletDialog.js","js/observes/BookletsObserve.js","js/observes/BookletDefinObserve.js",
"js/controllers/BookletDefinitionInfoListController.js","js/controllers/CopyBookletDialog.js","js/controllers/BookletDefinitionInfoController.js","js/textSelector.js","js/observes/FormulaValidatorObserve.js","js/controllers/FormulaColumnDialog.js","js/controllers/DeleteReusableColumnDialog.js","js/controllers/FilmstripController.js","js/controllers/BookletViewController.js","js/controllers/ReportViewController.js","js/controllers/RangeFilterController.js","js/models/BookletRecipientsModel.js","js/observes/RangeFilterObserve.js",
"js/observes/SessionKeepAliveObserve.js","js/controllers/OnlyWhenColumnDialog.js","js/controllers/OnlyWhenCollapsibleContainer.js","js/controllers/FilterControlCheckboxOnlyWhen.js","js/controllers/FilterControlTreeOnlyWhen.js","js/controllers/FilterControlListBoxOnlyWhen.js","js/controllers/FilterControlCalendarOnlyWhen.js","js/observes/ConditionalMetricObserve.js","js/constructs/ReportGridUtil.js","js/controllers/ReportGridUtilController.js","js/observes/ResultDataObserve.js","js/controllers/ResultDefinitionDialog.js",
"js/controllers/ResultDefinitionController.js","js/controllers/ResultDataUtilController.js","js/controllers/MaximizeChartDialog.js","js/controllers/ReportFilterController.js","js/controllers/ReportFiltersController.js","js/controllers/ReportSortUtilController.js","js/controllers/GridHiddenColumnController.js","js/controllers/ShareBookletDialog.js","lib/sentrana/ConfigManager/StealConfigManagerModule.js","lib/sentrana/ConfigManager/ConfigManagerModel.js","lib/sentrana/ConfigManager/ConfigManagerController.js",
"lib/external/ace-editor/theme-chrome.js","lib/external/ace-editor/mode-xml.js","js/controllers/PivotAnalysisController.js","js/controllers/MaximizePivotDialog.js","js/controllers/ConfigurePivotDialog.js","js/controllers/PivotController.js","js/models/SavedFilterGroupModel.js","js/observes/SavedFilterObserve.js","js/controllers/SavedFiltersDialog.js","js/controllers/DeleteSavedFilterDialog.js","js/controllers/PivotChartController.js","js/controllers/PrintSetupDialog.js","js/controllers/ReportBuilderController.js",
"js/controllers/ReportColumnController.js","js/controllers/ReportFilterContainerController.js","js/controllers/ReportPageController.js","js/controllers/ReportController.js","js/controllers/ActionController.js","js/controllers/ReportActionButtonController.js","js/controllers/ReportVisualizationController.js","js/observes/ReportObserve.js","js/controllers/ReportElementViewController.js","js/controllers/ReportElementExecutionMonitorController.js","js/controllers/PageLayoutDemo.js","js/Styles.js","js/controllers/BIQController.js");
steal({id:"production.css",waits:!0,has:"vendor/datatables-plugins/css/dataTables.bootstrap.css vendor/datatables-colreorder/css/dataTables.colReorder.css lib/external/pixel-admin/stylesheets/bootstrap.css lib/external/pixel-admin/stylesheets/pixel-admin.css lib/external/pixel-admin/stylesheets/widgets.min.css lib/external/pixel-admin/stylesheets/rtl.min.css lib/external/pixel-admin/stylesheets/themes.min.css lib/external/pixel-admin/stylesheets/font-awesome.css lib/external/pixel-admin/stylesheets/pages.min.css vendor/jstree/themes/apple/style.css vendor/qtip2/jquery.qtip.min.css lib/sentrana/SentranaJQRangeSlider/rangeSliderOverride.css lib/external/SmartSidebar/css/smartsidebar.css lib/external/pivot/css/webix.css lib/external/pivot/css/pivot.css lib/sentrana/DialogControl/css/dialog.css lib/sentrana/AppSwitcher/css/appSwitcher.css lib/sentrana/Navigation/css/navigation.css lib/sentrana/Authentication/css/authentication.css lib/sentrana/SideBar/css/sidebar.css lib/sentrana/PlainList/css/plainlist.css lib/sentrana/PageWidget/css/page.css lib/sentrana/LayoutWidgets/css/layout-widget.css lib/sentrana/ReportChartCanJS/css/reportChart.css lib/sentrana/ReportGrid-bootstrap/css/reportGrid.css lib/sentrana/collapsible/css/collapsibleContainer.css lib/sentrana/ConfigManager/css/configmanager.css styles/styles.css styles/pg-savedreports.css styles/pg-builder.css styles/sideBarCollapsibleContainer.css styles/pg-repoman.css styles/onlywhencolumn.css styles/biqstyles.css styles/result-definition.css styles/analytic_report.css styles/page-layout.css".split(" ")});
steal("stealconfig.js","main.js","js/Libs.js","resources/AppResources.js","lib/external/stealjquery.js","vendor/json2/json2.js","vendor/jquery/jquery.js","vendor/jquery-ui/jquery-ui.min.js","lib/external/stealDatatables.js","vendor/datatables/js/jquery.dataTables.js","vendor/datatables-plugins/js/dataTables.bootstrap.js","vendor/datatables-colreorder/js/dataTables.colReorder.js","lib/external/CanJS/v2.2.6/can.custom.js","lib/external/stealHighcharts.js","vendor/highcharts-release/highcharts.js","vendor/highcharts-release/highcharts-more.js",
"vendor/highcharts-release/modules/exporting.src.js","vendor/highcharts-release/modules/data.src.js","lib/external/Highcharts-regression/highcharts-regression.js","lib/external/ace-editor/ace.js","lib/external/stealjqueryPlugins.js","vendor/jQuery.Hotkeys/jquery.hotkeys.js","vendor/jquery.cookie/jquery.cookie.js","vendor/jcarousel/jquery.jcarousel.js","lib/external/pixel-admin/stealPixelAdmin.js","lib/external/pixel-admin/javascripts/bootstrap.min.js","lib/external/stealBlockUI.js","vendor/blockui/jquery.blockUI.js",
"lib/external/stealjsTree.js","vendor/jstree/jquery.jstree.js","lib/external/stealQtip.js","vendor/qtip2/jquery.qtip.min.js","lib/external/stealSmartWizard.js","vendor/jQuery-Smart-Wizard/js/jquery.smartWizard.js","lib/external/Uploader/jquery.ajaxfileupload.js","lib/sentrana/SentranaJQRangeSlider/stealSentranaJQRangeSlider.js","lib/external/jQRangeSlider/StealjQRangeSlider.js","lib/external/jQRangeSlider/jQEditRangeSlider-min.js","lib/external/jquery.textarea.caret/jquery.textarea.caret.js","lib/external/stealsffjs.js",
"vendor/sffjs/sffjs.js","lib/external/SmartSidebar/stealSmartSidebar.js","lib/external/SmartSidebar/js/jquery.smartsidebar.js","lib/external/InputHints/jquery.inputhints.js","lib/external/pivot/StealPivot.js","js/Sentrana.js","lib/sentrana/Utils.js","lib/sentrana/DialogControl/stealDialogControl.js","lib/sentrana/DialogControl/SentranaDialog.js","lib/sentrana/DialogControl/ContentPluginDialog.js","lib/sentrana/DialogControl/ConfirmDialog.js","lib/sentrana/DialogControl/AlertDialog.js","lib/sentrana/DialogControl/ConfirmDialogYNC.js",
"lib/sentrana/AppShell/ApplicationShellController.js","lib/sentrana/AppShell/ApplicationStorage.js","lib/sentrana/AppShell/SessionKeepAliveController.js","lib/sentrana/AppShell/SentranaApplicationShell.js","lib/sentrana/Navigation/stealNavigation.js","lib/sentrana/Navigation/NavigationController.js","lib/sentrana/AppSwitcher/StealAppSwitcher.js","lib/sentrana/AppSwitcher/AppSwitcherController.js","lib/sentrana/Authentication/StealAuthenticationModule.js","lib/sentrana/Authentication/LoginController.js",
"lib/sentrana/Authentication/AuthenticationModel.js","lib/sentrana/ChangePassword/ChangePasswordController.js","lib/sentrana/AppShell/RouterController.js","lib/sentrana/WidgetsBase/stealWidgetsBase.js","lib/sentrana/WidgetsBase/Model/WidgetsStyleModelBase.js","lib/sentrana/WidgetsBase/Model/WidgetsPropertiesModelBase.js","lib/sentrana/WidgetsBase/Control/WidgetsControlBase.js","lib/sentrana/WidgetsBase/Control/WidgetsStyleControlBase.js","lib/sentrana/WidgetsBase/Control/WidgetsPropertiesControlBase.js",
"lib/sentrana/SideBar/stealSideBar.js","lib/sentrana/SideBar/SideBar.js","lib/sentrana/PlainList/stealPlainList.js","lib/sentrana/PlainList/PlainListStyleModel.js","lib/sentrana/PlainList/PlainListPropertyModel.js","lib/sentrana/PlainList/PlainListPropertyControl.js","lib/sentrana/PlainList/PlainList.js","lib/sentrana/PageWidget/StealPage.js","lib/sentrana/PageWidget/Page.js","lib/sentrana/PageWidget/PropertyModel.js","lib/sentrana/PageWidget/PropertyController.js","lib/sentrana/PageWidget/PageModel.js",
"lib/sentrana/LayoutWidgets/stealLayoutWidget.js","lib/sentrana/LayoutWidgets/LayoutWidget.js","lib/sentrana/ReportChartCanJS/StealReportChart.js","lib/sentrana/ReportChartCanJS/SentranaEnums.js","lib/sentrana/ReportChartCanJS/ReportChartOptions.js","lib/sentrana/ReportChartCanJS/ReportChartOptionsDialog.js","lib/sentrana/ReportChartCanJS/ReportChart.js","lib/sentrana/ReportChartCanJS/PivotChart/PivotChartOptions.js","lib/sentrana/ReportChartCanJS/PivotChart/PivotChartDataAdapter.js","lib/sentrana/ReportChartCanJS/PivotChart/PivotChart.js",
"lib/sentrana/ReportGrid-bootstrap/StealReportGrid.js","lib/sentrana/ReportGrid-bootstrap/ReportGrid.js","lib/sentrana/ReportText/stealReportText.js","lib/sentrana/ReportText/ReportText.js","lib/sentrana/GoldenLayout/StealGoldenLayout.js","js/controllers/BIQLayoutController.js","js/controllers/TopNavDWSelectorController.js","js/controllers/TopNavController.js","js/controllers/FirstLookDialog.js","js/controllers/FilterControlController.js","lib/sentrana/collapsible/StealCollapsibleContainer.js","lib/sentrana/collapsible/CollapsibleContainer.js",
"js/controllers/RepositoryMetadataDialog.js","js/controllers/DuplicateReportDialog.js","js/controllers/ShareReportDialog.js","js/controllers/DeleteReportDialog.js","js/controllers/DeleteBookletDialog.js","js/models/ReusableColumnsModel.js","js/constructs/DataWarehouseRepository.js","js/controllers/DataWarehouseAsControlsController.js","js/observes/ObjectSelectionObserve.js","js/observes/ReportDefinObserve.js","js/controllers/ReportDefnEditorController.js","js/controllers/ReportUnitController.js",
"js/controllers/TemplateUnitController.js","js/controllers/DiagnosticsController.js","js/controllers/PageBySelectorController.js","js/controllers/ExecutionMonitorController.js","js/observes/ExecutionMonitorObserve.js","js/controllers/DrillMenuController.js","js/controllers/TwoRibbonNavBarController.js","js/observes/TwoRibbonNavBarObserve.js","js/observes/TopNavBarObserve.js","js/controllers/SaveAsReportDialog.js","js/controllers/SaveReportDialog.js","js/constructs/ReportFilterUtil.js","js/controllers/BuilderPageController.js",
"js/models/ReportRecipientsModel.js","js/models/CommentItemModel.js","js/observes/CommentStreamObserve.js","js/controllers/CommentStreamController.js","js/models/ReportDefinitionInfoModel.js","js/controllers/ReportDefinitionInfoController.js","js/controllers/ReportDefinitionInfoListController.js","js/observes/ViewListObserve.js","js/observes/ReportDefinitionInfoListObserve.js","js/controllers/SavedReportsPageController.js","js/controllers/DWSelectorController.js","js/observes/ChoicesObserve.js","js/constructs/FirstLook.js",
"js/controllers/FilterGroupController.js","js/controllers/FilterControlCheckboxController.js","js/controllers/FilterControlTreeController.js","js/controllers/FilterControlListBoxController.js","js/controllers/FilterControlCalendarController.js","js/controllers/UserOptionsController.js","js/controllers/ChangePasswordDialog.js","js/controllers/SideBarCollapsibleContainerController.js","js/controllers/RepositoryCompositePageController.js","js/controllers/RepositoryCreatePageController.js","js/controllers/HandleMetadataController.js",
"js/controllers/ReviewTableDataController.js","js/controllers/ColumnMappingUIController.js","js/controllers/FormMappingUIController.js","js/controllers/CompositeMetricsController.js","js/controllers/TablesController.js","js/observes/RepositoryCreateAttrsObserve.js","js/controllers/RepositoryManagerController.js","js/controllers/NewDimensionDialog.js","js/controllers/NewMetricGroupDialog.js","js/controllers/MaltypedDataDialog.js","js/controllers/DynamicElementsDialog.js","js/controllers/SelectDataDialog.js",
"js/controllers/SegmentsDialog.js","js/controllers/DataDialog.js","js/controllers/EditMetricDialog.js","js/controllers/EditAttributeDialog.js","js/controllers/RootFilterDialog.js","js/controllers/RepositoryEditPageController.js","js/controllers/DeleteCommentDialog.js","js/controllers/EditCommentDialog.js","js/ClientSidePrinting.js","js/controllers/BookletCompositionController.js","js/models/BookletModel.js","js/controllers/SaveUpdateBookletDialog.js","js/observes/BookletsObserve.js","js/observes/BookletDefinObserve.js",
"js/controllers/BookletDefinitionInfoListController.js","js/controllers/CopyBookletDialog.js","js/controllers/BookletDefinitionInfoController.js","js/textSelector.js","js/observes/FormulaValidatorObserve.js","js/controllers/FormulaColumnDialog.js","js/controllers/DeleteReusableColumnDialog.js","js/controllers/FilmstripController.js","js/controllers/BookletViewController.js","js/controllers/ReportViewController.js","js/controllers/RangeFilterController.js","js/models/BookletRecipientsModel.js","js/observes/RangeFilterObserve.js",
"js/observes/SessionKeepAliveObserve.js","js/controllers/OnlyWhenColumnDialog.js","js/controllers/OnlyWhenCollapsibleContainer.js","js/controllers/FilterControlCheckboxOnlyWhen.js","js/controllers/FilterControlTreeOnlyWhen.js","js/controllers/FilterControlListBoxOnlyWhen.js","js/controllers/FilterControlCalendarOnlyWhen.js","js/observes/ConditionalMetricObserve.js","js/constructs/ReportGridUtil.js","js/controllers/ReportGridUtilController.js","js/observes/ResultDataObserve.js","js/controllers/ResultDefinitionDialog.js",
"js/controllers/ResultDefinitionController.js","js/controllers/ResultDataUtilController.js","js/controllers/MaximizeChartDialog.js","js/controllers/ReportFilterController.js","js/controllers/ReportFiltersController.js","js/controllers/ReportSortUtilController.js","js/controllers/GridHiddenColumnController.js","js/controllers/ShareBookletDialog.js","lib/sentrana/ConfigManager/StealConfigManagerModule.js","lib/sentrana/ConfigManager/ConfigManagerModel.js","lib/sentrana/ConfigManager/ConfigManagerController.js",
"lib/external/ace-editor/theme-chrome.js","lib/external/ace-editor/mode-xml.js","js/controllers/PivotAnalysisController.js","js/controllers/MaximizePivotDialog.js","js/controllers/ConfigurePivotDialog.js","js/controllers/PivotController.js","js/models/SavedFilterGroupModel.js","js/observes/SavedFilterObserve.js","js/controllers/SavedFiltersDialog.js","js/controllers/DeleteSavedFilterDialog.js","js/controllers/PivotChartController.js","js/controllers/PrintSetupDialog.js","js/controllers/ReportBuilderController.js",
"js/controllers/ReportColumnController.js","js/controllers/ReportFilterContainerController.js","js/controllers/ReportPageController.js","js/controllers/ReportController.js","js/controllers/ActionController.js","js/controllers/ReportActionButtonController.js","js/controllers/ReportVisualizationController.js","js/observes/ReportObserve.js","js/controllers/ReportElementViewController.js","js/controllers/ReportElementExecutionMonitorController.js","js/controllers/PageLayoutDemo.js","js/Styles.js","js/controllers/BIQController.js");
steal.pushPending();steal.config({map:{"*":{"jquery/jquery.js":"jquery",jquery:"lib/external/jquery/jquery-1.10.2/jquery-1.10.2.min.js",funcunit:"lib/external/funcunit"}},paths:{"models/":"js/","controllers/":"js/","fixtures/":"js/"},shim:{jquery:{exports:"jQuery"},"lib/external/pivot/js/webix.js":{packaged:!1},"lib/external/pivot/js/pivot.js":{packaged:!1}},ext:{js:"js",css:"css",ejs:"can/view/ejs/ejs.js"}});steal.executed("stealconfig.js");
steal("js/Libs.js").then("js/Styles.js").then("js/controllers/BIQController.js",function(){$(document).ready(function(){$(function(){Highcharts.setOptions({chart:{style:{fontFamily:'"Tahoma", "Verdana", "Arial", sans-serif'}}});$.ajaxSetup({cache:!1});$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(a){this.options.title?a.html(this.options.title):a.html("&#160;")}}));$.browser={};var a;/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?($.browser.mozilla="mozilla",a=parseFloat(Number(RegExp.$1))):
/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent)?($.browser.webkit="webkit",a=parseFloat(Number(RegExp.$1))):/MSIE[\s](\d+\.\d+)/.test(navigator.userAgent)&&($.browser.msie="msie",a=parseFloat(Number(RegExp.$1)));$.browser.version=a;$("#biq-container").sentrana_biq().control()})})});steal.executed("main.js");
steal("resources/AppResources.js","lib/external/stealjquery.js").then("lib/external/stealDatatables.js").then("lib/external/CanJS/v2.2.6/can.custom.js","lib/external/stealHighcharts.js","lib/external/ace-editor/ace.js","lib/external/stealjqueryPlugins.js").then("lib/external/pixel-admin/stealPixelAdmin.js","lib/external/stealBlockUI.js","lib/external/stealjsTree.js","lib/external/stealQtip.js","lib/external/stealSmartWizard.js","lib/external/Uploader/jquery.ajaxfileupload.js","lib/sentrana/SentranaJQRangeSlider/stealSentranaJQRangeSlider.js",
"lib/external/jQRangeSlider/StealjQRangeSlider.js","lib/external/jquery.textarea.caret/jquery.textarea.caret.js","lib/external/stealsffjs.js","lib/external/SmartSidebar/stealSmartSidebar.js","lib/external/InputHints/jquery.inputhints.js").then("lib/external/pivot/StealPivot.js").then("js/Sentrana.js").then("lib/sentrana/Utils.js","lib/sentrana/DialogControl/stealDialogControl.js").then("lib/sentrana/AppShell/ApplicationShellController.js","lib/sentrana/AppShell/RouterController.js","lib/sentrana/WidgetsBase/stealWidgetsBase.js").then("lib/sentrana/SideBar/stealSideBar.js",
"lib/sentrana/PlainList/stealPlainList.js","lib/sentrana/PageWidget/StealPage.js","lib/sentrana/LayoutWidgets/stealLayoutWidget.js").then("lib/sentrana/ReportChartCanJS/StealReportChart.js","lib/sentrana/ReportGrid-bootstrap/StealReportGrid.js","lib/sentrana/ReportText/stealReportText.js").then("lib/sentrana/GoldenLayout/StealGoldenLayout.js").then("js/controllers/BIQLayoutController.js","js/controllers/TopNavDWSelectorController.js","js/controllers/TopNavController.js","js/controllers/FirstLookDialog.js",
"js/controllers/FilterControlController.js","lib/sentrana/collapsible/StealCollapsibleContainer.js").then("js/controllers/RepositoryMetadataDialog.js","js/controllers/DuplicateReportDialog.js","js/controllers/ShareReportDialog.js","js/controllers/DeleteReportDialog.js","js/controllers/DeleteBookletDialog.js","js/models/ReusableColumnsModel.js","js/constructs/DataWarehouseRepository.js","js/controllers/DataWarehouseAsControlsController.js","js/observes/ObjectSelectionObserve.js","js/observes/ReportDefinObserve.js",
"js/controllers/ReportDefnEditorController.js","js/controllers/ReportUnitController.js","js/controllers/TemplateUnitController.js","js/controllers/DiagnosticsController.js","js/controllers/PageBySelectorController.js","js/controllers/ExecutionMonitorController.js","js/observes/ExecutionMonitorObserve.js","js/controllers/DrillMenuController.js","js/controllers/TwoRibbonNavBarController.js","js/observes/TwoRibbonNavBarObserve.js","js/observes/TopNavBarObserve.js","js/controllers/SaveAsReportDialog.js",
"js/controllers/SaveReportDialog.js","js/constructs/ReportFilterUtil.js","js/controllers/BuilderPageController.js","js/models/ReportRecipientsModel.js","js/models/CommentItemModel.js","js/observes/CommentStreamObserve.js","js/controllers/CommentStreamController.js","js/models/ReportDefinitionInfoModel.js","js/controllers/ReportDefinitionInfoController.js","js/controllers/ReportDefinitionInfoListController.js","js/observes/ViewListObserve.js","js/observes/ReportDefinitionInfoListObserve.js","js/controllers/SavedReportsPageController.js",
"js/controllers/DWSelectorController.js","js/observes/ChoicesObserve.js","js/constructs/FirstLook.js","js/controllers/FilterGroupController.js","js/controllers/FilterControlCheckboxController.js","js/controllers/FilterControlTreeController.js","js/controllers/FilterControlListBoxController.js","js/controllers/FilterControlCalendarController.js","js/controllers/UserOptionsController.js","js/controllers/ChangePasswordDialog.js","js/controllers/SideBarCollapsibleContainerController.js","js/controllers/RepositoryCompositePageController.js",
"js/controllers/RepositoryCreatePageController.js","js/controllers/HandleMetadataController.js","js/controllers/ReviewTableDataController.js","js/controllers/ColumnMappingUIController.js","js/controllers/FormMappingUIController.js","js/controllers/CompositeMetricsController.js","js/controllers/TablesController.js","js/observes/RepositoryCreateAttrsObserve.js","js/controllers/RepositoryManagerController.js","js/controllers/NewDimensionDialog.js","js/controllers/NewMetricGroupDialog.js","js/controllers/MaltypedDataDialog.js",
"js/controllers/DynamicElementsDialog.js","js/controllers/SelectDataDialog.js","js/controllers/SegmentsDialog.js","js/controllers/DataDialog.js","js/controllers/EditMetricDialog.js","js/controllers/EditAttributeDialog.js","js/controllers/RootFilterDialog.js","js/controllers/RepositoryEditPageController.js","js/controllers/DeleteCommentDialog.js","js/controllers/EditCommentDialog.js","js/ClientSidePrinting.js","js/controllers/BookletCompositionController.js","js/models/BookletModel.js","js/controllers/SaveUpdateBookletDialog.js",
"js/observes/BookletsObserve.js","js/observes/BookletDefinObserve.js","js/controllers/BookletDefinitionInfoListController.js","js/controllers/CopyBookletDialog.js","js/controllers/BookletDefinitionInfoController.js","js/textSelector.js","js/observes/FormulaValidatorObserve.js","js/controllers/FormulaColumnDialog.js","js/controllers/DeleteReusableColumnDialog.js","js/controllers/FilmstripController.js","js/controllers/BookletViewController.js","js/controllers/ReportViewController.js","js/models/BookletRecipientsModel.js",
"js/observes/RangeFilterObserve.js","js/controllers/RangeFilterController.js","js/observes/SessionKeepAliveObserve.js","js/controllers/OnlyWhenColumnDialog.js","js/controllers/OnlyWhenCollapsibleContainer.js","js/controllers/FilterControlCheckboxOnlyWhen.js","js/controllers/FilterControlTreeOnlyWhen.js","js/controllers/FilterControlListBoxOnlyWhen.js","js/controllers/FilterControlCalendarOnlyWhen.js","js/observes/ConditionalMetricObserve.js","js/constructs/ReportGridUtil.js","js/controllers/ReportGridUtilController.js",
"js/observes/ResultDataObserve.js","js/controllers/ResultDefinitionDialog.js","js/controllers/ResultDefinitionController.js","js/controllers/ResultDataUtilController.js","js/controllers/MaximizeChartDialog.js","js/controllers/ReportFilterController.js","js/controllers/ReportFiltersController.js","js/controllers/ReportSortUtilController.js","js/controllers/GridHiddenColumnController.js").then("js/controllers/ShareBookletDialog.js","lib/sentrana/ConfigManager/StealConfigManagerModule.js","js/controllers/PivotAnalysisController.js",
"js/controllers/MaximizePivotDialog.js","js/controllers/ConfigurePivotDialog.js","js/controllers/PivotController.js","js/models/SavedFilterGroupModel.js","js/observes/SavedFilterObserve.js","js/controllers/SavedFiltersDialog.js","js/controllers/DeleteSavedFilterDialog.js","js/controllers/PivotChartController.js","js/controllers/PrintSetupDialog.js","js/controllers/ReportBuilderController.js","js/controllers/ReportColumnController.js","js/controllers/ReportFilterContainerController.js","js/controllers/ReportPageController.js",
"js/controllers/ReportController.js","js/controllers/ActionController.js","js/controllers/ReportActionButtonController.js","js/controllers/ReportVisualizationController.js","js/observes/ReportObserve.js","js/controllers/ReportElementViewController.js","js/controllers/ReportElementExecutionMonitorController.js","js/controllers/ReportActionButtonController.js","js/controllers/PageLayoutDemo.js");steal.executed("js/Libs.js");
var app_resources={app_msg:{session_time_out:"Session has expired.",share_report:{deleting_recipients:"Deleting the recipients list...",update_recipients:"Updating the recipients list..."},ajax_error:{title:"Error",HTTP_0:"Please check your network and services.",HTTP_403:"Please log in",HTTP_404:"Requested URL not found.",HTTP_500:"The server has encountered an unexpected condition which prevented it from fulfilling the request. Please try again later.",ParserError:"Invalid data.",Timeout:"Request timed out.",
Abort:"Request aborted.",UncaughtError:"The server is currently unavailable. Please try again later.",HTTP_503:"The server is currently unavailable. Please try again later.",recipient:{load:{failed:{dialog_title:"Failed to Load Recipient List.",dialog_msg:"Recipients load failed. Please check your Internet connection and try again."}}}},method_map:{no_entry:{dialog_title:"No entry in the method map.",dialog_msg:"There is no entry in the method map for service method {0}. Please update serviceInfo.json!"}},
logout:{failed:{dialog_title:"INTERNAL ERROR.",dialog_msg:"INTERNAL ERROR: Logout failed."}},session_out:{dialog_title:"You Have Been Logged Out",dialog_msg:"You have been logged out due to inactivity. Please login again if you would like to continue."},report_definition:{column_name_conflict:{dialog_title:"Column Name Conflict",dialog_msg:"This column name already exists in the report definition."},execution:{required_dialog_title:"Unable to Save",required_dialog_msg:"Please execute the report before saving."},
validation:{column:{required_dialog_title:"No Columns Added",required_dialog_msg:"You need to add columns (metrics or attributes) to be able to view the report."},element:{required_dialog_title:"No Elements Selected",required_dialog_msg:"You must select at least one element from each of the following attributes to satisfy a valid report definition:\n {0}"},metrics:{already_exists:{dialog_title:"Metric Already Exists",dialog_msg:"This metric already exists in this report."}},attribute:{form:{not_selected:{dialog_title:"Select at Least One Attribute Form",
dialog_msg:"You must select at least one attribute form. If you do not want any forms displayed for this attribute, please remove it from the report."}}}},filter:{create_msg:"You can now click on a specific value within one of the filters to create a filtered metric.",update_msg:"You can now click on a specific value within one of the filters to modify this filtered metric."}},report_render:{error:{dialog_title:"INTERNAL ERROR.",dialog_msg:"INTERNAL ERROR: Unable to render the report definition: null 'report'"}},
repository:{not_found:{dialog_title:"No Repository Found",dialog_msg:"User: {0} does not have access to any repositories"},loading_error_msg:"Error loading repository. Please report to Administrator",loading_with_user_validation_msg:"Validating User and Loading Data Warehouse list, please wait...",loading_msg:"Loading Data Warehouse, please wait..."},save_changes:{dialog_title:"Save Changes",dialog_msg:"Do you want to save the changes to {0}?"},booklet:{duplicate_report:{dialog_title:"Report Already Exists in this Booklet",
dialog_msg_for_single:"Report {0} already exists in this booklet. Do you want to add another copy?",dialog_msg_for_multiple:"Following Report(s) <br/> <br/> {0} <br/><br/> already exist in this booklet. Do you want to add another copy?"}},login:{malformed_response:"Internal Error: Malformed Login response. Please report to an administrator.",empty_user_name:"Please specify a user name",empty_password:"Empty password not allowed",email_address_required:"Please specify your email address.",unrecognize_identity:"Unrecognized username and password. Please try again.",
incorrect_emailaddress:"Your email address was not recognized. Please try again or contact your administrator",invalid_format_emailaddress:"Invalid format of Email address",password_updated:"Your new password has been sent to your email address. Please login using the new password.",username_sent:"Your username has been sent to your email address.",malformed_response_forgotpassword:"Internal Error:  Please report to Sentrana for investigation."},update_operation:{failed:"Update failed. Check Internet connection and try again."},
save_operation:{failed:"Save failed. Check Internet connection and try again."},delete_operation:{failed:"Delete failed. Check Internet connection and try again."},copy_operation:{failed:"Copy failed. Check Internet connection and try again."},change_password:{error_msg:"Password update did not go through. Please try again.",success_msg:"Password has been updated successfully. Please log in with your new credentials. Logging out now...",wrong_current_password_msg:"Invalid password. Please try again.",
same_password_msg:"Choose a password you haven't previously used with this account.",empty_new_password_msg:"New password cannot be empty.",empty_password_msg:"Password field cannot be left blank.",password_not_match_msg:"Passwords do not match.",invalidPasswordformateMessage:"Invalid password. Valid passwords must contain at least eight characters, no spaces, both lowercase and uppercase characters, at least one numeric digit, and at least one special character (any character not 0-9, a-z, A-Z).",
passwordPolicyViolatedMessage:"Password policy violated. You cannot use recently used 3 passwords as New Password"},drill_down:{key_not_found_msg:"We are unable to get the drill options. The base report can no longer be retrieved. Please re-execute the report and try the drill again.",attribute_not_found_msg:"We are unable to parse the set of selected elements for this drill operation. ",drill_down_unable_msg:"We are unable to perform a drill with these elements. ",cannot_go_deeper_hierarchy:"You cannot drill any deeper<br/>in the hierarchy.",
cannot_go_deeper_report:"You cannot drill any deeper<br/>into the report.",cannot_go_deeper_report_defintion_changed:"You cannot drill down as report definition has been changed.",cannot_go_rollup_report_defintion_changed:"You cannot roll up as report definition has been changed.",report_defintion_changed_confirm_drill:"Report definition has been changed. Your changes will be lost, Are you sure to drill down?",report_defintion_changed_confirm_back:"Report definition has been changed. Your changes will be lost, Are you sure to go back to base report?",
options:{no_data_returned:"No data returned for drill options."}},report_execution:{no_data_returned:"No data returned.",report_error:"Error",success_with_no_data:"No results found.",success:"Success.",canceled_by_user:"Request was cancelled by the user.",large_dataset:"An error occurred while processing your request. You may be trying to return a result set that is too large. Please try refining your query, using either the available filters or column selection and try again.",failed:"Failed",processing_msg:"Executing..."},
report_load:{failed:"Report load failed. Check connection and try again.",processing:"Loading saved reports..."},booklet_load:{report_loading_msg:"Loading booklet reports..."},navigation:{redirect_last_page:"Redirecting you to the last accessed page...",switch_repository:"Switching data repository, please wait..."},booklet_operation:{create:{no_report_error_msg:"Unable to create a booklet because there are no saved reports."},update:{success_msg:"Booklet successfully updated"},save:{processing_msg:"Saving the booklet..."},
remove:{processing_msg:"Deleting the booklet...",success_msg:"Booklet deleted successfully"}},report_operation:{save:{processing_msg:"Saving the report..."},update:{success_msg:"Success."},remove:{processing_msg:"Deleting the report..."},copy:{processing_msg:"Copying the report...",success_msg:"Report copied successfully"}},derived_column:{formula:{validating_msg:"Validating formula..."},validation:{empty_column_name_msg:"Column Name cannot be empty!",column_cannot_contain_invalid_char:"Column Name cannot contain {0}",
empty_formula_msg:"Formula cannot be empty!",duplicate_column_name:"Column name already in use!"}},comment_operation:{remove:{processing_msg:"Deleting the comment...",confirm_msg:"Please confirm that you would like to delete the following comment:"},update:{processing_msg:"Updating the comment..."}},column_filter:{too_many_unique_column:"There are too many unique values to filter",slider_not_possible:"There is only one row of data. Slider is not required.",no_result:"No items match your search.",
load_error:"Error loading filter elements."},report_filter:{no_data_returned:"Reverting new filter since it returns no data"}},runTimerBeforeSessionExpireInMinutes:5,MAX_VIEW_DIALOG_PADDING:40,UPDATE_SHARING_INFORMATION_IN_SECONDS:20,print_config:{columns_in_page:4,rows_in_page:22,page_orientation:"portrait",page_size:"page-size-letter-portrait"}};steal.executed("resources/AppResources.js");steal("vendor/json2/json2.js","vendor/jquery/jquery.js").then("vendor/jquery-ui/jquery-ui.min.js");steal.executed("lib/external/stealjquery.js");
"object"!==typeof JSON&&(JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(){return this.valueOf()}function c(a){i.lastIndex=0;return i.test(a)?'"'+a.replace(i,function(a){var b=n[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,b){var e,m,f,g,h=k,i,j=b[a];j&&"object"===typeof j&&"function"===typeof j.toJSON&&(j=j.toJSON(a));"function"===typeof o&&(j=o.call(b,a,j));switch(typeof j){case "string":return c(j);case "number":return isFinite(j)?""+j:"null";
case "boolean":case "null":return""+j;case "object":if(!j)return"null";k+=l;i=[];if("[object Array]"===Object.prototype.toString.apply(j)){g=j.length;for(e=0;e<g;e+=1)i[e]=d(e,j)||"null";f=0===i.length?"[]":k?"[\n"+k+i.join(",\n"+k)+"\n"+h+"]":"["+i.join(",")+"]";k=h;return f}if(o&&"object"===typeof o){g=o.length;for(e=0;e<g;e+=1)"string"===typeof o[e]&&(m=o[e],(f=d(m,j))&&i.push(c(m)+(k?": ":":")+f))}else for(m in j)Object.prototype.hasOwnProperty.call(j,m)&&(f=d(m,j))&&i.push(c(m)+(k?": ":":")+
f);f=0===i.length?"{}":k?"{\n"+k+i.join(",\n"+k)+"\n"+h+"}":"{"+i.join(",")+"}";k=h;return f}}var e=/^[\],:{}\s]*$/,h=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,g=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,i=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!==
typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=b,Number.prototype.toJSON=b,String.prototype.toJSON=b);var k,l,n,o;"function"!==typeof JSON.stringify&&(n={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,
b,c){var m;l=k="";if("number"===typeof c)for(m=0;m<c;m+=1)l+=" ";else"string"===typeof c&&(l=c);if((o=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var m,e,f=a[d];if(f&&"object"===typeof f)for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&(e=c(f,m),void 0!==e?f[m]=e:delete f[m]);return b.call(a,d,f)}var d,a=""+a;j.lastIndex=0;j.test(a)&&(a=
a.replace(j,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(e.test(a.replace(h,"@").replace(g,"]").replace(f,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();steal.executed("vendor/json2/json2.js");
(function(a,b){"object"===typeof module&&"object"===typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return b(a)}:b(a)})("undefined"!==typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=p.type(a);return"function"===c||p.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function d(a,b,c){if(p.isFunction(b))return p.grep(a,function(a,d){return!!b.call(a,
d,a)!==c});if(b.nodeType)return p.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Ia.test(b))return p.filter(b,a,c);b=p.filter(b,a)}return p.grep(a,function(a){return 0<=p.inArray(a,b)!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function h(a){var b=ba[a]={};p.each(a.match(U)||[],function(a,c){b[c]=!0});return b}function g(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",f,!1),a.removeEventListener("load",f,!1)):(R.detachEvent("onreadystatechange",
f),a.detachEvent("onload",f))}function f(){if(R.addEventListener||"load"===event.type||"complete"===R.readyState)g(),p.ready()}function i(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(qa,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Ab.test(c)?p.parseJSON(c):c}catch(d){}p.data(a,b,c)}else c=void 0;return c}function j(a){for(var b in a)if(!("data"===b&&p.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}
function k(a,b,c,d){if(p.acceptData(a)){var m=p.expando,e=a.nodeType,f=e?p.cache:a,g=e?a[m]:a[m]&&m;if(g&&f[g]&&(d||f[g].data)||!(void 0===c&&"string"===typeof b)){g||(g=e?a[m]=la.pop()||p.guid++:m);f[g]||(f[g]=e?{}:{toJSON:p.noop});if("object"===typeof b||"function"===typeof b)d?f[g]=p.extend(f[g],b):f[g].data=p.extend(f[g].data,b);a=f[g];d||(a.data||(a.data={}),a=a.data);void 0!==c&&(a[p.camelCase(b)]=c);"string"===typeof b?(c=a[b],null==c&&(c=a[p.camelCase(b)])):c=a;return c}}}function l(a,b,c){if(p.acceptData(a)){var d,
m,e=a.nodeType,f=e?p.cache:a,g=e?a[p.expando]:p.expando;if(f[g]){if(b&&(d=c?f[g]:f[g].data)){p.isArray(b)?b=b.concat(p.map(b,p.camelCase)):b in d?b=[b]:(b=p.camelCase(b),b=b in d?[b]:b.split(" "));for(m=b.length;m--;)delete d[b[m]];if(c?!j(d):!p.isEmptyObject(d))return}if(c||!(delete f[g].data,!j(f[g])))e?p.cleanData([a],!0):L.deleteExpando||f!=f.window?delete f[g]:f[g]=null}}}function n(){return!0}function o(){return!1}function t(){try{return R.activeElement}catch(a){}}function s(a){var b=ub.split("|"),
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function q(a,b){var c,d,m=0,e=typeof a.getElementsByTagName!==xa?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==xa?a.querySelectorAll(b||"*"):void 0;if(!e){e=[];for(c=a.childNodes||a;null!=(d=c[m]);m++)!b||p.nodeName(d,b)?e.push(d):p.merge(e,q(d,b))}return void 0===b||b&&p.nodeName(a,b)?p.merge([a],e):e}function m(a){Da.test(a.type)&&(a.defaultChecked=a.checked)}function r(a,b){return p.nodeName(a,
"table")&&p.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function u(a){a.type=(null!==p.find.attr(a,"type"))+"/"+a.type;return a}function w(a){var b=Ga.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function y(a,b){for(var c,d=0;null!=(c=a[d]);d++)p._data(c,"globalEval",!b||p._data(b[d],"globalEval"))}function v(a,b){if(1===b.nodeType&&p.hasData(a)){var c,d,m;d=p._data(a);var e=p._data(b,d),
f=d.events;if(f)for(c in delete e.handle,e.events={},f){d=0;for(m=f[c].length;d<m;d++)p.event.add(b,c,f[c][d])}e.data&&(e.data=p.extend({},e.data))}}function z(b,c){var d,m=p(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(m[0]))?d.display:p.css(m[0],"display");m.detach();return e}function E(a){var b=R,c=eb[a];if(!c){c=z(a,b);if("none"===c||!c)Bb=(Bb||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Bb[0].contentWindow||
Bb[0].contentDocument).document,b.write(),b.close(),c=z(a,b),Bb.detach();eb[a]=c}return c}function H(a,b){return{get:function(){var c=a();if(null!=c)if(c)delete this.get;else return(this.get=b).apply(this,arguments)}}}function C(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,m=fb.length;m--;)if(b=fb[m]+c,b in a)return b;return d}function N(a,b){for(var c,d,m,e=[],f=0,g=a.length;f<g;f++)if(d=a[f],d.style)if(e[f]=p._data(d,"olddisplay"),c=d.style.display,b)!e[f]&&"none"===
c&&(d.style.display=""),""===d.style.display&&gb(d)&&(e[f]=p._data(d,"olddisplay",E(d.nodeName)));else if(m=gb(d),c&&"none"!==c||!m)p._data(d,"olddisplay",m?c:p.css(d,"display"));for(f=0;f<g;f++)if(d=a[f],d.style&&(!b||"none"===d.style.display||""===d.style.display))d.style.display=b?e[f]||"":"none";return a}function T(a,b,c){return(a=Hb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function K(a,b,c,d,m){for(var b=c===(d?"border":"content")?4:"width"===b?1:0,e=0;4>b;b+=2)"margin"===c&&(e+=p.css(a,
c+Aa[b],!0,m)),d?("content"===c&&(e-=p.css(a,"padding"+Aa[b],!0,m)),"margin"!==c&&(e-=p.css(a,"border"+Aa[b]+"Width",!0,m))):(e+=p.css(a,"padding"+Aa[b],!0,m),"padding"!==c&&(e+=p.css(a,"border"+Aa[b]+"Width",!0,m)));return e}function G(a,b,c){var d=!0,m="width"===b?a.offsetWidth:a.offsetHeight,e=ma(a),f=L.boxSizing&&"border-box"===p.css(a,"boxSizing",!1,e);if(0>=m||null==m){m=Y(a,b,e);if(0>m||null==m)m=a.style[b];if(ya.test(m))return m;d=f&&(L.boxSizingReliable()||m===a.style[b]);m=parseFloat(m)||
0}return m+K(a,b,c||(f?"border":"content"),d,e)+"px"}function B(a,b,c,d,m){return new B.prototype.init(a,b,c,d,m)}function W(){setTimeout(function(){vb=void 0});return vb=p.now()}function J(a,b){for(var c,d={height:a},m=0,b=b?1:0;4>m;m+=2-b)c=Aa[m],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function Q(a,b,c){for(var d,m=(ab[b]||[]).concat(ab["*"]),e=0,f=m.length;e<f;e++)if(d=m[e].call(c,b,a))return d}function X(a,b){var c,d,m,e,f;for(c in a)if(d=p.camelCase(c),m=b[d],e=a[c],
p.isArray(e)&&(m=e[1],e=a[c]=e[0]),c!==d&&(a[d]=e,delete a[c]),(f=p.cssHooks[d])&&"expand"in f)for(c in e=f.expand(e),delete a[d],e)c in a||(a[c]=e[c],b[c]=m);else b[d]=m}function S(a,b,c){var d,m=0,e=jb.length,f=p.Deferred().always(function(){delete g.elem}),g=function(){if(d)return!1;for(var b=vb||W(),b=Math.max(0,r.startTime+r.duration-b),c=1-(b/r.duration||0),m=0,e=r.tweens.length;m<e;m++)r.tweens[m].run(c);f.notifyWith(a,[r,c,b]);if(1>c&&e)return b;f.resolveWith(a,[r]);return!1},r=f.promise({elem:a,
props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:vb||W(),duration:c.duration,tweens:[],createTween:function(b,c){var d=p.Tween(a,r.opts,b,c,r.opts.specialEasing[b]||r.opts.easing);r.tweens.push(d);return d},stop:function(b){var c=0,m=b?r.tweens.length:0;if(d)return this;for(d=!0;c<m;c++)r.tweens[c].run(1);b?f.resolveWith(a,[r,b]):f.rejectWith(a,[r,b]);return this}}),c=r.props;for(X(c,r.opts.specialEasing);m<e;m++)if(b=jb[m].call(r,a,c,r.opts))return b;
p.map(c,Q,r);p.isFunction(r.opts.start)&&r.opts.start.call(a,r);p.fx.timer(p.extend(g,{elem:a,anim:r,queue:r.opts.queue}));return r.progress(r.opts.progress).done(r.opts.done,r.opts.complete).fail(r.opts.fail).always(r.opts.always)}function V(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,m=0,e=b.toLowerCase().match(U)||[];if(p.isFunction(c))for(;d=e[m++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function D(a,b,c,d){function m(g){var r;
e[g]=!0;p.each(a[g]||[],function(a,g){var h=g(b,c,d);if("string"===typeof h&&!f&&!e[h])return b.dataTypes.unshift(h),m(h),!1;if(f)return!(r=h)});return r}var e={},f=a===Ob;return m(b.dataTypes[0])||!e["*"]&&m("*")}function I(a,b){var c,d,m=p.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((m[d]?a:c||(c={}))[d]=b[d]);c&&p.extend(!0,a,c);return a}function O(a,b,c,d){var m;if(p.isArray(b))p.each(b,function(b,m){c||Xb.test(a)?d(a,m):O(a+"["+("object"===typeof m?b:"")+"]",m,c,d)});else if(!c&&
"object"===p.type(b))for(m in b)O(a+"["+m+"]",b[m],c,d);else d(a,b)}function ia(){try{return new a.XMLHttpRequest}catch(b){}}function M(a){return p.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var la=[],sa=la.slice,P=la.concat,ga=la.push,ea=la.indexOf,aa={},Ja=aa.toString,na=aa.hasOwnProperty,L={},p=function(a,b){return new p.fn.init(a,b)},ua=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bb=/^-ms-/,wb=/-([\da-z])/gi,Xa=function(a,b){return b.toUpperCase()};p.fn=p.prototype={jquery:"1.11.3",
constructor:p,selector:"",length:0,toArray:function(){return sa.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:sa.call(this)},pushStack:function(a){a=p.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,b){return p.each(this,a,b)},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(sa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
eq:function(a){var b=this.length,a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:ga,sort:la.sort,splice:la.splice};p.extend=p.fn.extend=function(){var a,b,c,d,m,e=arguments[0]||{},f=1,g=arguments.length,r=!1;"boolean"===typeof e&&(r=e,e=arguments[f]||{},f++);"object"!==typeof e&&!p.isFunction(e)&&(e={});for(f===g&&(e=this,f--);f<g;f++)if(null!=(m=arguments[f]))for(d in m)a=e[d],c=m[d],e!==c&&(r&&c&&(p.isPlainObject(c)||
(b=p.isArray(c)))?(b?(b=!1,a=a&&p.isArray(a)?a:[]):a=a&&p.isPlainObject(a)?a:{},e[d]=p.extend(r,a,c)):void 0!==c&&(e[d]=c));return e};p.extend({expando:"jQuery"+("1.11.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isFunction:function(a){return"function"===p.type(a)},isArray:Array.isArray||function(a){return"array"===p.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!p.isArray(a)&&0<=a-parseFloat(a)+1},isEmptyObject:function(a){for(var b in a)return!1;
return!0},isPlainObject:function(a){var b;if(!a||"object"!==p.type(a)||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!na.call(a,"constructor")&&!na.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(L.ownLast)for(b in a)return na.call(a,b);for(b in a);return void 0===b||na.call(a,b)},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?aa[Ja.call(a)]||"object":typeof a},globalEval:function(b){b&&p.trim(b)&&(a.execScript||function(b){a.eval.call(a,
b)})(b)},camelCase:function(a){return a.replace(bb,"ms-").replace(wb,Xa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var m,e=0,f=a.length;m=c(a);if(d)if(m)for(;e<f&&!(m=b.apply(a[e],d),!1===m);e++);else for(e in a){if(m=b.apply(a[e],d),!1===m)break}else if(m)for(;e<f&&!(m=b.call(a[e],e,a[e]),!1===m);e++);else for(e in a)if(m=b.call(a[e],e,a[e]),!1===m)break;return a},trim:function(a){return null==a?"":(a+"").replace(ua,"")},makeArray:function(a,
b){var d=b||[];null!=a&&(c(Object(a))?p.merge(d,"string"===typeof a?[a]:a):ga.call(d,a));return d},inArray:function(a,b,c){var d;if(b){if(ea)return ea.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,m=a.length;d<c;)a[m++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[m++]=b[d++];a.length=m;return a},grep:function(a,b,c){for(var d=[],m=0,e=a.length,f=!c;m<e;m++)c=!b(a[m],m),c!==f&&d.push(a[m]);return d},map:function(a,
b,d){var m,e=0,f=a.length,g=[];if(c(a))for(;e<f;e++)m=b(a[e],e,d),null!=m&&g.push(m);else for(e in a)m=b(a[e],e,d),null!=m&&g.push(m);return P.apply([],g)},guid:1,proxy:function(a,b){var c,d;"string"===typeof b&&(d=a[b],b=a,a=d);if(p.isFunction(a))return c=sa.call(arguments,2),d=function(){return a.apply(b||this,c.concat(sa.call(arguments)))},d.guid=a.guid=a.guid||p.guid++,d},now:function(){return+new Date},support:L});p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){aa["[object "+b+"]"]=b.toLowerCase()});var Oa=function(a){function b(a,c,d,m){var e,f,g,r,h;(c?c.ownerDocument||c:ib)!==E&&z(c);c=c||E;d=d||[];r=c.nodeType;if("string"!==typeof a||!a||1!==r&&9!==r&&11!==r)return d;if(!m&&tb){if(11!==r&&(e=xa.exec(a)))if(g=e[1])if(9===r)if((f=c.getElementById(g))&&f.parentNode){if(f.id===g)return d.push(f),d}else return d;else{if(c.ownerDocument&&(f=c.ownerDocument.getElementById(g))&&C(c,f)&&f.id===g)return d.push(f),d}else{if(e[2])return N.apply(d,
c.getElementsByTagName(a)),d;if((g=e[3])&&y.getElementsByClassName)return N.apply(d,c.getElementsByClassName(g)),d}if(y.qsa&&(!p||!p.test(a))){f=e=za;g=c;h=1!==r&&a;if(1===r&&"object"!==c.nodeName.toLowerCase()){r=ja(a);(e=c.getAttribute("id"))?f=e.replace(Yb,"\\$&"):c.setAttribute("id",f);f="[id='"+f+"'] ";for(g=r.length;g--;)r[g]=f+u(r[g]);g=O.test(a)&&j(c.parentNode)||c;h=r.join(",")}if(h)try{return N.apply(d,g.querySelectorAll(h)),d}catch(i){}finally{e||c.removeAttribute("id")}}}return t(a.replace(Tb,
"$1"),c,d,m)}function c(){function a(c,d){b.push(c+" ")>q.cacheLength&&delete a[b.shift()];return a[c+" "]=d}var b=[];return a}function d(a){a[za]=!0;return a}function m(a){var b=E.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function e(a,b){for(var c=a.split("|"),d=a.length;d--;)q.attrHandle[c[d]]=b}function f(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||Wb)-(~a.sourceIndex||Wb);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===
b)return-1;return a?1:-1}function g(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function r(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function h(a){return d(function(b){b=+b;return d(function(c,d){for(var m,e=a([],c.length,b),f=e.length;f--;)if(c[m=e[f]])c[m]=!(d[m]=c[m])})})}function j(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function i(){}function u(a){for(var b=0,c=a.length,d="";b<c;b++)d+=
a[b].value;return d}function x(a,b,c){var d=b.dir,m=c&&"parentNode"===d,e=Nb++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||m)return a(b,c,e)}:function(b,c,f){var g,r,h=[B,e];if(f)for(;b=b[d];){if((1===b.nodeType||m)&&a(b,c,f))return!0}else for(;b=b[d];)if(1===b.nodeType||m){r=b[za]||(b[za]={});if((g=r[d])&&g[0]===B&&g[1]===e)return h[2]=g[2];r[d]=h;if(h[2]=a(b,c,f))return!0}}}function k(a){return 1<a.length?function(b,c,d){for(var m=a.length;m--;)if(!a[m](b,c,d))return!1;return!0}:
a[0]}function F(a,b,c,d,m){for(var e,f=[],g=0,r=a.length,h=null!=b;g<r;g++)if(e=a[g])if(!c||c(e,d,m))f.push(e),h&&b.push(g);return f}function l(a,c,m,e,f,g){e&&!e[za]&&(e=l(e));f&&!f[za]&&(f=l(f,g));return d(function(d,g,r,h){var j,i,u=[],x=[],k=g.length,l;if(!(l=d)){l=c||"*";for(var w=r.nodeType?[r]:r,o=[],n=0,y=w.length;n<y;n++)b(l,w[n],o);l=o}l=a&&(d||!c)?F(l,u,a,r,h):l;w=m?f||(d?a:k||e)?[]:g:l;m&&m(l,w,r,h);if(e){j=F(w,x);e(j,[],r,h);for(r=j.length;r--;)if(i=j[r])w[x[r]]=!(l[x[r]]=i)}if(d){if(f||
a){if(f){j=[];for(r=w.length;r--;)if(i=w[r])j.push(l[r]=i);f(null,w=[],j,h)}for(r=w.length;r--;)if((i=w[r])&&-1<(j=f?D(d,i):u[r]))d[j]=!(g[j]=i)}}else w=F(w===g?w.splice(k,w.length):w),f?f(null,g,w,h):N.apply(g,w)})}function w(a){var b,c,d,m=a.length,e=q.relative[a[0].type];c=e||q.relative[" "];for(var f=e?1:0,g=x(function(a){return a===b},c,!0),r=x(function(a){return-1<D(b,a)},c,!0),h=[function(a,c,d){a=!e&&(d||c!==s)||((b=c).nodeType?g(a,c,d):r(a,c,d));b=null;return a}];f<m;f++)if(c=q.relative[a[f].type])h=
[x(k(h),c)];else{c=q.filter[a[f].type].apply(null,a[f].matches);if(c[za]){for(d=++f;d<m&&!q.relative[a[d].type];d++);return l(1<f&&k(h),1<f&&u(a.slice(0,f-1).concat({value:" "===a[f-2].type?"*":""})).replace(Tb,"$1"),c,f<d&&w(a.slice(f,d)),d<m&&w(a=a.slice(d)),d<m&&u(a))}h.push(c)}return k(h)}function o(a,c){var m=0<c.length,e=0<a.length,f=function(d,f,g,r,h){var j,i,u,x=0,k="0",l=d&&[],w=[],o=s,n=d||e&&q.find.TAG("*",h),y=B+=null==o?1:Math.random()||0.1,Z=n.length;for(h&&(s=f!==E&&f);k!==Z&&null!=
(j=n[k]);k++){if(e&&j){for(i=0;u=a[i++];)if(u(j,f,g)){r.push(j);break}h&&(B=y)}m&&((j=!u&&j)&&x--,d&&l.push(j))}x+=k;if(m&&k!==x){for(i=0;u=c[i++];)u(l,w,f,g);if(d){if(0<x)for(;k--;)!l[k]&&!w[k]&&(w[k]=Zb.call(r));w=F(w)}N.apply(r,w);h&&!d&&(0<w.length&&1<x+c.length)&&b.uniqueSort(r)}h&&(B=y,s=o);return l};return m?d(f):f}var n,y,q,Z,pa,ja,v,t,s,ka,mb,z,E,ta,tb,p,Fa,H,C,za="sizzle"+1*new Date,ib=a.document,B=0,Nb=0,Fb=c(),Sb=c(),W=c(),U=function(a,b){a===b&&(mb=!0);return 0},Wb=-2147483648,J={}.hasOwnProperty,
ba=[],Zb=ba.pop,Pb=ba.push,N=ba.push,T=ba.slice,D=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},Q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),oa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Q+"))|)[\\x20\\t\\r\\n\\f]*\\]",Gb=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
oa+")*)|.*)\\)|)",G=RegExp("[\\x20\\t\\r\\n\\f]+","g"),Tb=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),K=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Vb=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,V=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),I=RegExp(Gb),X=RegExp("^"+Q+"$"),M={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+
oa),PSEUDO:RegExp("^"+Gb),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},Qb=/^(?:input|select|textarea|button)$/i,Ob=/^h\d$/i,S=/^[^{]+\{\s*\[native \w/,xa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,O=/[+~]/,Yb=/'|\\/g,zb=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),Ea=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)},$b=function(){z()};try{N.apply(ba=T.call(ib.childNodes),ib.childNodes),ba[ib.childNodes.length].nodeType}catch(A){N={apply:ba.length?function(a,
b){Pb.apply(a,T.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}y=b.support={};pa=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};z=b.setDocument=function(a){var b=a?a.ownerDocument||a:ib;if(b===E||9!==b.nodeType||!b.documentElement)return E;E=b;ta=b.documentElement;(a=b.defaultView)&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",$b,!1):a.attachEvent&&a.attachEvent("onunload",$b));tb=!pa(b);y.attributes=m(function(a){a.className=
"i";return!a.getAttribute("className")});y.getElementsByTagName=m(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});y.getElementsByClassName=S.test(b.getElementsByClassName);y.getById=m(function(a){ta.appendChild(a).id=za;return!b.getElementsByName||!b.getElementsByName(za).length});y.getById?(q.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&tb){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},q.filter.ID=function(a){var b=a.replace(zb,
Ea);return function(a){return a.getAttribute("id")===b}}):(delete q.find.ID,q.filter.ID=function(a){var b=a.replace(zb,Ea);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});q.find.TAG=y.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a);if(y.qsa)return b.querySelectorAll(a)}:function(a,b){var c,d=[],m=0,e=b.getElementsByTagName(a);if("*"===a){for(;c=e[m++];)1===c.nodeType&&
d.push(c);return d}return e};q.find.CLASS=y.getElementsByClassName&&function(a,b){if(tb)return b.getElementsByClassName(a)};Fa=[];p=[];if(y.qsa=S.test(b.querySelectorAll))m(function(a){ta.appendChild(a).innerHTML="<a id='"+za+"'></a><select id='"+za+"-\u000c]' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&p.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||p.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll("[id~="+za+"-]").length||p.push("~=");a.querySelectorAll(":checked").length||p.push(":checked");a.querySelectorAll("a#"+za+"+*").length||p.push(".#.+[+~]")}),m(function(a){var c=b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&p.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||p.push(":enabled",":disabled");a.querySelectorAll("*,:x");p.push(",.*:")});(y.matchesSelector=
S.test(H=ta.matches||ta.webkitMatchesSelector||ta.mozMatchesSelector||ta.oMatchesSelector||ta.msMatchesSelector))&&m(function(a){y.disconnectedMatch=H.call(a,"div");H.call(a,"[s!='']:x");Fa.push("!=",Gb)});p=p.length&&RegExp(p.join("|"));Fa=Fa.length&&RegExp(Fa.join("|"));C=(a=S.test(ta.compareDocumentPosition))||S.test(ta.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||!(1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&
16)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};U=a?function(a,c){if(a===c)return mb=!0,0;var d=!a.compareDocumentPosition-!c.compareDocumentPosition;if(d)return d;d=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return d&1||!y.sortDetached&&c.compareDocumentPosition(a)===d?a===b||a.ownerDocument===ib&&C(ib,a)?-1:c===b||c.ownerDocument===ib&&C(ib,c)?1:ka?D(ka,a)-D(ka,c):0:d&4?-1:1}:function(a,c){if(a===c)return mb=!0,0;var d,m=0;d=a.parentNode;
var e=c.parentNode,g=[a],r=[c];if(!d||!e)return a===b?-1:c===b?1:d?-1:e?1:ka?D(ka,a)-D(ka,c):0;if(d===e)return f(a,c);for(d=a;d=d.parentNode;)g.unshift(d);for(d=c;d=d.parentNode;)r.unshift(d);for(;g[m]===r[m];)m++;return m?f(g[m],r[m]):g[m]===ib?-1:r[m]===ib?1:0};return b};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==E&&z(a);c=c.replace(V,"='$1']");if(y.matchesSelector&&tb&&(!Fa||!Fa.test(c))&&(!p||!p.test(c)))try{var d=H.call(a,c);if(d||
y.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(m){}return 0<b(c,E,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==E&&z(a);return C(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==E&&z(a);var c=q.attrHandle[b.toLowerCase()],c=c&&J.call(q.attrHandle,b.toLowerCase())?c(a,b,!tb):void 0;return void 0!==c?c:y.attributes||!tb?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+
a);};b.uniqueSort=function(a){var b,c=[],d=0,m=0;mb=!y.detectDuplicates;ka=!y.sortStable&&a.slice(0);a.sort(U);if(mb){for(;b=a[m++];)b===a[m]&&(d=c.push(m));for(;d--;)a.splice(c[d],1)}ka=null;return a};Z=b.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=Z(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d++];)c+=Z(b);return c};q=b.selectors={cacheLength:50,createPseudo:d,
match:M,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(zb,Ea);a[3]=(a[3]||a[4]||a[5]||"").replace(zb,Ea);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);
return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(M.CHILD.test(a[0]))return null;if(a[3])a[2]=a[4]||a[5]||"";else if(c&&I.test(c)&&(b=ja(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length))a[0]=a[0].slice(0,b),a[2]=c.slice(0,b);return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(zb,Ea).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Fb[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&
Fb(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(m){m=b.attr(m,a);if(null==m)return"!="===c;if(!c)return!0;m+="";return"="===c?m===d:"!="===c?m!==d:"^="===c?d&&0===m.indexOf(d):"*="===c?d&&-1<m.indexOf(d):"$="===c?d&&m.slice(-d.length)===d:"~="===c?-1<(" "+m.replace(G," ")+" ").indexOf(d):"|="===c?m===d||m.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d,m){var e=
"nth"!==a.slice(0,3),f="last"!==a.slice(-4),g="of-type"===b;return 1===d&&0===m?function(a){return!!a.parentNode}:function(b,c,r){var h,j,i,u,x,c=e!==f?"nextSibling":"previousSibling",k=b.parentNode,F=g&&b.nodeName.toLowerCase(),r=!r&&!g;if(k){if(e){for(;c;){for(j=b;j=j[c];)if(g?j.nodeName.toLowerCase()===F:1===j.nodeType)return!1;x=c="only"===a&&!x&&"nextSibling"}return!0}x=[f?k.firstChild:k.lastChild];if(f&&r){r=k[za]||(k[za]={});h=r[a]||[];u=h[0]===B&&h[1];i=h[0]===B&&h[2];for(j=u&&k.childNodes[u];j=
++u&&j&&j[c]||(i=u=0)||x.pop();)if(1===j.nodeType&&++i&&j===b){r[a]=[B,u,i];break}}else if(r&&(h=(b[za]||(b[za]={}))[a])&&h[0]===B)i=h[1];else for(;j=++u&&j&&j[c]||(i=u=0)||x.pop();)if((g?j.nodeName.toLowerCase()===F:1===j.nodeType)&&++i)if(r&&((j[za]||(j[za]={}))[a]=[B,i]),j===b)break;i-=m;return i===d||0===i%d&&0<=i/d}}},PSEUDO:function(a,c){var m,e=q.pseudos[a]||q.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return e[za]?e(c):1<e.length?(m=[a,a,"",c],q.setFilters.hasOwnProperty(a.toLowerCase())?
d(function(a,b){for(var d,m=e(a,c),f=m.length;f--;)d=D(a,m[f]),a[d]=!(b[d]=m[f])}):function(a){return e(a,0,m)}):e}},pseudos:{not:d(function(a){var b=[],c=[],m=v(a.replace(Tb,"$1"));return m[za]?d(function(a,b,c,d){for(var d=m(a,null,d,[]),e=a.length;e--;)if(c=d[e])a[e]=!(b[e]=c)}):function(a,d,e){b[0]=a;m(b,null,e,c);b[0]=null;return!c.pop()}}),has:d(function(a){return function(c){return 0<b(a,c).length}}),contains:d(function(a){a=a.replace(zb,Ea);return function(b){return-1<(b.textContent||b.innerText||
Z(b)).indexOf(a)}}),lang:d(function(a){X.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(zb,Ea).toLowerCase();return function(b){var c;do if(c=tb?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===ta},focus:function(a){return a===E.activeElement&&(!E.hasFocus||E.hasFocus())&&
!(!a.type&&!a.href&&!~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!q.pseudos.empty(a)},header:function(a){return Ob.test(a.nodeName)},
input:function(a){return Qb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:h(function(){return[0]}),last:h(function(a,b){return[b-1]}),eq:h(function(a,b,c){return[0>c?c+b:c]}),even:h(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:h(function(a,b){for(var c=1;c<b;c+=
2)a.push(c);return a}),lt:h(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:h(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};q.pseudos.nth=q.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})q.pseudos[n]=g(n);for(n in{submit:!0,reset:!0})q.pseudos[n]=r(n);i.prototype=q.filters=q.pseudos;q.setFilters=new i;ja=b.tokenize=function(a,c){var d,m,e,f,g,r,h;if(g=Sb[a+" "])return c?0:g.slice(0);g=a;r=[];for(h=q.preFilter;g;){if(!d||(m=K.exec(g)))m&&(g=g.slice(m[0].length)||
g),r.push(e=[]);d=!1;if(m=Vb.exec(g))d=m.shift(),e.push({value:d,type:m[0].replace(Tb," ")}),g=g.slice(d.length);for(f in q.filter)if((m=M[f].exec(g))&&(!h[f]||(m=h[f](m))))d=m.shift(),e.push({value:d,type:f,matches:m}),g=g.slice(d.length);if(!d)break}return c?g.length:g?b.error(a):Sb(a,r).slice(0)};v=b.compile=function(a,b){var c,d=[],m=[],e=W[a+" "];if(!e){b||(b=ja(a));for(c=b.length;c--;)e=w(b[c]),e[za]?d.push(e):m.push(e);e=W(a,o(m,d));e.selector=a}return e};t=b.select=function(a,b,c,d){var m,
e,f,g,r="function"===typeof a&&a,h=!d&&ja(a=r.selector||a),c=c||[];if(1===h.length){e=h[0]=h[0].slice(0);if(2<e.length&&"ID"===(f=e[0]).type&&y.getById&&9===b.nodeType&&tb&&q.relative[e[1].type]){if(b=(q.find.ID(f.matches[0].replace(zb,Ea),b)||[])[0])r&&(b=b.parentNode);else return c;a=a.slice(e.shift().value.length)}for(m=M.needsContext.test(a)?0:e.length;m--;){f=e[m];if(q.relative[g=f.type])break;if(g=q.find[g])if(d=g(f.matches[0].replace(zb,Ea),O.test(e[0].type)&&j(b.parentNode)||b)){e.splice(m,
1);a=d.length&&u(e);if(!a)return N.apply(c,d),c;break}}}(r||v(a,h))(d,b,!tb,c,O.test(a)&&j(b.parentNode)||b);return c};y.sortStable=za.split("").sort(U).join("")===za;y.detectDuplicates=!!mb;z();y.sortDetached=m(function(a){return a.compareDocumentPosition(E.createElement("div"))&1});m(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});(!y.attributes||!m(function(a){a.innerHTML=
"<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")}))&&e("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});m(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null});return b}(a);
p.find=Oa;p.expr=Oa.selectors;p.expr[":"]=p.expr.pseudos;p.unique=Oa.uniqueSort;p.text=Oa.getText;p.isXMLDoc=Oa.isXML;p.contains=Oa.contains;var nb=p.expr.match.needsContext,La=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ia=/^.[^:#\[\.,]*$/;p.filter=function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===d.nodeType?p.find.matchesSelector(d,a)?[d]:[]:p.find.matches(a,p.grep(b,function(a){return 1===a.nodeType}))};p.fn.extend({find:function(a){var b,c=[],d=this,m=d.length;if("string"!==typeof a)return this.pushStack(p(a).filter(function(){for(b=
0;b<m;b++)if(p.contains(d[b],this))return!0}));for(b=0;b<m;b++)p.find(a,d[b],c);c=this.pushStack(1<m?p.unique(c):c);c.selector=this.selector?this.selector+" "+a:a;return c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"===typeof a&&nb.test(a)?p(a):a||[],!1).length}});var cb,R=a.document,Sa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(a,b){var c,d;if(!a)return this;if("string"===
typeof a){if((c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Sa.exec(a))&&(c[1]||!b)){if(c[1]){if(b=b instanceof p?b[0]:b,p.merge(this,p.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:R,!0)),La.test(c[1])&&p.isPlainObject(b))for(c in b)if(p.isFunction(this[c]))this[c](b[c]);else this.attr(c,b[c])}else{if((d=R.getElementById(c[2]))&&d.parentNode){if(d.id!==c[2])return cb.find(a);this.length=1;this[0]=d}this.context=R;this.selector=a}return this}return!b||b.jquery?(b||cb).find(a):
this.constructor(b).find(a)}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(p.isFunction(a))return"undefined"!==typeof cb.ready?cb.ready(a):a(p);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return p.makeArray(a,this)}).prototype=p.fn;cb=p(R);var hb=/^(?:parents|prev(?:Until|All))/,Ta={children:!0,contents:!0,next:!0,prev:!0};p.extend({dir:function(a,b,c){for(var d=[],a=a[b];a&&9!==a.nodeType&&(void 0===c||1!==a.nodeType||!p(a).is(c));)1===a.nodeType&&d.push(a),
a=a[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});p.fn.extend({has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,m=this.length,e=[],f=nb.test(a)||"string"!==typeof a?p(a,b||this.context):0;d<m;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(f?-1<f.index(c):1===c.nodeType&&p.find.matchesSelector(c,a))){e.push(c);
break}return this.pushStack(1<e.length?p.unique(e):e)},index:function(a){return!a?this[0]&&this[0].parentNode?this.first().prevAll().length:-1:"string"===typeof a?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this)},add:function(a,b){return this.pushStack(p.unique(p.merge(this.get(),p(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});p.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},
parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},
contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var m=p.map(this,b,c);"Until"!==a.slice(-5)&&(d=c);d&&"string"===typeof d&&(m=p.filter(d,m));1<this.length&&(Ta[a]||(m=p.unique(m)),hb.test(a)&&(m=m.reverse()));return this.pushStack(m)}});var U=/\S+/g,ba={};p.Callbacks=function(a){var a="string"===typeof a?ba[a]||h(a):p.extend({},a),b,c,d,m,e,f,g=[],r=!a.once&&[],j=function(h){c=a.memory&&h;
d=!0;e=f||0;f=0;m=g.length;for(b=!0;g&&e<m;e++)if(!1===g[e].apply(h[0],h[1])&&a.stopOnFalse){c=!1;break}b=!1;g&&(r?r.length&&j(r.shift()):c?g=[]:i.disable())},i={add:function(){if(g){var d=g.length;(function cc(b){p.each(b,function(b,c){var d=p.type(c);"function"===d?(!a.unique||!i.has(c))&&g.push(c):c&&c.length&&"string"!==d&&cc(c)})})(arguments);b?m=g.length:c&&(f=d,j(c))}return this},remove:function(){g&&p.each(arguments,function(a,c){for(var d;-1<(d=p.inArray(c,g,d));)g.splice(d,1),b&&(d<=m&&
m--,d<=e&&e--)});return this},has:function(a){return a?-1<p.inArray(a,g):!(!g||!g.length)},empty:function(){g=[];m=0;return this},disable:function(){g=r=c=void 0;return this},disabled:function(){return!g},lock:function(){r=void 0;c||i.disable();return this},locked:function(){return!r},fireWith:function(a,c){if(g&&(!d||r))c=c||[],c=[a,c.slice?c.slice():c],b?r.push(c):j(c);return this},fire:function(){i.fireWith(this,arguments);return this},fired:function(){return!!d}};return i};p.extend({Deferred:function(a){var b=
[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){m.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,e){var f=p.isFunction(a[b])&&a[b];m[e[1]](function(){var a=f&&f.apply(this,arguments);if(a&&p.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);
else c[e[0]+"With"](this===d?c.promise():this,f?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?p.extend(a,d):d}},m={};d.pipe=d.then;p.each(b,function(a,e){var f=e[2],g=e[3];d[e[1]]=f.add;g&&f.add(function(){c=g},b[a^1][2].disable,b[2][2].lock);m[e[0]]=function(){m[e[0]+"With"](this===m?d:this,arguments);return this};m[e[0]+"With"]=f.fireWith});d.promise(m);a&&a.call(m,m);return m},when:function(a){var b=0,c=sa.call(arguments),d=c.length,m=1!==d||a&&p.isFunction(a.promise)?
d:0,e=1===m?a:p.Deferred(),f=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?sa.call(arguments):d;c===g?e.notifyWith(b,c):--m||e.resolveWith(b,c)}},g,r,h;if(1<d){g=Array(d);r=Array(d);for(h=Array(d);b<d;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(f(b,h,c)).fail(e.reject).progress(f(b,r,g)):--m}m||e.resolveWith(h,c);return e.promise()}});var oa;p.fn.ready=function(a){p.ready.promise().done(a);return this};p.extend({isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:
p.ready(!0)},ready:function(a){if(!(!0===a?--p.readyWait:p.isReady)){if(!R.body)return setTimeout(p.ready);p.isReady=!0;!0!==a&&0<--p.readyWait||(oa.resolveWith(R,[p]),p.fn.triggerHandler&&(p(R).triggerHandler("ready"),p(R).off("ready")))}}});p.ready.promise=function(b){if(!oa)if(oa=p.Deferred(),"complete"===R.readyState)setTimeout(p.ready);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",f,!1),a.addEventListener("load",f,!1);else{R.attachEvent("onreadystatechange",f);a.attachEvent("onload",
f);var c=!1;try{c=null==a.frameElement&&R.documentElement}catch(d){}c&&c.doScroll&&function bc(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(bc,50)}g();p.ready()}}()}return oa.promise(b)};var xa="undefined",Ea;for(Ea in p(L))break;L.ownLast="0"!==Ea;L.inlineBlockNeedsLayout=!1;p(function(){var a,b,c;if((b=R.getElementsByTagName("body")[0])&&b.style){a=R.createElement("div");c=R.createElement("div");c.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
b.appendChild(c).appendChild(a);if(typeof a.style.zoom!==xa&&(a.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",L.inlineBlockNeedsLayout=3===a.offsetWidth))b.style.zoom=1;b.removeChild(c)}});(function(){var a=R.createElement("div");if(null==L.deleteExpando){L.deleteExpando=!0;try{delete a.test}catch(b){L.deleteExpando=!1}}})();p.acceptData=function(a){var b=p.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||!0!==b&&a.getAttribute("classid")===
b};var Ab=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qa=/([A-Z])/g;p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?p.cache[a[p.expando]]:a[p.expando];return!!a&&!j(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return l(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return l(a,b,!0)}});p.fn.extend({data:function(a,b){var c,d,m,e=this[0],f=e&&e.attributes;if(void 0===a){if(this.length&&
(m=p.data(e),1===e.nodeType&&!p._data(e,"parsedAttrs"))){for(c=f.length;c--;)f[c]&&(d=f[c].name,0===d.indexOf("data-")&&(d=p.camelCase(d.slice(5)),i(e,d,m[d])));p._data(e,"parsedAttrs",!0)}return m}return"object"===typeof a?this.each(function(){p.data(this,a)}):1<arguments.length?this.each(function(){p.data(this,a,b)}):e?i(e,a,p.data(e,a)):void 0},removeData:function(a){return this.each(function(){p.removeData(this,a)})}});p.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=p._data(a,
b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){var b=b||"fx",c=p.queue(a,b),d=c.length,m=c.shift(),e=p._queueHooks(a,b),f=function(){p.dequeue(a,b)};"inprogress"===m&&(m=c.shift(),d--);m&&("fx"===b&&c.unshift("inprogress"),delete e.stop,m.call(a,f,e));!d&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p._removeData(a,b+"queue");p._removeData(a,c)})})}});
p.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?p.queue(this[0],a):void 0===b?this:this.each(function(){var c=p.queue(this,a,b);p._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,m=p.Deferred(),e=this,f=this.length,g=function(){--d||m.resolveWith(e,[e])};"string"!==
typeof a&&(b=a,a=void 0);for(a=a||"fx";f--;)if((c=p._data(e[f],a+"queueHooks"))&&c.empty)d++,c.empty.add(g);g();return m.promise(b)}});var Pa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Aa=["Top","Right","Bottom","Left"],gb=function(a,b){a=b||a;return"none"===p.css(a,"display")||!p.contains(a.ownerDocument,a)},ha=p.access=function(a,b,c,d,m,e,f){var g=0,r=a.length,h=null==c;if("object"===p.type(c))for(g in m=!0,c)p.access(a,b,g,c[g],!0,e,f);else if(void 0!==d&&(m=!0,p.isFunction(d)||(f=!0),h&&(f?
(b.call(a,d),b=null):(h=b,b=function(a,b,c){return h.call(p(a),c)})),b))for(;g<r;g++)b(a[g],c,f?d:d.call(a[g],g,b(a[g],c)));return m?a:h?b.call(a):r?b(a[0],c):e},Da=/^(?:checkbox|radio)$/i;(function(){var a=R.createElement("input"),b=R.createElement("div"),c=R.createDocumentFragment();b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";L.leadingWhitespace=3===b.firstChild.nodeType;L.tbody=!b.getElementsByTagName("tbody").length;L.htmlSerialize=!!b.getElementsByTagName("link").length;
L.html5Clone="<:nav></:nav>"!==R.createElement("nav").cloneNode(!0).outerHTML;a.type="checkbox";a.checked=!0;c.appendChild(a);L.appendChecked=a.checked;b.innerHTML="<textarea>x</textarea>";L.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue;c.appendChild(b);b.innerHTML="<input type='radio' checked='checked' name='t'/>";L.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;L.noCloneEvent=!0;b.attachEvent&&(b.attachEvent("onclick",function(){L.noCloneEvent=!1}),b.cloneNode(!0).click());
if(null==L.deleteExpando){L.deleteExpando=!0;try{delete b.test}catch(d){L.deleteExpando=!1}}})();(function(){var b,c,d=R.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})if(c="on"+b,!(L[b+"Bubbles"]=c in a))d.setAttribute(c,"t"),L[b+"Bubbles"]=!1===d.attributes[c].expando})();var ob=/^(?:input|select|textarea)$/i,Ub=/^key/,Db=/^(?:mouse|pointer|contextmenu)|click/,kb=/^(?:focusinfocus|focusoutblur)$/,Cb=/^([^.]*)(?:\.(.+)|)$/;p.event={global:{},add:function(a,b,c,d,m){var e,f,g,r,h,j,
i,u,x;if(g=p._data(a)){c.handler&&(r=c,c=r.handler,m=r.selector);c.guid||(c.guid=p.guid++);if(!(f=g.events))f=g.events={};if(!(h=g.handle))h=g.handle=function(a){return typeof p!==xa&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):void 0},h.elem=a;b=(b||"").match(U)||[""];for(g=b.length;g--;)if(e=Cb.exec(b[g])||[],u=j=e[1],x=(e[2]||"").split(".").sort(),u){e=p.event.special[u]||{};u=(m?e.delegateType:e.bindType)||u;e=p.event.special[u]||{};j=p.extend({type:u,origType:j,
data:d,handler:c,guid:c.guid,selector:m,needsContext:m&&p.expr.match.needsContext.test(m),namespace:x.join(".")},r);if(!(i=f[u]))if(i=f[u]=[],i.delegateCount=0,!e.setup||!1===e.setup.call(a,d,x,h))a.addEventListener?a.addEventListener(u,h,!1):a.attachEvent&&a.attachEvent("on"+u,h);e.add&&(e.add.call(a,j),j.handler.guid||(j.handler.guid=c.guid));m?i.splice(i.delegateCount++,0,j):i.push(j);p.event.global[u]=!0}a=null}},remove:function(a,b,c,d,m){var e,f,g,r,h,j,i,u,x,k,F,l=p.hasData(a)&&p._data(a);
if(l&&(j=l.events)){b=(b||"").match(U)||[""];for(h=b.length;h--;)if(g=Cb.exec(b[h])||[],x=F=g[1],k=(g[2]||"").split(".").sort(),x){i=p.event.special[x]||{};x=(d?i.delegateType:i.bindType)||x;u=j[x]||[];g=g[2]&&RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)");for(r=e=u.length;e--;)if(f=u[e],(m||F===f.origType)&&(!c||c.guid===f.guid)&&(!g||g.test(f.namespace))&&(!d||d===f.selector||"**"===d&&f.selector))u.splice(e,1),f.selector&&u.delegateCount--,i.remove&&i.remove.call(a,f);r&&!u.length&&((!i.teardown||
!1===i.teardown.call(a,k,l.handle))&&p.removeEvent(a,x,l.handle),delete j[x])}else for(x in j)p.event.remove(a,x+b[h],c,d,!0);p.isEmptyObject(j)&&(delete l.handle,p._removeData(a,"events"))}},trigger:function(b,c,d,m){var e,f,g,r,h,j,i=[d||R],u=na.call(b,"type")?b.type:b;h=na.call(b,"namespace")?b.namespace.split("."):[];g=e=d=d||R;if(!(3===d.nodeType||8===d.nodeType)&&!kb.test(u+p.event.triggered))if(0<=u.indexOf(".")&&(h=u.split("."),u=h.shift(),h.sort()),f=0>u.indexOf(":")&&"on"+u,b=b[p.expando]?
b:new p.Event(u,"object"===typeof b&&b),b.isTrigger=m?2:3,b.namespace=h.join("."),b.namespace_re=b.namespace?RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:p.makeArray(c,[b]),h=p.event.special[u]||{},m||!(h.trigger&&!1===h.trigger.apply(d,c))){if(!m&&!h.noBubble&&!p.isWindow(d)){r=h.delegateType||u;for(kb.test(r+u)||(g=g.parentNode);g;g=g.parentNode)i.push(g),e=g;if(e===(d.ownerDocument||R))i.push(e.defaultView||e.parentWindow||a)}for(j=
0;(g=i[j++])&&!b.isPropagationStopped();)if(b.type=1<j?r:h.bindType||u,(e=(p._data(g,"events")||{})[b.type]&&p._data(g,"handle"))&&e.apply(g,c),(e=f&&g[f])&&e.apply&&p.acceptData(g))b.result=e.apply(g,c),!1===b.result&&b.preventDefault();b.type=u;if(!m&&!b.isDefaultPrevented()&&(!h._default||!1===h._default.apply(i.pop(),c))&&p.acceptData(d)&&f&&d[u]&&!p.isWindow(d)){(e=d[f])&&(d[f]=null);p.event.triggered=u;try{d[u]()}catch(x){}p.event.triggered=void 0;e&&(d[f]=e)}return b.result}},dispatch:function(a){var a=
p.event.fix(a),b,c,d,m,e=[],f=sa.call(arguments);b=(p._data(this,"events")||{})[a.type]||[];var g=p.event.special[a.type]||{};f[0]=a;a.delegateTarget=this;if(!(g.preDispatch&&!1===g.preDispatch.call(this,a))){e=p.event.handlers.call(this,a,b);for(b=0;(d=e[b++])&&!a.isPropagationStopped();){a.currentTarget=d.elem;for(m=0;(c=d.handlers[m++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(c.namespace))if(a.handleObj=c,a.data=c.data,c=((p.event.special[c.origType]||{}).handle||
c.handler).apply(d.elem,f),void 0!==c&&!1===(a.result=c))a.preventDefault(),a.stopPropagation()}g.postDispatch&&g.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,d,m,e,f=[],g=b.delegateCount,r=a.target;if(g&&r.nodeType&&(!a.button||"click"!==a.type))for(;r!=this;r=r.parentNode||this)if(1===r.nodeType&&(!0!==r.disabled||"click"!==a.type)){m=[];for(e=0;e<g;e++)d=b[e],c=d.selector+" ",void 0===m[c]&&(m[c]=d.needsContext?0<=p(c,this).index(r):p.find(c,this,null,[r]).length),m[c]&&
m.push(d);m.length&&f.push({elem:r,handlers:m})}g<b.length&&f.push({elem:this,handlers:b.slice(g)});return f},fix:function(a){if(a[p.expando])return a;var b,c,d;b=a.type;var m=a,e=this.fixHooks[b];e||(this.fixHooks[b]=e=Db.test(b)?this.mouseHooks:Ub.test(b)?this.keyHooks:{});d=e.props?this.props.concat(e.props):this.props;a=new p.Event(m);for(b=d.length;b--;)c=d[b],a[c]=m[c];a.target||(a.target=m.srcElement||R);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return e.filter?
e.filter(a,m):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,m=b.button,e=b.fromElement;null==
a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||R,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0));!a.relatedTarget&&e&&(a.relatedTarget=e===a.target?b.toElement:e);!a.which&&void 0!==m&&(a.which=m&1?1:m&2?3:m&4?2:0);return a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==t()&&this.focus)try{return this.focus(),
!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===t()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(p.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return p.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});
d?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};p.removeEvent=R.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&(typeof a[b]===xa&&(a[b]=null),a.detachEvent(b,c))};p.Event=function(a,b){if(!(this instanceof p.Event))return new p.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===
a.returnValue?n:o):this.type=a;b&&p.extend(this,b);this.timeStamp=a&&a.timeStamp||p.now();this[p.expando]=!0};p.Event.prototype={isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=n;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=n;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=
this.originalEvent;this.isImmediatePropagationStopped=n;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,m=a.handleObj;if(!d||d!==this&&!p.contains(this,d))a.type=m.origType,c=m.handler.apply(this,arguments),a.type=b;return c}}});L.submitBubbles||(p.event.special.submit=
{setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){a=a.target;if((a=p.nodeName(a,"input")||p.nodeName(a,"button")?a.form:void 0)&&!p._data(a,"submitBubbles"))p.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),p._data(a,"submitBubbles",!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,
"form"))return!1;p.event.remove(this,"._submit")}});L.changeBubbles||(p.event.special.change={setup:function(){if(ob.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)p.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);p.event.simulate("change",this,a,!0)});return!1}p.event.add(this,"beforeactivate._change",function(a){a=
a.target;ob.test(a.nodeName)&&!p._data(a,"changeBubbles")&&(p.event.add(a,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0)}),p._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){p.event.remove(this,"._change");return!ob.test(this.nodeName)}});L.focusinBubbles||p.each({focus:"focusin",
blur:"focusout"},function(a,b){var c=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){var d=this.ownerDocument||this,m=p._data(d,b);m||d.addEventListener(a,c,!0);p._data(d,b,(m||0)+1)},teardown:function(){var d=this.ownerDocument||this,m=p._data(d,b)-1;m?p._data(d,b,m):(d.removeEventListener(a,c,!0),p._removeData(d,b))}}});p.fn.extend({on:function(a,b,c,d,m){var e,f;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(e in a)this.on(e,
b,c,a[e],m);return this}null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"===typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0));if(!1===d)d=o;else if(!d)return this;1===m&&(f=d,d=function(a){p().off(a);return f.apply(this,arguments)},d.guid=f.guid||(f.guid=p.guid++));return this.each(function(){p.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,p(a.delegateTarget).off(d.namespace?d.origType+"."+
d.namespace:d.origType,d.selector,d.handler),this;if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=o);return this.each(function(){p.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return p.event.trigger(a,b,c,!0)}});var ub="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
Ib=/ jQuery\d+="(?:null|\d+)"/g,lb=RegExp("<(?:"+ub+")[\\s/>]","i"),xb=/^\s+/,pb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,db=/<([\w:]+)/,Ua=/<tbody/i,Jb=/<|&#?\w+;/,Kb=/<(?:script|style|link)/i,Na=/checked\s*(?:[^=]|=\s*.checked.)/i,ca=/^$|\/(?:java|ecma)script/i,Ga=/^true\/(.*)/,Ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,da={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>",
"</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:L.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},qb=s(R).appendChild(R.createElement("div"));da.optgroup=da.option;da.tbody=da.tfoot=da.colgroup=da.caption=da.thead;da.th=da.td;p.extend({clone:function(a,b,c){var d,m,e,f,g,r=p.contains(a.ownerDocument,a);L.html5Clone||p.isXMLDoc(a)||!lb.test("<"+
a.nodeName+">")?e=a.cloneNode(!0):(qb.innerHTML=a.outerHTML,qb.removeChild(e=qb.firstChild));if((!L.noCloneEvent||!L.noCloneChecked)&&(1===a.nodeType||11===a.nodeType)&&!p.isXMLDoc(a)){d=q(e);g=q(a);for(f=0;null!=(m=g[f]);++f)if(d[f]){var h=d[f],j=void 0,i=void 0,x=void 0;if(1===h.nodeType){j=h.nodeName.toLowerCase();if(!L.noCloneEvent&&h[p.expando]){x=p._data(h);for(i in x.events)p.removeEvent(h,i,x.handle);h.removeAttribute(p.expando)}if("script"===j&&h.text!==m.text)u(h).text=m.text,w(h);else if("object"===
j){if(h.parentNode&&(h.outerHTML=m.outerHTML),L.html5Clone&&m.innerHTML&&!p.trim(h.innerHTML))h.innerHTML=m.innerHTML}else if("input"===j&&Da.test(m.type))h.defaultChecked=h.checked=m.checked,h.value!==m.value&&(h.value=m.value);else if("option"===j)h.defaultSelected=h.selected=m.defaultSelected;else if("input"===j||"textarea"===j)h.defaultValue=m.defaultValue}}}if(b)if(c){g=g||q(a);d=d||q(e);for(f=0;null!=(m=g[f]);f++)v(m,d[f])}else v(a,e);d=q(e,"script");0<d.length&&y(d,!r&&q(a,"script"));return e},
buildFragment:function(a,b,c,d){for(var e,f,g,r,h,j,i=a.length,u=s(b),x=[],k=0;k<i;k++)if((f=a[k])||0===f)if("object"===p.type(f))p.merge(x,f.nodeType?[f]:f);else if(Jb.test(f)){g=g||u.appendChild(b.createElement("div"));r=(db.exec(f)||["",""])[1].toLowerCase();j=da[r]||da._default;g.innerHTML=j[1]+f.replace(pb,"<$1></$2>")+j[2];for(e=j[0];e--;)g=g.lastChild;!L.leadingWhitespace&&xb.test(f)&&x.push(b.createTextNode(xb.exec(f)[0]));if(!L.tbody)for(e=(f="table"===r&&!Ua.test(f)?g.firstChild:"<table>"===
j[1]&&!Ua.test(f)?g:0)&&f.childNodes.length;e--;)p.nodeName(h=f.childNodes[e],"tbody")&&!h.childNodes.length&&f.removeChild(h);p.merge(x,g.childNodes);for(g.textContent="";g.firstChild;)g.removeChild(g.firstChild);g=u.lastChild}else x.push(b.createTextNode(f));g&&u.removeChild(g);L.appendChecked||p.grep(q(x,"input"),m);for(k=0;f=x[k++];)if(!(d&&-1!==p.inArray(f,d))&&(a=p.contains(f.ownerDocument,f),g=q(u.appendChild(f),"script"),a&&y(g),c))for(e=0;f=g[e++];)ca.test(f.type||"")&&c.push(f);return u},
cleanData:function(a,b){for(var c,d,m,e,f=0,g=p.expando,r=p.cache,h=L.deleteExpando,j=p.event.special;null!=(c=a[f]);f++)if(b||p.acceptData(c))if(e=(m=c[g])&&r[m]){if(e.events)for(d in e.events)j[d]?p.event.remove(c,d):p.removeEvent(c,d,e.handle);r[m]&&(delete r[m],h?delete c[g]:typeof c.removeAttribute!==xa?c.removeAttribute(g):c[g]=null,la.push(m))}}});p.fn.extend({text:function(a){return ha(this,function(a){return void 0===a?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(a))},
null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&r(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=r(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,
function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?p.filter(a,this):this,m=0;null!=(c=d[m]);m++)!b&&1===c.nodeType&&p.cleanData(q(c)),c.parentNode&&(b&&p.contains(c.ownerDocument,c)&&y(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&p.cleanData(q(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&p.nodeName(a,"select")&&(a.options.length=0)}return this},
clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(a){return ha(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(Ib,""):void 0;if("string"===typeof a&&!Kb.test(a)&&(L.htmlSerialize||!lb.test(a))&&(L.leadingWhitespace||!xb.test(a))&&!da[(db.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(pb,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(p.cleanData(q(b,!1)),
b.innerHTML=a);b=0}catch(m){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(b){a=this.parentNode;p.cleanData(q(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){var a=P.apply([],a),c,d,m,e,f=0,g=this.length,r=this,h=g-1,j=a[0],i=p.isFunction(j);if(i||1<g&&"string"===typeof j&&!L.checkClone&&Na.test(j))return this.each(function(c){var d=
r.eq(c);i&&(a[0]=j.call(this,c,d.html()));d.domManip(a,b)});if(g&&(e=p.buildFragment(a,this[0].ownerDocument,!1,this),c=e.firstChild,1===e.childNodes.length&&(e=c),c)){m=p.map(q(e,"script"),u);for(d=m.length;f<g;f++)c=e,f!==h&&(c=p.clone(c,!0,!0),d&&p.merge(m,q(c,"script"))),b.call(this[f],c,f);if(d){e=m[m.length-1].ownerDocument;p.map(m,w);for(f=0;f<d;f++)if(c=m[f],ca.test(c.type||"")&&!p._data(c,"globalEval")&&p.contains(e,c))c.src?p._evalUrl&&p._evalUrl(c.src):p.globalEval((c.text||c.textContent||
c.innerHTML||"").replace(Ha,""))}e=c=null}return this}});p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(a){for(var c=0,d=[],m=p(a),e=m.length-1;c<=e;c++)a=c===e?this:this.clone(!0),p(m[c])[b](a),ga.apply(d,a.get());return this.pushStack(d)}});var Bb,eb={};(function(){var a;L.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;if((c=R.getElementsByTagName("body")[0])&&c.style)return b=R.createElement("div"),
d=R.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(R.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a}})();var A=/^margin/,ya=RegExp("^("+Pa+")(?!px)[a-z%]+$","i"),ma,Y,fa=/^(top|right|bottom|left)$/;
a.getComputedStyle?(ma=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Y=function(a,b,c){var d,m,e=a.style;m=(c=c||ma(a))?c.getPropertyValue(b)||c[b]:void 0;c&&(""===m&&!p.contains(a.ownerDocument,a)&&(m=p.style(a,b)),ya.test(m)&&A.test(b)&&(a=e.width,b=e.minWidth,d=e.maxWidth,e.minWidth=e.maxWidth=e.width=m,m=c.width,e.width=a,e.minWidth=b,e.maxWidth=d));return void 0===m?m:m+""}):R.documentElement.currentStyle&&
(ma=function(a){return a.currentStyle},Y=function(a,b,c){var d,m,e,f=a.style;e=(c=c||ma(a))?c[b]:void 0;null==e&&f&&f[b]&&(e=f[b]);if(ya.test(e)&&!fa.test(b)){c=f.left;if(m=(d=a.runtimeStyle)&&d.left)d.left=a.currentStyle.left;f.left="fontSize"===b?"1em":e;e=f.pixelLeft+"px";f.left=c;m&&(d.left=m)}return void 0===e?e:e+""||"auto"});(function(){function b(){var c,d,r,h;if((d=R.getElementsByTagName("body")[0])&&d.style){c=R.createElement("div");r=R.createElement("div");r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
d.appendChild(r).appendChild(c);c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";m=e=!1;g=!0;a.getComputedStyle&&(m="1%"!==(a.getComputedStyle(c,null)||{}).top,e="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width,h=c.appendChild(R.createElement("div")),h.style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",
h.style.marginRight=h.style.width="0",c.style.width="1px",g=!parseFloat((a.getComputedStyle(h,null)||{}).marginRight),c.removeChild(h));c.innerHTML="<table><tr><td></td><td>t</td></tr></table>";h=c.getElementsByTagName("td");h[0].style.cssText="margin:0;border:0;padding:0;display:none";if(f=0===h[0].offsetHeight)h[0].style.display="",h[1].style.display="none",f=0===h[0].offsetHeight;d.removeChild(r)}}var c,d,m,e,f,g;c=R.createElement("div");c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
if(d=(d=c.getElementsByTagName("a")[0])&&d.style)d.cssText="float:left;opacity:.5",L.opacity="0.5"===d.opacity,L.cssFloat=!!d.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",L.clearCloneStyle="content-box"===c.style.backgroundClip,L.boxSizing=""===d.boxSizing||""===d.MozBoxSizing||""===d.WebkitBoxSizing,p.extend(L,{reliableHiddenOffsets:function(){null==f&&b();return f},boxSizingReliable:function(){null==e&&b();return e},pixelPosition:function(){null==m&&b();
return m},reliableMarginRight:function(){null==g&&b();return g}})})();p.swap=function(a,b,c,d){var m,e={};for(m in b)e[m]=a.style[m],a.style[m]=b[m];c=c.apply(a,d||[]);for(m in b)a.style[m]=e[m];return c};var Ka=/alpha\([^)]*\)/i,va=/opacity\s*=\s*([^)]*)/,Lb=/^(none|table(?!-c[ea]).+)/,Hb=RegExp("^("+Pa+")(.*)$","i"),Eb=RegExp("^([+-])=("+Pa+")","i"),Qa={position:"absolute",visibility:"hidden",display:"block"},Mb={letterSpacing:"0",fontWeight:"400"},fb=["Webkit","O","Moz","ms"];p.extend({cssHooks:{opacity:{get:function(a,
b){if(b){var c=Y(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":L.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&!(3===a.nodeType||8===a.nodeType||!a.style)){var m,e,f,g=p.camelCase(b),r=a.style,b=p.cssProps[g]||(p.cssProps[g]=C(r,g));f=p.cssHooks[b]||p.cssHooks[g];if(void 0!==c){e=typeof c;if("string"===e&&(m=Eb.exec(c)))c=
(m[1]+1)*m[2]+parseFloat(p.css(a,b)),e="number";if(!(null==c||c!==c))if("number"===e&&!p.cssNumber[g]&&(c+="px"),!L.clearCloneStyle&&""===c&&0===b.indexOf("background")&&(r[b]="inherit"),!f||!("set"in f)||void 0!==(c=f.set(a,c,d)))try{r[b]=c}catch(h){}}else return f&&"get"in f&&void 0!==(m=f.get(a,!1,d))?m:r[b]}},css:function(a,b,c,d){var m,e;e=p.camelCase(b);b=p.cssProps[e]||(p.cssProps[e]=C(a.style,e));(e=p.cssHooks[b]||p.cssHooks[e])&&"get"in e&&(m=e.get(a,!0,c));void 0===m&&(m=Y(a,b,d));"normal"===
m&&b in Mb&&(m=Mb[b]);return""===c||c?(a=parseFloat(m),!0===c||p.isNumeric(a)?a||0:m):m}});p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return Lb.test(p.css(a,"display"))&&0===a.offsetWidth?p.swap(a,Qa,function(){return G(a,b,d)}):G(a,b,d)},set:function(a,c,d){var m=d&&ma(a);return T(a,c,d?K(a,b,d,L.boxSizing&&"border-box"===p.css(a,"boxSizing",!1,m),m):0)}}});L.opacity||(p.cssHooks.opacity={get:function(a,b){return va.test((b&&a.currentStyle?a.currentStyle.filter:
a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,m=p.isNumeric(b)?"alpha(opacity="+100*b+")":"",e=d&&d.filter||c.filter||"";c.zoom=1;if((1<=b||""===b)&&""===p.trim(e.replace(Ka,""))&&c.removeAttribute)if(c.removeAttribute("filter"),""===b||d&&!d.filter)return;c.filter=Ka.test(e)?e.replace(Ka,m):e+" "+m}});p.cssHooks.marginRight=H(L.reliableMarginRight,function(a,b){if(b)return p.swap(a,{display:"inline-block"},Y,[a,"marginRight"])});p.each({margin:"",
padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){for(var d=0,m={},c="string"===typeof c?c.split(" "):[c];4>d;d++)m[a+Aa[d]+b]=c[d]||c[d-2]||c[0];return m}};A.test(a)||(p.cssHooks[a+b].set=T)});p.fn.extend({css:function(a,b){return ha(this,function(a,b,c){var d,m={},e=0;if(p.isArray(b)){c=ma(a);for(d=b.length;e<d;e++)m[b[e]]=p.css(a,b[e],!1,c);return m}return void 0!==c?p.style(a,b,c):p.css(a,b)},a,b,1<arguments.length)},show:function(){return N(this,!0)},hide:function(){return N(this)},
toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){gb(this)?p(this).show():p(this).hide()})}});p.Tween=B;B.prototype={constructor:B,init:function(a,b,c,d,m,e){this.elem=a;this.prop=c;this.easing=m||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=e||(p.cssNumber[c]?"":"px")},cur:function(){var a=B.propHooks[this.prop];return a&&a.get?a.get(this):B.propHooks._default.get(this)},run:function(a){var b,c=B.propHooks[this.prop];this.pos=
this.options.duration?b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):B.propHooks._default.set(this);return this}};B.prototype.init.prototype=B.prototype;B.propHooks={_default:{get:function(a){if(null!=a.elem[a.prop]&&(!a.elem.style||null==a.elem.style[a.prop]))return a.elem[a.prop];a=p.css(a.elem,a.prop,"");return!a||"auto"===a?0:a},
set:function(a){if(p.fx.step[a.prop])p.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[p.cssProps[a.prop]]||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};p.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};p.fx=B.prototype.init;p.fx.step={};var vb,Va,Ya=/^(?:toggle|show|hide)$/,Ma=RegExp("^(?:([+-])=|)("+
Pa+")([a-z%]*)$","i"),Ca=/queueHooks$/,jb=[function(a,b,c){var d,m,e,f,g,r,h=this,j={},i=a.style,u=a.nodeType&&gb(a),x=p._data(a,"fxshow");c.queue||(f=p._queueHooks(a,"fx"),null==f.unqueued&&(f.unqueued=0,g=f.empty.fire,f.empty.fire=function(){f.unqueued||g()}),f.unqueued++,h.always(function(){h.always(function(){f.unqueued--;p.queue(a,"fx").length||f.empty.fire()})}));if(1===a.nodeType&&("height"in b||"width"in b))c.overflow=[i.overflow,i.overflowX,i.overflowY],r=p.css(a,"display"),m="none"===r?
p._data(a,"olddisplay")||E(a.nodeName):r,"inline"===m&&"none"===p.css(a,"float")&&(!L.inlineBlockNeedsLayout||"inline"===E(a.nodeName)?i.display="inline-block":i.zoom=1);c.overflow&&(i.overflow="hidden",L.shrinkWrapBlocks()||h.always(function(){i.overflow=c.overflow[0];i.overflowX=c.overflow[1];i.overflowY=c.overflow[2]}));for(d in b)if(m=b[d],Ya.exec(m)){delete b[d];e=e||"toggle"===m;if(m===(u?"hide":"show"))if("show"===m&&x&&void 0!==x[d])u=!0;else continue;j[d]=x&&x[d]||p.style(a,d)}else r=void 0;
if(p.isEmptyObject(j)){if("inline"===("none"===r?E(a.nodeName):r))i.display=r}else for(d in x?"hidden"in x&&(u=x.hidden):x=p._data(a,"fxshow",{}),e&&(x.hidden=!u),u?p(a).show():h.done(function(){p(a).hide()}),h.done(function(){var b;p._removeData(a,"fxshow");for(b in j)p.style(a,b,j[b])}),j)b=Q(u?x[d]:0,d,h),d in x||(x[d]=b.start,u&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],ab={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),m=Ma.exec(b),e=m&&m[3]||(p.cssNumber[a]?"":"px"),
f=(p.cssNumber[a]||"px"!==e&&+d)&&Ma.exec(p.css(c.elem,a)),g=1,r=20;if(f&&f[3]!==e){e=e||f[3];m=m||[];f=+d||1;do g=g||".5",f/=g,p.style(c.elem,a,f+e);while(g!==(g=c.cur()/d)&&1!==g&&--r)}m&&(f=c.start=+f||+d||0,c.unit=e,c.end=m[1]?f+(m[1]+1)*m[2]:+m[2]);return c}]};p.Animation=p.extend(S,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,m=a.length;d<m;d++)c=a[d],ab[c]=ab[c]||[],ab[c].unshift(b)},prefilter:function(a,b){b?jb.unshift(a):jb.push(a)}});p.speed=function(a,
b,c){var d=a&&"object"===typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){p.isFunction(d.old)&&d.old.call(this);d.queue&&p.dequeue(this,d.queue)};return d};p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(gb).css("opacity",
0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var m=p.isEmptyObject(a),e=p.speed(b,c,d),b=function(){var b=S(this,p.extend({},a),e);(m||p._data(this,"finish"))&&b.stop(!0)};b.finish=b;return m||!1===e.queue?this.each(b):this.queue(e.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=true,m=a!=null&&a+"queueHooks",e=p.timers,f=p._data(this);
if(m)f[m]&&f[m].stop&&d(f[m]);else for(m in f)f[m]&&f[m].stop&&Ca.test(m)&&d(f[m]);for(m=e.length;m--;)if(e[m].elem===this&&(a==null||e[m].queue===a)){e[m].anim.stop(c);b=false;e.splice(m,1)}(b||!c)&&p.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=p._data(this),d=c[a+"queue"];b=c[a+"queueHooks"];var m=p.timers,e=d?d.length:0;c.finish=!0;p.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=m.length;b--;)m[b].elem===this&&m[b].queue===a&&(m[b].anim.stop(!0),
m.splice(b,1));for(b=0;b<e;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(a,d,m){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(J(b,!0),a,d,m)}});p.each({slideDown:J("show"),slideUp:J("hide"),slideToggle:J("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});p.timers=[];
p.fx.tick=function(){var a,b=p.timers,c=0;for(vb=p.now();c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop();vb=void 0};p.fx.timer=function(a){p.timers.push(a);a()?p.fx.start():p.timers.pop()};p.fx.interval=13;p.fx.start=function(){Va||(Va=setInterval(p.fx.tick,p.fx.interval))};p.fx.stop=function(){clearInterval(Va);Va=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fn.delay=function(a,b){a=p.fx?p.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,
a);c.stop=function(){clearTimeout(d)}})};(function(){var a,b,c,d,m;b=R.createElement("div");b.setAttribute("className","t");b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";d=b.getElementsByTagName("a")[0];c=R.createElement("select");m=c.appendChild(R.createElement("option"));a=b.getElementsByTagName("input")[0];d.style.cssText="top:1px";L.getSetAttribute="t"!==b.className;L.style=/top/.test(d.getAttribute("style"));L.hrefNormalized="/a"===d.getAttribute("href");L.checkOn=
!!a.value;L.optSelected=m.selected;L.enctype=!!R.createElement("form").enctype;c.disabled=!0;L.optDisabled=!m.disabled;a=R.createElement("input");a.setAttribute("value","");L.input=""===a.getAttribute("value");a.value="t";a.setAttribute("type","radio");L.radioValue="t"===a.value})();var Za=/\r/g;p.fn.extend({val:function(a){var b,c,d,m=this[0];if(arguments.length)return d=p.isFunction(a),this.each(function(c){if(1===this.nodeType&&(c=d?a.call(this,c,p(this).val()):a,null==c?c="":"number"===typeof c?
c+="":p.isArray(c)&&(c=p.map(c,function(a){return a==null?"":a+""})),b=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],!b||!("set"in b)||void 0===b.set(this,c,"value")))this.value=c});if(m){if((b=p.valHooks[m.type]||p.valHooks[m.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(m,"value")))return c;c=m.value;return"string"===typeof c?c.replace(Za,""):null==c?"":c}}});p.extend({valHooks:{option:{get:function(a){var b=p.find.attr(a,"value");return null!=b?b:p.trim(p.text(a))}},select:{get:function(a){for(var b,
c=a.options,d=a.selectedIndex,m=(a="select-one"===a.type||0>d)?null:[],e=a?d+1:c.length,f=0>d?e:a?d:0;f<e;f++)if(b=c[f],(b.selected||f===d)&&(L.optDisabled?!b.disabled:null===b.getAttribute("disabled"))&&(!b.parentNode.disabled||!p.nodeName(b.parentNode,"optgroup"))){b=p(b).val();if(a)return b;m.push(b)}return m},set:function(a,b){for(var c,d,m=a.options,e=p.makeArray(b),f=m.length;f--;)if(d=m[f],0<=p.inArray(p.valHooks.option.get(d),e))try{d.selected=c=!0}catch(g){d.scrollHeight}else d.selected=
!1;c||(a.selectedIndex=-1);return m}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(a,b){if(p.isArray(b))return a.checked=0<=p.inArray(p(a).val(),b)}};L.checkOn||(p.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Wa,Ba,Ra=p.expr.attrHandle,rb=/^(?:checked|selected)$/i,$a=L.getSetAttribute,yb=L.input;p.fn.extend({attr:function(a,b){return ha(this,p.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,
a)})}});p.extend({attr:function(a,b,c){var d,m,e=a.nodeType;if(a&&!(3===e||8===e||2===e)){if(typeof a.getAttribute===xa)return p.prop(a,b,c);if(1!==e||!p.isXMLDoc(a))b=b.toLowerCase(),d=p.attrHooks[b]||(p.expr.match.bool.test(b)?Ba:Wa);if(void 0!==c)if(null===c)p.removeAttr(a,b);else{if(d&&"set"in d&&void 0!==(m=d.set(a,c,b)))return m;a.setAttribute(b,c+"");return c}else{if(d&&"get"in d&&null!==(m=d.get(a,b)))return m;m=p.find.attr(a,b);return null==m?void 0:m}}},removeAttr:function(a,b){var c,d,
m=0,e=b&&b.match(U);if(e&&1===a.nodeType)for(;c=e[m++];)d=p.propFix[c]||c,p.expr.match.bool.test(c)?yb&&$a||!rb.test(c)?a[d]=!1:a[p.camelCase("default-"+c)]=a[d]=!1:p.attr(a,c,""),a.removeAttribute($a?c:d)},attrHooks:{type:{set:function(a,b){if(!L.radioValue&&"radio"===b&&p.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});Ba={set:function(a,b,c){!1===b?p.removeAttr(a,c):yb&&$a||!rb.test(c)?a.setAttribute(!$a&&p.propFix[c]||c,c):a[p.camelCase("default-"+c)]=
a[c]=!0;return c}};p.each(p.expr.match.bool.source.match(/\w+/g),function(a,b){var c=Ra[b]||p.find.attr;Ra[b]=yb&&$a||!rb.test(b)?function(a,b,d){var m,e;d||(e=Ra[b],Ra[b]=m,m=null!=c(a,b,d)?b.toLowerCase():null,Ra[b]=e);return m}:function(a,b,c){if(!c)return a[p.camelCase("default-"+b)]?b.toLowerCase():null}});if(!yb||!$a)p.attrHooks.value={set:function(a,b,c){if(p.nodeName(a,"input"))a.defaultValue=b;else return Wa&&Wa.set(a,b,c)}};$a||(Wa={set:function(a,b,c){var d=a.getAttributeNode(c);d||a.setAttributeNode(d=
a.ownerDocument.createAttribute(c));d.value=b+="";if("value"===c||b===a.getAttribute(c))return b}},Ra.id=Ra.name=Ra.coords=function(a,b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},p.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);if(c&&c.specified)return c.value},set:Wa.set},p.attrHooks.contenteditable={set:function(a,b,c){Wa.set(a,""===b?!1:b,c)}},p.each(["width","height"],function(a,b){p.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,
"auto"),c}}}));L.style||(p.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,wa=/^(?:a|area)$/i;p.fn.extend({prop:function(a,b){return ha(this,p.prop,a,b,1<arguments.length)},removeProp:function(a){a=p.propFix[a]||a;return this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}});p.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,m,e;e=a.nodeType;
if(a&&!(3===e||8===e||2===e)){if(1!==e||!p.isXMLDoc(a))b=p.propFix[b]||b,m=p.propHooks[b];return void 0!==c?m&&"set"in m&&void 0!==(d=m.set(a,c,b))?d:a[b]=c:m&&"get"in m&&null!==(d=m.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=p.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||wa.test(a.nodeName)&&a.href?0:-1}}}});L.hrefNormalized||p.each(["href","src"],function(a,b){p.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}});L.optSelected||(p.propHooks.selected=
{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){p.propFix[this.toLowerCase()]=this});L.enctype||(p.propFix.enctype="encoding");var ra=/[\t\r\n\f]/g;p.fn.extend({addClass:function(a){var b,c,d,m,e,f=0,g=this.length;b="string"===typeof a&&a;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,
b,this.className))});if(b)for(b=(a||"").match(U)||[];f<g;f++)if(c=this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ra," "):" ")){for(e=0;m=b[e++];)0>d.indexOf(" "+m+" ")&&(d+=m+" ");d=p.trim(d);c.className!==d&&(c.className=d)}return this},removeClass:function(a){var b,c,d,m,e,f=0,g=this.length;b=0===arguments.length||"string"===typeof a&&a;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(U)||[];f<g;f++)if(c=
this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ra," "):"")){for(e=0;m=b[e++];)for(;0<=d.indexOf(" "+m+" ");)d=d.replace(" "+m+" "," ");d=a?p.trim(d):"";c.className!==d&&(c.className=d)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,m=p(this),e=a.match(U)||
[];b=e[d++];)m.hasClass(b)?m.removeClass(b):m.addClass(b);else if(c===xa||"boolean"===c)this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===a?"":p._data(this,"__className__")||""})},hasClass:function(a){for(var a=" "+a+" ",b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(ra," ").indexOf(a))return!0;return!1}});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){p.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}});p.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var x=p.now(),F=/\?/,Z=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
p.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,m=p.trim(b+"");return m&&!p.trim(m.replace(Z,function(a,b,m,e){c&&b&&(d=0);if(0===d)return a;c=m||b;d+=!e-!m;return""}))?Function("return "+m)():p.error("Invalid JSON: "+b)};p.parseXML=function(b){var c,d;if(!b||"string"!==typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(m){c=void 0}(!c||!c.documentElement||
c.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+b);return c};var ja,ka,ta=/#.*$/,Fa=/([?&])_=[^&]*/,Nb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Fb=/^(?:GET|HEAD)$/,Pb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Vb={},Ob={},Qb="*/".concat("*");try{ka=location.href}catch(Yb){ka=R.createElement("a"),ka.href="",ka=ka.href}ja=Gb.exec(ka.toLowerCase())||[];p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ka,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ja[1]),
global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?I(I(a,
p.ajaxSettings),b):I(p.ajaxSettings,a)},ajaxPrefilter:V(Vb),ajaxTransport:V(Ob),ajax:function(a,b){function c(a,b,d,m){var j,x,F,n;n=b;if(2!==q){q=2;g&&clearTimeout(g);h=void 0;f=m||"";pa.readyState=0<a?4:0;m=200<=a&&300>a||304===a;if(d){F=i;for(var y=pa,Z,ja,v,t,s=F.contents,ka=F.dataTypes;"*"===ka[0];)ka.shift(),void 0===ja&&(ja=F.mimeType||y.getResponseHeader("Content-Type"));if(ja)for(t in s)if(s[t]&&s[t].test(ja)){ka.unshift(t);break}if(ka[0]in d)v=ka[0];else{for(t in d){if(!ka[0]||F.converters[t+
" "+ka[0]]){v=t;break}Z||(Z=t)}v=v||Z}v?(v!==ka[0]&&ka.unshift(v),F=d[v]):F=void 0}a:{d=i;Z=F;ja=pa;v=m;var mb,z,E,y={},s=d.dataTypes.slice();if(s[1])for(z in d.converters)y[z.toLowerCase()]=d.converters[z];for(t=s.shift();t;)if(d.responseFields[t]&&(ja[d.responseFields[t]]=Z),!E&&v&&d.dataFilter&&(Z=d.dataFilter(Z,d.dataType)),E=t,t=s.shift())if("*"===t)t=E;else if("*"!==E&&E!==t){z=y[E+" "+t]||y["* "+t];if(!z)for(mb in y)if(F=mb.split(" "),F[1]===t&&(z=y[E+" "+F[0]]||y["* "+F[0]])){!0===z?z=y[mb]:
!0!==y[mb]&&(t=F[0],s.unshift(F[1]));break}if(!0!==z)if(z&&d["throws"])Z=z(Z);else try{Z=z(Z)}catch(ta){F={state:"parsererror",error:z?ta:"No conversion from "+E+" to "+t};break a}}F={state:"success",data:Z}}if(m)(i.ifModified&&((n=pa.getResponseHeader("Last-Modified"))&&(p.lastModified[e]=n),(n=pa.getResponseHeader("etag"))&&(p.etag[e]=n)),204===a||"HEAD"===i.type)?n="nocontent":304===a?n="notmodified":(n=F.state,j=F.data,x=F.error,m=!x);else if(x=n,a||!n)n="error",0>a&&(a=0);pa.status=a;pa.statusText=
(b||n)+"";m?l.resolveWith(u,[j,n,pa]):l.rejectWith(u,[pa,n,x]);pa.statusCode(o);o=void 0;r&&k.trigger(m?"ajaxSuccess":"ajaxError",[pa,i,m?j:x]);w.fireWith(u,[pa,n]);r&&(k.trigger("ajaxComplete",[pa,i]),--p.active||p.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);var b=b||{},d,m,e,f,g,r,h,j,i=p.ajaxSetup({},b),u=i.context||i,k=i.context&&(u.nodeType||u.jquery)?p(u):p.event,l=p.Deferred(),w=p.Callbacks("once memory"),o=i.statusCode||{},n={},y={},q=0,Z="canceled",pa={readyState:0,getResponseHeader:function(a){var b;
if(q===2){if(!j)for(j={};b=Nb.exec(f);)j[b[1].toLowerCase()]=b[2];b=j[a.toLowerCase()]}return b==null?null:b},getAllResponseHeaders:function(){return q===2?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();if(!q){a=y[c]=y[c]||a;n[a]=b}return this},overrideMimeType:function(a){if(!q)i.mimeType=a;return this},statusCode:function(a){var b;if(a)if(q<2)for(b in a)o[b]=[o[b],a[b]];else pa.always(a[pa.status]);return this},abort:function(a){a=a||Z;h&&h.abort(a);c(0,a);return this}};l.promise(pa).complete=
w.add;pa.success=pa.done;pa.error=pa.fail;i.url=((a||i.url||ka)+"").replace(ta,"").replace(Pb,ja[1]+"//");i.type=b.method||b.type||i.method||i.type;i.dataTypes=p.trim(i.dataType||"*").toLowerCase().match(U)||[""];null==i.crossDomain&&(d=Gb.exec(i.url.toLowerCase()),i.crossDomain=!(!d||!(d[1]!==ja[1]||d[2]!==ja[2]||(d[3]||("http:"===d[1]?"80":"443"))!==(ja[3]||("http:"===ja[1]?"80":"443")))));i.data&&(i.processData&&"string"!==typeof i.data)&&(i.data=p.param(i.data,i.traditional));D(Vb,i,b,pa);if(2===
q)return pa;(r=p.event&&i.global)&&0===p.active++&&p.event.trigger("ajaxStart");i.type=i.type.toUpperCase();i.hasContent=!Fb.test(i.type);e=i.url;if(!i.hasContent&&(i.data&&(e=i.url+=(F.test(e)?"&":"?")+i.data,delete i.data),!1===i.cache))i.url=Fa.test(e)?e.replace(Fa,"$1_="+x++):e+(F.test(e)?"&":"?")+"_="+x++;i.ifModified&&(p.lastModified[e]&&pa.setRequestHeader("If-Modified-Since",p.lastModified[e]),p.etag[e]&&pa.setRequestHeader("If-None-Match",p.etag[e]));(i.data&&i.hasContent&&!1!==i.contentType||
b.contentType)&&pa.setRequestHeader("Content-Type",i.contentType);pa.setRequestHeader("Accept",i.dataTypes[0]&&i.accepts[i.dataTypes[0]]?i.accepts[i.dataTypes[0]]+("*"!==i.dataTypes[0]?", "+Qb+"; q=0.01":""):i.accepts["*"]);for(m in i.headers)pa.setRequestHeader(m,i.headers[m]);if(i.beforeSend&&(!1===i.beforeSend.call(u,pa,i)||2===q))return pa.abort();Z="abort";for(m in{success:1,error:1,complete:1})pa[m](i[m]);if(h=D(Ob,i,b,pa)){pa.readyState=1;r&&k.trigger("ajaxSend",[pa,i]);i.async&&0<i.timeout&&
(g=setTimeout(function(){pa.abort("timeout")},i.timeout));try{q=1,h.send(n,c)}catch(v){if(2>q)c(-1,v);else throw v;}}else c(-1,"No Transport");return pa},getJSON:function(a,b,c){return p.get(a,b,c,"json")},getScript:function(a,b){return p.get(a,void 0,b,"script")}});p.each(["get","post"],function(a,b){p[b]=function(a,c,d,m){p.isFunction(c)&&(m=m||d,d=c,c=void 0);return p.ajax({url:a,type:b,dataType:m,data:c,success:d})}});p._evalUrl=function(a){return p.ajax({url:a,type:"GET",dataType:"script",async:!1,
global:!1,"throws":!0})};p.fn.extend({wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),
c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}});p.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!L.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||p.css(a,"display"))};p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)};
var ac=/%20/g,Xb=/\[\]$/,Rb=/\r?\n/g,pa=/^(?:submit|button|image|reset|file)$/i,mb=/^(?:input|select|textarea|keygen)/i;p.param=function(a,b){var c,d=[],m=function(a,b){b=p.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){m(this.name,this.value)});else for(c in a)O(c,a[c],b,m);return d.join("&").replace(ac,"+")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var a=p.prop(this,"elements");return a?p.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!p(this).is(":disabled")&&mb.test(this.nodeName)&&!pa.test(a)&&(this.checked||!Da.test(a))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a){return{name:b.name,value:a.replace(Rb,"\r\n")}}):{name:b.name,value:c.replace(Rb,"\r\n")}}).get()}});p.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){var b;
if(!(b=!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&ia()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:ia;var tb=0,za={},Sb=p.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in za)za[a](void 0,!0)});L.cors=!!Sb&&"withCredentials"in Sb;(Sb=L.ajax=!!Sb)&&p.ajaxTransport(function(a){if(!a.crossDomain||L.cors){var b;return{send:function(c,d){var m,e=a.xhr(),f=++tb;e.open(a.type,a.url,a.async,a.username,
a.password);if(a.xhrFields)for(m in a.xhrFields)e[m]=a.xhrFields[m];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);!a.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(m in c)void 0!==c[m]&&e.setRequestHeader(m,c[m]+"");e.send(a.hasContent&&a.data||null);b=function(c,m){var g,r,h;if(b&&(m||4===e.readyState))if(delete za[f],b=void 0,e.onreadystatechange=p.noop,m)4!==e.readyState&&e.abort();else{h={};g=e.status;"string"===typeof e.responseText&&(h.text=
e.responseText);try{r=e.statusText}catch(i){r=""}!g&&a.isLocal&&!a.crossDomain?g=h.text?200:404:1223===g&&(g=204)}h&&d(g,r,h,e.getAllResponseHeaders())};a.async?4===e.readyState?setTimeout(b):e.onreadystatechange=za[f]=b:b()},abort:function(){b&&b(void 0,!0)}}}});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",
function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});p.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=R.head||p("head")[0]||R.documentElement;return{send:function(d,m){b=R.createElement("script");b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||/loaded|complete/.test(b.readyState)){b.onload=b.onreadystatechange=null;b.parentNode&&b.parentNode.removeChild(b);b=null;c||
m(200,"success")}};c.insertBefore(b,c.firstChild)},abort:function(){if(b)b.onload(void 0,!0)}}}});var ib=[],Wb=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ib.pop()||p.expando+"_"+x++;this[a]=!0;return a}});p.ajaxPrefilter("json jsonp",function(b,c,d){var m,e,f,g=!1!==b.jsonp&&(Wb.test(b.url)?"url":"string"===typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wb.test(b.data)&&"data");if(g||"jsonp"===b.dataTypes[0])return m=b.jsonpCallback=
p.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g?b[g]=b[g].replace(Wb,"$1"+m):!1!==b.jsonp&&(b.url+=(F.test(b.url)?"&":"?")+b.jsonp+"="+m),b.converters["script json"]=function(){f||p.error(m+" was not called");return f[0]},b.dataTypes[0]="json",e=a[m],a[m]=function(){f=arguments},d.always(function(){a[m]=e;if(b[m]){b.jsonpCallback=c.jsonpCallback;ib.push(m)}f&&p.isFunction(e)&&e(f[0]);f=e=void 0}),"script"});p.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===
typeof b&&(c=b,b=!1);var b=b||R,d=La.exec(a),c=!c&&[];if(d)return[b.createElement(d[1])];d=p.buildFragment([a],b,c);c&&c.length&&p(c).remove();return p.merge([],d.childNodes)};var Zb=p.fn.load;p.fn.load=function(a,b,c){if("string"!==typeof a&&Zb)return Zb.apply(this,arguments);var d,m,e,f=this,g=a.indexOf(" ");0<=g&&(d=p.trim(a.slice(g,a.length)),a=a.slice(0,g));p.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(e="POST");0<f.length&&p.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){m=
arguments;f.html(d?p("<div>").append(p.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){f.each(c,m||[a.responseText,b,a])});return this};p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}});p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length};var Tb=a.document.documentElement;p.offset={setOffset:function(a,b,c){var d,m,e,f=p.css(a,"position"),g=p(a),r={};"static"===
f&&(a.style.position="relative");e=g.offset();m=p.css(a,"top");d=p.css(a,"left");("absolute"===f||"fixed"===f)&&-1<p.inArray("auto",[m,d])?(d=g.position(),m=d.top,d=d.left):(m=parseFloat(m)||0,d=parseFloat(d)||0);p.isFunction(b)&&(b=b.call(a,c,e));null!=b.top&&(r.top=b.top-e.top+m);null!=b.left&&(r.left=b.left-e.left+d);"using"in b?b.using.call(a,r):g.css(r)}};p.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){p.offset.setOffset(this,a,b)});var b,c,d=
{top:0,left:0},m=(c=this[0])&&c.ownerDocument;if(m){b=m.documentElement;if(!p.contains(b,c))return d;typeof c.getBoundingClientRect!==xa&&(d=c.getBoundingClientRect());c=M(m);return{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];"fixed"===p.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),p.nodeName(a[0],"html")||(c=a.offset()),
c.top+=p.css(a[0],"borderTopWidth",!0),c.left+=p.css(a[0],"borderLeftWidth",!0));return{top:b.top-c.top-p.css(d,"marginTop",!0),left:b.left-c.left-p.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Tb;a&&!p.nodeName(a,"html")&&"static"===p.css(a,"position");)a=a.offsetParent;return a||Tb})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);p.fn[a]=function(d){return ha(this,function(a,d,m){var e=M(a);
if(void 0===m)return e?b in e?e[b]:e.document.documentElement[d]:a[d];e?e.scrollTo(!c?m:p(e).scrollLeft(),c?m:p(e).scrollTop()):a[d]=m},a,d,arguments.length,null)}});p.each(["top","left"],function(a,b){p.cssHooks[b]=H(L.pixelPosition,function(a,c){if(c)return c=Y(a,b),ya.test(c)?p(a).position()[b]+"px":c})});p.each({Height:"height",Width:"width"},function(a,b){p.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){p.fn[d]=function(d,m){var e=arguments.length&&(c||"boolean"!==typeof d),f=
c||(!0===d||!0===m?"margin":"border");return ha(this,function(b,c,d){return p.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===d?p.css(b,c,f):p.style(b,c,d,f)},b,e?d:void 0,e,null)}})});p.fn.size=function(){return this.length};p.fn.andSelf=p.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return p});var zb=a.jQuery,$b=a.$;p.noConflict=
function(b){a.$===p&&(a.$=$b);b&&a.jQuery===p&&(a.jQuery=zb);return p};typeof b===xa&&(a.jQuery=a.$=p);return p});steal.executed("vendor/jquery/jquery.js");
(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g)):!1):(/^(input|select|textarea|button|object)$/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}
function d(a){for(var b,c;a.length&&a[0]!==document;){if(b=a.css("position"),("absolute"===b||"relative"===b||"fixed"===b)&&(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c))return c;a=a.parent()}return 0}function e(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";
this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,
calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.regional.en=a.extend(!0,{},this.regional[""]);this.regional["en-US"]=a.extend(!0,{},this.regional.en);this.dpDiv=h(a("<div id='"+
this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function h(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseout",function(){a(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseover",g)}function g(){a.datepicker._isDisabledDatepicker(s.inline?s.dpDiv.parent()[0]:s.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function f(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}function i(a){return function(){var b=
this.element.val();a.apply(this,arguments);this._refresh();b!==this.element.val()&&this._trigger("change")}}a.ui=a.ui||{};a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,b=this.parents().filter(function(){var b=a(this);return d&&"static"===
b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&b.length?b:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,
b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||0<=d)&&b(c,!e)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,m,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0;m&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top",
"Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})};a.fn["outer"+c]=function(b,m){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,m)+"px")})}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});
a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData));a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus();d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in
document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,b=a(this[0]);b.length&&b[0]!==document;){if(c=b.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(b.css("zIndex"),10),!isNaN(d)&&0!==d))return d;b=b.parent()}return 0}});
a.ui.plugin={add:function(b,c,d){var e,b=a.ui[b].prototype;for(e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c,d){if((b=a.plugins[b])&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(d=0;b.length>d;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}};var j=0,k=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{(d=a._data(e,"events"))&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData);
a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=
function(){return c.prototype[b].apply(this,arguments)},m=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,e=this._superApply;return this._super=a,this._superApply=m,b=d.apply(this,arguments),this._super=c,this._superApply=e,b}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+
"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g};a.widget.extend=function(b){for(var c,d,e=k.call(arguments,1),f=0,g=e.length;g>f;f++)for(c in e[f])d=e[f][c],e[f].hasOwnProperty(c)&&void 0!==d&&(b[c]=a.isPlainObject(d)?a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):d);return b};a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(e){var f="string"==typeof e,g=k.call(arguments,1),h=
this;return f?this.each(function(){var c,f=a.data(this,d);return"instance"===e?(h=f,!1):f?a.isFunction(f[e])&&"_"!==e.charAt(0)?(c=f[e].apply(f,g),c!==f&&void 0!==c?(h=c&&c.jquery?h.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+e+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+e+"'")}):(g.length&&(e=a.widget.extend.apply(null,[e].concat(g))),this.each(function(){var b=a.data(this,d);b?(b.option(e||{}),b._init&&
b._init()):a.data(this,d,new c(e,this))})),h}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=j++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=a();this.hoverable=a();this.focusable=a();c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===
c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));
this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){e=g[b]=a.widget.extend({},
this.options[b]);for(f=0;d.length-1>f;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),
this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1);d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget());a.each(d,function(d,g){function h(){return b||!0!==f.options.disabled&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&
(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace;(i=i[2])?e.delegate(i,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(c).undelegate(c);this.bindings=a(this.bindings.not(b).get());this.focusable=a(this.focusable.not(b).get());this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"==typeof a?c[a]:a).apply(c,arguments)},
b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f=this.options[b];if(d=d||{},c=a.Event(c),
c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],b=c.originalEvent)for(e in b)e in c||(c[e]=b[e]);return this.element.trigger(c,d),!(a.isFunction(f)&&!1===f.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?!0===e||"number"==typeof e?c:e.effect||c:b,e=e||{};"number"==typeof e&&(e={duration:e});
g=!a.isEmptyObject(e);e.complete=f;e.delay&&d.delay(e.delay);g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b]();f&&f.call(d[0]);c()})}});a.widget;var l=!1;a(document).mouseup(function(){l=!1});a.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,
function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!l){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(b);
this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,
this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),l=!0,!0)):!0}},_mouseMove:function(b){return this._mouseMoved&&(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button||!b.which)?
this._mouseUp(b):((b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted))},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=
!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),l=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function b(a,c,d){return[parseFloat(a[0])*
(n.test(a[0])?c/100:1),parseFloat(a[1])*(n.test(a[1])?d/100:1)]}function c(b,d){return parseInt(a.css(b,d),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,f,g=Math.max,h=Math.abs,i=Math.round,
j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,o=/^\w+/,n=/%$/,q=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),m=d.children()[0];return a("body").append(d),b=m.offsetWidth,d.css("overflow","scroll"),c=m.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||
b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),c="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth;return{width:"scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight?a.position.scrollbarWidth():0,height:c?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var b=a(b||window),c=a.isWindow(b[0]),d=!!b[0]&&9===b[0].nodeType;return{element:b,isWindow:c,isDocument:d,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),
scrollTop:b.scrollTop(),width:c||d?b.width():b.outerWidth(),height:c||d?b.height():b.outerHeight()}}};a.fn.position=function(e){if(!e||!e.of)return q.apply(this,arguments);var e=a.extend({},e),w,n,t,s,K,V,D=a(e.of),I=a.position.getWithinInfo(e.within),O=a.position.getScrollInfo(I),ia=(e.collision||"flip").split(" "),M={};return V=d(D),D[0].preventDefault&&(e.at="left top"),n=V.width,t=V.height,s=V.offset,K=a.extend({},s),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&
(c=j.test(c[0])?c.concat(["center"]):k.test(c[0])?["center"].concat(c):["center","center"]);c[0]=j.test(c[0])?c[0]:"center";c[1]=k.test(c[1])?c[1]:"center";a=l.exec(c[0]);b=l.exec(c[1]);M[this]=[a?a[0]:0,b?b[0]:0];e[this]=[o.exec(c[0])[0],o.exec(c[1])[0]]}),1===ia.length&&(ia[1]=ia[0]),"right"===e.at[0]?K.left+=n:"center"===e.at[0]&&(K.left+=n/2),"bottom"===e.at[1]?K.top+=t:"center"===e.at[1]&&(K.top+=t/2),w=b(M.at,n,t),K.left+=w[0],K.top+=w[1],this.each(function(){var d,j,u=a(this),k=u.outerWidth(),
l=u.outerHeight(),o=c(this,"marginLeft"),q=c(this,"marginTop"),H=k+o+c(this,"marginRight")+O.width,C=l+q+c(this,"marginBottom")+O.height,p=a.extend({},K),N=b(M.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?p.left-=k:"center"===e.my[0]&&(p.left-=k/2);"bottom"===e.my[1]?p.top-=l:"center"===e.my[1]&&(p.top-=l/2);p.left+=N[0];p.top+=N[1];f||(p.left=i(p.left),p.top=i(p.top));d={marginLeft:o,marginTop:q};a.each(["left","top"],function(b,c){a.ui.position[ia[b]]&&a.ui.position[ia[b]][c](p,{targetWidth:n,
targetHeight:t,elemWidth:k,elemHeight:l,collisionPosition:d,collisionWidth:H,collisionHeight:C,offset:[w[0]+N[0],w[1]+N[1]],my:e.my,at:e.at,within:I,elem:u})});e.using&&(j=function(a){var b=s.left-p.left,c=b+n-k,d=s.top-p.top,m=d+t-l,f={target:{element:D,left:s.left,top:s.top,width:n,height:t},element:{element:u,left:p.left,top:p.top,width:k,height:l},horizontal:0>c?"left":0<b?"right":"center",vertical:0>m?"top":0<d?"bottom":"middle"};k>n&&n>h(b+c)&&(f.horizontal="center");l>t&&t>h(d+m)&&(f.vertical=
"middle");f.important=g(h(b),h(c))>g(h(d),h(m))?"horizontal":"vertical";e.using.call(this,a,f)});u.offset(a.extend(p,{using:j}))})};a.ui.position={fit:{left:function(a,b){var c,d=b.within,m=d.isWindow?d.scrollLeft:d.offset.left,d=d.width,e=a.left-b.collisionPosition.marginLeft,f=m-e,h=e+b.collisionWidth-d-m;b.collisionWidth>d?0<f&&0>=h?(c=a.left+f+b.collisionWidth-d-m,a.left+=f-c):a.left=0<h&&0>=f?m:f>h?m+d-b.collisionWidth:m:0<f?a.left+=f:0<h?a.left-=h:a.left=g(a.left-e,a.left)},top:function(a,b){var c,
d=b.within,d=d.isWindow?d.scrollTop:d.offset.top,m=b.within.height,e=a.top-b.collisionPosition.marginTop,f=d-e,h=e+b.collisionHeight-m-d;b.collisionHeight>m?0<f&&0>=h?(c=a.top+f+b.collisionHeight-m-d,a.top+=f-c):a.top=0<h&&0>=f?d:f>h?d+m-b.collisionHeight:d:0<f?a.top+=f:0<h?a.top-=h:a.top=g(a.top-e,a.top)}},flip:{left:function(a,b){var c,d,m=b.within,e=m.offset.left+m.scrollLeft,f=m.width,m=m.isWindow?m.scrollLeft:m.offset.left,g=a.left-b.collisionPosition.marginLeft,r=g-m,g=g+b.collisionWidth-f-
m,i="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,j="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,u=-2*b.offset[0];0>r?(c=a.left+i+j+u+b.collisionWidth-f-e,(0>c||h(r)>c)&&(a.left+=i+j+u)):0<g&&(d=a.left-b.collisionPosition.marginLeft+i+j+u-m,(0<d||g>h(d))&&(a.left+=i+j+u))},top:function(a,b){var c,d,m=b.within,e=m.offset.top+m.scrollTop,f=m.height,m=m.isWindow?m.scrollTop:m.offset.top,g=a.top-b.collisionPosition.marginTop,r=g-m,g=g+b.collisionHeight-f-m,i="top"===
b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,j="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,u=-2*b.offset[1];0>r?(d=a.top+i+j+u+b.collisionHeight-f-e,(0>d||h(r)>d)&&(a.top+=i+j+u)):0<g&&(c=a.top-b.collisionPosition.marginTop+i+j+u-m,(0<c||g>h(c))&&(a.top+=i+j+u))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,
arguments)}}};(function(){var b,c,d,m,e=document.getElementsByTagName("body")[0];d=document.createElement("div");b=document.createElement(e?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};e&&a.extend(c,{position:"absolute",left:"-1000px",top:"-1000px"});for(m in c)b.style[m]=c[m];b.appendChild(d);c=e||document.documentElement;c.insertBefore(b,c.firstChild);d.style.cssText="position: absolute; left: 10.7432222px;";d=a(d).offset().left;f=10<d&&11>d;b.innerHTML=
"";c.removeChild(b)})()})();a.ui.position;a.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",
paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");b.collapsible||!1!==b.active&&null!=b.active||(b.active=0);this._processPanels();0>b.active&&(b.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+
b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();
this._destroyIcons();a=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?(this._activate(b),void 0):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),
this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&(this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b)),void 0)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+
1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels();!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=
!1,this.active=a()):!1===b.active?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){var a=this.headers,b=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");
this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();b&&(this._off(a.not(this.headers)),this._off(b.not(this.panels)))},_refresh:function(){var b,c=this.options,d=c.heightStyle,e=this.element.parent();this.active=this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();
this.headers.attr("role","tab").each(function(){var b=a(this),c=b.uniqueId().attr("id"),d=b.next(),m=d.uniqueId().attr("id");b.attr("aria-controls",m);d.attr("aria-labelledby",c)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",
0);this._createIcons();this._setupEvents(c.event);"fill"===d?(b=e.height(),this.element.siblings(":visible").each(function(){var c=a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).css("height","").height())}).height(b))},
_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,c);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);
this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),h={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault();f&&!c.collapsible||!1===this._trigger("beforeActivate",b,h)||(c.active=g?!1:this.headers.index(e),this.active=f?a():e,this._toggle(h),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),
f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=d;this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b));
d.attr({"aria-hidden":"true"});d.prev().attr({"aria-selected":"false","aria-expanded":"false"});c.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===parseInt(a(this).attr("tabIndex"),10)}).attr("tabIndex",-1);c.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(a,b,c){var d,e,f,g=this,h=0,i=a.css("box-sizing"),j=this.options.animate||{},k=a.length&&(!b.length||
a.index()<b.index())&&j.down||j,l=function(){g._toggleComplete(c)};return"number"==typeof k&&(f=k),"string"==typeof k&&(e=k),e=e||k.easing||j.easing,f=f||k.duration||j.duration,b.length?a.length?(d=a.show().outerHeight(),b.animate(this.hideProps,{duration:f,easing:e,step:function(a,b){b.now=Math.round(a)}}),a.hide().animate(this.showProps,{duration:f,easing:e,complete:l,step:function(a,c){c.now=Math.round(a);"height"!==c.prop?"content-box"===i&&(h+=c.now):"content"!==g.options.heightStyle&&(c.now=
Math.round(d-b.outerHeight()-h),h=0)}}),void 0):b.animate(this.hideProps,f,e,l):a.animate(this.showProps,f,e,l)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}});a.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",
at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=
a(b.target);!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var c=a(b.currentTarget);c.siblings(".ui-state-active").removeClass("ui-state-active");
this.focus(b,c)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){var c,d,e,f=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);
break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);
break;default:f=!1,c=this.previousFilter||"",d=String.fromCharCode(b.keyCode),e=!1,clearTimeout(this.filterTimer),d===c?e=!0:d=c+d,c=this._filterMenuItems(d),c=e&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(d=String.fromCharCode(b.keyCode),c=this._filterMenuItems(d)),c.length?(this.focus(b,c),this.previousFilter=d,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}f&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||
(this.active.is("[aria-haspopup='true']")?this.expand(a):this.select(a))},refresh:function(){var b,c=this,d=this.options.icons.submenu;b=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);b.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.parent(),e=a("<span>").addClass("ui-menu-icon ui-icon "+
d).data("ui-menu-submenu-carat",!0);c.attr("aria-haspopup","true").prepend(e);b.attr("aria-labelledby",c.attr("id"))});b=b.add(this.element).find(this.options.items);b.not(".ui-menu-item").each(function(){var b=a(this);c._isDivider(b)&&b.addClass("ui-widget-content ui-menu-divider")});b.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});b.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],
this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu);"disabled"===a&&this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b);this._super(a,b)},focus:function(a,b){var c;this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();c=this.active.addClass("ui-state-focus").removeClass("ui-state-active");
this.options.role&&this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||
0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer);this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));
d.length||(d=this.element);this._close(d);this.blur(b);this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=
this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[b]());this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=
a(this),0>c.offset().top-d-e}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(b),void 0)},previousPage:function(b){var c,d,e;return this.active?(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),0<c.offset().top-d+e}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items).first())),void 0):(this.next(b),
void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,c)},_filterMenuItems:function(b){var b=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),c=RegExp("^"+b,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return c.test(a.trim(a(this).text()))})}});
a.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,e="input"===e;this.isMultiLine=f?!0:e?!1:this.element.prop("isContentEditable");this.valueMethod=this.element[f||
e?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,c=!0,void 0;c=d=b=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0;this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0;this._move("nextPage",e);break;case f.UP:b=!0;this._keyEvent("previous",e);break;case f.DOWN:b=!0;this._keyEvent("next",e);break;case f.ENTER:this.menu.active&&(b=!0,
e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault(),void 0;if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",
d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,a.preventDefault(),void 0):(this._searchTimeout(a),void 0)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(a),this._change(a),void 0)}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");
this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){var d,e;return this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))?(this.menu.blur(),
this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)}),void 0):(e=c.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",b,{item:e})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(e.value),d=c.item.attr("aria-label")||e.value,d&&a.trim(d).length&&(this.liveRegion.children().hide(),a("<div>").text(d).appendTo(this.liveRegion)),void 0)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&
(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);
this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this._appendTo());"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),
b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort();d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){var b=this.term===
this._value(),c=this.menu.element.is(":visible"),d=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;(!b||b&&!c&&!d)&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):!1!==this._trigger("search",b)?this._search(a):void 0},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},
_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a);this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&
(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b);this.isNewMenu=!0;this.menu.refresh();c.show();
this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").text(c.label).appendTo(b)},_move:function(a,
b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[a](b),void 0):(this.search(null,b),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}});a.extend(a.ui.autocomplete,
{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments);this.options.disabled||
this.cancelSearch||(c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),a("<div>").text(c).appendTo(this.liveRegion))}});a.ui.autocomplete;var n,o=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},t=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"'][type=radio]"):a("[name='"+c+"'][type=radio]",b.ownerDocument).filter(function(){return!this.form})),
e};a.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,o);"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,
c=this.options,d="checkbox"===this.type||"radio"===this.type,e=d?"":"ui-state-active";null===c.label&&(c.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){c.disabled||this===n&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){c.disabled||a(this).removeClass(e)}).bind("click"+
this.eventNamespace,function(a){c.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});d&&this.element.bind("change"+this.eventNamespace,function(){b.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return c.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,
function(){if(c.disabled)return!1;a(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed","true");var d=b.element[0];t(d).not(d).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return c.disabled?!1:(a(this).addClass("ui-state-active"),n=this,b.document.one("mouseup",function(){n=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return c.disabled?
!1:(a(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(b){return c.disabled?!1:((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()}));this._setOption("disabled",c.disabled);
this._resetButton()},_determineButtonType:function(){var a,b,c;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=
a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?(this.widget().toggleClass("ui-state-disabled",!!b),this.element.prop("disabled",!!b),b&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");
b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?t(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",
"false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&
f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only");b.addClass(f.join(" "))}});a.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},
_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction"),c=this.element.find(this.options.items),d=c.filter(":ui-button");c.not(":ui-button").button();d.button("refresh");this.buttons=c.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?
"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});a.ui.button;a.extend(a.ui,{datepicker:{version:"1.11.4"}});var s;a.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return f(this._defaults,
a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase();e="div"===d||"span"===d;b.id||(this.uuid+=1,b.id="dp"+this.uuid);f=this._newInst(a(b),e);f.settings=a.extend({},c||{});"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?h(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):
this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]);c.trigger=a([]);d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f;d=this._get(c,"appendText");var g=this._get(c,"isRTL");c.append&&c.append.remove();d&&(c.append=a("<span class='"+this._appendClass+
"'>"+d+"</span>"),b[g?"before":"after"](c.append));b.unbind("focus",this._showDatepicker);c.trigger&&c.trigger.remove();d=this._get(c,"showOn");("focus"===d||"both"===d)&&b.focus(this._showDatepicker);("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,
title:e}):e)),b[g?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(e=
d=c=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay()));a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),
c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,e,g){var h,i,j,k,l,b=this._dialogInst;return b||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b)),f(b.settings,
e||{}),c=c&&c.constructor===Date?this._formatDate(b,c):c,this._dialogInput.val(c),this._pos=g?g.length?g:[g.pageX,g.pageY]:null,this._pos||(i=document.documentElement.clientWidth,j=document.documentElement.clientHeight,k=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[i/2-100+k,j/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),b.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),
this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",b),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,"datepicker"),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):
("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty(),s===e&&(s=null))},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,c,d){var e,g,h,i,j=this._getInst(b);return 2===arguments.length&&"string"==
typeof c?"defaults"===c?a.extend({},a.datepicker._defaults):j?"all"===c?a.extend({},j.settings):this._get(j,c):null:(e=c||{},"string"==typeof c&&(e={},e[c]=d),j&&(this._curInst===j&&this._hideDatepicker(),g=this._getDateDatepicker(b,!0),h=this._getMinMaxDate(j,"min"),i=this._getMinMaxDate(j,"max"),f(j.settings,e),null!==h&&void 0!==e.dateFormat&&void 0===e.minDate&&(j.settings.minDate=this._formatDate(j,h)),null!==i&&void 0!==e.dateFormat&&void 0===e.maxDate&&(j.settings.maxDate=this._formatDate(j,
i)),"disabled"in e&&(e.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(a(b),j),this._autoSize(j),this._setDate(j,g),this._updateAlternate(j),this._updateDatepicker(j)),void 0)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,
b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),
c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);
g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D");g=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D");g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&
a.datepicker._adjustDate(b.target,h?-1:1,"D");g=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);
return a.datepicker._get(e,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">d||!c||-1<c.indexOf(d)):void 0},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!==b.lastVal)try{a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))&&(a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),
a.datepicker._updateDatepicker(b))}catch(c){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,e,g,h,i,j;c=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));e=(e=a.datepicker._get(c,"beforeShow"))?
e.apply(b,[b,c]):{};!1!==e&&(f(c.settings,e),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),
a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.css("z-index",d(a(b))+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),
a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4;s=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var c,d=this._getNumberOfMonths(b),e=d[1],f=b.dpDiv.find("."+this._dayOverClass+" a");0<f.length&&g.apply(f.get(0));b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<e&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em");b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi");
b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus();b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,
c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):
0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._get(this._getInst(b),"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[d?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,g=this._curInst;!g||b&&g!==a.data(b,"datepicker")||this._datepickerShowing&&(c=this._get(g,"showAnim"),d=this._get(g,"duration"),e=function(){a.datepicker._tidyDialog(g)},a.effects&&(a.effects.effect[c]||
a.effects[c])?g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),d,e):g.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(g,"onClose"),f&&f.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(b){if(a.datepicker._curInst){var b=a(b.target),c=a.datepicker._getInst(b[0]);(b[0].id!==a.datepicker._mainDivId&&0===b.parents("#"+a.datepicker._mainDivId).length&&!b.hasClass(a.datepicker.markerClassName)&&!b.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==c)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var b=a(b),
e=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(e,c+("M"===d?this._get(e,"showCurrentAtPos"):0),d),this._updateDatepicker(e))},_gotoToday:function(b){var c,b=a(b),d=this._getInst(b[0]);this._get(d,"gotoCurrent")&&d.currentDay?(d.selectedDay=d.currentDay,d.drawMonth=d.selectedMonth=d.currentMonth,d.drawYear=d.selectedYear=d.currentYear):(c=new Date,d.selectedDay=c.getDate(),d.drawMonth=d.selectedMonth=c.getMonth(),d.drawYear=d.selectedYear=c.getFullYear());this._notifyChange(d);
this._adjustDate(b)},_selectMonthYear:function(b,c,d){var b=a(b),e=this._getInst(b[0]);e["selected"+("M"===d?"Month":"Year")]=e["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(b)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,
this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){this._selectDate(a(b),"")},_selectDate:function(b,c){var d,e=this._getInst(a(b)[0]),c=null!=c?c:this._formatDate(e);e.input&&e.input.val(c);this._updateAlternate(e);(d=this._get(e,"onSelect"))?d.apply(e.input?e.input[0]:null,[c,e]):e.input&&e.input.trigger("change");e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.focus(),this._lastInput=
null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){var b,a=new Date(a.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),b=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(b,c,
d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?""+c:c+"",""===c)return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,j="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),k=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,l=(d?d.dayNames:null)||this._defaults.dayNames,o=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,d=(d?d.monthNames:null)||this._defaults.monthNames,n=-1,q=-1,t=-1,s=-1,J=!1,Q=function(a){a=
b.length>e+1&&b.charAt(e+1)===a;return a&&e++,a},X=function(a){var b=Q(a),b="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,a=RegExp("^\\d{"+("y"===a?b:1)+","+b+"}"),a=c.substring(i).match(a);if(!a)throw"Missing number at position "+i;return i+=a[0].length,parseInt(a[0],10)},S=function(b,d,e){var f=-1,b=a.map(Q(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(b,function(a,b){var d=b[1];return c.substr(i,d.length).toLowerCase()===d.toLowerCase()?(f=
b[0],i+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+i;},V=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;b.length>e;e++)if(J)"'"!==b.charAt(e)||Q("'")?V():J=!1;else switch(b.charAt(e)){case "d":t=X("d");break;case "D":S("D",k,l);break;case "o":s=X("o");break;case "m":q=X("m");break;case "M":q=S("M",o,d);break;case "y":n=X("y");break;case "@":h=new Date(X("@"));n=h.getFullYear();q=h.getMonth()+1;t=h.getDate();break;case "!":h=
new Date((X("!")-this._ticksTo1970)/1E4);n=h.getFullYear();q=h.getMonth()+1;t=h.getDate();break;case "'":Q("'")?V():J=!0;break;default:V()}if(c.length>i&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===n?n=(new Date).getFullYear():100>n&&(n+=(new Date).getFullYear()-(new Date).getFullYear()%100+(j>=n?0:-100)),-1<s){q=1;for(t=s;!(f=this._getDaysInMonth(n,q-1),f>=t);)q++,t-=f}if(h=this._daylightSavingAdjust(new Date(n,q-1,t)),h.getFullYear()!==n||h.getMonth()+
1!==q||h.getDate()!==t)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?
c.monthNamesShort:null)||this._defaults.monthNamesShort,c=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){b=a.length>d+1&&a.charAt(d+1)===b;return b&&d++,b},i=function(a,b,c){b=""+b;if(h(a))for(;c>b.length;)b="0"+b;return b},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(d=0;a.length>d;d++)if(l)"'"!==a.charAt(d)||h("'")?k+=a.charAt(d):l=!1;else switch(a.charAt(d)){case "d":k+=i("d",b.getDate(),2);break;case "D":k+=j("D",b.getDay(),e,f);break;case "o":k+=i("o",Math.round(((new Date(b.getFullYear(),
b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":k+=i("m",b.getMonth()+1,2);break;case "M":k+=j("M",b.getMonth(),g,c);break;case "y":k+=h("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":k+=b.getTime();break;case "!":k+=1E4*b.getTime()+this._ticksTo1970;break;case "'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(d)}return k},_possibleChars:function(a){var b,c="",d=!1,e=function(c){c=a.length>b+1&&a.charAt(b+1)===
c;return c&&b++,c};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case "d":case "m":case "y":case "@":c+="0123456789";break;case "D":case "M":return null;case "'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),
f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=d?f.getDate():0;a.currentMonth=d?f.getMonth():0;a.currentYear=d?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+
a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),e=e.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(c);i;){switch(i[2]||"d"){case "d":case "D":e+=parseInt(i[1],10);break;case "w":case "W":e+=7*parseInt(i[1],10);break;case "m":case "M":g+=parseInt(i[1],10);e=Math.min(e,a.datepicker._getDaysInMonth(f,
g));break;case "y":case "Y":f+=parseInt(i[1],10),e=Math.min(e,a.datepicker._getDaysInMonth(f,g))}i=h.exec(c)}return new Date(f,g,e)},c=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return c=c&&"Invalid Date"==""+c?d:c,c&&(c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0)),this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){return a?(a.setHours(12<a.getHours()?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=
!b,e=a.selectedMonth,f=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).bind(this.getAttribute("data-event"),{prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),
this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,o,n,q,t,s,Q,X,S,V,D,I,O,ia,M,la,sa,P=new Date,P=this._daylightSavingAdjust(new Date(P.getFullYear(),P.getMonth(),P.getDate())),ga=this._get(a,"isRTL");g=this._get(a,"showButtonPanel");d=this._get(a,"hideIfNoPrevNext");f=this._get(a,"navigationAsDateFormat");
var ea=this._getNumberOfMonths(a),aa=this._get(a,"showCurrentAtPos");e=this._get(a,"stepMonths");var Ja=1!==ea[0]||1!==ea[1],na=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),L=this._getMinMaxDate(a,"min"),p=this._getMinMaxDate(a,"max"),aa=a.drawMonth-aa,ua=a.drawYear;if(0>aa&&(aa+=12,ua--),p){b=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-ea[0]*ea[1]+1,p.getDate()));for(b=L&&L>b?L:b;this._daylightSavingAdjust(new Date(ua,
aa,1))>b;)aa--,0>aa&&(aa=11,ua--)}a.drawMonth=aa;a.drawYear=ua;b=this._get(a,"prevText");b=f?this.formatDate(b,this._daylightSavingAdjust(new Date(ua,aa-e,1)),this._getFormatConfig(a)):b;b=this._canAdjustMonth(a,-1,ua,aa)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+b+"'><span class='ui-icon ui-icon-circle-triangle-"+(ga?"e":"w")+"'>"+b+"</span></a>":d?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+b+"'><span class='ui-icon ui-icon-circle-triangle-"+
(ga?"e":"w")+"'>"+b+"</span></a>";c=this._get(a,"nextText");c=f?this.formatDate(c,this._daylightSavingAdjust(new Date(ua,aa+e,1)),this._getFormatConfig(a)):c;d=this._canAdjustMonth(a,1,ua,aa)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(ga?"w":"e")+"'>"+c+"</span></a>":d?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(ga?
"w":"e")+"'>"+c+"</span></a>";e=this._get(a,"currentText");c=this._get(a,"gotoCurrent")&&a.currentDay?na:P;e=f?this.formatDate(e,c,this._getFormatConfig(a)):e;f=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>";g=g?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(ga?f:"")+(this._isInRange(a,c)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+
e+"</button>":"")+(ga?"":f)+"</div>":"";f=parseInt(this._get(a,"firstDay"),10);f=isNaN(f)?0:f;e=this._get(a,"showWeek");c=this._get(a,"dayNames");h=this._get(a,"dayNamesMin");i=this._get(a,"monthNames");j=this._get(a,"monthNamesShort");k=this._get(a,"beforeShowDay");l=this._get(a,"showOtherMonths");o=this._get(a,"selectOtherMonths");n=this._getDefaultDate(a);q="";for(s=0;ea[0]>s;s++){Q="";this.maxRows=4;for(X=0;ea[1]>X;X++){if(S=this._daylightSavingAdjust(new Date(ua,aa,a.selectedDay)),t=" ui-corner-all",
V="",Ja){if(V+="<div class='ui-datepicker-group",1<ea[1])switch(X){case 0:V+=" ui-datepicker-group-first";t=" ui-corner-"+(ga?"right":"left");break;case ea[1]-1:V+=" ui-datepicker-group-last";t=" ui-corner-"+(ga?"left":"right");break;default:V+=" ui-datepicker-group-middle",t=""}V+="'>"}V+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+t+"'>"+(/all|left/.test(t)&&0===s?ga?d:b:"")+(/all|right/.test(t)&&0===s?ga?b:d:"")+this._generateMonthYearHeader(a,aa,ua,L,p,0<s||0<X,i,j)+
"</div><table class='ui-datepicker-calendar'><thead><tr>";D=e?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"";for(t=0;7>t;t++)I=(t+f)%7,D+="<th scope='col'"+(5<=(t+f+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+c[I]+"'>"+h[I]+"</span></th>";V+=D+"</tr></thead><tbody>";D=this._getDaysInMonth(ua,aa);ua===a.selectedYear&&aa===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,D));t=(this._getFirstDayOfMonth(ua,aa)-f+7)%7;D=Math.ceil((t+D)/7);this.maxRows=
D=Ja?this.maxRows>D?this.maxRows:D:D;I=this._daylightSavingAdjust(new Date(ua,aa,1-t));for(O=0;D>O;O++){V+="<tr>";ia=e?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"";for(t=0;7>t;t++)M=k?k.apply(a.input?a.input[0]:null,[I]):[!0,""],sa=(la=I.getMonth()!==aa)&&!o||!M[0]||L&&L>I||p&&I>p,ia+="<td class='"+(5<=(t+f+6)%7?" ui-datepicker-week-end":"")+(la?" ui-datepicker-other-month":"")+(I.getTime()===S.getTime()&&aa===a.selectedMonth&&a._keyEvent||n.getTime()===I.getTime()&&
n.getTime()===S.getTime()?" "+this._dayOverClass:"")+(sa?" "+this._unselectableClass+" ui-state-disabled":"")+(la&&!l?"":" "+M[1]+(I.getTime()===na.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(la&&!l||!M[2]?"":" title='"+M[2].replace(/'/g,"&#39;")+"'")+(sa?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(la&&!l?"&#xa0;":sa?"<span class='ui-state-default'>"+I.getDate()+"</span>":
"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===na.getTime()?" ui-state-active":"")+(la?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);V+=ia+"</tr>"}aa++;11<aa&&(aa=0,ua++);V+="</tbody></table>"+(Ja?"</div>"+(0<ea[0]&&X===ea[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");Q+=V}q+=Q}return q+=g,a._keyEvent=!1,q},_generateMonthYearHeader:function(a,b,c,d,e,f,g,
h){var i,j,k,l=this._get(a,"changeMonth"),o=this._get(a,"changeYear"),n=this._get(a,"showMonthAfterYear"),q="<div class='ui-datepicker-title'>",t="";if(f||!l)t+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{g=d&&d.getFullYear()===c;i=e&&e.getFullYear()===c;t+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(j=0;12>j;j++)(!g||j>=d.getMonth())&&(!i||e.getMonth()>=j)&&(t+="<option value='"+j+"'"+(j===b?" selected='selected'":"")+">"+h[j]+"</option>");
t+="</select>"}if(n||(q+=t+(!f&&l&&o?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!o)q+="<span class='ui-datepicker-year'>"+c+"</span>";else{h=this._get(a,"yearRange").split(":");k=(new Date).getFullYear();g=function(a){a=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?k+parseInt(a,10):parseInt(a,10);return isNaN(a)?k:a};b=g(h[0]);h=Math.max(b,g(h[1]||""));b=d?Math.max(b,d.getFullYear()):b;h=e?Math.min(h,e.getFullYear()):h;for(a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";h>=
b;b++)a.yearshtml+="<option value='"+b+"'"+(b===c?" selected='selected'":"")+">"+b+"</option>";a.yearshtml+="</select>";q+=a.yearshtml;a.yearshtml=null}return q+=this._get(a,"yearSuffix"),n&&(q+=(!f&&l&&o?"":"&#xa0;")+t),q+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=
d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&c>b?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,
b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth())),this._isInRange(a,c)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,
"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,
dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});
a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0);0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):
this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))};a.datepicker=new e;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.11.4";a.datepicker;a.widget("ui.draggable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,
containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");
this._setHandleClassName();this._mouseInit()},_setOption:function(a,b){this._super(a,b);"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(b){var c=this.options;return this._blurActiveElement(b),
this.helper||c.disabled||0<a(b.target).closest(".ui-resizable-handle").length?!1:(this.handle=this._getHandle(b),this.handle?(this._blockFrames(!0===c.iframeFix?"iframe":c.iframeFix),!0):!1)},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),
delete this.iframeBlocks)},_blurActiveElement:function(b){var c=this.document[0];if(this.handleElement.is(b.target))try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(d){}},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=
this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(this._cacheHelperProportions(),
a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._normalizeRightBottom(),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&
(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,
b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",b)&&c._clear()}):!1!==this._trigger("stop",b)&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,
b),this.handleElement.is(b.target)&&this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},
_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),b=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&b[0]===this.element[0]&&this._setPositionRelative(),b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position",
"absolute"),b},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=
this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),
10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),
10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-
this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===e.containment?(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top],void 0):e.containment.constructor===Array?(this.containment=e.containment,void 0):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),
10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c),void 0):(this.containment=null,void 0)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);
return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),
left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),
g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),
"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();
this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&
(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[];a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&
(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1;a.each(d.sortables,function(){this.isOver?(this.isOver=0,d.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(b),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",
b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs;f.helperProportions=d.helperProportions;f.offset.click=d.offset.click;f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e}));e?(f.isOver||(f.isOver=1,d._parent=
c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,
function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",
b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){b=a("body");d=d.options;b.css("cursor")&&(d._cursor=b.css("cursor"));b.css("cursor",d.cursor)},stop:function(b,c,d){b=d.options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("opacity")&&(d._opacity=b.css("opacity"));b.css("opacity",d.opacity)},stop:function(b,c,d){b=d.options;
b._opacity&&a(c.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1));c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var c=d.options,e=!1,f=d.scrollParentNotHidden[0],g=d.document[0];f!==g&&"HTML"!==f.tagName?(c.axis&&"x"===c.axis||(d.overflowOffset.top+f.offsetHeight-
b.pageY<c.scrollSensitivity?f.scrollTop=e=f.scrollTop+c.scrollSpeed:b.pageY-d.overflowOffset.top<c.scrollSensitivity&&(f.scrollTop=e=f.scrollTop-c.scrollSpeed)),c.axis&&"y"===c.axis||(d.overflowOffset.left+f.offsetWidth-b.pageX<c.scrollSensitivity?f.scrollLeft=e=f.scrollLeft+c.scrollSpeed:b.pageX-d.overflowOffset.left<c.scrollSensitivity&&(f.scrollLeft=e=f.scrollLeft-c.scrollSpeed))):(c.axis&&"x"===c.axis||(b.pageY-a(g).scrollTop()<c.scrollSensitivity?e=a(g).scrollTop(a(g).scrollTop()-c.scrollSpeed):
a(window).height()-(b.pageY-a(g).scrollTop())<c.scrollSensitivity&&(e=a(g).scrollTop(a(g).scrollTop()+c.scrollSpeed))),c.axis&&"y"===c.axis||(b.pageX-a(g).scrollLeft()<c.scrollSensitivity?e=a(g).scrollLeft(a(g).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(g).scrollLeft())<c.scrollSensitivity&&(e=a(g).scrollLeft(a(g).scrollLeft()+c.scrollSpeed))));!1!==e&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,c,d){b=
d.options;d.snapElements=[];a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,o,n,q=d.options,t=q.snapTolerance,s=c.offset.left,J=s+d.helperProportions.width,Q=c.offset.top,X=Q+d.helperProportions.height;for(o=d.snapElements.length-1;0<=o;o--)i=d.snapElements[o].left-d.margins.left,
j=i+d.snapElements[o].width,k=d.snapElements[o].top-d.margins.top,l=k+d.snapElements[o].height,i-t>J||s>j+t||k-t>X||Q>l+t||!a.contains(d.snapElements[o].item.ownerDocument,d.snapElements[o].item)?(d.snapElements[o].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[o].item})),d.snapElements[o].snapping=!1):("inner"!==q.snapMode&&(e=t>=Math.abs(k-X),f=t>=Math.abs(l-Q),g=t>=Math.abs(i-J),h=t>=Math.abs(j-s),e&&(c.position.top=d._convertPositionTo("relative",
{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==q.snapMode&&(e=t>=Math.abs(k-Q),f=t>=Math.abs(l-X),g=t>=Math.abs(i-s),h=t>=Math.abs(j-J),e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",
{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[o].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[o].item})),d.snapElements[o].snapping=e||f||g||h||n)}});a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,b=a.makeArray(a(d.options.stack)).sort(function(b,
c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});b.length&&(e=parseInt(a(b[0]).css("zIndex"),10)||0,a(b).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+b.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("zIndex")&&(d._zIndex=b.css("zIndex"));b.css("zIndex",d.zIndex)},stop:function(b,c,d){b=d.options;b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}});a.ui.draggable;a.widget("ui.resizable",a.ui.mouse,
{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":
"scrollTop";return 0<b[d]?!0:(b[d]=1,b[d]=0,!1)},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),
width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,
marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",
se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=a(),this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");b=this.handles.split(",");this.handles={};for(c=0;b.length>c;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e)}this._renderAxis=
function(b){var c,d,e,f,b=b||this.element;for(c in this.handles)this.handles[c].constructor===String?this.handles[c]=this.element.children(this.handles[c]).first().show():(this.handles[c].jquery||this.handles[c].nodeType)&&(this.handles[c]=a(this.handles[c]),this._on(this.handles[c],{mousedown:g._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),
e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),this._handles=this._handles.add(this.handles[c])};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")});h.autoHide&&
(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,
d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),
height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),g.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,
d,e=this.originalMousePosition,f=b.pageX-e.left||0,e=b.pageY-e.top||0,g=this._change[this.axis];return this._updatePrevProperties(),g?(c=g.apply(this,[b,f,e]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",
b,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:this.sizeDiff.height,f=d?0:this.sizeDiff.width,g={width:this.helper.width()-f,height:this.helper.height()-e},h=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,i=parseInt(this.element.css("top"),10)+(this.position.top-
this.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},
_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f;f=this.options;f={minWidth:this._isNumber(f.minWidth)?f.minWidth:0,maxWidth:this._isNumber(f.maxWidth)?
f.maxWidth:1/0,minHeight:this._isNumber(f.minHeight)?f.minHeight:0,maxHeight:this._isNumber(f.maxHeight)?f.maxHeight:1/0};(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),f.maxWidth>c&&(f.maxWidth=c),f.maxHeight>e&&(f.maxHeight=e));this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset();this._isNumber(a.left)&&(this.position.left=
a.left);this._isNumber(a.top)&&(this.position.top=a.top);this._isNumber(a.height)&&(this.size.height=a.height);this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=
this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,j=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),
f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&c&&(a.top=i-b.minHeight),e&&c&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){for(var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],a=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)c[b]=parseInt(d[b],10)||0,c[b]+=
parseInt(a[b],10)||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||this.element;this._proportionallyResizeElements.length>b;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.options;
this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+
b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,
[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]);"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","animate",{stop:function(b){var c=
a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,f={width:c.size.width-(f?0:c.sizeDiff.width),height:c.size.height-g},g=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,h=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(f,h&&g?{top:h,left:g}:{}),{duration:d.animateDuration,easing:d.animateEasing,
step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height});c._updateCache(d);c._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.element,k=i.options.containment;(j=k instanceof a?k.get(0):/parent/.test(k)?j.parent().get(0):
k)&&(i.containerElement=a(j),/document/.test(k)||k===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(j),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))}),i.containerOffset=b.offset(),i.containerPosition=b.position(),i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-
c[1]},d=i.containerOffset,e=i.containerSize.height,f=i.containerSize.width,g=i._hasScroll(j,"left")?j.scrollWidth:f,h=i._hasScroll(j)?j.scrollHeight:e,i.parentData={element:j,left:d.left,top:d.top,width:g,height:h}))},resize:function(b){var c,d,e,f=a(this).resizable("instance");c=f.options;d=f.containerOffset;e=f.position;var b=f._aspectRatio||b.shiftKey,g={top:0,left:0},h=f.containerElement,i=!0;h[0]!==document&&/static/.test(h.css("position"))&&(g=d);e.left<(f._helper?d.left:0)&&(f.size.width+=
f._helper?f.position.left-d.left:f.position.left-g.left,b&&(f.size.height=f.size.width/f.aspectRatio,i=!1),f.position.left=c.helper?d.left:0);e.top<(f._helper?d.top:0)&&(f.size.height+=f._helper?f.position.top-d.top:f.position.top,b&&(f.size.width=f.size.height*f.aspectRatio,i=!1),f.position.top=f._helper?d.top:0);c=f.containerElement.get(0)===f.element.parent().get(0);e=/relative|absolute/.test(f.containerElement.css("position"));c&&e?(f.offset.left=f.parentData.left+f.position.left,f.offset.top=
f.parentData.top+f.position.top):(f.offset.left=f.element.offset().left,f.offset.top=f.element.offset().top);c=Math.abs(f.sizeDiff.width+(f._helper?f.offset.left-g.left:f.offset.left-d.left));d=Math.abs(f.sizeDiff.height+(f._helper?f.offset.top-g.top:f.offset.top-d.top));c+f.size.width>=f.parentData.width&&(f.size.width=f.parentData.width-c,b&&(f.size.height=f.size.width/f.aspectRatio,i=!1));d+f.size.height>=f.parentData.height&&(f.size.height=f.parentData.height-d,b&&(f.size.width=f.size.height*
f.aspectRatio,i=!1));i||(f.position.left=f.prevPosition.left,f.position.top=f.prevPosition.top,f.size.width=f.prevSize.width,f.size.height=f.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,g=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:g});b._helper&&
!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:g})}});a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance").options;a(b.alsoResize).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.originalSize,f=d.originalPosition,
g={height:d.size.height-e.height||0,width:d.size.width-e.width||0,top:d.position.top-f.top||0,left:d.position.left-f.left||0};a(d.options.alsoResize).each(function(){var b=a(this),d=a(this).data("ui-resizable-alsoresize"),e={},f=b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(a,b){var c=(d[b]||0)+(g[b]||0);c&&0<=c&&(e[b]=c||null)});b.css(e)})},stop:function(){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","ghost",
{start:function(){var b=a(this).resizable("instance"),c=b.options,d=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");
b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis,i="number"==typeof d.grid?[d.grid,d.grid]:d.grid,j=i[0]||1,k=i[1]||1,l=Math.round((e.width-f.width)/j)*j,e=Math.round((e.height-f.height)/k)*k,o=f.width+l,n=f.height+e,q=d.maxWidth&&o>d.maxWidth,t=d.maxHeight&&n>d.maxHeight,s=d.minWidth&&d.minWidth>o,J=d.minHeight&&d.minHeight>
n;d.grid=i;s&&(o+=j);J&&(n+=k);q&&(o-=j);t&&(n-=k);/^(se|s|e)$/.test(h)?(c.size.width=o,c.size.height=n):/^(ne)$/.test(h)?(c.size.width=o,c.size.height=n,c.position.top=g.top-e):/^(sw)$/.test(h)?(c.size.width=o,c.size.height=n,c.position.left=g.left-l):((0>=n-k||0>=o-j)&&(b=c._getPaddingPlusBorderDimensions(this)),0<n-k?(c.size.height=n,c.position.top=g.top-e):(n=k-b.height,c.size.height=n,c.position.top=g.top+f.height-n),0<o-j?(c.size.width=o,c.position.left=g.left-l):(o=j-b.width,c.size.width=o,
c.position.left=g.left+f.width-o))}});a.ui.resizable;a.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,
drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};
this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&a.fn.draggable&&this._makeDraggable();this.options.resizable&&a.fn.resizable&&this._makeResizable();
this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",
this.originalTitle);a=b.parent.children().eq(b.index);a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c,d=this;if(this._isOpen&&!1!==this._trigger("beforeClose",b)){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{(c=this.document[0].activeElement)&&"body"!==c.nodeName.toLowerCase()&&
a(c).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=!1,e=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get(),e=Math.max.apply(null,e);return e>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",e+1),d=!0),d&&!c&&this._trigger("focus",b),d},open:function(){var b=this;return this._isOpen?
(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable();b._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]"));
a.length||(a=this.element.find(":tabbable"));a.length||(a=this.uiDialogButtonPane.find(":tabbable"));a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable"));a.length||(a=this.uiDialog);a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement;this.uiDialog[0]===b||a.contains(this.uiDialog[0],b)||this._focusTabbable()}b.preventDefault();c.call(this);this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),this.close(b),void 0;if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==
this.uiDialog[0]||!b.shiftKey||(this._delay(function(){e.focus()}),b.preventDefault()):(this._delay(function(){d.focus()}),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);
this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}});this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault();this.close(a)}});b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);
this._title(b);this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;");a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),
this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(a.each(c,function(c,d){var e,f,d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d);e=d.click;d.click=function(){e.apply(b.element[0],arguments)};f={icons:d.icons,text:d.showText};delete d.icons;delete d.showText;a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),
void 0)},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging");c._blockFrames();c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){var g=f.offset.left-c.document.scrollLeft(),h=f.offset.top-c.document.scrollTop();
d.position={my:"left top",at:"left"+(0<=g?"+":"")+g+" top"+(0<=h?"+":"")+h,of:c.window};a(this).removeClass("ui-dialog-dragging");c._unblockFrames();c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),e="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",
alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:e,start:function(d,e){a(this).addClass("ui-dialog-resizing");c._blockFrames();c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),g=g.top-c.document.scrollTop();d.height=c.uiDialog.height();d.width=c.uiDialog.width();d.position={my:"left top",at:"left"+(0<=h?"+":"")+h+
" top"+(0<=g?"+":"")+g,of:c.window};a(this).removeClass("ui-dialog-resizing");c._unblockFrames();c._trigger("resizeStop",e,b(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget();this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);-1!==c&&b.splice(c,1)},_trackingInstances:function(){var a=
this.document.data("ui-dialog-instances");return a||(a=[],this.document.data("ui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show();this.uiDialog.position(this.options.position);a||this.uiDialog.hide()},_setOptions:function(b){var c=this,d=!1,e={};a.each(b,function(a,b){c._setOption(a,b);a in c.sizeRelatedOptions&&(d=!0);a in c.resizableRelatedOptions&&
(e[a]=b)});d&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b);"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),
!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||!1===b||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});d.minWidth>d.width&&(d.width=d.minWidth);a=this.uiDialog.css({height:"auto",
width:d.width}).outerHeight();b=Math.max(0,d.minHeight-a);c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none";"auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),
height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1});this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||
(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):this.document.unbind("focusin").removeData("ui-dialog-overlays");
this.overlay.remove();this.overlay=null}}});a.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1;this.isout=!0;this.accept=a.isFunction(d)?d:function(a){return a.is(d)};this.proportions=function(){return arguments.length?(b=arguments[0],void 0):b?b:b=
{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(c.scope);c.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[];a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;a.length>b;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){this._splice(a.ui.ddmanager.droppables[this.options.scope]);this.element.removeClass("ui-droppable ui-droppable-disabled")},
_setOption:function(b,c){"accept"===b?this.accept=a.isFunction(c)?c:function(a){return a.is(c)}:"scope"===b&&(this._splice(a.ui.ddmanager.droppables[this.options.scope]),this._addToManager(c));this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);
c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),
this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(e=!0,!1):void 0}),
e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(){return function(a,b,c,d){if(!b.offset)return!1;var e=(a.positionAbs||a.position.absolute).left+
a.margins.left,f=(a.positionAbs||a.position.absolute).top+a.margins.top,g=e+a.helperProportions.width,h=f+a.helperProportions.height,i=b.offset.left,j=b.offset.top,k=i+b.proportions().width,l=j+b.proportions().height;switch(c){case "fit":return e>=i&&k>=g&&f>=j&&l>=h;case "intersect":return e+a.helperProportions.width/2>i&&k>g-a.helperProportions.width/2&&f+a.helperProportions.height/2>j&&l>h-a.helperProportions.height/2;case "pointer":a=d.pageY;c=b.proportions().height;if(j=a>=j&&j+c>a)d=d.pageX,
b=b.proportions().width,j=d>=i&&i+b>d;return j;case "touch":return(f>=j&&l>=f||h>=j&&l>=h||j>f&&h>l)&&(e>=i&&k>=e||g>=i&&k>=g||i>e&&g>k);default:return!1}}}();a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();d=0;a:for(;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=
0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display");f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,
this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c);a.each(a.ui.ddmanager.droppables[b.options.scope]||
[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance,c);(g=!g&&this.isover?"isout":g&&!this.isover?"isover":null)&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e}),f.length&&(d=a(f[0]).droppable("instance"),d.greedyChild="isover"===g)),d&&"isover"===g&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[g]=!0,this["isout"===
g?"isover":"isout"]=!1,this["isover"===g?"_over":"_out"].call(this,c),d&&"isout"===g&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}};a.ui.droppable;var q=a;a.effects={effect:{}};(function(a,b){function c(a,b,d){var e=k[b.type]||{};return null==a?d||!b.def?null:b.def:(a=e.floor?~~a:parseFloat(a),isNaN(a)?b.def:e.mod?(a+e.mod)%e.mod:0>a?0:a>e.max?e.max:a)}
function d(c){var e=i(),g=e._rgba=[];return c=c.toLowerCase(),n(h,function(a,d){var f,h=d.re.exec(c),h=h&&d.parse(h),i=d.space||"rgba";return h?(f=e[i](h),e[j[i].cache]=f[j[i].cache],g=e._rgba=f._rgba,!1):b}),g.length?("0,0,0,0"===g.join()&&a.extend(g,f.transparent),e):f[c]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f,g=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],
a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],i=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},j={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},k={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=i.support={},o=a("<p>")[0],n=a.each;o.style.cssText="background-color:rgba(1,1,1,.5)";l.rgba=
-1<o.style.backgroundColor.indexOf("rgba");n(j,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});i.fn=a.extend(i.prototype,{parse:function(e,g,h,k){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,o=a.type(e),q=this._rgba=[];return g!==b&&(e=[e,g,h,k],o="array"),"string"===o?this.parse(d(e)||f._default):"array"===o?(n(j.rgba.props,function(a,b){q[b.idx]=c(e[b.idx],b)}),this):"object"===o?(e instanceof i?n(j,function(a,
b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):n(j,function(b,d){var f=d.cache;n(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)});l[f]&&0>a.inArray(null,l[f].slice(0,3))&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):b},is:function(a){var c=i(a),d=!0,e=this;return n(j,function(a,f){var g,h=c[f.cache];return h&&(g=e[f.cache]||f.to&&f.to(e._rgba)||[],n(f.props,function(a,c){return null!=h[c.idx]?d=h[c.idx]===g[c.idx]:b})),d}),
d},_space:function(){var a=[],b=this;return n(j,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=i(a),e=d._space(),f=j[e],g=0===this.alpha()?i("transparent"):this,h=g[f.cache]||f.to(g._rgba),m=h.slice();return d=d[f.cache],n(f.props,function(a,e){var f=e.idx,g=h[f],i=d[f],j=k[e.type]||{};null!==i&&(null===g?m[f]=i:(j.mod&&(i-g>j.mod/2?g+=j.mod:g-i>j.mod/2&&(g-=j.mod)),m[f]=c((i-g)*b+g,e)))}),this[e](m)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),
d=c.pop(),e=i(b)._rgba;return i(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=2<b?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*
d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});i.fn.parse.prototype=i.fn;j.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,a=a[3],g=Math.max(d,e,f),h=Math.min(d,e,f),i=g-h,j=g+h,m=0.5*j;return b=h===g?0:d===g?60*(e-f)/i+360:e===g?60*(f-d)/i+120:60*(d-e)/i+240,c=0===i?0:0.5>=m?i/j:i/(2-j),[Math.round(b)%
360,c,m,null==a?1:a]};j.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],a=a[3],c=0.5>=d?d*(1+c):d+c-d*c,d=2*d-c;return[Math.round(255*e(d,c,b+1/3)),Math.round(255*e(d,c,b)),Math.round(255*e(d,c,b-1/3)),a]};n(j,function(d,e){var f=e.props,h=e.cache,j=e.to,k=e.from;i.fn[d]=function(d){if(j&&!this[h]&&(this[h]=j(this._rgba)),d===b)return this[h].slice();var e,g=a.type(d),l="array"===g||"object"===g?d:arguments,o=this[h].slice();return n(f,
function(a,b){var d=l["object"===g?a:b.idx];null==d&&(d=o[b.idx]);o[b.idx]=c(d,b)}),k?(e=i(k(o)),e[h]=o,e):i(o)};n(f,function(b,c){i.fn[b]||(i.fn[b]=function(e){var f,h=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===h?k:("function"===h&&(e=e.call(this,k),h=a.type(e)),null==e&&c.empty?this:("string"===h&&(f=g.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})});i.hook=function(b){b=b.split(" ");n(b,function(b,c){a.cssHooks[c]=
{set:function(b,e){var f,g="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=i(f||e),!l.rgba&&1!==e._rgba[3]){for(f="backgroundColor"===c?b.parentNode:b;(""===g||"transparent"===g)&&f&&f.style;)try{g=a.css(f,"backgroundColor"),f=f.parentNode}catch(h){}e=e.blend(g&&"transparent"!==g?g:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(j){}}};a.fx.step[c]=function(b){b.colorInit||(b.start=i(b.elem,c),b.end=i(b.end),b.colorInit=!0);a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})};
i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");a.cssHooks.borderColor={expand:function(a){var b={};return n(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}};f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",
silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(q);(function(){function b(c){var d,e=c.ownerDocument.defaultView?c.ownerDocument.defaultView.getComputedStyle(c,null):c.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(c=e.length;c--;)d=e[c],"string"==typeof e[d]&&(f[a.camelCase(d)]=e[d]);else for(d in e)"string"==typeof e[d]&&(f[d]=e[d]);return f}var c=["add","remove","toggle"],d={border:1,borderBottom:1,borderColor:1,borderLeft:1,
borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(q.style(a.elem,c,a.end),a.setAttr=!0)}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a.effects.animateClass=function(e,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||
"",j=i.children?g.find("*").addBack():g,j=j.map(function(){return{el:a(this),start:b(this)}});f=function(){a.each(c,function(a,b){e[b]&&g[b+"Class"](e[b])})};f();j=j.map(function(){this.end=b(this.el[0]);var c=this.start,e=this.end,f,g,h={};for(f in e)g=e[f],c[f]!==g&&(d[f]||(a.fx.step[f]||!isNaN(parseFloat(g)))&&(h[f]=g));return this.diff=h,this});g.attr("class",h);j=j.map(function(){var b=this,c=a.Deferred();return this.el.animate(this.diff,a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}})),
c.promise()});a.when.apply(a,j.get()).done(function(){f();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});i.complete.call(g[0])})})};a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return 1<arguments.length?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,
d,e,f,g){return"boolean"==typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,f)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})})();(function(){function b(c,d,e,f){return a.isPlainObject(c)&&(d=c,c=c.effect),c={effect:c},null==d&&(d={}),a.isFunction(d)&&(f=d,e=null,d={}),("number"==typeof d||a.fx.speeds[d])&&(f=e,e=d,d={}),
a.isFunction(e)&&(f=e,e=null),d&&a.extend(c,d),e=e||d.duration,c.duration=a.fx.off?0:"number"==typeof e?e:e in a.fx.speeds?a.fx.speeds[e]:a.fx.speeds._default,c.complete=f||d.complete,c}function c(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}a.extend(a.effects,{version:"1.11.4",save:function(a,b){for(var c=0;b.length>c;c++)null!==b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,
b){var c,d;for(d=0;b.length>d;d++)null!==b[d]&&(c=a.data("ui-effects-"+b[d]),void 0===c&&(c=""),a.css(b[d],c))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();
var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),
zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);0<f[0]&&
(e[c]=f[0]*d+f[1])}),e}});a.fn.extend({effect:function(){function c(b){function e(){a.isFunction(h)&&h.call(f[0]);a.isFunction(b)&&b()}var f=a(this),h=d.complete,i=d.mode;(f.is(":hidden")?"hide"===i:"show"===i)?(f[i](),e()):g.call(f[0],d,e)}var d=b.apply(this,arguments),e=d.mode,f=d.queue,g=a.effects.effect[d.effect];return a.fx.off||!g?e?this[e](d.duration,d.complete):this.each(function(){d.complete&&d.complete.call(this)}):!1===f?this.each(c):this.queue(f||"fx",c)},show:function(a){return function(d){if(c(d))return a.apply(this,
arguments);var e=b.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"==typeof d)return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em",
"px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])}),d}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;((b=Math.pow(2,--c))-1)/
11>a;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-c(1-a)};a.easing["easeInOut"+b]=function(a){return 0.5>a?c(2*a)/2:1-c(-2*a+2)/2}})})();a.effects;a.effects.effect.blind=function(b,c){var d,e,f,g=a(this),h="position top bottom left right height width".split(" "),i=a.effects.setMode(g,b.mode||"hide");d=b.direction||"up";var j=/up|down|vertical/.test(d),k=j?"height":"width",l=j?"top":"left",o=/up|left|vertical|horizontal/.test(d),
n={},q="show"===i;g.parent().is(".ui-effects-wrapper")?a.effects.save(g.parent(),h):a.effects.save(g,h);g.show();d=a.effects.createWrapper(g).css({overflow:"hidden"});e=d[k]();f=parseFloat(d.css(l))||0;n[k]=q?e:0;o||(g.css(j?"bottom":"right",0).css(j?"top":"left","auto").css({position:"absolute"}),n[l]=q?f:e+f);q&&(d.css(k,0),o||d.css(l,f+e));d.animate(n,{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===i&&g.hide();a.effects.restore(g,h);a.effects.removeWrapper(g);c()}})};
a.effects.effect.bounce=function(b,c){var d,e,f,g=a(this),h="position top bottom left right height width".split(" "),i=a.effects.setMode(g,b.mode||"effect"),j="hide"===i;d="show"===i;var k=b.direction||"up",i=b.distance,l=b.times||5,o=2*l+(d||j?1:0),n=b.duration/o,q=b.easing,t="up"===k||"down"===k?"top":"left",k="up"===k||"left"===k,s=g.queue(),J=s.length;(d||j)&&h.push("opacity");a.effects.save(g,h);g.show();a.effects.createWrapper(g);i||(i=g["top"===t?"outerHeight":"outerWidth"]()/3);d&&(f={opacity:1},
f[t]=0,g.css("opacity",0).css(t,k?2*-i:2*i).animate(f,n,q));j&&(i/=Math.pow(2,l-1));f={};for(d=f[t]=0;l>d;d++)e={},e[t]=(k?"-=":"+=")+i,g.animate(e,n,q).animate(f,n,q),i=j?2*i:i/2;j&&(e={opacity:0},e[t]=(k?"-=":"+=")+i,g.animate(e,n,q));g.queue(function(){j&&g.hide();a.effects.restore(g,h);a.effects.removeWrapper(g);c()});1<J&&s.splice.apply(s,[1,0].concat(s.splice(J,o+1)));g.dequeue()};a.effects.effect.clip=function(b,c){var d,e,f=a(this),g="position top bottom left right height width".split(" "),
h="show"===a.effects.setMode(f,b.mode||"hide"),i="vertical"===(b.direction||"vertical"),j=i?"height":"width",i=i?"top":"left",k={};a.effects.save(f,g);f.show();d=a.effects.createWrapper(f).css({overflow:"hidden"});d="IMG"===f[0].tagName?d:f;e=d[j]();h&&(d.css(j,0),d.css(i,e/2));k[j]=h?e:0;k[i]=h?0:e/2;d.animate(k,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){h||f.hide();a.effects.restore(f,g);a.effects.removeWrapper(f);c()}})};a.effects.effect.drop=function(b,c){var d,e=a(this),
f="position top bottom left right opacity height width".split(" "),g=a.effects.setMode(e,b.mode||"hide"),h="show"===g;d=b.direction||"left";var i="up"===d||"down"===d?"top":"left",j="up"===d||"left"===d?"pos":"neg",k={opacity:h?1:0};a.effects.save(e,f);e.show();a.effects.createWrapper(e);d=b.distance||e["top"===i?"outerHeight":"outerWidth"](!0)/2;h&&e.css("opacity",0).css(i,"pos"===j?-d:d);k[i]=(h?"pos"===j?"+=":"-=":"pos"===j?"-=":"+=")+d;e.animate(k,{queue:!1,duration:b.duration,easing:b.easing,
complete:function(){"hide"===g&&e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);c()}})};a.effects.effect.explode=function(b,c){function d(){J.push(this);J.length===k*l&&(o.css({visibility:"visible"}),a(J).remove(),n||o.hide(),c())}var e,f,g,h,i,j,k=b.pieces?Math.round(Math.sqrt(b.pieces)):3,l=k,o=a(this),n="show"===a.effects.setMode(o,b.mode||"hide"),q=o.show().css("visibility","hidden").offset(),t=Math.ceil(o.outerWidth()/l),s=Math.ceil(o.outerHeight()/k),J=[];for(e=0;k>e;e++){h=q.top+
e*s;j=e-(k-1)/2;for(f=0;l>f;f++)g=q.left+f*t,i=f-(l-1)/2,o.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-f*t,top:-e*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:t,height:s,left:g+(n?i*t:0),top:h+(n?j*s:0),opacity:n?0:1}).animate({left:g+(n?0:i*t),top:h+(n?0:j*s),opacity:n?1:0},b.duration||500,b.easing,d)}};a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},
{queue:!1,duration:b.duration,easing:b.easing,complete:c})};a.effects.effect.fold=function(b,c){var d,e,f=a(this),g="position top bottom left right height width".split(" ");d=a.effects.setMode(f,b.mode||"hide");var h="show"===d,i="hide"===d,j=b.size||15,k=/([0-9]+)%/.exec(j),l=!!b.horizFirst,o=(e=h!==l)?["width","height"]:["height","width"],n=b.duration/2,q={},t={};a.effects.save(f,g);f.show();d=a.effects.createWrapper(f).css({overflow:"hidden"});e=e?[d.width(),d.height()]:[d.height(),d.width()];
k&&(j=parseInt(k[1],10)/100*e[i?0:1]);h&&d.css(l?{height:0,width:j}:{height:j,width:0});q[o[0]]=h?e[0]:j;t[o[1]]=h?e[1]:0;d.animate(q,n,b.easing).animate(t,n,b.easing,function(){i&&f.hide();a.effects.restore(f,g);a.effects.removeWrapper(f);c()})};a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0);a.effects.save(d,e);d.show().css({backgroundImage:"none",
backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,e);c()}})};a.effects.effect.size=function(b,c){var d,e,f,g,h,i,j=a(this),k="position top bottom left right width height overflow opacity".split(" ");h="position top bottom left right overflow opacity".split(" ");var l=["width","height","overflow"],o=["fontSize"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],q=["borderLeftWidth",
"borderRightWidth","paddingLeft","paddingRight"],t=a.effects.setMode(j,b.mode||"effect"),s=b.restore||"effect"!==t,J=b.scale||"both",Q=b.origin||["middle","center"],X=j.css("position"),S=s?k:h,V={height:0,width:0,outerHeight:0,outerWidth:0};"show"===t&&j.show();h={height:j.height(),width:j.width(),outerHeight:j.outerHeight(),outerWidth:j.outerWidth()};"toggle"===b.mode&&"show"===t?(j.from=b.to||V,j.to=b.from||h):(j.from=b.from||("show"===t?V:h),j.to=b.to||("hide"===t?V:h));f=j.from.height/h.height;
g=j.from.width/h.width;d=j.to.height/h.height;e=j.to.width/h.width;("box"===J||"both"===J)&&(f!==d&&(S=S.concat(n),j.from=a.effects.setTransition(j,n,f,j.from),j.to=a.effects.setTransition(j,n,d,j.to)),g!==e&&(S=S.concat(q),j.from=a.effects.setTransition(j,q,g,j.from),j.to=a.effects.setTransition(j,q,e,j.to)));("content"===J||"both"===J)&&f!==d&&(S=S.concat(o).concat(l),j.from=a.effects.setTransition(j,o,f,j.from),j.to=a.effects.setTransition(j,o,d,j.to));a.effects.save(j,S);j.show();a.effects.createWrapper(j);
j.css("overflow","hidden").css(j.from);Q&&(i=a.effects.getBaseline(Q,h),j.from.top=(h.outerHeight-j.outerHeight())*i.y,j.from.left=(h.outerWidth-j.outerWidth())*i.x,j.to.top=(h.outerHeight-j.to.outerHeight)*i.y,j.to.left=(h.outerWidth-j.to.outerWidth)*i.x);j.css(j.from);("content"===J||"both"===J)&&(n=n.concat(["marginTop","marginBottom"]).concat(o),q=q.concat(["marginLeft","marginRight"]),l=k.concat(n).concat(q),j.find("*[width]").each(function(){var c=a(this),h=c.height(),j=c.width(),i=c.outerHeight(),
k=c.outerWidth();s&&a.effects.save(c,l);c.from={height:h*f,width:j*g,outerHeight:i*f,outerWidth:k*g};c.to={height:h*d,width:j*e,outerHeight:h*d,outerWidth:j*e};f!==d&&(c.from=a.effects.setTransition(c,n,f,c.from),c.to=a.effects.setTransition(c,n,d,c.to));g!==e&&(c.from=a.effects.setTransition(c,q,g,c.from),c.to=a.effects.setTransition(c,q,e,c.to));c.css(c.from);c.animate(c.to,b.duration,b.easing,function(){s&&a.effects.restore(c,l)})}));j.animate(j.to,{queue:!1,duration:b.duration,easing:b.easing,
complete:function(){0===j.to.opacity&&j.css("opacity",j.from.opacity);"hide"===t&&j.hide();a.effects.restore(j,S);s||("static"===X?j.css({position:"relative",top:j.to.top,left:j.to.left}):a.each(["top","left"],function(a,b){j.css(b,function(b,c){var d=parseInt(c,10),e=a?j.to.left:j.to.top;return"auto"===c?e+"px":d+e+"px"})}));a.effects.removeWrapper(j);c()}})};a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===
parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",j=b.origin,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k="horizontal"!==h?g/100:1,g="vertical"!==h?g/100:1;e.effect="size";e.queue=!1;e.complete=c;"effect"!==f&&(e.origin=j||["middle","center"],e.restore=!0);e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:i);e.to={height:i.height*k,width:i.width*g,outerHeight:i.outerHeight*k,outerWidth:i.outerWidth*g};e.fade&&("show"===
f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0));d.effect(e)};a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*
h}});d.effect(b)};a.effects.effect.pulsate=function(b,c){var d,e=a(this),f=a.effects.setMode(e,b.mode||"show");d="show"===f;var g="hide"===f,f=2*(b.times||5)+(d||"hide"===f?1:0),h=b.duration/f,i=0,j=e.queue(),k=j.length;(d||!e.is(":visible"))&&(e.css("opacity",0).show(),i=1);for(d=1;f>d;d++)e.animate({opacity:i},h,b.easing),i=1-i;e.animate({opacity:i},h,b.easing);e.queue(function(){g&&e.hide();c()});1<k&&j.splice.apply(j,[1,0].concat(j.splice(k,f+1)));e.dequeue()};a.effects.effect.shake=function(b,
c){var d,e=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left";d=b.distance||20;var i=b.times||3,j=2*i+1,k=Math.round(b.duration/j),l="up"===h||"down"===h?"top":"left",o="up"===h||"left"===h,h={},n={},q={},t=e.queue(),s=t.length;a.effects.save(e,f);e.show();a.effects.createWrapper(e);h[l]=(o?"-=":"+=")+d;n[l]=(o?"+=":"-=")+2*d;q[l]=(o?"-=":"+=")+2*d;e.animate(h,k,b.easing);for(d=1;i>d;d++)e.animate(n,k,b.easing).animate(q,
k,b.easing);e.animate(n,k,b.easing).animate(h,k/2,b.easing).queue(function(){"hide"===g&&e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);c()});1<s&&t.splice.apply(t,[1,0].concat(t.splice(s,j+1)));e.dequeue()};a.effects.effect.slide=function(b,c){var d,e=a(this),f="position top bottom left right width height".split(" "),g=a.effects.setMode(e,b.mode||"show"),h="show"===g;d=b.direction||"left";var i="up"===d||"down"===d?"top":"left",j="up"===d||"left"===d,k={};a.effects.save(e,f);e.show();
d=b.distance||e["top"===i?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(e).css({overflow:"hidden"});h&&e.css(i,j?isNaN(d)?"-"+d:-d:d);k[i]=(h?j?"+=":"-=":j?"-=":"+=")+d;e.animate(k,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);c()}})};a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,g=f?g.scrollLeft():0,i=e.offset(),e={top:i.top-
h,left:i.left-g,height:e.innerHeight(),width:e.innerWidth()},i=d.offset(),j=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:i.top-h,left:i.left-g,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(e,b.duration,b.easing,function(){j.remove();c()})};a.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();
this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},
value:function(a){return void 0===a?this.options.value:(this.options.value=this._constrainedValue(a),this._refreshValue(),void 0)},_constrainedValue:function(a){return void 0===a&&(a=this.options.value),this.indeterminate=!1===a,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value;this._super(a);this.options.value=this._constrainedValue(b);this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,
b));"disabled"===a&&this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b);this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);
this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==b&&(this.oldValue=b,this._trigger("change"));b===this.options.max&&this._trigger("complete")}});a.widget("ui.selectable",a.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,
distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){b=a(c.options.filter,c.element[0]);b.addClass("ui-selectee");b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),
selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=b.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY];this.options.disabled||(this.selectees=
a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0;b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,
e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;return e>
g&&(c=g,g=e,e=c),f>h&&(c=h,h=f,f=c),this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var c=a.data(this,"selectable-item");c&&c.element!==d.element[0]&&(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,
{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element}))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=!1;d.startselected=!1;c._trigger("unselected",b,{unselected:d.element})}),
a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}});a.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},
width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var a=this.element.uniqueId().attr("id");this.ids={element:a,button:a+"-button",menu:a+"-menu"};this._drawButton();this._drawMenu();this.options.disabled&&this.disable()},_drawButton:function(){var b=this;this.label=a("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(a){this.button.focus();a.preventDefault()}});this.element.hide();this.button=a("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",
tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);a("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=a("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",
function(){b.menuItems||b._refreshMenu()});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=a("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(a,c){a.preventDefault();b._setSelection();b._select(c.item.data("ui-selectmenu-item"),a)},focus:function(a,
c){var d=c.item.data("ui-selectmenu-item");null!=b.focusIndex&&d.index!==b.focusIndex&&(b._trigger("focus",a,{item:d}),b.isOpen||b._select(d,a));b.focusIndex=d.index;b.button.attr("aria-activedescendant",b.menuItems.eq(d.index).attr("id"))}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();
this._setText(this.buttonText,this._getSelectedItem().text());this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var a,b=this.element.find("option");b.length&&(this._parseOptions(b),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},
open:function(a){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=
null,this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(b,c){var d=this,e="";a.each(c,function(c,f){f.optgroup!==e&&(a("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:f.optgroup}).appendTo(b),e=f.optgroup);d._renderItemData(b,f)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",
b)},_renderItem:function(b,c){var d=a("<li>");return c.disabled&&d.addClass("ui-state-disabled"),this._setText(d,c.label),d.appendTo(b)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var c,d=".ui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex):(c=this.menuItems.eq(this.element[0].selectedIndex),d+=":not(.ui-state-disabled)");c="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](d).eq(-1):c[a+"All"](d).eq(0);c.length&&this.menuInstance.focus(b,c)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},
_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){var a;this.range&&(window.getSelection?(a=window.getSelection(),a.removeAllRanges(),a.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(b))}},_buttonEvents:{mousedown:function(){var a;window.getSelection?(a=window.getSelection(),a.rangeCount&&(this.range=a.getRangeAt(0))):
this.range=document.selection.createRange()},click:function(a){this._setSelection();this._toggle(a)},keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b);c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):
this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex);b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,
b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index;this._setText(this.buttonText,a.label);this._setAria(a);this._trigger("select",b,{item:a});a.index!==c&&this._trigger("change",b,{item:a});this.close(b)},_setAria:function(a){a=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":a,"aria-activedescendant":a});this.menu.attr("aria-activedescendant",a)},_setOption:function(a,b){"icons"===a&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(b.button);
this._super(a,b);"appendTo"===a&&this.menuWrap.appendTo(this._appendTo());"disabled"===a&&(this.menuInstance.option("disabled",b),this.button.toggleClass("ui-state-disabled",b).attr("aria-disabled",b),this.element.prop("disabled",b),b?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0));"width"===a&&this._resizeButton()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front")),
b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;a||(a=this.element.show().outerWidth(),this.element.hide());this.button.outerWidth(a)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),
this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(b){var c=[];b.each(function(b,d){var e=a(d),f=e.parent("optgroup");c.push({element:e,index:b,value:e.val(),label:e.text(),optgroup:f.attr("label")||"",disabled:f.prop("disabled")||e.prop("disabled")})});this.items=c},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}});
a.widget("ui.slider",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");
this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var b,c;b=this.options;var d=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),e=[];c=b.values&&b.values.length||1;d.length>c&&(d.slice(c).remove(),d=d.slice(0,c));for(b=d.length;c>b;b++)e.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");
this.handles=d.add(a(e.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",
bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),!1===h?!1:
(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=
this._normValueFromMouse({x:a.pageX,y:a.pageY});return this._slide(a,this._handleIndex,b),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===
this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,1<d&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=
this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&!0===this.options.range&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),this.values(b?0:1),!1!==f&&this.values(b,c))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),!1!==
f&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._lastChangedValue=b;this._trigger("change",a,c)}},value:function(a){return arguments.length?
(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(1<arguments.length)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();d=this.options.values;e=arguments[0];for(f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),
this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&!0===this.options.range&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),"disabled"===b&&this.element.toggleClass("ui-state-disabled",!!c),this._super(b,c),b){case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();this.handles.css("horizontal"===c?"bottom":"left","");break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case "step":case "min":case "max":this._animateOff=!0;this._calculateNewMax();this._refreshValue();this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=
!1}},_value:function(){return this._trimAlignValue(this.options.value)},_values:function(a){var b,c;if(arguments.length)return b=this.options.values[a],this._trimAlignValue(b);if(this.options.values&&this.options.values.length){b=this.options.values.slice();for(c=0;b.length>c;c+=1)b[c]=this._trimAlignValue(b[c]);return b}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,
c=(a-this._valueMin())%b,a=a-c;return 2*Math.abs(c)>=b&&(a+=0<c?b:-b),parseFloat(a.toFixed(5))},_calculateNewMax:function(){var a=this.options.max,b=this._valueMin(),c=this.options.step,a=Math.floor(+(a-b).toFixed(this._precision())/c)*c+b;this.max=parseFloat(a.toFixed(this._precision()))},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var a=""+a,b=a.indexOf(".");return-1===
b?0:a.length-b-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin()));k["horizontal"===i.orientation?"left":"bottom"]=c+"%";a(this).stop(1,1)[j?"animate":"css"](k,h.animate);!0===i.options.range&&("horizontal"===
i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate})));b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,
h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(b){var c,
d,e,f=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),c=this._start(b,f),!1===c))return}switch(e=this.options.step,c=d=this.options.values&&this.options.values.length?this.values(f):this.value(),b.keyCode){case a.ui.keyCode.HOME:d=
this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(c+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(c-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(c===this._valueMax())return;d=this._trimAlignValue(c+e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c===this._valueMin())return;d=this._trimAlignValue(c-e)}this._slide(b,
f,d)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}});a.widget("ui.sortable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,
revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();
this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(a,b){this._super(a,b);"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");a.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");
this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),false):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d?!this.options.handle||c||(a(this.options.handle,
d).find("*").addBack().each(function(){this===b.target&&(e=true)}),e)?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(b,c,d){var e,c=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,
{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),
this._createPlaceholder(),c.containment&&this._setContainment(),c.cursor&&"auto"!==c.cursor&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",c.cursor),this.storedStylesheet=a("<style>*{ cursor: "+c.cursor+" !important; }</style>").appendTo(e)),c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity)),c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",
c.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),
this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f;c=this.options;var g=!1;this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop+c.scrollSpeed:
b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-this.document.scrollTop()<c.scrollSensitivity?g=this.document.scrollTop(this.document.scrollTop()-
c.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<c.scrollSensitivity&&(g=this.document.scrollTop(this.document.scrollTop()+c.scrollSpeed)),b.pageX-this.document.scrollLeft()<c.scrollSensitivity?g=this.document.scrollLeft(this.document.scrollLeft()-c.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<c.scrollSensitivity&&(g=this.document.scrollLeft(this.document.scrollLeft()+c.scrollSpeed))),!1!==g&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,
b));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(c=this.items.length-1;0<=c;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===
this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d);this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=
this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=!0;a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});
"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||
c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,k="y"===
this.options.axis||b+k>f&&g>b+k,j=("x"===this.options.axis||d+j>h&&i>d+j)&&k;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+
this.offset.click.top,a.top,a.height),a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),b=b&&a,a=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return b?this.floating?c&&"right"===c||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/
2,a.width),c=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return this.floating&&d?"right"===d&&a||"left"===d&&!a:c&&("down"===c&&b||"up"===c&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),
this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){g.push(this)}var d,e,f,g=[],h=[],i=this._connectWith();if(i&&b)for(b=i.length-1;0<=b;b--){e=a(i[b],this.document[0]);for(d=e.length-1;0<=d;d--)(f=a.data(e[d],this.widgetFullName))&&f!==this&&!f.options.disabled&&h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
f])}h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=h.length-1;0<=b;b--)h[b][0].each(c);return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=
[];this.containers=[this];var c,d,e,f,g,h=this.items,i=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];if((g=this._connectWith())&&this.ready)for(c=g.length-1;0<=c;c--){e=a(g[c],this.document[0]);for(d=e.length-1;0<=d;d--)(f=a.data(e[d],this.widgetFullName))&&f!==this&&!f.options.disabled&&(i.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,
f.element),f]),this.containers.push(f))}for(c=i.length-1;0<=c;c--){b=i[c][1];e=i[c][0];d=0;for(g=e.length;g>d;d++)f=a(e[d]),f.data(this.widgetName+"-item",b),h.push({item:f,instance:b,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1;this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;0<=c;c--)d=this.items[c],d.instance!==this.currentContainer&&
this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;0<=c;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=
f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){var b=b||this,c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");
return"tbody"===d?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(e)):"tr"===d?b._createTrPlaceholder(b.currentItem,e):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||
0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}});b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,c){var d=this;b.children().each(function(){a("<td>&#160;</td>",d.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(c)})},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k=f=null;for(c=this.containers.length-1;0<=c;c--)if(!a.contains(this.currentItem[0],
this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(!f||!a.contains(this.containers[c].element[0],f.element[0]))f=this.containers[c],k=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[k].containerCache.over||(this.containers[k]._trigger("over",b,this._uiHash(this)),this.containers[k].containerCache.over=1);else{c=
1E4;e=null;f=(d=f.floating||this._isFloating(this.currentItem))?"left":"top";g=d?"width":"height";j=d?"clientX":"clientY";for(d=this.items.length-1;0<=d;d--)a.contains(this.containers[k].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(h=this.items[d].item.offset()[f],i=!1,b[j]-h>this.items[d][g]/2&&(i=!0),c>Math.abs(b[j]-h)&&(c=Math.abs(b[j]-h),e=this.items[d],this.direction=i?"up":"down"));if(e||this.options.dropOnEmpty){if(this.currentContainer===this.containers[k])return this.currentContainer.containerCache.over||
(this.containers[k]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;e?this._rearrange(b,e,null,!0):this._rearrange(b,null,this.containers[k].element,!0);this._trigger("change",b,this._uiHash());this.containers[k]._trigger("change",b,this._uiHash(this));this.currentContainer=this.containers[k];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[k]._trigger("over",b,this._uiHash(this));this.containers[k].containerCache.over=1}}},
_createHelper:function(b){var c=this.options,b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return b.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),
left:this.currentItem.css("left")}),(!b[0].style.width||c.forceHelperSize)&&b.width(this.currentItem.width()),(!b[0].style.height||c.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+
this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&
"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode);("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-
this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===e.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===e.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=
[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),
10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():
f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==
this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&
(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?
d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],
"down"===this.direction?b.item[0]:b.item[0].nextSibling);var e=this.counter=this.counter?++this.counter:1;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,d){return function(c){d._trigger(a,c,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||
"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&
(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(d=this.containers.length-1;0<=d;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=
0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=
null),!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}});a.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",
widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);""!==this.value()&&this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},
_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);void 0!==e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a),void 0)},mousewheel:function(a,b){if(b){if(!this.spinning&&
!this._start(a))return!1;this._spin((0<b?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();c.call(this);
this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;c.call(this)});!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?!1===this._start(b)?!1:(this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete",
"off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(0.5*a.height())&&0<a.height()&&a.height(a.height());this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,
c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return this.spinning||
!1!==this._trigger("start",a)?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,b,c)},a);this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1);c=this._adjustValue(c+a*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",b,{value:c})||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;
return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var a=""+a,b=a.indexOf(".");return-1===b?0:a.length-b-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==
d.min&&d.min>a?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());return this.options[a]=b,this.element.val(this._format(c)),void 0}("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b));"icons"===a&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),
this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down));this._super(a,b);"disabled"===a&&(this.widget().toggleClass("ui-state-disabled",!!b),this.element.prop("disabled",!!b),this.buttons.button(b?"disable":"enable"))},_setOptions:i(function(a){this._super(a)}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===
a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();return null===a?!1:a===this._adjustValue(a)},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c)));this.element.val(a);this._refresh()},
_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:i(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:i(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),
this._stop())},pageUp:i(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:i(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?(i(this._value).call(this,a),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}});a.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=
/#.*$/;return function(b){var c,d,b=b.cloneNode(!1);c=b.href.replace(a,"");d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(e){}try{d=decodeURIComponent(d)}catch(f){}return 1<b.hash.length&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible);this._processTabs();c.active=this._initialActive();a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),
function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(c.active):a();this._refresh();this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){return a(e).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=this.tabs.length?
0:!1)),!1!==b&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0)),!c&&!1===b&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1;d--;break;case a.ui.keyCode.END:d=
this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),this._activate(d),void 0;case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),this._activate(d===this.options.active?!1:d),void 0;default:return}b.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,e);b.ctrlKey||b.metaKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=
this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){for(var d=this.tabs.length-
1;-1!==a.inArray((b>d&&(b=0),0>b&&(b=d),b),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?(this._activate(b),void 0):"disabled"===a?(this._setupDisabled(b),void 0):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b),
void 0)},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-
1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",
"aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,c=this.tabs,d=this.anchors,e=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor",
"focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=a();this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");b._isLocal(d)?
(e=d.hash,g=e.substring(1),f=b.element.find(b._sanitizeSelector(e))):(g=i.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite"));f.length&&(b.panels=b.panels.add(f));j&&i.data("ui-tabs-aria-controls",j);i.attr({"aria-controls":g,"aria-labelledby":h});f.attr("aria-labelledby",h)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");c&&
(this._off(c.not(this.tabs)),this._off(d.not(this.anchors)),this._off(e.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)!0===b||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled",
"true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function(a){a.preventDefault()}});this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,
d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,
a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget).closest("li"),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():this._getPanelForTab(e),i=d.length?this._getPanelForTab(d):a(),d={oldTab:d,oldPanel:i,newTab:g?a():e,newPanel:h};b.preventDefault();e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||this.running||f&&!c.collapsible||!1===this._trigger("beforeActivate",b,d)||(c.active=g?!1:this.tabs.index(e),this.active=f?a():
e,this.xhr&&this.xhr.abort(),i.length||h.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(e),b),this._toggle(b,d))},_toggle:function(b,c){function d(){f.running=!1;f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0;h.length&&this.options.hide?this._hide(h,this.options.hide,
function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e());h.attr("aria-hidden","true");c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);g.attr("aria-hidden","false");c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},
_activate:function(b){var c,b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),c=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;!1!==c&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(c))},disable:function(b){var c=
this.options.disabled;if(!0!==c){if(void 0===b)c=!0;else{if(b=this._getIndex(b),-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setupDisabled(c)}},load:function(b,c){var b=this._getIndex(b),d=this,e=this.tabs.eq(b),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g},i=function(a,b){"abort"===b&&d.panels.stop(!1,!0);e.removeClass("ui-tabs-loading");g.removeAttr("aria-busy");a===d.xhr&&delete d.xhr};this._isLocal(f[0])||(this.xhr=a.ajax(this._ajaxSettings(f,
c,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.done(function(a,b,e){setTimeout(function(){g.html(a);d._trigger("load",c,h);i(e,b)},1)}).fail(function(a,b){setTimeout(function(){i(a,b)},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){return this.element.find(this._sanitizeSelector("#"+
a(b).attr("aria-controls")))}});a.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c);b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=
b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),c=a.inArray(c,d);-1!==c&&d.splice(c,1);b.removeData("ui-tooltip-id");(d=a.trim(d.join(" ")))?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable();this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},
_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),this.options[b]=c,void 0):(this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b.element)}),void 0)},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d.element[0];b.close(e,!0)});this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")})},
_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=
b.currentTarget=this,c.close(b,!0));d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._registerCloseHandlers(b,d),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){e._delay(function(){a.data("ui-tooltip-open")&&(b&&(b.type=f),this._open(b,a,c))})}),c&&this._open(b,a,c),void 0)},_open:function(b,c,d){function e(a){j.of=
a;g.is(":hidden")||g.position(j)}var f,g,h,i,j=a.extend({},this.options.position);if(d){if(f=this._find(c))return f.tooltip.find(".ui-tooltip-content").html(d),void 0;c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title"));f=this._tooltip(c);g=f.tooltip;this._addDescribedBy(c,g.attr("id"));g.find(".ui-tooltip-content").html(d);this.liveRegion.children().hide();d.clone?(i=d.clone(),i.removeAttr("id").find("[id]").removeAttr("id")):i=d;a("<div>").html(i).appendTo(this.liveRegion);
this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:e}),e(b)):g.position(a.extend({of:c},this.options.position));g.hide();this._show(g,this.options.show);this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){g.is(":visible")&&(e(j.of),clearInterval(h))},a.fx.interval));this._trigger("open",b,{tooltip:g})}},_registerCloseHandlers:function(b,c){var d={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),b.currentTarget=c[0],this.close(b,
!0))}};c[0]!==this.element[0]&&(d.remove=function(){this._removeTooltip(this._find(c).tooltip)});b&&"mouseover"!==b.type||(d.mouseleave="close");b&&"focusin"!==b.type||(d.focusout="close");this._on(!0,c,d)},close:function(b){var c,d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);return f?(c=f.tooltip,f.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&!e.attr("title")&&e.attr("title",e.data("ui-tooltip-title")),this._removeDescribedBy(e),f.hiding=!0,c.stop(!0),this._hide(c,
this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title);delete d.parents[b]}),f.closing=!0,this._trigger("close",b,{tooltip:c}),f.hiding||(f.closing=!1)),void 0):(e.removeData("ui-tooltip-open"),void 0)},_tooltip:function(b){var c=a("<div>").attr("role",
"tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),d=c.uniqueId().attr("id");return a("<div>").addClass("ui-tooltip-content").appendTo(c),c.appendTo(this.document[0].body),this.tooltips[d]={element:b,tooltip:c}},_find:function(a){return(a=a.data("ui-tooltip-id"))?this.tooltips[a]:null},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur"),
f=d.element;e.target=e.currentTarget=f[0];b.close(e,!0);a("#"+c).remove();f.data("ui-tooltip-title")&&(f.attr("title")||f.attr("title",f.data("ui-tooltip-title")),f.removeData("ui-tooltip-title"))});this.liveRegion.remove()}})});steal.executed("vendor/jquery-ui/jquery-ui.min.js");
steal("vendor/datatables/js/jquery.dataTables.js").then("vendor/datatables-plugins/js/dataTables.bootstrap.js","vendor/datatables-plugins/css/dataTables.bootstrap.css","vendor/datatables-colreorder/js/dataTables.colReorder.js","vendor/datatables-colreorder/css/dataTables.colReorder.css");steal.executed("lib/external/stealDatatables.js");
(function(a,b,c){(function(a){"function"===typeof define&&define.amd?define("datatables",["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):jQuery&&!jQuery.fn.dataTable&&a(jQuery)})(function(d){function e(a){var b,c,f={};d.each(a,function(d){if((b=d.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" "))c=d.replace(b[0],b[2].toLowerCase()),f[c]=d,"o"===b[1]&&e(a[d])});a._hungarianMap=f}function h(a,b,f){a._hungarianMap||e(a);var g;d.each(b,function(e){g=
a._hungarianMap[e];if(g!==c&&(f||b[g]===c))"o"===g.charAt(0)?(b[g]||(b[g]={}),d.extend(!0,b[g],b[e]),h(a[g],b[g],f)):b[g]=b[e]})}function g(a){var b=A.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&Ua(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&Ua(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&Bb(a)}function f(a){Ba(a,"ordering","bSort");Ba(a,
"orderMulti","bSortMulti");Ba(a,"orderClasses","bSortClasses");Ba(a,"orderCellsTop","bSortCellsTop");Ba(a,"order","aaSorting");Ba(a,"orderFixed","aaSortingFixed");Ba(a,"paging","bPaginate");Ba(a,"pagingType","sPaginationType");Ba(a,"pageLength","iDisplayLength");Ba(a,"searching","bFilter");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&h(A.models.oSearch,a[b])}function i(a){Ba(a,"orderable","bSortable");Ba(a,"orderData","aDataSort");Ba(a,"orderSequence","asSorting");Ba(a,"orderDataType",
"sortDataType");var b=a.aDataSort;b&&!d.isArray(b)&&(a.aDataSort=[b])}function j(a){var a=a.oBrowser,b=d("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(d("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(d('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),c=b.find(".test");a.bScrollOversize=100===c[0].offsetWidth;a.bScrollbarLeft=1!==Math.round(c.offset().left);b.remove()}function k(a,b,d,e,f,g){var h,
i=!1;for(d!==c&&(h=d,i=!0);e!==f;)a.hasOwnProperty(e)&&(h=i?b(h,a[e],e,a):a[e],i=!0,e+=g);return h}function l(a,c){var e=A.defaults.column,f=a.aoColumns.length,e=d.extend({},A.models.oColumn,e,{nTh:c?c:b.createElement("th"),sTitle:e.sTitle?e.sTitle:c?c.innerHTML:"",aDataSort:e.aDataSort?e.aDataSort:[f],mData:e.mData?e.mData:f,idx:f});a.aoColumns.push(e);e=a.aoPreSearchCols;e[f]=d.extend({},A.models.oSearch,e[f]);n(a,f,d(c).data())}function n(a,b,e){var b=a.aoColumns[b],f=a.oClasses,g=d(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=
g.attr("width")||null;var j=(g.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);j&&(b.sWidthOrig=j[1])}e!==c&&null!==e&&(i(e),h(A.defaults.column,e),e.mDataProp!==c&&!e.mData&&(e.mData=e.mDataProp),e.sType&&(b._sManualType=e.sType),e.className&&!e.sClass&&(e.sClass=e.className),d.extend(b,e),Ua(b,e,"sWidth","sWidthOrig"),e.iDataSort!==c&&(b.aDataSort=[e.iDataSort]),Ua(b,e,"aDataSort"));var k=b.mData,x=H(k),l=b.mRender?H(b.mRender):null,e=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};
b._bAttrSrc=d.isPlainObject(k)&&(e(k.sort)||e(k.type)||e(k.filter));b.fnGetData=function(a,b,d){var e=x(a,b,c,d);return l&&b?l(e,b,a,d):e};b.fnSetData=function(a,b,c){return C(k)(a,b,c)};"number"!==typeof k&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,g.addClass(f.sSortableNone));a=-1!==d.inArray("asc",b.asSorting);e=-1!==d.inArray("desc",b.asSorting);!b.bSortable||!a&&!e?(b.sSortingClass=f.sSortableNone,b.sSortingClassJUI=""):a&&!e?(b.sSortingClass=f.sSortableAsc,b.sSortingClassJUI=
f.sSortJUIAscAllowed):!a&&e?(b.sSortingClass=f.sSortableDesc,b.sSortingClassJUI=f.sSortJUIDescAllowed):(b.sSortingClass=f.sSortable,b.sSortingClassJUI=f.sSortJUI)}function o(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Ea(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;(""!==b.sY||""!==b.sX)&&oa(a);ca(a,null,"column-sizing",[a])}function t(a,b){var c=m(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function s(a,b){var c=m(a,"bVisible"),c=d.inArray(b,c);
return-1!==c?c:null}function q(a){return m(a,"bVisible").length}function m(a,b){var c=[];d.map(a.aoColumns,function(a,d){a[b]&&c.push(d)});return c}function r(a){var b=a.aoColumns,d=a.aoData,e=A.ext.type.detect,f,g,h,i,j,k,x,l,F;f=0;for(g=b.length;f<g;f++)if(x=b[f],F=[],!x.sType&&x._sManualType)x.sType=x._sManualType;else if(!x.sType){h=0;for(i=e.length;h<i;h++){j=0;for(k=d.length;j<k;j++){F[j]===c&&(F[j]=v(a,j,f,"type"));l=e[h](F[j],a);if(!l&&h!==e.length-1)break;if("html"===l)break}if(l){x.sType=
l;break}}x.sType||(x.sType="string")}}function u(a,b,e,f){var g,h,i,j,k,x,F=a.aoColumns;if(b)for(g=b.length-1;0<=g;g--){x=b[g];var o=x.targets!==c?x.targets:x.aTargets;d.isArray(o)||(o=[o]);h=0;for(i=o.length;h<i;h++)if("number"===typeof o[h]&&0<=o[h]){for(;F.length<=o[h];)l(a);f(o[h],x)}else if("number"===typeof o[h]&&0>o[h])f(F.length+o[h],x);else if("string"===typeof o[h]){j=0;for(k=F.length;j<k;j++)("_all"==o[h]||d(F[j].nTh).hasClass(o[h]))&&f(j,x)}}if(e){g=0;for(a=e.length;g<a;g++)f(g,e[g])}}
function w(a,b,c,e){var f=a.aoData.length,g=d.extend(!0,{},A.models.oRow,{src:c?"dom":"data"});g._aData=b;a.aoData.push(g);for(var b=a.aoColumns,g=0,h=b.length;g<h;g++)c&&z(a,f,g,v(a,f,g)),b[g].sType=null;a.aiDisplayMaster.push(f);(c||!a.oFeatures.bDeferRender)&&W(a,f,c,e);return f}function y(a,b){var c;b instanceof d||(b=d(b));return b.map(function(b,d){c=B(a,d);return w(a,c.data,d,c.cells)})}function v(a,b,d,e){var f=a.iDraw,g=a.aoColumns[d],h=a.aoData[b]._aData,i=g.sDefaultContent,d=g.fnGetData(h,
e,{settings:a,row:b,col:d});if(d===c)return a.iDrawError!=f&&null===i&&(db(a,0,"Requested unknown parameter "+("function"==typeof g.mData?"{function}":"'"+g.mData+"'")+" for row "+b,4),a.iDrawError=f),i;if((d===h||null===d)&&null!==i)d=i;else if("function"===typeof d)return d.call(h);return null===d&&"display"==e?"":d}function z(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function E(a){return d.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}
function H(a){if(d.isPlainObject(a)){var b={};d.each(a,function(a,c){c&&(b[a]=H(c))});return function(a,d,e,f){var g=b[d]||b._;return g!==c?g(a,d,e,f):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,c,d,e){return a(b,c,d,e)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var e=function(a,b,d){var f,g;if(""!==d){g=E(d);for(var h=0,i=g.length;h<i;h++){d=g[h].match(Ra);f=g[h].match(rb);if(d){g[h]=g[h].replace(Ra,"");""!==
g[h]&&(a=a[g[h]]);f=[];g.splice(0,h+1);g=g.join(".");h=0;for(i=a.length;h<i;h++)f.push(e(a[h],b,g));a=d[0].substring(1,d[0].length-1);a=""===a?f:f.join(a);break}else if(f){g[h]=g[h].replace(rb,"");a=a[g[h]]();continue}if(null===a||a[g[h]]===c)return c;a=a[g[h]]}}return a};return function(b,c){return e(b,c,a)}}return function(b){return b[a]}}function C(a){if(d.isPlainObject(a))return C(a._);if(null===a)return function(){};if("function"===typeof a)return function(b,c,d){a(b,"set",c,d)};if("string"===
typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var b=function(a,d,e){var e=E(e),f;f=e[e.length-1];for(var g,h,i=0,j=e.length-1;i<j;i++){g=e[i].match(Ra);h=e[i].match(rb);if(g){e[i]=e[i].replace(Ra,"");a[e[i]]=[];f=e.slice();f.splice(0,i+1);g=f.join(".");h=0;for(j=d.length;h<j;h++)f={},b(f,d[h],g),a[e[i]].push(f);return}h&&(e[i]=e[i].replace(rb,""),a=a[e[i]](d));if(null===a[e[i]]||a[e[i]]===c)a[e[i]]={};a=a[e[i]]}if(f.match(rb))a[f.replace(rb,"")](d);else a[f.replace(Ra,
"")]=d};return function(c,d){return b(c,d,a)}}return function(b,c){b[a]=c}}function N(a){return Ca(a.aoData,"_aData")}function T(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function K(a,b,d){for(var e=-1,f=0,g=a.length;f<g;f++)a[f]==b?e=f:a[f]>b&&a[f]--; -1!=e&&d===c&&a.splice(e,1)}function G(a,b,d,e){var f=a.aoData[b],g,h=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=v(a,b,d,"display")};if("dom"===d||(!d||"auto"===d)&&"dom"===f.src)f._aData=
B(a,f,e,e===c?c:f._aData).data;else{var i=f.anCells;if(i)if(e!==c)h(i[e],e);else{d=0;for(g=i.length;d<g;d++)h(i[d],d)}}f._aSortData=null;f._aFilterData=null;h=a.aoColumns;if(e!==c)h[e].sType=null;else{d=0;for(g=h.length;d<g;d++)h[d].sType=null;J(f)}}function B(a,b,e,f){var g=[],h=b.firstChild,i,j=0,k,x=a.aoColumns,l=a._rowReadObject,f=f||l?{}:[],F=function(a,b){if("string"===typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),C(a)(f,b.getAttribute(c)))}},a=function(a){if(e===c||e===j)i=x[j],
k=d.trim(a.innerHTML),i&&i._bAttrSrc?(C(i.mData._)(f,k),F(i.mData.sort,a),F(i.mData.type,a),F(i.mData.filter,a)):l?(i._setter||(i._setter=C(i.mData)),i._setter(f,k)):f[j]=k;j++};if(h)for(;h;){b=h.nodeName.toUpperCase();if("TD"==b||"TH"==b)a(h),g.push(h);h=h.nextSibling}else{g=b.anCells;h=0;for(b=g.length;h<b;h++)a(g[h])}return{data:f,cells:g}}function W(a,c,d,e){var f=a.aoData[c],g=f._aData,h=[],i,j,k,x,l;if(null===f.nTr){i=d||b.createElement("tr");f.nTr=i;f.anCells=h;i._DT_RowIndex=c;J(f);x=0;for(l=
a.aoColumns.length;x<l;x++){k=a.aoColumns[x];j=d?e[x]:b.createElement(k.sCellType);h.push(j);if(!d||k.mRender||k.mData!==x)j.innerHTML=v(a,c,x,"display");k.sClass&&(j.className+=" "+k.sClass);k.bVisible&&!d?i.appendChild(j):!k.bVisible&&d&&j.parentNode.removeChild(j);k.fnCreatedCell&&k.fnCreatedCell.call(a.oInstance,j,v(a,c,x),g,c,x)}ca(a,"aoRowCreatedCallback",null,[i,g,c])}f.nTr.setAttribute("role","row")}function J(a){var b=a.nTr,c=a._aData;if(b){c.DT_RowId&&(b.id=c.DT_RowId);if(c.DT_RowClass){var e=
c.DT_RowClass.split(" ");a.__rowc=a.__rowc?Wa(a.__rowc.concat(e)):e;d(b).removeClass(a.__rowc.join(" ")).addClass(c.DT_RowClass)}c.DT_RowAttr&&d(b).attr(c.DT_RowAttr);c.DT_RowData&&d(b).data(c.DT_RowData)}}function Q(a){var b,c,e,f,g,h=a.nTHead,i=a.nTFoot,j=0===d("th, td",h).length,k=a.oClasses,x=a.aoColumns;j&&(f=d("<tr/>").appendTo(h));b=0;for(c=x.length;b<c;b++)g=x[b],e=d(g.nTh).addClass(g.sClass),j&&e.appendTo(f),a.oFeatures.bSort&&(e.addClass(g.sSortingClass),!1!==g.bSortable&&(e.attr("tabindex",
a.iTabIndex).attr("aria-controls",a.sTableId),Cb(a,g.nTh,b))),g.sTitle!=e.html()&&e.html(g.sTitle),Ha(a,"header")(a,e,g,k);j&&I(a.aoHeader,h);d(h).find(">tr").attr("role","row");d(h).find(">tr>th, >tr>td").addClass(k.sHeaderTH);d(i).find(">tr>th, >tr>td").addClass(k.sFooterTH);if(null!==i){a=a.aoFooter[0];b=0;for(c=a.length;b<c;b++)g=x[b],g.nTf=a[b].cell,g.sClass&&d(g.nTf).addClass(g.sClass)}}function X(a,b,e){var f,g,h,i=[],j=[],k=a.aoColumns.length,x;if(b){e===c&&(e=!1);f=0;for(g=b.length;f<g;f++){i[f]=
b[f].slice();i[f].nTr=b[f].nTr;for(h=k-1;0<=h;h--)!a.aoColumns[h].bVisible&&!e&&i[f].splice(h,1);j.push([])}f=0;for(g=i.length;f<g;f++){if(a=i[f].nTr)for(;h=a.firstChild;)a.removeChild(h);h=0;for(b=i[f].length;h<b;h++)if(x=k=1,j[f][h]===c){a.appendChild(i[f][h].cell);for(j[f][h]=1;i[f+k]!==c&&i[f][h].cell==i[f+k][h].cell;)j[f+k][h]=1,k++;for(;i[f][h+x]!==c&&i[f][h].cell==i[f][h+x].cell;){for(e=0;e<k;e++)j[f+e][h+x]=1;x++}d(i[f][h].cell).attr("rowspan",k).attr("colspan",x)}}}}function S(a){var b=ca(a,
"aoPreDrawCallback","preDraw",[a]);if(-1!==d.inArray(!1,b))U(a,!1);else{var b=[],e=0,f=a.asStripeClasses,g=f.length,h=a.oLanguage,i=a.iInitDisplayStart,j="ssp"==da(a),k=a.aiDisplay;a.bDrawing=!0;i!==c&&-1!==i&&(a._iDisplayStart=j?i:i>=a.fnRecordsDisplay()?0:i,a.iInitDisplayStart=-1);var i=a._iDisplayStart,x=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,U(a,!1);else if(j){if(!a.bDestroying&&!M(a))return}else a.iDraw++;if(0!==k.length){h=j?a.aoData.length:x;for(j=j?0:i;j<h;j++){var l=
k[j],F=a.aoData[l];null===F.nTr&&W(a,l);l=F.nTr;if(0!==g){var o=f[e%g];F._sRowStripe!=o&&(d(l).removeClass(F._sRowStripe).addClass(o),F._sRowStripe=o)}ca(a,"aoRowCallback",null,[l,F._aData,e,j]);b.push(l);e++}}else e=h.sZeroRecords,1==a.iDraw&&"ajax"==da(a)?e=h.sLoadingRecords:h.sEmptyTable&&0===a.fnRecordsTotal()&&(e=h.sEmptyTable),b[0]=d("<tr/>",{"class":g?f[0]:""}).append(d("<td />",{valign:"top",colSpan:q(a),"class":a.oClasses.sRowEmpty}).html(e))[0];ca(a,"aoHeaderCallback","header",[d(a.nTHead).children("tr")[0],
N(a),i,x,k]);ca(a,"aoFooterCallback","footer",[d(a.nTFoot).children("tr")[0],N(a),i,x,k]);f=d(a.nTBody);f.children().detach();f.append(d(b));ca(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function V(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&Ub(a);d?ea(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;S(a);a._drawHold=!1}function D(a){var b=a.oClasses,c=d(a.nTable),c=d("<div/>").insertBefore(c),e=a.oFeatures,f=d("<div/>",
{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=f[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var g=a.sDom.split(""),h,i,j,k,x,l,F=0;F<g.length;F++){h=null;i=g[F];if("<"==i){j=d("<div/>")[0];k=g[F+1];if("'"==k||'"'==k){x="";for(l=2;g[F+l]!=k;)x+=g[F+l],l++;"H"==x?x=b.sJUIHeader:"F"==x&&(x=b.sJUIFooter);-1!=x.indexOf(".")?(k=x.split("."),j.id=k[0].substr(1,k[0].length-1),j.className=k[1]):"#"==x.charAt(0)?j.id=x.substr(1,x.length-
1):j.className=x;F+=l}f.append(j);f=d(j)}else if(">"==i)f=f.parent();else if("l"==i&&e.bPaginate&&e.bLengthChange)h=R(a);else if("f"==i&&e.bFilter)h=ga(a);else if("r"==i&&e.bProcessing)h=Ta(a);else if("t"==i)h=ba(a);else if("i"==i&&e.bInfo)h=Xa(a);else if("p"==i&&e.bPaginate)h=Sa(a);else if(0!==A.ext.feature.length){j=A.ext.feature;l=0;for(k=j.length;l<k;l++)if(i==j[l].cFeature){h=j[l].fnInit(a);break}}h&&(j=a.aanFeatures,j[i]||(j[i]=[]),j[i].push(h),f.append(h))}c.replaceWith(f)}function I(a,b){var c=
d(b).children("tr"),e,f,g,h,i,j,k,x,l,F;a.splice(0,a.length);g=0;for(j=c.length;g<j;g++)a.push([]);g=0;for(j=c.length;g<j;g++){e=c[g];for(f=e.firstChild;f;){if("TD"==f.nodeName.toUpperCase()||"TH"==f.nodeName.toUpperCase()){x=1*f.getAttribute("colspan");l=1*f.getAttribute("rowspan");x=!x||0===x||1===x?1:x;l=!l||0===l||1===l?1:l;h=0;for(i=a[g];i[h];)h++;k=h;F=1===x?!0:!1;for(i=0;i<x;i++)for(h=0;h<l;h++)a[g+h][k+i]={cell:f,unique:F},a[g+h].nTr=e}f=f.nextSibling}}}function O(a,b,c){var d=[];c||(c=a.aoHeader,
b&&(c=[],I(c,b)));for(var b=0,e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)if(c[b][f].unique&&(!d[f]||!a.bSortCellsTop))d[f]=c[b][f].cell;return d}function ia(a,b,c){ca(a,"aoServerParams","serverParams",[b]);if(b&&d.isArray(b)){var e={},f=/(.*?)\[\]$/;d.each(b,function(a,b){var c=b.name.match(f);c?(c=c[0],e[c]||(e[c]=[]),e[c].push(b.value)):e[b.name]=b.value});b=e}var g,h=a.ajax,i=a.oInstance,j=function(b){ca(a,null,"xhr",[a,b,a.jqXHR]);c(b)};if(d.isPlainObject(h)&&h.data){g=h.data;var k=
d.isFunction(g)?g(b,a):g,b=d.isFunction(g)&&k?k:d.extend(!0,b,k);delete h.data}k={data:b,success:function(b){var c=b.error||b.sError;c&&db(a,0,c);a.json=b;j(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c){var e=ca(a,null,"xhr",[a,null,a.jqXHR]);-1===d.inArray(!0,e)&&("parsererror"==c?db(a,0,"Invalid JSON response",1):4===b.readyState&&db(a,0,"Ajax error",7));U(a,!1)}};a.oAjaxData=b;ca(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(i,a.sAjaxSource,d.map(b,function(a,
b){return{name:b,value:a}}),j,a):a.sAjaxSource||"string"===typeof h?a.jqXHR=d.ajax(d.extend(k,{url:h||a.sAjaxSource})):d.isFunction(h)?a.jqXHR=h.call(i,b,j,a):(a.jqXHR=d.ajax(d.extend(k,h)),h.data=g)}function M(a){return a.bAjaxDataGet?(a.iDraw++,U(a,!0),ia(a,la(a),function(b){sa(a,b)}),!1):!0}function la(a){var b=a.aoColumns,c=b.length,e=a.oFeatures,f=a.oPreviousSearch,g=a.aoPreSearchCols,h,i=[],j,k,x,l=ob(a);h=a._iDisplayStart;j=!1!==e.bPaginate?a._iDisplayLength:-1;var F=function(a,b){i.push({name:a,
value:b})};F("sEcho",a.iDraw);F("iColumns",c);F("sColumns",Ca(b,"sName").join(","));F("iDisplayStart",h);F("iDisplayLength",j);var o={draw:a.iDraw,columns:[],order:[],start:h,length:j,search:{value:f.sSearch,regex:f.bRegex}};for(h=0;h<c;h++)k=b[h],x=g[h],j="function"==typeof k.mData?"function":k.mData,o.columns.push({data:j,name:k.sName,searchable:k.bSearchable,orderable:k.bSortable,search:{value:x.sSearch,regex:x.bRegex}}),F("mDataProp_"+h,j),e.bFilter&&(F("sSearch_"+h,x.sSearch),F("bRegex_"+h,x.bRegex),
F("bSearchable_"+h,k.bSearchable)),e.bSort&&F("bSortable_"+h,k.bSortable);e.bFilter&&(F("sSearch",f.sSearch),F("bRegex",f.bRegex));e.bSort&&(d.each(l,function(a,b){o.order.push({column:b.col,dir:b.dir});F("iSortCol_"+a,b.col);F("sSortDir_"+a,b.dir)}),F("iSortingCols",l.length));b=A.ext.legacy.ajax;return null===b?a.sAjaxSource?i:o:b?i:o}function sa(a,b){var d=P(a,b),e=b.sEcho!==c?b.sEcho:b.draw,f=b.iTotalRecords!==c?b.iTotalRecords:b.recordsTotal,g=b.iTotalDisplayRecords!==c?b.iTotalDisplayRecords:
b.recordsFiltered;if(e){if(1*e<a.iDraw)return;a.iDraw=1*e}T(a);a._iRecordsTotal=parseInt(f,10);a._iRecordsDisplay=parseInt(g,10);e=0;for(f=d.length;e<f;e++)w(a,d[e]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;S(a);a._bInitComplete||Ia(a,b);a.bAjaxDataGet=!0;U(a,!1)}function P(a,b){var e=d.isPlainObject(a.ajax)&&a.ajax.dataSrc!==c?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===e?b.aaData||b[e]:""!==e?H(e)(b):b}function ga(a){var c=a.oClasses,e=a.sTableId,f=a.oLanguage,g=a.oPreviousSearch,
h=a.aanFeatures,i='<input type="search" class="'+c.sFilterInput+'"/>',j=f.sSearch,j=j.match(/_INPUT_/)?j.replace("_INPUT_",i):j+i,c=d("<div/>",{id:!h.f?e+"_filter":null,"class":c.sFilter}).append(d("<label/>").append(j)),h=function(){var b=!this.value?"":this.value;b!=g.sSearch&&(ea(a,{sSearch:b,bRegex:g.bRegex,bSmart:g.bSmart,bCaseInsensitive:g.bCaseInsensitive}),a._iDisplayStart=0,S(a))},i=null!==a.searchDelay?a.searchDelay:"ssp"===da(a)?400:0,k=d("input",c).val(g.sSearch).attr("placeholder",f.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",
i?Ab(h,i):h).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",e);d(a.nTable).on("search.dt.DT",function(c,d){if(a===d)try{k[0]!==b.activeElement&&k.val(g.sSearch)}catch(e){}});return c[0]}function ea(a,b,d){var e=a.oPreviousSearch,f=a.aoPreSearchCols,g=function(a){e.sSearch=a.sSearch;e.bRegex=a.bRegex;e.bSmart=a.bSmart;e.bCaseInsensitive=a.bCaseInsensitive};r(a);if("ssp"!=da(a)){na(a,b.sSearch,d,b.bEscapeRegex!==c?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive);
g(b);for(b=0;b<f.length;b++)Ja(a,f[b].sSearch,b,f[b].bEscapeRegex!==c?!f[b].bEscapeRegex:f[b].bRegex,f[b].bSmart,f[b].bCaseInsensitive);aa(a)}else g(b);a.bFiltered=!0;ca(a,null,"search",[a])}function aa(a){for(var b=A.ext.search,c=a.aiDisplay,d,e,f=0,g=b.length;f<g;f++){for(var h=[],i=0,j=c.length;i<j;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&h.push(e);c.length=0;c.push.apply(c,h)}}function Ja(a,b,c,d,e,f){if(""!==b)for(var g=a.aiDisplay,d=L(b,d,e,f),e=g.length-1;0<=e;e--)b=a.aoData[g[e]]._aFilterData[c],
d.test(b)||g.splice(e,1)}function na(a,b,c,d,e,f){var d=L(b,d,e,f),e=a.oPreviousSearch.sSearch,f=a.aiDisplayMaster,g;0!==A.ext.search.length&&(c=!0);g=ua(a);if(0>=b.length)a.aiDisplay=f.slice();else{if(g||c||e.length>b.length||0!==b.indexOf(e)||a.bSorted)a.aiDisplay=f.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)d.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function L(a,b,c,e){a=b?a:p(a);c&&(a="^(?=.*?"+d.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0))var b=a.match(/^"(.*)"$/),
a=b?b[1]:a;return a.replace('"',"")}).join(")(?=.*?")+").*$");return RegExp(a,e?"i":"")}function p(a){return a.replace(Qa,"\\$1")}function ua(a){var b=a.aoColumns,c,d,e,f,g,h,i,j,k=A.ext.type.search;c=!1;d=0;for(f=a.aoData.length;d<f;d++)if(j=a.aoData[d],!j._aFilterData){h=[];e=0;for(g=b.length;e<g;e++)c=b[e],c.bSearchable?(i=v(a,d,e,"filter"),k[c.sType]&&(i=k[c.sType](i)),null===i&&(i=""),"string"!==typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&($a.innerHTML=i,i=yb?
$a.textContent:$a.innerText),i.replace&&(i=i.replace(/[\r\n]/g,"")),h.push(i);j._aFilterData=h;j._sFilterRow=h.join("  ");c=!0}return c}function bb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function wb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function Xa(a){var b=a.sTableId,c=a.aanFeatures.i,e=d("<div/>",{"class":a.oClasses.sInfo,id:!c?b+"_info":null});c||(a.aoDrawCallback.push({fn:Oa,sName:"information"}),
e.attr("role","status").attr("aria-live","polite"),d(a.nTable).attr("aria-describedby",b+"_info"));return e[0]}function Oa(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,e=a._iDisplayStart+1,f=a.fnDisplayEnd(),g=a.fnRecordsTotal(),h=a.fnRecordsDisplay(),i=h?c.sInfo:c.sInfoEmpty;h!==g&&(i+=" "+c.sInfoFiltered);i+=c.sInfoPostFix;i=nb(a,i);c=c.fnInfoCallback;null!==c&&(i=c.call(a.oInstance,a,e,f,g,h,i));d(b).html(i)}}function nb(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,
f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function La(a){var b,c,d=a.iInitDisplayStart,e=a.aoColumns,f;c=a.oFeatures;if(a.bInitialised){D(a);Q(a);X(a,a.aoHeader);X(a,a.aoFooter);U(a,!0);c.bAutoWidth&&Ea(a);b=0;for(c=e.length;b<c;b++)f=e[b],f.sWidth&&
(f.nTh.style.width=ha(f.sWidth));V(a);e=da(a);"ssp"!=e&&("ajax"==e?ia(a,[],function(c){var e=P(a,c);for(b=0;b<e.length;b++)w(a,e[b]);a.iInitDisplayStart=d;V(a);U(a,!1);Ia(a,c)},a):(U(a,!1),Ia(a)))}else setTimeout(function(){La(a)},200)}function Ia(a,b){a._bInitComplete=!0;b&&o(a);ca(a,"aoInitComplete","init",[a,b])}function cb(a,b){var c=parseInt(b,10);a._iDisplayLength=c;Ga(a);ca(a,null,"length",[a,c])}function R(a){for(var b=a.oClasses,c=a.sTableId,e=a.aLengthMenu,f=d.isArray(e[0]),g=f?e[0]:e,e=
f?e[1]:e,f=d("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect}),h=0,i=g.length;h<i;h++)f[0][h]=new Option(e[h],g[h]);var j=d("<div><label/></div>").addClass(b.sLength);a.aanFeatures.l||(j[0].id=c+"_length");j.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",f[0].outerHTML));d("select",j).val(a._iDisplayLength).bind("change.DT",function(){cb(a,d(this).val());S(a)});d(a.nTable).bind("length.dt.DT",function(b,c,e){a===c&&d("select",j).val(e)});return j[0]}function Sa(a){var b=
a.sPaginationType,c=A.ext.pager[b],e="function"===typeof c,f=function(a){S(a)},b=d("<div/>").addClass(a.oClasses.sPaging+b)[0],g=a.aanFeatures;e||c.fnInit(a,b,f);g.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(e){var b=a._iDisplayStart,d=a._iDisplayLength,h=a.fnRecordsDisplay(),i=-1===d,b=i?0:Math.ceil(b/d),d=i?1:Math.ceil(h/d),h=c(b,d),j,i=0;for(j=g.p.length;i<j;i++)Ha(a,"pageButton")(a,g.p[i],i,h,b,d)}else c.fnUpdate(a,f)},sName:"pagination"}));return b}function hb(a,
b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===e?d=0:"number"===typeof b?(d=b*e,d>f&&(d=0)):"first"==b?d=0:"previous"==b?(d=0<=e?d-e:0,0>d&&(d=0)):"next"==b?d+e<f&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:db(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(ca(a,null,"page",[a]),c&&S(a));return b}function Ta(a){return d("<div/>",{id:!a.aanFeatures.r?a.sTableId+"_processing":null,"class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}
function U(a,b){a.oFeatures.bProcessing&&d(a.aanFeatures.r).css("display",b?"block":"none");ca(a,null,"processing",[a,b])}function ba(a){var b=d(a.nTable);b.attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var e=c.sX,f=c.sY,g=a.oClasses,h=b.children("caption"),i=h.length?h[0]._captionSide:null,j=d(b[0].cloneNode(!1)),k=d(b[0].cloneNode(!1)),x=b.children("tfoot");c.sX&&"100%"===b.attr("width")&&b.removeAttr("width");x.length||(x=null);c=d("<div/>",{"class":g.sScrollWrapper}).append(d("<div/>",
{"class":g.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:e?!e?null:ha(e):"100%"}).append(d("<div/>",{"class":g.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(j.removeAttr("id").css("margin-left",0).append("top"===i?h:null).append(b.children("thead"))))).append(d("<div/>",{"class":g.sScrollBody}).css({overflow:"auto",height:!f?null:ha(f),width:!e?null:ha(e)}).append(b));x&&c.append(d("<div/>",{"class":g.sScrollFoot}).css({overflow:"hidden",
border:0,width:e?!e?null:ha(e):"100%"}).append(d("<div/>",{"class":g.sScrollFootInner}).append(k.removeAttr("id").css("margin-left",0).append("bottom"===i?h:null).append(b.children("tfoot")))));var b=c.children(),l=b[0],g=b[1],F=x?b[2]:null;if(e)d(g).on("scroll.DT",function(){var a=this.scrollLeft;l.scrollLeft=a;x&&(F.scrollLeft=a)});a.nScrollHead=l;a.nScrollBody=g;a.nScrollFoot=F;a.aoDrawCallback.push({fn:oa,sName:"scrolling"});return c[0]}function oa(a){var b=a.oScroll,c=b.sX,e=b.sXInner,f=b.sY,
g=b.iBarWidth,h=d(a.nScrollHead),i=h[0].style,j=h.children("div"),k=j[0].style,x=j.children("table"),j=a.nScrollBody,l=d(j),F=j.style,o=d(a.nScrollFoot).children("div"),m=o.children("table"),n=d(a.nTHead),q=d(a.nTable),Z=q[0],ja=Z.style,r=a.nTFoot?d(a.nTFoot):null,s=a.oBrowser,u=s.bScrollOversize,ka,w,ta,p,y,Fa=[],v=[],Nb=[],z,Fb=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};q.children("thead, tfoot").remove();y=n.clone().prependTo(q);
ka=n.find("tr");ta=y.find("tr");y.find("th, td").removeAttr("tabindex");r&&(p=r.clone().prependTo(q),w=r.find("tr"),p=p.find("tr"));c||(F.width="100%",h[0].style.width="100%");d.each(O(a,y),function(b,c){z=t(a,b);c.style.width=a.aoColumns[z].sWidth});r&&xa(function(a){a.style.width=""},p);b.bCollapse&&""!==f&&(F.height=l[0].offsetHeight+n[0].offsetHeight+"px");h=q.outerWidth();if(""===c){if(ja.width="100%",u&&(q.find("tbody").height()>j.offsetHeight||"scroll"==l.css("overflow-y")))ja.width=ha(q.outerWidth()-
g)}else""!==e?ja.width=ha(e):h==l.width()&&l.height()<q.height()?(ja.width=ha(h-g),q.outerWidth()>h-g&&(ja.width=ha(h))):ja.width=ha(h);h=q.outerWidth();xa(Fb,ta);xa(function(a){Nb.push(a.innerHTML);Fa.push(ha(d(a).css("width")))},ta);xa(function(a,b){a.style.width=Fa[b]},ka);d(ta).height(0);r&&(xa(Fb,p),xa(function(a){v.push(ha(d(a).css("width")))},p),xa(function(a,b){a.style.width=v[b]},w),d(p).height(0));xa(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+
Nb[b]+"</div>";a.style.width=Fa[b]},ta);r&&xa(function(a,b){a.innerHTML="";a.style.width=v[b]},p);if(q.outerWidth()<h){w=j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")?h+g:h;if(u&&(j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")))ja.width=ha(w-g);(""===c||""!==e)&&db(a,1,"Possible column misalignment",6)}else w="100%";F.width=ha(w);i.width=ha(w);r&&(a.nScrollFoot.style.width=ha(w));!f&&u&&(F.height=ha(Z.offsetHeight+g));f&&b.bCollapse&&(F.height=ha(f),b=c&&Z.offsetWidth>
j.offsetWidth?g:0,Z.offsetHeight<j.offsetHeight&&(F.height=ha(Z.offsetHeight+b)));b=q.outerWidth();x[0].style.width=ha(b);k.width=ha(b);x=q.height()>j.clientHeight||"scroll"==l.css("overflow-y");s="padding"+(s.bScrollbarLeft?"Left":"Right");k[s]=x?g+"px":"0px";r&&(m[0].style.width=ha(b),o[0].style.width=ha(b),o[0].style[s]=x?g+"px":"0px");l.scroll();if((a.bSorted||a.bFiltered)&&!a._drawHold)j.scrollTop=0}function xa(a,b,c){for(var d=0,e=0,f=b.length,g,h;e<f;){g=b[e].firstChild;for(h=c?c[e].firstChild:
null;g;)1===g.nodeType&&(c?a(g,h,d):a(g,d),d++),g=g.nextSibling,h=c?h.nextSibling:null;e++}}function Ea(b){var c=b.nTable,e=b.aoColumns,f=b.oScroll,g=f.sY,h=f.sX,i=f.sXInner,j=e.length,f=m(b,"bVisible"),k=d("th",b.nTHead),x=c.getAttribute("width"),l=c.parentNode,F=!1,n,Z;(n=c.style.width)&&-1!==n.indexOf("%")&&(x=n);for(n=0;n<f.length;n++)Z=e[f[n]],null!==Z.sWidth&&(Z.sWidth=qa(Z.sWidthOrig,l),F=!0);if(!F&&!h&&!g&&j==q(b)&&j==k.length)for(n=0;n<j;n++)e[n].sWidth=ha(k.eq(n).width());else{j=d(c).clone().css("visibility",
"hidden").removeAttr("id");j.find("tbody tr").remove();var ja=d("<tr/>").appendTo(j.find("tbody"));j.find("tfoot th, tfoot td").css("width","");k=O(b,j.find("thead")[0]);for(n=0;n<f.length;n++)Z=e[f[n]],k[n].style.width=null!==Z.sWidthOrig&&""!==Z.sWidthOrig?ha(Z.sWidthOrig):"";if(b.aoData.length)for(n=0;n<f.length;n++)F=f[n],Z=e[F],d(Aa(b,F)).clone(!1).append(Z.sContentPadding).appendTo(ja);j.appendTo(l);h&&i?j.width(i):h?(j.css("width","auto"),j.width()<l.offsetWidth&&j.width(l.offsetWidth)):g?
j.width(l.offsetWidth):x&&j.width(x);Pa(b,j[0]);if(h){for(n=i=0;n<f.length;n++)Z=e[f[n]],g=d(k[n]).outerWidth(),i+=null===Z.sWidthOrig?g:parseInt(Z.sWidth,10)+g-d(k[n]).width();j.width(ha(i));c.style.width=ha(i)}for(n=0;n<f.length;n++)if(Z=e[f[n]],g=d(k[n]).width())Z.sWidth=ha(g);c.style.width=ha(j.css("width"));j.remove()}x&&(c.style.width=ha(x));if((x||h)&&!b._reszEvt)c=function(){d(a).bind("resize.DT-"+b.sInstance,Ab(function(){o(b)}))},b.oBrowser.bScrollOversize?setTimeout(c,1E3):c(),b._reszEvt=
!0}function Ab(a,b){var d=b!==c?b:200,e,f;return function(){var b=this,g=+new Date,h=arguments;e&&g<e+d?(clearTimeout(f),f=setTimeout(function(){e=c;a.apply(b,h)},d)):(e=g,a.apply(b,h))}}function qa(a,c){if(!a)return 0;var e=d("<div/>").css("width",ha(a)).appendTo(c||b.body),f=e[0].offsetWidth;e.remove();return f}function Pa(a,b){var c=a.oScroll;if(c.sX||c.sY)c=!c.sX?c.iBarWidth:0,b.style.width=ha(d(b).outerWidth()-c)}function Aa(a,b){var c=gb(a,b);if(0>c)return null;var e=a.aoData[c];return!e.nTr?
d("<td/>").html(v(a,c,b,"display"))[0]:e.anCells[b]}function gb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)c=v(a,f,b,"display")+"",c=c.replace(sb,""),c.length>d&&(d=c.length,e=f);return e}function ha(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function Da(){var a=A.__scrollbarWidth;if(a===c){var b=d("<p/>").css({position:"absolute",top:0,left:0,width:"100%",height:150,padding:0,overflow:"scroll",visibility:"hidden"}).appendTo("body"),a=b[0].offsetWidth-
b[0].clientWidth;A.__scrollbarWidth=a;b.remove()}return a}function ob(a){var b,e,f=[],g=a.aoColumns,h,i,j,k;b=a.aaSortingFixed;e=d.isPlainObject(b);var x=[];h=function(a){a.length&&!d.isArray(a[0])?x.push(a):x.push.apply(x,a)};d.isArray(b)&&h(b);e&&b.pre&&h(b.pre);h(a.aaSorting);e&&b.post&&h(b.post);for(a=0;a<x.length;a++){k=x[a][0];h=g[k].aDataSort;b=0;for(e=h.length;b<e;b++)i=h[b],j=g[i].sType||"string",x[a]._idx===c&&(x[a]._idx=d.inArray(x[a][1],g[i].asSorting)),f.push({src:k,col:i,dir:x[a][1],
index:x[a]._idx,type:j,formatter:A.ext.type.order[j+"-pre"]})}return f}function Ub(a){var b,c,d=[],e=A.ext.type.order,f=a.aoData,g=0,h,i=a.aiDisplayMaster,j;r(a);j=ob(a);b=0;for(c=j.length;b<c;b++)h=j[b],h.formatter&&g++,Ib(a,h.col);if("ssp"!=da(a)&&0!==j.length){b=0;for(c=i.length;b<c;b++)d[i[b]]=b;g===j.length?i.sort(function(a,b){var c,e,g,h,i=j.length,k=f[a]._aSortData,x=f[b]._aSortData;for(g=0;g<i;g++)if(h=j[g],c=k[h.col],e=x[h.col],c=c<e?-1:c>e?1:0,0!==c)return"asc"===h.dir?c:-c;c=d[a];e=d[b];
return c<e?-1:c>e?1:0}):i.sort(function(a,b){var c,g,h,i,k=j.length,x=f[a]._aSortData,l=f[b]._aSortData;for(h=0;h<k;h++)if(i=j[h],c=x[i.col],g=l[i.col],i=e[i.type+"-"+i.dir]||e["string-"+i.dir],c=i(c,g),0!==c)return c;c=d[a];g=d[b];return c<g?-1:c>g?1:0})}a.bSorted=!0}function Db(a){for(var b,c,d=a.aoColumns,e=ob(a),a=a.oLanguage.oAria,f=0,g=d.length;f<g;f++){c=d[f];var h=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var i=c.nTh;i.removeAttribute("aria-sort");c.bSortable&&(0<e.length&&e[0].col==f?(i.setAttribute("aria-sort",
"asc"==e[0].dir?"ascending":"descending"),c=h[e[0].index+1]||h[0]):c=h[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);i.setAttribute("aria-label",b)}}function kb(a,b,e,f){var g=a.aaSorting,h=a.aoColumns[b].asSorting,i=function(a,b){var e=a._idx;e===c&&(e=d.inArray(a[1],h));return e+1<h.length?e+1:b?null:0};"number"===typeof g[0]&&(g=a.aaSorting=[g]);e&&a.oFeatures.bSortMulti?(e=d.inArray(b,Ca(g,"0")),-1!==e?(b=i(g[e],!0),null===b&&1===g.length&&(b=0),null===b?g.splice(e,1):(g[e][1]=h[b],g[e]._idx=
b)):(g.push([b,h[0],0]),g[g.length-1]._idx=0)):g.length&&g[0][0]==b?(b=i(g[0]),g.length=1,g[0][1]=h[b],g[0]._idx=b):(g.length=0,g.push([b,h[0]]),g[0]._idx=0);V(a);"function"==typeof f&&f(a)}function Cb(a,b,c,d){var e=a.aoColumns[c];Kb(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(U(a,!0),setTimeout(function(){kb(a,c,b.shiftKey,d);"ssp"!==da(a)&&U(a,!1)},0)):kb(a,c,b.shiftKey,d))})}function ub(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,e=ob(a),f=a.oFeatures,g,h;if(f.bSort&&f.bSortClasses){f=
0;for(g=b.length;f<g;f++)h=b[f].src,d(Ca(a.aoData,"anCells",h)).removeClass(c+(2>f?f+1:3));f=0;for(g=e.length;f<g;f++)h=e[f].src,d(Ca(a.aoData,"anCells",h)).addClass(c+(2>f?f+1:3))}a.aLastSort=e}function Ib(a,b){var c=a.aoColumns[b],d=A.ext.order[c.sSortDataType],e;d&&(e=d.call(a.oInstance,a,b,s(a,b)));for(var f,g=A.ext.type.order[c.sType+"-pre"],h=0,i=a.aoData.length;h<i;h++)if(c=a.aoData[h],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)f=d?e[h]:v(a,h,b,"sort"),c._aSortData[b]=g?g(f):f}function lb(a){if(a.oFeatures.bStateSave&&
!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:d.extend(!0,[],a.aaSorting),search:bb(a.oPreviousSearch),columns:d.map(a.aoColumns,function(b,c){return{visible:b.bVisible,search:bb(a.aoPreSearchCols[c])}})};ca(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function xb(a){var b,e,f=a.aoColumns;if(a.oFeatures.bStateSave){var g=a.fnStateLoadCallback.call(a.oInstance,a);if(g&&g.time&&(b=ca(a,"aoStateLoadParams",
"stateLoadParams",[a,g]),-1===d.inArray(!1,b)&&(b=a.iStateDuration,!(0<b&&g.time<+new Date-1E3*b)&&f.length===g.columns.length))){a.oLoadedState=d.extend(!0,{},g);g.start!==c&&(a._iDisplayStart=g.start,a.iInitDisplayStart=g.start);g.length!==c&&(a._iDisplayLength=g.length);g.order!==c&&(a.aaSorting=[],d.each(g.order,function(b,c){a.aaSorting.push(c[0]>=f.length?[0,c[1]]:c)}));g.search!==c&&d.extend(a.oPreviousSearch,wb(g.search));b=0;for(e=g.columns.length;b<e;b++){var h=g.columns[b];h.visible!==
c&&(f[b].bVisible=h.visible);h.search!==c&&d.extend(a.aoPreSearchCols[b],wb(h.search))}ca(a,"aoStateLoaded","stateLoaded",[a,g])}}}function pb(a){var b=A.settings,a=d.inArray(a,Ca(b,"nTable"));return-1!==a?b[a]:null}function db(b,c,d,e){d="DataTables warning: "+(null!==b?"table id="+b.sTableId+" - ":"")+d;e&&(d+=". For more information about this error, please see http://datatables.net/tn/"+e);if(c)a.console&&console.log&&console.log(d);else if(c=A.ext,c=c.sErrMode||c.errMode,ca(b,null,"error",[b,
e,d]),"alert"==c)alert(d);else{if("throw"==c)throw Error(d);"function"==typeof c&&c(b,e,d)}}function Ua(a,b,e,f){d.isArray(e)?d.each(e,function(c,e){d.isArray(e)?Ua(a,b,e[0],e[1]):Ua(a,b,e)}):(f===c&&(f=e),b[e]!==c&&(a[f]=b[e]))}function Jb(a,b,c){var e,f;for(f in b)b.hasOwnProperty(f)&&(e=b[f],d.isPlainObject(e)?(d.isPlainObject(a[f])||(a[f]={}),d.extend(!0,a[f],e)):a[f]=c&&"data"!==f&&"aaData"!==f&&d.isArray(e)?e.slice():e);return a}function Kb(a,b,c){d(a).bind("click.DT",b,function(b){a.blur();
c(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).bind("selectstart.DT",function(){return!1})}function Na(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function ca(a,b,c,e){var f=[];b&&(f=d.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,e)}));null!==c&&(b=d.Event(c+".dt"),d(a.nTable).trigger(b,e),f.push(b.result));return f}function Ga(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=
b}function Ha(a,b){var c=a.renderer,e=A.ext.renderer[b];return d.isPlainObject(c)&&c[b]?e[c[b]]||e._:"string"===typeof c?e[c]||e._:e._}function da(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function qb(a,b){var c=[],c=Xb.numbers_length,d=Math.floor(c/2);b<=c?c=ab(0,b):a<=d?(c=ab(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-d?c=ab(b-(c-2),b):(c=ab(a-d+2,a+d-1),c.push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function Bb(a){d.each({num:function(b){return Rb(b,
a)},"num-fmt":function(b){return Rb(b,a,Mb)},"html-num":function(b){return Rb(b,a,Lb)},"html-num-fmt":function(b){return Rb(b,a,Lb,Mb)}},function(b,c){ya.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(ya.type.search[b+a]=ya.type.search.html)})}function eb(a){return function(){var b=[pb(this[A.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return A.ext.internal[a].apply(this,b)}}var A,ya,ma,Y,fa,Ka={},va=/[\r\n]/g,Lb=/<.*?>/g,Hb=/^[\w\+\-]/,Eb=/[\w\+\-]$/,Qa=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)",
"g"),Mb=/[',$\u00a3\u20ac\u00a5%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,fb=function(a){return!a||!0===a||"-"===a?!0:!1},vb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Va=function(a,b){Ka[b]||(Ka[b]=RegExp(p(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(Ka[b],"."):a},Ya=function(a,b,c){var d="string"===typeof a;if(fb(a))return!0;b&&d&&(a=Va(a,b));c&&d&&(a=a.replace(Mb,""));return!isNaN(parseFloat(a))&&isFinite(a)},Ma=function(a,b,c){return fb(a)?!0:
!(fb(a)||"string"===typeof a)?null:Ya(a.replace(Lb,""),b,c)?!0:null},Ca=function(a,b,d){var e=[],f=0,g=a.length;if(d!==c)for(;f<g;f++)a[f]&&a[f][b]&&e.push(a[f][b][d]);else for(;f<g;f++)a[f]&&e.push(a[f][b]);return e},jb=function(a,b,d,e){var f=[],g=0,h=b.length;if(e!==c)for(;g<h;g++)a[b[g]][d]&&f.push(a[b[g]][d][e]);else for(;g<h;g++)f.push(a[b[g]][d]);return f},ab=function(a,b){var d=[],e;b===c?(b=0,e=a):(e=b,b=a);for(var f=b;f<e;f++)d.push(f);return d},Za=function(a){for(var b=[],c=0,d=a.length;c<
d;c++)a[c]&&b.push(a[c]);return b},Wa=function(a){var b=[],c,d,e=a.length,f,g=0;d=0;a:for(;d<e;d++){c=a[d];for(f=0;f<g;f++)if(b[f]===c)continue a;b.push(c);g++}return b},Ba=function(a,b,d){a[b]!==c&&(a[d]=a[b])},Ra=/\[.*?\]$/,rb=/\(\)$/,$a=d("<div>")[0],yb=$a.textContent!==c,sb=/<.*?>/g;A=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new ma(pb(this[ya.iApiIndex])):new ma(this)};this.fnAddData=function(a,
b){var e=this.api(!0),f=d.isArray(a)&&(d.isArray(a[0])||d.isPlainObject(a[0]))?e.rows.add(a):e.row.add(a);(b===c||b)&&e.draw();return f.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),d=b.settings()[0],e=d.oScroll;a===c||a?b.draw(!1):(""!==e.sX||""!==e.sY)&&oa(d)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===c||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,d){var e=this.api(!0),
a=e.rows(a),f=a.settings()[0],g=f.aoData[a[0][0]];a.remove();b&&b.call(this,f,g);(d===c||d)&&e.draw();return g};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(a)};this.fnFilter=function(a,b,d,e,f,g){f=this.api(!0);null===b||b===c?f.search(a,d,e,g):f.column(b).search(a,d,e,g);f.draw()};this.fnGetData=function(a,b){var d=this.api(!0);if(a!==c){var e=a.nodeName?a.nodeName.toLowerCase():"";return b!==c||"td"==e||"th"==e?d.cell(a,b).data():d.row(a).data()||
null}return d.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==c?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=
function(a,b){var d=this.api(!0).page(a);(b===c||b)&&d.draw(!1)};this.fnSetColumnVis=function(a,b,d){a=this.api(!0).column(a).visible(b);(d===c||d)&&a.columns.adjust().draw()};this.fnSettings=function(){return pb(this[ya.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,d,e,f){var g=this.api(!0);d===c||null===d?g.row(b).data(a):g.cell(b,d).data(a);(f===c||f)&&g.columns.adjust();(e===
c||e)&&g.draw();return 0};this.fnVersionCheck=ya.fnVersionCheck;var b=this,e=a===c,k=this.length;e&&(a={});this.oApi=this.internal=ya.internal;for(var x in A.ext.internal)x&&(this[x]=eb(x));this.each(function(){var x={},x=1<k?Jb(x,a,!0):a,F=0,o,m=this.getAttribute("id"),q=!1,Z=A.defaults,ja=d(this);if("table"!=this.nodeName.toLowerCase())db(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{f(Z);i(Z.column);h(Z,Z,!0);h(Z.column,Z.column,!0);h(Z,d.extend(x,ja.data()));var t=A.settings,
F=0;for(o=t.length;F<o;F++){var r=t[F];if(r.nTable==this||r.nTHead.parentNode==this||r.nTFoot&&r.nTFoot.parentNode==this){F=x.bRetrieve!==c?x.bRetrieve:Z.bRetrieve;if(e||F)return r.oInstance;if(x.bDestroy!==c?x.bDestroy:Z.bDestroy){r.oInstance.fnDestroy();break}else{db(r,0,"Cannot reinitialise DataTable",3);return}}if(r.sTableId==this.id){t.splice(F,1);break}}if(null===m||""===m)this.id=m="DataTables_Table_"+A.ext._unique++;var s=d.extend(!0,{},A.models.oSettings,{sDestroyWidth:ja[0].style.width,
sInstance:m,sTableId:m});s.nTable=this;s.oApi=b.internal;s.oInit=x;t.push(s);s.oInstance=1===b.length?b:ja.dataTable();f(x);x.oLanguage&&g(x.oLanguage);x.aLengthMenu&&!x.iDisplayLength&&(x.iDisplayLength=d.isArray(x.aLengthMenu[0])?x.aLengthMenu[0][0]:x.aLengthMenu[0]);x=Jb(d.extend(!0,{},Z),x);Ua(s.oFeatures,x,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));Ua(s,x,["asStripeClasses","ajax","fnServerData","fnFormatNumber",
"sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);Ua(s.oScroll,x,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);
Ua(s.oLanguage,x,"fnInfoCallback");Na(s,"aoDrawCallback",x.fnDrawCallback,"user");Na(s,"aoServerParams",x.fnServerParams,"user");Na(s,"aoStateSaveParams",x.fnStateSaveParams,"user");Na(s,"aoStateLoadParams",x.fnStateLoadParams,"user");Na(s,"aoStateLoaded",x.fnStateLoaded,"user");Na(s,"aoRowCallback",x.fnRowCallback,"user");Na(s,"aoRowCreatedCallback",x.fnCreatedRow,"user");Na(s,"aoHeaderCallback",x.fnHeaderCallback,"user");Na(s,"aoFooterCallback",x.fnFooterCallback,"user");Na(s,"aoInitComplete",x.fnInitComplete,
"user");Na(s,"aoPreDrawCallback",x.fnPreDrawCallback,"user");m=s.oClasses;x.bJQueryUI?(d.extend(m,A.ext.oJUIClasses,x.oClasses),x.sDom===Z.sDom&&"lfrtip"===Z.sDom&&(s.sDom='<"H"lfr>t<"F"ip>'),s.renderer)?d.isPlainObject(s.renderer)&&!s.renderer.header&&(s.renderer.header="jqueryui"):s.renderer="jqueryui":d.extend(m,A.ext.classes,x.oClasses);ja.addClass(m.sTable);if(""!==s.oScroll.sX||""!==s.oScroll.sY)s.oScroll.iBarWidth=Da();!0===s.oScroll.sX&&(s.oScroll.sX="100%");s.iInitDisplayStart===c&&(s.iInitDisplayStart=
x.iDisplayStart,s._iDisplayStart=x.iDisplayStart);null!==x.iDeferLoading&&(s.bDeferLoading=!0,F=d.isArray(x.iDeferLoading),s._iRecordsDisplay=F?x.iDeferLoading[0]:x.iDeferLoading,s._iRecordsTotal=F?x.iDeferLoading[1]:x.iDeferLoading);var ka=s.oLanguage;d.extend(!0,ka,x.oLanguage);""!==ka.sUrl&&(d.ajax({dataType:"json",url:ka.sUrl,success:function(a){g(a);h(Z.oLanguage,a);d.extend(!0,ka,a);La(s)},error:function(){La(s)}}),q=!0);null===x.asStripeClasses&&(s.asStripeClasses=[m.sStripeOdd,m.sStripeEven]);
var F=s.asStripeClasses,ta=ja.children("tbody").find("tr").eq(0);-1!==d.inArray(!0,d.map(F,function(a){return ta.hasClass(a)}))&&(d("tbody tr",this).removeClass(F.join(" ")),s.asDestroyStripes=F.slice());t=[];F=this.getElementsByTagName("thead");0!==F.length&&(I(s.aoHeader,F[0]),t=O(s));if(null===x.aoColumns){r=[];F=0;for(o=t.length;F<o;F++)r.push(null)}else r=x.aoColumns;F=0;for(o=r.length;F<o;F++)l(s,t?t[F]:null);u(s,x.aoColumnDefs,r,function(a,b){n(s,a,b)});if(ta.length){var p=function(a,b){return null!==
a.getAttribute("data-"+b)?b:null};d.each(B(s,ta[0]).cells,function(a,b){var d=s.aoColumns[a];if(d.mData===a){var e=p(b,"sort")||p(b,"order"),f=p(b,"filter")||p(b,"search");if(null!==e||null!==f)d.mData={_:a+".display",sort:null!==e?a+".@data-"+e:c,type:null!==e?a+".@data-"+e:c,filter:null!==f?a+".@data-"+f:c},n(s,a)}})}var Fa=s.oFeatures;x.bStateSave&&(Fa.bStateSave=!0,xb(s,x),Na(s,"aoDrawCallback",lb,"state_save"));if(x.aaSorting===c){t=s.aaSorting;F=0;for(o=t.length;F<o;F++)t[F][1]=s.aoColumns[F].asSorting[0]}ub(s);
Fa.bSort&&Na(s,"aoDrawCallback",function(){if(s.bSorted){var a=ob(s),b={};d.each(a,function(a,c){b[c.src]=c.dir});ca(s,null,"order",[s,a,b]);Db(s)}});Na(s,"aoDrawCallback",function(){(s.bSorted||"ssp"===da(s)||Fa.bDeferRender)&&ub(s)},"sc");j(s);F=ja.children("caption").each(function(){this._captionSide=ja.css("caption-side")});o=ja.children("thead");0===o.length&&(o=d("<thead/>").appendTo(this));s.nTHead=o[0];o=ja.children("tbody");0===o.length&&(o=d("<tbody/>").appendTo(this));s.nTBody=o[0];o=ja.children("tfoot");
if(0===o.length&&0<F.length&&(""!==s.oScroll.sX||""!==s.oScroll.sY))o=d("<tfoot/>").appendTo(this);0===o.length||0===o.children().length?ja.addClass(m.sNoFooter):0<o.length&&(s.nTFoot=o[0],I(s.aoFooter,s.nTFoot));if(x.aaData)for(F=0;F<x.aaData.length;F++)w(s,x.aaData[F]);else(s.bDeferLoading||"dom"==da(s))&&y(s,d(s.nTBody).children("tr"));s.aiDisplay=s.aiDisplayMaster.slice();s.bInitialised=!0;!1===q&&La(s)}});b=null;return this};var wa=[],ra=Array.prototype,x=function(a){var b,c,e=A.settings,f=d.map(e,
function(a){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return b=d.inArray(a,f),-1!==b?[e[b]]:null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?c=d(a):a instanceof d&&(c=a)}else return[];if(c)return c.map(function(){b=d.inArray(this,f);return-1!==b?e[b]:null}).toArray()};ma=function(a,b){if(!(this instanceof ma))return new ma(a,b);var c=[],e=function(a){(a=x(a))&&c.push.apply(c,a)};if(d.isArray(a))for(var f=
0,g=a.length;f<g;f++)e(a[f]);else e(a);this.context=Wa(c);b&&this.push.apply(this,b.toArray?b.toArray():b);this.selector={rows:null,cols:null,opts:null};ma.extend(this,this,wa)};A.Api=ma;ma.prototype={any:function(){return 0!==this.flatten().length},concat:ra.concat,context:[],each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new ma(b[a],this[a]):null},filter:function(a){var b=[];if(ra.filter)b=ra.filter.call(this,
a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new ma(this.context,b)},flatten:function(){var a=[];return new ma(this.context,a.concat.apply(a,this.toArray()))},join:ra.join,indexOf:ra.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,d,e){var f=[],g,h,i,j,k,x=this.context,l,F,o=this.selector;"string"===typeof a&&(e=d,d=b,b=a,a=!1);h=0;for(i=x.length;h<i;h++){var m=new ma(x[h]);if("table"===
b)g=d.call(m,x[h],h),g!==c&&f.push(g);else if("columns"===b||"rows"===b)g=d.call(m,x[h],this[h],h),g!==c&&f.push(g);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b){F=this[h];"column-rows"===b&&(l=Fa(x[h],o.opts));j=0;for(k=F.length;j<k;j++)g=F[j],g="cell"===b?d.call(m,x[h],g.row,g.column,h,j):d.call(m,x[h],g,h,j,l),g!==c&&f.push(g)}}return f.length||e?(a=new ma(x,a?f.concat.apply([],f):f),b=a.selector,b.rows=o.rows,b.cols=o.cols,b.opts=o.opts,a):this},lastIndexOf:ra.lastIndexOf||function(a,
b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(ra.map)b=ra.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new ma(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:ra.pop,push:ra.push,reduce:ra.reduce||function(a,b){return k(this,a,b,0,this.length,1)},reduceRight:ra.reduceRight||function(a,b){return k(this,a,b,this.length-1,-1,-1)},reverse:ra.reverse,selector:null,
shift:ra.shift,sort:ra.sort,splice:ra.splice,toArray:function(){return ra.slice.call(this)},to$:function(){return d(this)},toJQuery:function(){return d(this)},unique:function(){return new ma(this.context,Wa(this))},unshift:ra.unshift};ma.extend=function(a,b,c){if(c.length&&b&&(b instanceof ma||b.__dt_wrapper)){var e,f,g,h=function(a,b,c){return function(){var d=b.apply(a,arguments);ma.extend(d,d,c.methodExt);return d}};e=0;for(f=c.length;e<f;e++)g=c[e],b[g.name]="function"===typeof g.val?h(a,g.val,
g):d.isPlainObject(g.val)?{}:g.val,b[g.name].__dt_wrapper=!0,ma.extend(a,b[g.name],g.propExt)}};ma.register=Y=function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)ma.register(a[c],b);else for(var f=a.split("."),g=wa,h,i,c=0,e=f.length;c<e;c++){h=(i=-1!==f[c].indexOf("()"))?f[c].replace("()",""):f[c];var j;a:{j=0;for(var k=g.length;j<k;j++)if(g[j].name===h){j=g[j];break a}j=null}j||(j={name:h,val:{},methodExt:[],propExt:[]},g.push(j));c===e-1?j.val=b:g=i?j.methodExt:j.propExt}};ma.registerPlural=
fa=function(a,b,e){ma.register(a,e);ma.register(b,function(){var a=e.apply(this,arguments);return a===this?this:a instanceof ma?a.length?d.isArray(a[0])?new ma(a.context,a[0]):a[0]:c:a})};var F=function(a,b){if("number"===typeof a)return[b[a]];var c=d.map(b,function(a){return a.nTable});return d(c).filter(a).map(function(){var a=d.inArray(this,c);return b[a]}).toArray()};Y("tables()",function(a){return a?new ma(F(a,this.context)):this});Y("table()",function(a){var a=this.tables(a),b=a.context;return b.length?
new ma(b[0]):a});fa("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});fa("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});fa("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});fa("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});fa("tables().containers()",
"table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});Y("draw()",function(a){return this.iterator("table",function(b){V(b,!1===a)})});Y("page()",function(a){return a===c?this.page.info().page:this.iterator("table",function(b){hb(b,a)})});Y("page.info()",function(){if(0===this.context.length)return c;var a=this.context[0],b=a._iDisplayStart,d=a._iDisplayLength,e=a.fnRecordsDisplay(),f=-1===d;return{page:f?0:Math.floor(b/d),pages:f?1:Math.ceil(e/d),start:b,
end:a.fnDisplayEnd(),length:d,recordsTotal:a.fnRecordsTotal(),recordsDisplay:e}});Y("page.len()",function(a){return a===c?0!==this.context.length?this.context[0]._iDisplayLength:c:this.iterator("table",function(b){cb(b,a)})});var Z=function(a,b,c){if(c){var d=new ma(a);d.one("draw",function(){c(d.ajax.json())})}"ssp"==da(a)?V(a,b):(U(a,!0),ia(a,[],function(c){T(a);for(var c=P(a,c),d=0,e=c.length;d<e;d++)w(a,c[d]);V(a,b);U(a,!1)}))};Y("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});
Y("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});Y("ajax.reload()",function(a,b){return this.iterator("table",function(c){Z(c,!1===b,a)})});Y("ajax.url()",function(a){var b=this.context;if(a===c){if(0===b.length)return c;b=b[0];return b.ajax?d.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){d.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});Y("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Z(c,
!1===b,a)})});var ja=function(a,b,e,f,g){var h=[],i,j,k,x,l,F;k=typeof b;if(!b||"string"===k||"function"===k||b.length===c)b=[b];k=0;for(x=b.length;k<x;k++){j=b[k]&&b[k].split?b[k].split(","):[b[k]];l=0;for(F=j.length;l<F;l++)(i=e("string"===typeof j[l]?d.trim(j[l]):j[l]))&&i.length&&h.push.apply(h,i)}a=ya.selector[a];if(a.length){k=0;for(x=a.length;k<x;k++)h=a[k](f,g,h)}return h},ka=function(a){a||(a={});a.filter&&a.search===c&&(a.search=a.filter);return d.extend({search:"none",order:"current",page:"all"},
a)},ta=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},Fa=function(a,b){var c,e,f,g=[],h=a.aiDisplay;c=a.aiDisplayMaster;var i=b.search;e=b.order;f=b.page;if("ssp"==da(a))return"removed"===i?[]:ab(0,c.length);if("current"==f){c=a._iDisplayStart;for(e=a.fnDisplayEnd();c<e;c++)g.push(h[c])}else if("current"==e||"applied"==e)g="none"==i?c.slice():"applied"==i?h.slice():d.map(c,function(a){return-1===
d.inArray(a,h)?a:null});else if("index"==e||"original"==e){c=0;for(e=a.aoData.length;c<e;c++)"none"==i?g.push(c):(f=d.inArray(c,h),(-1===f&&"removed"==i||0<=f&&"applied"==i)&&g.push(c))}return g},Nb=function(a,b,c){return ja("row",b,function(b){var e=vb(b);if(null!==e&&!c)return[e];var f=Fa(a,c);if(null!==e&&-1!==d.inArray(e,f))return[e];if(!b)return f;if("function"===typeof b)return d.map(f,function(c){var d=a.aoData[c];return b(c,d._aData,d.nTr)?c:null});e=Za(jb(a.aoData,f,"nTr"));return b.nodeName&&
-1!==d.inArray(b,e)?[b._DT_RowIndex]:d(e).filter(b).map(function(){return this._DT_RowIndex}).toArray()},a,c)};Y("rows()",function(a,b){a===c?a="":d.isPlainObject(a)&&(b=a,a="");var b=ka(b),e=this.iterator("table",function(c){return Nb(c,a,b)},1);e.selector.rows=a;e.selector.opts=b;return e});Y("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||c},1)});Y("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return jb(a.aoData,b,"_aData")},
1)});fa("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData},1)});fa("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){G(b,c,a)})});fa("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});fa("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,e){var f=b.aoData;f.splice(c,
1);for(var g=0,h=f.length;g<h;g++)null!==f[g].nTr&&(f[g].nTr._DT_RowIndex=g);d.inArray(c,b.aiDisplay);K(b.aiDisplayMaster,c);K(b.aiDisplay,c);K(a[e],c,!1);Ga(b)})});Y("rows.add()",function(a){var b=this.iterator("table",function(b){var c,d,e,f=[];d=0;for(e=a.length;d<e;d++)c=a[d],c.nodeName&&"TR"===c.nodeName.toUpperCase()?f.push(y(b,c)[0]):f.push(w(b,c));return f},1),c=this.rows(-1);c.pop();c.push.apply(c,b.toArray());return c});Y("row()",function(a,b){return ta(this.rows(a,b))});Y("row().data()",
function(a){var b=this.context;if(a===c)return b.length&&this.length?b[0].aoData[this[0]]._aData:c;b[0].aoData[this[0]]._aData=a;G(b[0],this[0],"data");return this});Y("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});Y("row.add()",function(a){a instanceof d&&a.length&&(a=a[0]);return this.row(this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?y(b,a)[0]:w(b,a)})[0])});var Fb=function(a,b,c,e){var f=[],
g=function(b,c){if(d.isArray(b)||b instanceof d)for(var e=0,h=b.length;e<h;e++)g(b[e],c);else b.nodeName&&"tr"===b.nodeName.toLowerCase()?f.push(b):(e=d("<tr><td/></tr>").addClass(c),d("td",e).addClass(c).html(b)[0].colSpan=q(a),f.push(e[0]))};g(c,e);b._details&&b._details.remove();b._details=d(f);b._detailsShow&&b._details.insertAfter(b.nTr)},Pb=function(a,b){var d=a.context;d.length&&(d=d[0].aoData[b!==c?b:a[0]],d._details&&(d._details.remove(),d._detailsShow=c,d._details=c))},Gb=function(a,b){var c=
a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];d._details&&((d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach(),Vb(c[0]))}},Vb=function(a){var b=new ma(a),c=a.aoData;b.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<Ca(c,"_details").length&&(b.on("draw.dt.DT_details",function(d,e){a===e&&b.rows({page:"current"}).eq(0).each(function(a){a=c[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),b.on("column-visibility.dt.DT_details",function(b,
d){if(a===d)for(var e,f=q(d),g=0,h=c.length;g<h;g++)e=c[g],e._details&&e._details.children("td[colspan]").attr("colspan",f)}),b.on("destroy.dt.DT_details",function(d,e){if(a===e)for(var f=0,g=c.length;f<g;f++)c[f]._details&&Pb(b,f)}))};Y("row().child()",function(a,b){var d=this.context;if(a===c)return d.length&&this.length?d[0].aoData[this[0]]._details:c;!0===a?this.child.show():!1===a?Pb(this):d.length&&this.length&&Fb(d[0],d[0].aoData[this[0]],a,b);return this});Y(["row().child.show()","row().child().show()"],
function(){Gb(this,!0);return this});Y(["row().child.hide()","row().child().hide()"],function(){Gb(this,!1);return this});Y(["row().child.remove()","row().child().remove()"],function(){Pb(this);return this});Y("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var Ob=/^(.+):(name|visIdx|visible)$/,Qb=function(a,b,c,d,e){for(var c=[],d=0,f=e.length;d<f;d++)c.push(v(a,e[d],b));return c},Yb=function(a,b,c){var e=a.aoColumns,f=
Ca(e,"sName"),g=Ca(e,"nTh");return ja("column",b,function(b){var h=vb(b);if(""===b)return ab(e.length);if(null!==h)return[0<=h?h:e.length+h];if("function"===typeof b){var i=Fa(a,c);return d.map(e,function(c,d){return b(d,Qb(a,d,0,0,i),g[d])?d:null})}var j="string"===typeof b?b.match(Ob):"";if(j)switch(j[2]){case "visIdx":case "visible":h=parseInt(j[1],10);if(0>h){var k=d.map(e,function(a,b){return a.bVisible?b:null});return[k[k.length+h]]}return[t(a,h)];case "name":return d.map(f,function(a,b){return a===
j[1]?b:null})}else return d(g).filter(b).map(function(){return d.inArray(this,g)}).toArray()},a,c)};Y("columns()",function(a,b){a===c?a="":d.isPlainObject(a)&&(b=a,a="");var b=ka(b),e=this.iterator("table",function(c){return Yb(c,a,b)},1);e.selector.cols=a;e.selector.opts=b;return e});fa("columns().header()","column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});fa("columns().footer()","column().footer()",function(){return this.iterator("column",
function(a,b){return a.aoColumns[b].nTf},1)});fa("columns().data()","column().data()",function(){return this.iterator("column-rows",Qb,1)});fa("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});fa("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return jb(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)});fa("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",
function(a,b,c,d,e){return jb(a.aoData,e,"anCells",b)},1)});fa("columns().visible()","column().visible()",function(a,b){return this.iterator("column",function(e,f){if(a===c)return e.aoColumns[f].bVisible;var g=e.aoColumns,h=g[f],i=e.aoData,j,k,x;if(a!==c&&h.bVisible!==a){if(a){var l=d.inArray(!0,Ca(g,"bVisible"),f+1);j=0;for(k=i.length;j<k;j++)x=i[j].nTr,g=i[j].anCells,x&&x.insertBefore(g[f],g[l]||null)}else d(Ca(e.aoData,"anCells",f)).detach();h.bVisible=a;X(e,e.aoHeader);X(e,e.aoFooter);if(b===
c||b)o(e),(e.oScroll.sX||e.oScroll.sY)&&oa(e);ca(e,null,"column-visibility",[e,f,a]);lb(e)}})});fa("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?s(b,c):c},1)});Y("columns.adjust()",function(){return this.iterator("table",function(a){o(a)},1)});Y("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return t(c,b);if("fromData"===a||"toVisible"===a)return s(c,b)}});Y("column()",
function(a,b){return ta(this.columns(a,b))});var ac=function(a,b,e){var f=a.aoData,g=Fa(a,e),h=Za(jb(f,g,"anCells")),i=d([].concat.apply([],h)),j,k=a.aoColumns.length,x,l,F,o,m,n;return ja("cell",b,function(b){var e="function"===typeof b;if(null===b||b===c||e){x=[];l=0;for(F=g.length;l<F;l++){j=g[l];for(o=0;o<k;o++)m={row:j,column:o},e?(n=a.aoData[j],b(m,v(a,j,o),n.anCells?n.anCells[o]:null)&&x.push(m)):x.push(m)}return x}return d.isPlainObject(b)?[b]:i.filter(b).map(function(a,b){j=b.parentNode._DT_RowIndex;
return{row:j,column:d.inArray(b,f[j].anCells)}}).toArray()},a,e)};Y("cells()",function(a,b,e){d.isPlainObject(a)&&(a.row===c?(e=a,a=null):(e=b,b=null));d.isPlainObject(b)&&(e=b,b=null);if(null===b||b===c)return this.iterator("table",function(b){return ac(b,a,ka(e))});var f=this.columns(b,e),g=this.rows(a,e),h,i,j,k,x,l=this.iterator("table",function(a,b){h=[];i=0;for(j=g[b].length;i<j;i++){k=0;for(x=f[b].length;k<x;k++)h.push({row:g[b][i],column:f[b][k]})}return h},1);d.extend(l.selector,{cols:b,
rows:a,opts:e});return l});fa("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,d){return(a=a.aoData[b].anCells)?a[d]:c},1)});Y("cells().data()",function(){return this.iterator("cell",function(a,b,c){return v(a,b,c)},1)});fa("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)});fa("cells().render()","cell().render()",function(a){return this.iterator("cell",
function(b,c,d){return v(b,c,d,a)},1)});fa("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:s(a,c)}},1)});fa("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){G(b,c,a,d)})});Y("cell()",function(a,b,c){return ta(this.cells(a,b,c))});Y("cell().data()",function(a){var b=this.context,d=this[0];if(a===c)return b.length&&d.length?v(b[0],d[0].row,d[0].column):c;z(b[0],d[0].row,
d[0].column,a);G(b[0],d[0].row,"data",d[0].column);return this});Y("order()",function(a,b){var e=this.context;if(a===c)return 0!==e.length?e[0].aaSorting:c;"number"===typeof a?a=[[a,b]]:d.isArray(a[0])||(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});Y("order.listener()",function(a,b,c){return this.iterator("table",function(d){Cb(d,a,b,c)})});Y(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",
function(c,e){var f=[];d.each(b[e],function(b,c){f.push([c,a])});c.aaSorting=f})});Y("search()",function(a,b,e,f){var g=this.context;return a===c?0!==g.length?g[0].oPreviousSearch.sSearch:c:this.iterator("table",function(c){c.oFeatures.bFilter&&ea(c,d.extend({},c.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===e?!0:e,bCaseInsensitive:null===f?!0:f}),1)})});fa("columns().search()","column().search()",function(a,b,e,f){return this.iterator("column",function(g,h){var i=g.aoPreSearchCols;
if(a===c)return i[h].sSearch;g.oFeatures.bFilter&&(d.extend(i[h],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===e?!0:e,bCaseInsensitive:null===f?!0:f}),ea(g,g.oPreviousSearch,1))})});Y("state()",function(){return this.context.length?this.context[0].oSavedState:null});Y("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});Y("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});Y("state.save()",function(){return this.iterator("table",
function(a){lb(a)})});A.versionCheck=A.fnVersionCheck=function(a){for(var b=A.version.split("."),a=a.split("."),c,d,e=0,f=a.length;e<f;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0};A.isDataTable=A.fnIsDataTable=function(a){var b=d(a).get(0),c=!1;d.each(A.settings,function(a,e){var f=e.nScrollHead?d("table",e.nScrollHead)[0]:null,g=e.nScrollFoot?d("table",e.nScrollFoot)[0]:null;if(e.nTable===b||f===b||g===b)c=!0});return c};A.tables=A.fnTables=function(a){return d.map(A.settings,
function(b){if(!a||a&&d(b.nTable).is(":visible"))return b.nTable})};A.util={throttle:Ab,escapeRegex:p};A.camelToHungarian=h;Y("$()",function(a,b){var c=this.rows(b).nodes(),c=d(c);return d([].concat(c.filter(a).toArray(),c.find(a).toArray()))});d.each(["on","one","off"],function(a,b){Y(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||(a[0]+=".dt");var c=d(this.tables().nodes());c[b].apply(c,a);return this})});Y("clear()",function(){return this.iterator("table",function(a){T(a)})});
Y("settings()",function(){return new ma(this.context,this.context)});Y("init()",function(){var a=this.context;return a.length?a[0].oInit:null});Y("data()",function(){return this.iterator("table",function(a){return Ca(a.aoData,"_aData")}).flatten()});Y("destroy()",function(b){b=b||!1;return this.iterator("table",function(c){var e=c.nTableWrapper.parentNode,f=c.oClasses,g=c.nTable,h=c.nTBody,i=c.nTHead,j=c.nTFoot,k=d(g),h=d(h),x=d(c.nTableWrapper),l=d.map(c.aoData,function(a){return a.nTr}),F;c.bDestroying=
!0;ca(c,"aoDestroyCallback","destroy",[c]);b||(new ma(c)).columns().visible(!0);x.unbind(".DT").find(":not(tbody *)").unbind(".DT");d(a).unbind(".DT-"+c.sInstance);g!=i.parentNode&&(k.children("thead").detach(),k.append(i));j&&g!=j.parentNode&&(k.children("tfoot").detach(),k.append(j));k.detach();x.detach();c.aaSorting=[];c.aaSortingFixed=[];ub(c);d(l).removeClass(c.asStripeClasses.join(" "));d("th, td",i).removeClass(f.sSortable+" "+f.sSortableAsc+" "+f.sSortableDesc+" "+f.sSortableNone);c.bJUI&&
(d("th span."+f.sSortIcon+", td span."+f.sSortIcon,i).detach(),d("th, td",i).each(function(){var a=d("div."+f.sSortJUIWrapper,this);d(this).append(a.contents());a.detach()}));!b&&e&&e.insertBefore(g,c.nTableReinsertBefore);h.children().detach();h.append(l);k.css("width",c.sDestroyWidth).removeClass(f.sTable);(F=c.asDestroyStripes.length)&&h.children().each(function(a){d(this).addClass(c.asDestroyStripes[a%F])});e=d.inArray(c,A.settings);-1!==e&&A.settings.splice(e,1)})});d.each(["column","row","cell"],
function(a,b){Y(b+"s().every()",function(a){return this.iterator(b,function(c,d,e){a.call((new ma(c))[b](d,e))})})});Y("i18n()",function(a,b,e){var f=this.context[0],a=H(a)(f.oLanguage);a===c&&(a=b);e!==c&&d.isPlainObject(a)&&(a=a[e]!==c?a[e]:a._);return a.replace("%d",e)});A.version="1.10.7";A.settings=[];A.models={};A.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};A.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",
src:null};A.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};A.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,
25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,
fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},
fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",
sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:d.extend({},A.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};e(A.defaults);A.defaults.column={aDataSort:null,iDataSort:-1,
asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};e(A.defaults.column);A.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,
iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],
aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:c,oAjaxData:c,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,
_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==da(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==da(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?
!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};A.ext=ya={buttons:{},classes:{},errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:A.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:A.version};d.extend(ya,
{afnFiltering:ya.search,aTypes:ya.type.detect,ofnSearch:ya.type.search,oSort:ya.type.order,afnSortData:ya.order,aoFeatures:ya.feature,oApi:ya.internal,oStdClasses:ya.classes,oPagination:ya.pager});d.extend(A.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",
sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",
sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var a="",a="",b=a+"ui-state-default",c=a+"css_right ui-icon ui-icon-",a=a+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";d.extend(A.ext.oJUIClasses,A.ext.classes,{sPageButton:"fg-button ui-button "+b,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",
sSortAsc:b+" sorting_asc",sSortDesc:b+" sorting_desc",sSortable:b+" sorting",sSortableAsc:b+" sorting_asc_disabled",sSortableDesc:b+" sorting_desc_disabled",sSortableNone:b+" sorting_disabled",sSortJUIAsc:c+"triangle-1-n",sSortJUIDesc:c+"triangle-1-s",sSortJUI:c+"carat-2-n-s",sSortJUIAscAllowed:c+"carat-1-n",sSortJUIDescAllowed:c+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+b,sScrollFoot:"dataTables_scrollFoot "+b,sHeaderTH:b,
sFooterTH:b,sJUIHeader:a+" ui-corner-tl ui-corner-tr",sJUIFooter:a+" ui-corner-bl ui-corner-br"})})();var Xb=A.ext.pager;d.extend(Xb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",qb(a,b),"next"]},full_numbers:function(a,b){return["first","previous",qb(a,b),"next","last"]},_numbers:qb,numbers_length:7});d.extend(!0,A.ext.renderer,{pageButton:{_:function(a,c,e,f,g,h){var i=a.oClasses,j=a.oLanguage.oPaginate,
k,x,l=0,F=function(b,c){var f,o,m,n,q=function(b){hb(a,b.data.action,true)};f=0;for(o=c.length;f<o;f++){n=c[f];if(d.isArray(n)){m=d("<"+(n.DT_el||"div")+"/>").appendTo(b);F(m,n)}else{x=k="";switch(n){case "ellipsis":b.append('<span class="ellipsis">&#x2026;</span>');break;case "first":k=j.sFirst;x=n+(g>0?"":" "+i.sPageButtonDisabled);break;case "previous":k=j.sPrevious;x=n+(g>0?"":" "+i.sPageButtonDisabled);break;case "next":k=j.sNext;x=n+(g<h-1?"":" "+i.sPageButtonDisabled);break;case "last":k=j.sLast;
x=n+(g<h-1?"":" "+i.sPageButtonDisabled);break;default:k=n+1;x=g===n?i.sPageButtonActive:""}if(k){m=d("<a>",{"class":i.sPageButton+" "+x,"aria-controls":a.sTableId,"data-dt-idx":l,tabindex:a.iTabIndex,id:e===0&&typeof n==="string"?a.sTableId+"_"+n:null}).html(k).appendTo(b);Kb(m,{action:n},q);l++}}}},o;try{o=d(b.activeElement).data("dt-idx")}catch(m){}F(d(c).empty(),f);o&&d(c).find("[data-dt-idx="+o+"]").focus()}}});d.extend(A.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Ya(a,
c)?"num"+c:null},function(a){if(a&&!(a instanceof Date)&&(!Hb.test(a)||!Eb.test(a)))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||fb(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return Ya(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Ma(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Ma(a,c,!0)?"html-num-fmt"+c:null},function(a){return fb(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);d.extend(A.ext.type.search,
{html:function(a){return fb(a)?a:"string"===typeof a?a.replace(va," ").replace(Lb,""):""},string:function(a){return fb(a)?a:"string"===typeof a?a.replace(va," "):a}});var Rb=function(a,b,c,d){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=Va(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};d.extend(ya.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return fb(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return fb(a)?
"":"string"===typeof a?a.toLowerCase():!a.toString?"":a.toString()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});Bb("");d.extend(!0,A.ext.renderer,{header:{_:function(a,b,c,e){d(a.nTable).on("order.dt.DT",function(d,f,g,h){if(a===f){d=c.idx;b.removeClass(c.sSortingClass+" "+e.sSortAsc+" "+e.sSortDesc).addClass(h[d]=="asc"?e.sSortAsc:h[d]=="desc"?e.sSortDesc:c.sSortingClass)}})},jqueryui:function(a,b,c,e){d("<div/>").addClass(e.sSortJUIWrapper).append(b.contents()).append(d("<span/>").addClass(e.sSortIcon+
" "+c.sSortingClassJUI)).appendTo(b);d(a.nTable).on("order.dt.DT",function(d,f,g,h){if(a===f){d=c.idx;b.removeClass(e.sSortAsc+" "+e.sSortDesc).addClass(h[d]=="asc"?e.sSortAsc:h[d]=="desc"?e.sSortDesc:c.sSortingClass);b.find("span."+e.sSortIcon).removeClass(e.sSortJUIAsc+" "+e.sSortJUIDesc+" "+e.sSortJUI+" "+e.sSortJUIAscAllowed+" "+e.sSortJUIDescAllowed).addClass(h[d]=="asc"?e.sSortJUIAsc:h[d]=="desc"?e.sSortJUIDesc:c.sSortingClassJUI)}})}}});A.render={number:function(a,b,c,d){return{display:function(e){if("number"!==
typeof e&&"string"!==typeof e)return e;var f=0>e?"-":"",e=Math.abs(parseFloat(e)),g=parseInt(e,10),e=c?b+(e-g).toFixed(c).substring(2):"";return f+(d||"")+g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+e}}}};d.extend(A.ext.internal,{_fnExternApiFunc:eb,_fnBuildAjax:ia,_fnAjaxUpdate:M,_fnAjaxParameters:la,_fnAjaxUpdateDraw:sa,_fnAjaxDataSrc:P,_fnAddColumn:l,_fnColumnOptions:n,_fnAdjustColumnSizing:o,_fnVisibleToColumnIndex:t,_fnColumnIndexToVisible:s,_fnVisbleColumns:q,_fnGetColumns:m,_fnColumnTypes:r,
_fnApplyColumnDefs:u,_fnHungarianMap:e,_fnCamelToHungarian:h,_fnLanguageCompat:g,_fnBrowserDetect:j,_fnAddData:w,_fnAddTr:y,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==c?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return d.inArray(c,a.aoData[b].anCells)},_fnGetCellData:v,_fnSetCellData:z,_fnSplitObjNotation:E,_fnGetObjectDataFn:H,_fnSetObjectDataFn:C,_fnGetDataMaster:N,_fnClearTable:T,_fnDeleteIndex:K,_fnInvalidate:G,_fnGetRowElements:B,_fnCreateTr:W,_fnBuildHead:Q,_fnDrawHead:X,
_fnDraw:S,_fnReDraw:V,_fnAddOptionsHtml:D,_fnDetectHeader:I,_fnGetUniqueThs:O,_fnFeatureHtmlFilter:ga,_fnFilterComplete:ea,_fnFilterCustom:aa,_fnFilterColumn:Ja,_fnFilter:na,_fnFilterCreateSearch:L,_fnEscapeRegex:p,_fnFilterData:ua,_fnFeatureHtmlInfo:Xa,_fnUpdateInfo:Oa,_fnInfoMacros:nb,_fnInitialise:La,_fnInitComplete:Ia,_fnLengthChange:cb,_fnFeatureHtmlLength:R,_fnFeatureHtmlPaginate:Sa,_fnPageChange:hb,_fnFeatureHtmlProcessing:Ta,_fnProcessingDisplay:U,_fnFeatureHtmlTable:ba,_fnScrollDraw:oa,_fnApplyToChildren:xa,
_fnCalculateColumnWidths:Ea,_fnThrottle:Ab,_fnConvertToWidth:qa,_fnScrollingWidthAdjust:Pa,_fnGetWidestNode:Aa,_fnGetMaxLenString:gb,_fnStringToCss:ha,_fnScrollBarWidth:Da,_fnSortFlatten:ob,_fnSort:Ub,_fnSortAria:Db,_fnSortListener:kb,_fnSortAttachListener:Cb,_fnSortingClasses:ub,_fnSortData:Ib,_fnSaveState:lb,_fnLoadState:xb,_fnSettingsFromNode:pb,_fnLog:db,_fnMap:Ua,_fnBindAction:Kb,_fnCallbackReg:Na,_fnCallbackFire:ca,_fnLengthOverflow:Ga,_fnRenderer:Ha,_fnDataSource:da,_fnRowAttributes:J,_fnCalculateEnd:function(){}});
d.fn.dataTable=A;d.fn.dataTableSettings=A.settings;d.fn.dataTableExt=A.ext;d.fn.DataTable=function(a){return d(this).dataTable(a).api()};d.each(A,function(a,b){d.fn.DataTable[a]=b});return d.fn.dataTable})})(window,document);steal.executed("vendor/datatables/js/jquery.dataTables.js");
(function(){var a=function(a,c){a.extend(!0,c.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-6'i><'col-sm-6'p>>",renderer:"bootstrap"});a.extend(c.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"});c.ext.renderer.pageButton.bootstrap=function(d,e,h,g,f,i){var j=new c.Api(d),k=d.oClasses,l=d.oLanguage.oPaginate,n,o,t=function(c,e){var g,r,u,w,y=function(c){c.preventDefault();
a(c.currentTarget).hasClass("disabled")||j.page(c.data.action).draw(!1)};g=0;for(r=e.length;g<r;g++)if(w=e[g],a.isArray(w))t(c,w);else{o=n="";switch(w){case "ellipsis":n="&hellip;";o="disabled";break;case "first":n=l.sFirst;o=w+(0<f?"":" disabled");break;case "previous":n=l.sPrevious;o=w+(0<f?"":" disabled");break;case "next":n=l.sNext;o=w+(f<i-1?"":" disabled");break;case "last":n=l.sLast;o=w+(f<i-1?"":" disabled");break;default:n=w+1,o=f===w?"active":""}n&&(u=a("<li>",{"class":k.sPageButton+" "+
o,"aria-controls":d.sTableId,tabindex:d.iTabIndex,id:0===h&&"string"===typeof w?d.sTableId+"_"+w:null}).append(a("<a>",{href:"#"}).html(n)).appendTo(c),d.oApi._fnBindAction(u,{action:w},y))}};t(a(e).empty().html('<ul class="pagination"/>').children("ul"),g)};c.TableTools&&(a.extend(!0,c.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},
select:{row:"active"}}),a.extend(!0,c.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};"function"===typeof define&&define.amd?define(["jquery","datatables"],a):"object"===typeof exports?a(require("jquery"),require("datatables")):jQuery&&a(jQuery,jQuery.fn.dataTable)})(window,document);steal.executed("vendor/datatables-plugins/js/dataTables.bootstrap.js");
(function(a,b,c){function d(a){for(var b=[],c=0,d=a.length;c<d;c++)b[a[c]]=c;return b}function e(a,b,c){b=a.splice(b,1)[0];a.splice(c,0,b)}function h(a,b,c){for(var d=[],e=0,h=a.childNodes.length;e<h;e++)1==a.childNodes[e].nodeType&&d.push(a.childNodes[e]);b=d[b];null!==c?a.insertBefore(b,d[c]):a.appendChild(b)}a=function(a){a.fn.dataTableExt.oApi.fnColReorder=function(b,c,f){var l=a.fn.dataTable.Api?!0:!1,n,o,t,s,q=b.aoColumns.length,m,r;m=function(a,b,c){if(a[b]){var d=a[b].split("."),e=d.shift();
isNaN(1*e)||(a[b]=c[1*e]+"."+d.join("."))}};if(c!=f)if(0>c||c>=q)this.oApi._fnLog(b,1,"ColReorder 'from' index is out of bounds: "+c);else if(0>f||f>=q)this.oApi._fnLog(b,1,"ColReorder 'to' index is out of bounds: "+f);else{t=[];n=0;for(o=q;n<o;n++)t[n]=n;e(t,c,f);var u=d(t);n=0;for(o=b.aaSorting.length;n<o;n++)b.aaSorting[n][0]=u[b.aaSorting[n][0]];if(null!==b.aaSortingFixed){n=0;for(o=b.aaSortingFixed.length;n<o;n++)b.aaSortingFixed[n][0]=u[b.aaSortingFixed[n][0]]}n=0;for(o=q;n<o;n++){r=b.aoColumns[n];
t=0;for(s=r.aDataSort.length;t<s;t++)r.aDataSort[t]=u[r.aDataSort[t]];l&&(r.idx=u[r.idx])}l&&a.each(b.aLastSort,function(a,c){b.aLastSort[a].src=u[c.src]});n=0;for(o=q;n<o;n++)r=b.aoColumns[n],"number"==typeof r.mData?(r.mData=u[r.mData],b.oApi._fnColumnOptions(b,n,{})):a.isPlainObject(r.mData)&&(m(r.mData,"_",u),m(r.mData,"filter",u),m(r.mData,"sort",u),m(r.mData,"type",u),b.oApi._fnColumnOptions(b,n,{}));if(b.aoColumns[c].bVisible){t=this.oApi._fnColumnIndexToVisible(b,c);s=null;for(n=f<c?f:f+1;null===
s&&n<q;)s=this.oApi._fnColumnIndexToVisible(b,n),n++;m=b.nTHead.getElementsByTagName("tr");n=0;for(o=m.length;n<o;n++)h(m[n],t,s);if(null!==b.nTFoot){m=b.nTFoot.getElementsByTagName("tr");n=0;for(o=m.length;n<o;n++)h(m[n],t,s)}n=0;for(o=b.aoData.length;n<o;n++)null!==b.aoData[n].nTr&&h(b.aoData[n].nTr,t,s)}e(b.aoColumns,c,f);e(b.aoPreSearchCols,c,f);n=0;for(o=b.aoData.length;n<o;n++)m=b.aoData[n],l?(m.anCells&&e(m.anCells,c,f),"dom"!==m.src&&a.isArray(m._aData)&&e(m._aData,c,f)):(a.isArray(m._aData)&&
e(m._aData,c,f),e(m._anHidden,c,f));n=0;for(o=b.aoHeader.length;n<o;n++)e(b.aoHeader[n],c,f);if(null!==b.aoFooter){n=0;for(o=b.aoFooter.length;n<o;n++)e(b.aoFooter[n],c,f)}l&&(new a.fn.dataTable.Api(b)).rows().invalidate();n=0;for(o=q;n<o;n++)a(b.aoColumns[n].nTh).off("click.DT"),this.oApi._fnSortAttachListener(b,b.aoColumns[n].nTh,n);a(b.oInstance).trigger("column-reorder",[b,{iFrom:c,iTo:f,aiInvertMapping:u}])}};var f=function(b,c){var d;a.fn.dataTable.Api?d=(new a.fn.dataTable.Api(b)).settings()[0]:
b.fnSettings?d=b.fnSettings():"string"===typeof b?a.fn.dataTable.fnIsDataTable(a(b)[0])&&(d=a(b).eq(0).dataTable().fnSettings()):b.nodeName&&"table"===b.nodeName.toLowerCase()?a.fn.dataTable.fnIsDataTable(b.nodeName)&&(d=a(b.nodeName).dataTable().fnSettings()):b instanceof jQuery?a.fn.dataTable.fnIsDataTable(b[0])&&(d=b.eq(0).dataTable().fnSettings()):d=b;if(d._colReorder)throw"ColReorder already initialised on table #"+d.nTable.id;var e=a.fn.dataTable.camelToHungarian;e&&(e(f.defaults,f.defaults,
!0),e(f.defaults,c||{}));this.s={dt:null,init:a.extend(!0,{},f.defaults,c),fixed:0,fixedRight:0,reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]};this.dom={drag:null,pointer:null};this.s.dt=d;this.s.dt._colReorder=this;this._fnConstruct();d.oApi._fnCallbackReg(d,"aoDestroyCallback",a.proxy(this._fnDestroy,this),"ColReorder");return this};f.prototype={fnReset:function(){for(var a=[],b=0,c=this.s.dt.aoColumns.length;b<c;b++)a.push(this.s.dt.aoColumns[b]._ColReorder_iOrigCol);
this._fnOrderColumns(a);return this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(a){if(a===c){for(var a=[],b=0,e=this.s.dt.aoColumns.length;b<e;b++)a.push(this.s.dt.aoColumns[b]._ColReorder_iOrigCol);return a}this._fnOrderColumns(d(a));return this},_fnConstruct:function(){var a=this,b=this.s.dt.aoColumns.length,c;this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns);this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0;this.s.init.fnReorderCallback&&
(this.s.reorderCallback=this.s.init.fnReorderCallback);for(c=0;c<b;c++)c>this.s.fixed-1&&c<b-this.s.fixedRight&&this._fnMouseListener(c,this.s.dt.aoColumns[c].nTh),this.s.dt.aoColumns[c]._ColReorder_iOrigCol=c;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(b,c){a._fnStateSave.call(a,c)},"ColReorder_State");var e=null;this.s.init.aiOrder&&(e=this.s.init.aiOrder.slice());this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==
this.s.dt.aoColumns.length&&(e=this.s.dt.oLoadedState.ColReorder);if(e)if(a.s.dt._bInitComplete)b=d(e),a._fnOrderColumns.call(a,b);else{var f=!1;this.s.dt.aoDrawCallback.push({fn:function(){if(!a.s.dt._bInitComplete&&!f){f=!0;var b=d(e);a._fnOrderColumns.call(a,b)}},sName:"ColReorder_Pre"})}else this._fnSetColumnIndexes()},_fnOrderColumns:function(b){if(b.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");
else{for(var c=0,d=b.length;c<d;c++){var f=a.inArray(c,b);c!=f&&(e(b,f,c),this.s.dt.oInstance.fnColReorder(f,c))}(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(!1);this.s.dt.oInstance.oApi._fnSaveState(this.s.dt);this._fnSetColumnIndexes();null!==this.s.reorderCallback&&this.s.reorderCallback.call(this)}},_fnStateSave:function(b){var c,d,e,f=this.s.dt.aoColumns;b.ColReorder=[];if(b.aaSorting){for(c=0;c<b.aaSorting.length;c++)b.aaSorting[c][0]=f[b.aaSorting[c][0]]._ColReorder_iOrigCol;
var h=a.extend(!0,[],b.aoSearchCols);c=0;for(d=f.length;c<d;c++)e=f[c]._ColReorder_iOrigCol,b.aoSearchCols[e]=h[c],b.abVisCols[e]=f[c].bVisible,b.ColReorder.push(e)}else if(b.order){for(c=0;c<b.order.length;c++)b.order[c][0]=f[b.order[c][0]]._ColReorder_iOrigCol;h=a.extend(!0,[],b.columns);c=0;for(d=f.length;c<d;c++)e=f[c]._ColReorder_iOrigCol,b.columns[e]=h[c],b.ColReorder.push(e)}},_fnMouseListener:function(b,c){var d=this;a(c).on("mousedown.ColReorder",function(a){a.preventDefault();d._fnMouseDown.call(d,
a,c)})},_fnMouseDown:function(d,e){var f=this,h=a(d.target).closest("th, td").offset(),n=parseInt(a(e).attr("data-column-index"),10);n!==c&&(this.s.mouse.startX=d.pageX,this.s.mouse.startY=d.pageY,this.s.mouse.offsetX=d.pageX-h.left,this.s.mouse.offsetY=d.pageY-h.top,this.s.mouse.target=this.s.dt.aoColumns[n].nTh,this.s.mouse.targetIndex=n,this.s.mouse.fromIndex=n,this._fnRegions(),a(b).on("mousemove.ColReorder",function(a){f._fnMouseMove.call(f,a)}).on("mouseup.ColReorder",function(a){f._fnMouseUp.call(f,
a)}))},_fnMouseMove:function(a){if(null===this.dom.drag){if(5>Math.pow(Math.pow(a.pageX-this.s.mouse.startX,2)+Math.pow(a.pageY-this.s.mouse.startY,2),0.5))return;this._fnCreateDragNode()}this.dom.drag.css({left:a.pageX-this.s.mouse.offsetX,top:a.pageY-this.s.mouse.offsetY});for(var b=!1,c=this.s.mouse.toIndex,d=1,e=this.s.aoTargets.length;d<e;d++)if(a.pageX<this.s.aoTargets[d-1].x+(this.s.aoTargets[d].x-this.s.aoTargets[d-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[d-1].x);this.s.mouse.toIndex=
this.s.aoTargets[d-1].to;b=!0;break}b||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to);this.s.init.bRealtime&&c!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(){a(b).off("mousemove.ColReorder mouseup.ColReorder");null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),
this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this._fnSetColumnIndexes(),(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var b=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length);this.s.aoTargets.push({x:a(this.s.dt.nTable).offset().left,
to:0});for(var c=0,d=0,e=b.length;d<e;d++)d!=this.s.mouse.fromIndex&&c++,b[d].bVisible&&this.s.aoTargets.push({x:a(b[d].nTh).offset().left+a(b[d].nTh).outerWidth(),to:c});0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight);0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var b=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,c=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,d=c.parentNode,e=d.parentNode,f=e.parentNode,
h=a(c).clone();this.dom.drag=a(f.cloneNode(!1)).addClass("DTCR_clonedTable").append(a(e.cloneNode(!1)).append(a(d.cloneNode(!1)).append(h[0]))).css({position:"absolute",top:0,left:0,width:a(c).outerWidth(),height:a(c).outerHeight()}).appendTo("body");this.dom.pointer=a("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:b?a("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:a(this.s.dt.nTable).offset().top,height:b?a("div.dataTables_scroll",this.s.dt.nTableWrapper).height():
a(this.s.dt.nTable).height()}).appendTo("body")},_fnDestroy:function(){var b,c;b=0;for(c=this.s.dt.aoDrawCallback.length;b<c;b++)if("ColReorder_Pre"===this.s.dt.aoDrawCallback[b].sName){this.s.dt.aoDrawCallback.splice(b,1);break}a(this.s.dt.nTHead).find("*").off(".ColReorder");a.each(this.s.dt.aoColumns,function(b,c){a(c.nTh).removeAttr("data-column-index")});this.s=this.s.dt._colReorder=null},_fnSetColumnIndexes:function(){a.each(this.s.dt.aoColumns,function(b,c){a(c.nTh).attr("data-column-index",
b)})}};f.defaults={aiOrder:null,bRealtime:!1,iFixedColumns:0,iFixedColumnsRight:0,fnReorderCallback:null};f.version="1.1.3";a.fn.dataTable.ColReorder=f;a.fn.DataTable.ColReorder=f;"function"==typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.3")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInstance;a._colReorder?b.oApi._fnLog(a,1,"ColReorder attempted to initialise twice. Ignoring second"):(b=a.oInit,new f(a,b.colReorder||
b.oColReorder||{}));return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download");a.fn.dataTable.Api&&(a.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(a){a._colReorder.fnReset()})}),a.fn.dataTable.Api.register("colReorder.order()",function(a){return a?this.iterator("table",function(b){b._colReorder.fnOrder(a)}):this.context.length?this.context[0]._colReorder.fnOrder():
null}));return f};"function"===typeof define&&define.amd?define(["jquery","datatables"],a):"object"===typeof exports?a(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.ColReorder&&a(jQuery,jQuery.fn.dataTable)})(window,document);steal.executed("vendor/datatables-colreorder/js/dataTables.colReorder.js");
(function(a,b){var c=b.define,d=function(a){var a=a.split("."),c=b,d;for(d=0;d<a.length&&c;d++)c=c[a[d]];return c},e=b.define&&b.define.modules||b._define&&b._define.modules||{},h=b.define=function(g,f,i){var j;"function"===typeof f&&(i=f,f=[]);var k=[],l;for(l=0;l<f.length;l++)k.push(a[f[l]]?d(a[f[l]]):e[f[l]]||d(f[l]));!f.length&&i.length?(j={exports:{}},k.push(function(b){return a[b]?d(a[b]):e[b]},j.exports,j)):!k[0]&&"exports"===f[0]&&(j={exports:{}},k[0]=j.exports);b.define=c;f=i?i.apply(null,
k):void 0;b.define=h;e[g]=j&&j.exports?j.exports:f};b.define.orig=c;b.define.modules=e;b.define.amd=!0;b.System={define:function(a,d){b.define=c;eval("(function() { "+d+" \n }).call(global);");b.define=h},orig:b.System}})({},window);
define("can/util/can",[],function(){var a="undefined"!==typeof window?window:global,b={};if("undefined"===typeof GLOBALCAN||!1!==GLOBALCAN)a.can=b;b.global=a;b.k=function(){};b.isDeferred=b.isPromise=function(a){return a&&"function"===typeof a.then&&"function"===typeof a.pipe};b.isMapLike=function(a){return b.Map&&(a instanceof b.Map||a&&a.__get)};var c=0;b.cid=function(a,b){a._cid||(c++,a._cid=(b||"")+c);return a._cid};b.VERSION="@EDGE";b.simpleExtend=function(a,b){for(var c in b)a[c]=b[c];return a};
b.last=function(a){return a&&a[a.length-1]};var d=Function.prototype.bind;b.proxy=d?function(a,b){return d.call(a,b)}:function(a,b){return function(){return a.apply(b,arguments)}};b.frag=function(a){var c;if(!a||"string"===typeof a)return c=b.buildFragment(null==a?"":""+a,document.body),c.childNodes.length||c.appendChild(document.createTextNode("")),c;if(11===a.nodeType)return a;"number"===typeof a.nodeType?(c=document.createDocumentFragment(),c.appendChild(a)):"number"===typeof a.length?(c=document.createDocumentFragment(),
b.each(a,function(a){c.appendChild(b.frag(a))})):(c=b.buildFragment(""+a,document.body),c.childNodes.length||c.appendChild(document.createTextNode("")));return c};b.scope=b.viewModel=function(a,c,d){var a=b.$(a),f=b.data(a,"scope")||b.data(a,"viewModel");f||(f=new b.Map,b.data(a,"scope",f),b.data(a,"viewModel",f));switch(arguments.length){case 0:case 1:return f;case 2:return f.attr(c);default:return f.attr(c,d),a}};b["import"]=function(a){var c=new b.Deferred;"object"===typeof window.System&&b.isFunction(window.System["import"])?
window.System["import"](a).then(b.proxy(c.resolve,c),b.proxy(c.reject,c)):window.define&&window.define.amd?window.require([a],function(a){c.resolve(a)}):window.steal?steal.steal(a,function(a){c.resolve(a)}):window.require?c.resolve(window.require(a)):c.resolve();return c.promise()};b.__observe=function(){};return b});
define("can/util/attr/attr",["can/util/can"],function(a){var b=a.global.setImmediate||function(a){return setTimeout(a,0)},c={MutationObserver:a.global.MutationObserver||a.global.WebKitMutationObserver||a.global.MozMutationObserver,map:{"class":"className",value:"value",innertext:"innerText",textcontent:"textContent",checked:!0,disabled:!0,readonly:!0,required:!0,src:function(a,b){if(null==b||""===b)return a.removeAttribute("src"),null;a.setAttribute("src",b);return b},style:function(a,b){return a.style.cssText=
b||""}},defaultValue:["input","textarea"],set:function(b,e,h){var e=e.toLowerCase(),g;c.MutationObserver||(g=c.get(b,e));var f=b.nodeName.toString().toLowerCase(),i=c.map[e],j;"function"===typeof i?j=i(b,h):!0===i?(j=b[e]=!0,"checked"===e&&"radio"===b.type&&0<=a.inArray(f,c.defaultValue)&&(b.defaultChecked=!0)):i?(j=h,b[i]!==h&&(b[i]=h),"value"===i&&0<=a.inArray(f,c.defaultValue)&&(b.defaultValue=h)):(b.setAttribute(e,h),j=h);!c.MutationObserver&&j!==g&&c.trigger(b,e,g)},trigger:function(c,e,h){if(a.data(a.$(c),
"canHasAttributesBindings"))return e=e.toLowerCase(),b(function(){a.trigger(c,{type:"attributes",attributeName:e,target:c,oldValue:h,bubbles:!1},[])})},get:function(a,b){var b=b.toLowerCase(),h=c.map[b];return"string"===typeof h&&a[h]?a[h]:a.getAttribute(b)},remove:function(a,b){var b=b.toLowerCase(),h;c.MutationObserver||(h=c.get(a,b));var g=c.map[b];"function"===typeof g&&g(a,void 0);!0===g?a[b]=!1:"string"===typeof g?a[g]="":a.removeAttribute(b);!c.MutationObserver&&null!=h&&c.trigger(a,b,h)},
has:function(){var b=a.global.document&&document.createElement("div");return b&&b.hasAttribute?function(a,b){return a.hasAttribute(b)}:function(a,b){return null!==a.getAttribute(b)}}()};return c});
define("can/event/event",["can/util/can"],function(a){a.addEvent=function(a,c){var d=this.__bindEvents||(this.__bindEvents={});(d[a]||(d[a]=[])).push({handler:c,name:a});return this};a.listenTo=function(b,c,d){var e=this.__listenToEvents;e||(e=this.__listenToEvents={});var h=a.cid(b),g=e[h];g||(g=e[h]={obj:b,events:{}});(e=g.events[c])||(e=g.events[c]=[]);e.push(d);a.bind.call(b,c,d)};a.stopListening=function(b,c,d){var e=this.__listenToEvents,h=e,g=0;if(!e||b&&(b=a.cid(b),(h={})[b]=e[b],!e[b]))return this;
for(var f in h){var i=h[f],j,b=e[f].obj;c?(j={})[c]=i.events[c]:j=i.events;for(var k in j){for(var l=j[k]||[],g=0;g<l.length;)d&&d===l[g]||!d?(a.unbind.call(b,k,l[g]),l.splice(g,1)):g++;l.length||delete i.events[k]}a.isEmptyObject(i.events)&&delete e[f]}return this};a.removeEvent=function(a,c,d){if(!this.__bindEvents)return this;for(var e=this.__bindEvents[a]||[],h=0,g,f="function"===typeof c;h<e.length;)g=e[h],(d?d(g,a,c):f&&g.handler===c||!f&&(g.cid===c||!c))?e.splice(h,1):h++;return this};a.dispatch=
function(a,c){var d=this.__bindEvents;if(d){"string"===typeof a&&(a={type:a});var d=(d[a.type]||[]).slice(0),e=[a];c&&e.push.apply(e,c);for(var h=0,g=d.length;h<g;h++)d[h].handler.apply(this,e);return a}};a.one=function(b,c){var d=function(){a.unbind.call(this,b,d);return c.apply(this,arguments)};a.bind.call(this,b,d);return this};a.event={on:function(){return 0===arguments.length&&a.Control&&this instanceof a.Control?a.Control.prototype.on.call(this):a.addEvent.apply(this,arguments)},off:function(){return 0===
arguments.length&&a.Control&&this instanceof a.Control?a.Control.prototype.off.call(this):a.removeEvent.apply(this,arguments)},bind:a.addEvent,unbind:a.removeEvent,delegate:function(b,c,d){return a.addEvent.call(this,c,d)},undelegate:function(b,c,d){return a.removeEvent.call(this,c,d)},trigger:a.dispatch,one:a.one,addEvent:a.addEvent,removeEvent:a.removeEvent,listenTo:a.listenTo,stopListening:a.stopListening,dispatch:a.dispatch};return a.event});
define("can/util/array/each",["can/util/can"],function(a){a.each=function(b,c,d){var e=0,h,g,f;if(b)if(g="length"in b&&b.length,"function"!==typeof arr&&(0===g||"number"===typeof g&&0<g&&g-1 in b))if(a.List&&b instanceof a.List)for(g=b.attr("length");e<g&&!(f=b.attr(e),!1===c.call(d||f,f,e,b));e++);else for(g=b.length;e<g&&!(f=b[e],!1===c.call(d||f,f,e,b));e++);else if("object"===typeof b)if(a.Map&&b instanceof a.Map||b===a.route){var i=a.Map.keys(b),e=0;for(g=i.length;e<g&&!(h=i[e],f=b.attr(h),!1===
c.call(d||f,f,h,b));e++);}else for(h in b)if(b.hasOwnProperty(h)&&!1===c.call(d||b[h],b[h],h,b))break;return b};return a});
define("can/util/inserted/inserted",["can/util/can"],function(a){a.inserted=function(b){for(var b=a.makeArray(b),c=!1,d=a.$(document.contains?document:document.body),e,h=0,g;void 0!==(g=b[h]);h++){if(!c)if(g.getElementsByTagName)if(a.has(d,g).length)c=!0;else break;else continue;if(c&&g.getElementsByTagName){e=a.makeArray(g.getElementsByTagName("*"));a.trigger(g,"inserted",[],!1);g=0;for(var f;void 0!==(f=e[g]);g++)a.trigger(f,"inserted",[],!1)}}};a.appendChild=function(b,c){var d;d=11===c.nodeType?
a.makeArray(c.childNodes):[c];b.appendChild(c);a.inserted(d)};a.insertBefore=function(b,c,d){var e;e=11===c.nodeType?a.makeArray(c.childNodes):[c];b.insertBefore(c,d);a.inserted(e)}});
define("can/util/jquery/jquery","jquery/dist/jquery can/util/can can/util/attr/attr can/event/event can/util/array/each can/util/inserted/inserted".split(" "),function(a,b,c){var d=function(a){return a.nodeName&&(a.nodeType===1||a.nodeType===9)||a==window},a=a||window.jQuery;a.extend(b,a,{trigger:function(c,e,f,g){if(d(c))a.event.trigger(e,f,c,!g);else if(c.trigger)c.trigger(e,f);else{typeof e==="string"&&(e={type:e});e.target=e.target||c;f&&(f.length&&typeof f==="string"?f=[f]:f.length||(f=[f]));
f||(f=[]);b.dispatch.call(c,e,f)}},event:b.event,addEvent:b.addEvent,removeEvent:b.removeEvent,buildFragment:function(b,c){var d,b=[b],c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c;d=a.buildFragment(b,c);return d.cacheable?a.clone(d.fragment):d.fragment||d},$:a,each:b.each,bind:function(c,e){this.bind&&this.bind!==b.bind?this.bind(c,e):d(this)?a.event.add(this,c,e):b.addEvent.call(this,c,e);return this},unbind:function(c,e){this.unbind&&this.unbind!==b.unbind?this.unbind(c,e):d(this)?
a.event.remove(this,c,e):b.removeEvent.call(this,c,e);return this},delegate:function(c,e,f){this.delegate?this.delegate(c,e,f):d(this)?a(this).delegate(c,e,f):b.bind.call(this,e,f);return this},undelegate:function(c,e,f){this.undelegate?this.undelegate(c,e,f):d(this)?a(this).undelegate(c,e,f):b.unbind.call(this,e,f);return this},proxy:b.proxy,attr:c});b.on=b.bind;b.off=b.unbind;a.each(["append","filter","addClass","remove","data","get","has"],function(a,c){b[c]=function(a){return a[c].apply(a,b.makeArray(arguments).slice(1))}});
var e=a.cleanData;a.cleanData=function(c){a.each(c,function(a,c){c&&b.trigger(c,"removed",[],false)});e(c)};var h=a.fn.domManip,g;a.fn.domManip=function(a,b,c){for(var d=1;d<arguments.length;d++)if(typeof arguments[d]==="function"){g=d;break}return h.apply(this,arguments)};a(document.createElement("div")).append(document.createElement("div"));a.fn.domManip=g===2?function(a,c,d){return h.call(this,a,c,function(a){var c;a.nodeType===11&&(c=b.makeArray(a.childNodes));var e=d.apply(this,arguments);b.inserted(c?
c:[a]);return e})}:function(a,c){return h.call(this,a,function(a){var d;a.nodeType===11&&(d=b.makeArray(a.childNodes));var e=c.apply(this,arguments);b.inserted(d?d:[a]);return e})};if(b.attr.MutationObserver)a.event.special.attributes={setup:function(){var a=this,c=new b.attr.MutationObserver(function(c){c.forEach(function(c){c=b.simpleExtend({},c);b.trigger(a,c,[])})});c.observe(this,{attributes:true,attributeOldValue:true});b.data(b.$(this),"canAttributesObserver",c)},teardown:function(){b.data(b.$(this),
"canAttributesObserver").disconnect();a.removeData(this,"canAttributesObserver")}};else{var f=a.attr;a.attr=function(a,c){var d,e;arguments.length>=3&&(d=f.call(this,a,c));var g=f.apply(this,arguments);arguments.length>=3&&(e=f.call(this,a,c));e!==d&&b.attr.trigger(a,c,d);return g};var i=a.removeAttr;a.removeAttr=function(a,c){var d=f.call(this,a,c),e=i.apply(this,arguments);d!=null&&b.attr.trigger(a,c,d);return e};a.event.special.attributes={setup:function(){b.data(b.$(this),"canHasAttributesBindings",
true)},teardown:function(){a.removeData(this,"canHasAttributesBindings")}}}(function(){if("<-\n>"!==b.buildFragment("<-\n>",document).childNodes[0].nodeValue){var a=b.buildFragment;b.buildFragment=function(b,c){var d=a(b,c);if(d.childNodes.length===1&&d.childNodes[0].nodeType===3)d.childNodes[0].nodeValue=b;return d}}})();a.event.special.inserted={};a.event.special.removed={};return b});define("can/util/util",["can/util/jquery/jquery"],function(a){return a});
define("can/view/view",["can/util/util"],function(a){var b=a.isFunction,c=a.makeArray,d=1,e=function(a){var b=function(){return j.frag(a.apply(this,arguments))};b.render=function(){return a.apply(a,arguments)};return b},h=function(a,b){if(!a.length)throw"can.view: No template or empty template:"+b;},g=function(c,d){if(b(c))return a.Deferred().resolve(c);var e="string"===typeof c?c:c.url,f=c.engine&&"."+c.engine||e.match(/\.[\w\d]+$/),g,i,q;e.match(/^#/)&&(e=e.substr(1));if(i=document.getElementById(e))f=
"."+i.type.match(/\/(x\-)?(.+)/)[2];!f&&!j.cached[e]&&(e+=f=j.ext);a.isArray(f)&&(f=f[0]);q=j.toId(e);e.match(/^\/\//)&&(e=e.substr(2),e=!window.steal?e:steal.config().root.mapJoin(""+steal.id(e)));window.require&&require.toUrl&&(e=require.toUrl(e));g=j.types[f];if(j.cached[q])return j.cached[q];if(i)return j.registerView(q,i.innerHTML,g);var m=new a.Deferred;a.ajax({async:d,url:e,dataType:"text",error:function(a){h("",e);m.reject(a)},success:function(a){h(a,e);j.registerView(q,a,g,m)}});return m},
f=function(b){var c=[];if(a.isDeferred(b))return[b];for(var d in b)a.isDeferred(b[d])&&c.push(b[d]);return c},i=function(b){return a.isArray(b)&&"success"===b[1]?b[0]:b},j=a.view=a.template=function(a,c,d,e){b(d)&&(e=d,d=void 0);return j.renderAs("fragment",a,c,d,e)};a.extend(j,{frag:function(a,b){return j.hookup(j.fragment(a),b)},fragment:function(b){if("string"!==typeof b&&11===b.nodeType)return b;b=a.buildFragment(b,document.body);b.childNodes.length||b.appendChild(document.createTextNode(""));
return b},toId:function(b){return a.map(b.toString().split(/\/|\./g),function(a){if(a)return a}).join("_")},toStr:function(a){return null==a?"":""+a},hookup:function(b,c){var d=[],e,f;a.each(b.childNodes?a.makeArray(b.childNodes):b,function(b){1===b.nodeType&&(d.push(b),d.push.apply(d,a.makeArray(b.getElementsByTagName("*"))))});a.each(d,function(a){if(a.getAttribute&&(e=a.getAttribute("data-view-id"))&&(f=j.hookups[e]))f(a,c,e),delete j.hookups[e],a.removeAttribute("data-view-id")});return b},hookups:{},
hook:function(a){j.hookups[++d]=a;return" data-view-id='"+d+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(b){this.types["."+b.suffix]=b;a[b.suffix]=j[b.suffix]=function(a,c){var d,f;if(!c)return f=function(){d||(d=b.fragRenderer?b.fragRenderer(null,a):e(b.renderer(null,a)));return d.apply(this,arguments)},f.render=function(){var c=b.renderer(null,a);return c.apply(c,arguments)},f;f=function(){d||(d=b.fragRenderer?b.fragRenderer(a,c):b.renderer(a,c));return d.apply(this,arguments)};
return b.fragRenderer?j.preload(a,f):j.preloadStringRenderer(a,f)}},types:{},ext:".ejs",registerScript:function(a,b,c){return"can.view.preloadStringRenderer('"+b+"',"+j.types["."+a].script(b,c)+");"},preload:function(b,c){(j.cached[b]=(new a.Deferred).resolve(function(a,b){return c.call(a,a,b)})).__view_id=b;return j.cachedRenderers[b]=c},preloadStringRenderer:function(a,b){return this.preload(a,e(b))},render:function(b,c,d,e){return a.view.renderAs("string",b,c,d,e)},renderTo:function(a,b,c,d){return("string"===
a&&b.render?b.render:b)(c,d)},renderAs:function(d,e,h,o,t){b(o)&&(t=o,o=void 0);var s=f(h),q,m,r,u;if(s.length)return q=new a.Deferred,m=a.extend({},h),s.push(g(e,!0)),a.when.apply(a,s).then(function(b){var e=c(arguments),f=e.pop();if(a.isDeferred(h))m=i(b);else for(var g in h)a.isDeferred(h[g])&&(m[g]=i(e.shift()));e=a.view.renderTo(d,f,m,o);q.resolve(e,m);t&&t(e,m)},function(){q.reject.apply(q,arguments)}),q;s=a.__clearReading();r=b(t);q=g(e,r);s&&a.__setReading(s);if(r)u=q,q.then(function(b){t(h?
a.view.renderTo(d,b,h,o):b)});else{if("resolved"===q.state()&&q.__view_id)return e=j.cachedRenderers[q.__view_id],h?a.view.renderTo(d,e,h,o):e;q.then(function(b){u=h?a.view.renderTo(d,b,h,o):b})}return u},registerView:function(b,c,d,f){d="object"===typeof d?d:j.types[d||j.ext];c=d.fragRenderer?d.fragRenderer(b,c):e(d.renderer(b,c));f=f||new a.Deferred;j.cache&&(j.cached[b]=f,f.__view_id=b,j.cachedRenderers[b]=c);return f.resolve(c)}});return a});
define("can/view/callbacks/callbacks",["can/util/util","can/view/view"],function(a){var b=a.view.attr=function(a,b){if(b)"string"===typeof a?c[a]=b:d.push({match:a,handler:b});else{var e=c[a];if(!e)for(var g=0,h=d.length;g<h;g++){var n=d[g];if(n.match.test(a)){e=n.handler;break}}return e}},c={},d=[],e=/[-\:]/,h=a.view.tag=function(b,c){if(c)a.global.html5&&(a.global.html5.elements+=" "+b,a.global.html5.shivDocument()),g[b.toLowerCase()]=c;else{var d=g[b.toLowerCase()];!d&&e.test(b)&&(d=function(){});
return d}},g={};a.view.callbacks={_tags:g,_attributes:c,_regExpAttributes:d,tag:h,attr:b,tagHandler:function(b,c,d){var e=d.options.attr("tags."+c)||g[c],c=d.scope;if(e){var h=a.__clearReading(),e=e(b,d);a.__setReading(h)}else e=c;e&&d.subtemplate&&(c!==e&&(c=c.add(e)),d=d.subtemplate(c,d.options),d="string"===typeof d?a.view.frag(d):d,a.appendChild(b,d))}};return a.view.callbacks});
define("can/view/elements",["can/util/util","can/view/view"],function(a){var b="undefined"!==typeof document?document:null,c=b&&1===a.$(document.createComment("~")).length,d={tagToContentPropMap:{option:b&&"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:a.attr.map,attrReg:/([^\s=]+)[\s]*=[\s]*/,defaultValue:a.attr.defaultValue,tagMap:{"":"span",colgroup:"col",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",
optgroup:"option"},reverseTagMap:{col:"colgroup",tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},getParentNode:function(a,b){return b&&11===a.parentNode.nodeType?b:a.parentNode},setAttr:a.attr.set,getAttr:a.attr.get,removeAttr:a.attr.remove,contentText:function(a){return"string"===typeof a?a:!a&&0!==a?"":""+a},after:function(b,c){var d=b[b.length-1];d.nextSibling?a.insertBefore(d.parentNode,c,d.nextSibling):a.appendChild(d.parentNode,c)},replace:function(b,h){d.after(b,h);a.remove(a.$(b)).length<
b.length&&!c&&a.each(b,function(a){8===a.nodeType&&a.parentNode.removeChild(a)})}};return a.view.elements=d});
define("can/util/string/string",["can/util/util"],function(a){var b=/\=\=/,c=/([A-Z]+)([A-Z][a-z])/g,d=/([a-z\d])([A-Z])/g,e=/([a-z\d])([A-Z])/g,h=/\{([^\}]+)\}/g,g=/"/g,f=/'/g,i=/-+(.)?/g,j=/[a-z][A-Z]/g,k=function(a,b,c){var d=a[b];void 0===d&&!0===c&&(d=a[b]={});return d},l=function(a){return""+(null===a||void 0===a||isNaN(a)&&"NaN"===""+a?"":a)};a.extend(a,{esc:function(a){return l(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(g,"&#34;").replace(f,"&#39;")},getObject:function(b,
c,d){var b=b?b.split("."):[],e=b.length,f,g=0,h,i,j,c=a.isArray(c)?c:[c||window];j=c.length;if(!e)return c[0];for(g;g<j;g++){f=c[g];i=void 0;for(h=0;h<e&&/^f|^o/.test(typeof f);h++)i=f,f=k(i,b[h]);if(void 0!==i&&void 0!==f)break}!1===d&&void 0!==f&&delete i[b[h-1]];if(!0===d&&void 0===f){f=c[0];for(h=0;h<e&&/^f|^o/.test(typeof f);h++)f=k(f,b[h],!0)}return f},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},camelize:function(a){return l(a).replace(i,function(a,b){return b?b.toUpperCase():
""})},hyphenate:function(a){return l(a).replace(j,function(a){return a.charAt(0)+"-"+a.charAt(1).toLowerCase()})},underscore:function(a){return a.replace(b,"/").replace(c,"$1_$2").replace(d,"$1_$2").replace(e,"_").toLowerCase()},sub:function(b,c,d){var e=[];e.push((b||"").replace(h,function(b,f){var g=a.getObject(f,c,!0===d?!1:void 0);return void 0===g||null===g?(e=null,""):/^f|^o/.test(typeof g)&&e?(e.push(g),""):""+g}));return null===e?e:1>=e.length?e[0]:e},replacer:h,undHash:/_|-/});return a});
define("can/construct/construct",["can/util/string/string"],function(a){var b=0,c;try{Object.getOwnPropertyDescriptor({}),c=!0}catch(d){c=!1}var e=function(b,c,d){var d=d||b,e,h;for(h in b){var l;(e=l=(l=Object.getOwnPropertyDescriptor(b,h))&&(l.get||l.set)?l:null)?this._defineProperty(d,c,h,e):a.Construct._overwrite(d,c,h,b[h])}},h=function(b,c,d){var d=d||b,e;for(e in b)a.Construct._overwrite(d,c,e,b[e])};a.Construct=function(){if(arguments.length)return a.Construct.extend.apply(a.Construct,arguments)};
a.extend(a.Construct,{constructorExtends:!0,newInstance:function(){var a=this.instance(),b;a.setup&&(b=a.setup.apply(a,arguments));a.init&&a.init.apply(a,b||arguments);return a},_inherit:c?e:h,_defineProperty:function(a,b,c,d){Object.defineProperty(a,c,d)},_overwrite:function(a,b,c,d){a[c]=d},setup:function(b){this.defaults=a.extend(!0,{},b.defaults,this.defaults)},instance:function(){b=1;var a=new this;b=0;return a},extend:function(c,d,e){function h(){if(!b)return this.constructor!==t&&arguments.length&&
t.constructorExtends?t.extend.apply(t,arguments):t.newInstance.apply(t,arguments)}var k=c,l=d,n=e;"string"!==typeof k&&(n=l,l=k,k=null);n||(n=l,l=null);var n=n||{},o=this.prototype,t,s,q,m,r,u,w,y;y=this.instance();a.Construct._inherit(n,o,y);k&&(s=k.split("."),u=s.pop());"undefined"===typeof constructorName&&(t=function(){return h.apply(this,arguments)});for(r in this)this.hasOwnProperty(r)&&(t[r]=this[r]);a.Construct._inherit(l,this,t);k&&(w=l=a.getObject(s.join("."),window,!0),q=a.underscore(k.replace(/\./g,
"_")),m=a.underscore(u),l[u]=t);a.extend(t,{constructor:t,prototype:y,namespace:w,_shortName:m,fullName:k,_fullName:q});void 0!==u&&(t.shortName=u);t.prototype.constructor=t;k=[this].concat(a.makeArray(arguments));q=t.setup.apply(t,k);t.init&&t.init.apply(t,q||k);return t}});a.Construct.prototype.setup=function(){};a.Construct.prototype.init=function(){};return a.Construct});
define("can/control/control",["can/util/util","can/construct/construct"],function(a){var b=function(b,c,d){a.bind.call(b,c,d);return function(){a.unbind.call(b,c,d)}},c=a.isFunction,d=a.extend,e=a.each,h=[].slice,g=/\{([^\}]+)\}/g,f=a.getObject("$.event.special",[a])||{},i=function(b,c,d,e){a.delegate.call(b,c,d,e);return function(){a.undelegate.call(b,c,d,e)}},j,k=a.Control=a.Construct({setup:function(){a.Construct.setup.apply(this,arguments);if(a.Control){var b;this.actions={};for(b in this.prototype)this._isAction(b)&&
(this.actions[b]=this._action(b))}},_shifter:function(b,d){var e="string"===typeof d?b[d]:d;c(e)||(e=b[e]);return function(){b.called=d;return e.apply(b,[this.nodeName?a.$(this):this].concat(h.call(arguments,0)))}},_isAction:function(a){var b=this.prototype[a],d=typeof b;return"constructor"!==a&&("function"===d||"string"===d&&c(this.prototype[b]))&&!(!f[a]&&!l[a]&&!/[^\w]/.test(a))},_action:function(b,c){g.lastIndex=0;if(c||!g.test(b)){var d=c?a.sub(b,this._lookup(c)):b;if(!d)return null;var e=a.isArray(d),
f=e?d[1]:d,h=f.split(/\s+/g),i=h.pop();return{processor:l[i]||j,parts:[f,h.join(" "),i],delegate:e?d[0]:void 0}}},_lookup:function(a){return[a,window]},processors:{},defaults:{}},{setup:function(b,c){var e=this.constructor,f=e.pluginName||e._fullName;this.element=a.$(b);f&&"can_control"!==f&&this.element.addClass(f);(f=a.data(this.element,"controls"))||(f=[],a.data(this.element,"controls",f));f.push(this);this.options=d({},e.defaults,c);this.on();return[this.element,this.options]},on:function(c,d,
e,f){if(!c){this.off();var c=this.constructor,d=this._bindings,e=c.actions,f=this.element,g=a.Control._shifter(this,"destroy"),h,j;for(h in e)e.hasOwnProperty(h)&&(j=e[h]||c._action(h,this.options,this))&&(d.control[h]=j.processor(j.delegate||f,j.parts[2],j.parts[1],h,this));a.bind.call(f,"removed",g);d.user.push(function(b){a.unbind.call(b,"removed",g)});return d.user.length}"string"===typeof c&&(f=e,e=d,d=c,c=this.element);void 0===f&&(f=e,e=d,d=null);"string"===typeof f&&(f=a.Control._shifter(this,
f));this._bindings.user.push(d?i(c,a.trim(d),e,f):b(c,e,f));return this._bindings.user.length},off:function(){var a=this.element[0],b=this._bindings;b&&(e(b.user||[],function(b){b(a)}),e(b.control||{},function(b){b(a)}));this._bindings={user:[],control:{}}},destroy:function(){if(null!==this.element){var b=this.constructor,b=b.pluginName||b._fullName;this.off();b&&"can_control"!==b&&this.element.removeClass(b);b=a.data(this.element,"controls");b.splice(a.inArray(this,b),1);a.trigger(this,"destroyed");
this.element=null}}}),l=a.Control.processors;j=function(c,d,e,f,g){f=a.Control._shifter(g,f);return e?i(c,a.trim(e),d,f):b(c,d,f)};e("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave touchstart touchmove touchcancel touchend touchleave inserted removed".split(" "),function(a){l[a]=j});return k});
define("can/util/bind/bind",["can/util/util"],function(a){a.bindAndSetup=function(){a.addEvent.apply(this,arguments);this._init||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup()));return this};a.unbindAndTeardown=function(b,c){var d=this.__bindEvents[b]||[],e=d.length;a.removeEvent.apply(this,arguments);this._bindings=null===this._bindings?0:this._bindings-(e-d.length);!this._bindings&&this._bindteardown&&this._bindteardown();return this};return a});
define("can/map/bubble",["can/util/util"],function(a){var b=a.bubble={event:function(a,b){return a.constructor._bubbleRule(b,a)},childrenOf:function(a,d){a._each(function(e,h){e&&e.bind&&b.toParent(e,a,h,d)})},teardownChildrenFrom:function(a,d){a._each(function(e){b.teardownFromParent(a,e,d)})},toParent:function(b,d,e,h){a.listenTo.call(d,b,h,function(){var g=a.makeArray(arguments),f=g.shift();g[0]=(a.List&&d instanceof a.List?d.indexOf(b):e)+(g[0]?"."+g[0]:"");f.triggeredNS=f.triggeredNS||{};f.triggeredNS[d._cid]||
(f.triggeredNS[d._cid]=!0,a.trigger(d,f,g))})},teardownFromParent:function(b,d,e){d&&d.unbind&&a.stopListening.call(b,d,e)},isBubbling:function(a,b){return a._bubbleBindings&&a._bubbleBindings[b]},bind:function(a,d){if(!a._init){var e=b.event(a,d),h=e.length,g;a._bubbleBindings||(a._bubbleBindings={});for(var f=0;f<h;f++)g=e[f],a._bubbleBindings[g]?a._bubbleBindings[g]++:(a._bubbleBindings[g]=1,b.childrenOf(a,g))}},unbind:function(c,d){for(var e=b.event(c,d),h=e.length,g,f=0;f<h;f++)g=e[f],c._bubbleBindings&&
c._bubbleBindings[g]--,c._bubbleBindings&&!c._bubbleBindings[g]&&(delete c._bubbleBindings[g],b.teardownChildrenFrom(c,g),a.isEmptyObject(c._bubbleBindings)&&delete c._bubbleBindings)},add:function(c,d,e){if(d instanceof a.Map&&c._bubbleBindings)for(var h in c._bubbleBindings)c._bubbleBindings[h]&&(b.teardownFromParent(c,d,h),b.toParent(d,c,e,h))},removeMany:function(a,d){for(var e=0,h=d.length;e<h;e++)b.remove(a,d[e])},remove:function(c,d){if(d instanceof a.Map&&c._bubbleBindings)for(var e in c._bubbleBindings)c._bubbleBindings[e]&&
b.teardownFromParent(c,d,e)},set:function(c,d,e,h){a.Map.helpers.isObservable(e)&&b.add(c,e,d);a.Map.helpers.isObservable(h)&&b.remove(c,h);return e}};return b});
define("can/util/batch/batch",["can/util/can"],function(a){var b=1,c=0,d=[],e=[],h=null;a.batch={start:function(a){c++;a&&e.push(a)},stop:function(g,f){g?c=0:c--;if(0===c&&null===h){h=d.slice(0);var i=e.slice(0),j;d=[];e=[];a.batch.batchNum=b;b++;f&&a.batch.start();for(j=0;j<h.length;j++)a.dispatch.apply(h[j][0],h[j][1]);h=null;for(j=0;j<i.length;j++)i[j]();a.batch.batchNum=void 0}},trigger:function(e,f,i){if(!e._init)if(f="string"===typeof f?{type:f}:f,h)h.push([e,[f,i]]);else{if(0===c)return a.dispatch.call(e,
f,i);f.batchNum=b;d.push([e,[f,i]])}},afterPreviousEvents:function(b){if(h){var c={};a.bind.call(c,"ready",b);h.push([c,[{type:"ready"},[]]])}else b()}}});
define("can/map/map",["can/util/util","can/util/bind/bind","can/map/bubble","can/construct/construct","can/util/batch/batch"],function(a,b,c){var d=null,e=function(){for(var a in d)d[a].added&&delete d[a].obj._cid;d=null},h=null,g=a.Map=a.Construct.extend({setup:function(){a.Construct.setup.apply(this,arguments);if(a.Map){this.defaults||(this.defaults={});this._computes=[];for(var b in this.prototype)"define"!==b&&"constructor"!==b&&("function"!==typeof this.prototype[b]||this.prototype[b].prototype instanceof
a.Construct)?this.defaults[b]=this.prototype[b]:this.prototype[b].isComputed&&this._computes.push(b);this.helpers.define&&this.helpers.define(this)}a.List&&!(this.prototype instanceof a.List)&&(this.List=g.List.extend({Map:this},{}))},_bubble:c,_bubbleRule:function(a){return"change"===a||0<=a.indexOf(".")?["change"]:[]},_computes:[],bind:a.bindAndSetup,on:a.bindAndSetup,unbind:a.unbindAndTeardown,off:a.unbindAndTeardown,id:"id",helpers:{define:null,attrParts:function(a,b){return b?[a]:"object"===
typeof a?a:(""+a).split(".")},addToMap:function(b,c){var g;d||(g=e,d={});var h=b._cid,l=a.cid(b);d[l]||(d[l]={obj:b,instance:c,added:!h});return g},isObservable:function(b){return b instanceof a.Map||b&&b===a.route},canMakeObserve:function(b){return b&&!a.isDeferred(b)&&(a.isArray(b)||a.isPlainObject(b))},serialize:function(b,c,d){var e=a.cid(b),l=!1;h||(l=!0,h={attr:{},serialize:{}});h[c][e]=d;b.each(function(e,k){var l;l=(l=g.helpers.isObservable(e)&&h[c][a.cid(e)])?l:"serialize"===c?g.helpers._serialize(b,
k,e):g.helpers._getValue(b,k,e,c);void 0!==l&&(d[k]=l)});a.__observe(b,"__keys");l&&(h=null);return d},_serialize:function(a,b,c){return g.helpers._getValue(a,b,c,"serialize")},_getValue:function(a,b,c,d){return g.helpers.isObservable(c)?c[d]():c}},keys:function(b){var c=[];a.__observe(b,"__keys");for(var d in b._data)c.push(d);return c}},{setup:function(b){b instanceof a.Map&&(b=b.serialize());this._data={};a.cid(this,".map");this._init=1;this._computedBindings={};var c=this._setupDefaults(b);this._setupComputes(c);
var d=b&&a.Map.helpers.addToMap(b,this);this.attr(a.extend(a.extend(!0,{},c),b));d&&d();this.bind("change",a.proxy(this._changes,this));delete this._init},_setupComputes:function(){for(var a=this.constructor._computes,b=0,c=a.length,d;b<c;b++)d=a[b],this[d]=this[d].clone(this),this._computedBindings[d]={count:0}},_setupDefaults:function(){return this.constructor.defaults||{}},_bindsetup:function(){},_bindteardown:function(){},_changes:function(b,c,d,e,g){a.batch.trigger(this,{type:c,batchNum:b.batchNum,
target:b.target},[e,g])},_triggerChange:function(b,d,e,g){c.isBubbling(this,"change")?a.batch.trigger(this,{type:"change",target:this},[b,d,e,g]):a.batch.trigger(this,b,[e,g]);("remove"===d||"add"===d)&&a.batch.trigger(this,{type:"__keys",target:this})},_each:function(a){var b=this.__get(),c;for(c in b)b.hasOwnProperty(c)&&a(b[c],c)},attr:function(a,b){var c=typeof a;if("string"!==c&&"number"!==c)return this._attrs(a,b);if(1===arguments.length)return this._get(a);this._set(a,b);return this},each:function(){return a.each.apply(void 0,
[this].concat(a.makeArray(arguments)))},removeAttr:function(b){var c=a.List&&this instanceof a.List,d=a.Map.helpers.attrParts(b),e=d.shift(),c=c?this[e]:this._data[e];if(d.length&&c)return c.removeAttr(d);"string"===typeof b&&~b.indexOf(".")&&(e=b);this._remove(e,c);return c},_remove:function(a,b){a in this._data&&(delete this._data[a],a in this.constructor.prototype||delete this[a],this._triggerChange(a,"remove",void 0,b))},_get:function(b){var b=""+b,c=b.indexOf(".");if(0<=c){var d=this.__get(b);
if(void 0!==d)return d;d=b.substr(0,c);b=b.substr(c+1);a.__observe(this,d);return(c=this.__get(d))&&c._get?c._get(b):void 0}a.__observe(this,b);return this.__get(b)},__get:function(a){return a?this._computedBindings[a]?this[a]():this._data[a]:this._data},__type:function(b){if(!(b instanceof a.Map)&&a.Map.helpers.canMakeObserve(b)){var c=d&&d[b._cid]&&d[b._cid].instance;return c?c:a.isArray(b)?new a.List(b):new (this.constructor.Map||a.Map)(b)}return b},_set:function(a,b,c){var a=""+a,d=a.indexOf(".");
if(!c&&0<=d)if(c=a.substr(0,d),a=a.substr(d+1),d=this._init?void 0:this.__get(c),g.helpers.isObservable(d))d._set(a,b);else throw"can.Map: Object does not exist";else this.__convert&&(b=this.__convert(a,b)),d=this._init?void 0:this.__get(a),this.__set(a,this.__type(b,a),d)},__set:function(a,b,c){if(b!==c){var d=void 0!==c||this.__get().hasOwnProperty(a)?"set":"add";this.___set(a,this.constructor._bubble.set(this,a,b,c));this._computedBindings[a]||this._triggerChange(a,d,b,c);c&&this.constructor._bubble.teardownFromParent(this,
c)}},___set:function(a,b){if(this._computedBindings[a])this[a](b);else this._data[a]=b;"function"!==typeof this.constructor.prototype[a]&&!this._computedBindings[a]&&(this[a]=b)},bind:function(b,c){var d=this._computedBindings&&this._computedBindings[b];if(d)if(d.count)d.count++;else{d.count=1;var e=this;d.handler=function(c,d,g){a.batch.trigger(e,{type:b,batchNum:c.batchNum,target:e},[d,g])};this[b].bind("change",d.handler)}this.constructor._bubble.bind(this,b);return a.bindAndSetup.apply(this,arguments)},
unbind:function(b,c){var d=this._computedBindings&&this._computedBindings[b];d&&(1===d.count?(d.count=0,this[b].unbind("change",d.handler),delete d.handler):d.count--);this.constructor._bubble.unbind(this,b);return a.unbindAndTeardown.apply(this,arguments)},serialize:function(){return a.Map.helpers.serialize(this,"serialize",{})},_attrs:function(b,c){if(void 0===b)return g.helpers.serialize(this,"attr",{});var b=a.simpleExtend({},b),d,e=this,h;a.batch.start();this.each(function(a,d){"_cid"!==d&&(h=
b[d],void 0===h?c&&e.removeAttr(d):(e.__convert&&(h=e.__convert(d,h)),g.helpers.isObservable(h)?e.__set(d,e.__type(h,d),a):g.helpers.isObservable(a)&&g.helpers.canMakeObserve(h)?a.attr(h,c):a!==h&&e.__set(d,e.__type(h,d),a),delete b[d]))});for(d in b)"_cid"!==d&&(h=b[d],this._set(d,h,!0));a.batch.stop();return this},compute:function(b){if(a.isFunction(this.constructor.prototype[b]))return a.compute(this[b],this);var c=b.split("."),d=c.length-1,e={args:[]};return a.compute(function(b){if(arguments.length)a.compute.read(this,
c.slice(0,d)).value.attr(c[d],b);else return a.compute.read(this,c,e).value},this)}});g.prototype.on=g.prototype.bind;g.prototype.off=g.prototype.unbind;return g});
define("can/list/list",["can/util/util","can/map/map","can/map/bubble"],function(a,b,c){var d=[].splice,e=function(){var a={"0":"a",length:1};d.call(a,0,1);return!a[0]}(),h=b.extend({Map:b},{setup:function(b,c){this.length=0;a.cid(this,".map");this._init=1;this._computedBindings={};this._setupComputes();var b=b||[],d;a.isDeferred(b)?this.replace(b):(d=b.length&&a.Map.helpers.addToMap(b,this),this.push.apply(this,a.makeArray(b||[])));d&&d();this.bind("change",a.proxy(this._changes,this));a.simpleExtend(this,
c);delete this._init},_triggerChange:function(c,d,e,h){b.prototype._triggerChange.apply(this,arguments);var k=+c;!~(""+c).indexOf(".")&&!isNaN(k)&&("add"===d?(a.batch.trigger(this,d,[e,k]),a.batch.trigger(this,"length",[this.length])):"remove"===d?(a.batch.trigger(this,d,[h,k]),a.batch.trigger(this,"length",[this.length])):a.batch.trigger(this,d,[e,k]))},__get:function(b){return b?this[b]&&this[b].isComputed&&a.isFunction(this.constructor.prototype[b])?this[b]():this[b]:this},__set:function(b,c,d){b=
isNaN(+b)||b%1?b:+b;return"number"===typeof b&&b>this.length-1?(b=Array(b+1-this.length),b[b.length-1]=c,this.push.apply(this,b),b):a.Map.prototype.__set.call(this,""+b,c,d)},___set:function(a,b){this[a]=b;+a>=this.length&&(this.length=+a+1)},_remove:function(a,b){isNaN(+a)?(delete this[a],this._triggerChange(a,"remove",void 0,b)):this.splice(a,1)},_each:function(a){for(var b=this.__get(),c=0;c<b.length;c++)a(b[c],c)},serialize:function(){return b.helpers.serialize(this,"serialize",[])},splice:function(b,
f){var h=a.makeArray(arguments),j=[],k,l,n,o=2<h.length,b=b||0;k=0;for(l=h.length-2;k<l;k++)n=k+2,h[n]=this.__type(h[n],n),j.push(h[n]),this[k+b]!==h[n]&&(o=!1);if(o&&this.length<=j.length)return j;void 0===f&&(f=h[1]=this.length-b);n=d.apply(this,h);if(!e)for(k=this.length;k<n.length+this.length;k++)delete this[k];a.batch.start();0<f&&(c.removeMany(this,n),this._triggerChange(""+b,"remove",void 0,n));if(2<h.length){k=0;for(l=j.length;k<l;k++)c.set(this,k,j[k]);this._triggerChange(""+b,"add",j,n)}a.batch.stop();
return n},_attrs:function(c,d){if(void 0===c)return b.helpers.serialize(this,"attr",[]);c=a.makeArray(c);a.batch.start();this._updateAttrs(c,d);a.batch.stop()},_updateAttrs:function(a,c){for(var d=Math.min(a.length,this.length),e=0;e<d;e++){var h=this[e],l=a[e];b.helpers.isObservable(h)&&b.helpers.canMakeObserve(l)?h.attr(l,c):h!==l&&this._set(e,l)}a.length>this.length?this.push.apply(this,a.slice(this.length)):a.length<this.length&&c&&this.splice(a.length)}});a.each({push:"length",unshift:0},function(a,
b){var d=[][b];h.prototype[b]=function(){for(var b=[],e=a?this.length:0,f=arguments.length,h;f--;)h=arguments[f],b[f]=c.set(this,f,this.__type(h,f));f=d.apply(this,b);(!this.comparator||b.length)&&this._triggerChange(""+e,"add",b,void 0);return f}});a.each({pop:"length",shift:0},function(b,d){h.prototype[d]=function(){if(this.length){var e=arguments[0]&&a.isArray(arguments[0])?arguments[0]:a.makeArray(arguments),h=b&&this.length?this.length-1:0,e=[][d].apply(this,e);this._triggerChange(""+h,"remove",
void 0,[e]);e&&e.unbind&&c.remove(this,e);return e}}});a.extend(h.prototype,{indexOf:function(b,c){this.attr("length");return a.inArray(b,this,c)},join:function(){return[].join.apply(this.attr(),arguments)},reverse:function(){this.replace([].reverse.call(a.makeArray(this)))},slice:function(){return new this.constructor(Array.prototype.slice.apply(this,arguments))},concat:function(){var b=[];a.each(a.makeArray(arguments),function(c,d){b[d]=c instanceof a.List?c.serialize():c});return new this.constructor(Array.prototype.concat.apply(this.serialize(),
b))},forEach:function(b,c){return a.each(this,b,c||this)},replace:function(b){a.isDeferred(b)?b.then(a.proxy(this.replace,this)):this.splice.apply(this,[0,this.length].concat(a.makeArray(b||[])));return this},filter:function(b,c){var d=new a.List,e=this;this.each(function(a,h){b.call(c|e,a,h,e)&&d.push(a)});return d}});a.List=b.List=h;return a.List});
define("can/compute/read",["can/util/util"],function(a){var b=function(a,e,h){for(var h=h||{},g={foundObservable:!1},a=c(a,0,e,h,g),f,i,j=e.length,k=0;k<j;){i=a;f=0;for(var l=b.propertyReaders.length;f<l;f++){var n=b.propertyReaders[f];if(n.test(a)){a=n.read(a,e[k],k,h,g);break}}k+=1;a=c(a,k,e,h,g,i);f=typeof a;if(k<e.length&&(null===a||"function"!==f&&"object"!==f))return h.earlyExit&&h.earlyExit(i,k-1,a),{value:void 0,parent:i}}void 0===a&&h.earlyExit&&h.earlyExit(i,k-1);return{value:a,parent:i}},
c=function(a,c,h,g,f,i){var j;do{j=!1;for(var k=0,l=b.valueReaders.length;k<l;k++)b.valueReaders[k].test(a,c,h,g)&&(a=b.valueReaders[k].read(a,c,h,g,f,i))}while(j);return a};b.valueReaders=[{name:"compute",test:function(a){return a&&a.isComputed},read:function(b,c,h,g,f){if(g.isArgument&&c===h.length)return b;!f.foundObservable&&g.foundObservable&&(g.foundObservable(b,c),f.foundObservable=!0);return b instanceof a.Compute?b.get():b()}},{name:"function",test:function(b,c,h,g){return"function"===typeof b&&
!b.isComputed&&(g.executeAnonymousFunctions||g.isArgument&&c===h.length)&&!(a.Construct&&b.prototype instanceof a.Construct)&&!(a.route&&b===a.route)},read:function(b,c,h,g,f,i){return g.isArgument&&c===h.length?!1!==g.proxyMethods?a.proxy(b,i):b:b.call(i)}}];b.propertyReaders=[{name:"map",test:a.isMapLike,read:function(b,c,h,g,f){!f.foundObservable&&g.foundObservable&&(g.foundObservable(b,h),f.foundObservable=!0);return"function"===typeof b[c]&&b.constructor.prototype[c]===b[c]?g.returnObserveMethods?
b[c]:"constructor"===c&&b instanceof a.Construct||b[c].prototype instanceof a.Construct?b[c]:b[c].apply(b,g.args||[]):b.attr(c)}},{name:"promise",test:function(b){return a.isPromise(b)},read:function(b,c,h,g,f){!f.foundObservable&&g.foundObservable&&(g.foundObservable(b,h),f.foundObservable=!0);var i=b.__observeData;b.__observeData||(i=b.__observeData={isPending:!0,state:"pending",isResolved:!1,isRejected:!1,value:void 0,reason:void 0},a.cid(i),a.simpleExtend(i,a.event),b.then(function(a){i.isPending=
!1;i.isResolved=!0;i.value=a;i.state="resolved";i.dispatch("state",["resolved","pending"])},function(a){i.isPending=!1;i.isRejected=!0;i.reason=a;i.state="rejected";i.dispatch("state",["rejected","pending"])}));a.__observe(i,"state");return c in i?i[c]:b[c]}},{name:"object",test:function(){return!0},read:function(a,b){return null==a?void 0:a[b]}}];b.write=function(b,c,h,g){g=g||{};if(a.isMapLike(b))return!g.isArgument&&b._data&&b._data[c]&&b._data[c].isComputed?b._data[c](h):b.attr(c,h);if(b[c]&&
b[c].isComputed)return b[c](h);"object"===typeof b&&(b[c]=h)};return b});
define("can/compute/get_value_and_bind",["can/util/util"],function(){var a=[];can.__isRecordingObserves=function(){return a.length};can.__observe=can.__reading=function(b,c){if(a.length){var d=b._cid+"|"+c,f=a[a.length-1];f.names+=d;f.observed[d]={obj:b,event:c+""}}};can.__notObserve=function(a){return function(){var b=can.__clearObserved(),c=a.apply(this,arguments);can.__setObserved(b);return c}};can.__clearObserved=can.__clearReading=function(){if(a.length){var b=a[a.length-1];a[a.length-1]={observed:{}};
return b}};can.__setObserved=can.__setReading=function(b){a.length&&(a[a.length-1]=b)};can.__addObserved=can.__addReading=function(b){a.length&&can.simpleExtend(a[a.length-1],b)};var b=function(b,c){a.push({names:"",observed:{}});var d=b.call(c),f=a.pop();f.value=d;return f},c=function(a,b,c){for(var d in b){var i=b,j=d,k=c;a[j]?delete a[j]:(i=i[j],i.obj.bind(i.event,k))}},d=function(a,b){for(var c in a){var d=a[c];d.obj.unbind(d.event,b)}};return function(a,h,g,f){var i=b(a,h),a=i.observed,h=g.observed;
i.names!==g.names&&(c(h,a,f),d(h,f));can.batch.afterPreviousEvents(function(){i.ready=!0});return i}});
define("can/compute/proto_compute",["can/util/util","can/util/bind/bind","can/compute/read","can/compute/get_value_and_bind","can/util/batch/batch"],function(a,b,c,d){var e=function(b,c,d,e){c!==d&&a.batch.trigger(b,e?{type:"change",batchNum:e}:"change",[c,d])},h=function(b,c,e,f){var g,h,i,f=!1;return{on:function(){var j=this;h||(h=function(a){if(g.ready&&b.bound&&(void 0===a.batchNum||a.batchNum!==i)){var k=g.value,y;f?(y=c.call(e),g.value=y):(g=d(c,e,g,h),y=g.value);j.updater(y,k,a.batchNum);i=
i=a.batchNum}});g=d(c,e,{observed:{}},h);f&&(c=a.__notObserve(c));b.value=g.value;b.hasDependencies=!a.isEmptyObject(g.observed)},off:function(){for(var a in g.observed){var b=g.observed[a];b.obj.unbind(b.event,h)}}}},g=function(){},f=function(a,b,c){return function(){return a.call(b,c.get())}},i=function(a,b){return function(c){void 0!==c&&b(c,a.value)}};a.Compute=function(b,c,d,e){for(var f=[],g=0,h=arguments.length;g<h;g++)f[g]=arguments[g];g=typeof f[1];"function"===typeof f[0]?this._setupGetterSetterFn(f[0],
f[1],f[2],f[3]):f[1]?"string"===g?this._setupContextString(f[0],f[1],f[2]):"function"===g?this._setupContextFunction(f[0],f[1],f[2]):f[1]&&f[1].fn?this._setupAsyncCompute(f[0],f[1]):this._setupContextSettings(f[0],f[1]):this._setupInitialValue(f[0]);this._args=f;this.isComputed=!0;a.cid(this,"compute")};a.simpleExtend(a.Compute.prototype,{_bindsetup:a.__notObserve(function(){this.bound=!0;this._on(this.updater)}),_bindteardown:function(){this._off(this.updater);this.bound=!1},bind:a.bindAndSetup,
unbind:a.unbindAndTeardown,clone:function(b){b&&"function"===typeof this._args[0]?this._args[1]=b:b&&(this._args[2]=b);return new a.Compute(this._args[0],this._args[1],this._args[2],this._args[3])},_on:g,_off:g,get:function(){a.__isRecordingObserves()&&!1!==this._canObserve&&(a.__observe(this,"change"),this.bound||a.Compute.temporarilyBind(this));return this.bound?this.value:this._get()},_get:function(){return this.value},set:function(a){var b=this.value,a=this._set(a,b);if(this.hasDependencies)return this._setUpdates?
this.value:this._get();this.value=void 0===a?this._get():a;e(this,this.value,b);return this.value},_set:function(a){return this.value=a},updater:function(a,b,c){this.value=a;e(this,a,b,c)},_computeFn:function(a){return arguments.length?this.set(a):this.get()},toFunction:function(){return a.proxy(this._computeFn,this)},_setupGetterSetterFn:function(b,c,d,e){this._set=a.proxy(b,c);this._get=a.proxy(b,c);this._canObserve=!1===d?!1:!0;b=h(this,b,c||this,e);this._on=b.on;this._off=b.off},_setupContextString:function(b,
c,d){var e=this,f=function(a,b,c){e.updater(b,c,a.batchNum)};a.isMapLike(b)?(this.hasDependencies=!0,this._get=function(){return b.attr(c)},this._set=function(a){b.attr(c,a)},this._on=function(){b.bind(d||c,f);this.value=this._get()},this._off=function(){return b.unbind(d||c,f)}):(this._get=a.proxy(this._get,b),this._set=a.proxy(this._set,b))},_setupContextFunction:function(b,c,d){this.value=b;this._set=c;a.simpleExtend(this,d)},_setupContextSettings:function(b,c){this.value=b;this._set=c.set?a.proxy(c.set,
c):this._set;this._get=c.get?a.proxy(c.get,c):this._get;if(!c.__selfUpdater){var d=this,e=this.updater;this.updater=function(){e.call(d,d._get(),d.value)}}this._on=c.on?c.on:this._on;this._off=c.off?c.off:this._off},_setupAsyncCompute:function(b,c){this.value=b;var d=a.proxy(this.updater,this),e=this,g=c.fn,j;this.updater=d;var k=new a.Compute(b);this.lastSetValue=k;this._setUpdates=!0;this._set=function(a){return a===k.get()?this.value:k.set(a)};this._get=f(g,c.context,k);0===g.length?j=h(this,g,
c.context):1===g.length?j=h(this,function(){return g.call(c.context,k.get())},c):(this.updater=i(this,d),j=h(this,function(){var a=g.call(c.context,k.get(),function(a){d(a,e.value)});return void 0!==a?a:this.value},c));this._on=j.on;this._off=j.off},_setupInitialValue:function(a){this.value=a}});var j,k=function(){for(var a=0,b=j.length;a<b;a++)j[a].unbind("change",g);j=null};a.Compute.temporarilyBind=function(a){a.bind("change",g);j||(j=[],setTimeout(k,10));j.push(a)};a.Compute.async=function(b,
c,d){return new a.Compute(b,{fn:c,context:d})};a.Compute.read=c;a.Compute.set=c.write;a.Compute.truthy=function(b){return new a.Compute(function(){var a=b.get();"function"===typeof a&&(a=a.get());return!!a})};return a.Compute});
define("can/compute/compute",["can/util/util","can/util/bind/bind","can/util/batch/batch","can/compute/proto_compute"],function(a){a.compute=function(b,c,d,f){var i=new a.Compute(b,c,d,f),d=function(a){return arguments.length?i.set(a):i.get()};d.bind=a.proxy(i.bind,i);d.unbind=a.proxy(i.unbind,i);d.isComputed=i.isComputed;d.clone=function(d){"function"===typeof b&&(c=d);return a.compute(b,c,d,f)};d.computeInstance=i;return d};var b=function(){},c,d=function(){for(var a=0,d=c.length;a<d;a++)c[a].unbind("change",
b);c=null};a.compute.temporarilyBind=function(a){a.bind("change",b);c||(c=[],setTimeout(d,10));c.push(a)};a.compute.truthy=function(b){return a.compute(function(){var a=b();"function"===typeof a&&(a=a());return!!a})};a.compute.async=function(b,c,d){return a.compute(b,{fn:c,context:d})};a.compute.read=a.Compute.read;a.compute.set=a.Compute.set;return a.compute});
define("can/observe/observe",["can/util/util","can/map/map","can/list/list","can/compute/compute"],function(a){a.Observe=a.Map;a.Observe.startBatch=a.batch.start;a.Observe.stopBatch=a.batch.stop;a.Observe.triggerBatch=a.batch.trigger;return a});
define("can/view/scope/compute_data",["can/util/util","can/compute/compute","can/compute/get_value_and_bind"],function(a,b,c){var d=function(a,b){for(var c in a.observed){var d=a.observed[c];d.obj.unbind(d.event,b)}},e=function(b,c,d,e,j){if(4<arguments.length)if(e.root.isComputed)e.root(j);else{if(e.reads.length){var k=e.reads.length-1,l=e.reads.length?a.compute.read(e.root,e.reads.slice(0,k)).value:e.root;a.compute.set(l,e.reads[k],j,d)}}else{if(e.root)return a.compute.read(e.root,e.reads,d).value;
k=b.read(c,d);e.scope=k.scope;e.initialValue=k.value;e.reads=k.reads;e.root=k.rootObserve;return k.value}};return function(b,g,f){var f=f||{args:[]},i={},j=function(a){return arguments.length?e(b,g,f,i,a):e(b,g,f,i)},k,l,n=function(a){if(l.ready&&s.computeInstance.bound&&(void 0===a.batchNum||a.batchNum!==k)){var b=l.value;l=c(j,null,l,n);s.computeInstance.updater(l.value,b,a.batchNum);k=k=a.batchNum}},o=function(a,b,d){"function"!==typeof b?s.computeInstance.updater(b,d,a.batchNum):(i.root.unbind(i.reads[0],
o),l=c(j,null,{observed:{}},n),t=!1,s.computeInstance.updater(l.value,d,a.batchNum))},t=!1,s=a.compute(void 0,{on:function(){l=c(j,null,{observed:{}},n);if(i.reads&&1===i.reads.length&&i.root instanceof a.Map&&!a.isFunction(i.root[i.reads[0]])){var b=l;i.root.bind(i.reads[0],o);l={value:i.initialValue,observed:{something:!0}};d(b,n);t=!0}s.computeInstance.value=l.value;s.computeInstance.hasDependencies=!a.isEmptyObject(l.observed)},off:function(){t?i.root.unbind(i.reads[0],o):d(l,n)},set:j,get:j,
__selfUpdater:!0});i.compute=s;return i}});
define("can/view/scope/scope","can/util/util can/view/scope/compute_data can/construct/construct can/map/map can/list/list can/view/view can/compute/compute".split(" "),function(a,b){var c=/(\\)?\./g,d=/\\\./g,e=function(a){var b=[],e=0;a.replace(c,function(c,h,l){if(!h){b.push(a.slice(e,l).replace(d,"."));e=l+c.length}});b.push(a.slice(e).replace(d,"."));return b},h=a.Construct.extend({read:a.compute.read},{init:function(a,b){this._context=a;this._parent=b;this.__cache={}},attr:a.__notObserve(function(b,
c){var d={isArgument:true,returnObserveMethods:true,proxyMethods:false},e=this.read(b,d);if(arguments.length===2){var h=b.lastIndexOf("."),l=this.read(h!==-1?b.substring(0,h):".",d).value;h!==-1&&(b=b.substring(h+1,b.length));a.compute.set(l,b,c,d)}return e.value}),add:function(a){return a!==this._context?new this.constructor(a,this):this},computeData:function(a,c){return b(this,a,c)},compute:function(a,b){return this.computeData(a,b).compute},read:function(b,c){var d;if(b.substr(0,2)==="./"){d=true;
b=b.substr(2)}else{if(b.substr(0,3)==="../")return this._parent.read(b.substr(3),c);if(b==="..")return{value:this._parent._context};if(b==="."||b==="this")return{value:this._context}}for(var h=b.indexOf("\\.")===-1?b.split("."):e(b),k,l=this,n,o=[],t=-1,s,q,m,r;l;){k=l._context;if(k!==null&&(typeof k==="object"||typeof k==="function")){k=a.compute.read(k,h,a.simpleExtend({foundObservable:function(a,b){m=a;r=h.slice(b)},earlyExit:function(b,c){if(c>t){n=m;o=r;t=c;q=l;s=a.__clearReading()}},executeAnonymousFunctions:true},
c));if(k.value!==void 0)return{scope:l,rootObserve:m,value:k.value,reads:r}}a.__clearReading();l=d?null:l._parent}if(n){a.__setReading(s);return{scope:q,rootObserve:n,reads:o,value:void 0}}return{names:h,value:void 0}}});return a.view.Scope=h});
define("can/view/scanner",["can/view/view","can/view/elements","can/view/callbacks/callbacks"],function(a,b,c){var d=/(\r|\n)+/g,e=/\//,h=function(a){return a.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split("\t").join("\\t")},g=function(a,c,d){if(a)return a;for(;d<c.length;){if("<"===c[d]&&!e.test(c[d+1]))return b.reverseTagMap[c[d+1]]||"span";d++}return""},f=function(a){eval(a)},i=/([^\s]+)[\s]*=[\s]*$/,j=null,k=null,l=null,n=null,o=function(){var a=l.match(i);return a&&
a[1]},t=function(){return k?"'"+o()+"'":j?1:0},s;a.view.Scanner=s=function(b){a.extend(this,{text:{},tokens:[]},b);this.text.options=this.text.options||"";this.tokenReg=[];this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"};this.tokenComplex=[];this.tokenMap={};for(var b=0,c;c=this.tokens[b];b++)c[2]?(this.tokenReg.push(c[2]),this.tokenComplex.push({abbr:c[1],re:RegExp(c[2]),rescan:c[3]})):(this.tokenReg.push(c[1]),this.tokenSimple[c[1]]=c[0]),this.tokenMap[c[0]]=c[1];this.tokenReg=RegExp("("+this.tokenReg.slice(0).concat(["<",
">",'"',"'"]).join("|")+")","g")};s.prototype={helpers:[],scan:function(a,e){var r=[],s=0,w=this.tokenSimple,y=this.tokenComplex,a=a.replace(d,"\n");this.transform&&(a=this.transform(a));a.replace(this.tokenReg,function(b,c){var d=arguments[arguments.length-2];d>s&&r.push(a.substring(s,d));if(w[b])r.push(b);else for(var e=0,f;f=y[e];e++)if(f.re.test(b)){r.push(f.abbr);f.rescan&&r.push(f.rescan(c));break}s=d+c.length});s<a.length&&r.push(a.substr(s));var v="",z=["var ___v1ew = [];"+(this.text.start||
"")],E=function(a,b){z.push("___v1ew.push(\n",'"',h(a),'"'+(b||"")+");")},H=[],C,N=null,T=!1,K=[],G=[],B="",W=function(){B=G.pop()+G.length},J="",Q=[],X=!1,S=!1,V=0,D,I=this.tokenMap,O;for(j=k=l=null;void 0!==(D=r[V++]);){if(null===N)switch(D){case I.left:case I.escapeLeft:case I.returnLeft:T=j&&1;case I.commentLeft:N=D;v.length&&E(v);v="";break;case I.escapeFull:T=j&&1;n=1;N=I.escapeLeft;v.length&&E(v);n=r[V++];v=n.content||n;n.before&&E(n.before);r.splice(V,0,I.right);break;case I.commentFull:break;
case I.templateLeft:v+=I.left;break;case "<":0!==r[V].indexOf("!--")&&(j=1,T=0);v+=D;break;case ">":j=0;C="/"===v.substr(v.length-1)||"--"===v.substr(v.length-2);O="";K.length&&(O="attrs: ['"+K.join("','")+"'], ",K=[]);J+G.length!==B&&J===G[G.length-1]?(C&&(v=v.substr(0,v.length-1)),z.push("___v1ew.push(\n",'"',h(v),'"',",can.view.pending({tagName:'"+J+"',"+O+"scope: "+(this.text.scope||"this")+this.text.options),C?(z.push("}));"),v="/>",W()):"<"===r[V]&&r[V+1]==="/"+J?(z.push("}));"),v=D,W()):(z.push(",subtemplate: function("+
this.text.argNames+"){\nvar ___v1ew = [];"+(this.text.start||"")),v="")):T||!X&&b.tagToContentPropMap[Q[Q.length-1]]||O?(T=",can.view.pending({"+O+"scope: "+(this.text.scope||"this")+this.text.options+'}),"',C?E(v.substr(0,v.length-1),T+'/>"'):E(v,T+'>"'),v="",T=0):v+=D;if(C||X)Q.pop(),J=Q[Q.length-1],X=!1;K=[];break;case "'":case '"':if(j)if(k&&k===D){if(k=null,O=o(),c.attr(O)&&K.push(O),S){v+=D;E(v);z.push("return ___v1ew.join('')","}));\n");v="";S=!1;break}}else if(null===k&&(k=D,l=C,O=o(),"img"===
J&&"src"===O||"style"===O)){E(v.replace(i,""));v="";S=!0;z.push("___v1ew.push(\n","can.view.txt(2,'"+g(J,r,V)+"',"+t()+",this,function(){","var ___v1ew = [];");E(O+"="+D);break}default:if("<"===C){J="!--"===D.substr(0,3)?"!--":D.split(/\s/)[0];C=!1;var ia;0===J.indexOf("/")&&(C=!0,ia=J.substr(1));if(C){if(Q[Q.length-1]===ia&&(J=ia,X=!0),G[G.length-1]===ia)E(v.substr(0,v.length-1)),z.push("return ___v1ew.join('')}}) );"),v="><",W()}else J.lastIndexOf("/")===J.length-1&&(J=J.substr(0,J.length-1)),"!--"!==
J&&c.tag(J)&&("content"===J&&b.tagMap[Q[Q.length-1]]&&(D=D.replace("content",b.tagMap[Q[Q.length-1]])),G.push(J)),Q.push(J)}v+=D}else switch(D){case I.right:case I.returnRight:switch(N){case I.left:C=--v.split("{").length- --v.split("}").length;1===C?(z.push("___v1ew.push(\n","can.view.txt(0,'"+g(J,r,V)+"',"+t()+",this,function(){","var ___v1ew = [];",v),H.push({before:"",after:"return ___v1ew.join('')}));\n"})):(s=H.length&&-1===C?H.pop():{after:";"},s.before&&z.push(s.before),z.push(v,";",s.after));
break;case I.escapeLeft:case I.returnLeft:(C=--v.split("{").length- --v.split("}").length)&&H.push({before:"return ___v1ew.join('')",after:"}));\n"});N=N===I.escapeLeft?1:0;O={insert:"___v1ew.push(\n",tagName:g(J,r,V),status:t(),specialAttribute:S};for(var M=0;M<this.helpers.length;M++){var la=this.helpers[M];if(la.name.test(v)){v=la.fn(v,O);la.name.source===/^>[\s]*\w*/.source&&(N=0);break}}"object"===typeof v?v.startTxt&&v.end&&S?z.push("___v1ew.push(\n","can.view.toStr( ",v.content,"() ) );"):
(v.startTxt?z.push("___v1ew.push(\n","can.view.txt(\n"+("string"===typeof t()||(null!=v.escaped?v.escaped:N))+",\n'"+J+"',\n"+t()+",\nthis,\n"):v.startOnlyTxt&&z.push("___v1ew.push(\n","can.view.onlytxt(this,\n"),z.push(v.content),v.end&&z.push("));")):S?z.push("___v1ew.push(\n",v,");"):z.push("___v1ew.push(\n","can.view.txt(\n"+("string"===typeof t()||N)+",\n'"+J+"',\n"+t()+",\nthis,\nfunction(){ "+(this.text.escape||"")+"return ",v,C?"var ___v1ew = [];":"}));\n");n&&n.after&&n.after.length&&(E(n.after.length),
n=null)}N=null;v="";break;case I.templateLeft:v+=I.left;break;default:v+=D}C=D}v.length&&E(v);z.push(";");v={out:(this.text.outStart||"")+z.join("")+" return ___v1ew.join('')"+(this.text.outEnd||"")};f.call(v,"this.fn = (function("+this.text.argNames+"){"+v.out+"});\r\n//# sourceURL="+e+".js");return v}};a.view.pending=function(b){var d=a.view.getHooks();return a.view.hook(function(e){a.each(d,function(a){a(e)});b.templateType="legacy";b.tagName&&c.tagHandler(e,b.tagName,b);a.each(b&&b.attrs||[],
function(a){b.attributeName=a;(a=c.attr(a))&&a(e,b)})})};a.view.tag("content",function(a,b){return b.scope});return a.view.Scanner=s});
define("can/view/node_lists/node_lists",["can/util/util","can/view/elements"],function(a){var b=!0;try{document.createTextNode("")._=0}catch(c){b=!1}var d={},e={},h="ejs_"+Math.random(),g=0,f=function(a,c){var d=c||e,f=i(a,d);if(f)return f;if(b||3!==a.nodeType)return++g,a[h]=(a.nodeName?"element_":"obj_")+g;++g;d["text_"+g]=a;return"text_"+g},i=function(a,c){if(b||3!==a.nodeType)return a[h];for(var d in c)if(c[d]===a)return d},j=[].splice,k=[].push,l=function(a){for(var b=0,c=0,d=a.length;c<d;c++){var e=
a[c];e.nodeType?b++:b+=l(e)}return b},n={id:f,update:function(b,c){var d=n.unregisterChildren(b),c=a.makeArray(c);j.apply(b,[0,b.length].concat(c));b.replacements?n.nestReplacements(b):n.nestList(b);return d},nestReplacements:function(a){for(var b=0,c={},d=a.replacements,e={},g=0,h=d.length;g<h;g++){var j=n.first(d[g]);e[f(j,c)]=d[g]}for(d=a.replacements.length;b<a.length&&d;){if(g=e[i(a[b],c)])a.splice(b,l(g),g),d--;b++}a.replacements=[]},nestList:function(a){for(var b=0;b<a.length;){var c=a[b],
e=d[f(c)];e?e!==a&&a.splice(b,l(e),e):d[f(c)]=a;b++}},last:function(a){a=a[a.length-1];return a.nodeType?a:n.last(a)},first:function(a){a=a[0];return a.nodeType?a:n.first(a)},flatten:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.nodeType?b.push(d):b.push.apply(b,n.flatten(d))}return b},register:function(a,b,c){a.unregistered=b;a.parentList=c;!0===c?a.replacements=[]:c?(c.replacements.push(a),a.replacements=[]):n.nestList(a);return a},unregisterChildren:function(b){var c=[];a.each(b,function(a){a.nodeType?
(b.replacements||delete d[f(a)],c.push(a)):k.apply(c,n.unregister(a))});return c},unregister:function(a){var b=n.unregisterChildren(a);if(a.unregistered){var c=a.unregistered;delete a.unregistered;delete a.replacements;c()}return b},nodeMap:d};return a.view.nodeLists=n});
define("can/view/parser/parser",["can/view/view"],function(a){function b(a){for(var b={},a=a.split(","),c=0;c<a.length;c++)b[a[c]]=!0;return b}function c(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];b[e.tokenType].apply(b,e.args)}return a}var d=RegExp("^<([-:A-Za-z0-9_]+)((?:\\s*(?:(?:(?:[a-zA-Z_:][-:A-Za-z0-9_:.]*)?(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)|(?:\\{\\{[^\\}]*\\}\\}\\}?)+))*)\\s*(\\/?)>"),e=/^<\/([-:A-Za-z0-9_]+)[^>]*>/,h=RegExp("(?:(?:([a-zA-Z_:][-:A-Za-z0-9_:.]*)|\\{\\{([^\\}]*)\\}\\}\\}?)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?)",
"g"),g=RegExp("\\{\\{([^\\}]*)\\}\\}\\}?","g"),f=/<|\{\{/,i=b("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),j=b("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),k=b("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),
l=b("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),n=b("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),o=b("script,style"),t="start end close attrStart attrEnd attrValue chars comment special done".split(" "),s=function(){},q=function(b,h,n){function w(a,b,c,d){b=b.toLowerCase();if(j[b])for(;C.last()&&k[C.last()];)y("",C.last());l[b]&&C.last()===b&&y("",b);d=i[b]||!!d;h.start(b,d);d||C.push(b);q.parseAttrs(c,h);h.end(b,d)}function y(a,
b){var c;if(b)for(c=C.length-1;0<=c&&C[c]!==b;c--);else c=0;if(0<=c){for(var d=C.length-1;d>=c;d--)h.close&&h.close(C[d]);C.length=c}}function v(a,b){h.special&&h.special(b)}if("object"===typeof b)return c(b,h);var z=[],h=h||{};n&&a.each(t,function(b){var c=h[b]||s;h[b]=function(){!1!==c.apply(this,arguments)&&z.push({tokenType:b,args:a.makeArray(arguments)})}});var E,H,C=[],n=b;for(C.last=function(){return this[this.length-1]};b;){H=!0;if(!C.last()||!o[C.last()]){if(0===b.indexOf("<\!--"))E=b.indexOf("--\>"),
0<=E&&(h.comment&&h.comment(b.substring(4,E)),b=b.substring(E+3),H=!1);else if(0===b.indexOf("</")){if(E=b.match(e))b=b.substring(E[0].length),E[0].replace(e,y),H=!1}else if(0===b.indexOf("<")){if(E=b.match(d))b=b.substring(E[0].length),E[0].replace(d,w),H=!1}else if(0===b.indexOf("{{")&&(E=b.match(g)))b=b.substring(E[0].length),E[0].replace(g,v);H&&(E=b.search(f),H=0>E?b:b.substring(0,E),b=0>E?"":b.substring(E),h.chars&&H&&h.chars(H))}else b=b.replace(RegExp("([\\s\\S]*?)</"+C.last()+"[^>]*>"),function(a,
b){b=b.replace(/<\!--([\s\S]*?)--\>|<!\[CDATA\[([\s\S]*?)]]\>/g,"$1$2");h.chars&&h.chars(b);return""}),y("",C.last());if(b===n)throw"Parse Error: "+b;n=b}y();h.done();return z};q.parseAttrs=function(a,b){(null!=a?a:"").replace(h,function(a,c,d,e,f,h){d&&b.special(d);if(c||e||f||h){a=e?e:f?f:h?h:n[c.toLowerCase()]?c:"";b.attrStart(c||"");e=g.lastIndex=0;for(d=g.exec(a);d;)e=a.substring(e,g.lastIndex-d[0].length),e.length&&b.attrValue(e),b.special(d[1]),e=g.lastIndex,d=g.exec(a);(e=a.substr(e,a.length))&&
b.attrValue(e);b.attrEnd(c||"")}})};return a.view.parser=q});
define("can/view/live/live",["can/util/util","can/view/elements","can/view/view","can/view/node_lists/node_lists","can/view/parser/parser"],function(a,b,c,d,e){var b=b||a.view.elements,d=d||a.view.NodeLists,e=e||a.view.parser,h=function(b,c,d){var e=!1,f=function(){e||(e=!0,d(g),a.unbind.call(b,"removed",f));return!0},g={teardownCheck:function(a){return a?!1:f()}};a.bind.call(b,"removed",f);c(g);return g},g=function(a,b,c){return h(a,function(){b.bind("change",c)},function(a){b.unbind("change",c);
a.nodeList&&d.unregister(a.nodeList)})},f=function(a){var b={},c;e.parseAttrs(a,{attrStart:function(a){b[a]="";c=a},attrValue:function(a){b[c]+=a},attrEnd:function(){}});return b},i=[].splice,j={list:function(c,e,f,g,k,l){var r=l||[c],u=[],w=!1,y=!1,v=function(c,e,h){if(w){var j=document.createDocumentFragment(),k=[],o=[];a.each(e,function(b,c){var e=[];l&&d.register(e,null,!0);var i=a.compute(c+h),n=f.call(g,b,i,e),q="string"===typeof n,n=a.frag(n),n=q?a.view.hookup(n):n,q=a.makeArray(n.childNodes);
l?(d.update(e,q),k.push(e)):k.push(d.register(q));j.appendChild(n);o.push(i)});c=h+1;r[c]?(e=d.first(r[c]),a.insertBefore(e.parentNode,j,e)):b.after(1===c?[H]:[d.last(r[c-1])],j);i.apply(r,[c,0].concat(k));i.apply(u,[h,0].concat(o));c=h+o.length;for(e=u.length;c<e;c++)u[c](c)}},z=function(b,c,e,f,g){if(w&&(f||!K.teardownCheck(H.parentNode))){0>e&&(e=u.length+e);var b=r.splice(e+1,c.length),h=[];a.each(b,function(a){a=d.unregister(a);[].push.apply(h,a)});u.splice(e,c.length);c=e;for(e=u.length;c<e;c++)u[c](c);
g?d.unregister(r):a.remove(a.$(h))}},E=function(b,c,e,f){w&&(e+=1,f+=1,c=r[e],b=a.frag(d.flatten(r[f])),c=f<e?d.last(c).nextSibling:d.first(c),r[0].parentNode.insertBefore(b,c),b=r[f],[].splice.apply(r,[f,1]),[].splice.apply(r,[e,0,b]))},H=document.createTextNode(""),C,N=function(a){C&&C.unbind&&C.unbind("add",v).unbind("remove",z).unbind("move",E);z({},{length:r.length-1},0,!0,a)},T=function(b,c){y||(N(),C=c||[],C.bind&&C.bind("add",v).bind("remove",z).bind("move",E),w=!0,v({},C,0),w=!1,a.batch.afterPreviousEvents(function(){w=
!0}))},k=b.getParentNode(c,k),K=h(k,function(){a.isFunction(e)&&e.bind("change",T)},function(){a.isFunction(e)&&e.unbind("change",T);N(!0)});l?(b.replace(r,H),d.update(r,[H]),l.unregistered=function(){K.teardownCheck();y=!0}):j.replace(r,H,K.teardownCheck);T({},a.isFunction(e)?e():e)},html:function(c,e,f,h){var i,f=b.getParentNode(c,f);i=g(f,e,function(a,b){d.first(j).parentNode&&k(b);i.teardownCheck(d.first(j).parentNode)});var j=h||[c],k=function(c){var e="function"===typeof c,g=c&&c.nodeType,h=
a.frag(e?"":c),i=a.makeArray(j);h.childNodes.length||h.appendChild(document.createTextNode(""));!g&&!e&&(h=a.view.hookup(h,f));i=d.update(j,h.childNodes);e&&c(h.childNodes[0]);b.replace(i,h)};i.nodeList=j;h?h.unregistered=i.teardownCheck:d.register(j,i.teardownCheck);k(e())},replace:function(c,e,f){var g=c.slice(0),h=a.frag(e);d.register(c,f);"string"===typeof e&&(h=a.view.hookup(h,c[0].parentNode));d.update(c,h.childNodes);b.replace(g,h);return c},text:function(c,e,f,h){var f=b.getParentNode(c,f),
i=g(f,e,function(b,c){"unknown"!==typeof k.nodeValue&&(k.nodeValue=a.view.toStr(c));i.teardownCheck(k.parentNode)}),k=document.createTextNode(a.view.toStr(e()));h?(h.unregistered=i.teardownCheck,i.nodeList=h,d.update(h,[k]),b.replace([c],k)):i.nodeList=j.replace([c],k,i.teardownCheck)},setAttributes:function(b,c){var d=f(c),e;for(e in d)a.attr.set(b,e,d[e])},attributes:function(c,d,e){var h={},i=function(d){var d=f(d),e;for(e in d){var g=d[e];g!==h[e]&&a.attr.set(c,e,g);delete h[e]}for(e in h)b.removeAttr(c,
e);h=d};g(c,d,function(a,b){i(b)});3<=arguments.length?h=f(e):i(d())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(c,d,e){g(c,e,function(){b.setAttr(c,d,l.render())});var f=a.$(c),h;(h=a.data(f,"hooks"))||a.data(f,"hooks",h={});var i=b.getAttr(c,d),f=i.split(j.attributePlaceholder),k=[],l;k.push(f.shift(),f.join(j.attributePlaceholder));h[d]?h[d].computes.push(e):h[d]={render:function(){var a=0;return i?i.replace(j.attributeReplace,function(){return b.contentText(l.computes[a++]())}):
b.contentText(l.computes[a++]())},computes:[e],batchNum:void 0};l=h[d];k.splice(1,0,e());b.setAttr(c,d,k.join(""))},specialAttribute:function(a,c,d){g(a,d,function(d,e){b.setAttr(a,c,l(e))});b.setAttr(a,c,l(d()))},simpleAttribute:function(a,c,d){g(a,d,function(d,e){b.setAttr(a,c,e)});b.setAttr(a,c,d())}};j.attr=j.simpleAttribute;j.attrs=j.attributes;var k=/(\r|\n)+/g,l=function(a){a=a.replace(b.attrReg,"").replace(k,"");return/^["'].*["']$/.test(a)?a.substr(1,a.length-2):a};return a.view.live=j});
define("can/view/render",["can/view/view","can/view/elements","can/view/live/live","can/util/string/string"],function(a,b,c){var d=[],e=function(a){a=b.tagMap[a]||"span";return"span"===a?"@@!!@@":"<"+a+">"+e(a)+"</"+a+">"},h=function(b,c){if("string"===typeof b)return b;if(!b&&0!==b)return"";var e=b.hookup&&function(a,c){b.hookup.call(b,a,c)}||"function"===typeof b&&b;if(e){if(c)return"<"+c+" "+a.view.hook(e)+"></"+c+">";d.push(e);return""}return""+b},g=function(b,c){return"string"===typeof b||"number"===
typeof b?a.esc(b):h(b,c)},f=!1,i=function(){},j;a.extend(a.view,{live:c,setupLists:function(){var b=a.view.lists,c;a.view.lists=function(a,b){c={list:a,renderer:b};return Math.random()};return function(){a.view.lists=b;return c}},getHooks:function(){var a=d.slice(0);j=a;d=[];return a},onlytxt:function(a,b){return g(b.call(a))},txt:function(k,l,n,o,t){var s=b.tagMap[l]||"span",q=!1,m,r,u=i,w;if(f)t=t.call(o);else{if("string"===typeof n||1===n)f=!0;q=a.view.setupLists();u=function(){r.unbind("change",
i)};r=a.compute(t,o,!1);r.bind("change",i);m=q();t=r();f=!1;q=r.computeInstance.hasDependencies}if(m)return u(),"<"+s+a.view.hook(function(a,b){c.list(a,m.list,m.renderer,o,b)})+"></"+s+">";if(!q||"function"===typeof t)return u(),(f||2===k||!k?h:g)(t,0===n&&s);l=b.tagToContentPropMap[l];if(0===n&&!l)return"<"+s+a.view.hook(k&&"object"!==typeof t?function(a,b){c.text(a,r,b);u()}:function(a,b){c.html(a,r,b);u()})+">"+e(s)+"</"+s+">";if(1===n)return d.push(function(a){c.attributes(a,r,r());u()}),r();
if(2===k)return w=n,d.push(function(a){c.specialAttribute(a,w,r);u()}),r();w=0===n?l:n;(0===n?j:d).push(function(a){c.attribute(a,w,r);u()});return c.attributePlaceholder}});return a});
define("can/view/stache/utils",["can/util/util"],function(){return{isArrayLike:function(a){return a&&a.splice&&"number"===typeof a.length},isObserveLike:function(a){return a instanceof can.Map||a&&!!a._get},emptyHandler:function(){},jsonParse:function(a){return"'"===a[0]?a.substr(1,a.length-2):"undefined"===a?void 0:can.global.JSON?JSON.parse(a):eval("("+a+")")},mixins:{last:function(){return this.stack[this.stack.length-1]},add:function(a){this.last().add(a)},subSectionDepth:function(){return this.stack.length-
1}}}});
define("can/view/stache/mustache_helpers",["can/util/util","can/view/stache/utils","can/view/live/live"],function(a,b,c){var c=c||a.view.live,d=function(c){return b.isObserveLike(c)&&b.isArrayLike(c)&&c.attr("length")?c:a.isFunction(c)?c():c},e={each:function(e,g){var f=d(e),i=[],j,k,l;if(f instanceof a.List)return function(b){var d=[b];d.expression="live.list";a.view.nodeLists.register(d,null,g.nodeList);a.view.nodeLists.update(g.nodeList,[b]);c.list(b,e,function(a,b,c){return g.fn(g.scope.add({"@index":b}).add(a),g.options,
c)},g.context,b.parentNode,d)};if(f&&b.isArrayLike(f))for(l=0;l<f.length;l++)i.push(g.fn(g.scope.add({"@index":l}).add(f[l])));else if(b.isObserveLike(f)){j=a.Map.keys(f);for(l=0;l<j.length;l++)k=j[l],i.push(g.fn(g.scope.add({"@key":k}).add(f[k])))}else if(f instanceof Object)for(k in f)i.push(g.fn(g.scope.add({"@key":k}).add(f[k])));return i},"@index":function(b,c){c||(c=b,b=0);var d=c.scope.attr("@index");return""+((a.isFunction(d)?d():d)+b)},"if":function(b,c){return(a.isFunction(b)?a.compute.truthy(b)():
d(b))?c.fn(c.scope||this):c.inverse(c.scope||this)},is:function(){var b,c,e=arguments[arguments.length-1];if(0>=arguments.length-2)return e.inverse();for(var i=0;i<arguments.length-1;i++){c=d(arguments[i]);c=a.isFunction(c)?c():c;if(0<i&&c!==b)return e.inverse();b=c}return e.fn()},eq:function(){return e.is.apply(this,arguments)},unless:function(b,c){return e["if"].apply(this,[a.isFunction(b)?a.compute(function(){return!b()}):!b,c])},"with":function(a,b){if(d(a))return b.fn(a)},log:function(a,b){"undefined"!==
typeof console&&console.log&&(b?console.log(a,b.context):console.log(a.context))},data:function(b){var c=2===arguments.length?this:arguments[1];return function(d){a.data(a.$(d),b,c||this.context)}}};return{registerHelper:function(a,b){e[a]=b},getHelper:function(a,b){var c=b.attr("helpers."+a);c||(c=e[a]);if(c)return{fn:c}}}});
define("can/view/stache/mustache_core","can/util/util can/view/stache/utils can/view/stache/mustache_helpers can/view/live/live can/view/elements can/view/scope/scope can/view/node_lists/node_lists".split(" "),function(a,b,c,d,e,h,g){var d=d||a.view.live,e=e||a.view.elements,g=g||a.view.nodeLists,f=/((([^'"\s]+?=)?('.*?'|".*?"))|.*?)\s/g,i=/^(?:(?:('.*?'|".*?")|([0-9]+\.?[0-9]*|true|false|null|undefined))|(?:(.+?)=(?:(?:('.*?'|".*?")|([0-9]+\.?[0-9]*|true|false|null|undefined))|(.+))))$/,j=/(?:(?:^|(\r?)\n)(\s*)(\{\{([^\}]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([^\}]*)\}\}\}?)/g,
k=function(a){return a&&typeof a.get==="string"},l=function(a,b,c,d){for(var e=document.createDocumentFragment(),f=0,g=a.length;f<g;f++){var h=c.fn(b?a.attr(""+f):a[f],d);h&&e.appendChild(typeof h==="string"?document.createTextNode(h):h)}return e},n=function(a,b,c,d){for(var e="",f=0,g=a.length;f<g;f++)e=e+c.fn(b?a.attr(""+f):a[f],d);return e},o=function(b,c,d){b=c.computeData(b,{isArgument:d,args:[c.attr("."),c]});a.compute.temporarilyBind(b.compute);return b},t=function(a,b){var c=o(a,b,true);return c.compute.computeInstance.hasDependencies?
c.compute:c.initialValue},s=function(a,b,c,d,e,f){if(e)a.fn=q(e,b,c,d);if(f)a.inverse=q(f,b,c,d)},q=function(b,c,d,e){return a.__notObserve(function(f,g,h){f!==void 0&&!(f instanceof a.view.Scope)&&(f=c.add(f));g!==void 0&&!(g instanceof m.Options)&&(g=d.add(g));return b(f||c,g||d,h||e)})},m={expressionData:function(c){var d=[],e={},g=0;(a.trim(c)+" ").replace(f,function(a,c){var f;g&&(f=c.match(i))?f[1]||f[2]?d.push(b.jsonParse(f[1]||f[2])):e[f[3]]=f[6]?{get:f[6]}:b.jsonParse(f[4]||f[5]):d.push({get:c});
g++});return{name:d.shift(),args:d,hash:e}},makeEvaluator:function(d,e,f,g,h,i,j,m){var q=[],r={},u={fn:function(){},inverse:function(){}},w=d.attr("."),J=h.name,Q,X=h.args.length||!a.isEmptyObject(h.hash),S;S=0;for(var V=h.args.length;S<V;S++){var D=h.args[S];D&&k(D)?q.push(t(D.get,d,true)):q.push(D)}for(var I in h.hash)r[I]=k(h.hash[I])?t(h.hash[I].get,d):h.hash[I];if(k(J)){if(X){Q=c.getHelper(J.get,e);!Q&&typeof w[J.get]==="function"&&(Q={fn:w[J.get]})}if(!Q){V=J.get;D=o(J.get,d,false);I=D.compute;
S=D.initialValue;J=D.compute.computeInstance.hasDependencies?I:S;!X&&S===void 0?Q=c.getHelper(V,e):typeof S==="function"&&(Q={fn:S})}}if(g==="^"){X=i;i=j;j=X}if(Q){s(u,d,e,f,i,j);a.simpleExtend(u,{context:w,scope:d,contexts:d,hash:r,nodeList:f,exprData:h});q.push(u);f=function(){return Q.fn.apply(w,q)||""};f.bindOnce=false;return f}if(g){if(g==="#"||g==="^"){s(u,d,e,f,i,j);f=function(){var c;c=a.isFunction(J)&&J.isComputed?J():J;if(b.isArrayLike(c)){var f=b.isObserveLike(c);return(f?c.attr("length"):
c.length)?(m?n:l)(c,f,u,e):u.inverse(d,e)}return c?u.fn(c||d,e):u.inverse(d,e)};f.bindOnce=false;return f}}else return J&&J.isComputed?J:function(){return""+(J!=null?J:"")}},makeLiveBindingPartialRenderer:function(b,c){b=a.trim(b);return function(e,f,h){var i=[this];i.expression=">"+b;g.register(i,null,c.directlyNested?h||true:true);h=a.compute(function(){var c=b,d=f.attr("partials."+c);if(d)c=d.render?d.render(e,f):d(e,f);else{(d=e.read(c,{isArgument:true,returnObserveMethods:true,proxyMethods:false}).value)&&
(c=d);c=a.view.render(c,e,f)}return a.frag(c)});d.html(this,h,this.parentNode,i)}},makeStringBranchRenderer:function(a,b){var c=u(b),d=a+b;return function(b,e,f,g){var h=b.__cache[d];if(a||!h){h=r(b,e,null,a,c,f,g,true);a||(b.__cache[d]=h)}b=h();return b==null?"":""+b}},makeLiveBindingBranchRenderer:function(b,c,f){var h=u(c);return function(i,j,k,l,m){var o=[this];o.expression=c;g.register(o,null,f.directlyNested?k||true:true);i=r(i,j,o,b,h,l,m,f.tag);i=a.compute(i,null,false,i.bindOnce===false?
false:true);i.bind("change",a.k);j=i();if(typeof j==="function"){o=a.__clearReading();j(this);a.__setReading(o)}else i.computeInstance.hasDependencies?f.attr?d.simpleAttribute(this,f.attr,i):f.tag?d.attributes(this,i):f.text&&typeof j!=="object"?d.text(this,i,this.parentNode,o):d.html(this,i,this.parentNode,o):f.attr?a.attr.set(this,f.attr,j):f.tag?d.setAttributes(this,j):f.text&&typeof j==="string"?this.nodeValue=j:j&&e.replace([this],a.frag(j));i.unbind("change",a.k)}},splitModeFromExpression:function(b,
c){var b=a.trim(b),d=b.charAt(0);"#/{&^>!".indexOf(d)>=0?b=a.trim(b.substr(1)):d=null;d==="{"&&c.node&&(d=null);return{mode:d,expression:b}},cleanLineEndings:function(a){return a.replace(j,function(a,b,c,d,e,f,g,h,i,j){f=f||"";b=b||"";c=c||"";e=w(e||i,{});return h||">{".indexOf(e.mode)>=0?a:"^#!/".indexOf(e.mode)>=0?d+(j!==0&&g.length?b+"\n":""):c+d+f+(c.length||j!==0?b+"\n":"")})},Options:a.view.Scope.extend({init:function(b,c){!b.helpers&&!b.partials&&!b.tags&&(b={helpers:b});a.view.Scope.prototype.init.apply(this,
arguments)}})},r=m.makeEvaluator,u=m.expressionData,w=m.splitModeFromExpression;return m});
define("can/view/bindings/bindings",["can/util/util","can/view/stache/mustache_core","can/view/callbacks/callbacks","can/control/control","can/view/scope/scope"],function(a,b){var c=function(){var a={"":!0,"true":!0,"false":!1},b=function(b){if(b&&b.getAttribute)return b=b.getAttribute("contenteditable"),a[b]};return function(a){var c=b(a);return"boolean"===typeof c?c:!!b(a.parentNode)}}(),d=function(a){return"{"===a[0]&&"}"===a[a.length-1]?a.substr(1,a.length-2):a};a.view.attr("can-value",function(b,
e){var l=a.trim(d(b.getAttribute("can-value"))),l=e.scope.computeData(l,{args:[]}).compute,n,o;"input"===b.nodeName.toLowerCase()&&("checkbox"===b.type&&(n=a.attr.has(b,"can-true-value")?b.getAttribute("can-true-value"):!0,o=a.attr.has(b,"can-false-value")?b.getAttribute("can-false-value"):!1),"checkbox"===b.type||"radio"===b.type)?new g(b,{value:l,trueValue:n,falseValue:o}):"select"===b.nodeName.toLowerCase()&&b.multiple?new f(b,{value:l}):c(b)?new i(b,{value:l}):new h(b,{value:l})});var e={enter:function(a,
b,c){return{event:"keyup",handler:function(a){if(13===a.keyCode)return c.call(this,a)}}}};a.view.attr(/can-[\w\.]+/,function(c,f){var g=f.attributeName,h=g.substr(4),i=function(e){var h=c.getAttribute(g);if(h){var h=b.expressionData(d(h)),i=f.scope.read(h.name.get,{returnObserveMethods:!0,isArgument:!0,executeAnonymousFunctions:!0}),m=[],o=a.$(this),n=a.viewModel(o[0]),w=f.scope.add({"@element":o,"@event":e,"@viewModel":n,"@scope":f.scope,"@context":f.scope._context});if(!a.isEmptyObject(h.hash)){var y=
{};a.each(h.hash,function(a,b){if(a&&a.hasOwnProperty("get")){var c=!a.get.indexOf("@")?w:f.scope;y[b]=c.read(a.get,{}).value}else y[b]=a});m.unshift(y)}if(h.args.length)for(var v=h.args.length-1;0<=v;v--)if((n=h.args[v])&&n.hasOwnProperty("get")){var z=!n.get.indexOf("@")?w:f.scope;m.unshift(z.read(n.get,{}).value)}else m.unshift(n);m.length||(m=[f.scope._context,o].concat(a.makeArray(arguments)));return i.value.apply(i.parent,m)}};e[h]&&(h=e[h](f,c,i),i=h.handler,h=h.event);a.bind.call(c,h,i)});
var h=a.Control.extend({init:function(){"SELECT"===this.element[0].nodeName.toUpperCase()?setTimeout(a.proxy(this.set,this),1):this.set()},"{value} change":"set",set:function(){if(this.element){var a=this.options.value();this.element[0].value=null==a?"":a}},change:function(){if(this.element){var a=this.element[0];this.options.value(a.value);var b=this.options.value();a.value!==b&&(a.value=b)}}}),g=a.Control.extend({init:function(){this.isCheckbox="checkbox"===this.element[0].type.toLowerCase();this.check()},
"{value} change":"check",check:function(){if(this.isCheckbox){var b=this.options.trueValue||!0;this.element[0].checked=this.options.value()==b}else b=this.options.value()==this.element[0].value?"set":"remove",a.attr[b](this.element[0],"checked",!0)},change:function(){this.isCheckbox?this.options.value(this.element[0].checked?this.options.trueValue:this.options.falseValue):this.element[0].checked&&this.options.value(this.element[0].value)}}),f=h.extend({init:function(){this.delimiter=";";setTimeout(a.proxy(this.set,
this),1)},set:function(){var b=this.options.value();"string"===typeof b?(b=b.split(this.delimiter),this.isString=!0):b&&(b=a.makeArray(b));var c={};a.each(b,function(a){c[a]=!0});a.each(this.element[0].childNodes,function(a){a.value&&(a.selected=!!c[a.value])})},get:function(){var b=[];a.each(this.element[0].childNodes,function(a){a.selected&&a.value&&b.push(a.value)});return b},change:function(){var b=this.get(),c=this.options.value();this.isString||"string"===typeof c?(this.isString=!0,this.options.value(b.join(this.delimiter))):
c instanceof a.List?c.attr(b,!0):this.options.value(b)}}),i=a.Control.extend({init:function(){this.set();this.on("blur","setValue")},"{value} change":"set",set:function(){var a=this.options.value();this.element[0].innerHTML="undefined"===typeof a?"":a},setValue:function(){this.options.value(this.element[0].innerHTML)}})});
define("can/view/mustache/mustache","can/util/util can/view/scope/scope can/view/view can/view/scanner can/compute/compute can/view/render can/view/bindings/bindings".split(" "),function(a){a.view.ext=".mustache";var b=/((([^'"\s]+?=)?('.*?'|".*?"))|.*?)\s/g,c=/^(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false|null|undefined)|((.+?)=(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false)|(.+))))$/,d=function(a){return a&&typeof a.get==="string"},e=function(b){return b instanceof a.Map||b&&!!b._get},h=function(a){return a&&
a.splice&&typeof a.length==="number"},g=function(b,c,d){return function(e,f){e!==void 0&&!(e instanceof a.view.Scope)&&(e=c.add(e));f!==void 0&&!(f instanceof a.view.Options)&&(f=d.add(f));return b(e||c,f||d)}},f=function(b){if(this.constructor!==f){var c=new f(b);return function(a,b){return c.render(a,b)}}if(typeof b==="function")this.template={fn:b};else{a.extend(this,b);this.template=this.scanner.scan(this.text,this.name)}};a.Mustache=a.global.Mustache=f;f.prototype.render=function(b,c){b instanceof
a.view.Scope||(b=new a.view.Scope(b||{}));c instanceof a.view.Options||(c=new a.view.Options(c||{}));c=c||{};return this.template.fn.call(b,b,c)};a.extend(f.prototype,{scanner:new a.view.Scanner({text:{start:"",scope:"scope",options:",options: options",argNames:"scope,options"},tokens:[["returnLeft","{{{","{{[{&]"],["commentFull","{{!}}","^[\\s\\t]*{{!.+?}}\\n"],["commentLeft","{{!","(\\n[\\s\\t]*{{!|{{!)"],["escapeFull","{{}}","(^[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}$)",
function(a){return{before:/^\n.+?\n$/.test(a)?"\n":"",content:a.match(/\{\{(.+?)\}\}/)[1]||""}}],["escapeLeft","{{"],["returnRight","}}}"],["right","}}"]],helpers:[{name:/^>[\s]*\w*/,fn:function(b){return"can.Mustache.renderPartial('"+a.trim(b.replace(/^>\s?/,"")).replace(/["|']/g,"")+"',scope,options)"}},{name:/^\s*data\s/,fn:function(a){return"can.proxy(function(__){can.data(can.$(__),'"+a.match(/["|'](.*)["|']/)[1]+"', this.attr('.')); }, scope)"}},{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(a){a=
a.match(/\s*\(([\$\w]+)\)\s*->([^\n]*)/);return"can.proxy(function(__){var "+a[1]+"=can.$(__);with(scope.attr('.')){"+a[2]+"}}, this);"}},{name:/^.*$/,fn:function(d,e){var f=false,g={content:"",startTxt:false,startOnlyTxt:false,end:false},d=a.trim(d);if(d.length&&(f=d.match(/^([#^/]|else$)/))){f=f[0];switch(f){case "#":case "^":if(e.specialAttribute)g.startOnlyTxt=true;else{g.startTxt=true;g.escaped=0}break;case "/":g.end=true;g.content=g.content+'return ___v1ew.join("");}}])';return g}d=d.substring(1)}if(f!==
"else"){var h=[],i=[],j=0,m;g.content=g.content+("can.Mustache.txt(\n"+(e.specialAttribute?"{scope:scope,options:options, special: true}":"{scope:scope,options:options}")+",\n"+(f?'"'+f+'"':"null")+",");(a.trim(d)+" ").replace(b,function(a,b){j&&(m=b.match(c))?m[2]?h.push(m[0]):i.push(m[4]+":"+(m[6]?m[6]:'{get:"'+m[5].replace(/"/g,'\\"')+'"}')):h.push('{get:"'+b.replace(/"/g,'\\"')+'"}');j++});g.content=g.content+h.join(",");if(i.length)g.content=g.content+(",{___h4sh:{"+i.join(",")+"}}")}if(f&&f!==
"else")g.content=g.content+",[\n\n";switch(f){case "^":case "#":g.content=g.content+"{fn:function(scope,options){var ___v1ew = [];";break;case "else":g.content=g.content+'return ___v1ew.join("");}},\n{inverse:function(scope,options){\nvar ___v1ew = [];';break;default:g.content=g.content+")"}if(!f){g.startTxt=true;g.end=true}return g}}]})});for(var i=a.view.Scanner.prototype.helpers,j=0;j<i.length;j++)f.prototype.scanner.helpers.unshift(i[j]);f.txt=function(b,c,i){for(var j=b.scope,t=b.options,s=[],
q={fn:function(){},inverse:function(){}},m,r=j.attr("."),u=true,w,y=3;y<arguments.length;y++){var v=arguments[y];if(c&&a.isArray(v))q=a.extend.apply(a,[q].concat(v));else if(v&&v.___h4sh){m=v.___h4sh;for(var z in m)d(m[z])&&(m[z]=f.get(m[z].get,b,false,true))}else v&&d(v)?s.push(f.get(v.get,b,false,true,true)):s.push(v)}if(d(i)){u=i.get;i=f.get(i.get,b,s.length,false);u=u===i}q.fn=g(q.fn,j,t);q.inverse=g(q.inverse,j,t);if(c==="^"){y=q.fn;q.fn=q.inverse;q.inverse=y}if(w=u&&typeof i==="string"&&f.getHelper(i,
t)||a.isFunction(i)&&!i.isComputed&&{fn:i}){a.extend(q,{context:r,scope:j,contexts:j,hash:m});s.push(q);return function(){return w.fn.apply(r,s)||""}}return function(){var b;b=a.isFunction(i)&&i.isComputed?i():i;var d=s.length?s:[b],f=true,g=[],j,k,m;if(c)for(j=0;j<d.length;j++){m=d[j];k=typeof m!=="undefined"&&e(m);h(m)?c==="#"?f=f&&!!(k?m.attr("length"):m.length):c==="^"&&(f=f&&!(k?m.attr("length"):m.length)):f=c==="#"?f&&!!m:c==="^"?f&&!m:f}if(f){if(c==="#"){if(h(b)){d=e(b);for(j=0;j<b.length;j++)g.push(q.fn(d?
b.attr(""+j):b[j]));return g.join("")}return q.fn(b||{})||""}return c==="^"?q.inverse(b||{})||"":""+(b!=null?b:"")}return""}};f.get=function(b,c,d,e,g){var h=c.scope.attr("."),i=c.options||{};if(d){if(f.getHelper(b,i))return b;if(c.scope&&a.isFunction(h[b]))return h[b]}d=c.scope.computeData(b,{isArgument:e,args:[h,c.scope]});e=d.compute;a.compute.temporarilyBind(e);h=d.initialValue;f.getHelper(b,i);return!g&&(h===void 0||d.scope!==c.scope)&&f.getHelper(b,i)?b:e.computeInstance.hasDependencies?e:h};
f.resolve=function(b){return e(b)&&h(b)&&b.attr("length")?b:a.isFunction(b)?b():b};a.view.Options=a.view.Scope.extend({init:function(b,c){!b.helpers&&!b.partials&&!b.tags&&(b={helpers:b});a.view.Scope.prototype.init.apply(this,arguments)}});f._helpers={};f.registerHelper=function(a,b){this._helpers[a]={name:a,fn:b}};f.getHelper=function(a,b){var c;b&&(c=b.attr("helpers."+a));return c?{fn:c}:this._helpers[a]};f.render=function(b,c,d){if(!a.view.cached[b]){var e=a.__clearReading(),f=c.attr(b);f&&(b=
f);a.__setReading(e)}return a.view.render(b,c,d)};f.safeString=function(a){return{toString:function(){return a}}};f.renderPartial=function(b,c,d){var e=d.attr("partials."+b);return e?e.render?e.render(c,d):e(c,d):a.Mustache.render(b,c,d)};a.each({"if":function(b,c){return(a.isFunction(b)?a.compute.truthy(b)():f.resolve(b))?c.fn(c.contexts||this):c.inverse(c.contexts||this)},is:function(){var b,c,d=arguments[arguments.length-1];if(arguments.length-2<=0)return d.inverse();for(var e=0;e<arguments.length-
1;e++){c=f.resolve(arguments[e]);c=a.isFunction(c)?c():c;if(e>0&&c!==b)return d.inverse();b=c}return d.fn()},eq:function(){return f._helpers.is.fn.apply(this,arguments)},unless:function(b,c){return f._helpers["if"].fn.apply(this,[a.isFunction(b)?a.compute(function(){return!b()}):!b,c])},each:function(b,c){var d=f.resolve(b),g=[],i,j;if(a.view.lists&&(d instanceof a.List||b&&b.isComputed&&d===void 0))return a.view.lists(b,function(a,b){return c.fn(c.scope.add({"@index":b}).add(a))});if((b=d)&&h(b)){for(j=
0;j<b.length;j++)g.push(c.fn(c.scope.add({"@index":j}).add(b[j])));return g.join("")}if(e(b)){d=a.Map.keys(b);for(j=0;j<d.length;j++){i=d[j];g.push(c.fn(c.scope.add({"@key":i}).add(b[i])))}return g.join("")}if(b instanceof Object){for(i in b)g.push(c.fn(c.scope.add({"@key":i}).add(b[i])));return g.join("")}},"with":function(a,b){if(f.resolve(a))return b.fn(a)},log:function(a,b){typeof console!=="undefined"&&console.log&&(b?console.log(a,b.context):console.log(a.context))},"@index":function(b,c){if(!c){c=
b;b=0}var d=c.scope.attr("@index");return""+((a.isFunction(d)?d():d)+b)}},function(a,b){f.registerHelper(b,a)});a.view.register({suffix:"mustache",contentType:"x-mustache-template",script:function(a,b){return"can.Mustache(function(scope,options) { "+(new f({text:b,name:a})).template.out+" })"},renderer:function(a,b){return f({text:b,name:a})}});a.mustache.registerHelper=a.proxy(a.Mustache.registerHelper,a.Mustache);a.mustache.safeString=a.Mustache.safeString;return a});
define("can/component/component","can/util/util can/view/callbacks/callbacks can/view/elements can/control/control can/observe/observe can/view/mustache/mustache can/view/bindings/bindings".split(" "),function(a,b,c){var d=/^(dataViewId|class|id)$/i,e=/\{([^\}]+)\}/g,h=a.Component=a.Construct.extend({setup:function(){a.Construct.setup.apply(this,arguments);if(a.Component){var b=this,c=this.prototype.scope||this.prototype.viewModel;this.Control=g.extend(this.prototype.events);if(!c||typeof c==="object"&&
!(c instanceof a.Map))this.Map=a.Map.extend(c||{});else if(c.prototype instanceof a.Map)this.Map=c;this.attributeScopeMappings={};a.each(this.Map?this.Map.defaults:{},function(a,c){a==="@"&&(b.attributeScopeMappings[c]=c)});if(this.prototype.template)if(typeof this.prototype.template==="function"){var d=this.prototype.template;this.renderer=function(){return a.view.frag(d.apply(null,arguments))}}else this.renderer=a.view.mustache(this.prototype.template);a.view.tag(this.prototype.tag,function(a,c){new b(a,
c)})}}},{setup:function(e,f){var g={},h=this,n=(typeof this.leakScope==="undefined"?false:!this.leakScope)&&this.template,o={},t=this.scope||this.viewModel,s={},q,m=[],r=function(){for(var a=0,b=m.length;a<b;a++)m[a]()};a.each(this.constructor.attributeScopeMappings,function(b,c){g[c]=e.getAttribute(a.hyphenate(b))});a.each(a.makeArray(e.attributes),function(c){var e=a.camelize(c.nodeName.toLowerCase()),i=c.value;if(!h.constructor.attributeScopeMappings[e]&&!d.test(e)&&!b.attr(c.nodeName)){if(i[0]===
"{"&&i[i.length-1]==="}")i=i.substr(1,i.length-2);else if(f.templateType!=="legacy"){g[e]=i;return}var c=f.scope.computeData(i,{args:[]}),n=c.compute,r=function(b,c){s[e]=(s[e]||0)+1;q.attr(e,c);a.batch.afterPreviousEvents(function(){--s[e]})};n.bind("change",r);g[e]=n();if(n.computeInstance.hasDependencies){m.push(function(){n.unbind("change",r)});o[e]=c}else n.unbind("change",r)}});if(this.constructor.Map)q=new this.constructor.Map(g);else if(t instanceof a.Map)q=t;else if(a.isFunction(t)){t=t.call(this,
g,f.scope,e);q=t instanceof a.Map?t:t.prototype instanceof a.Map?new t(g):new (a.Map.extend(t))(g)}var u={};a.each(o,function(a,b){u[b]=function(c,d){s[b]||a.compute(d)};q.bind(b,u[b])});(!a.isEmptyObject(this.constructor.attributeScopeMappings)||f.templateType!=="legacy")&&a.bind.call(e,"attributes",function(b){var c=a.camelize(b.attributeName);!o[c]&&!d.test(c)&&q.attr(c,e.getAttribute(b.attributeName))});this.scope=this.viewModel=q;a.data(a.$(e),"scope",this.scope);a.data(a.$(e),"viewModel",this.scope);
var t=n?this.scope:f.scope.add(this.scope),w={helpers:{}};a.each(this.helpers||{},function(b,c){a.isFunction(b)&&(w.helpers[c]=function(){return b.apply(q,arguments)})});m.push(function(){a.each(u,function(a,b){q.unbind(b,u[b])})});if((this._control=new this.constructor.Control(e,{scope:this.scope,viewModel:this.scope}))&&this._control.destroy){var y=this._control.destroy;this._control.destroy=function(){y.apply(this,arguments);r()};this._control.on()}else a.bind.call(e,"removed",function(){r()});
var v=a.view.nodeLists.register([],void 0,true);m.push(function(){a.view.nodeLists.unregister(v)});if(this.constructor.renderer){if(!w.tags)w.tags={};w.tags.content=function E(b,d){var e=f.subtemplate||d.subtemplate;if(e){delete w.tags.content;var g=!n||e!==f.subtemplate?d:f;if(d.parentNodeList){e=e(g.scope,g.options,d.parentNodeList);c.replace([b],e)}else a.view.live.replace([b],e(g.scope,g.options));w.tags.content=E}};t=this.constructor.renderer(t,f.options.add(w),v)}else t=f.templateType==="legacy"?
a.view.frag(f.subtemplate?f.subtemplate(t,f.options.add(w)):""):f.subtemplate?f.subtemplate(t,f.options.add(w),v):document.createDocumentFragment();a.appendChild(e,t);a.view.nodeLists.update(v,e.childNodes)}}),g=a.Control.extend({_lookup:function(a){return[a.scope,a,window]},_action:function(b,c,d){var f;e.lastIndex=0;f=e.test(b);if(d||!f){if(f){f=a.compute(function(){var d,f=b.replace(e,function(b,e){var f;if(e==="scope"||e==="viewModel"){d=c.scope;return""}e=e.replace(/^(scope|^viewModel)\./,"");
f=a.compute.read(c.scope,e.split("."),{isArgument:true}).value;f===void 0&&(f=a.getObject(e));if(typeof f==="string")return f;d=f;return""}),g=f.split(/\s+/g),h=g.pop();return{processor:this.processors[h]||this.processors.click,parts:[f,g.join(" "),h],delegate:d||void 0}},this);var g=function(a,c){d._bindings.control[b](d.element);d._bindings.control[b]=c.processor(c.delegate||d.element,c.parts[2],c.parts[1],b,d)};f.bind("change",g);d._bindings.readyComputes[b]={compute:f,handler:g};return f()}return a.Control._action.apply(this,
arguments)}}},{setup:function(b,c){this.scope=c.scope;this.viewModel=c.viewModel;return a.Control.prototype.setup.call(this,b,c)},off:function(){this._bindings&&a.each(this._bindings.readyComputes||{},function(a){a.compute.unbind("change",a.handler)});a.Control.prototype.off.apply(this,arguments);this._bindings.readyComputes={}}}),f=a.$;if(f.fn)f.fn.scope=f.fn.viewModel=function(){return a.viewModel.apply(a,[this].concat(a.makeArray(arguments)))};return h});
define("can/model/model",["can/util/util","can/map/map","can/list/list"],function(a){var b=function(b,c,d){var e=new a.Deferred;b.then(function(){var b=a.makeArray(arguments),f=!0;try{b[0]=d.apply(c,b)}catch(g){f=!1,e.rejectWith(e,[g].concat(b))}f&&e.resolveWith(e,b)},function(){e.rejectWith(this,arguments)});"function"===typeof b.abort&&(e.abort=function(){return b.abort()});return e},c=0,d=function(b){a.__observe(b,b.constructor.id);return b.__get(b.constructor.id)},e=function(c,e,f,g,h){var i;
a.isArray(c)?(i=c[1],c=c[0]):i=c.serialize();i=[i];var j=c.constructor,k;("update"===e||"destroy"===e)&&i.unshift(d(c));k=j[e].apply(j,i);i=b(k,c,function(a){c[h||e+"d"](a,k);return c});k.abort&&(i.abort=function(){k.abort()});i.then(f,g);return i},h={models:function(b,c,d){a.Model._reqs++;if(b){if(b instanceof this.List)return b;var e=this,f=[],g=e.List||n,h=c instanceof a.List?c:new g,c=b instanceof n?b.serialize():b,c=e.parseModels(c,d);c.data&&(b=c,c=c.data);if("undefined"===typeof c||!a.isArray(c))throw Error("Could not get any raw data while converting using .models");
h.length&&h.splice(0);a.each(c,function(a){f.push(e.model(a,d))});h.push.apply(h,f);a.isArray(b)||a.each(b,function(a,b){"data"!==b&&h.attr(b,a)});setTimeout(a.proxy(this._clean,this),1);return h}},model:function(b,c,d){if(b){b="function"===typeof b.serialize?b.serialize():this.parseModel(b,d);if(((d=b[this.id])||0===d)&&this.store[d])c=this.store[d];return c&&a.isFunction(c.attr)?c.attr(b,this.removeAttr||!1):new this(b)}}},g={parseModel:function(b){return function(c){return b?a.getObject(b,c):c}},
parseModels:function(b){return function(c){if(a.isArray(c))return c;b=b||"data";c=a.getObject(b,c);if(!a.isArray(c))throw Error("Could not get any raw data while converting using .models");return c}}},f={create:{url:"_shortName",type:"post"},update:{data:function(b,c){var c=c||{},d=this.id;c[d]&&c[d]!==b&&(c["new"+a.capitalize(b)]=c[d],delete c[d]);c[d]=b;return c},type:"put"},destroy:{type:"delete",data:function(a,b){b=b||{};b.id=b[this.id]=a;return b}},findAll:{url:"_shortName"},findOne:{}},i=function(b,
c){return function(d){var d=b.data?b.data.apply(this,arguments):d,e=c||this[b.url||"_url"],f=d,g=b.type||"get",h={};"string"===typeof e?(e=e.split(/\s+/),h.url=e.pop(),e.length&&(h.type=e.pop())):a.extend(h,e);h.data="object"===typeof f&&!a.isArray(f)?a.extend(h.data||{},f):f;h.url=a.sub(h.url,h.data,!0);return a.ajax(a.extend({type:g||"post",dataType:"json",success:void 0,error:void 0},h))}},j=function(a,b){if(a.resource){var c=a.resource.replace(/\/+$/,"");return"findAll"===b||"create"===b?c:c+
"/{"+a.id+"}"}};a.Model=a.Map.extend({fullName:"can.Model",_reqs:0,setup:function(b,d,e,k){"string"!==typeof d&&(k=e,e=d);k||(k=e);this.store={};a.Map.setup.apply(this,arguments);if(a.Model){e&&e.List?(this.List=e.List,this.List.Map=this):this.List=b.List.extend({Map:this},{});var l=this,n=a.proxy(this._clean,l);a.each(f,function(c,d){e&&e[d]&&("string"===typeof e[d]||"object"===typeof e[d])?l[d]=i(c,e[d]):e&&e.resource&&!a.isFunction(e[d])&&(l[d]=i(c,j(l,d)));if(l["make"+a.capitalize(d)]){var f=
l["make"+a.capitalize(d)](l[d]);a.Construct._overwrite(l,b,d,function(){a.Model._reqs++;var b=f.apply(this,arguments),c=b.then(n,n);c.abort=b.abort;return c})}});var u={};a.each(h,function(c,d){var f="parse"+a.capitalize(d),g=e&&e[d]||l[d];"string"===typeof g?(l[f]=g,a.Construct._overwrite(l,b,d,c)):e&&e[d]&&(u[f]=!0)});a.each(g,function(c,d){var f=e&&e[d]||l[d];if("string"===typeof f)a.Construct._overwrite(l,b,d,c(f));else if((!e||!a.isFunction(e[d]))&&!l[d])f=c(),f.useModelConverter=u[d],a.Construct._overwrite(l,
b,d,f)});if("can.Model"===l.fullName||!l.fullName)l.fullName="Model"+ ++c;a.Model._reqs=0;this._url=this._shortName+"/{"+this.id+"}"}},_ajax:i,_makeRequest:e,_clean:function(b){a.Model._reqs--;if(!a.Model._reqs)for(var c in this.store)this.store[c]._bindings||delete this.store[c];return b},models:h.models,model:h.model},{setup:function(b){var c=b&&b[this.constructor.id];a.Model._reqs&&null!=c&&(this.constructor.store[c]=this);a.Map.prototype.setup.apply(this,arguments)},isNew:function(){var a=d(this);
return!(a||0===a)},save:function(a,b){return e(this,this.isNew()?"create":"update",a,b)},destroy:function(b,c){if(this.isNew()){var d=this,f=a.Deferred();f.then(b,c);return f.done(function(a){d.destroyed(a)}).resolve(d)}return e(this,"destroy",b,c,"destroyed")},_bindsetup:function(){var b=this.__get(this.constructor.id);null!=b&&(this.constructor.store[b]=this);return a.Map.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){delete this.constructor.store[d(this)];return a.Map.prototype._bindteardown.apply(this,
arguments)},___set:function(b,c){a.Map.prototype.___set.call(this,b,c);b===this.constructor.id&&this._bindings&&(this.constructor.store[d(this)]=this)}});var k=function(a){return function(b,c,d){return this[a](b,null,d)}},l=function(a){return this.parseModel.useModelConverter?this.model(a):this.parseModel(a)},k={makeFindAll:k("models"),makeFindOne:k("model"),makeCreate:l,makeUpdate:l,makeDestroy:l};a.each(k,function(c,d){a.Model[d]=function(d){return function(){var e=a.makeArray(arguments),f=a.isFunction(e[1])?
e.splice(0,1):e.splice(0,2),f=b(d.apply(this,f),this,c);f.then(e[0],e[1]);return f}}});a.each(["created","updated","destroyed"],function(b){a.Model.prototype[b]=function(c){var d=this.constructor;c&&"object"===typeof c&&this.attr(a.isFunction(c.attr)?c.attr():c);a.dispatch.call(this,{type:"change",target:this},[b]);a.dispatch.call(d,b,[this])}});var n=a.Model.List=a.List.extend({_bubbleRule:function(b,c){var d=a.List._bubbleRule(b,c);d.push("destroyed");return d}},{setup:function(b){a.isPlainObject(b)&&
!a.isArray(b)?(a.List.prototype.setup.apply(this),this.replace(a.isDeferred(b)?b:this.constructor.Map.findAll(b))):a.List.prototype.setup.apply(this,arguments);this._init=1;this.bind("destroyed",a.proxy(this._destroyed,this));delete this._init},_destroyed:function(a,b){if(/\w+/.test(b))for(var c;-1<(c=this.indexOf(a.target));)this.splice(c,1)}});return a.Model});
define("can/util/string/deparam/deparam",["can/util/util","can/util/string/string"],function(a){var b=/^\d+$/,c=/([^\[\]]+)|(\[\])/g,d=/([^?#]*)(#.*)?$/,e=function(a){return decodeURIComponent(a.replace(/\+/g," "))};a.extend(a,{deparam:function(h){var g={},f;h&&d.test(h)&&(h=h.split("&"),a.each(h,function(a){var a=a.split("="),d=e(a.shift()),h=e(a.join("=")),l=g;if(d){for(var a=d.match(c),d=0,n=a.length-1;d<n;d++)l[a[d]]||(l[a[d]]=b.test(a[d+1])||"[]"===a[d+1]?[]:{}),l=l[a[d]];f=a.pop();"[]"===f?
l.push(h):l[f]=h}}));return g}});return a});
define("can/route/route",["can/util/util","can/map/map","can/list/list","can/util/string/deparam/deparam"],function(a){var b=/\:([\w\.]+)/g,c=function(b){var c=[];a.each(b,function(b,d){c.push(("className"===d?"class":d)+'="'+("href"===d?b:a.esc(b))+'"')});return c.join(" ")},d=function(a,b){var c=0,d=0,e={},f;for(f in a.defaults)a.defaults[f]===b[f]&&(e[f]=1,c++);for(;d<a.names.length;d++){if(!b.hasOwnProperty(a.names[d]))return-1;e[a.names[d]]||c++}return c},e=window.location,h=a.each,g=a.extend,
f=function(b){b&&"object"===typeof b?(b=b instanceof a.Map?b.attr():a.isFunction(b.slice)?b.slice():a.extend({},b),a.each(b,function(a,c){b[c]=f(a)})):void 0!==b&&null!==b&&a.isFunction(b.toString)&&(b=b.toString());return b},i=function(a){return a.replace(/\\/g,"")},j,k,l,n,o=[],t=function(b,c){n=1;o.push(c);clearTimeout(j);j=setTimeout(function(){n=0;var b=a.route.data.serialize(),b=a.route.param(b,!0);a.route._call("setURL",b,o);a.batch.trigger(s,"__url",[b,l]);l=b;o=[]},10)},s=a.extend({},a.event);
a.route=function(c,d){var e=a.route._call("root");e.lastIndexOf("/")===e.length-1&&0===c.indexOf("/")&&(c=c.substr(1));for(var d=d||{},e=[],f,g="",h=b.lastIndex=0,j=a.route._call("querySeparator"),k=a.route._call("matchSlashes");f=b.exec(c);)e.push(f[1]),g+=i(c.substring(h,b.lastIndex-f[0].length)),h="\\"+(i(c.substr(b.lastIndex,1))||j+(k?"":"|/")),g+="([^"+h+"]"+(d[f[1]]?"*":"+")+")",h=b.lastIndex;g+=c.substr(h).replace("\\","");a.route.routes[c]={test:RegExp("^"+g+"($|"+(j+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,
"\\$1")+")"),route:c,names:e,defaults:d,length:c.split("/").length};return a.route};g(a.route,{param:function(c,e){var f,i=0,j,k=c.route,l=0;delete c.route;h(c,function(){l++});h(a.route.routes,function(a){j=d(a,c);j>i&&(f=a,i=j);if(j>=l)return!1});a.route.routes[k]&&d(a.route.routes[k],c)===i&&(f=a.route.routes[k]);if(f){var m=g({},c),k=f.route.replace(b,function(a,b){delete m[b];return c[b]===f.defaults[b]?"":encodeURIComponent(c[b])}).replace("\\",""),o;h(f.defaults,function(a,b){m[b]===a&&delete m[b]});
o=a.param(m);e&&a.route.attr("route",f.route);return k+(o?a.route._call("querySeparator")+o:"")}return a.isEmptyObject(c)?"":a.route._call("querySeparator")+a.param(c)},deparam:function(b){var c=a.route._call("root");c.lastIndexOf("/")===c.length-1&&0===b.indexOf("/")&&(b=b.substr(1));var d={length:-1},e=a.route._call("querySeparator"),c=a.route._call("paramsMatcher");h(a.route.routes,function(a){a.test.test(b)&&a.length>d.length&&(d=a)});if(-1<d.length){var f=b.match(d.test),i=f.shift(),j=(i=b.substr(i.length-
(f[f.length-1]===e?1:0)))&&c.test(i)?a.deparam(i.slice(1)):{},j=g(!0,{},d.defaults,j);h(f,function(a,b){a&&a!==e&&(j[d.names[b]]=decodeURIComponent(a))});j.route=d.route;return j}b.charAt(0)!==e&&(b=e+b);return c.test(b)?a.deparam(b.slice(1)):{}},data:new a.Map({}),map:function(b){b=b.prototype instanceof a.Map?new b:b;a.route.data=b},routes:{},ready:function(b){!0!==b&&(a.route._setup(),a.route.setState());return a.route},url:function(b,c){c&&(b=a.extend({},a.route.deparam(a.route._call("matchingPartOfURL")),
b));return a.route._call("root")+a.route.param(b)},link:function(b,d,e,f){return"<a "+c(g({href:a.route.url(d,f)},e))+">"+b+"</a>"},current:function(b){a.__observe(s,"__url");return this._call("matchingPartOfURL")===a.route.param(b)},bindings:{hashchange:{paramsMatcher:/^(?:&[^=]+=[^&]*)+/,querySeparator:"&",matchSlashes:!1,bind:function(){a.bind.call(window,"hashchange",q)},unbind:function(){a.unbind.call(window,"hashchange",q)},matchingPartOfURL:function(){return e.href.split(/#!?/)[1]||""},setURL:function(a){e.hash!==
"#"+a&&(e.hash="!"+a);return a},root:"#!"}},defaultBinding:"hashchange",currentBinding:null,_setup:function(){a.route.currentBinding||(a.route._call("bind"),a.route.bind("change",t),a.route.currentBinding=a.route.defaultBinding)},_teardown:function(){a.route.currentBinding&&(a.route._call("unbind"),a.route.unbind("change",t),a.route.currentBinding=null);clearTimeout(j);n=0},_call:function(){var b=a.makeArray(arguments),c=b.shift(),d=a.route.bindings[a.route.currentBinding||a.route.defaultBinding],
c=d[c];return c.apply?c.apply(d,b):c}});h("bind unbind on off delegate undelegate removeAttr compute _get __get each".split(" "),function(b){a.route[b]=function(){if(a.route.data[b])return a.route.data[b].apply(a.route.data,arguments)}});a.route.attr=function(b,c){var d=typeof b,d=void 0===c?arguments:"string"!==d&&"number"!==d?[f(b),c]:[b,f(c)];return a.route.data.attr.apply(a.route.data,d)};var q=a.route.setState=function(){var b=a.route._call("matchingPartOfURL"),c=k;k=a.route.deparam(b);if(!n||
b!==l)a.batch.start(),m(c,k,a.route.data),a.route.attr(k),a.batch.trigger(s,"__url",[b,l]),a.batch.stop()},m=function(a,b,c){for(var d in a)void 0===b[d]?c.removeAttr(d):"[object Object]"===Object.prototype.toString.call(a[d])&&m(a[d],b[d],c.attr(d))};return a.route});
define("can/control/route/route",["can/util/util","can/route/route","can/control/control"],function(a){a.Control.processors.route=function(b,c,d,e,h){d=d||"";a.route.routes[d]||("/"===d[0]&&(d=d.substring(1)),a.route(d));var g,f=function(b){if(a.route.attr("route")===d&&(void 0===b.batchNum||b.batchNum!==g))if(g=b.batchNum,b=a.route.attr(),delete b.route,a.isFunction(h[e]))h[e](b);else h[h[e]](b)};a.route.bind("change",f);return function(){a.route.unbind("change",f)}};return a});
define("can/list/promise/promise",["can/list/list"],function(){var a=can.List.prototype.replace;can.List.prototype.replace=function(b){var c=a.apply(this,arguments);if(can.isDeferred(b)){can.batch.start();this.attr("state",b.state());this.removeAttr("reason");can.batch.stop();var d=this,e=this._deferred=new can.Deferred;b.then(function(){d.attr("state",b.state());e.resolve(d)},function(a){can.batch.start();d.attr("state",b.state());d.attr("reason",a);can.batch.stop();e.reject(a)})}return c};can.each({isResolved:"resolved",
isPending:"pending",isRejected:"rejected"},function(a,c){can.List.prototype[c]=function(){return this.attr("state")===a}});can.each(["then","done","fail","always","promise"],function(a){can.List.prototype[a]=function(){this._deferred||(this._deferred=new can.Deferred,this._deferred.resolve(this));return this._deferred[a].apply(this._deferred,arguments)}})});
define("can/view/ejs/ejs","can/util/util can/view/view can/util/string/string can/compute/compute can/view/scanner can/view/render".split(" "),function(a){var b=a.extend,c=function(a){if(this.constructor!==c){var e=new c(a);return function(a,b){return e.render(a,b)}}if(typeof a==="function")this.template={fn:a};else{b(this,a);this.template=this.scanner.scan(this.text,this.name)}};a.EJS=c;c.prototype.render=function(a,b){a=a||{};return this.template.fn.call(a,a,new c.Helpers(a,b||{}))};b(c.prototype,
{scanner:new a.view.Scanner({text:{outStart:"with(_VIEW) { with (_CONTEXT) {",outEnd:"}}",argNames:"_CONTEXT,_VIEW",context:"this"},tokens:[["templateLeft","<%%"],["templateRight","%>"],["returnLeft","<%=="],["escapeLeft","<%="],["commentLeft","<%#"],["left","<%"],["right","%>"],["returnRight","%>"]],helpers:[{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(a){a=a.match(/\s*\(([\$\w]+)\)\s*->([^\n]*)/);return"can.proxy(function(__){var "+a[1]+"=can.$(__);"+a[2]+"}, this);"}}],transform:function(a){return a.replace(/<%([\s\S]+?)%>/gm,
function(a,b){var c=[],d,i;b.replace(/[{}]/gm,function(a,b){c.push([a,b])});do{d=false;for(i=c.length-2;i>=0;i--)if(c[i][0]==="{"&&c[i+1][0]==="}"){c.splice(i,2);d=true;break}}while(d);if(c.length>=2){d=["<%"];var j,k=0;for(i=0;j=c[i];i++){d.push(b.substring(k,k=j[1]));j[0]==="{"&&i<c.length-1||j[0]==="}"&&i>0?d.push(j[0]==="{"?"{ %><% ":" %><% }"):d.push(j[0]);++k}d.push(b.substring(k),"%>");return d.join("")}return"<%"+b+"%>"})}})});c.Helpers=function(a,c){this._data=a;this._extras=c;b(this,c)};
c.Helpers.prototype={list:function(b,c){a.each(b,function(a,g){c(a,g,b)})},each:function(b,c){a.isArray(b)?this.list(b,c):a.view.lists(b,c)}};a.view.register({suffix:"ejs",script:function(a,b){return"can.EJS(function(_CONTEXT,_VIEW) { "+(new c({text:b,name:a})).template.out+" })"},renderer:function(a,b){return c({text:b,name:a})}});a.ejs.Helpers=c.Helpers;return a});
define("can/util/object/object",["can/util/util"],function(a){var b=a.isArray;a.Object={};var c=a.Object.same=function(e,h,g,f,i,j){var k=typeof e,l=b(e),n=typeof g;if("string"===n||null===g)g=d[g],n="function";if("function"===n)return g(e,h,f,i);g=g||{};if(null===e||null===h||e instanceof Date||h instanceof Date)return e===h;if(-1===j)return"object"===k||e===h;if(k!==typeof h||l!==b(h))return!1;if(e===h)return!0;if(l){if(e.length!==h.length)return!1;for(j=0;j<e.length;j++)if(f=void 0===g[j]?g["*"]:
g[j],!c(e[j],h[j],e,h,f))return!1;return!0}if("object"===k||"function"===k){var i=a.extend({},h),o;for(o in e){f=void 0===g[o]?g["*"]:g[o];if(!c(e[o],h[o],f,e,h,!1===j?-1:void 0))return!1;delete i[o]}for(o in i)if(void 0===g[o]||!c(void 0,h[o],g[o],e,h,!1===j?-1:void 0))return!1;return!0}return!1};a.Object.subsets=function(b,c,d){for(var f=c.length,i=[],j=0;j<f;j++){var k=c[j];a.Object.subset(b,k,d)&&i.push(k)}return i};a.Object.subset=function(a,b,d){var d=d||{},f;for(f in b)if(!c(a[f],b[f],d[f],
a,b))return!1;return!0};var d={"null":function(){return!0},i:function(a,b){return(""+a).toLowerCase()===(""+b).toLowerCase()},eq:function(a,b){return a===b},similar:function(a,b){return a==b}};d.eqeq=d.similar;return a.Object});
define("can/map/backup/backup",["can/util/util","can/compute/compute","can/map/map","can/util/object/object"],function(a){var b=a.Map.prototype.setup;a.extend(a.Map.prototype,{setup:function(){this._backupStore=a.compute();return b.apply(this,arguments)},backup:function(){this._backupStore(this.attr());return this},isDirty:function(b){return this._backupStore()&&!a.Object.same(this.attr(),this._backupStore(),void 0,void 0,void 0,!!b)},restore:function(a){var b;if(a)b=this._backupStore();else{b=this._backupStore();
var e={},h;for(h in b)e[h]="object"!==typeof b[h]||null===b[h]||b[h]instanceof Date?b[h]:this.attr(h);b=e}this.isDirty(a)&&this.attr(b,!0);return this}});return a.Map});
define("can/model/queue/queue",["can/util/util","can/model/model","can/map/backup/backup"],function(a){var b=function(b,c,d,e){this._changedAttrs=this._changedAttrs||[];var j=new a.Deferred,k=this,l=this.serialize(),n=this._requestQueue,o=this._changedAttrs,t,d=function(a,b,c,d){return function(){return a.constructor._makeRequest([a,l],b||(a.isNew()?"create":"update"),c,d,e)}}(this,d,function(){j.resolveWith(k,arguments);n.splice(0,1);0<n.length?n[0]=n[0]():o.splice(0)},function(){j.rejectWith(k,
arguments);n.splice(0);o.splice(0)});t=n.push(d)-1;1===n.length&&(n[0]=n[0]());j.abort=function(){var a;a=n[t].abort&&n[t].abort();n.splice(t);0===n.length&&o.splice(0);return a};j.then(b,c);return j},c=a.Model.prototype._triggerChange,d=a.Model.prototype.destroy,e=a.Model.prototype.setup;a.each(["created","updated","destroyed"],function(b){var c=a.Model.prototype[b];a.Model.prototype[b]=function(b){if(b&&"object"===typeof b){b=b.attr?b.attr():b;this._backupStore(b);var d=this._changedAttrs||[],b=
a.extend(!0,{},b),e,h;if(d)for(var l=0;l<d.length;l++){e=b;for(h=d[l].split(".");1<h.length;)e=e&&e[h.shift()];e&&delete e[h.shift()]}}c.call(this,b)}});a.extend(a.Model.prototype,{setup:function(){e.apply(this,arguments);this._requestQueue=new a.List},_triggerChange:function(a,b,d,e){this._changedAttrs&&this._changedAttrs.push(a);c.apply(this,arguments)},hasQueuedRequests:function(){return 1<this._requestQueue.attr("length")},save:function(){return b.apply(this,arguments)},destroy:function(a,c){return this.isNew()?
d.call(this,a,c):b.call(this,a,c,"destroy","destroyed")}});return a});
define("can/construct/super/super",["can/util/util","can/construct/construct"],function(a){var b=a.isFunction,c=/xyz/.test(function(){return this.xyz})?/\b_super\b/:/.*/,d=["get","set"],e=function(a,b,c){return function(){var d=this._super,e;this._super=a[b];e=c.apply(this,arguments);this._super=d;return e}};a.Construct._defineProperty=function(c,g,f,i){var j=Object.getOwnPropertyDescriptor(g,f);j&&a.each(d,function(a){b(j[a])&&b(i[a])?i[a]=e(j,a,i[a]):b(i[a])||(i[a]=j[a])});Object.defineProperty(c,
f,i)};a.Construct._overwrite=function(a,d,f,i){a[f]=b(i)&&b(d[f])&&c.test(i)?e(d,f,i):i};return a});
define("can/construct/proxy/proxy",["can/util/util","can/construct/construct"],function(a){var b=a.isArray,c=a.makeArray,d=function(a){var d=c(arguments),e,a=d.shift();b(a)||(a=[a]);e=this;return function(){for(var h=d.concat(c(arguments)),k,l=a.length,n=0,o;n<l;n++)if(o=a[n])k="string"===typeof o,h=(k?e[o]:o).apply(e,h||[]),n<l-1&&(h=!b(h)||h._use_call?[h]:h);return h}};a.Construct.proxy=a.Construct.prototype.proxy=d;for(var e=[a.Map,a.Control,a.Model],h=0;h<e.length;h++)e[h]&&(e[h].proxy=d);return a});
define("can/map/lazy/bubble",["can/util/util","can/map/bubble"],function(a){var b=a.bubble;return a.extend({},b,{childrenOf:function(a,d){a._nestedReference?a._nestedReference.each(function(e,h){e&&e.bind&&b.toParent(e,a,h(),d)}):b._each.apply(this,arguments)}})});
define("can/map/lazy/nested_reference",["can/util/util"],function(a){var b=function(a,b,c){for(var b=b.split("."),d;d=b.shift();)a=a[d],c&&c(a,d);return a},c=function(a){this.array=a};c.prototype.toString=function(){return""+a.inArray(this.item,this.array)};var d=function(a){this.root=a;this.references=[]};d.ArrIndex=c;a.extend(d.prototype,{make:function(d){var h=[],g;if(a.isArray(this.root)||this.root instanceof a.LazyList)g=new c(this.root);b(this.root,d,function(b,d){g?(g.item=b,h.push(g),g=void 0):
(h.push(d),a.isArray(b)&&(g=new c(b)))});d=function(){return h.join(".")};this.references.push(d);return d},removeChildren:function(a,b){for(var c=0;c<this.references.length;){var d=this.references[c]();0===d.indexOf(a)?(b(this.get(d),d),this.references.splice(c,1)):c++}},get:function(a){return b(this.root,a)},each:function(b){var c=this;a.each(this.references,function(a){var d=a();b(c.get(d),a,d)})}});a.NestedReference=d});
define("can/map/lazy/lazy",["can/util/util","can/map/lazy/bubble","can/map/map","can/list/list","can/map/lazy/nested_reference"],function(a,b){a.LazyMap=a.Map.extend({_bubble:b},{setup:function(b){this.constructor.Map=this.constructor;this.constructor.List=a.LazyList;this._data=a.extend(a.extend(!0,{},this._setupDefaults()||{}),b);a.cid(this,".lazyMap");this._init=1;this._computedBindings={};this._setupComputes();b=b&&a.Map.helpers.addToMap(b,this);this._nestedReference=new a.NestedReference(this._data);
b&&b();a.each(this._data,a.proxy(function(a,b){this.___set(b,a)},this));this.bind("change",a.proxy(this._changes,this));delete this._init},_addChild:function(a,d,e){var h=this;this._nestedReference.removeChildren(a,function(e,f){b.remove(h,e);if(d){var i=f.replace(a+".","");a===i?e._nestedReference.each(function(a,c){d._nestedReference.make(c());h._bindings&&b.add(this,d,c())}):(i=d._nestedReference.make(i),h._bindings&&b.add(e,d,i()))}});e&&e();d&&(e=this._nestedReference.make(a),this._bindings&&
b.add(this,d,e()));return d},removeAttr:function(b){var d=this._goto(b);if(d.parts.length)return d.value.removeAttr(d.parts.join("."));a.isArray(d.parent)?(d.parent.splice(d.prop,1),this._triggerChange(b,"remove",void 0,[this.__type(d.value,d.prop)])):d.parent[d.prop]&&(delete d.parent[d.prop],a.batch.trigger(this,d.path.length?d.path.join(".")+".__keys":"__keys"),this._triggerChange(b,"remove",void 0,this.__type(d.value,d.prop)));this._nestedReference.removeChildren();return d.value},__type:function(b){return!(b instanceof
a.LazyMap)&&a.Map.helpers.canMakeObserve(b)?a.isArray(b)?new a.LazyList(b):new (this.constructor.Map||a.LazyMap)(b):b},_goto:function(b,d){for(var e=a.Map.helpers.attrParts(b,d).slice(0),h,g=[],f,i=this instanceof a.List?this[e.shift()]:this.__get();i&&!a.Map.helpers.isObservable(i)&&e.length;)void 0!==f&&g.push(f),h=i,i=i[f=e.shift()];return{parts:e,prop:f,value:i,parent:h,path:g}},_get:function(b){a.__observe(this,b);var d=this._goto(b);if(a.Map.helpers.isObservable(d.value))return d.parts.length?
d.value._get(d.parts):d.value;if(d.value&&a.Map.helpers.canMakeObserve(d.value)){var e=this.__type(d.value,d.prop);this._addChild(b,e,function(){d.parent[d.prop]=e});return e}return void 0!==d.value?d.value:this.__get(b)},_set:function(b,d,e){e=this._goto(b,e);if(a.Map.helpers.isObservable(e.value)&&e.parts.length)return e.value._set(e.parts,d);if(e.parts.length)throw"can.LazyMap: object does not exist";this.__set(b,d,e.value,e)},__set:function(b,d,e,h,g){g=g||!0;if(d!==e){var f=h.parent.hasOwnProperty(h.prop)?
"set":"add";if(g&&a.Map.helpers.canMakeObserve(d)){var d=this.__type(d,b),i=this;this._addChild(b,d,function(){i.___set(b,d,h)})}else this.___set(b,d,h);"add"===f&&a.batch.trigger(this,h.path.length?h.path.join(".")+".__keys":"__keys",void 0);this._triggerChange(b,f,d,e)}},___set:function(b,d,e){if(this[b]&&this[b].isComputed&&a.isFunction(this.constructor.prototype[b]))this[b](d);else e?e.parent[e.prop]=d:this._data[b]=d;a.isFunction(this.constructor.prototype[b])||(this[b]=d)},_attrs:function(b,
d){if(void 0===b)return a.Map.helpers.serialize(this,"attr",{});var b=a.extend({},b),e=this,h,g,f;a.batch.start();this.each(function(h,j){f=b[j];g=e._goto(j,!0);void 0===f?d&&e.removeAttr(j):(!a.Map.helpers.isObservable(h)&&a.Map.helpers.canMakeObserve(h)&&(h=e.attr(j)),e.__convert&&(f=e.__convert(j,f)),f instanceof a.Map?e.__set(j,f,h,g):a.Map.helpers.isObservable(h)&&a.Map.helpers.canMakeObserve(f)&&h.attr?h.attr(f,d):h!==f&&e.__set(j,f,h,g),delete b[j])});for(h in b)f=b[h],this._set(h,f,!0);a.batch.stop();
return this}});a.LazyList=a.List.extend({Map:a.LazyMap},{setup:function(){a.List.prototype.setup.apply(this,arguments);this._nestedReference=new a.NestedReference(this)}});return a.LazyMap});
define("can/map/delegate/delegate",["can/util/util","can/map/map"],function(a){var b=function(a,b){var c=a.length,g=0,f=[],i;for(g;g<c;g++){i=b[g];if("string"!==typeof i)return null;if("**"===a[g])return b.join(".");if("*"===a[g])f.push(i);else if(i===a[g])f.push(i);else return null}return f.join(".")},c=function(c,e,h,g,f){var i=e.split("."),j=(this._observe_delegates||[]).slice(0),k,l,n,o,t;c.attr=e;c.lastAttr=i[i.length-1];for(var s=0;k=j[s++];)if(!(c.batchNum&&k.batchNum===c.batchNum||k.undelegated)){o=
void 0;t=!0;for(var q=0;q<k.attrs.length;q++)l=k.attrs[q],(n=b(l.parts,i))&&(o=n),l.value&&t?t=l.value===""+this.attr(l.attr):t&&1<k.attrs.length&&(t=void 0!==this.attr(l.attr));o&&t&&((l=e.replace(o+".",""),c.batchNum&&(k.batchNum=c.batchNum),"change"===k.event)?(e=l,c.curAttr=o,k.callback.apply(this.attr(o),a.makeArray(arguments))):k.event===h?k.callback.apply(this.attr(o),[c,g,f,l]):"set"===k.event&&"add"===h&&k.callback.apply(this.attr(o),[c,g,f,l]))}};a.extend(a.Map.prototype,{delegate:function(b,
e,h){for(var b=a.trim(b),g=this._observe_delegates||(this._observe_delegates=[]),f=[],i=/([^\s=,]+)(?:=("[^",]*"|'[^',]*'|[^\s"',]*))?(,?)\s*/g,j;null!==(j=i.exec(b));)j[2]&&0<=a.inArray(j[2].substr(0,1),['"',"'"])&&(j[2]=j[2].substr(1,-1)),f.push({attr:j[1],parts:j[1].split("."),value:j[2],or:","===j[3]});g.push({selector:b,attrs:f,callback:h,event:e});1===g.length&&this.bind("change",c);return this},undelegate:function(b,e,h){var b=b&&a.trim(b),e=0,g=this._observe_delegates||[],f;if(b)for(;e<g.length;)f=
g[e],f.callback===h||!h&&f.selector===b?(f.undelegated=!0,g.splice(e,1)):e++;else g=[];g.length||this.unbind("change",c);return this}});a.Map.prototype.delegate.matches=b;return a.Map});
define("can/map/setter/setter",["can/util/util","can/map/map"],function(a){a.classize=function(b,c){for(var d=b.split(a.undHash),f=0;f<d.length;f++)d[f]=a.capitalize(d[f]);return d.join(c||"")};var b=a.classize,c=a.Map.prototype,d=c.__set;c.__set=function(c,h,g,f,i){var j="set"+b(c),k=function(b){!1!==(i&&i.call(l,b))&&a.trigger(l,"error",[c,b],!0);return!1},l=this;if(this[j]){a.batch.start();h=this[j](h,function(a){d.call(l,c,a,g,f,k)},k);if(void 0===h){a.batch.stop();return}d.call(l,c,h,g,f,k);
a.batch.stop()}else d.call(l,c,h,g,f,k);return this};return a.Map});
define("can/map/attributes/attributes",["can/util/util","can/map/map","can/list/list"],function(a){a.each([a.Map,a.Model],function(b){if(void 0!==b){a.extend(b,{attributes:{},convert:{date:function(a){var b=typeof a;return"string"===b?(a=Date.parse(a),isNaN(a)?null:new Date(a)):"number"===b?new Date(a):a},number:function(a){return parseFloat(a)},"boolean":function(a){return"false"===a||"0"===a||!a?!1:!0},"default":function(b,c,d,e){if(a.Map.prototype.isPrototypeOf(e.prototype)&&"function"===typeof e.model&&
"function"===typeof e.models)return e[a.isArray(b)?"models":"model"](b);if(a.Map.prototype.isPrototypeOf(e.prototype))return a.isArray(b)&&"function"===typeof e.List?new e.List(b):new e(b);if("function"===typeof e)return e(b,c);var d=a.getObject(e),j=window;0<=e.indexOf(".")&&(e=e.substring(0,e.lastIndexOf(".")),j=a.getObject(e));return"function"===typeof d?d.call(j,b,c):b}},serialize:{"default":function(a){return"object"===typeof a&&null!==a&&a&&a.serialize?a.serialize():a},date:function(a){return a&&
a.getTime()}}});var c=b.setup;b.setup=function(b,d,f){var i=this;c.call(i,b,d,f);a.each(["attributes"],function(a){if(!i[a]||b[a]===i[a])i[a]={}});a.each(["convert","serialize"],function(c){b[c]!==i[c]&&(i[c]=a.extend({},b[c],i[c]))})}}});a.Map.prototype.__convert=function(a,b){var c=this.constructor,g=this.__get(a),f,i;c.attributes&&(f=c.attributes[a],i=c.convert[f]||c.convert["default"]);return null===b||!f?b:i.call(c,b,g,function(){},f)};var b=a.Map.helpers._serialize;a.Map.helpers._serialize=
function(a,c,h){var g=a.constructor,f=g.attributes?g.attributes[c]:0,g=g.serialize?g.serialize[f]:0;return h&&"function"===typeof h.serialize?b.apply(this,arguments):g?g(h,f):b.apply(this,arguments)};var c=a.Map.prototype.serialize;a.Map.prototype.serialize=function(a){var b=c.apply(this,arguments);return a?b[a]:b};return a.Map});
define("can/map/validations/validations",["can/util/util","can/map/map"],function(a){var b=function(b,c,h){h||(h=c,c={});c=c||{};b="string"===typeof b?[b]:a.makeArray(b);if(!c.testIf||c.testIf.call(this)){var g=this;a.each(b,function(a){g.validations[a]||(g.validations[a]=[]);g.validations[a].push(function(b){b=h.call(this,b,a);return void 0===b?void 0:c.message||b})})}},c=a.Map.prototype.__set;a.Map.prototype.__set=function(b,e,h,g,f){var i=this,j=i.constructor.validations,k=function(c){!1!==(f&&
f.call(i,c))&&a.trigger(i,"error",[b,c],!0);return!1};c.call(i,b,e,h,g,k);j&&j[b]&&(e=i.errors(b))&&k(e);return this};a.each([a.Map,a.Model],function(c){if(void 0!==c){var e=c.setup;a.extend(c,{setup:function(a){e.apply(this,arguments);if(!this.validations||a.validations===this.validations)this.validations={}},validate:b,validationMessages:{format:"is invalid",inclusion:"is not a valid option (perhaps out of range)",lengthShort:"is too short",lengthLong:"is too long",presence:"can't be empty",range:"is out of range",
numericality:"must be a number"},validateFormatOf:function(a,c,d){b.call(this,a,d,function(a){if("undefined"!==typeof a&&null!==a&&""!==a&&null===(""+a).match(c))return this.constructor.validationMessages.format})},validateInclusionOf:function(a,c,d){b.call(this,a,d,function(a){if("undefined"!==typeof a){for(var b=0;b<c.length;b++)if(c[b]===a)return;return this.constructor.validationMessages.inclusion}})},validateLengthOf:function(a,c,d,e){b.call(this,a,e,function(a){if(("undefined"===typeof a||null===
a)&&0<c||"undefined"!==typeof a&&null!==a&&a.length<c)return this.constructor.validationMessages.lengthShort+" (min="+c+")";if("undefined"!==typeof a&&null!==a&&a.length>d)return this.constructor.validationMessages.lengthLong+" (max="+d+")"})},validatePresenceOf:function(a,c){b.call(this,a,c,function(a){if("undefined"===typeof a||""===a||null===a)return this.constructor.validationMessages.presence})},validateRangeOf:function(a,c,d,e){b.call(this,a,e,function(a){if(("undefined"===typeof a||null===
a)&&0<c||"undefined"!==typeof a&&null!==a&&(a<c||a>d))return this.constructor.validationMessages.range+" ["+c+","+d+"]"})},validatesNumericalityOf:function(a){b.call(this,a,function(a){if(isNaN(parseFloat(a))||!isFinite(a))return this.constructor.validationMessages.numericality})}})}});a.extend(a.Map.prototype,{errors:function(b,c){b&&(b=a.isArray(b)?b:[b]);var h={},g=this,f=function(b,d){a.each(d,function(a){if(a=a.call(g,j?g.__convert?g.__convert(b,c):c:g.attr(b)))h[b]||(h[b]=[]),h[b].push(a)})},
i=this.constructor.validations||{},j=b&&1===b.length&&2===arguments.length;a.each(b||i,function(a,b){"number"===typeof b&&(b=a,a=i[b]);f(b,a||[])});return a.isEmptyObject(h)?null:j?h[b[0]]:h}});return a.Map});
define("can/map/list/list",["can/util/util","can/map/map","can/list/list","can/compute/compute"],function(a){a.extend(a.List.prototype,{filter:function(b){var c=new this.constructor,d=this,e=function(e){var g=function(a,b){var d=c.indexOf(e);!b&&-1!==d&&c.splice(d,1);b&&-1===d&&c.push(e)},f=a.compute(function(){return b(e,d.indexOf(e),d)});f.bind("change",g);g(null,f())};this.bind("add",function(b,c,d){a.each(c,function(a,b){e(a,d+b)})});this.bind("remove",function(b,d){a.each(d,function(a){a=c.indexOf(a);
-1!==a&&c.splice(a,1)})});this.forEach(e);return c},map:function(b){var c=new a.List,d=this,e=function(e,g){var f=a.compute(function(){return b(e,g,d)});f.bind("change",function(a,b){c.splice(g,1,b)});c.splice(g,0,f())};this.forEach(e);this.bind("add",function(b,c,d){a.each(c,function(a,b){e(a,d+b)})});this.bind("remove",function(a,b,d){c.splice(d,b.length)});return c}});return a.List});
define("can/map/define/define",["can/util/util","can/observe/observe"],function(a){var b=a.define={},c=function(a,b,c){if(c){b=c[b];c=c["*"];if(b&&void 0!==b[a])return b[a];if(c&&void 0!==c[a])return c[a]}};a.Map.helpers.define=function(c){var d=c.prototype.define;c.defaultGenerators={};for(var e in d){var f=d[e].type;"string"===typeof f&&"object"===typeof b.types[f]&&(delete d[e].type,a.extend(d[e],b.types[f]));"value"in d[e]&&("function"===typeof d[e].value?c.defaultGenerators[e]=d[e].value:c.defaults[e]=
d[e].value);"function"===typeof d[e].Value&&function(a){c.defaultGenerators[e]=function(){return new a}}(d[e].Value)}};var d=a.Map.prototype._setupDefaults;a.Map.prototype._setupDefaults=function(a){var b=d.call(this),c={},e=this.constructor,f=this._get;this._get=function(a){g=-1!==a.indexOf(".")?a.substr(0,a.indexOf(".")):g;g in b&&!(g in c)&&(this.attr(g,b[g]),c[g]=!0);return f.apply(this,arguments)};for(var g in e.defaultGenerators)if(!a||!(g in a))b[g]=e.defaultGenerators[g].call(this);this._get=
f;return b};var e=a.Map.prototype,h=e.__set;e.__set=function(b,d,e,f,g){var i=function(c){!1!==(g&&g.call(j,c))&&a.trigger(j,"error",[b,c],!0);return!1},j=this,k=c("set",b,this.define),l=c("get",b,this.define);if(k){a.batch.start();var y=!1,v=k.call(this,d,function(a){if(l)j[b](a);else h.call(j,b,a,e,f,i);y=!0},i,l?this[b].computeInstance.lastSetValue.get():e);if(l){if(void 0!==v&&!y&&1<=k.length)this[b](v);a.batch.stop();return}if(void 0===v&&!y&&1<=k.length){a.batch.stop();return}y||h.call(j,b,
0===k.length&&void 0===v?d:v,e,f,i);a.batch.stop();return this}h.call(j,b,d,e,f,i);return this};b.types={date:function(a){var b=typeof a;return"string"===b?(a=Date.parse(a),isNaN(a)?null:new Date(a)):"number"===b?new Date(a):a},number:function(a){return null==a?a:+a},"boolean":function(a){return"false"===a||"0"===a||!a?!1:!0},htmlbool:function(a){return"string"===typeof a||!!a},"*":function(a){return a},string:function(a){return null==a?a:""+a},compute:{set:function(a,b,c,d){return a.isComputed?a:
d&&d.isComputed?(d(a),d):a},get:function(a){return a&&a.isComputed?a():a}}};var g=e.__type;e.__type=function(d,e){var f=c("type",e,this.define),h=c("Type",e,this.define),i=d;"string"===typeof f&&(f=b.types[f]);if(f||h)return f&&(i=f.call(this,i,e)),h&&!(i instanceof h)&&(i=new h(i)),i;a.isPlainObject(i)&&i.define&&(i=a.Map.extend(i),i=new i);return g.call(this,i,e)};var f=e._remove;e._remove=function(b,d){var e=c("remove",b,this.define);if(e){a.batch.start();e=e.call(this,d);if(!1===e){a.batch.stop();
return}e=f.call(this,b,d);a.batch.stop();return e}return f.call(this,b,d)};var i=e._setupComputes;e._setupComputes=function(b){i.apply(this,arguments);for(var c in this.define){var d=this.define[c].get;d&&(this[c]=a.compute.async(b[c],d,this),this._computedBindings[c]={count:0})}};var j=a.Map.helpers._serialize;a.Map.helpers._serialize=function(a,b,c){return k(a,b,c)};var k=function(a,b,d){var e="*"===b?!1:c("serialize",b,a.define);if(void 0===e)return j.apply(this,arguments);if(!1!==e)return"function"===
typeof e?e.call(a,d,b):j.apply(this,arguments)},l=e.serialize;e.serialize=function(a){var b=l.apply(this,arguments);if(a)return b;var c,d;for(d in this.define)!(d in b)&&(this.define&&this.define[d]&&this.define[d].serialize)&&(c=k(this,d,this.attr(d)),void 0!==c&&(b[d]=c));return b};return a.define});
define("can/list/sort/sort",["can/util/util","can/list/list"],function(){var a=can.List._bubbleRule;can.List._bubbleRule=function(b,c){var d=a.apply(this,arguments);c.comparator&&-1===can.inArray("change",d)&&d.push("change");return d};var b=can.List.prototype,c=b._changes,d=b.setup,e=b.unbind;can.extend(b,{setup:function(a,b){d.apply(this,arguments);this._comparatorBound=!1;this._init=1;this.bind("comparator",can.proxy(this._comparatorUpdated,this));delete this._init;this.comparator&&this.sort()},
_comparatorUpdated:function(a,b){b||0===b?(this.sort(),0<this._bindings&&!this._comparatorBound&&this.bind("change",this._comparatorBound=function(){})):this._comparatorBound&&(e.call(this,"change",this._comparatorBound),this._comparatorBound=!1)},unbind:function(a,b){var c=e.apply(this,arguments);this._comparatorBound&&1===this._bindings&&(e.call(this,"change",this._comparatorBound),this._comparatorBound=!1);return c},_comparator:function(a,b){var c=this.comparator;return c&&"function"===typeof c?
c(a,b):a===b?0:a<b?-1:1},_changes:function(a,b,d,e,j){if(this.comparator&&/^\d+/.test(b)){if(a.batchNum&&a.batchNum!==this._lastBatchNum){this.sort();this._lastBatchNum=a.batchNum;return}var k=+/^\d+/.exec(b)[0],l=this[k];"undefined"!==typeof l&&(l=this._getInsertIndex(l,k),l!==k&&(this._swapItems(k,l),can.trigger(this,"length",[this.length])))}c.apply(this,arguments)},_getInsertIndex:function(a,b){for(var c=this._getComparatorValue(a),d,e=0,k=0;k<this.length;k++)if(d=this._getComparatorValue(this[k]),
"undefined"!==typeof b&&k===b)e=-1;else if(0>this._comparator(c,d))break;return k+e},_getComparatorValue:function(a,b){var c="string"===typeof b?b:this.comparator;a&&c&&"string"===typeof c&&(a="function"===typeof a[c]?a[c]():a.attr(c));return a},_getComparatorValues:function(){var a=this,b=[];this.each(function(c){b.push(a._getComparatorValue(c))});return b},sort:function(a,b){for(var c,d,e,k,l=can.isFunction(a)?a:this._comparator,n,o,t=0,s=this.length;t<s-1;t++){o=t;k=!0;e=void 0;for(n=t+1;n<s;n++)c=
this._getComparatorValue(this.attr(n),a),d=this._getComparatorValue(this.attr(o),a),0>l.call(this,c,d)&&(k=!1,o=n),e&&0>l.call(this,c,e)&&(k=!1),e=c;if(k)break;o!==t&&this._swapItems(o,t,b)}b||can.trigger(this,"length",[this.length]);return this},_swapItems:function(a,b,c){var d=this[a];[].splice.call(this,a,1);[].splice.call(this,b,0,d);c||can.trigger(this,"move",[d,b,a])}});can.each({push:"length",unshift:0},function(a,b){var c=can.List.prototype,d=c[b];c[b]=function(){if(this.comparator&&arguments.length){for(var a=
arguments[0]&&can.isArray(arguments[0])?arguments[0]:can.makeArray(arguments),b=a.length;b--;){var c=can.bubble.set(this,b,this.__type(a[b],b)),e=this._getInsertIndex(c);Array.prototype.splice.apply(this,[e,0,c]);this._triggerChange(""+e,"add",[c],void 0)}can.batch.trigger(this,"reset",[a]);return this}return d.apply(this,arguments)}});(function(){var a=can.List.prototype,b=a.splice;a.splice=function(c,d){var e=can.makeArray(arguments),k=[],l,n;if(!this.comparator)return b.apply(this,e);l=2;for(n=
e.length;l<n;l++)e[l]=this.__type(e[l],l),k.push(e[l]);b.call(this,c,d);a.push.apply(this,k)}})();return can.Map});
define("can/control/plugin/plugin",["jquery/dist/jquery","can/util/util","can/control/control"],function(a,b){var a=a||window.$,c,d=b.makeArray,e=b.Control.setup;b.Control.setup=function(){if(this!==b.Control){var a=this.pluginName||this._fullName;"can_control"!==a&&this.plugin(a);e.apply(this,arguments)}};a.fn.extend({controls:function(){var a=d(arguments),e=[],f,i;this.each(function(){if(f=b.$(this).data("controls"))for(var d=0;d<f.length;d++){i=f[d];var k;if(!(k=!a.length))a:{k=i;var l=a,n=k.constructor.pluginName||
k.constructor._shortName;for(c=0;c<l.length;c++)if("string"===typeof l[c]?n===l[c]:k instanceof l[c]){k=!0;break a}k=!1}k&&e.push(i)}});return e},control:function(a){return this.controls.apply(this,arguments)[0]}});b.Control.plugin=function(c){var e=this;a.fn[c]||(a.fn[c]=function(c){var h=d(arguments),j="string"===typeof c&&a.isFunction(e.prototype[c]),k=h[0],l;this.each(function(){var a=b.$(this).control(e);a?j?l=a[k].apply(a,h.slice(1)):a.update.apply(a,h):e.newInstance.apply(e,[this].concat(h))});
return void 0!==l?l:this})};b.Control.prototype.update=function(a){b.extend(this.options,a);this.on()};return b});
define("can/view/modifiers/modifiers",["jquery/dist/jquery","can/util/util","can/view/view"],function(a,b){var a=a||window.$,c,d,e,h,g,f,i={val:!0,text:!0};c=function(c){var g=a.fn[c];a.fn[c]=function(){var a=b.makeArray(arguments),h,o,t=this;if(b.isDeferred(a[0]))return a[0].done(function(a){d.call(t,[a],g)}),this;if(e(a)){if(h=f(a))return o=a[h],a[h]=function(a){d.call(t,[a],g);o.call(t,a)},b.view.apply(b.view,a),this;a=b.view.apply(b.view,a);if(b.isDeferred(a))return a.done(function(a){d.call(t,
[a],g)}),this;a=[a]}return i[c]?g.apply(this,a):d.call(this,a,g)}};d=function(a,c){for(var d in b.view.hookups)break;d&&a[0]&&h(a[0])&&(a[0]=b.view.frag(a[0]).childNodes);return c.apply(this,a)};e=function(a){var b=typeof a[1];return"string"===typeof a[0]&&("object"===b||"function"===b)&&!g(a[1])};g=function(a){return a.nodeType||a[0]&&a[0].nodeType};h=function(a){return g(a)?!0:"string"===typeof a?(a=b.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)&&3<=a.length):!1};f=function(a){return"function"===
typeof a[3]?3:"function"===typeof a[2]&&2};a.fn.hookup=function(){b.view.frag(this);return this};b.each("prepend append after before text html replaceWith val".split(" "),function(a){c(a)});return b});
define("can/util/fixture/fixture",["can/util/util","can/util/string/string","can/util/object/object"],function(a){if(!a.Object)throw Error("can.fixture depends on can.Object. Please include it before can.fixture.");var b=function(b){if("undefined"!==typeof steal){if(steal.joinURIs){var c=steal.config("baseUrl");return steal.joinURIs(c,b)}return a.isFunction(steal.config)?steal.System?steal.joinURIs(steal.config("baseURL"),b):steal.config().root.mapJoin(b).toString():steal.root.join(b).toString()}return(a.fixture.rootUrl||
"")+b},c=function(c,d){if(a.fixture.on&&!1!==c.fixture){c.type=c.type||c.method||"GET";var e=i(c);if(c.fixture)if("string"===typeof c.fixture&&a.fixture[c.fixture]&&(c.fixture=a.fixture[c.fixture]),"string"===typeof c.fixture){var f=c.fixture;/^\/\//.test(f)&&(f=b(c.fixture.substr(2)));e&&(f=a.sub(f,e));delete c.fixture;c.url=f;c.data=null;c.type="GET";c.error||(c.error=function(a,b,c){throw"fixtures.js Error "+b+" "+c;})}else c.dataTypes&&c.dataTypes.splice(0,0,"fixture"),e&&d&&(d.data=d.data||{},
a.extend(d.data,e))}},d=function(a,b,c,d){"number"!==typeof a&&(d=b,c=a,b="success",a=200);"string"!==typeof b&&(d=c,c=b,b="success");400<=a&&599>=a&&(this.dataType="text");return[a,b,e(this,c),d]},e=function(a,b){var c=a.dataTypes?a.dataTypes[0]:a.dataType||"json";if(!b||!b[c]){var d={};d[c]=b;b=d}return b};if(a.ajaxPrefilter&&a.ajaxTransport)a.ajaxPrefilter(c),a.ajaxTransport("fixture",function(b,c){b.dataTypes.shift();var f,g=!1;return{send:function(h,i){f=setTimeout(function(){var a=b.fixture(c,
function(){!1===g&&i.apply(null,d.apply(b,arguments))},h,b);void 0!==a&&i(200,"success",e(b,a),{})},a.fixture.delay)},abort:function(){g=!0;clearTimeout(f)}}});else{var h=a.ajax;a.ajax=function(b){c(b,b);if(b.fixture){var e,f=new a.Deferred,g=!1;f.getResponseHeader=function(){};f.then(b.success,b.fail);f.abort=function(){clearTimeout(e);g=!0;f.reject(f)};e=setTimeout(function(){var a=b.fixture(b,function(){var a=d.apply(b,arguments),c=a[0];(200<=c&&300>c||304===c)&&!1===g?f.resolve(a[2][b.dataType]):
f.reject(f,"error",a[1])},b.headers,b);void 0!==a&&f.resolve(a)},a.fixture.delay);return f}return h(b)}}var g=[],f=function(a,b){for(var c=0;c<g.length;c++)if(k._similar(a,g[c],b))return c;return-1},i=function(a){var b=f(a);if(-1<b)return a.fixture=g[b].fixture,k._getData(g[b].url,a.url)},j=function(a){var b=a.data.id;void 0===b&&"number"===typeof a.data&&(b=a.data);void 0===b&&a.url.replace(/\/(\d+)(\/|$|\.)/g,function(a,c){b=c});void 0===b&&(b=a.url.replace(/\/(\w+)(\/|$|\.)/g,function(a,c){"update"!==
c&&(b=c)}));void 0===b&&(b=Math.round(1E3*Math.random()));return b},k=a.fixture=function(b,c){if(void 0!==c){if("string"===typeof b)var d=b.match(/(GET|POST|PUT|DELETE) (.+)/i),b=d?{url:d[2],type:d[1]}:{url:b};d=f(b,!!c);-1<d&&g.splice(d,1);null!=c&&(b.fixture=c,g.push(b))}else a.each(b,function(a,b){k(b,a)})},l=a.replacer;a.extend(a.fixture,{_similar:function(b,c,d){return d?a.Object.same(b,c,{fixture:null}):a.Object.subset(b,c,a.fixture._compare)},_compare:{url:function(a,b){return!!k._getData(b,
a)},fixture:null,type:"i"},_getData:function(b,c){var d=[],e=b.replace(".","\\.").replace("?","\\?"),f=RegExp(e.replace(l,function(a,b){d.push(b);return"([^/]+)"})+"$").exec(c),g={};if(!f)return null;f.shift();a.each(d,function(a){g[a]=f.shift()});return g},store:function(b,c,d,e){var f=0,g=function(a){for(var b=0;b<k.length;b++)if(a==k[b].id)return k[b]},h={},i,k;a.isArray(b)&&"string"===typeof b[0]?(i=b,b=c,c=d,d=e):"string"===typeof b&&(i=[b+"s",b],b=c,c=d,d=e);if("number"===typeof b)k=[],e=function(){k=
[];for(var d=0;d<b;d++){var e=c(d,k);e.id||(e.id=d);f=Math.max(e.id+1,f+1)||k.length;k.push(e)}a.isArray(i)&&(a.fixture["~"+i[0]]=k,a.fixture["-"+i[0]]=h.findAll,a.fixture["-"+i[1]]=h.findOne,a.fixture["-"+i[1]+"Update"]=h.update,a.fixture["-"+i[1]+"Destroy"]=h.destroy,a.fixture["-"+i[1]+"Create"]=h.create)};else var d=c,l=b,e=function(){k=l.slice(0)};a.extend(h,{findAll:function(b){var b=b||{},c=k.slice(0);b.data=b.data||{};a.each((b.data.order||[]).slice(0).reverse(),function(a){var b=a.split(" ");
c=c.sort(function(a,c){return"ASC"!==b[1].toUpperCase()?a[b[0]]<c[b[0]]?1:a[b[0]]===c[b[0]]?0:-1:a[b[0]]<c[b[0]]?-1:a[b[0]]===c[b[0]]?0:1})});a.each((b.data.group||[]).slice(0).reverse(),function(a){var b=a.split(" ");c=c.sort(function(a,c){return a[b[0]]>c[b[0]]})});var e=parseInt(b.data.offset,10)||0,f=parseInt(b.data.limit,10)||k.length-e,g=0,h;for(h in b.data)if(g=0,void 0!==b.data[h]&&(-1!==h.indexOf("Id")||-1!==h.indexOf("_id")))for(;g<c.length;)b.data[h]!=c[g][h]?c.splice(g,1):g++;if("function"===
typeof d)for(g=0;g<c.length;)d(c[g],b)?g++:c.splice(g,1);else if("object"===typeof d)for(g=0;g<c.length;)a.Object.subset(c[g],b.data,d)?g++:c.splice(g,1);return{count:c.length,limit:b.data.limit,offset:b.data.offset,data:c.slice(e,e+f)}},findOne:function(a,b){var c=g(j(a));if("undefined"===typeof c)return b(404,"Requested resource not found");b(c)},update:function(b,c){var d=j(b),e=g(d);if("undefined"===typeof e)return c(404,"Requested resource not found");a.extend(e,b.data);c({id:d},{location:b.url||
"/"+j(b)})},destroy:function(a,b){var c=j(a);if("undefined"===typeof g(c))return b(404,"Requested resource not found");for(var d=0;d<k.length;d++)if(k[d].id==c){k.splice(d,1);break}return{}},create:function(b,d){var e="function"===typeof c?c(k.length,k):{};a.extend(e,b.data);e.id||(e.id=f++);k.push(e);d({id:e.id},{location:b.url+"/"+e.id})}});e();return a.extend({getId:j,find:function(a){return g(j(a))},reset:e},h)},rand:function o(a,b,c){if("number"===typeof a)return"number"===typeof b?a+Math.floor(Math.random()*
(b-a)):Math.floor(Math.random()*a);if(void 0===b)return o(a,o(a.length+1));var d=[],a=a.slice(0);c||(c=b);c=b+Math.round(o(c-b));for(b=0;b<c;b++)d.push(a.splice(o(a.length),1)[0]);return d},xhr:function(b){return a.extend({},{abort:a.noop,getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},open:a.noop,overrideMimeType:a.noop,readyState:4,responseText:"",responseXML:null,send:a.noop,setRequestHeader:a.noop,status:200,statusText:"OK"},b)},on:!0});a.fixture.delay=200;a.fixture.rootUrl=
b("");a.fixture["-handleFunction"]=function(b){"string"===typeof b.fixture&&a.fixture[b.fixture]&&(b.fixture=a.fixture[b.fixture]);return"function"===typeof b.fixture?(setTimeout(function(){b.success&&b.success.apply(null,b.fixture(b,"success"));b.complete&&b.complete.apply(null,b.fixture(b,"complete"))},a.fixture.delay),!0):!1};a.fixture.overwrites=g;a.fixture.make=a.fixture.store;return a.fixture});(function(){window._define=window.define;window.define=window.define.orig;window.System=window.System.orig})();
steal.executed("lib/external/CanJS/v2.2.6/can.custom.js");steal("vendor/highcharts-release/highcharts.js").then("vendor/highcharts-release/highcharts-more.js","vendor/highcharts-release/modules/exporting.src.js","vendor/highcharts-release/modules/data.src.js","lib/external/Highcharts-regression/highcharts-regression.js");steal.executed("lib/external/stealHighcharts.js");
(function(){function a(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function b(){var a,b=arguments,c,d={},e=function(a,b){var c,d;"object"!==typeof a&&(a={});for(d in b)b.hasOwnProperty(d)&&(c=b[d],a[d]=c&&"object"===typeof c&&"[object Array]"!==Object.prototype.toString.call(c)&&"renderTo"!==d&&"number"!==typeof c.nodeType?e(a[d]||{},c):b[d]);return a};!0===b[0]&&(d=b[1],b=Array.prototype.slice.call(b,2));c=b.length;for(a=0;a<c;a++)d=e(d,b[a]);return d}function c(a,b){return parseInt(a,b||
10)}function d(a){return"string"===typeof a}function e(a){return"object"===typeof a}function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a){return"number"===typeof a}function f(a){return ia.log(a)/ia.LN10}function i(a){return ia.pow(10,a)}function j(a,b){for(var c=a.length;c--;)if(a[c]===b){a.splice(c,1);break}}function k(a){return a!==D&&null!==a}function l(a,b,c){var f,g;if(d(b))k(c)?a.setAttribute(b,c):a&&a.getAttribute&&(g=a.getAttribute(b));else if(k(b)&&e(b))for(f in b)a.setAttribute(f,
b[f]);return g}function n(a){return h(a)?a:[a]}function o(){var a=arguments,b,c,d=a.length;for(b=0;b<d;b++)if(c=a[b],"undefined"!==typeof c&&null!==c)return c}function t(b,c){bb&&!Ia&&(c&&c.opacity!==D)&&(c.filter="alpha(opacity="+100*c.opacity+")");a(b.style,c)}function s(b,c,d,e,f){b=I.createElement(b);c&&a(b,c);f&&t(b,{padding:0,border:Da,margin:0});d&&t(b,d);e&&e.appendChild(b);return b}function q(b,c){var d=function(){};d.prototype=new b;a(d.prototype,c);return d}function m(a,b,d,e){var f=oa.lang,
a=+a||0,g=-1===b?(a.toString().split(".")[1]||"").length:isNaN(b=ea(b))?2:b,b=void 0===d?f.decimalPoint:d,e=void 0===e?f.thousandsSep:e,f=0>a?"-":"",d=""+c(a=ea(a).toFixed(g)),h=3<d.length?d.length%3:0;return f+(h?d.substr(0,h)+e:"")+d.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+e)+(g?b+ea(a-d).toFixed(g).slice(2):"")}function r(a,b){return Array((b||2)+1-(""+a).length).join(0)+a}function u(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);a.unshift(d);return c.apply(this,
a)}}function w(a,b){for(var c="{",d=!1,e,f,g,h,i,j=[];-1!==(c=a.indexOf(c));){e=a.slice(0,c);if(d){f=e.split(":");g=f.shift().split(".");i=g.length;e=b;for(h=0;h<i;h++)e=e[g[h]];f.length&&(f=f.join(":"),g=/\.([0-9])/,h=oa.lang,/f$/.test(f)?(i=(i=f.match(g))?i[1]:-1,null!==e&&(e=m(e,i,h.decimalPoint,-1<f.indexOf(",")?h.thousandsSep:""))):e=xa(f,e))}j.push(e);a=a.slice(c+1);c=(d=!d)?"}":"{"}j.push(a);return j.join("")}function y(a){return ia.pow(10,la(ia.log(a)/ia.LN10))}function v(a,b,c,d){var e,c=
o(c,1);e=a/c;b||(b=[1,2,2.5,5,10],d&&!1===d.allowDecimals&&(1===c?b=[1,2,5,10]:0.1>=c&&(b=[1/c])));for(d=0;d<b.length&&!(a=b[d],e<=(b[d]+(b[d+1]||b[d]))/2);d++);return a*c}function z(){this.symbol=this.color=0}function E(a,b){var c=a.length,d,e;for(e=0;e<c;e++)a[e].ss_i=e;a.sort(function(a,c){d=b(a,c);return 0===d?a.ss_i-c.ss_i:d});for(e=0;e<c;e++)delete a[e].ss_i}function H(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function C(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}
function N(a,b){for(var c in a)a[c]&&a[c]!==b&&a[c].destroy&&a[c].destroy(),delete a[c]}function T(a){ba||(ba=s(ha));a&&ba.appendChild(a);ba.innerHTML=""}function K(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw c;O.console&&console.log(c)}function G(a){return parseFloat(a.toPrecision(14))}function B(a,b){Ea=o(a,b.animation)}function W(){var a=oa.global.useUTC,b=a?"getUTC":"get",c=a?"setUTC":"set";kb=6E4*(a&&oa.global.timezoneOffset||0);Db=a?Date.UTC:function(a,b,c,
d,e,f){return(new Date(a,b,o(c,1),o(d,0),o(e,0),o(f,0))).getTime()};Cb=b+"Minutes";ub=b+"Hours";Ib=b+"Day";lb=b+"Date";xb=b+"Month";pb=b+"FullYear";db=c+"Minutes";Ua=c+"Hours";Jb=c+"Date";Kb=c+"Month";Na=c+"FullYear"}function J(){}function Q(a,b,c,d){this.axis=a;this.pos=b;this.type=c||"";this.isNew=!0;!c&&!d&&this.addLabel()}function X(){this.init.apply(this,arguments)}function S(){this.init.apply(this,arguments)}function V(a,b,c,d,e){var f=a.chart.inverted;this.axis=a;this.isNegative=c;this.options=
b;this.x=d;this.total=null;this.points={};this.stack=e;this.alignOptions={align:b.align||(f?c?"left":"right":"center"),verticalAlign:b.verticalAlign||(f?"middle":c?"bottom":"top"),y:o(b.y,f?4:c?14:-6),x:o(b.x,f?c?-6:6:0)};this.textAlign=b.textAlign||(f?c?"right":"left":"center")}var D,I=document,O=window,ia=Math,M=ia.round,la=ia.floor,sa=ia.ceil,P=ia.max,ga=ia.min,ea=ia.abs,aa=ia.cos,Ja=ia.sin,na=ia.PI,L=2*na/360,p=navigator.userAgent,ua=O.opera,bb=/msie/i.test(p)&&!ua,wb=8===I.documentMode,Xa=/AppleWebKit/.test(p),
Oa=/Firefox/.test(p),nb=/(Mobile|Android|Windows Phone)/.test(p),La="http://www.w3.org/2000/svg",Ia=!!I.createElementNS&&!!I.createElementNS(La,"svg").createSVGRect,cb=Oa&&4>parseInt(p.split("Firefox/")[1],10),R=!Ia&&!bb&&!!I.createElement("canvas").getContext,Sa,hb,Ta={},U=0,ba,oa,xa,Ea,Ab,qa,Pa=function(){},Aa=[],gb=0,ha="div",Da="none",ob=/^[0-9]+$/,Ub="stroke-width",Db,kb,Cb,ub,Ib,lb,xb,pb,db,Ua,Jb,Kb,Na,ca={},Ga=O.Highcharts=O.Highcharts?K(16,!0):{};xa=function(b,c,d){if(!k(c)||isNaN(c))return"Invalid date";
var b=o(b,"%Y-%m-%d %H:%M:%S"),e=new Date(c-kb),f,g=e[ub](),h=e[Ib](),i=e[lb](),j=e[xb](),l=e[pb](),m=oa.lang,q=m.weekdays,e=a({a:q[h].substr(0,3),A:q[h],d:r(i),e:i,b:m.shortMonths[j],B:m.months[j],m:r(j+1),y:l.toString().substr(2,2),Y:l,H:r(g),I:r(g%12||12),l:g%12||12,M:r(e[Cb]()),p:12>g?"AM":"PM",P:12>g?"am":"pm",S:r(e.getSeconds()),L:r(M(c%1E3),3)},Ga.dateFormats);for(f in e)for(;-1!==b.indexOf("%"+f);)b=b.replace("%"+f,"function"===typeof e[f]?e[f](c):e[f]);return d?b.substr(0,1).toUpperCase()+
b.substr(1):b};z.prototype={wrapColor:function(a){this.color>=a&&(this.color=0)},wrapSymbol:function(a){this.symbol>=a&&(this.symbol=0)}};qa=function(){for(var a=0,b=arguments,c=b.length,d={};a<c;a++)d[b[a++]]=b[a];return d}("millisecond",1,"second",1E3,"minute",6E4,"hour",36E5,"day",864E5,"week",6048E5,"month",26784E5,"year",31556952E3);Ab={init:function(a,b,c){var b=b||"",d=a.shift,e=-1<b.indexOf("C"),f=e?7:3,g,b=b.split(" "),c=[].concat(c),h,i,j=function(a){for(g=a.length;g--;)"M"===a[g]&&a.splice(g+
1,0,a[g+1],a[g+2],a[g+1],a[g+2])};e&&(j(b),j(c));a.isArea&&(h=b.splice(b.length-6,6),i=c.splice(c.length-6,6));if(d<=c.length/f&&b.length===c.length)for(;d--;)c=[].concat(c).splice(0,f).concat(c);a.shift=0;if(b.length)for(a=c.length;b.length<a;)d=[].concat(b).splice(b.length-f,f),e&&(d[f-6]=d[f-2],d[f-5]=d[f-1]),b=b.concat(d);h&&(b=b.concat(h),c=c.concat(i));return[b,c]},step:function(a,b,c,d){var e=[],f=a.length;if(1===c)e=d;else if(f===b.length&&1>c)for(;f--;)d=parseFloat(a[f]),e[f]=isNaN(d)?a[f]:
c*parseFloat(b[f]-d)+d;else e=b;return e}};(function(b){O.HighchartsAdapter=O.HighchartsAdapter||b&&{init:function(a){var c=b.fx,e=c.step,f,g=b.Tween,h=g&&g.propHooks;f=b.cssHooks.opacity;b.extend(b.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}});b.each(["cur","_default","width","height","opacity"],function(a,b){var d=e,f;"cur"===b?d=c.prototype:"_default"===b&&g&&(d=h[b],b="set");(f=d[b])&&(d[b]=function(c){var d,c=a?c:this;if("align"!==c.prop)return d=c.elem,d.attr?d.attr(c.prop,
"cur"===b?D:c.now):f.apply(this,arguments)})});u(f,"get",function(a,b,c){return b.attr?b.opacity||0:a.call(this,b,c)});f=function(b){var c=b.elem,d;b.started||(d=a.init(c,c.d,c.toD),b.start=d[0],b.end=d[1],b.started=!0);c.attr("d",a.step(b.start,b.end,b.pos,c.toD))};g?h.d={set:f}:e.d=f;this.each=Array.prototype.forEach?function(a,b){return Array.prototype.forEach.call(a,b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(!1===b.call(a[c],a[c],c,a))return c};b.fn.highcharts=function(){var a="Chart",
b=arguments,c,e;this[0]&&(d(b[0])&&(a=b[0],b=Array.prototype.slice.call(b,1)),c=b[0],c!==D&&(c.chart=c.chart||{},c.chart.renderTo=this[0],new Ga[a](c,b[1]),e=this),c===D&&(e=Aa[l(this[0],"data-highcharts-chart")]));return e}},getScript:b.getScript,inArray:b.inArray,adapterRun:function(a,c){return b(a)[c]()},grep:b.grep,map:function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)c[d]=b.call(a[d],a[d],d,a);return c},offset:function(a){return b(a).offset()},addEvent:function(a,c,d){b(a).bind(c,d)},removeEvent:function(a,
c,d){var e=I.removeEventListener?"removeEventListener":"detachEvent";I[e]&&a&&!a[e]&&(a[e]=function(){});b(a).unbind(c,d)},fireEvent:function(c,d,e,f){var g=b.Event(d),h="detached"+d,i;!bb&&e&&(delete e.layerX,delete e.layerY,delete e.returnValue);a(g,e);c[d]&&(c[h]=c[d],c[d]=null);b.each(["preventDefault","stopPropagation"],function(a,b){var c=g[b];g[b]=function(){try{c.call(g)}catch(a){"preventDefault"===b&&(i=!0)}}});b(c).trigger(g);c[h]&&(c[d]=c[h],c[h]=null);f&&!g.isDefaultPrevented()&&!i&&f(g)},
washMouseEvent:function(a){var b=a.originalEvent||a;b.pageX===D&&(b.pageX=a.pageX,b.pageY=a.pageY);return b},animate:function(a,c,d){var e=b(a);a.style||(a.style={});c.d&&(a.toD=c.d,c.d=1);e.stop();c.opacity!==D&&a.attr&&(c.opacity+="px");e.animate(c,d)},stop:function(a){b(a).stop()}}})(O.jQuery);var Ha=O.HighchartsAdapter,da=Ha||{};Ha&&Ha.init.call(Ha,Ab);var qb=da.adapterRun,Bb=da.getScript,eb=da.inArray,A=da.each,ya=da.grep,ma=da.offset,Y=da.map,fa=da.addEvent,Ka=da.removeEvent,va=da.fireEvent,
Lb=da.washMouseEvent,Hb=da.animate,Eb=da.stop,da={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};oa={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #8085e8 #8d4653 #91e8e1".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.0.1/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.0.1/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",
plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1E3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},
dataLabels:b(da,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":m(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{marker:{},halo:{size:10,opacity:0.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1E3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},
shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Ia,backgroundColor:"rgba(249, 249, 249, .85)",
borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">\ufffd?</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:nb?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",
whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var Qa=oa.plotOptions,Ha=Qa.line;W();var Mb=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,fb=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,vb=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Va=function(a){var d=[],
e,f;(function(a){a&&a.stops?f=Y(a.stops,function(a){return Va(a[1])}):(e=Mb.exec(a))?d=[c(e[1]),c(e[2]),c(e[3]),parseFloat(e[4],10)]:(e=fb.exec(a))?d=[c(e[1],16),c(e[2],16),c(e[3],16),1]:(e=vb.exec(a))&&(d=[c(e[1]),c(e[2]),c(e[3]),1])})(a);return{get:function(c){var e;f?(e=b(a),e.stops=[].concat(e.stops),A(f,function(a,b){e.stops[b]=[e.stops[b][0],a.get(c)]})):e=d&&!isNaN(d[0])?"rgb"===c?"rgb("+d[0]+","+d[1]+","+d[2]+")":"a"===c?d[3]:"rgba("+d.join(",")+")":a;return e},brighten:function(a){if(f)A(f,
function(b){b.brighten(a)});else if(g(a)&&0!==a){var b;for(b=0;3>b;b++)d[b]+=c(255*a),0>d[b]&&(d[b]=0),255<d[b]&&(d[b]=255)}return this},rgba:d,setOpacity:function(a){d[3]=a;return this}}};J.prototype={init:function(a,b){this.element="span"===b?s(b):I.createElementNS(La,b);this.renderer=a},opacity:1,animate:function(a,c,d){c=o(c,Ea,!0);Eb(this);c?(c=b(c,{}),d&&(c.complete=d),Hb(this,a,c)):(this.attr(a),d&&d())},colorGradient:function(a,c,d){var e=this.renderer,f,g,i,j,l,m,q,o,n,u,r=[];a.linearGradient?
g="linearGradient":a.radialGradient&&(g="radialGradient");if(g){i=a[g];j=e.gradients;m=a.stops;n=d.radialReference;h(i)&&(a[g]=i={x1:i[0],y1:i[1],x2:i[2],y2:i[3],gradientUnits:"userSpaceOnUse"});"radialGradient"===g&&n&&!k(i.gradientUnits)&&(i=b(i,{cx:n[0]-n[2]/2+i.cx*n[2],cy:n[1]-n[2]/2+i.cy*n[2],r:i.r*n[2],gradientUnits:"userSpaceOnUse"}));for(u in i)"id"!==u&&r.push(u,i[u]);for(u in m)r.push(m[u]);r=r.join(",");j[r]?a=j[r].attr("id"):(i.id=a="highcharts-"+U++,j[r]=l=e.createElement(g).attr(i).add(e.defs),
l.stops=[],A(m,function(a){0===a[1].indexOf("rgba")?(f=Va(a[1]),q=f.get("rgb"),o=f.get("a")):(q=a[1],o=1);a=e.createElement("stop").attr({offset:a[0],"stop-color":q,"stop-opacity":o}).add(l);l.stops.push(a)}));d.setAttribute(c,"url("+e.url+"#"+a+")")}},attr:function(a,b){var c,d,e=this.element,f,g=this,h;"string"===typeof a&&b!==D&&(c=a,a={},a[c]=b);if("string"===typeof a)g=(this[a+"Getter"]||this._defaultGetter).call(this,a,e);else{for(c in a){d=a[c];h=!1;this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c)&&
(f||(this.symbolAttr(a),f=!0),h=!0);if(this.rotation&&("x"===c||"y"===c))this.doTransform=!0;h||(this[c+"Setter"]||this._defaultSetter).call(this,d,c,e);this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(c)&&this.updateShadows(c,d)}this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return g},updateShadows:function(a,b){for(var c=this.shadows,d=c.length;d--;)c[d].setAttribute(a,"height"===a?P(b-(c[d].cutHeight||0),0):"d"===a?this.d:b)},addClass:function(a){var b=this.element,
c=l(b,"class")||"";-1===c.indexOf(a)&&l(b,"class",c+" "+a);return this},symbolAttr:function(a){var b=this;A("x y r start end width height innerR anchorX anchorY".split(" "),function(c){b[c]=o(a[c],b[c])});b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path",a?"url("+this.renderer.url+"#"+a.id+")":Da)},crisp:function(a){var b,c={},d,e=a.strokeWidth||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;d=M(e)%2/2;a.x=la(a.x||this.x||
0)+d;a.y=la(a.y||this.y||0)+d;a.width=la((a.width||this.width||0)-2*d);a.height=la((a.height||this.height||0)-2*d);a.strokeWidth=e;for(b in a)this[b]!==a[b]&&(this[b]=c[b]=a[b]);return c},css:function(b){var d=this.styles,e={},f=this.element,g,h,i="";g=!d;b&&b.color&&(b.fill=b.color);if(d)for(h in b)b[h]!==d[h]&&(e[h]=b[h],g=!0);if(g){g=this.textWidth=b&&b.width&&"text"===f.nodeName.toLowerCase()&&c(b.width);d&&(b=a(d,e));this.styles=b;g&&(R||!Ia&&this.renderer.forExport)&&delete b.width;if(bb&&!Ia)t(this.element,
b);else{d=function(a,b){return"-"+b.toLowerCase()};for(h in b)i+=h.replace(/([A-Z])/g,d)+":"+b[h]+";";l(f,"style",i)}g&&this.added&&this.renderer.buildText(this)}return this},on:function(a,b){var c=this,d=c.element;hb&&"click"===a?(d.ontouchstart=function(a){c.touchEventFired=Date.now();a.preventDefault();b.call(d,a)},d.onclick=function(a){(-1===p.indexOf("Android")||1100<Date.now()-(c.touchEventFired||0))&&b.call(d,a)}):d["on"+a]=b;return this},setRadialReference:function(a){this.element.radialReference=
a;return this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){this.inverted=!0;this.updateTransform();return this},updateTransform:function(){var a=this.translateX||0,b=this.translateY||0,c=this.scaleX,d=this.scaleY,e=this.inverted,f=this.rotation,g=this.element;e&&(a+=this.attr("width"),b+=this.attr("height"));a=["translate("+a+","+b+")"];e?a.push("rotate(90) scale(-1,1)"):f&&a.push("rotate("+f+" "+(g.getAttribute("x")||0)+" "+(g.getAttribute("y")||0)+")");
(k(c)||k(d))&&a.push("scale("+o(c,1)+" "+o(d,1)+")");a.length&&g.setAttribute("transform",a.join(" "))},toFront:function(){var a=this.element;a.parentNode.appendChild(a);return this},align:function(a,b,c){var e,f,g,h,i={};f=this.renderer;g=f.alignedObjects;if(a){if(this.alignOptions=a,this.alignByTranslate=b,!c||d(c))this.alignTo=e=c||"renderer",j(g,this),g.push(this),c=null}else a=this.alignOptions,b=this.alignByTranslate,e=this.alignTo;c=o(c,f[e],f);e=a.align;f=a.verticalAlign;g=(c.x||0)+(a.x||
0);h=(c.y||0)+(a.y||0);if("right"===e||"center"===e)g+=(c.width-(a.width||0))/{right:1,center:2}[e];i[b?"translateX":"x"]=M(g);if("bottom"===f||"middle"===f)h+=(c.height-(a.height||0))/({bottom:1,middle:2}[f]||1);i[b?"translateY":"y"]=M(h);this[this.placed?"animate":"attr"](i);this.placed=!0;this.alignAttr=i;return this},getBBox:function(){var b=this.bBox,c=this.renderer,d,e,f=this.rotation;d=this.element;var g=this.styles,h=f*L;e=this.textStr;var i;if(""===e||ob.test(e))i="num."+e.toString().length+
(g?"|"+g.fontSize+"|"+g.fontFamily:"");i&&(b=c.cache[i]);if(!b){if(d.namespaceURI===La||c.forExport){try{b=d.getBBox?a({},d.getBBox()):{width:d.offsetWidth,height:d.offsetHeight}}catch(j){}if(!b||0>b.width)b={width:0,height:0}}else b=this.htmlGetBBox();if(c.isSVG&&(d=b.width,e=b.height,bb&&g&&("11px"===g.fontSize&&"16.9"===e.toPrecision(3))&&(b.height=e=14),f))b.width=ea(e*Ja(h))+ea(d*aa(h)),b.height=ea(e*aa(h))+ea(d*Ja(h));this.bBox=b;i&&(c.cache[i]=b)}return b},show:function(a){return a&&this.element.namespaceURI===
La?(this.element.removeAttribute("visibility"),this):this.attr({visibility:a?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(a){var b=this;b.animate({opacity:0},{duration:a||150,complete:function(){b.hide()}})},add:function(a){var b=this.renderer,d=a||b,e=d.element||b.box,f=this.element,g=this.zIndex,h,i;a&&(this.parentGroup=a);this.parentInverted=a&&a.inverted;void 0!==this.textStr&&b.buildText(this);g&&(d.handleZ=!0,g=c(g));if(d.handleZ){a=e.childNodes;
for(h=0;h<a.length;h++)if(b=a[h],d=l(b,"zIndex"),b!==f&&(c(d)>g||!k(g)&&k(d))){e.insertBefore(f,b);i=!0;break}}i||e.appendChild(f);this.added=!0;if(this.onAdd)this.onAdd();return this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a=this,b=a.element||{},c=a.shadows,d=a.renderer.isSVG&&"SPAN"===b.nodeName&&a.parentGroup,e,f;b.onclick=b.onmouseout=b.onmouseover=b.onmousemove=b.point=null;Eb(a);a.clipPath&&(a.clipPath=a.clipPath.destroy());if(a.stops){for(f=
0;f<a.stops.length;f++)a.stops[f]=a.stops[f].destroy();a.stops=null}a.safeRemoveChild(b);for(c&&A(c,function(b){a.safeRemoveChild(b)});d&&0===d.div.childNodes.length;)b=d.parentGroup,a.safeRemoveChild(d.div),delete d.div,d=b;a.alignTo&&j(a.renderer.alignedObjects,a);for(e in a)delete a[e];return null},shadow:function(a,b,c){var d=[],e,f,g=this.element,h,i,j,k;if(a){i=o(a.width,3);j=(a.opacity||0.15)/i;k=this.parentInverted?"(-1,-1)":"("+o(a.offsetX,1)+", "+o(a.offsetY,1)+")";for(e=1;e<=i;e++)f=g.cloneNode(0),
h=2*i+1-2*e,l(f,{isShadow:"true",stroke:a.color||"black","stroke-opacity":j*e,"stroke-width":h,transform:"translate"+k,fill:Da}),c&&(l(f,"height",P(l(f,"height")-h,0)),f.cutHeight=h),b?b.element.appendChild(f):g.parentNode.insertBefore(f,g),d.push(f);this.shadows=d}return this},xGetter:function(a){"circle"===this.element.nodeName&&(a={x:"cx",y:"cy"}[a]||a);return this._defaultGetter(a)},_defaultGetter:function(a){a=o(this[a],this.element?this.element.getAttribute(a):null,0);/^[0-9\.]+$/.test(a)&&
(a=parseFloat(a));return a},dSetter:function(a,b,c){a&&a.join&&(a=a.join(" "));/(NaN| {2}|^$)/.test(a)&&(a="M 0 0");c.setAttribute(b,a);this[b]=a},dashstyleSetter:function(a){var b;if(a=a&&a.toLowerCase()){a=a.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(b=a.length;b--;)a[b]=c(a[b])*this.element.getAttribute("stroke-width");
a=a.join(",");this.element.setAttribute("stroke-dasharray",a)}},alignSetter:function(a){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[a])},opacitySetter:function(a,b,c){this[b]=a;c.setAttribute(b,a)},"stroke-widthSetter":function(a,b,c){0===a&&(a=1.0E-5);this.strokeWidth=a;c.setAttribute(b,a)},titleSetter:function(a){var b=this.element.getElementsByTagName("title")[0];b||(b=I.createElementNS(La,"title"),this.element.appendChild(b));b.textContent=a},textSetter:function(a){a!==
this.textStr&&(delete this.bBox,this.textStr=a,this.added&&this.renderer.buildText(this))},fillSetter:function(a,b,c){"string"===typeof a?c.setAttribute(b,a):a&&this.colorGradient(a,b,c)},zIndexSetter:function(a,b,c){c.setAttribute(b,a);this[b]=a},_defaultSetter:function(a,b,c){c.setAttribute(b,a)}};J.prototype.yGetter=J.prototype.xGetter;J.prototype.translateXSetter=J.prototype.translateYSetter=J.prototype.rotationSetter=J.prototype.verticalAlignSetter=J.prototype.scaleXSetter=J.prototype.scaleYSetter=
function(a,b){this[b]=a;this.doTransform=!0};J.prototype.strokeSetter=J.prototype.fillSetter;var Ya=function(){this.init.apply(this,arguments)};Ya.prototype={Element:J,init:function(a,b,c,d,e){var f=location,g,d=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(d));g=d.element;a.appendChild(g);-1===a.innerHTML.indexOf("xmlns")&&l(g,"xmlns",La);this.isSVG=!0;this.box=g;this.boxWrapper=d;this.alignedObjects=[];this.url=(Oa||Xa)&&I.getElementsByTagName("base").length?f.href.replace(/#.*?$/,
"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(I.createTextNode("Created with Highcharts 4.0.1"));this.defs=this.createElement("defs").add();this.forExport=e;this.gradients={};this.cache={};this.setSize(b,c,!1);var h;Oa&&a.getBoundingClientRect&&(this.subPixelFix=b=function(){t(a,{left:0,top:0});h=a.getBoundingClientRect();t(a,{left:sa(h.left)-h.left+"px",top:sa(h.top)-h.top+"px"})},b(),fa(O,"resize",b))},getStyle:function(b){return this.style=
a({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},b)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var a=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();N(this.gradients||{});this.gradients=null;a&&(this.defs=a.destroy());this.subPixelFix&&Ka(O,"resize",this.subPixelFix);return this.alignedObjects=null},createElement:function(a){var b=new this.Element;b.init(this,a);return b},draw:function(){},
buildText:function(a){for(var b=a.element,d=this,e=d.forExport,f=o(a.textStr,"").toString(),g=-1!==f.indexOf("<"),h=b.childNodes,i,j,k=l(b,"x"),m=a.styles,q=a.textWidth,n=m&&m.lineHeight,u=h.length,r=function(a){return n?c(n):d.fontMetrics(/(px|em)$/.test(a&&a.style.fontSize)?a.style.fontSize:m&&m.fontSize||d.style.fontSize||12).h};u--;)b.removeChild(h[u]);!g&&-1===f.indexOf(" ")?b.appendChild(I.createTextNode(f)):(i=/<.*style="([^"]+)".*>/,j=/<.*href="(http[^"]+)".*>/,q&&!a.added&&this.box.appendChild(b),
f=g?f.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[f],""===f[f.length-1]&&f.pop(),A(f,function(c,f){var g,h=0,c=c.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");g=c.split("|||");A(g,function(c){if(""!==c||1===g.length){var o={},n=I.createElementNS(La,"tspan"),u;i.test(c)&&(u=c.match(i)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),
l(n,"style",u));j.test(c)&&!e&&(l(n,"onclick",'location.href="'+c.match(j)[1]+'"'),t(n,{cursor:"pointer"}));c=(c.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(" "!==c&&(n.appendChild(I.createTextNode(c)),h?o.dx=0:f&&null!==k&&(o.x=k),l(n,o),!h&&f&&(!Ia&&e&&t(n,{display:"block"}),l(n,"dy",r(n),Xa&&n.offsetHeight)),b.appendChild(n),h++,q))for(var c=c.replace(/([^\^])-/g,"$1- ").split(" "),o=1<c.length&&"nowrap"!==m.whiteSpace,ka,s,p=a._clipHeight,w=[],ta=r(),Fa=1;o&&(c.length||
w.length);)delete a.bBox,ka=a.getBBox(),s=ka.width,!Ia&&d.forExport&&(s=d.measureSpanWidth(n.firstChild.data,a.styles)),ka=s>q,!ka||1===c.length?(c=w,w=[],c.length&&(Fa++,p&&Fa*ta>p?(c=["..."],a.attr("title",a.textStr)):(n=I.createElementNS(La,"tspan"),l(n,{dy:ta,x:k}),u&&l(n,"style",u),b.appendChild(n),s>q&&(q=s)))):(n.removeChild(n.firstChild),w.unshift(c.pop())),c.length&&n.appendChild(I.createTextNode(c.join(" ").replace(/- /g,"-")))}})}))},button:function(c,d,e,f,g,h,i,j,k){var l=this.label(c,
d,e,k,null,null,null,null,"button"),m=0,q,o,n,u,r,s,c={x1:0,y1:0,x2:0,y2:1},g=b({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:c,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},g);n=g.style;delete g.style;h=b(g,{stroke:"#68A",fill:{linearGradient:c,stops:[[0,"#FFF"],[1,"#ACF"]]}},h);u=h.style;delete h.style;i=b(g,{stroke:"#68A",fill:{linearGradient:c,stops:[[0,"#9BD"],[1,"#CDF"]]}},i);r=i.style;delete i.style;j=b(g,{style:{color:"#CCC"}},j);s=j.style;delete j.style;
fa(l.element,bb?"mouseover":"mouseenter",function(){3!==m&&l.attr(h).css(u)});fa(l.element,bb?"mouseout":"mouseleave",function(){3!==m&&(q=[g,h,i][m],o=[n,u,r][m],l.attr(q).css(o))});l.setState=function(a){(l.state=m=a)?2===a?l.attr(i).css(r):3===a&&l.attr(j).css(s):l.attr(g).css(n)};return l.on("click",function(){3!==m&&f.call(l)}).attr(g).css(a({cursor:"default"},n))},crispLine:function(a,b){a[1]===a[4]&&(a[1]=a[4]=M(a[1])-b%2/2);a[2]===a[5]&&(a[2]=a[5]=M(a[2])+b%2/2);return a},path:function(b){var c=
{fill:Da};h(b)?c.d=b:e(b)&&a(c,b);return this.createElement("path").attr(c)},circle:function(a,b,c){a=e(a)?a:{x:a,y:b,r:c};b=this.createElement("circle");b.xSetter=function(a){this.element.setAttribute("cx",a)};b.ySetter=function(a){this.element.setAttribute("cy",a)};return b.attr(a)},arc:function(a,b,c,d,f,g){e(a)&&(b=a.y,c=a.r,d=a.innerR,f=a.start,g=a.end,a=a.x);a=this.symbol("arc",a||0,b||0,c||0,c||0,{innerR:d||0,start:f||0,end:g||0});a.r=c;return a},rect:function(a,b,c,d,f,g){var f=e(a)?a.r:f,
h=this.createElement("rect"),a=e(a)?a:a===D?{}:{x:a,y:b,width:P(c,0),height:P(d,0)};g!==D&&(a.strokeWidth=g,a=h.crisp(a));f&&(a.r=f);h.rSetter=function(a){l(this.element,{rx:a,ry:a})};return h.attr(a)},setSize:function(a,b,c){var d=this.alignedObjects,e=d.length;this.width=a;this.height=b;for(this.boxWrapper[o(c,!0)?"animate":"attr"]({width:a,height:b});e--;)d[e].align()},g:function(a){var b=this.createElement("g");return k(a)?b.attr({"class":"highcharts-"+a}):b},image:function(b,c,d,e,f){var g={preserveAspectRatio:Da};
1<arguments.length&&a(g,{x:c,y:d,width:e,height:f});g=this.createElement("image").attr(g);g.element.setAttributeNS?g.element.setAttributeNS("http://www.w3.org/1999/xlink","href",b):g.element.setAttribute("hc-svg-href",b);return g},symbol:function(b,c,d,e,f,g){var h,i=this.symbols[b],i=i&&i(M(c),M(d),e,f,g),j=/^url\((.*?)\)$/,k,l;i?(h=this.path(i),a(h,{symbolName:b,x:c,y:d,width:e,height:f}),g&&a(h,g)):j.test(b)&&(l=function(a,b){a.element&&(a.attr({width:b[0],height:b[1]}),a.alignByTranslate||a.translate(M((e-
b[0])/2),M((f-b[1])/2)))},k=b.match(j)[1],b=Ta[k],h=this.image(k).attr({x:c,y:d}),h.isImg=!0,b?l(h,b):(h.attr({width:0,height:0}),s("img",{onload:function(){l(h,Ta[k]=[this.width,this.height])},src:k})));return h},symbols:{circle:function(a,b,c,d){var e=0.166*c;return["M",a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,
b,c,d){return["M",a,b,"L",a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var f=e.start,c=e.r||c||d,g=e.end-0.001,d=e.innerR,h=e.open,i=aa(f),j=Ja(f),k=aa(g),g=Ja(g),e=e.end-f<na?0:1;return["M",a+c*i,b+c*j,"A",c,c,0,e,1,a+c*k,b+c*g,h?"M":"L",a+d*k,b+d*g,"A",d,d,0,e,0,a+d*i,b+d*j,h?"":"Z"]},callout:function(a,b,c,d,e){var f=ga(e&&e.r||0,c,d),g=f+6,h=e&&e.anchorX,i=e&&e.anchorY,e=M(e.strokeWidth||0)%2/2,a=a+e,b=b+e,e=["M",
a+f,b,"L",a+c-f,b,"C",a+c,b,a+c,b,a+c,b+f,"L",a+c,b+d-f,"C",a+c,b+d,a+c,b+d,a+c-f,b+d,"L",a+f,b+d,"C",a,b+d,a,b+d,a,b+d-f,"L",a,b+f,"C",a,b,a,b,a+f,b];h&&h>c&&i>b+g&&i<b+d-g?e.splice(13,3,"L",a+c,i-6,a+c+6,i,a+c,i+6,a+c,b+d-f):h&&0>h&&i>b+g&&i<b+d-g?e.splice(33,3,"L",a,i+6,a-6,i,a,i-6,a,b+f):i&&i>d&&h>a+g&&h<a+c-g?e.splice(23,3,"L",h+6,b+d,h,b+d+6,h-6,b+d,a+f,b+d):i&&0>i&&h>a+g&&h<a+c-g&&e.splice(3,3,"L",h-6,b,h,b-6,h+6,b,c-f,b);return e}},clipRect:function(a,b,c,d){var e="highcharts-"+U++,f=this.createElement("clipPath").attr({id:e}).add(this.defs),
a=this.rect(a,b,c,d,0).add(f);a.id=e;a.clipPath=f;return a},text:function(a,b,c,d){var e=R||!Ia&&this.forExport,f={};if(d&&!this.forExport)return this.html(a,b,c);f.x=Math.round(b||0);c&&(f.y=Math.round(c));if(a||0===a)f.text=a;a=this.createElement("text").attr(f);e&&a.css({position:"absolute"});d||(a.xSetter=function(a,b,c){var d=c.childNodes,e,f;for(f=1;f<d.length;f++)e=d[f],e.getAttribute("x")===c.getAttribute("x")&&e.setAttribute("x",a);c.setAttribute(b,a)});return a},fontMetrics:function(a){var a=
a||this.style.fontSize,a=/px/.test(a)?c(a):/em/.test(a)?12*parseFloat(a):12,a=24>a?a+4:M(1.2*a),b=M(0.8*a);return{h:a,b:b}},label:function(c,d,e,f,g,h,i,j,l){function m(){var b,c;b=r.element.style;t=(void 0===v||void 0===U||u.styles.textAlign)&&r.textStr&&r.getBBox();u.width=(v||t.width||0)+2*w+y;u.height=(U||t.height||0)+2*w;C=w+n.fontMetrics(b&&b.fontSize).b;W&&(s||(b=M(-p*w),c=j?-C:0,u.box=s=f?n.symbol(f,b,c,u.width,u.height,E):n.rect(b,c,u.width,u.height,0,E[Ub]),s.attr("fill",Da).add(u)),s.isImg||
s.attr(a({width:M(u.width),height:M(u.height)},E)),E=null)}function q(){var a=u.styles,a=a&&a.textAlign,b=y+w*(1-p),c;c=j?0:C;if(k(v)&&t&&("center"===a||"right"===a))b+={center:0.5,right:1}[a]*(v-t.width);if(b!==r.x||c!==r.y)r.attr("x",b),c!==D&&r.attr("y",c);r.x=b;r.y=c}function o(a,b){s?s.attr(a,b):E[a]=b}var n=this,u=n.g(l),r=n.text("",0,0,i).attr({zIndex:1}),s,t,p=0,w=3,y=0,v,U,ba,z,oa=0,E={},C,W;u.onAdd=function(){r.add(u);u.attr({text:c||"",x:d,y:e});s&&k(g)&&u.attr({anchorX:g,anchorY:h})};
u.widthSetter=function(a){v=a};u.heightSetter=function(a){U=a};u.paddingSetter=function(a){k(a)&&a!==w&&(w=a,q())};u.paddingLeftSetter=function(a){k(a)&&a!==y&&(y=a,q())};u.alignSetter=function(a){p={left:0,center:0.5,right:1}[a]};u.textSetter=function(a){a!==D&&r.textSetter(a);m();q()};u["stroke-widthSetter"]=function(a,b){a&&(W=!0);oa=a%2/2;o(b,a)};u.strokeSetter=u.fillSetter=u.rSetter=function(a,b){"fill"===b&&a&&(W=!0);o(b,a)};u.anchorXSetter=function(a,b){g=a;o(b,a+oa-ba)};u.anchorYSetter=function(a,
b){h=a;o(b,a-z)};u.xSetter=function(a){u.x=a;p&&(a-=p*((v||t.width)+w));ba=M(a);u.attr("translateX",ba)};u.ySetter=function(a){z=u.y=M(a);u.attr("translateY",z)};var H=u.css;return a(u,{css:function(a){if(a){var c={},a=b(a);A("fontSize fontWeight fontFamily color lineHeight width textDecoration textShadow".split(" "),function(b){a[b]!==D&&(c[b]=a[b],delete a[b])});r.css(c)}return H.call(u,a)},getBBox:function(){return{width:t.width+2*w,height:t.height+2*w,x:t.x-w,y:t.y-w}},shadow:function(a){s&&s.shadow(a);
return u},destroy:function(){Ka(u.element,"mouseenter");Ka(u.element,"mouseleave");r&&(r=r.destroy());s&&(s=s.destroy());J.prototype.destroy.call(u);u=n=m=q=o=null}})}};Sa=Ya;a(J.prototype,{htmlCss:function(b){var c=this.element;if(c=b&&"SPAN"===c.tagName&&b.width)delete b.width,this.textWidth=c,this.updateTransform();this.styles=a(this.styles,b);t(this.element,b);return this},htmlGetBBox:function(){var a=this.element,b=this.bBox;b||("text"===a.nodeName&&(a.style.position="absolute"),b=this.bBox=
{x:a.offsetLeft,y:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight});return b},htmlUpdateTransform:function(){if(this.added){var a=this.renderer,b=this.element,d=this.translateX||0,e=this.translateY||0,f=this.x||0,g=this.y||0,h=this.textAlign||"left",i={left:0,center:0.5,right:1}[h],j=this.shadows;t(b,{marginLeft:d,marginTop:e});j&&A(j,function(a){t(a,{marginLeft:d+1,marginTop:e+1})});this.inverted&&A(b.childNodes,function(c){a.invertChild(c,b)});if("SPAN"===b.tagName){var l=this.rotation,m,
q=c(this.textWidth),n=[l,h,b.innerHTML,this.textWidth].join();if(n!==this.cTT){m=a.fontMetrics(b.style.fontSize).b;k(l)&&this.setSpanRotation(l,i,m);j=o(this.elemWidth,b.offsetWidth);if(j>q&&/[ \-]/.test(b.textContent||b.innerText))t(b,{width:q+"px",display:"block",whiteSpace:"normal"}),j=q;this.getSpanCorrection(j,m,i,l,h)}t(b,{left:f+(this.xCorr||0)+"px",top:g+(this.yCorr||0)+"px"});Xa&&(m=b.offsetHeight);this.cTT=n}}else this.alignOnAdd=!0},setSpanRotation:function(a,b,c){var d={},e=bb?"-ms-transform":
Xa?"-webkit-transform":Oa?"MozTransform":ua?"-o-transform":"";d[e]=d.transform="rotate("+a+"deg)";d[e+(Oa?"Origin":"-origin")]=d.transformOrigin=100*b+"% "+c+"px";t(this.element,d)},getSpanCorrection:function(a,b,c){this.xCorr=-a*c;this.yCorr=-b}});a(Ya.prototype,{html:function(b,c,d){var e=this.createElement("span"),f=e.element,g=e.renderer;e.textSetter=function(a){a!==f.innerHTML&&delete this.bBox;f.innerHTML=this.textStr=a};e.xSetter=e.ySetter=e.alignSetter=e.rotationSetter=function(a,b){"align"===
b&&(b="textAlign");e[b]=a;e.htmlUpdateTransform()};e.attr({text:b,x:M(c),y:M(d)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize});e.css=e.htmlCss;g.isSVG&&(e.add=function(b){var c,d=g.box.parentNode,h=[];if(this.parentGroup=b){if(c=b.div,!c){for(;b;)h.push(b),b=b.parentGroup;A(h.reverse(),function(b){var e;c=b.div=b.div||s(ha,{className:l(b.element,"class")},{position:"absolute",left:(b.translateX||0)+"px",top:(b.translateY||0)+"px"},c||
d);e=c.style;a(b,{translateXSetter:function(a,c){e.left=a+"px";b[c]=a;b.doTransform=!0},translateYSetter:function(a,c){e.top=a+"px";b[c]=a;b.doTransform=!0},visibilitySetter:function(a,b){e[b]=a}})})}}else c=d;c.appendChild(f);e.added=!0;e.alignOnAdd&&e.htmlUpdateTransform();return e});return e}});var Ma;if(!Ia&&!R){Ga.VMLElement=Ma={init:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ","absolute",";"],e=b===ha;("shape"===b||e)&&d.push("left:0;top:0;width:1px;height:1px;");d.push("visibility: ",
e?"hidden":"visible");c.push(' style="',d.join(""),'"/>');b&&(c=e||"span"===b||"img"===b?c.join(""):a.prepVML(c),this.element=s(c));this.renderer=a},add:function(a){var b=this.renderer,c=this.element,d=b.box,d=a?a.element||a:d;a&&a.inverted&&b.invertChild(c,d);d.appendChild(c);this.added=!0;this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform();if(this.onAdd)this.onAdd();return this},updateTransform:J.prototype.htmlUpdateTransform,setSpanRotation:function(){var a=this.rotation,b=aa(a*
L),c=Ja(a*L);t(this.element,{filter:a?["progid:DXImageTransform.Microsoft.Matrix(M11=",b,", M12=",-c,", M21=",c,", M22=",b,", sizingMethod='auto expand')"].join(""):Da})},getSpanCorrection:function(a,b,c,d,e){var f=d?aa(d*L):1,g=d?Ja(d*L):0,h=o(this.elemHeight,this.element.offsetHeight),i;this.xCorr=0>f&&-a;this.yCorr=0>g&&-h;i=0>f*g;this.xCorr+=g*b*(i?1-c:c);this.yCorr-=f*b*(d?i?c:1-c:1);e&&"left"!==e&&(this.xCorr-=a*c*(0>f?-1:1),d&&(this.yCorr-=h*c*(0>g?-1:1)),t(this.element,{textAlign:e}))},pathToVML:function(a){for(var b=
a.length,c=[];b--;)if(g(a[b]))c[b]=M(10*a[b])-5;else if("Z"===a[b])c[b]="x";else if(c[b]=a[b],a.isArc&&("wa"===a[b]||"at"===a[b]))c[b+5]===c[b+7]&&(c[b+7]+=a[b+7]>a[b+5]?1:-1),c[b+6]===c[b+8]&&(c[b+8]+=a[b+8]>a[b+6]?1:-1);return c.join(" ")||"x"},clip:function(a){var b=this,c;a?(c=a.members,j(c,b),c.push(b),b.destroyClip=function(){j(c,b)},a=a.getCSS(b)):(b.destroyClip&&b.destroyClip(),a={clip:wb?"inherit":"rect(auto)"});return b.css(a)},css:J.prototype.htmlCss,safeRemoveChild:function(a){a.parentNode&&
T(a)},destroy:function(){this.destroyClip&&this.destroyClip();return J.prototype.destroy.apply(this)},on:function(a,b){this.element["on"+a]=function(){var a=O.event;a.target=a.srcElement;b(a)};return this},cutOffPath:function(a,b){var d,a=a.split(/[ ,]/);d=a.length;if(9===d||11===d)a[d-4]=a[d-2]=c(a[d-2])-10*b;return a.join(" ")},shadow:function(a,b,d){var e=[],f,g=this.element,h=this.renderer,i,j=g.style,k,l=g.path,m,q,n,u;l&&"string"!==typeof l.value&&(l="x");q=l;if(a){n=o(a.width,3);u=(a.opacity||
0.15)/n;for(f=1;3>=f;f++)m=2*n+1-2*f,d&&(q=this.cutOffPath(l.value,m+0.5)),k=['<shape isShadow="true" strokeweight="',m,'" filled="false" path="',q,'" coordsize="10 10" style="',g.style.cssText,'" />'],i=s(h.prepVML(k),null,{left:c(j.left)+o(a.offsetX,1),top:c(j.top)+o(a.offsetY,1)}),d&&(i.cutOff=m+1),k=['<stroke color="',a.color||"black",'" opacity="',u*f,'"/>'],s(h.prepVML(k),null,null,i),b?b.element.appendChild(i):g.parentNode.insertBefore(i,g),e.push(i);this.shadows=e}return this},updateShadows:Pa,
setAttr:function(a,b){wb?this.element[a]=b:this.element.setAttribute(a,b)},classSetter:function(a){this.element.className=a},dashstyleSetter:function(a,b,c){(c.getElementsByTagName("stroke")[0]||s(this.renderer.prepVML(["<stroke/>"]),null,null,c))[b]=a||"solid";this[b]=a},dSetter:function(a,b,c){var d=this.shadows,a=a||[];this.d=a.join(" ");c.path=a=this.pathToVML(a);if(d)for(c=d.length;c--;)d[c].path=d[c].cutOff?this.cutOffPath(a,d[c].cutOff):a;this.setAttr(b,a)},fillSetter:function(a,b,c){var d=
c.nodeName;"SPAN"===d?c.style.color=a:"IMG"!==d&&(c.filled=a!==Da,this.setAttr("fillcolor",this.renderer.color(a,c,b,this)))},opacitySetter:Pa,rotationSetter:function(a,b,c){c=c.style;this[b]=c[b]=a;c.left=-M(Ja(a*L)+1)+"px";c.top=M(aa(a*L))+"px"},strokeSetter:function(a,b,c){this.setAttr("strokecolor",this.renderer.color(a,c,b))},"stroke-widthSetter":function(a,b,c){c.stroked=!!a;this[b]=a;g(a)&&(a+="px");this.setAttr("strokeweight",a)},titleSetter:function(a,b){this.setAttr(b,a)},visibilitySetter:function(a,
b,c){"inherit"===a&&(a="visible");this.shadows&&A(this.shadows,function(c){c.style[b]=a});"DIV"===c.nodeName&&(a="hidden"===a?"-999em":0,wb||(c.style[b]=a?"visible":"hidden"),b="top");c.style[b]=a},xSetter:function(a,b,c){this[b]=a;"x"===b?b="left":"y"===b&&(b="top");this.updateClipping?(this[b]=a,this.updateClipping()):c.style[b]=a},zIndexSetter:function(a,b,c){c.style[b]=a}};Ma=q(J,Ma);Ma.prototype.ySetter=Ma.prototype.widthSetter=Ma.prototype.heightSetter=Ma.prototype.xSetter;var Ca={Element:Ma,
isIE8:-1<p.indexOf("MSIE 8.0"),init:function(b,c,d,e){var f;this.alignedObjects=[];e=this.createElement(ha).css(a(this.getStyle(e),{position:"relative"}));f=e.element;b.appendChild(e.element);this.isVML=!0;this.box=f;this.boxWrapper=e;this.cache={};this.setSize(c,d,!1);if(!I.namespaces.hcv){I.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{I.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(g){I.styleSheets[0].cssText+=
"hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(b,c,d,f){var g=this.createElement(),h=e(b);return a(g,{members:[],left:(h?b.x:b)+1,top:(h?b.y:c)+1,width:(h?b.width:d)-1,height:(h?b.height:f)-1,getCSS:function(b){var c=b.element,d=c.nodeName,b=b.inverted,e=this.top-("shape"===d?c.offsetTop:0),f=this.left,c=f+this.width,g=e+this.height,e={clip:"rect("+M(b?f:e)+"px,"+M(b?g:
c)+"px,"+M(b?c:g)+"px,"+M(b?e:f)+"px)"};!b&&wb&&"DIV"===d&&a(e,{width:c+"px",height:g+"px"});return e},updateClipping:function(){A(g.members,function(a){a.element&&a.css(g.getCSS(a))})}})},color:function(a,b,c,d){var e=this,f,g=/^rgba/,h,i,j=Da;a&&a.linearGradient?i="gradient":a&&a.radialGradient&&(i="pattern");if(i){var k,l,m=a.linearGradient||a.radialGradient,q,o,n,u,r,t="",a=a.stops,p,w=[],y=function(){h=['<fill colors="'+w.join(",")+'" opacity="',n,'" o:opacity2="',o,'" type="',i,'" ',t,'focus="100%" method="any" />'];
s(e.prepVML(h),null,null,b)};q=a[0];p=a[a.length-1];0<q[0]&&a.unshift([0,q[1]]);1>p[0]&&a.push([1,p[1]]);A(a,function(a,b){g.test(a[1])?(f=Va(a[1]),k=f.get("rgb"),l=f.get("a")):(k=a[1],l=1);w.push(100*a[0]+"% "+k);b?(n=l,u=k):(o=l,r=k)});if("fill"===c)if("gradient"===i)c=m.x1||m[0]||0,a=m.y1||m[1]||0,q=m.x2||m[2]||0,m=m.y2||m[3]||0,t='angle="'+(90-180*ia.atan((m-a)/(q-c))/na)+'"',y();else{var j=m.r,v=2*j,U=2*j,ba=m.cx,z=m.cy,E=b.radialReference,C,j=function(){E&&(C=d.getBBox(),ba+=(E[0]-C.x)/C.width-
0.5,z+=(E[1]-C.y)/C.height-0.5,v*=E[2]/C.width,U*=E[2]/C.height);t='src="'+oa.global.VMLRadialGradientURL+'" size="'+v+","+U+'" origin="0.5,0.5" position="'+ba+","+z+'" color2="'+r+'" ';y()};d.added?j():d.onAdd=j;j=u}else j=k}else g.test(a)&&"IMG"!==b.tagName?(f=Va(a),h=["<",c,' opacity="',f.get("a"),'"/>'],s(this.prepVML(h),null,null,b),j=f.get("rgb")):(j=b.getElementsByTagName(c),j.length&&(j[0].opacity=1,j[0].type="solid"),j=a);return j},prepVML:function(a){var b=this.isIE8,a=a.join("");b?(a=a.replace("/>",
' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):a=a.replace("<","<hcv:");return a},text:Ya.prototype.html,path:function(b){var c={coordsize:"10 10"};h(b)?c.d=b:e(b)&&a(c,b);return this.createElement("shape").attr(c)},circle:function(a,b,c){var d=this.symbol("circle");e(a)&&(c=a.r,b=a.y,a=a.x);d.isCircle=!0;d.r=c;return d.attr({x:a,
y:b})},g:function(a){var b;a&&(b={className:"highcharts-"+a,"class":"highcharts-"+a});return this.createElement(ha).attr(b)},image:function(a,b,c,d,e){var f=this.createElement("img").attr({src:a});1<arguments.length&&f.attr({x:b,y:c,width:d,height:e});return f},createElement:function(a){return"rect"===a?this.symbol(a):Ya.prototype.createElement.call(this,a)},invertChild:function(a,b){var d=this,e=b.style,f="IMG"===a.tagName&&a.style;t(a,{flip:"x",left:c(e.width)-(f?c(f.top):1),top:c(e.height)-(f?
c(f.left):1),rotation:-90});A(a.childNodes,function(b){d.invertChild(b,a)})},symbols:{arc:function(a,b,c,d,e){var f=e.start,g=e.end,h=e.r||c||d,c=e.innerR,d=aa(f),i=Ja(f),j=aa(g),k=Ja(g);if(0===g-f)return["x"];f=["wa",a-h,b-h,a+h,b+h,a+h*d,b+h*i,a+h*j,b+h*k];e.open&&!c&&f.push("e","M",a,b);f.push("at",a-c,b-c,a+c,b+c,a+c*j,b+c*k,a+c*d,b+c*i,"x","e");f.isArc=!0;return f},circle:function(a,b,c,d,e){e&&(c=d=2*e.r);e&&e.isCircle&&(a-=c/2,b-=d/2);return["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,
b,c,d,e){return Ya.prototype.symbols[!k(e)||!e.r?"square":"callout"].call(0,a,b,c,d,e)}}};Ga.VMLRenderer=Ma=function(){this.init.apply(this,arguments)};Ma.prototype=b(Ya.prototype,Ca);Sa=Ma}Ya.prototype.measureSpanWidth=function(a,b){var c=I.createElement("span"),d;d=I.createTextNode(a);c.appendChild(d);t(c,b);this.box.appendChild(c);d=c.offsetWidth;T(c);return d};var jb;R&&(Ga.CanVGRenderer=Ma=function(){La="http://www.w3.org/1999/xhtml"},Ma.prototype.symbols={},jb=function(){function a(){var c=
b.length,d;for(d=0;d<c;d++)b[d]();b=[]}var b=[];return{push:function(c,d){0===b.length&&Bb(d,a);b.push(c)}}}(),Sa=Ma);Q.prototype={addLabel:function(){var b=this.axis,c=b.options,d=b.chart,e=b.horiz,f=b.categories,h=b.names,j=this.pos,l=c.labels,m=b.tickPositions,e=e&&f&&!l.step&&!l.staggerLines&&!l.rotation&&d.plotWidth/m.length||!e&&(d.margin[3]||0.33*d.chartWidth),q=j===m[0],n=j===m[m.length-1],u,h=f?o(f[j],h[j],j):j,f=this.label,r=m.info;b.isDatetimeAxis&&r&&(u=c.dateTimeLabelFormats[r.higherRanks[j]||
r.unitName]);this.isFirst=q;this.isLast=n;c=b.labelFormatter.call({axis:b,chart:d,isFirst:q,isLast:n,dateTimeLabelFormat:u,value:b.isLog?G(i(h)):h});j=e&&{width:P(1,M(e-2*(l.padding||10)))+"px"};j=a(j,l.style);k(f)?f&&f.attr({text:c}).css(j):(u={align:b.labelAlign},g(l.rotation)&&(u.rotation=l.rotation),e&&l.ellipsis&&(u._clipHeight=b.len/m.length),this.label=k(c)&&l.enabled?d.renderer.text(c,0,0,l.useHTML).attr(u).css(j).add(b.labelGroup):null)},getLabelSize:function(){var a=this.label,b=this.axis;
return a?a.getBBox()[b.horiz?"height":"width"]:0},getLabelSides:function(){var a=this.label.getBBox(),b=this.axis,c=b.horiz,d=b.options.labels,a=c?a.width:a.height,b=c?d.x-a*{left:0,center:0.5,right:1}[b.labelAlign]:0;return[b,c?a+b:a]},handleOverflow:function(a,b){var c=!0,d=this.axis,e=this.isFirst,f=this.isLast,g=d.horiz?b.x:b.y,h=d.reversed,i=d.tickPositions,j=this.getLabelSides(),k=j[0],j=j[1],l,m,q,o=this.label.line||0;l=d.labelEdge;m=d.justifyLabels&&(e||f);l[o]===D||g+k>l[o]?l[o]=g+j:m||(c=
!1);if(m){l=(m=d.justifyToPlot)?d.pos:0;m=m?l+d.len:d.chart.chartWidth;do a+=e?1:-1,q=d.ticks[i[a]];while(i[a]&&(!q||q.label.line!==o));d=q&&q.label.xy&&q.label.xy.x+q.getLabelSides()[e?0:1];e&&!h||f&&h?g+k<l&&(g=l-k,q&&g+j>d&&(c=!1)):g+j>m&&(g=m-j,q&&g+k<d&&(c=!1));b.x=g}return c},getPosition:function(a,b,c,d){var e=this.axis,f=e.chart,g=d&&f.oldChartHeight||f.chartHeight;return{x:a?e.translate(b+c,null,null,d)+e.transB:e.left+e.offset+(e.opposite?(d&&f.oldChartWidth||f.chartWidth)-e.right-e.left:
0),y:a?g-e.bottom+e.offset-(e.opposite?e.height:0):g-e.translate(b+c,null,null,d)-e.transB}},getLabelPosition:function(a,b,c,d,e,f,g,h){var i=this.axis,j=i.transA,l=i.reversed,m=i.staggerLines,q=i.chart.renderer.fontMetrics(e.style.fontSize).b,o=e.rotation,a=a+e.x-(f&&d?f*j*(l?-1:1):0),b=b+e.y-(f&&!d?f*j*(l?1:-1):0);o&&2===i.side&&(b-=q-q*aa(o*L));!k(e.y)&&!o&&(b+=q-c.getBBox().height/2);m&&(c.line=g/(h||1)%m,b+=c.line*(i.labelOffset/m));return{x:a,y:b}},getMarkPath:function(a,b,c,d,e,f){return f.crispLine(["M",
a,b,"L",a+(e?0:-c),b+(e?c:0)],d)},render:function(a,b,c){var d=this.axis,e=d.options,f=d.chart.renderer,g=d.horiz,h=this.type,i=this.label,j=this.pos,k=e.labels,l=this.gridLine,m=h?h+"Grid":"grid",q=h?h+"Tick":"tick",n=e[m+"LineWidth"],u=e[m+"LineColor"],r=e[m+"LineDashStyle"],s=e[q+"Length"],m=e[q+"Width"]||0,t=e[q+"Color"],p=e[q+"Position"],q=this.mark,w=k.step,y=!0,v=d.tickmarkOffset,U=this.getPosition(g,j,v,b),ba=U.x,U=U.y,z=g&&ba===d.pos+d.len||!g&&U===d.pos?-1:1;this.isActive=!0;if(n&&(j=d.getPlotLinePath(j+
v,n*z,b,!0),l===D&&(l={stroke:u,"stroke-width":n},r&&(l.dashstyle=r),h||(l.zIndex=1),b&&(l.opacity=0),this.gridLine=l=n?f.path(j).attr(l).add(d.gridGroup):null),!b&&l&&j))l[this.isNew?"attr":"animate"]({d:j,opacity:c});m&&s&&("inside"===p&&(s=-s),d.opposite&&(s=-s),h=this.getMarkPath(ba,U,s,m*z,g,f),q?q.animate({d:h,opacity:c}):this.mark=f.path(h).attr({stroke:t,"stroke-width":m,opacity:c}).add(d.axisGroup));i&&!isNaN(ba)&&(i.xy=U=this.getLabelPosition(ba,U,i,g,k,v,a,w),this.isFirst&&!this.isLast&&
!o(e.showFirstLabel,1)||this.isLast&&!this.isFirst&&!o(e.showLastLabel,1)?y=!1:!d.isRadial&&!k.step&&!k.rotation&&!b&&0!==c&&(y=this.handleOverflow(a,U)),w&&a%w&&(y=!1),y&&!isNaN(U.y)?(U.opacity=c,i[this.isNew?"attr":"animate"](U),this.isNew=!1):i.attr("y",-9999))},destroy:function(){N(this,this.axis)}};Ga.PlotLineOrBand=function(a,b){this.axis=a;b&&(this.options=b,this.id=b.id)};Ga.PlotLineOrBand.prototype={render:function(){var a=this,c=a.axis,d=c.horiz,e=(c.pointRange||0)/2,g=a.options,h=g.label,
i=a.label,j=g.width,l=g.to,m=g.from,q=k(m)&&k(l),n=g.value,u=g.dashStyle,r=a.svgElem,s=[],t,p=g.color,w=g.zIndex,y=g.events,v={},U=c.chart.renderer;c.isLog&&(m=f(m),l=f(l),n=f(n));if(j){if(s=c.getPlotLinePath(n,j),v={stroke:p,"stroke-width":j},u)v.dashstyle=u}else if(q){if(m=P(m,c.min-e),l=ga(l,c.max+e),s=c.getPlotBandPath(m,l,g),p&&(v.fill=p),g.borderWidth)v.stroke=g.borderColor,v["stroke-width"]=g.borderWidth}else return;k(w)&&(v.zIndex=w);if(r)if(s)r.animate({d:s},null,r.onGetPath);else{if(r.hide(),
r.onGetPath=function(){r.show()},i)a.label=i=i.destroy()}else if(s&&s.length&&(a.svgElem=r=U.path(s).attr(v).add(),y))for(t in e=function(b){r.on(b,function(c){y[b].apply(a,[c])})},y)e(t);h&&k(h.text)&&s&&s.length&&0<c.width&&0<c.height?(h=b({align:d&&q&&"center",x:d?!q&&4:10,verticalAlign:!d&&q&&"middle",y:d?q?16:10:q?6:-4,rotation:d&&!q&&90},h),i||(v={align:h.textAlign||h.align,rotation:h.rotation},k(w)&&(v.zIndex=w),a.label=i=U.text(h.text,0,0,h.useHTML).attr(v).css(h.style).add()),c=[s[1],s[4],
o(s[6],s[1])],s=[s[2],s[5],o(s[7],s[2])],d=H(c),q=H(s),i.align(h,!1,{x:d,y:q,width:C(c)-d,height:C(s)-q}),i.show()):i&&i.hide();return a},destroy:function(){j(this.axis.plotLinesAndBands,this);delete this.axis;N(this)}};X.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:da,lineColor:"#C0D0E0",lineWidth:1,minPadding:0.01,maxPadding:0.01,
minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,
title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return m(this.total,-1)},style:da.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:20},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(a,b){var c=b.isX;this.horiz=a.inverted?!c:c;this.coll=(this.isXAxis=c)?"xAxis":"yAxis";this.opposite=b.opposite;
this.side=b.side||(this.horiz?this.opposite?0:2:this.opposite?1:3);this.setOptions(b);var d=this.options,e=d.type;this.labelFormatter=d.labels.formatter||this.defaultLabelFormatter;this.userOptions=b;this.minPixelPadding=0;this.chart=a;this.reversed=d.reversed;this.zoomEnabled=!1!==d.zoomEnabled;this.categories=d.categories||"category"===e;this.names=[];this.isLog="logarithmic"===e;this.isDatetimeAxis="datetime"===e;this.isLinked=k(d.linkedTo);this.tickmarkOffset=this.categories&&"between"===d.tickmarkPlacement?
0.5:0;this.ticks={};this.labelEdge=[];this.minorTicks={};this.plotLinesAndBands=[];this.alternateBands={};this.len=0;this.minRange=this.userMinRange=d.minRange||d.maxZoom;this.range=d.range;this.offset=d.offset||0;this.stacks={};this.oldStacks={};this.min=this.max=null;this.crosshair=o(d.crosshair,n(a.options.tooltip.crosshairs)[c?0:1],!1);var g,d=this.options.events;-1===eb(this,a.axes)&&(c&&!this.isColorAxis?a.axes.splice(a.xAxis.length,0,this):a.axes.push(this),a[this.coll].push(this));this.series=
this.series||[];a.inverted&&(c&&this.reversed===D)&&(this.reversed=!0);this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(g in d)fa(this,g,d[g]);this.isLog&&(this.val2lin=f,this.lin2val=i)},setOptions:function(a){this.options=b(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],b(oa[this.coll],a))},defaultLabelFormatter:function(){var a=this.axis,
b=this.value,c=a.categories,d=this.dateTimeLabelFormat,e=oa.lang.numericSymbols,f=e&&e.length,g,h=a.options.labels.format,a=a.isLog?b:a.tickInterval;if(h)g=w(h,this);else if(c)g=b;else if(d)g=xa(d,b);else if(f&&1E3<=a)for(;f--&&g===D;)c=Math.pow(1E3,f+1),a>=c&&null!==e[f]&&(g=m(b/c,-1)+e[f]);g===D&&(g=1E4<=ea(b)?m(b,0):m(b,-1,D,""));return g},getSeriesExtremes:function(){var a=this,b=a.chart;a.hasVisibleSeries=!1;a.dataMin=a.dataMax=null;a.buildStacks&&a.buildStacks();A(a.series,function(c){if(c.visible||
!b.options.chart.ignoreHiddenSeries){var d;d=c.options.threshold;var e;a.hasVisibleSeries=!0;a.isLog&&0>=d&&(d=null);if(a.isXAxis){if(d=c.xData,d.length)a.dataMin=ga(o(a.dataMin,d[0]),H(d)),a.dataMax=P(o(a.dataMax,d[0]),C(d))}else if(c.getExtremes(),e=c.dataMax,c=c.dataMin,k(c)&&k(e)&&(a.dataMin=ga(o(a.dataMin,c),c),a.dataMax=P(o(a.dataMax,e),e)),k(d))a.dataMin>=d?(a.dataMin=d,a.ignoreMinPadding=!0):a.dataMax<d&&(a.dataMax=d,a.ignoreMaxPadding=!0)}})},translate:function(a,b,c,d,e,f){var h=1,i=0,j=
d?this.oldTransA:this.transA,d=d?this.oldMin:this.min,k=this.minPixelPadding,e=(this.options.ordinal||this.isLog&&e)&&this.lin2val;j||(j=this.transA);c&&(h*=-1,i=this.len);this.reversed&&(h*=-1,i-=h*(this.sector||this.len));b?(a=a*h+i,a-=k,a=a/j+d,e&&(a=this.lin2val(a))):(e&&(a=this.val2lin(a)),"between"===f&&(f=0.5),a=h*(a-d)*j+i+h*k+(g(f)?j*f*this.pointRange:0));return a},toPixels:function(a,b){return this.translate(a,!1,!this.horiz,null,!0)+(b?0:this.pos)},toValue:function(a,b){return this.translate(a-
(b?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(a,b,c,d,e){var f=this.chart,g=this.left,h=this.top,i,j,k=c&&f.oldChartHeight||f.chartHeight,l=c&&f.oldChartWidth||f.chartWidth,m;i=this.transB;e=o(e,this.translate(a,null,null,c));a=c=M(e+i);i=j=M(k-e-i);if(isNaN(e))m=!0;else if(this.horiz){if(i=h,j=k-this.bottom,a<g||a>g+this.width)m=!0}else if(a=g,c=l-this.right,i<h||i>h+this.height)m=!0;return m&&!d?null:f.renderer.crispLine(["M",a,i,"L",c,j],b||1)},getLinearTickPositions:function(a,
b,c){var d,e=G(la(b/a)*a),f=G(sa(c/a)*a),h=[];if(b===c&&g(b))return[b];for(b=e;b<=f;){h.push(b);b=G(b+a);if(b===d)break;d=b}return h},getMinorTickPositions:function(){var a=this.options,b=this.tickPositions,c=this.minorTickInterval,d=[],e;if(this.isLog){e=b.length;for(a=1;a<e;a++)d=d.concat(this.getLogTickPositions(c,b[a-1],b[a],!0))}else if(this.isDatetimeAxis&&"auto"===a.minorTickInterval)d=d.concat(this.getTimeTicks(this.normalizeTimeTickInterval(c),this.min,this.max,a.startOfWeek)),d[0]<this.min&&
d.shift();else for(b=this.min+(b[0]-this.min)%c;b<=this.max;b+=c)d.push(b);return d},adjustForMinRange:function(){var a=this.options,b=this.min,c=this.max,d,e=this.dataMax-this.dataMin>=this.minRange,f,g,h,i;this.isXAxis&&(this.minRange===D&&!this.isLog)&&(k(a.min)||k(a.max)?this.minRange=null:(A(this.series,function(a){i=a.xData;for(g=a.xIncrement?1:i.length-1;0<g;g--)if(h=i[g]-i[g-1],f===D||h<f)f=h}),this.minRange=ga(5*f,this.dataMax-this.dataMin)));if(c-b<this.minRange){var j=this.minRange;d=(j-
c+b)/2;d=[b-d,o(a.min,b-d)];e&&(d[2]=this.dataMin);b=C(d);c=[b+j,o(a.max,b+j)];e&&(c[2]=this.dataMax);c=H(c);c-b<j&&(d[0]=c-j,d[1]=o(a.min,c-j),b=C(d))}this.min=b;this.max=c},setAxisTranslation:function(a){var b=this,c=b.max-b.min,e=b.axisPointRange||0,f,g=0,h=0,i=b.linkedParent,j=!!b.categories,l=b.transA;if(b.isXAxis||j||e)i?(g=i.minPointOffset,h=i.pointRangePadding):A(b.series,function(a){var i=j?1:b.isXAxis?a.pointRange:b.axisPointRange||0,l=a.options.pointPlacement,m=a.closestPointRange;i>c&&
(i=0);e=P(e,i);g=P(g,d(l)?0:i/2);h=P(h,"on"===l?0:i);!a.noSharedTooltip&&k(m)&&(f=k(f)?ga(f,m):m)}),i=b.ordinalSlope&&f?b.ordinalSlope/f:1,b.minPointOffset=g*=i,b.pointRangePadding=h*=i,b.pointRange=ga(e,c),b.closestPointRange=f;a&&(b.oldTransA=l);b.translationSlope=b.transA=l=b.len/(c+h||1);b.transB=b.horiz?b.left:b.bottom;b.minPixelPadding=l*g},setTickPositions:function(a){var b=this,c=b.chart,d=b.options,e=b.isLog,h=b.isDatetimeAxis,i=b.isXAxis,j=b.isLinked,l=b.options.tickPositioner,m=d.maxPadding,
q=d.minPadding,n=d.tickInterval,u=d.minTickInterval,r=d.tickPixelInterval,s,t=b.categories;j?(b.linkedParent=c[b.coll][d.linkedTo],c=b.linkedParent.getExtremes(),b.min=o(c.min,c.dataMin),b.max=o(c.max,c.dataMax),d.type!==b.linkedParent.options.type&&K(11,1)):(b.min=o(b.userMin,d.min,b.dataMin),b.max=o(b.userMax,d.max,b.dataMax));e&&(!a&&0>=ga(b.min,o(b.dataMin,b.min))&&K(10,1),b.min=G(f(b.min)),b.max=G(f(b.max)));b.range&&k(b.max)&&(b.userMin=b.min=P(b.min,b.max-b.range),b.userMax=b.max,b.range=null);
b.beforePadding&&b.beforePadding();b.adjustForMinRange();if(!t&&!b.axisPointRange&&!b.usePercentage&&!j&&k(b.min)&&k(b.max)&&(c=b.max-b.min)){if(!k(d.min)&&!k(b.userMin)&&q&&(0>b.dataMin||!b.ignoreMinPadding))b.min-=c*q;if(!k(d.max)&&!k(b.userMax)&&m&&(0<b.dataMax||!b.ignoreMaxPadding))b.max+=c*m}g(d.floor)&&(b.min=P(b.min,d.floor));g(d.ceiling)&&(b.max=ga(b.max,d.ceiling));b.min===b.max||void 0===b.min||void 0===b.max?b.tickInterval=1:j&&!n&&r===b.linkedParent.options.tickPixelInterval?b.tickInterval=
b.linkedParent.tickInterval:(b.tickInterval=o(n,t?1:(b.max-b.min)*r/P(b.len,r)),!k(n)&&b.len<r&&!this.isRadial&&!this.isLog&&!t&&d.startOnTick&&d.endOnTick&&(s=!0,b.tickInterval/=4));i&&!a&&A(b.series,function(a){a.processData(b.min!==b.oldMin||b.max!==b.oldMax)});b.setAxisTranslation(!0);b.beforeSetTickPositions&&b.beforeSetTickPositions();b.postProcessTickInterval&&(b.tickInterval=b.postProcessTickInterval(b.tickInterval));b.pointRange&&(b.tickInterval=P(b.pointRange,b.tickInterval));!n&&b.tickInterval<
u&&(b.tickInterval=u);!h&&(!e&&!n)&&(b.tickInterval=v(b.tickInterval,null,y(b.tickInterval),d));b.minorTickInterval="auto"===d.minorTickInterval&&b.tickInterval?b.tickInterval/5:d.minorTickInterval;b.tickPositions=a=d.tickPositions?[].concat(d.tickPositions):l&&l.apply(b,[b.min,b.max]);a||(!b.ordinalPositions&&(b.max-b.min)/b.tickInterval>P(2*b.len,200)&&K(19,!0),a=h?b.getTimeTicks(b.normalizeTimeTickInterval(b.tickInterval,d.units),b.min,b.max,d.startOfWeek,b.ordinalPositions,b.closestPointRange,
!0):e?b.getLogTickPositions(b.tickInterval,b.min,b.max):b.getLinearTickPositions(b.tickInterval,b.min,b.max),s&&a.splice(1,a.length-2),b.tickPositions=a);j||(e=a[0],h=a[a.length-1],j=b.minPointOffset||0,d.startOnTick?b.min=e:b.min-j>e&&a.shift(),d.endOnTick?b.max=h:b.max+j<h&&a.pop(),1===a.length&&(d=1E13<ea(b.max)?1:0.001,b.min-=d,b.max+=d))},setMaxTicks:function(){var a=this.chart,b=a.maxTicks||{},c=this.tickPositions,d=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");if(!this.isLinked&&
!this.isDatetimeAxis&&c&&c.length>(b[d]||0)&&!1!==this.options.alignTicks)b[d]=c.length;a.maxTicks=b},adjustTickAmount:function(){var a=this._maxTicksKey,b=this.tickPositions,c=this.chart.maxTicks;if(c&&c[a]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&!1!==this.options.alignTicks&&this.min!==D){var d=this.tickAmount,e=b.length;this.tickAmount=a=c[a];if(e<a){for(;b.length<a;)b.push(G(b[b.length-1]+this.tickInterval));this.transA*=(e-1)/(a-1);this.max=b[b.length-1]}k(d)&&a!==d&&(this.isDirty=
!0)}},setScale:function(){var a=this.stacks,b,c,d,e;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();e=this.len!==this.oldAxisLength;A(this.series,function(a){if(a.isDirtyData||a.isDirty||a.xAxis.isDirty)d=!0});if(e||d||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(b in a)for(c in a[b])a[b][c].total=null,a[b][c].cum=0;this.forceRedraw=!1;this.getSeriesExtremes();this.setTickPositions();
this.oldUserMin=this.userMin;this.oldUserMax=this.userMax;this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)}else if(!this.isXAxis)for(b in this.oldStacks&&(a=this.stacks=this.oldStacks),a)for(c in a[b])a[b][c].cum=a[b][c].total;this.setMaxTicks()},setExtremes:function(b,c,d,e,f){var g=this,h=g.chart,d=o(d,!0),f=a(f,{min:b,max:c});va(g,"setExtremes",f,function(){g.userMin=b;g.userMax=c;g.eventArgs=f;g.isDirtyExtremes=!0;d&&h.redraw(e)})},zoom:function(a,b){var c=this.dataMin,
d=this.dataMax,e=this.options;this.allowZoomOutside||(k(c)&&a<=ga(c,o(e.min,c))&&(a=D),k(d)&&b>=P(d,o(e.max,d))&&(b=D));this.displayBtn=a!==D||b!==D;this.setExtremes(a,b,!1,D,{trigger:"zoom"});return!0},setAxisSize:function(){var a=this.chart,b=this.options,c=b.offsetLeft||0,d=this.horiz,e=o(b.width,a.plotWidth-c+(b.offsetRight||0)),f=o(b.height,a.plotHeight),g=o(b.top,a.plotTop),b=o(b.left,a.plotLeft+c),c=/%$/;c.test(f)&&(f=parseInt(f,10)/100*a.plotHeight);c.test(g)&&(g=parseInt(g,10)/100*a.plotHeight+
a.plotTop);this.left=b;this.top=g;this.width=e;this.height=f;this.bottom=a.chartHeight-f-g;this.right=a.chartWidth-e-b;this.len=P(d?e:f,0);this.pos=d?b:g},getExtremes:function(){var a=this.isLog;return{min:a?G(i(this.min)):this.min,max:a?G(i(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(a){var b=this.isLog,c=b?i(this.min):this.min,b=b?i(this.max):this.max;c>a||null===a?a=c:b<a&&(a=b);return this.translate(a,0,1,0,1)},
autoLabelAlign:function(a){a=(o(a,0)-90*this.side+720)%360;return 15<a&&165>a?"right":195<a&&345>a?"left":"center"},getOffset:function(){var a=this,b=a.chart,c=b.renderer,d=a.options,e=a.tickPositions,f=a.ticks,g=a.horiz,h=a.side,i=b.inverted?[1,0,3,2][h]:h,j,l=0,m,q=0,n=d.title,u=d.labels,r=0,s=b.axisOffset,t=b.clipOffset,p=[-1,1,1,-1][h],w,y=1,v=o(u.maxStaggerLines,5),U,ba,z,E,C=2===h?c.fontMetrics(u.style.fontSize).b:0;a.hasData=j=a.hasVisibleSeries||k(a.min)&&k(a.max)&&!!e;a.showAxis=b=j||o(d.showEmpty,
!0);a.staggerLines=a.horiz&&u.staggerLines;a.axisGroup||(a.gridGroup=c.g("grid").attr({zIndex:d.gridZIndex||1}).add(),a.axisGroup=c.g("axis").attr({zIndex:d.zIndex||2}).add(),a.labelGroup=c.g("axis-labels").attr({zIndex:u.zIndex||7}).addClass("highcharts-"+a.coll.toLowerCase()+"-labels").add());if(j||a.isLinked){a.labelAlign=o(u.align||a.autoLabelAlign(u.rotation));A(e,function(b){f[b]?f[b].addLabel():f[b]=new Q(a,b)});if(a.horiz&&!a.staggerLines&&v&&!u.rotation){for(w=a.reversed?[].concat(e).reverse():
e;y<v;){j=[];U=!1;for(u=0;u<w.length;u++)ba=w[u],z=(z=f[ba].label&&f[ba].label.getBBox())?z.width:0,E=u%y,z&&(ba=a.translate(ba),j[E]!==D&&ba<j[E]&&(U=!0),j[E]=ba+z);if(U)y++;else break}1<y&&(a.staggerLines=y)}A(e,function(b){if(h===0||h===2||{1:"left",3:"right"}[h]===a.labelAlign)r=P(f[b].getLabelSize(),r)});a.staggerLines&&(r*=a.staggerLines,a.labelOffset=r)}else for(w in f)f[w].destroy(),delete f[w];n&&(n.text&&!1!==n.enabled)&&(a.axisTitle||(a.axisTitle=c.text(n.text,0,0,n.useHTML).attr({zIndex:7,
rotation:n.rotation||0,align:n.textAlign||{low:"left",middle:"center",high:"right"}[n.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(n.style).add(a.axisGroup),a.axisTitle.isNew=!0),b&&(l=a.axisTitle.getBBox()[g?"height":"width"],q=o(n.margin,g?5:10),m=n.offset),a.axisTitle[b?"show":"hide"]());a.offset=p*o(d.offset,s[h]);a.axisTitleMargin=o(m,r+q+(r&&p*d.labels[g?"y":"x"]-C));s[h]=P(s[h],a.axisTitleMargin+l+p*a.offset);t[i]=P(t[i],2*la(d.lineWidth/2))},getLinePath:function(a){var b=
this.chart,c=this.opposite,d=this.offset,e=this.horiz,f=this.left+(c?this.width:0)+d,d=b.chartHeight-this.bottom-(c?this.height:0)+d;c&&(a*=-1);return b.renderer.crispLine(["M",e?this.left:f,e?d:this.top,"L",e?b.chartWidth-this.right:f,e?d:b.chartHeight-this.bottom],a)},getTitlePosition:function(){var a=this.horiz,b=this.left,d=this.top,e=this.len,f=this.options.title,g=a?b:d,h=this.opposite,i=this.offset,j=c(f.style.fontSize||12),e={low:g+(a?0:e),middle:g+e/2,high:g+(a?e:0)}[f.align],b=(a?d+this.height:
b)+(a?1:-1)*(h?-1:1)*this.axisTitleMargin+(2===this.side?j:0);return{x:a?e:b+(h?this.width:0)+i+(f.x||0),y:a?b-(h?this.height:0)+i:e+(f.y||0)}},render:function(){var a=this,b=a.horiz,c=a.reversed,d=a.chart,e=d.renderer,f=a.options,g=a.isLog,h=a.isLinked,j=a.tickPositions,l,m=a.axisTitle,q=a.ticks,o=a.minorTicks,n=a.alternateBands,u=f.stackLabels,r=f.alternateGridColor,s=a.tickmarkOffset,t=f.lineWidth,p=d.hasRendered&&k(a.oldMin)&&!isNaN(a.oldMin),w=a.hasData,y=a.showAxis,v,U=f.labels.overflow,ba=
a.justifyLabels=b&&!1!==U,z;a.labelEdge.length=0;a.justifyToPlot="justify"===U;A([q,o,n],function(a){for(var b in a)a[b].isActive=!1});if(w||h)if(a.minorTickInterval&&!a.categories&&A(a.getMinorTickPositions(),function(b){o[b]||(o[b]=new Q(a,b,"minor"));p&&o[b].isNew&&o[b].render(null,!0);o[b].render(null,!1,1)}),j.length&&(l=j.slice(),(b&&c||!b&&!c)&&l.reverse(),ba&&(l=l.slice(1).concat([l[0]])),A(l,function(b,c){ba&&(c=c===l.length-1?0:c+1);if(!h||b>=a.min&&b<=a.max)q[b]||(q[b]=new Q(a,b)),p&&q[b].isNew&&
q[b].render(c,!0,0.1),q[b].render(c,!1,1)}),s&&0===a.min&&(q[-1]||(q[-1]=new Q(a,-1,null,!0)),q[-1].render(-1))),r&&A(j,function(b,c){0===c%2&&b<a.max&&(n[b]||(n[b]=new Ga.PlotLineOrBand(a)),v=b+s,z=j[c+1]!==D?j[c+1]+s:a.max,n[b].options={from:g?i(v):v,to:g?i(z):z,color:r},n[b].render(),n[b].isActive=!0)}),!a._addedPlotLB)A((f.plotLines||[]).concat(f.plotBands||[]),function(b){a.addPlotBandOrLine(b)}),a._addedPlotLB=!0;A([q,o,n],function(a){var b,c,e=[],f=Ea?Ea.duration||500:0,g=function(){for(c=
e.length;c--;)a[e[c]]&&!a[e[c]].isActive&&(a[e[c]].destroy(),delete a[e[c]])};for(b in a)a[b].isActive||(a[b].render(b,!1,0),a[b].isActive=!1,e.push(b));a===n||!d.hasRendered||!f?g():f&&setTimeout(g,f)});t&&(b=a.getLinePath(t),a.axisLine?a.axisLine.animate({d:b}):a.axisLine=e.path(b).attr({stroke:f.lineColor,"stroke-width":t,zIndex:7}).add(a.axisGroup),a.axisLine[y?"show":"hide"]());m&&y&&(m[m.isNew?"attr":"animate"](a.getTitlePosition()),m.isNew=!1);u&&u.enabled&&a.renderStackTotals();a.isDirty=
!1},redraw:function(){var a=this.chart.pointer;a&&a.reset(!0);this.render();A(this.plotLinesAndBands,function(a){a.render()});A(this.series,function(a){a.isDirty=!0})},destroy:function(a){var b=this,c=b.stacks,d,e=b.plotLinesAndBands;a||Ka(b);for(d in c)N(c[d]),c[d]=null;A([b.ticks,b.minorTicks,b.alternateBands],function(a){N(a)});for(a=e.length;a--;)e[a].destroy();A("stackTotalGroup axisLine axisTitle axisGroup cross gridGroup labelGroup".split(" "),function(a){b[a]&&(b[a]=b[a].destroy())});this.cross&&
this.cross.destroy()},drawCrosshair:function(a,b){if(this.crosshair)if(!1===(k(b)||!o(this.crosshair.snap,!0)))this.hideCrosshair();else{var c,d=this.crosshair,e=d.animation;o(d.snap,!0)?k(b)&&(c=this.chart.inverted!=this.horiz?b.plotX:this.len-b.plotY):c=this.horiz?a.chartX-this.pos:this.len-a.chartY+this.pos;c=this.isRadial?this.getPlotLinePath(this.isXAxis?b.x:o(b.stackY,b.y)):this.getPlotLinePath(null,null,null,null,c);if(null===c)this.hideCrosshair();else if(this.cross)this.cross.attr({visibility:"visible"})[e?
"animate":"attr"]({d:c},e);else e={"stroke-width":d.width||1,stroke:d.color||"#C0C0C0",zIndex:d.zIndex||2},d.dashStyle&&(e.dashstyle=d.dashStyle),this.cross=this.chart.renderer.path(c).attr(e).add()}},hideCrosshair:function(){this.cross&&this.cross.hide()}};a(X.prototype,{getPlotBandPath:function(a,b){var c=this.getPlotLinePath(b),d=this.getPlotLinePath(a);d&&c?d.push(c[4],c[5],c[1],c[2]):d=null;return d},addPlotBand:function(a){this.addPlotBandOrLine(a,"plotBands")},addPlotLine:function(a){this.addPlotBandOrLine(a,
"plotLines")},addPlotBandOrLine:function(a,b){var c=(new Ga.PlotLineOrBand(this,a)).render(),d=this.userOptions;c&&(b&&(d[b]=d[b]||[],d[b].push(a)),this.plotLinesAndBands.push(c));return c},removePlotBandOrLine:function(a){for(var b=this.plotLinesAndBands,c=this.options,d=this.userOptions,e=b.length;e--;)b[e].id===a&&b[e].destroy();A([c.plotLines||[],d.plotLines||[],c.plotBands||[],d.plotBands||[]],function(b){for(e=b.length;e--;)b[e].id===a&&j(b,b[e])})}});X.prototype.getTimeTicks=function(b,c,d,
e){var f=[],g={},h=oa.global.useUTC,i,j=new Date(c-kb),l=b.unitRange,m=b.count;if(k(c)){l>=qa.second&&(j.setMilliseconds(0),j.setSeconds(l>=qa.minute?0:m*la(j.getSeconds()/m)));if(l>=qa.minute)j[db](l>=qa.hour?0:m*la(j[Cb]()/m));if(l>=qa.hour)j[Ua](l>=qa.day?0:m*la(j[ub]()/m));if(l>=qa.day)j[Jb](l>=qa.month?1:m*la(j[lb]()/m));l>=qa.month&&(j[Kb](l>=qa.year?0:m*la(j[xb]()/m)),i=j[pb]());l>=qa.year&&(i-=i%m,j[Na](i));if(l===qa.week)j[Jb](j[lb]()-j[Ib]()+o(e,1));c=1;kb&&(j=new Date(j.getTime()+kb));
i=j[pb]();for(var e=j.getTime(),q=j[xb](),n=j[lb](),u=h?kb:(864E5+6E4*j.getTimezoneOffset())%864E5;e<d;)f.push(e),l===qa.year?e=Db(i+c*m,0):l===qa.month?e=Db(i,q+c*m):!h&&(l===qa.day||l===qa.week)?e=Db(i,q,n+c*m*(l===qa.day?1:7)):e+=l*m,c++;f.push(e);A(ya(f,function(a){return l<=qa.hour&&a%qa.day===u}),function(a){g[a]="day"})}f.info=a(b,{higherRanks:g,totalRange:l*m});return f};X.prototype.normalizeTimeTickInterval=function(a,b){var c=b||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",
[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],d=c[c.length-1],e=qa[d[0]],f=d[1],g;for(g=0;g<c.length&&!(d=c[g],e=qa[d[0]],f=d[1],c[g+1]&&a<=(e*f[f.length-1]+qa[c[g+1][0]])/2);g++);e===qa.year&&a<5*e&&(f=[1,2,5]);c=v(a/e,f,"year"===d[0]?P(y(a/e),1):1);return{unitRange:e,count:c,unitName:d[0]}};X.prototype.getLogTickPositions=function(a,b,c,d){var e=this.options,g=this.len,h=[];d||(this._minorAutoInterval=null);
if(0.5<=a)a=M(a),h=this.getLinearTickPositions(a,b,c);else if(0.08<=a)for(var g=la(b),j,k,l,m,q,e=0.3<a?[1,2,4]:0.15<a?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];g<c+1&&!q;g++){k=e.length;for(j=0;j<k&&!q;j++)l=f(i(g)*e[j]),l>b&&(!d||m<=c)&&h.push(m),m>c&&(q=!0),m=l}else if(b=i(b),c=i(c),a=e[d?"minorTickInterval":"tickInterval"],a=o("auto"===a?null:a,this._minorAutoInterval,(c-b)*(e.tickPixelInterval/(d?5:1))/((d?g/this.tickPositions.length:g)||1)),a=v(a,null,y(a)),h=Y(this.getLinearTickPositions(a,b,c),f),!d)this._minorAutoInterval=
a/5;d||(this.tickInterval=a);return h};var ab=Ga.Tooltip=function(){this.init.apply(this,arguments)};ab.prototype={init:function(a,b){var d=b.borderWidth,e=b.style,f=c(e.padding);this.chart=a;this.options=b;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=a.renderer.label("",0,0,b.shape||"callout",null,null,b.useHTML,null,"tooltip").attr({padding:f,fill:b.backgroundColor,"stroke-width":d,r:b.borderRadius,zIndex:8}).css(e).css({padding:0}).add().attr({y:-9999});R||this.label.shadow(b.shadow);
this.shared=b.shared},destroy:function(){this.label&&(this.label=this.label.destroy());clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(b,c,d,e){var f=this,g=f.now,h=!1!==f.options.animation&&!f.isHidden,i=f.followPointer||1<f.len;a(g,{x:h?(2*g.x+b)/3:b,y:h?(g.y+c)/2:c,anchorX:i?D:h?(2*g.anchorX+d)/3:d,anchorY:i?D:h?(g.anchorY+e)/2:e});f.label.attr(g);if(h&&(1<ea(b-g.x)||1<ea(c-g.y)))clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){f&&f.move(b,
c,d,e)},32)},hide:function(){var a=this,b;clearTimeout(this.hideTimer);this.isHidden||(b=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){a.label.fadeOut();a.isHidden=!0},o(this.options.hideDelay,500)),b&&A(b,function(a){a.setState()}),this.chart.hoverPoints=null)},getAnchor:function(a,b){var c,d=this.chart,e=d.inverted,f=d.plotTop,g=0,h=0,i,a=n(a);c=a[0].tooltipPos;this.followPointer&&b&&(b.chartX===D&&(b=d.pointer.normalize(b)),c=[b.chartX-d.plotLeft,b.chartY-f]);c||(A(a,function(a){i=
a.series.yAxis;g+=a.plotX;h+=(a.plotLow?(a.plotLow+a.plotHigh)/2:a.plotY)+(!e&&i?i.top-f:0)}),g/=a.length,h/=a.length,c=[e?d.plotWidth-h:g,this.shared&&!e&&1<a.length&&b?b.chartY-f:e?d.plotHeight-g:h]);return Y(c,M)},getPosition:function(a,b,c){var d=this.chart,e=this.distance,f={},g,h=["y",d.chartHeight,b,c.plotY+d.plotTop],i=["x",d.chartWidth,a,c.plotX+d.plotLeft],j=c.ttBelow||d.inverted&&!c.negative||!d.inverted&&c.negative,k=function(a,b,c,d){var g=c<d-e,b=d+e+c<b,c=d-e-c,d=d+e;if(j&&b)f[a]=d;
else if(!j&&g)f[a]=c;else if(g)f[a]=c;else if(b)f[a]=d;else return!1},l=function(a,b,c,d){if(d<e||d>b-e)return!1;f[a]=d<c/2?1:d>b-c/2?b-c-2:d-c/2},m=function(a){var b=h;h=i;i=b;g=a},q=function(){!1!==k.apply(0,h)?!1===l.apply(0,i)&&!g&&(m(!0),q()):g?f.x=f.y=0:(m(!0),q())};(d.inverted||1<this.len)&&m();q();return f},defaultFormatter:function(a){var b=this.points||n(this),c=b[0].series,d;d=[a.tooltipHeaderFormatter(b[0])];A(b,function(a){c=a.series;d.push(c.tooltipFormatter&&c.tooltipFormatter(a)||
a.point.tooltipFormatter(c.tooltipOptions.pointFormat))});d.push(a.options.footerFormat||"");return d.join("")},refresh:function(a,b){var c=this.chart,d=this.label,e=this.options,f,g,h={},i,j=[];i=e.formatter||this.defaultFormatter;var h=c.hoverPoints,k,l=this.shared;clearTimeout(this.hideTimer);this.followPointer=n(a)[0].series.tooltipOptions.followPointer;g=this.getAnchor(a,b);f=g[0];g=g[1];l&&(!a.series||!a.series.noSharedTooltip)?(c.hoverPoints=a,h&&A(h,function(a){a.setState()}),A(a,function(a){a.setState("hover");
j.push(a.getLabelConfig())}),h={x:a[0].category,y:a[0].y},h.points=j,this.len=j.length,a=a[0]):h=a.getLabelConfig();i=i.call(h,this);h=a.series;this.distance=o(h.tooltipOptions.distance,16);!1===i?this.hide():(this.isHidden&&(Eb(d),d.attr("opacity",1).show()),d.attr({text:i}),k=e.borderColor||a.color||h.color||"#606060",d.attr({stroke:k}),this.updatePosition({plotX:f,plotY:g,negative:a.negative,ttBelow:a.ttBelow}),this.isHidden=!1);va(c,"tooltipRefresh",{text:i,x:f+c.plotLeft,y:g+c.plotTop,borderColor:k})},
updatePosition:function(a){var b=this.chart,c=this.label,c=(this.options.positioner||this.getPosition).call(this,c.width,c.height,a);this.move(M(c.x),M(c.y),a.plotX+b.plotLeft,a.plotY+b.plotTop)},tooltipHeaderFormatter:function(a){var b=a.series,c=b.tooltipOptions,d=c.dateTimeLabelFormats,e=c.xDateFormat,f=b.xAxis,h=f&&"datetime"===f.options.type&&g(a.key),c=c.headerFormat,f=f&&f.closestPointRange,i;if(h&&!e){if(f)for(i in qa){if(qa[i]>=f||qa[i]<=qa.day&&0<a.key%qa[i]){e=d[i];break}}else e=d.day;
e=e||d.year}h&&e&&(c=c.replace("{point.key}","{point.key:"+e+"}"));return w(c,{point:a,series:b})}};var Za;hb=I.documentElement.ontouchstart!==D;var Wa=Ga.Pointer=function(a,b){this.init(a,b)};Wa.prototype={init:function(a,b){var c=b.chart,d=c.events,e=R?"":c.zoomType,c=a.inverted,f;this.options=b;this.chart=a;this.zoomX=f=/x/.test(e);this.zoomY=e=/y/.test(e);this.zoomHor=f&&!c||e&&c;this.zoomVert=e&&!c||f&&c;this.hasZoom=f||e;this.runChartClick=d&&!!d.click;this.pinchDown=[];this.lastValidTouch=
{};Ga.Tooltip&&b.tooltip.enabled&&(a.tooltip=new ab(a,b.tooltip),this.followTouchMove=b.tooltip.followTouchMove);this.setDOMEvents()},normalize:function(b,c){var d,e,b=b||window.event,b=Lb(b);b.target||(b.target=b.srcElement);e=b.touches?b.touches.length?b.touches.item(0):b.changedTouches[0]:b;c||(this.chartPosition=c=ma(this.chart.container));e.pageX===D?(d=P(b.x,b.clientX-c.left),e=b.y):(d=e.pageX-c.left,e=e.pageY-c.top);return a(b,{chartX:M(d),chartY:M(e)})},getCoordinates:function(a){var b={xAxis:[],
yAxis:[]};A(this.chart.axes,function(c){b[c.isXAxis?"xAxis":"yAxis"].push({axis:c,value:c.toValue(a[c.horiz?"chartX":"chartY"])})});return b},getIndex:function(a){var b=this.chart;return b.inverted?b.plotHeight+b.plotTop-a.chartY:a.chartX-b.plotLeft},runPointActions:function(a){var b=this.chart,c=b.series,d=b.tooltip,e,f,g=b.hoverPoint,h=b.hoverSeries,i,j,k=b.chartWidth,l=this.getIndex(a);if(d&&this.options.tooltip.shared&&(!h||!h.noSharedTooltip)){f=[];i=c.length;for(j=0;j<i;j++)if(c[j].visible&&
!1!==c[j].options.enableMouseTracking&&!c[j].noSharedTooltip&&!0!==c[j].singularTooltips&&c[j].tooltipPoints.length&&(e=c[j].tooltipPoints[l])&&e.series)e._dist=ea(l-e.clientX),k=ga(k,e._dist),f.push(e);for(i=f.length;i--;)f[i]._dist>k&&f.splice(i,1);f.length&&f[0].clientX!==this.hoverX&&(d.refresh(f,a),this.hoverX=f[0].clientX)}c=h&&h.tooltipOptions.followPointer;if(h&&h.tracker&&!c){if((e=h.tooltipPoints[l])&&e!==g)e.onMouseOver(a)}else d&&c&&!d.isHidden&&(h=d.getAnchor([{}],a),d.updatePosition({plotX:h[0],
plotY:h[1]}));d&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(a){if(Aa[Za])Aa[Za].pointer.onDocumentMouseMove(a)},fa(I,"mousemove",this._onDocumentMouseMove));A(b.axes,function(b){b.drawCrosshair(a,o(e,g))})},reset:function(a){var b=this.chart,c=b.hoverSeries,d=b.hoverPoint,e=b.tooltip,f=e&&e.shared?b.hoverPoints:d;(a=a&&e&&f)&&n(f)[0].plotX===D&&(a=!1);if(a)e.refresh(f),d&&d.setState(d.state,!0);else{if(d)d.onMouseOut();if(c)c.onMouseOut();e&&e.hide();this._onDocumentMouseMove&&
(Ka(I,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null);A(b.axes,function(a){a.hideCrosshair()});this.hoverX=null}},scaleGroups:function(a,b){var c=this.chart,d;A(c.series,function(e){d=a||e.getPlotBox();e.xAxis&&e.xAxis.zoomEnabled&&(e.group.attr(d),e.markerGroup&&(e.markerGroup.attr(d),e.markerGroup.clip(b?c.clipRect:null)),e.dataLabelsGroup&&e.dataLabelsGroup.attr(d))});c.clipRect.attr(b||c.clipBox)},dragStart:function(a){var b=this.chart;b.mouseIsDown=a.type;b.cancelClick=
!1;b.mouseDownX=this.mouseDownX=a.chartX;b.mouseDownY=this.mouseDownY=a.chartY},drag:function(a){var b=this.chart,c=b.options.chart,d=a.chartX,e=a.chartY,f=this.zoomHor,g=this.zoomVert,h=b.plotLeft,i=b.plotTop,j=b.plotWidth,k=b.plotHeight,l,m=this.mouseDownX,q=this.mouseDownY;d<h?d=h:d>h+j&&(d=h+j);e<i?e=i:e>i+k&&(e=i+k);this.hasDragged=Math.sqrt(Math.pow(m-d,2)+Math.pow(q-e,2));if(10<this.hasDragged){l=b.isInsidePlot(m-h,q-i);if(b.hasCartesianSeries&&(this.zoomX||this.zoomY)&&l&&!this.selectionMarker)this.selectionMarker=
b.renderer.rect(h,i,f?1:j,g?1:k,0).attr({fill:c.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add();this.selectionMarker&&f&&(d-=m,this.selectionMarker.attr({width:ea(d),x:(0<d?0:d)+m}));this.selectionMarker&&g&&(d=e-q,this.selectionMarker.attr({height:ea(d),y:(0<d?0:d)+q}));l&&!this.selectionMarker&&c.panning&&b.pan(a,c.panning)}},drop:function(b){var c=this.chart,d=this.hasPinched;if(this.selectionMarker){var e={xAxis:[],yAxis:[],originalEvent:b.originalEvent||b},b=this.selectionMarker,
f=b.attr?b.attr("x"):b.x,g=b.attr?b.attr("y"):b.y,h=b.attr?b.attr("width"):b.width,i=b.attr?b.attr("height"):b.height,j;if(this.hasDragged||d)A(c.axes,function(a){if(a.zoomEnabled){var b=a.horiz,c=a.toValue(b?f:g),b=a.toValue(b?f+h:g+i);!isNaN(c)&&!isNaN(b)&&(e[a.coll].push({axis:a,min:ga(c,b),max:P(c,b)}),j=!0)}}),j&&va(c,"selection",e,function(b){c.zoom(a(b,d?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy();d&&this.scaleGroups()}c&&(t(c.container,{cursor:c._cursor}),c.cancelClick=
10<this.hasDragged,c.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(a){a=this.normalize(a);a.preventDefault&&a.preventDefault();this.dragStart(a)},onDocumentMouseUp:function(a){Aa[Za]&&Aa[Za].pointer.drop(a)},onDocumentMouseMove:function(a){var b=this.chart,c=this.chartPosition,d=b.hoverSeries,a=this.normalize(a,c);c&&d&&!this.inClass(a.target,"highcharts-tracker")&&!b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)&&this.reset()},onContainerMouseLeave:function(){var a=
Aa[Za];a&&(a.pointer.reset(),a.pointer.chartPosition=null)},onContainerMouseMove:function(a){var b=this.chart;Za=b.index;a=this.normalize(a);"mousedown"===b.mouseIsDown&&this.drag(a);(this.inClass(a.target,"highcharts-tracker")||b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop))&&!b.openMenu&&this.runPointActions(a)},inClass:function(a,b){for(var c;a;){if(c=l(a,"class")){if(-1!==c.indexOf(b))return!0;if(-1!==c.indexOf("highcharts-container"))return!1}a=a.parentNode}},onTrackerMouseOut:function(a){var b=
this.chart.hoverSeries,c=(a=a.relatedTarget||a.toElement)&&a.point&&a.point.series;if(b&&!b.options.stickyTracking&&!this.inClass(a,"highcharts-tooltip")&&c!==b)b.onMouseOut()},onContainerClick:function(b){var c=this.chart,d=c.hoverPoint,e=c.plotLeft,f=c.plotTop,b=this.normalize(b);b.cancelBubble=!0;c.cancelClick||(d&&this.inClass(b.target,"highcharts-tracker")?(va(d.series,"click",a(b,{point:d})),c.hoverPoint&&d.firePointEvent("click",b)):(a(b,this.getCoordinates(b)),c.isInsidePlot(b.chartX-e,b.chartY-
f)&&va(c,"click",b)))},setDOMEvents:function(){var a=this,b=a.chart.container;b.onmousedown=function(b){a.onContainerMouseDown(b)};b.onmousemove=function(b){a.onContainerMouseMove(b)};b.onclick=function(b){a.onContainerClick(b)};fa(b,"mouseleave",a.onContainerMouseLeave);1===gb&&fa(I,"mouseup",a.onDocumentMouseUp);hb&&(b.ontouchstart=function(b){a.onContainerTouchStart(b)},b.ontouchmove=function(b){a.onContainerTouchMove(b)},1===gb&&fa(I,"touchend",a.onDocumentTouchEnd))},destroy:function(){var a;
Ka(this.chart.container,"mouseleave",this.onContainerMouseLeave);gb||(Ka(I,"mouseup",this.onDocumentMouseUp),Ka(I,"touchend",this.onDocumentTouchEnd));clearInterval(this.tooltipTimeout);for(a in this)this[a]=null}};a(Ga.Pointer.prototype,{pinchTranslate:function(a,b,c,d,e,f){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,a,b,c,d,e,f);(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,a,b,c,d,e,f)},pinchTranslateDirection:function(a,b,c,d,e,f,g,h){var i=this.chart,j=a?
"x":"y",k=a?"X":"Y",l="chart"+k,m=a?"width":"height",q=i["plot"+(a?"Left":"Top")],o,n,u=h||1,r=i.inverted,s=i.bounds[a?"h":"v"],t=1===b.length,p=b[0][l],w=c[0][l],y=!t&&b[1][l],v=!t&&c[1][l],U,c=function(){!t&&20<ea(p-y)&&(u=h||ea(w-v)/ea(p-y));n=(q-w)/u+p;o=i["plot"+(a?"Width":"Height")]/u};c();b=n;b<s.min?(b=s.min,U=!0):b+o>s.max&&(b=s.max-o,U=!0);U?(w-=0.8*(w-g[j][0]),t||(v-=0.8*(v-g[j][1])),c()):g[j]=[w,v];r||(f[j]=n-q,f[m]=o);f=r?1/u:u;e[m]=o;e[j]=b;d[r?a?"scaleY":"scaleX":"scale"+k]=u;d["translate"+
k]=f*q+(w-f*p)},pinch:function(b){var c=this,d=c.chart,e=c.pinchDown,f=c.followTouchMove,g=b.touches,h=g.length,i=c.lastValidTouch,j=c.hasZoom,k=c.selectionMarker,l={},m=1===h&&(c.inClass(b.target,"highcharts-tracker")&&d.runTrackerClick||d.runChartClick),q={};(j||f)&&!m&&b.preventDefault();Y(g,function(a){return c.normalize(a)});"touchstart"===b.type?(A(g,function(a,b){e[b]={chartX:a.chartX,chartY:a.chartY}}),i.x=[e[0].chartX,e[1]&&e[1].chartX],i.y=[e[0].chartY,e[1]&&e[1].chartY],A(d.axes,function(a){if(a.zoomEnabled){var b=
d.bounds[a.horiz?"h":"v"],c=a.minPixelPadding,e=a.toPixels(a.dataMin),f=a.toPixels(a.dataMax),g=ga(e,f),e=P(e,f);b.min=ga(a.pos,g-c);b.max=P(a.pos+a.len,e+c)}})):e.length&&(k||(c.selectionMarker=k=a({destroy:Pa},d.plotBox)),c.pinchTranslate(e,g,l,k,q,i),c.hasPinched=j,c.scaleGroups(l,q),!j&&f&&1===h&&this.runPointActions(c.normalize(b)))},onContainerTouchStart:function(a){var b=this.chart;Za=b.index;1===a.touches.length?(a=this.normalize(a),b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)?(this.runPointActions(a),
this.pinch(a)):this.reset()):2===a.touches.length&&this.pinch(a)},onContainerTouchMove:function(a){(1===a.touches.length||2===a.touches.length)&&this.pinch(a)},onDocumentTouchEnd:function(a){Aa[Za]&&Aa[Za].pointer.drop(a)}});if(O.PointerEvent||O.MSPointerEvent){var Ba={},Ra=!!O.PointerEvent,rb=function(){var a,b=[];b.item=function(a){return this[a]};for(a in Ba)Ba.hasOwnProperty(a)&&b.push({pageX:Ba[a].pageX,pageY:Ba[a].pageY,target:Ba[a].target});return b},$a=function(a,b,c,d){a=a.originalEvent||
a;if(("touch"===a.pointerType||a.pointerType===a.MSPOINTER_TYPE_TOUCH)&&Aa[Za])d(a),d=Aa[Za].pointer,d[b]({type:c,target:a.currentTarget,preventDefault:Pa,touches:rb()})};a(Wa.prototype,{onContainerPointerDown:function(a){$a(a,"onContainerTouchStart","touchstart",function(a){Ba[a.pointerId]={pageX:a.pageX,pageY:a.pageY,target:a.currentTarget}})},onContainerPointerMove:function(a){$a(a,"onContainerTouchMove","touchmove",function(a){Ba[a.pointerId]={pageX:a.pageX,pageY:a.pageY};Ba[a.pointerId].target||
(Ba[a.pointerId].target=a.currentTarget)})},onDocumentPointerUp:function(a){$a(a,"onContainerTouchEnd","touchend",function(a){delete Ba[a.pointerId]})},batchMSEvents:function(a){a(this.chart.container,Ra?"pointerdown":"MSPointerDown",this.onContainerPointerDown);a(this.chart.container,Ra?"pointermove":"MSPointerMove",this.onContainerPointerMove);a(I,Ra?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}});u(Wa.prototype,"init",function(a,b,c){a.call(this,b,c);(this.hasZoom||this.followTouchMove)&&
t(b.container,{"-ms-touch-action":Da,"touch-action":Da})});u(Wa.prototype,"setDOMEvents",function(a){a.apply(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(fa)});u(Wa.prototype,"destroy",function(a){this.batchMSEvents(Ka);a.call(this)})}var yb=Ga.Legend=function(a,b){this.init(a,b)};yb.prototype={init:function(a,d){var e=this,f=d.itemStyle,g=o(d.padding,8),h=d.itemMarginTop||0;this.options=d;d.enabled&&(e.baseline=c(f.fontSize)+3+h,e.itemStyle=f,e.itemHiddenStyle=b(f,d.itemHiddenStyle),
e.itemMarginTop=h,e.padding=g,e.initialItemX=g,e.initialItemY=g-5,e.maxItemWidth=0,e.chart=a,e.itemHeight=0,e.lastLineHeight=0,e.symbolWidth=o(d.symbolWidth,16),e.pages=[],e.render(),fa(e.chart,"endResize",function(){e.positionCheckboxes()}))},colorizeItem:function(a,b){var c=this.options,d=a.legendItem,e=a.legendLine,f=a.legendSymbol,g=this.itemHiddenStyle.color,c=b?c.itemStyle.color:g,h=b?a.legendColor||a.color||"#CCC":g,g=a.options&&a.options.marker,i={fill:h},j;d&&d.css({fill:c,color:c});e&&e.attr({stroke:h});
if(f){if(g&&f.isMarker)for(j in i.stroke=h,g=a.convertAttribs(g),g)d=g[j],d!==D&&(i[j]=d);f.attr(i)}},positionItem:function(a){var b=this.options,c=b.symbolPadding,b=!b.rtl,d=a._legendItemPos,e=d[0],d=d[1],f=a.checkbox;a.legendGroup&&a.legendGroup.translate(b?e:this.legendWidth-e-2*c-4,d);f&&(f.x=e,f.y=d)},destroyItem:function(a){var b=a.checkbox;A(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&(a[b]=a[b].destroy())});b&&T(a.checkbox)},destroy:function(){var a=this.group,
b=this.box;b&&(this.box=b.destroy());a&&(this.group=a.destroy())},positionCheckboxes:function(a){var b=this.group.alignAttr,c,d=this.clipHeight||this.legendHeight;b&&(c=b.translateY,A(this.allItems,function(e){var f=e.checkbox,g;f&&(g=c+f.y+(a||0)+3,t(f,{left:b.translateX+e.checkboxOffset+f.x-20+"px",top:g+"px",display:g>c-6&&g<c+d-6?"":Da}))}))},renderTitle:function(){var a=this.padding,b=this.options.title,c=0;b.text&&(this.title||(this.title=this.chart.renderer.label(b.text,a-3,a-4,null,null,null,
null,null,"legend-title").attr({zIndex:1}).css(b.style).add(this.group)),a=this.title.getBBox(),c=a.height,this.offsetWidth=a.width,this.contentGroup.attr({translateY:c}));this.titleHeight=c},renderItem:function(a){var c=this.chart,d=c.renderer,e=this.options,f="horizontal"===e.layout,g=this.symbolWidth,h=e.symbolPadding,i=this.itemStyle,j=this.itemHiddenStyle,k=this.padding,l=f?o(e.itemDistance,20):0,m=!e.rtl,q=e.width,n=e.itemMarginBottom||0,u=this.itemMarginTop,r=this.initialItemX,s=a.legendItem,
t=a.series&&a.series.drawLegendSymbol?a.series:a,p=t.options,p=this.createCheckboxForItem&&p&&p.showCheckbox,y=e.useHTML;s||(a.legendGroup=d.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),t.drawLegendSymbol(this,a),a.legendItem=s=d.text(e.labelFormat?w(e.labelFormat,a):e.labelFormatter.call(a),m?g+h:-h,this.baseline,y).css(b(a.visible?i:j)).attr({align:m?"left":"right",zIndex:2}).add(a.legendGroup),this.setItemEvents&&this.setItemEvents(a,s,y,i,j),this.colorizeItem(a,a.visible),p&&this.createCheckboxForItem(a));
d=s.getBBox();g=a.checkboxOffset=e.itemWidth||a.legendItemWidth||g+h+d.width+l+(p?20:0);this.itemHeight=h=M(a.legendItemHeight||d.height);if(f&&this.itemX-r+g>(q||c.chartWidth-2*k-r-e.x))this.itemX=r,this.itemY+=u+this.lastLineHeight+n,this.lastLineHeight=0;this.maxItemWidth=P(this.maxItemWidth,g);this.lastItemY=u+this.itemY+n;this.lastLineHeight=P(h,this.lastLineHeight);a._legendItemPos=[this.itemX,this.itemY];f?this.itemX+=g:(this.itemY+=u+h+n,this.lastLineHeight=h);this.offsetWidth=q||P((f?this.itemX-
r-l:g)+k,this.offsetWidth)},getAllItems:function(){var a=[];A(this.chart.series,function(b){var c=b.options;if(o(c.showInLegend,!k(c.linkedTo)?D:!1,!0))a=a.concat(b.legendItems||("point"===c.legendType?b.data:b))});return a},render:function(){var b=this,c=b.chart,d=c.renderer,e=b.group,f,g,h,i,j=b.box,k=b.options,l=b.padding,m=k.borderWidth,q=k.backgroundColor;b.itemX=b.initialItemX;b.itemY=b.initialItemY;b.offsetWidth=0;b.lastItemY=0;e||(b.group=e=d.g("legend").attr({zIndex:7}).add(),b.contentGroup=
d.g().attr({zIndex:1}).add(e),b.scrollGroup=d.g().add(b.contentGroup));b.renderTitle();f=b.getAllItems();E(f,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)});k.reversed&&f.reverse();b.allItems=f;b.display=g=!!f.length;A(f,function(a){b.renderItem(a)});h=k.width||b.offsetWidth;i=b.lastItemY+b.lastLineHeight+b.titleHeight;i=b.handleOverflow(i);if(m||q)h+=l,i+=l,j?0<h&&0<i&&(j[j.isNew?"attr":"animate"](j.crisp({width:h,height:i})),j.isNew=!1):(b.box=j=
d.rect(0,0,h,i,k.borderRadius,m||0).attr({stroke:k.borderColor,"stroke-width":m||0,fill:q||Da}).add(e).shadow(k.shadow),j.isNew=!0),j[g?"show":"hide"]();b.legendWidth=h;b.legendHeight=i;A(f,function(a){b.positionItem(a)});g&&e.align(a({width:h,height:i},k),!0,"spacingBox");c.isResizing||this.positionCheckboxes()},handleOverflow:function(a){var b=this,c=this.chart,d=c.renderer,e=this.options,f=e.y,f=c.spacingBox.height+("top"===e.verticalAlign?-f:f)-this.padding,g=e.maxHeight,h,i=this.clipRect,j=e.navigation,
k=o(j.animation,!0),l=j.arrowSize||12,m=this.nav,q=this.pages,n,u=this.allItems;"horizontal"===e.layout&&(f/=2);g&&(f=ga(f,g));q.length=0;a>f&&!e.useHTML?(this.clipHeight=h=f-20-this.titleHeight-this.padding,this.currentPage=o(this.currentPage,1),this.fullHeight=a,A(u,function(a,b){var c=a._legendItemPos[1],d=M(a.legendItem.getBBox().height),e=q.length;if(!e||c-q[e-1]>h&&(n||c)!==q[e-1])q.push(n||c),e++;b===u.length-1&&c+d-q[e-1]>h&&q.push(c);c!==n&&(n=c)}),i||(i=b.clipRect=d.clipRect(0,this.padding,
9999,0),b.contentGroup.clip(i)),i.attr({height:h}),m||(this.nav=m=d.g().attr({zIndex:1}).add(this.group),this.up=d.symbol("triangle",0,0,l,l).on("click",function(){b.scroll(-1,k)}).add(m),this.pager=d.text("",15,10).css(j.style).add(m),this.down=d.symbol("triangle-down",0,0,l,l).on("click",function(){b.scroll(1,k)}).add(m)),b.scroll(0),a=f):m&&(i.attr({height:c.chartHeight}),m.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0);return a},scroll:function(a,b){var c=this.pages,d=c.length,
e=this.currentPage+a,f=this.clipHeight,g=this.options.navigation,h=g.activeColor,g=g.inactiveColor,i=this.pager,j=this.padding;e>d&&(e=d);0<e&&(b!==D&&B(b,this.chart),this.nav.attr({translateX:j,translateY:f+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===e?g:h}).css({cursor:1===e?"default":"pointer"}),i.attr({text:e+"/"+d}),this.down.attr({x:18+this.pager.getBBox().width,fill:e===d?g:h}).css({cursor:e===d?"default":"pointer"}),c=-c[e-1]+this.initialItemY,this.scrollGroup.animate({translateY:c}),
this.currentPage=e,this.positionCheckboxes(c))}};da=Ga.LegendSymbolMixin={drawRectangle:function(a,b){var c=a.options.symbolHeight||12;b.legendSymbol=this.chart.renderer.rect(0,a.baseline-5-c/2,a.symbolWidth,c,a.options.symbolRadius||0).attr({zIndex:3}).add(b.legendGroup)},drawLineMarker:function(a){var b=this.options,c=b.marker,d;d=a.symbolWidth;var e=this.chart.renderer,f=this.legendGroup,a=a.baseline-M(0.3*e.fontMetrics(a.options.itemStyle.fontSize).b),g;b.lineWidth&&(g={"stroke-width":b.lineWidth},
b.dashStyle&&(g.dashstyle=b.dashStyle),this.legendLine=e.path(["M",0,a,"L",d,a]).attr(g).add(f));c&&!1!==c.enabled&&(b=c.radius,this.legendSymbol=d=e.symbol(this.symbol,d/2-b,a-b,2*b,2*b).add(f),d.isMarker=!0)}};(/Trident\/7\.0/.test(p)||Oa)&&u(yb.prototype,"positionItem",function(a,b){var c=this,d=function(){b._legendItemPos&&a.call(c,b)};d();setTimeout(d)});S.prototype={init:function(a,c){var d,e=a.series;a.series=null;d=b(oa,a);d.series=a.series=e;this.userOptions=a;e=d.chart;this.margin=this.splashArray("margin",
e);this.spacing=this.splashArray("spacing",e);var f=e.events;this.bounds={h:{},v:{}};this.callback=c;this.isResizing=0;this.options=d;this.axes=[];this.series=[];this.hasCartesianSeries=e.showAxes;var g=this,h;g.index=Aa.length;Aa.push(g);gb++;!1!==e.reflow&&fa(g,"load",function(){g.initReflow()});if(f)for(h in f)fa(g,h,f[h]);g.xAxis=[];g.yAxis=[];g.animation=R?!1:o(e.animation,!0);g.pointCount=0;g.counters=new z;g.firstRender()},initSeries:function(a){var b=this.options.chart;(b=ca[a.type||b.type||
b.defaultSeriesType])||K(17,!0);b=new b;b.init(this,a);return b},isInsidePlot:function(a,b,c){var d=c?b:a,a=c?a:b;return 0<=d&&d<=this.plotWidth&&0<=a&&a<=this.plotHeight},adjustTickAmounts:function(){!1!==this.options.chart.alignTicks&&A(this.axes,function(a){a.adjustTickAmount()});this.maxTicks=null},redraw:function(b){var c=this.axes,d=this.series,e=this.pointer,f=this.legend,g=this.isDirtyLegend,h,i,j=this.isDirtyBox,k=d.length,l=k,m=this.renderer,q=m.isHidden(),o=[];B(b,this);q&&this.cloneRenderTo();
for(this.layOutTitles();l--;)if(b=d[l],b.options.stacking&&(h=!0,b.isDirty)){i=!0;break}if(i)for(l=k;l--;)if(b=d[l],b.options.stacking)b.isDirty=!0;A(d,function(a){a.isDirty&&"point"===a.options.legendType&&(g=!0)});g&&f.options.enabled&&(f.render(),this.isDirtyLegend=!1);h&&this.getStacks();this.hasCartesianSeries&&(this.isResizing||(this.maxTicks=null,A(c,function(a){a.setScale()})),this.adjustTickAmounts(),this.getMargins(),A(c,function(a){a.isDirty&&(j=true)}),A(c,function(b){if(b.isDirtyExtremes){b.isDirtyExtremes=
false;o.push(function(){va(b,"afterSetExtremes",a(b.eventArgs,b.getExtremes()));delete b.eventArgs})}(j||h)&&b.redraw()}));j&&this.drawChartBox();A(d,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()});e&&e.reset(!0);m.draw();va(this,"redraw");q&&this.cloneRenderTo(!0);A(o,function(a){a.call()})},get:function(a){var b=this.axes,c=this.series,d,e;for(d=0;d<b.length;d++)if(b[d].options.id===a)return b[d];for(d=0;d<c.length;d++)if(c[d].options.id===a)return c[d];for(d=0;d<c.length;d++){e=
c[d].points||[];for(b=0;b<e.length;b++)if(e[b].id===a)return e[b]}return null},getAxes:function(){var a=this,b=this.options,c=b.xAxis=n(b.xAxis||{}),b=b.yAxis=n(b.yAxis||{});A(c,function(a,b){a.index=b;a.isX=!0});A(b,function(a,b){a.index=b});c=c.concat(b);A(c,function(b){new X(a,b)});a.adjustTickAmounts()},getSelectedPoints:function(){var a=[];A(this.series,function(b){a=a.concat(ya(b.points||[],function(a){return a.selected}))});return a},getSelectedSeries:function(){return ya(this.series,function(a){return a.selected})},
getStacks:function(){var a=this;A(a.yAxis,function(a){a.stacks&&a.hasVisibleSeries&&(a.oldStacks=a.stacks)});A(a.series,function(b){if(b.options.stacking&&(!0===b.visible||!1===a.options.chart.ignoreHiddenSeries))b.stackKey=b.type+o(b.options.stack,"")})},setTitle:function(a,c,d){var e=this,f=e.options,g;g=f.title=b(f.title,a);f=f.subtitle=b(f.subtitle,c);A([["title",a,g],["subtitle",c,f]],function(a){var b=a[0],c=e[b],d=a[1],a=a[2];c&&d&&(e[b]=c=c.destroy());a&&a.text&&!c&&(e[b]=e.renderer.text(a.text,
0,0,a.useHTML).attr({align:a.align,"class":"highcharts-"+b,zIndex:a.zIndex||4}).css(a.style).add())});e.layOutTitles(d)},layOutTitles:function(b){var c=0,d=this.title,e=this.subtitle,f=this.options,g=f.title,f=f.subtitle,h=this.spacingBox.width-44;if(d&&(d.css({width:(g.width||h)+"px"}).align(a({y:15},g),!1,"spacingBox"),!g.floating&&!g.verticalAlign))c=d.getBBox().height;e&&(e.css({width:(f.width||h)+"px"}).align(a({y:c+g.margin},f),!1,"spacingBox"),!f.floating&&!f.verticalAlign&&(c=sa(c+e.getBBox().height)));
d=this.titleOffset!==c;this.titleOffset=c;!this.isDirtyBox&&d&&(this.isDirtyBox=d,this.hasRendered&&o(b,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var a=this.options.chart,b=a.width,a=a.height,c=this.renderToClone||this.renderTo;k(b)||(this.containerWidth=qb(c,"width"));k(a)||(this.containerHeight=qb(c,"height"));this.chartWidth=P(0,b||this.containerWidth||600);this.chartHeight=P(0,o(a,19<this.containerHeight?this.containerHeight:400))},cloneRenderTo:function(a){var b=this.renderToClone,
c=this.container;a?b&&(this.renderTo.appendChild(c),T(b),delete this.renderToClone):(c&&c.parentNode===this.renderTo&&this.renderTo.removeChild(c),this.renderToClone=b=this.renderTo.cloneNode(0),t(b,{position:"absolute",top:"-9999px",display:"block"}),b.style.setProperty&&b.style.setProperty("display","block","important"),I.body.appendChild(b),c&&b.appendChild(c))},getContainer:function(){var b,e=this.options.chart,f,g,h;this.renderTo=b=e.renderTo;h="highcharts-"+U++;d(b)&&(this.renderTo=b=I.getElementById(b));
b||K(13,!0);f=c(l(b,"data-highcharts-chart"));!isNaN(f)&&Aa[f]&&Aa[f].hasRendered&&Aa[f].destroy();l(b,"data-highcharts-chart",this.index);b.innerHTML="";!e.skipClone&&!b.offsetWidth&&this.cloneRenderTo();this.getChartSize();f=this.chartWidth;g=this.chartHeight;this.container=b=s(ha,{className:"highcharts-container"+(e.className?" "+e.className:""),id:h},a({position:"relative",overflow:"hidden",width:f+"px",height:g+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},
e.style),this.renderToClone||b);this._cursor=b.style.cursor;this.renderer=e.forExport?new Ya(b,f,g,e.style,!0):new Sa(b,f,g,e.style);R&&this.renderer.create(this,b,f,g)},getMargins:function(){var a=this.spacing,b,c=this.legend,d=this.margin,e=this.options.legend,f=o(e.margin,20),g=e.x,h=e.y,i=e.align,j=e.verticalAlign,l=this.titleOffset;this.resetMargins();b=this.axisOffset;l&&!k(d[0])&&(this.plotTop=P(this.plotTop,l+this.options.title.margin+a[0]));c.display&&!e.floating&&("right"===i?k(d[1])||(this.marginRight=
P(this.marginRight,c.legendWidth-g+f+a[1])):"left"===i?k(d[3])||(this.plotLeft=P(this.plotLeft,c.legendWidth+g+f+a[3])):"top"===j?k(d[0])||(this.plotTop=P(this.plotTop,c.legendHeight+h+f+a[0])):"bottom"===j&&!k(d[2])&&(this.marginBottom=P(this.marginBottom,c.legendHeight-h+f+a[2])));this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin);this.extraTopMargin&&(this.plotTop+=this.extraTopMargin);this.hasCartesianSeries&&A(this.axes,function(a){a.getOffset()});k(d[3])||(this.plotLeft+=b[3]);
k(d[0])||(this.plotTop+=b[0]);k(d[2])||(this.marginBottom+=b[2]);k(d[1])||(this.marginRight+=b[1]);this.setChartSize()},reflow:function(a){var b=this,c=b.options.chart,d=b.renderTo,e=c.width||qb(d,"width"),f=c.height||qb(d,"height"),c=a?a.target:O,d=function(){b.container&&(b.setSize(e,f,!1),b.hasUserSize=null)};if(!b.hasUserSize&&e&&f&&(c===O||c===I)){if(e!==b.containerWidth||f!==b.containerHeight)clearTimeout(b.reflowTimeout),a?b.reflowTimeout=setTimeout(d,100):d();b.containerWidth=e;b.containerHeight=
f}},initReflow:function(){var a=this,b=function(b){a.reflow(b)};fa(O,"resize",b);fa(a,"destroy",function(){Ka(O,"resize",b)})},setSize:function(a,b,c){var d=this,e,f,g;d.isResizing+=1;g=function(){d&&va(d,"endResize",null,function(){d.isResizing-=1})};B(c,d);d.oldChartHeight=d.chartHeight;d.oldChartWidth=d.chartWidth;k(a)&&(d.chartWidth=e=P(0,M(a)),d.hasUserSize=!!e);k(b)&&(d.chartHeight=f=P(0,M(b)));(Ea?Hb:t)(d.container,{width:e+"px",height:f+"px"},Ea);d.setChartSize(!0);d.renderer.setSize(e,f,
c);d.maxTicks=null;A(d.axes,function(a){a.isDirty=true;a.setScale()});A(d.series,function(a){a.isDirty=true});d.isDirtyLegend=!0;d.isDirtyBox=!0;d.layOutTitles();d.getMargins();d.redraw(c);d.oldChartHeight=null;va(d,"resize");!1===Ea?g():setTimeout(g,Ea&&Ea.duration||500)},setChartSize:function(a){var b=this.inverted,c=this.renderer,d=this.chartWidth,e=this.chartHeight,f=this.options.chart,g=this.spacing,h=this.clipOffset,i,j,k,l;this.plotLeft=i=M(this.plotLeft);this.plotTop=j=M(this.plotTop);this.plotWidth=
k=P(0,M(d-i-this.marginRight));this.plotHeight=l=P(0,M(e-j-this.marginBottom));this.plotSizeX=b?l:k;this.plotSizeY=b?k:l;this.plotBorderWidth=f.plotBorderWidth||0;this.spacingBox=c.spacingBox={x:g[3],y:g[0],width:d-g[3]-g[1],height:e-g[0]-g[2]};this.plotBox=c.plotBox={x:i,y:j,width:k,height:l};d=2*la(this.plotBorderWidth/2);b=sa(P(d,h[3])/2);c=sa(P(d,h[0])/2);this.clipBox={x:b,y:c,width:la(this.plotSizeX-P(d,h[1])/2-b),height:la(this.plotSizeY-P(d,h[2])/2-c)};a||A(this.axes,function(a){a.setAxisSize();
a.setAxisTranslation()})},resetMargins:function(){var a=this.spacing,b=this.margin;this.plotTop=o(b[0],a[0]);this.marginRight=o(b[1],a[1]);this.marginBottom=o(b[2],a[2]);this.plotLeft=o(b[3],a[3]);this.axisOffset=[0,0,0,0];this.clipOffset=[0,0,0,0]},drawChartBox:function(){var a=this.options.chart,b=this.renderer,c=this.chartWidth,d=this.chartHeight,e=this.chartBackground,f=this.plotBackground,g=this.plotBorder,h=this.plotBGImage,i=a.borderWidth||0,j=a.backgroundColor,k=a.plotBackgroundColor,l=a.plotBackgroundImage,
m=a.plotBorderWidth||0,q,o=this.plotLeft,n=this.plotTop,u=this.plotWidth,r=this.plotHeight,s=this.plotBox,t=this.clipRect,p=this.clipBox;q=i+(a.shadow?8:0);if(i||j)e?e.animate(e.crisp({width:c-q,height:d-q})):(e={fill:j||Da},i&&(e.stroke=a.borderColor,e["stroke-width"]=i),this.chartBackground=b.rect(q/2,q/2,c-q,d-q,a.borderRadius,i).attr(e).addClass("highcharts-background").add().shadow(a.shadow));k&&(f?f.animate(s):this.plotBackground=b.rect(o,n,u,r,0).attr({fill:k}).add().shadow(a.plotShadow));
l&&(h?h.animate(s):this.plotBGImage=b.image(l,o,n,u,r).add());t?t.animate({width:p.width,height:p.height}):this.clipRect=b.clipRect(p);m&&(g?g.animate(g.crisp({x:o,y:n,width:u,height:r})):this.plotBorder=b.rect(o,n,u,r,0,-m).attr({stroke:a.plotBorderColor,"stroke-width":m,fill:Da,zIndex:1}).add());this.isDirtyBox=!1},propFromSeries:function(){var a=this,b=a.options.chart,c,d=a.options.series,e,f;A(["inverted","angular","polar"],function(g){c=ca[b.type||b.defaultSeriesType];f=a[g]||b[g]||c&&c.prototype[g];
for(e=d&&d.length;!f&&e--;)(c=ca[d[e].type])&&c.prototype[g]&&(f=!0);a[g]=f})},linkSeries:function(){var a=this,b=a.series;A(b,function(a){a.linkedSeries.length=0});A(b,function(b){var c=b.options.linkedTo;if(d(c)&&(c=":previous"===c?a.series[b.index-1]:a.get(c)))c.linkedSeries.push(b),b.linkedParent=c})},renderSeries:function(){A(this.series,function(a){a.translate();a.setTooltipPoints&&a.setTooltipPoints();a.render()})},render:function(){var b=this,d=b.axes,e=b.renderer,f=b.options,g=f.labels,h=
f.credits,i;b.setTitle();b.legend=new yb(b,f.legend);b.getStacks();A(d,function(a){a.setScale()});b.getMargins();b.maxTicks=null;A(d,function(a){a.setTickPositions(!0);a.setMaxTicks()});b.adjustTickAmounts();b.getMargins();b.drawChartBox();b.hasCartesianSeries&&A(d,function(a){a.render()});b.seriesGroup||(b.seriesGroup=e.g("series-group").attr({zIndex:3}).add());b.renderSeries();g.items&&A(g.items,function(d){var f=a(g.style,d.style),h=c(f.left)+b.plotLeft,i=c(f.top)+b.plotTop+12;delete f.left;delete f.top;
e.text(d.html,h,i).attr({zIndex:2}).css(f).add()});h.enabled&&!b.credits&&(i=h.href,b.credits=e.text(h.text,0,0).on("click",function(){if(i)location.href=i}).attr({align:h.position.align,zIndex:8}).css(h.style).add().align(h.position));b.hasRendered=!0},destroy:function(){var a=this,b=a.axes,c=a.series,d=a.container,e,f=d&&d.parentNode;va(a,"destroy");Aa[a.index]=D;gb--;a.renderTo.removeAttribute("data-highcharts-chart");Ka(a);for(e=b.length;e--;)b[e]=b[e].destroy();for(e=c.length;e--;)c[e]=c[e].destroy();
A("title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer scroller rangeSelector legend resetZoomButton tooltip renderer".split(" "),function(b){var c=a[b];c&&c.destroy&&(a[b]=c.destroy())});d&&(d.innerHTML="",Ka(d),f&&T(d));for(e in a)delete a[e]},isReadyToRender:function(){var a=this;return!Ia&&O==O.top&&"complete"!==I.readyState||R&&!O.canvg?(R?jb.push(function(){a.firstRender()},a.options.global.canvasToolsURL):I.attachEvent("onreadystatechange",
function(){I.detachEvent("onreadystatechange",a.firstRender);"complete"===I.readyState&&a.firstRender()}),!1):!0},firstRender:function(){var a=this,b=a.options,c=a.callback;a.isReadyToRender()&&(a.getContainer(),va(a,"init"),a.resetMargins(),a.setChartSize(),a.propFromSeries(),a.getAxes(),A(b.series||[],function(b){a.initSeries(b)}),a.linkSeries(),va(a,"beforeRender"),Ga.Pointer&&(a.pointer=new Wa(a,b)),a.render(),a.renderer.draw(),c&&c.apply(a,[a]),A(a.callbacks,function(b){b.apply(a,[a])}),a.cloneRenderTo(!0),
va(a,"load"))},splashArray:function(a,b){var c=b[a],c=e(c)?c:[c,c,c,c];return[o(b[a+"Top"],c[0]),o(b[a+"Right"],c[1]),o(b[a+"Bottom"],c[2]),o(b[a+"Left"],c[3])]}};S.prototype.callbacks=[];Ma=Ga.CenteredSeriesMixin={getCenter:function(){var a=this.options,b=this.chart,d=2*(a.slicedOffset||0),e,f=b.plotWidth-2*d,g=b.plotHeight-2*d,b=a.center,a=[o(b[0],"50%"),o(b[1],"50%"),a.size||"100%",a.innerSize||0],h=ga(f,g),i;return Y(a,function(a,b){i=/%$/.test(a);e=2>b||2===b&&i;return(i?[f,g,h,h][b]*c(a)/100:
a)+(e?d:0)})}};var sb=function(){};sb.prototype={init:function(a,b,c){this.series=a;this.applyOptions(b,c);this.pointAttr={};if(a.options.colorByPoint&&(b=a.options.colors||a.chart.options.colors,this.color=this.color||b[a.colorCounter++],a.colorCounter===b.length))a.colorCounter=0;a.chart.pointCount++;return this},applyOptions:function(b,c){var d=this.series,e=d.pointValKey,b=sb.prototype.optionsToObject.call(this,b);a(this,b);this.options=this.options?a(this.options,b):b;e&&(this.y=this[e]);this.x===
D&&d&&(this.x=c===D?d.autoIncrement():c);return this},optionsToObject:function(a){var b={},c=this.series,d=c.pointArrayMap||["y"],e=d.length,f=0,g=0;if("number"===typeof a||null===a)b[d[0]]=a;else if(h(a)){a.length>e&&(c=typeof a[0],"string"===c?b.name=a[0]:"number"===c&&(b.x=a[0]),f++);for(;g<e;)b[d[g++]]=a[f++]}else if("object"===typeof a&&(b=a,a.dataLabels&&(c._hasPointLabels=!0),a.marker))c._hasPointMarkers=!0;return b},destroy:function(){var a=this.series.chart,b=a.hoverPoints,c;a.pointCount--;
if(b&&(this.setState(),j(b,this),!b.length))a.hoverPoints=null;if(this===a.hoverPoint)this.onMouseOut();if(this.graphic||this.dataLabel)Ka(this),this.destroyElements();this.legendItem&&a.legend.destroyItem(this);for(c in this)this[c]=null},destroyElements:function(){for(var a="graphic dataLabel dataLabelUpper group connector shadowGroup".split(" "),b,c=6;c--;)b=a[c],this[b]&&(this[b]=this[b].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,
point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(a){var b=this.series,c=b.tooltipOptions,d=o(c.valueDecimals,""),e=c.valuePrefix||"",f=c.valueSuffix||"";A(b.pointArrayMap||["y"],function(b){b="{point."+b;if(e||f)a=a.replace(b+"}",e+b+"}"+f);a=a.replace(b+"}",b+":,."+d+"f}")});return w(a,{point:this,series:this.series})},firePointEvent:function(a,b,c){var d=this,e=this.series.options;(e.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&
this.importEvents();"click"===a&&e.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)});va(this,a,b,c)}};var wa=function(){};wa.prototype={isCartesian:!0,type:"line",pointClass:sb,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(b,c){var d=this,e,f,g=b.series,h=function(a,b){return o(a.options.index,a._i)-o(b.options.index,
b._i)};d.chart=b;d.options=c=d.setOptions(c);d.linkedSeries=[];d.bindAxes();a(d,{name:c.name,state:"",pointAttr:{},visible:!1!==c.visible,selected:!0===c.selected});R&&(c.animation=!1);f=c.events;for(e in f)fa(d,e,f[e]);if(f&&f.click||c.point&&c.point.events&&c.point.events.click||c.allowPointSelect)b.runTrackerClick=!0;d.getColor();d.getSymbol();A(d.parallelArrays,function(a){d[a+"Data"]=[]});d.setData(c.data,!1);d.isCartesian&&(b.hasCartesianSeries=!0);g.push(d);d._i=g.length-1;E(g,h);this.yAxis&&
E(this.yAxis.series,h);A(g,function(a,b){a.index=b;a.name=a.name||"Series "+(b+1)})},bindAxes:function(){var a=this,b=a.options,c=a.chart,d;A(a.axisTypes||[],function(e){A(c[e],function(c){d=c.options;if(b[e]===d.index||b[e]!==D&&b[e]===d.id||b[e]===D&&0===d.index)c.series.push(a),a[e]=c,c.isDirty=!0});!a[e]&&a.optionalAxis!==e&&K(18,!0)})},updateParallelArrays:function(a,b){var c=a.series,d=arguments;A(c.parallelArrays,"number"===typeof b?function(d){var e="y"===d&&c.toYData?c.toYData(a):a[d];c[d+
"Data"][b]=e}:function(a){Array.prototype[b].apply(c[a+"Data"],Array.prototype.slice.call(d,2))})},autoIncrement:function(){var a=this.options,b=this.xIncrement,b=o(b,a.pointStart,0);this.pointInterval=o(this.pointInterval,a.pointInterval,1);this.xIncrement=b+this.pointInterval;return b},getSegments:function(){var a=-1,b=[],c,d=this.points,e=d.length;if(e)if(this.options.connectNulls){for(c=e;c--;)null===d[c].y&&d.splice(c,1);d.length&&(b=[d])}else A(d,function(c,f){null===c.y?(f>a+1&&b.push(d.slice(a+
1,f)),a=f):f===e-1&&b.push(d.slice(a+1,f+1))});this.segments=b},setOptions:function(a){var c=this.chart,d=c.options.plotOptions,c=c.userOptions||{},e=c.plotOptions||{},f=d[this.type];this.userOptions=a;d=b(f,d.series,a);this.tooltipOptions=b(oa.tooltip,oa.plotOptions[this.type].tooltip,c.tooltip,e.series&&e.series.tooltip,e[this.type]&&e[this.type].tooltip,a.tooltip);null===f.marker&&delete d.marker;return d},getColor:function(){var a=this.options,b=this.userOptions,c=this.chart.options.colors,d=
this.chart.counters,e;e=a.color||Qa[this.type].color;!e&&!a.colorByPoint&&(k(b._colorIndex)?a=b._colorIndex:(b._colorIndex=d.color,a=d.color++),e=c[a]);this.color=e;d.wrapColor(c.length)},getSymbol:function(){var a=this.userOptions,b=this.options.marker,c=this.chart,d=c.options.symbols,c=c.counters;this.symbol=b.symbol;this.symbol||(k(a._symbolIndex)?a=a._symbolIndex:(a._symbolIndex=c.symbol,a=c.symbol++),this.symbol=d[a]);/^url/.test(this.symbol)&&(b.radius=0);c.wrapSymbol(d.length)},drawLegendSymbol:da.drawLineMarker,
setData:function(a,b,c,e){var f=this,i=f.points,j=i&&i.length||0,k,l=f.options,m=f.chart,q=null,n=f.xAxis,u=n&&!!n.categories,r=f.tooltipPoints,s=l.turboThreshold,t=this.xData,p=this.yData,w=(k=f.pointArrayMap)&&k.length,a=a||[];k=a.length;b=o(b,!0);if(!1!==e&&k&&j===k&&!f.cropped&&!f.hasGroupedData)A(a,function(a,b){i[b].update(a,!1)});else{f.xIncrement=null;f.pointRange=u?1:l.pointRange;f.colorCounter=0;A(this.parallelArrays,function(a){f[a+"Data"].length=0});if(s&&k>s){for(c=0;null===q&&c<k;)q=
a[c],c++;if(g(q)){u=o(l.pointStart,0);l=o(l.pointInterval,1);for(c=0;c<k;c++)t[c]=u,p[c]=a[c],u+=l;f.xIncrement=u}else if(h(q))if(w)for(c=0;c<k;c++)l=a[c],t[c]=l[0],p[c]=l.slice(1,w+1);else for(c=0;c<k;c++)l=a[c],t[c]=l[0],p[c]=l[1];else K(12)}else for(c=0;c<k;c++)if(a[c]!==D&&(l={series:f},f.pointClass.prototype.applyOptions.apply(l,[a[c]]),f.updateParallelArrays(l,c),u&&l.name))n.names[l.x]=l.name;d(p[0])&&K(14,!0);f.data=[];f.options.data=a;for(c=j;c--;)i[c]&&i[c].destroy&&i[c].destroy();r&&(r.length=
0);n&&(n.minRange=n.userMinRange);f.isDirty=f.isDirtyData=m.isDirtyBox=!0;c=!1}b&&m.redraw(c)},processData:function(a){var b=this.xData,c=this.yData,d=b.length,e;e=0;var f,g,h=this.xAxis,i=this.options,j=i.cropThreshold,k=0,l=this.isCartesian,m,q;if(l&&!this.isDirty&&!h.isDirty&&!this.yAxis.isDirty&&!a)return!1;if(l&&this.sorted&&(!j||d>j||this.forceCrop))if(m=h.min,q=h.max,b[d-1]<m||b[0]>q)b=[],c=[];else if(b[0]<m||b[d-1]>q)e=this.cropData(this.xData,this.yData,m,q),b=e.xData,c=e.yData,e=e.start,
f=!0,k=b.length;for(d=b.length-1;0<=d;d--)a=b[d]-b[d-1],!f&&b[d]>m&&b[d]<q&&k++,0<a&&(g===D||a<g)?g=a:0>a&&this.requireSorting&&K(15);this.cropped=f;this.cropStart=e;this.processedXData=b;this.processedYData=c;this.activePointCount=k;null===i.pointRange&&(this.pointRange=g||1);this.closestPointRange=g},cropData:function(a,b,c,d){var e=a.length,f=0,g=e,h=o(this.cropShoulder,1),i;for(i=0;i<e;i++)if(a[i]>=c){f=P(0,i-h);break}for(;i<e;i++)if(a[i]>d){g=i+h;break}return{xData:a.slice(f,g),yData:b.slice(f,
g),start:f,end:g}},generatePoints:function(){var a=this.options.data,b=this.data,c,d=this.processedXData,e=this.processedYData,f=this.pointClass,g=d.length,h=this.cropStart||0,i,j=this.hasGroupedData,k,l=[],m;!b&&!j&&(b=[],b.length=a.length,b=this.data=b);for(m=0;m<g;m++)i=h+m,j?l[m]=(new f).init(this,[d[m]].concat(n(e[m]))):(b[i]?k=b[i]:a[i]!==D&&(b[i]=k=(new f).init(this,a[i],d[m])),l[m]=k);if(b&&(g!==(c=b.length)||j))for(m=0;m<c;m++)if(m===h&&!j&&(m+=g),b[m])b[m].destroyElements(),b[m].plotX=D;
this.data=b;this.points=l},getExtremes:function(a){var b=this.yAxis,c=this.processedXData,d,e=[],f=0;d=this.xAxis.getExtremes();var g=d.min,h=d.max,i,j,k,l,a=a||this.stackedYData||this.processedYData;d=a.length;for(l=0;l<d;l++)if(j=c[l],k=a[l],i=null!==k&&k!==D&&(!b.isLog||k.length||0<k),j=this.getExtremesFromAll||this.cropped||(c[l+1]||j)>=g&&(c[l-1]||j)<=h,i&&j)if(i=k.length)for(;i--;)null!==k[i]&&(e[f++]=k[i]);else e[f++]=k;this.dataMin=o(void 0,H(e));this.dataMax=o(void 0,C(e))},translate:function(){this.processedXData||
this.processData();this.generatePoints();for(var a=this.options,b=a.stacking,c=this.xAxis,d=c.categories,e=this.yAxis,f=this.points,h=f.length,i=!!this.modifyValue,j=a.pointPlacement,l="between"===j||g(j),m=a.threshold,a=0;a<h;a++){var q=f[a],n=q.x,u=q.y,r=q.low,s=b&&e.stacks[(this.negStacks&&u<m?"-":"")+this.stackKey];e.isLog&&0>=u&&(q.y=u=null);q.plotX=c.translate(n,0,0,0,1,j,"flags"===this.type);b&&(this.visible&&s&&s[n])&&(s=s[n],u=s.points[this.index+","+a],r=u[0],u=u[1],0===r&&(r=o(m,e.min)),
e.isLog&&0>=r&&(r=null),q.total=q.stackTotal=s.total,q.percentage=s.total&&100*(q.y/s.total),q.stackY=u,s.setOffset(this.pointXOffset||0,this.barW||0));q.yBottom=k(r)?e.translate(r,0,1,0,1):null;i&&(u=this.modifyValue(u,q));q.plotY="number"===typeof u&&Infinity!==u?e.translate(u,0,1,0,1):D;q.clientX=l?c.translate(n,0,0,0,1):q.plotX;q.negative=q.y<(m||0);q.category=d&&d[q.x]!==D?d[q.x]:q.x}this.getSegments()},animate:function(b){var c=this.chart,d=c.renderer,f;f=this.options.animation;var g=this.clipBox||
c.clipBox,h=c.inverted,i;f&&!e(f)&&(f=Qa[this.type].animation);i=["_sharedClip",f.duration,f.easing,g.height].join();b?(b=c[i],f=c[i+"m"],b||(c[i]=b=d.clipRect(a(g,{width:0})),c[i+"m"]=f=d.clipRect(-99,h?-c.plotLeft:-c.plotTop,99,h?c.chartWidth:c.chartHeight)),this.group.clip(b),this.markerGroup.clip(f),this.sharedClipKey=i):((b=c[i])&&b.animate({width:c.plotSizeX},f),c[i+"m"]&&c[i+"m"].animate({width:c.plotSizeX+99},f),this.animate=null)},afterAnimate:function(){var a=this.chart,b=this.sharedClipKey,
c=this.group,d=this.clipBox;if(c&&!1!==this.options.clip){if(!b||!d)c.clip(d?a.renderer.clipRect(d):a.clipRect);this.markerGroup.clip()}va(this,"afterAnimate");setTimeout(function(){b&&a[b]&&(d||(a[b]=a[b].destroy()),a[b+"m"]&&(a[b+"m"]=a[b+"m"].destroy()))},100)},drawPoints:function(){var b,c=this.points,d=this.chart,e,f,g,h,i,j,k,l;e=this.options.marker;var m=this.pointAttr[""],q,n=this.markerGroup,u=o(e.enabled,this.activePointCount<0.5*this.xAxis.len/e.radius);if(!1!==e.enabled||this._hasPointMarkers)for(g=
c.length;g--;)if(h=c[g],e=la(h.plotX),f=h.plotY,l=h.graphic,j=h.marker||{},b=u&&j.enabled===D||j.enabled,q=d.isInsidePlot(M(e),f,d.inverted),b&&f!==D&&!isNaN(f)&&null!==h.y)if(b=h.pointAttr[h.selected?"select":""]||m,i=b.r,j=o(j.symbol,this.symbol),k=0===j.indexOf("url"),l)l[q?"show":"hide"](!0).animate(a({x:e-i,y:f-i},l.symbolName?{width:2*i,height:2*i}:{}));else{if(q&&(0<i||k))h.graphic=d.renderer.symbol(j,e-i,f-i,2*i,2*i).attr(b).add(n)}else l&&(h.graphic=l.destroy())},convertAttribs:function(a,
b,c,d){var e=this.pointAttrToOptions,f,g,h={},a=a||{},b=b||{},c=c||{},d=d||{};for(f in e)g=e[f],h[f]=o(a[g],b[f],c[f],d[f]);return h},getAttribs:function(){var b=this,c=b.options,d=Qa[b.type].marker?c.marker:c,e=d.states,f=e.hover,g,h=b.color;g={stroke:h,fill:h};var i=b.points||[],j,l=[],m,q=b.pointAttrToOptions;m=b.hasPointSpecificOptions;var o=c.negativeColor,n=d.lineColor,u=d.fillColor;j=c.turboThreshold;var r;c.marker?(f.radius=f.radius||d.radius+2,f.lineWidth=f.lineWidth||d.lineWidth+1):f.color=
f.color||Va(f.color||h).brighten(f.brightness).get();l[""]=b.convertAttribs(d,g);A(["hover","select"],function(a){l[a]=b.convertAttribs(e[a],l[""])});b.pointAttr=l;h=i.length;if(!j||h<j||m)for(;h--;){j=i[h];if((d=j.options&&j.options.marker||j.options)&&!1===d.enabled)d.radius=0;j.negative&&o&&(j.color=j.fillColor=o);m=c.colorByPoint||j.color;if(j.options)for(r in q)k(d[q[r]])&&(m=!0);m?(d=d||{},m=[],e=d.states||{},g=e.hover=e.hover||{},c.marker||(g.color=g.color||!j.options.color&&f.color||Va(j.color).brighten(g.brightness||
f.brightness).get()),g={color:j.color},u||(g.fillColor=j.color),n||(g.lineColor=j.color),m[""]=b.convertAttribs(a(g,d),l[""]),m.hover=b.convertAttribs(e.hover,l.hover,m[""]),m.select=b.convertAttribs(e.select,l.select,m[""])):m=l;j.pointAttr=m}},destroy:function(){var a=this,b=a.chart,c=/AppleWebKit\/533/.test(p),d,e,f=a.data||[],g,h,i;va(a,"destroy");Ka(a);A(a.axisTypes||[],function(b){if(i=a[b])j(i.series,a),i.isDirty=i.forceRedraw=!0});a.legendItem&&a.chart.legend.destroyItem(a);for(e=f.length;e--;)(g=
f[e])&&g.destroy&&g.destroy();a.points=null;clearTimeout(a.animationTimeout);A("area graph dataLabelsGroup group markerGroup tracker graphNeg areaNeg posClip negClip".split(" "),function(b){a[b]&&(d=c&&b==="group"?"hide":"destroy",a[b][d]())});b.hoverSeries===a&&(b.hoverSeries=null);j(b.series,a);for(h in a)delete a[h]},getSegmentPath:function(a){var b=this,c=[],d=b.options.step;A(a,function(e,f){var g=e.plotX,h=e.plotY,i;b.getPointSpline?c.push.apply(c,b.getPointSpline(a,e,f)):(c.push(f?"L":"M"),
d&&f&&(i=a[f-1],"right"===d?c.push(i.plotX,h):"center"===d?c.push((i.plotX+g)/2,i.plotY,(i.plotX+g)/2,h):c.push(g,i.plotY)),c.push(e.plotX,e.plotY))});return c},getGraphPath:function(){var a=this,b=[],c,d=[];A(a.segments,function(e){c=a.getSegmentPath(e);1<e.length?b=b.concat(c):d.push(e[0])});a.singlePoints=d;return a.graphPath=b},drawGraph:function(){var a=this,b=this.options,c=[["graph",b.lineColor||this.color]],d=b.lineWidth,e=b.dashStyle,f="square"!==b.linecap,g=this.getGraphPath(),h=b.negativeColor;
h&&c.push(["graphNeg",h]);A(c,function(c,h){var i=c[0],j=a[i];j?(Eb(j),j.animate({d:g})):d&&g.length&&(j={stroke:c[1],"stroke-width":d,fill:Da,zIndex:1},e?j.dashstyle=e:f&&(j["stroke-linecap"]=j["stroke-linejoin"]="round"),a[i]=a.chart.renderer.path(g).attr(j).add(a.group).shadow(!h&&b.shadow))})},clipNeg:function(){var a=this.options,b=this.chart,c=b.renderer,d=a.negativeColor||a.negativeFillColor,e,f=this.graph,g=this.area,h=this.posClip,i=this.negClip;e=b.chartWidth;var j=b.chartHeight,k=P(e,j),
l=this.yAxis;if(d&&(f||g))d=M(l.toPixels(a.threshold||0,!0)),0>d&&(k-=d),a={x:0,y:0,width:k,height:d},k={x:0,y:d,width:k,height:k},b.inverted&&(a.height=k.y=b.plotWidth-d,c.isVML&&(a={x:b.plotWidth-d-b.plotLeft,y:0,width:e,height:j},k={x:d+b.plotLeft-e,y:0,width:b.plotLeft+d,height:e})),l.reversed?(b=k,e=a):(b=a,e=k),h?(h.animate(b),i.animate(e)):(this.posClip=h=c.clipRect(b),this.negClip=i=c.clipRect(e),f&&this.graphNeg&&(f.clip(h),this.graphNeg.clip(i)),g&&(g.clip(h),this.areaNeg.clip(i)))},invertGroups:function(){function a(){var c=
{width:b.yAxis.len,height:b.xAxis.len};A(["group","markerGroup"],function(a){b[a]&&b[a].attr(c).invert()})}var b=this,c=b.chart;b.xAxis&&(fa(c,"resize",a),fa(b,"destroy",function(){Ka(c,"resize",a)}),a(),b.invertGroups=a)},plotGroup:function(a,b,c,d,e){var f=this[a],g=!f;g&&(this[a]=f=this.chart.renderer.g(b).attr({visibility:c,zIndex:d||0.1}).add(e));f[g?"attr":"animate"](this.getPlotBox());return f},getPlotBox:function(){var a=this.chart,b=this.xAxis,c=this.yAxis;a.inverted&&(b=c,c=this.xAxis);
return{translateX:b?b.left:a.plotLeft,translateY:c?c.top:a.plotTop,scaleX:1,scaleY:1}},render:function(){var a=this,b=a.chart,c,d=a.options,e=(c=d.animation)&&!!a.animate&&b.renderer.isSVG&&o(c.duration,500)||0,f=a.visible?"visible":"hidden",g=d.zIndex,h=a.hasRendered,i=b.seriesGroup;c=a.plotGroup("group","series",f,g,i);a.markerGroup=a.plotGroup("markerGroup","markers",f,g,i);e&&a.animate(!0);a.getAttribs();c.inverted=a.isCartesian?b.inverted:!1;a.drawGraph&&(a.drawGraph(),a.clipNeg());a.drawDataLabels&&
a.drawDataLabels();a.visible&&a.drawPoints();a.drawTracker&&!1!==a.options.enableMouseTracking&&a.drawTracker();b.inverted&&a.invertGroups();!1!==d.clip&&!a.sharedClipKey&&!h&&c.clip(b.clipRect);e&&a.animate();h||(e?a.animationTimeout=setTimeout(function(){a.afterAnimate()},e):a.afterAnimate());a.isDirty=a.isDirtyData=!1;a.hasRendered=!0},redraw:function(){var a=this.chart,b=this.isDirtyData,c=this.group,d=this.xAxis,e=this.yAxis;c&&(a.inverted&&c.attr({width:a.plotWidth,height:a.plotHeight}),c.animate({translateX:o(d&&
d.left,a.plotLeft),translateY:o(e&&e.top,a.plotTop)}));this.translate();this.setTooltipPoints&&this.setTooltipPoints(!0);this.render();b&&va(this,"updatedData")}};V.prototype={destroy:function(){N(this,this.axis)},render:function(a){var b=this.options,c=b.format,c=c?w(c,this):b.formatter.call(this);this.label?this.label.attr({text:c,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(c,null,null,b.useHTML).css(b.style).attr({align:this.textAlign,rotation:b.rotation,visibility:"hidden"}).add(a)},
setOffset:function(a,b){var c=this.axis,d=c.chart,e=d.inverted,f=this.isNegative,g=c.translate(c.usePercentage?100:this.total,0,0,0,1),c=c.translate(0),c=ea(g-c),h=d.xAxis[0].translate(this.x)+a,i=d.plotHeight,f={x:e?f?g:g-c:h,y:e?i-h-b:f?i-g-c:i-g,width:e?c:b,height:e?b:c};if(e=this.label)e.align(this.alignOptions,null,f),f=e.alignAttr,e[!1===this.options.crop||d.isInsidePlot(f.x,f.y)?"show":"hide"](!0)}};X.prototype.buildStacks=function(){var a=this.series,b=o(this.options.reversedStacks,!0),c=
a.length;if(!this.isXAxis){for(this.usePercentage=!1;c--;)a[b?c:a.length-c-1].setStackedPoints();if(this.usePercentage)for(c=0;c<a.length;c++)a[c].setPercentStacks()}};X.prototype.renderStackTotals=function(){var a=this.chart,b=a.renderer,c=this.stacks,d,e,f=this.stackTotalGroup;f||(this.stackTotalGroup=f=b.g("stack-labels").attr({visibility:"visible",zIndex:6}).add());f.translate(a.plotLeft,a.plotTop);for(d in c)for(e in a=c[d],a)a[e].render(f)};wa.prototype.setStackedPoints=function(){if(this.options.stacking&&
!(!0!==this.visible&&!1!==this.chart.options.chart.ignoreHiddenSeries)){var a=this.processedXData,b=this.processedYData,c=[],d=b.length,e=this.options,f=e.threshold,g=e.stack,e=e.stacking,h=this.stackKey,i="-"+h,j=this.negStacks,k=this.yAxis,l=k.stacks,m=k.oldStacks,q,o,n,u,r,s;for(u=0;u<d;u++)r=a[u],s=b[u],n=this.index+","+u,o=(q=j&&s<f)?i:h,l[o]||(l[o]={}),l[o][r]||(m[o]&&m[o][r]?(l[o][r]=m[o][r],l[o][r].total=null):l[o][r]=new V(k,k.options.stackLabels,q,r,g)),o=l[o][r],o.points[n]=[o.cum||0],
"percent"===e?(q=q?h:i,j&&l[q]&&l[q][r]?(q=l[q][r],o.total=q.total=P(q.total,o.total)+ea(s)||0):o.total=G(o.total+(ea(s)||0))):o.total=G(o.total+(s||0)),o.cum=(o.cum||0)+(s||0),o.points[n].push(o.cum),c[u]=o.cum;"percent"===e&&(k.usePercentage=!0);this.stackedYData=c;k.oldStacks={}}};wa.prototype.setPercentStacks=function(){var a=this,b=a.stackKey,c=a.yAxis.stacks,d=a.processedXData;A([b,"-"+b],function(b){for(var e,f=d.length,g,h;f--;)if(g=d[f],e=(h=c[b]&&c[b][g])&&h.points[a.index+","+f],g=e)h=
h.total?100/h.total:0,g[0]=G(g[0]*h),g[1]=G(g[1]*h),a.stackedYData[f]=g[1]})};a(S.prototype,{addSeries:function(a,b,c){var d,e=this;a&&(b=o(b,!0),va(e,"addSeries",{options:a},function(){d=e.initSeries(a);e.isDirtyLegend=!0;e.linkSeries();b&&e.redraw(c)}));return d},addAxis:function(a,c,d,e){var f=c?"xAxis":"yAxis",g=this.options;new X(this,b(a,{index:this[f].length,isX:c}));g[f]=n(g[f]||{});g[f].push(a);o(d,!0)&&this.redraw(e)},showLoading:function(b){var c=this.options,d=this.loadingDiv,e=c.loading;
d||(this.loadingDiv=d=s(ha,{className:"highcharts-loading"},a(e.style,{zIndex:10,display:Da}),this.container),this.loadingSpan=s("span",null,e.labelStyle,d));this.loadingSpan.innerHTML=b||c.lang.loading;this.loadingShown||(t(d,{opacity:0,display:"",left:this.plotLeft+"px",top:this.plotTop+"px",width:this.plotWidth+"px",height:this.plotHeight+"px"}),Hb(d,{opacity:e.style.opacity},{duration:e.showDuration||0}),this.loadingShown=!0)},hideLoading:function(){var a=this.options,b=this.loadingDiv;b&&Hb(b,
{opacity:0},{duration:a.loading.hideDuration||100,complete:function(){t(b,{display:Da})}});this.loadingShown=!1}});a(sb.prototype,{update:function(a,b,c){var d=this,f=d.series,g=d.graphic,h,i=f.data,j=f.chart,k=f.options,b=o(b,!0);d.firePointEvent("update",{options:a},function(){d.applyOptions(a);if(e(a)&&(f.getAttribs(),g&&(a&&a.marker&&a.marker.symbol?d.graphic=g.destroy():g.attr(d.pointAttr[d.state||""])),a&&a.dataLabels&&d.dataLabel))d.dataLabel=d.dataLabel.destroy();h=eb(d,i);f.updateParallelArrays(d,
h);k.data[h]=d.options;f.isDirty=f.isDirtyData=!0;!f.fixedBox&&f.hasCartesianSeries&&(j.isDirtyBox=!0);"point"===k.legendType&&j.legend.destroyItem(d);b&&j.redraw(c)})},remove:function(a,b){var c=this,d=c.series,e=d.points,f=d.chart,g,h=d.data;B(b,f);a=o(a,!0);c.firePointEvent("remove",null,function(){g=eb(c,h);h.length===e.length&&e.splice(g,1);h.splice(g,1);d.options.data.splice(g,1);d.updateParallelArrays(c,"splice",g,1);c.destroy();d.isDirty=!0;d.isDirtyData=!0;a&&f.redraw()})}});a(wa.prototype,
{addPoint:function(a,b,c,d){var e=this.options,f=this.data,g=this.graph,h=this.area,i=this.chart,j=this.xAxis&&this.xAxis.names,k=g&&g.shift||0,l=e.data,m,q=this.xData;B(d,i);c&&A([g,h,this.graphNeg,this.areaNeg],function(a){a&&(a.shift=k+1)});h&&(h.isArea=!0);b=o(b,!0);d={series:this};this.pointClass.prototype.applyOptions.apply(d,[a]);g=d.x;h=q.length;if(this.requireSorting&&g<q[h-1])for(m=!0;h&&q[h-1]>g;)h--;this.updateParallelArrays(d,"splice",h,0,0);this.updateParallelArrays(d,h);j&&(j[g]=d.name);
l.splice(h,0,a);m&&(this.data.splice(h,0,null),this.processData());"point"===e.legendType&&this.generatePoints();c&&(f[0]&&f[0].remove?f[0].remove(!1):(f.shift(),this.updateParallelArrays(d,"shift"),l.shift()));this.isDirtyData=this.isDirty=!0;b&&(this.getAttribs(),i.redraw())},remove:function(a,b){var c=this,d=c.chart,a=o(a,!0);c.isRemoving||(c.isRemoving=!0,va(c,"remove",null,function(){c.destroy();d.isDirtyLegend=d.isDirtyBox=!0;d.linkSeries();a&&d.redraw(b)}));c.isRemoving=!1},update:function(c,
d){var e=this.chart,f=this.type,g=ca[f].prototype,h,c=b(this.userOptions,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},c);this.remove(!1);for(h in g)g.hasOwnProperty(h)&&(this[h]=D);a(this,ca[c.type||f].prototype);this.init(e,c);o(d,!0)&&e.redraw(!1)}});a(X.prototype,{update:function(c,d){var e=this.chart,c=e.options[this.coll][this.options.index]=b(this.userOptions,c);this.destroy(!0);this._addedPlotLB=D;this.init(e,a(c,{events:D}));e.isDirtyBox=!0;o(d,!0)&&e.redraw()},
remove:function(a){for(var b=this.chart,c=this.coll,d=this.series,e=d.length;e--;)d[e]&&d[e].remove(!1);j(b.axes,this);j(b[c],this);b.options[c].splice(this.options.index,1);A(b[c],function(a,b){a.options.index=b});this.destroy();b.isDirtyBox=!0;o(a,!0)&&b.redraw()},setTitle:function(a,b){this.update({title:a},b)},setCategories:function(a,b){this.update({categories:a},b)}});Ca=q(wa);ca.line=Ca;Qa.area=b(Ha,{threshold:0});var ra=q(wa,{type:"area",getSegments:function(){var a=[],b=[],c=[],d=this.xAxis,
e=this.yAxis,f=e.stacks[this.stackKey],g={},h,i,j=this.points,k=this.options.connectNulls,l,m,q;if(this.options.stacking&&!this.cropped){for(m=0;m<j.length;m++)g[j[m].x]=j[m];for(q in f)null!==f[q].total&&c.push(+q);c.sort(function(a,b){return a-b});A(c,function(a){if(!k||g[a]&&null!==g[a].y)g[a]?b.push(g[a]):(h=d.translate(a),l=f[a].percent?f[a].total?100*f[a].cum/f[a].total:0:f[a].cum,i=e.toPixels(l,!0),b.push({y:null,plotX:h,clientX:h,plotY:i,yBottom:i,onMouseOver:Pa}))});b.length&&a.push(b)}else wa.prototype.getSegments.call(this),
a=this.segments;this.segments=a},getSegmentPath:function(a){var b=wa.prototype.getSegmentPath.call(this,a),c=[].concat(b),d,e=this.options;d=b.length;var f=this.yAxis.getThreshold(e.threshold),g;3===d&&c.push("L",b[1],b[2]);if(e.stacking&&!this.closedStacks)for(d=a.length-1;0<=d;d--)g=o(a[d].yBottom,f),d<a.length-1&&e.step&&c.push(a[d+1].plotX,g),c.push(a[d].plotX,g);else this.closeSegment(c,a,f);this.areaPath=this.areaPath.concat(c);return b},closeSegment:function(a,b,c){a.push("L",b[b.length-1].plotX,
c,"L",b[0].plotX,c)},drawGraph:function(){this.areaPath=[];wa.prototype.drawGraph.apply(this);var a=this,b=this.areaPath,c=this.options,d=c.negativeColor,e=c.negativeFillColor,f=[["area",this.color,c.fillColor]];(d||e)&&f.push(["areaNeg",d,e]);A(f,function(d){var e=d[0],f=a[e];f?f.animate({d:b}):a[e]=a.chart.renderer.path(b).attr({fill:o(d[2],Va(d[1]).setOpacity(o(c.fillOpacity,0.75)).get()),zIndex:0}).add(a.group)})},drawLegendSymbol:da.drawRectangle});ca.area=ra;Qa.spline=b(Ha);Ca=q(wa,{type:"spline",
getPointSpline:function(a,b,c){var d=b.plotX,e=b.plotY,f=a[c-1],g=a[c+1],h,i,j,k;if(f&&g){a=f.plotY;j=g.plotX;var g=g.plotY,l;h=(1.5*d+f.plotX)/2.5;i=(1.5*e+a)/2.5;j=(1.5*d+j)/2.5;k=(1.5*e+g)/2.5;l=(k-i)*(j-d)/(j-h)+e-k;i+=l;k+=l;i>a&&i>e?(i=P(a,e),k=2*e-i):i<a&&i<e&&(i=ga(a,e),k=2*e-i);k>g&&k>e?(k=P(g,e),i=2*e-k):k<g&&k<e&&(k=ga(g,e),i=2*e-k);b.rightContX=j;b.rightContY=k}c?(b=["C",f.rightContX||f.plotX,f.rightContY||f.plotY,h||d,i||e,d,e],f.rightContX=f.rightContY=null):b=["M",d,e];return b}});
ca.spline=Ca;Qa.areaspline=b(Qa.area);ra=ra.prototype;Ca=q(Ca,{type:"areaspline",closedStacks:!0,getSegmentPath:ra.getSegmentPath,closeSegment:ra.closeSegment,drawGraph:ra.drawGraph,drawLegendSymbol:da.drawRectangle});ca.areaspline=Ca;Qa.column=b(Ha,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,
verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});Ca=q(wa,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){wa.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&A(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},getColumnMetrics:function(){var a=this,b=a.options,c=a.xAxis,d=a.yAxis,e=c.reversed,f,g={},h,i=0;!1===b.grouping?
i=1:A(a.chart.series,function(b){var c=b.options,e=b.yAxis;b.type===a.type&&(b.visible&&d.len===e.len&&d.pos===e.pos)&&(c.stacking?(f=b.stackKey,g[f]===D&&(g[f]=i++),h=g[f]):!1!==c.grouping&&(h=i++),b.columnIndex=h)});var c=ga(ea(c.transA)*(c.ordinalSlope||b.pointRange||c.closestPointRange||c.tickInterval||1),c.len),j=c*b.groupPadding,l=(c-2*j)/i,m=b.pointWidth,b=k(m)?(l-m)/2:l*b.pointPadding,m=o(m,l-2*b);return a.columnMetrics={width:m,offset:b+(j+((e?i-(a.columnIndex||0):a.columnIndex)||0)*l-c/
2)*(e?-1:1)}},translate:function(){var a=this,b=a.chart,c=a.options,d=a.borderWidth=o(c.borderWidth,a.activePointCount>0.5*a.xAxis.len?0:1),e=a.yAxis,f=a.translatedThreshold=e.getThreshold(c.threshold),g=o(c.minPointLength,5),c=a.getColumnMetrics(),h=c.width,i=a.barW=sa(P(h,1+2*d)),j=a.pointXOffset=c.offset,k=-(d%2?0.5:0),l=d%2?0.5:1;b.renderer.isVML&&b.inverted&&(l+=1);wa.prototype.translate.apply(a);A(a.points,function(c){var d=o(c.yBottom,f),m=ga(P(-999-d,c.plotY),e.len+999+d),q=c.plotX+j,n=i,
u=ga(m,d),r;r=P(m,d)-u;ea(r)<g&&g&&(r=g,u=M(ea(u-f)>g?d-g:f-(e.translate(c.y,0,1,0,1)<=f?g:0)));c.barX=q;c.pointWidth=h;c.tooltipPos=b.inverted?[e.len-m,a.xAxis.len-q-n/2]:[q+n/2,m];d=0.5>ea(q);n=M(q+n)+k;q=M(q)+k;n-=q;m=0.5>ea(u);r=M(u+r)+l;u=M(u)+l;r-=u;d&&(q+=1,n-=1);m&&(u-=1,r+=1);c.shapeType="rect";c.shapeArgs={x:q,y:u,width:n,height:r}})},getSymbol:Pa,drawLegendSymbol:da.drawRectangle,drawGraph:Pa,drawPoints:function(){var a=this,c=this.chart,d=a.options,e=c.renderer,f=d.animationLimit||250,
g,h,i;A(a.points,function(j){var l=j.plotY,m=j.graphic;l!==D&&!isNaN(l)&&null!==j.y?(g=j.shapeArgs,i=k(a.borderWidth)?{"stroke-width":a.borderWidth}:{},h=j.pointAttr[j.selected?"select":""]||a.pointAttr[""],m?(Eb(m),m.attr(i)[c.pointCount<f?"animate":"attr"](b(g))):j.graphic=e[j.shapeType](g).attr(h).attr(i).add(a.group).shadow(d.shadow,null,d.stacking&&!d.borderRadius)):m&&(j.graphic=m.destroy())})},animate:function(a){var b=this.yAxis,c=this.options,d=this.chart.inverted,e={};Ia&&(a?(e.scaleY=0.001,
a=ga(b.pos+b.len,P(b.pos,b.toPixels(c.threshold))),d?e.translateX=a-b.len:e.translateY=a,this.group.attr(e)):(e.scaleY=1,e[d?"translateX":"translateY"]=b.pos,this.group.animate(e,this.options.animation),this.animate=null))},remove:function(){var a=this,b=a.chart;b.hasRendered&&A(b.series,function(b){b.type===a.type&&(b.isDirty=!0)});wa.prototype.remove.apply(a,arguments)}});ca.column=Ca;Qa.bar=b(Qa.column);ra=q(Ca,{type:"bar",inverted:!0});ca.bar=ra;Qa.scatter=b(Ha,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">\ufffd?</span> <span style="font-size: 10px;"> {series.name}</span><br/>',
pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1});ra=q(wa,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&wa.prototype.drawGraph.call(this)}});ca.scatter=ra;Qa.pie=b(Ha,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,
legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});Ha={type:"pie",isCartesian:!1,pointClass:q(sb,{init:function(){sb.prototype.init.apply(this,arguments);var b=this,c;0>b.y&&(b.y=null);a(b,{visible:!1!==b.visible,name:o(b.name,"Slice")});c=function(a){b.slice(a.type==="select")};fa(b,"select",c);fa(b,"unselect",c);return b},setVisible:function(a){var b=this,c=b.series,d=c.chart;b.visible=
b.options.visible=a=a===D?!b.visible:a;c.options.data[eb(b,c.data)]=b.options;A(["graphic","dataLabel","connector","shadowGroup"],function(c){if(b[c])b[c][a?"show":"hide"](!0)});b.legendItem&&d.legend.colorizeItem(b,a);!c.isDirty&&c.options.ignoreHiddenPoint&&(c.isDirty=!0,d.redraw())},slice:function(a,b,c){var d=this.series;B(c,d.chart);o(b,!0);this.sliced=this.options.sliced=a=k(a)?a:!this.sliced;d.options.data[eb(this,d.data)]=this.options;a=a?this.slicedTranslation:{translateX:0,translateY:0};
this.graphic.animate(a);this.shadowGroup&&this.shadowGroup.animate(a)},haloPath:function(a){var b=this.shapeArgs,c=this.series.chart;return this.series.chart.renderer.symbols.arc(c.plotLeft+b.x,c.plotTop+b.y,b.r+a,b.r+a,{innerR:this.shapeArgs.r,start:b.start,end:b.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:Pa,animate:function(a){var b=
this,c=b.points,d=b.startAngleRad;a||(A(c,function(a){var c=a.graphic,a=a.shapeArgs;c&&(c.attr({r:b.center[3]/2,start:d,end:d}),c.animate({r:a.r,start:a.start,end:a.end},b.options.animation))}),b.animate=null)},setData:function(a,b,c,d){wa.prototype.setData.call(this,a,!1,c,d);this.processData();this.generatePoints();o(b,!0)&&this.chart.redraw(c)},generatePoints:function(){var a,b=0,c,d,e,f=this.options.ignoreHiddenPoint;wa.prototype.generatePoints.call(this);c=this.points;d=c.length;for(a=0;a<d;a++)e=
c[a],b+=f&&!e.visible?0:e.y;this.total=b;for(a=0;a<d;a++)e=c[a],e.percentage=0<b?100*(e.y/b):0,e.total=b},translate:function(a){this.generatePoints();var b=0,c=this.options,d=c.slicedOffset,e=d+c.borderWidth,f,g,h,i=c.startAngle||0,j=this.startAngleRad=na/180*(i-90),i=(this.endAngleRad=na/180*(o(c.endAngle,i+360)-90))-j,k=this.points,l=c.dataLabels.distance,c=c.ignoreHiddenPoint,m,q=k.length,n;a||(this.center=a=this.getCenter());this.getX=function(b,c){h=ia.asin(ga((b-a[1])/(a[2]/2+l),1));return a[0]+
(c?-1:1)*aa(h)*(a[2]/2+l)};for(m=0;m<q;m++){n=k[m];f=j+b*i;if(!c||n.visible)b+=n.percentage/100;g=j+b*i;n.shapeType="arc";n.shapeArgs={x:a[0],y:a[1],r:a[2]/2,innerR:a[3]/2,start:M(1E3*f)/1E3,end:M(1E3*g)/1E3};h=(g+f)/2;h>1.5*na?h-=2*na:h<-na/2&&(h+=2*na);n.slicedTranslation={translateX:M(aa(h)*d),translateY:M(Ja(h)*d)};f=aa(h)*a[2]/2;g=Ja(h)*a[2]/2;n.tooltipPos=[a[0]+0.7*f,a[1]+0.7*g];n.half=h<-na/2||h>na/2?1:0;n.angle=h;e=ga(e,l/2);n.labelPos=[a[0]+f+aa(h)*l,a[1]+g+Ja(h)*l,a[0]+f+aa(h)*e,a[1]+g+
Ja(h)*e,a[0]+f,a[1]+g,0>l?"center":n.half?"right":"left",h]}},drawGraph:null,drawPoints:function(){var b=this,c=b.chart.renderer,d,e,f=b.options.shadow,g,h;f&&!b.shadowGroup&&(b.shadowGroup=c.g("shadow").add(b.group));A(b.points,function(i){e=i.graphic;h=i.shapeArgs;g=i.shadowGroup;if(f&&!g)g=i.shadowGroup=c.g("shadow").add(b.shadowGroup);d=i.sliced?i.slicedTranslation:{translateX:0,translateY:0};g&&g.attr(d);e?e.animate(a(h,d)):i.graphic=e=c[i.shapeType](h).setRadialReference(b.center).attr(i.pointAttr[i.selected?
"select":""]).attr({"stroke-linejoin":"round"}).attr(d).add(b.group).shadow(f,g);i.visible!==void 0&&i.setVisible(i.visible)})},sortByAngle:function(a,b){a.sort(function(a,c){return void 0!==a.angle&&(c.angle-a.angle)*b})},drawLegendSymbol:da.drawRectangle,getCenter:Ma.getCenter,getSymbol:Pa};Ha=q(wa,Ha);ca.pie=Ha;wa.prototype.drawDataLabels=function(){var c=this,d=c.options,e=d.cursor,f=d.dataLabels,g=c.points,h,i,j,l;if(f.enabled||c._hasPointLabels)c.dlProcessOptions&&c.dlProcessOptions(f),l=c.plotGroup("dataLabelsGroup",
"data-labels","hidden",f.zIndex||6),!c.hasRendered&&o(f.defer,!0)&&(l.attr({opacity:0}),fa(c,"afterAnimate",function(){c.dataLabelsGroup.show()[d.animation?"animate":"attr"]({opacity:1},{duration:200})})),i=f,A(g,function(d){var g,m=d.dataLabel,q,n,u=d.connector,r=!0;h=d.options&&d.options.dataLabels;g=o(h&&h.enabled,i.enabled);if(m&&!g)d.dataLabel=m.destroy();else if(g){f=b(i,h);g=f.rotation;q=d.getLabelConfig();j=f.format?w(f.format,q):f.formatter.call(q,f);f.style.color=o(f.color,f.style.color,
c.color,"black");if(m)if(k(j))m.attr({text:j}),r=!1;else{if(d.dataLabel=m=m.destroy(),u)d.connector=u.destroy()}else if(k(j)){m={fill:f.backgroundColor,stroke:f.borderColor,"stroke-width":f.borderWidth,r:f.borderRadius||0,rotation:g,padding:f.padding,zIndex:1};for(n in m)m[n]===D&&delete m[n];m=d.dataLabel=c.chart.renderer[g?"text":"label"](j,0,-999,null,null,null,f.useHTML).attr(m).css(a(f.style,e&&{cursor:e})).add(l).shadow(f.shadow)}m&&c.alignDataLabel(d,m,f,null,r)}})};wa.prototype.alignDataLabel=
function(b,c,d,e,f){var g=this.chart,h=g.inverted,i=o(b.plotX,-999),j=o(b.plotY,-999),k=c.getBBox();if(b=this.visible&&(b.series.forceDL||g.isInsidePlot(i,M(j),h)||e&&g.isInsidePlot(i,h?e.x+1:e.y+e.height-1,h)))e=a({x:h?g.plotWidth-j:i,y:M(h?g.plotHeight-i:j),width:0,height:0},e),a(d,{width:k.width,height:k.height}),d.rotation?(h={align:d.align,x:e.x+d.x+e.width/2,y:e.y+d.y+e.height/2},c[f?"attr":"animate"](h)):(c.align(d,null,e),h=c.alignAttr,"justify"===o(d.overflow,"justify")?this.justifyDataLabel(c,
d,h,k,e,f):o(d.crop,!0)&&(b=g.isInsidePlot(h.x,h.y)&&g.isInsidePlot(h.x+k.width,h.y+k.height)));b||(c.attr({y:-999}),c.placed=!1)};wa.prototype.justifyDataLabel=function(a,b,c,d,e,f){var g=this.chart,h=b.align,i=b.verticalAlign,j,k;j=c.x;0>j&&("right"===h?b.align="left":b.x=-j,k=!0);j=c.x+d.width;j>g.plotWidth&&("left"===h?b.align="right":b.x=g.plotWidth-j,k=!0);j=c.y;0>j&&("bottom"===i?b.verticalAlign="top":b.y=-j,k=!0);j=c.y+d.height;j>g.plotHeight&&("top"===i?b.verticalAlign="bottom":b.y=g.plotHeight-
j,k=!0);k&&(a.placed=!f,a.align(b,null,e))};ca.pie&&(ca.pie.prototype.drawDataLabels=function(){var a=this,b=a.data,c,d=a.chart,e=a.options.dataLabels,f=o(e.connectorPadding,10),g=o(e.connectorWidth,1),h=d.plotWidth,d=d.plotHeight,i,j,k=o(e.softConnector,!0),l=e.distance,m=a.center,q=m[2]/2,n=m[1],u=0<l,r,s,t,p,w=[[],[]],y,v,U,ba,z,E=[0,0,0,0],oa=function(a,b){return b.y-a.y};if(a.visible&&(e.enabled||a._hasPointLabels)){wa.prototype.drawDataLabels.apply(a);A(b,function(a){a.dataLabel&&a.visible&&
w[a.half].push(a)});for(ba=0;!p&&b[ba];)p=b[ba]&&b[ba].dataLabel&&(b[ba].dataLabel.getBBox().height||21),ba++;for(ba=2;ba--;){var b=[],J=[],W=w[ba],H=W.length,D;a.sortByAngle(W,ba-0.5);if(0<l){for(z=n-q-l;z<=n+q+l;z+=p)b.push(z);s=b.length;if(H>s){c=[].concat(W);c.sort(oa);for(z=H;z--;)c[z].rank=z;for(z=H;z--;)W[z].rank>=s&&W.splice(z,1);H=W.length}for(z=0;z<H;z++){c=W[z];t=c.labelPos;c=9999;var Q,B;for(B=0;B<s;B++)Q=ea(b[B]-t[1]),Q<c&&(c=Q,D=B);if(D<z&&null!==b[z])D=z;else for(s<H-z+D&&null!==b[z]&&
(D=s-H+z);null===b[D];)D++;J.push({i:D,y:b[D]});b[D]=null}J.sort(oa)}for(z=0;z<H;z++){c=W[z];t=c.labelPos;r=c.dataLabel;U=!1===c.visible?"hidden":"visible";c=t[1];if(0<l){if(s=J.pop(),D=s.i,v=s.y,c>v&&null!==b[D+1]||c<v&&null!==b[D-1])v=c}else v=c;y=e.justify?m[0]+(ba?-1:1)*(q+l):a.getX(0===D||D===b.length-1?c:v,ba);r._attr={visibility:U,align:t[6]};r._pos={x:y+e.x+({left:f,right:-f}[t[6]]||0),y:v+e.y-10};r.connX=y;r.connY=v;null===this.options.size&&(s=r.width,y-s<f?E[3]=P(M(s-y+f),E[3]):y+s>h-f&&
(E[1]=P(M(y+s-h+f),E[1])),0>v-p/2?E[0]=P(M(-v+p/2),E[0]):v+p/2>d&&(E[2]=P(M(v+p/2-d),E[2])))}}if(0===C(E)||this.verifyDataLabelOverflow(E))this.placeDataLabels(),u&&g&&A(this.points,function(b){i=b.connector;t=b.labelPos;(r=b.dataLabel)&&r._pos?(U=r._attr.visibility,y=r.connX,v=r.connY,j=k?["M",y+("left"===t[6]?5:-5),v,"C",y,v,2*t[2]-t[4],2*t[3]-t[5],t[2],t[3],"L",t[4],t[5]]:["M",y+("left"===t[6]?5:-5),v,"L",t[2],t[3],"L",t[4],t[5]],i?(i.animate({d:j}),i.attr("visibility",U)):b.connector=i=a.chart.renderer.path(j).attr({"stroke-width":g,
stroke:e.connectorColor||b.color||"#606060",visibility:U}).add(a.dataLabelsGroup)):i&&(b.connector=i.destroy())})}},ca.pie.prototype.placeDataLabels=function(){A(this.points,function(a){var a=a.dataLabel,b;a&&((b=a._pos)?(a.attr(a._attr),a[a.moved?"animate":"attr"](b),a.moved=!0):a&&a.attr({y:-999}))})},ca.pie.prototype.alignDataLabel=Pa,ca.pie.prototype.verifyDataLabelOverflow=function(a){var b=this.center,c=this.options,d=c.center,e=c=c.minSize||80,f;null!==d[0]?e=P(b[2]-P(a[1],a[3]),c):(e=P(b[2]-
a[1]-a[3],c),b[0]+=(a[3]-a[1])/2);null!==d[1]?e=P(ga(e,b[2]-P(a[0],a[2])),c):(e=P(ga(e,b[2]-a[0]-a[2]),c),b[1]+=(a[0]-a[2])/2);e<b[2]?(b[2]=e,this.translate(b),A(this.points,function(a){a.dataLabel&&(a.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):f=!0;return f});ca.column&&(ca.column.prototype.alignDataLabel=function(a,c,d,e,f){var g=this.chart,h=g.inverted,i=a.dlBox||a.shapeArgs,j=a.below||a.plotY>o(this.translatedThreshold,g.plotSizeY),k=o(d.inside,!!this.options.stacking);
if(i&&(e=b(i),h&&(e={x:g.plotWidth-e.y-e.height,y:g.plotHeight-e.x-e.width,width:e.height,height:e.width}),!k))h?(e.x+=j?0:e.width,e.width=0):(e.y+=j?e.height:0,e.height=0);d.align=o(d.align,!h||k?"center":j?"right":"left");d.verticalAlign=o(d.verticalAlign,h||k?"middle":j?"top":"bottom");wa.prototype.alignDataLabel.call(this,a,c,d,e,f)});Ha=Ga.TrackerMixin={drawTrackerPoint:function(){var a=this,b=a.chart,c=b.pointer,d=a.options.cursor,e=d&&{cursor:d},f=function(c){var d=c.target,e;if(b.hoverSeries!==
a)a.onMouseOver();for(;d&&!e;)e=d.point,d=d.parentNode;if(e!==D&&e!==b.hoverPoint)e.onMouseOver(c)};A(a.points,function(a){a.graphic&&(a.graphic.element.point=a);a.dataLabel&&(a.dataLabel.element.point=a)});a._hasTracking||(A(a.trackerGroups,function(b){if(a[b]&&(a[b].addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(a){c.onTrackerMouseOut(a)}).css(e),hb))a[b].on("touchstart",f)}),a._hasTracking=!0)},drawTrackerGraph:function(){var a=this,b=a.options,c=b.trackByArea,d=[].concat(c?
a.areaPath:a.graphPath),e=d.length,f=a.chart,g=f.pointer,h=f.renderer,i=f.options.tooltip.snap,j=a.tracker,k=b.cursor,l=k&&{cursor:k},k=a.singlePoints,m,q=function(){if(f.hoverSeries!==a)a.onMouseOver()},o="rgba(192,192,192,"+(Ia?1.0E-4:0.002)+")";if(e&&!c)for(m=e+1;m--;)"M"===d[m]&&d.splice(m+1,0,d[m+1]-i,d[m+2],"L"),(m&&"M"===d[m]||m===e)&&d.splice(m,0,"L",d[m-2]+i,d[m-1]);for(m=0;m<k.length;m++)e=k[m],d.push("M",e.plotX-i,e.plotY,"L",e.plotX+i,e.plotY);j?j.attr({d:d}):(a.tracker=h.path(d).attr({"stroke-linejoin":"round",
visibility:a.visible?"visible":"hidden",stroke:o,fill:c?o:Da,"stroke-width":b.lineWidth+(c?0:2*i),zIndex:2}).add(a.group),A([a.tracker,a.markerGroup],function(a){a.addClass("highcharts-tracker").on("mouseover",q).on("mouseout",function(a){g.onTrackerMouseOut(a)}).css(l);if(hb)a.on("touchstart",q)}))}};ca.column&&(Ca.prototype.drawTracker=Ha.drawTrackerPoint);ca.pie&&(ca.pie.prototype.drawTracker=Ha.drawTrackerPoint);ca.scatter&&(ra.prototype.drawTracker=Ha.drawTrackerPoint);a(yb.prototype,{setItemEvents:function(a,
b,c,d,e){var f=this;(c?b:a.legendGroup).on("mouseover",function(){a.setState("hover");b.css(f.options.itemHoverStyle)}).on("mouseout",function(){b.css(a.visible?d:e);a.setState()}).on("click",function(b){var c=function(){a.setVisible()},b={browserEvent:b};a.firePointEvent?a.firePointEvent("legendItemClick",b,c):va(a,"legendItemClick",b,c)})},createCheckboxForItem:function(a){a.checkbox=s("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},this.options.itemCheckboxStyle,this.chart.container);
fa(a.checkbox,"click",function(b){va(a,"checkboxClick",{checked:b.target.checked},function(){a.select()})})}});oa.legend.itemStyle.cursor="pointer";a(S.prototype,{showResetZoom:function(){var a=this,b=oa.lang,c=a.options.chart.resetZoomButton,d=c.theme,e=d.states,f="chart"===c.relativeTo?null:"plotBox";this.resetZoomButton=a.renderer.button(b.resetZoom,null,null,function(){a.zoomOut()},d,e&&e.hover).attr({align:c.position.align,title:b.resetZoomTitle}).add().align(c.position,!1,f)},zoomOut:function(){var a=
this;va(a,"selection",{resetSelection:!0},function(){a.zoom()})},zoom:function(a){var b,c=this.pointer,d=!1,f;!a||a.resetSelection?A(this.axes,function(a){b=a.zoom()}):A(a.xAxis.concat(a.yAxis),function(a){var e=a.axis,f=e.isXAxis;if(c[f?"zoomX":"zoomY"]||c[f?"pinchX":"pinchY"])b=e.zoom(a.min,a.max),e.displayBtn&&(d=!0)});f=this.resetZoomButton;d&&!f?this.showResetZoom():!d&&e(f)&&(this.resetZoomButton=f.destroy());b&&this.redraw(o(this.options.chart.animation,a&&a.animation,100>this.pointCount))},
pan:function(a,b){var c=this,d=c.hoverPoints,e;d&&A(d,function(a){a.setState()});A("xy"===b?[1,0]:[1],function(b){var d=a[b?"chartX":"chartY"],f=c[b?"xAxis":"yAxis"][0],g=c[b?"mouseDownX":"mouseDownY"],h=(f.pointRange||0)/2,i=f.getExtremes(),j=f.toValue(g-d,!0)+h,g=f.toValue(g+c[b?"plotWidth":"plotHeight"]-d,!0)-h;f.series.length&&j>ga(i.dataMin,i.min)&&g<P(i.dataMax,i.max)&&(f.setExtremes(j,g,!1,!1,{trigger:"pan"}),e=!0);c[b?"mouseDownX":"mouseDownY"]=d});e&&c.redraw(!1);t(c.container,{cursor:"move"})}});
a(sb.prototype,{select:function(a,b){var c=this,d=c.series,e=d.chart,a=o(a,!c.selected);c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=c.options.selected=a;d.options.data[eb(c,d.data)]=c.options;c.setState(a&&"select");b||A(e.getSelectedPoints(),function(a){a.selected&&a!==c&&(a.selected=a.options.selected=!1,d.options.data[eb(a,d.data)]=a.options,a.setState(""),a.firePointEvent("unselect"))})})},onMouseOver:function(a){var b=this.series,c=b.chart,d=c.tooltip,e=c.hoverPoint;
if(e&&e!==this)e.onMouseOut();this.firePointEvent("mouseOver");d&&(!d.shared||b.noSharedTooltip)&&d.refresh(this,a);this.setState("hover");c.hoverPoint=this},onMouseOut:function(){var a=this.series.chart,b=a.hoverPoints;if(!b||-1===eb(this,b))this.firePointEvent("mouseOut"),this.setState(),a.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var a=b(this.series.options.point,this.options).events,c;this.events=a;for(c in a)fa(this,c,a[c]);this.hasImportedEvents=!0}},setState:function(c,
d){var e=this.plotX,f=this.plotY,g=this.series,h=g.options.states,i=Qa[g.type].marker&&g.options.marker,j=i&&!i.enabled,k=i&&i.states[c],l=k&&!1===k.enabled,m=g.stateMarkerGraphic,q=this.marker||{},o=g.chart,n=g.halo,u,c=c||"";u=this.pointAttr[c]||g.pointAttr[c];if(!(c===this.state&&!d||this.selected&&"select"!==c||h[c]&&!1===h[c].enabled||c&&(l||j&&!1===k.enabled)||c&&q.states&&q.states[c]&&!1===q.states[c].enabled)){if(this.graphic)i=i&&this.graphic.symbolName&&u.r,this.graphic.attr(b(u,i?{x:e-
i,y:f-i,width:2*i,height:2*i}:{})),m&&m.hide();else{if(c&&k)if(i=k.radius,q=q.symbol||g.symbol,m&&m.currentSymbol!==q&&(m=m.destroy()),m)m[d?"animate":"attr"]({x:e-i,y:f-i});else q&&(g.stateMarkerGraphic=m=o.renderer.symbol(q,e-i,f-i,2*i,2*i).attr(u).add(g.markerGroup),m.currentSymbol=q);if(m)m[c&&o.isInsidePlot(e,f,o.inverted)?"show":"hide"]()}(e=h[c]&&h[c].halo)&&e.size?(n||(g.halo=n=o.renderer.path().add(g.seriesGroup)),n.attr(a({fill:Va(this.color||g.color).setOpacity(e.opacity).get()},e.attributes))[d?
"animate":"attr"]({d:this.haloPath(e.size)})):n&&n.attr({d:[]});this.state=c}},haloPath:function(a){var b=this.series,c=b.chart,d=b.getPlotBox(),e=c.inverted;return c.renderer.symbols.circle(d.translateX+(e?b.yAxis.len-this.plotY:this.plotX)-a,d.translateY+(e?b.xAxis.len-this.plotX:this.plotY)-a,2*a,2*a)}});a(wa.prototype,{onMouseOver:function(){var a=this.chart,b=a.hoverSeries;if(b&&b!==this)b.onMouseOut();this.options.events.mouseOver&&va(this,"mouseOver");this.setState("hover");a.hoverSeries=this},
onMouseOut:function(){var a=this.options,b=this.chart,c=b.tooltip,d=b.hoverPoint;if(d)d.onMouseOut();this&&a.events.mouseOut&&va(this,"mouseOut");c&&!a.stickyTracking&&(!c.shared||this.noSharedTooltip)&&c.hide();this.setState();b.hoverSeries=null},setState:function(a){var b=this.options,c=this.graph,d=this.graphNeg,e=b.states,b=b.lineWidth,a=a||"";this.state!==a&&(this.state=a,e[a]&&!1===e[a].enabled||(a&&(b=e[a].lineWidth||b+1),c&&!c.dashstyle&&(a={"stroke-width":b},c.attr(a),d&&d.attr(a))))},setVisible:function(a,
b){var c=this,d=c.chart,e=c.legendItem,f,g=d.options.chart.ignoreHiddenSeries,h=c.visible;f=(c.visible=a=c.userOptions.visible=a===D?!h:a)?"show":"hide";A(["group","dataLabelsGroup","markerGroup","tracker"],function(a){if(c[a])c[a][f]()});if(d.hoverSeries===c)c.onMouseOut();e&&d.legend.colorizeItem(c,a);c.isDirty=!0;c.options.stacking&&A(d.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)});A(c.linkedSeries,function(b){b.setVisible(a,!1)});g&&(d.isDirtyBox=!0);!1!==b&&d.redraw();va(c,
f)},setTooltipPoints:function(a){var b=[],c,d,e=this.xAxis,f=e&&e.getExtremes(),g=e?e.tooltipLen||e.len:this.chart.plotSizeX,h,i,j=[];if(!(!1===this.options.enableMouseTracking||this.singularTooltips)){a&&(this.tooltipPoints=null);A(this.segments||this.points,function(a){b=b.concat(a)});e&&e.reversed&&(b=b.reverse());this.orderTooltipPoints&&this.orderTooltipPoints(b);a=b.length;for(i=0;i<a;i++)if(e=b[i],c=e.x,c>=f.min&&c<=f.max){h=b[i+1];c=d===D?0:d+1;for(d=b[i+1]?ga(P(0,la((e.clientX+(h?h.wrappedClientX||
h.clientX:g))/2)),g):g;0<=c&&c<=d;)j[c++]=e}this.tooltipPoints=j}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){this.selected=a=a===D?!this.selected:a;this.checkbox&&(this.checkbox.checked=a);va(this,a?"select":"unselect")},drawTracker:Ha.drawTrackerGraph});a(Ga,{Axis:X,Chart:S,Color:Va,Point:sb,Tick:Q,Renderer:Sa,Series:wa,SVGElement:J,SVGRenderer:Ya,arrayMin:H,arrayMax:C,charts:Aa,dateFormat:xa,format:w,pathAnim:Ab,getOptions:function(){return oa},
hasBidiBug:cb,isTouchDevice:nb,numberFormat:m,seriesTypes:ca,setOptions:function(a){oa=b(!0,oa,a);W();return oa},addEvent:fa,removeEvent:Ka,createElement:s,discardElement:T,css:t,each:A,extend:a,map:Y,merge:b,pick:o,splat:n,extendClass:q,pInt:c,wrap:u,svg:Ia,canvas:R,vml:!Ia&&!R,product:"Highcharts",version:"4.0.1"})})();steal.executed("vendor/highcharts-release/highcharts.js");
(function(a,b){function c(a,b,c){this.init.call(this,a,b,c)}var d=a.arrayMin,e=a.arrayMax,h=a.each,g=a.extend,f=a.merge,i=a.map,j=a.pick,k=a.pInt,l=a.getOptions().plotOptions,n=a.seriesTypes,o=a.extendClass,t=a.splat,s=a.wrap,q=a.Axis,m=a.Tick,r=a.Point,u=a.Pointer,w=a.CenteredSeriesMixin,y=a.TrackerMixin,v=a.Series,z=Math,E=z.round,H=z.floor,C=z.max,N=a.Color,T=function(){};g(c.prototype,{init:function(a,b,c){var d=this,e=d.defaultOptions;d.chart=b;b.angular&&(e.background={});d.options=a=f(e,a);
(a=a.background)&&h([].concat(t(a)).reverse(),function(a){var b=a.backgroundColor,a=f(d.defaultBackgroundOptions,a);b&&(a.backgroundColor=b);a.color=a.backgroundColor;c.options.plotBands.unshift(a)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:Number.MIN_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});
var K=q.prototype,m=m.prototype,G={getOffset:T,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:T,setCategories:T,setTitle:T},B={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},
maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(a){a=this.options=f(this.defaultOptions,this.defaultRadialOptions,a);a.plotBands||(a.plotBands=[])},getOffset:function(){K.getOffset.call(this);this.chart.axisOffset[this.side]=0;this.center=this.pane.center=w.getCenter.call(this.pane)},getLinePath:function(a,b){var c=this.center,b=j(b,
c[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+c[0],this.top+c[1],b,b,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){K.setAxisTranslation.call(this);this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=this.categories&&
1||this.pointRange||this.closestPointRange||0)},setAxisSize:function(){K.setAxisSize.call(this);this.isRadial&&(this.center=this.pane.center=a.CenteredSeriesMixin.getCenter.call(this.pane),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*j(this.sector,1)/2)},getPosition:function(a,b){return this.postTranslate(this.isCircular?this.translate(a):0,j(this.isCircular?b:this.translate(a),this.center[2]/2)-this.offset)},postTranslate:function(a,
b){var c=this.chart,d=this.center,a=this.startAngleRad+a;return{x:c.plotLeft+d[0]+Math.cos(a)*b,y:c.plotTop+d[1]+Math.sin(a)*b}},getPlotBandPath:function(a,b,c){var d=this.center,e=this.startAngleRad,f=d[2]/2,g=[j(c.outerRadius,"100%"),c.innerRadius,j(c.thickness,10)],h=/%$/,l,m=this.isCircular;"polygon"===this.options.gridLineInterpolation?d=this.getPlotLinePath(a).concat(this.getPlotLinePath(b,!0)):(m||(g[0]=this.translate(a),g[1]=this.translate(b)),g=i(g,function(a){h.test(a)&&(a=k(a,10)*f/100);
return a}),"circle"===c.shape||!m?(a=-Math.PI/2,b=1.5*Math.PI,l=!0):(a=e+this.translate(a),b=e+this.translate(b)),d=this.chart.renderer.symbols.arc(this.left+d[0],this.top+d[1],g[0],g[0],{start:a,end:b,innerR:j(g[1],g[0]-g[2]),open:l}));return d},getPlotLinePath:function(a,b){var c=this,d=c.center,e=c.chart,f=c.getPosition(a),g,i,j;c.isCircular?j=["M",d[0]+e.plotLeft,d[1]+e.plotTop,"L",f.x,f.y]:"circle"===c.options.gridLineInterpolation?(a=c.translate(a))&&(j=c.getLinePath(0,a)):(h(e.xAxis,function(a){a.pane===
c.pane&&(g=a)}),j=[],a=c.translate(a),d=g.tickPositions,g.autoConnect&&(d=d.concat([d[0]])),b&&(d=[].concat(d).reverse()),h(d,function(b,c){i=g.getPosition(b,a);j.push(c?"L":"M",i.x,i.y)}));return j},getTitlePosition:function(){var a=this.center,b=this.chart,c=this.options.title;return{x:b.plotLeft+a[0]+(c.x||0),y:b.plotTop+a[1]-{high:0.5,middle:0.25,low:0}[c.align]*a[2]+(c.y||0)}}};s(K,"init",function(a,d,e){var h,i=d.angular,k=d.polar,l=e.isX,m=i&&l,q,o;o=d.options;var n=e.pane||0;if(i){if(g(this,
m?G:B),q=!l)this.defaultRadialOptions=this.defaultRadialGaugeOptions}else k&&(g(this,B),this.defaultRadialOptions=(q=l)?this.defaultRadialXOptions:f(this.defaultYAxisOptions,this.defaultRadialYOptions));a.call(this,d,e);if(!m&&(i||k))if(a=this.options,d.panes||(d.panes=[]),this.pane=(h=d.panes[n]=d.panes[n]||new c(t(o.pane)[n],d,this),n=h),n=n.options,d.inverted=!1,o.chart.zoomType=null,this.startAngleRad=d=(n.startAngle-90)*Math.PI/180,this.endAngleRad=o=(j(n.endAngle,n.startAngle+360)-90)*Math.PI/
180,this.offset=a.offset||0,(this.isCircular=q)&&e.max===b&&o-d===2*Math.PI)this.autoConnect=!0});s(m,"getPosition",function(a,b,c,d,e){var f=this.axis;return f.getPosition?f.getPosition(c):a.call(this,b,c,d,e)});s(m,"getLabelPosition",function(a,b,c,d,e,f,g,h,i){var k=this.axis,l=f.y,m=f.align,q=180*((k.translate(this.pos)+k.startAngleRad+Math.PI/2)/Math.PI)%360;k.isRadial?(a=k.getPosition(this.pos,k.center[2]/2+j(f.distance,-25)),"auto"===f.rotation?d.attr({rotation:q}):null===l&&(l=k.chart.renderer.fontMetrics(d.styles.fontSize).b-
d.getBBox().height/2),null===m&&(m=k.isCircular?20<q&&160>q?"left":200<q&&340>q?"right":"center":"center",d.attr({align:m})),a.x+=f.x,a.y+=l):a=a.call(this,b,c,d,e,f,g,h,i);return a});s(m,"getMarkPath",function(a,b,c,d,e,f,g){var h=this.axis;h.isRadial?(a=h.getPosition(this.pos,h.center[2]/2+d),b=["M",b,c,"L",a.x,a.y]):b=a.call(this,b,c,d,e,f,g);return b});l.arearange=f(l.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\ufffd?</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},
trackByArea:!0,dataLabels:{verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}});n.arearange=o(n.area,{type:"arearange",pointArrayMap:["low","high"],toYData:function(a){return[a.low,a.high]},pointValKey:"low",getSegments:function(){var a=this;h(a.points,function(b){!a.options.connectNulls&&(null===b.low||null===b.high)?b.y=null:null===b.low&&null!==b.high&&(b.y=b.high)});v.prototype.getSegments.call(this)},translate:function(){var a=this.yAxis;n.area.prototype.translate.apply(this);
h(this.points,function(b){var c=b.low,d=b.high,e=b.plotY;null===d&&null===c?b.y=null:null===c?(b.plotLow=b.plotY=null,b.plotHigh=a.translate(d,0,1,0,1)):null===d?(b.plotLow=e,b.plotHigh=null):(b.plotLow=e,b.plotHigh=a.translate(d,0,1,0,1))})},getSegmentPath:function(a){var b,c=[],d=a.length,e=v.prototype.getSegmentPath,f,g;g=this.options;var h=g.step;for(b=HighchartsAdapter.grep(a,function(a){return null!==a.plotLow});d--;)f=a[d],null!==f.plotHigh&&c.push({plotX:f.plotX,plotY:f.plotHigh});a=e.call(this,
b);h&&(!0===h&&(h="left"),g.step={left:"right",center:"center",right:"left"}[h]);c=e.call(this,c);g.step=h;g=[].concat(a,c);c[0]="L";this.areaPath=this.areaPath.concat(a,c);return g},drawDataLabels:function(){var a=this.data,b=a.length,c,d=[],e=v.prototype,f=this.options.dataLabels,g,h=this.chart.inverted;if(f.enabled||this._hasPointLabels){for(c=b;c--;)g=a[c],g.y=g.high,g._plotY=g.plotY,g.plotY=g.plotHigh,d[c]=g.dataLabel,g.dataLabel=g.dataLabelUpper,g.below=!1,h?(f.align="left",f.x=f.xHigh):f.y=
f.yHigh;e.drawDataLabels&&e.drawDataLabels.apply(this,arguments);for(c=b;c--;)g=a[c],g.dataLabelUpper=g.dataLabel,g.dataLabel=d[c],g.y=g.low,g.plotY=g._plotY,g.below=!0,h?(f.align="right",f.x=f.xLow):f.y=f.yLow;e.drawDataLabels&&e.drawDataLabels.apply(this,arguments)}},alignDataLabel:function(){n.column.prototype.alignDataLabel.apply(this,arguments)},getSymbol:n.column.prototype.getSymbol,drawPoints:T});l.areasplinerange=f(l.arearange);n.areasplinerange=o(n.arearange,{type:"areasplinerange",getPointSpline:n.spline.prototype.getPointSpline});
(function(){var a=n.column.prototype;l.columnrange=f(l.column,l.arearange,{lineWidth:1,pointRange:null});n.columnrange=o(n.arearange,{type:"columnrange",translate:function(){var b=this,c=b.yAxis,d;a.translate.apply(b);h(b.points,function(a){var e=a.shapeArgs,f=b.options.minPointLength,g;a.tooltipPos=null;a.plotHigh=d=c.translate(a.high,0,1,0,1);a.plotLow=a.plotY;g=d;a=a.plotY-d;a<f&&(f-=a,a+=f,g-=f/2);e.height=a;e.y=g})},trackerGroups:["group","dataLabels"],drawGraph:T,pointAttrToOptions:a.pointAttrToOptions,
drawPoints:a.drawPoints,drawTracker:a.drawTracker,animate:a.animate,getColumnMetrics:a.getColumnMetrics})})();l.gauge=f(l.line,{dataLabels:{enabled:!0,defer:!1,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,style:{fontWeight:"bold"},verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1});y={type:"gauge",pointClass:o(r,{setState:function(a){this.state=a}}),angular:!0,drawGraph:T,fixedBox:!0,forceDL:!0,trackerGroups:["group","dataLabels"],translate:function(){var a=
this.yAxis,b=this.options,c=a.center;this.generatePoints();h(this.points,function(d){var e=f(b.dial,d.dial),g=k(j(e.radius,80))*c[2]/200,h=k(j(e.baseLength,70))*g/100,i=k(j(e.rearLength,10))*g/100,l=e.baseWidth||3,m=e.topWidth||1,q=b.overshoot,o=a.startAngleRad+a.translate(d.y,null,null,null,!0);q&&"number"===typeof q?(q=q/180*Math.PI,o=Math.max(a.startAngleRad-q,Math.min(a.endAngleRad+q,o))):!1===b.wrap&&(o=Math.max(a.startAngleRad,Math.min(a.endAngleRad,o)));o=180*o/Math.PI;d.shapeType="path";d.shapeArgs=
{d:e.path||["M",-i,-l/2,"L",h,-l/2,g,-m/2,g,m/2,h,l/2,-i,l/2,"z"],translateX:c[0],translateY:c[1],rotation:o};d.plotX=c[0];d.plotY=c[1]})},drawPoints:function(){var a=this,b=a.yAxis.center,c=a.pivot,d=a.options,e=d.pivot,g=a.chart.renderer;h(a.points,function(b){var c=b.graphic,e=b.shapeArgs,h=e.d,i=f(d.dial,b.dial);c?(c.animate(e),e.d=h):b.graphic=g[b.shapeType](e).attr({stroke:i.borderColor||"none","stroke-width":i.borderWidth||0,fill:i.backgroundColor||"black",rotation:e.rotation}).add(a.group)});
c?c.animate({translateX:b[0],translateY:b[1]}):a.pivot=g.circle(0,0,j(e.radius,5)).attr({"stroke-width":e.borderWidth||0,stroke:e.borderColor||"silver",fill:e.backgroundColor||"black"}).translate(b[0],b[1]).add(a.group)},animate:function(a){var b=this;a||(h(b.points,function(a){var c=a.graphic;c&&(c.attr({rotation:180*b.yAxis.startAngleRad/Math.PI}),c.animate({rotation:a.shapeArgs.rotation},b.options.animation))}),b.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?
"visible":"hidden",this.options.zIndex,this.chart.seriesGroup);v.prototype.render.call(this);this.group.clip(this.chart.clipRect)},setData:function(a,b){v.prototype.setData.call(this,a,!1);this.processData();this.generatePoints();j(b,!0)&&this.chart.redraw()},drawTracker:y&&y.drawTrackerPoint};n.gauge=o(n.line,y);l.boxplot=f(l.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-0.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\ufffd?</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},
whiskerLength:"50%",whiskerWidth:2});n.boxplot=o(n.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(a){return[a.low,a.q1,a.median,a.q3,a.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:T,translate:function(){var a=this.yAxis,b=this.pointArrayMap;n.column.prototype.translate.apply(this);h(this.points,function(c){h(b,function(b){null!==c[b]&&(c[b+"Plot"]=a.translate(c[b],0,1,0,1))})})},drawPoints:function(){var a=
this,c=a.points,d=a.options,e=a.chart.renderer,f,g,i,k,l,m,q,o,n,u,r,s,t,w,y,v,p,z,C,B,N,T,G=!1!==a.doQuartiles,K=parseInt(a.options.whiskerLength,10)/100;h(c,function(c){n=c.graphic;N=c.shapeArgs;r={};w={};v={};T=c.color||a.color;c.plotY!==b&&((f=c.pointAttr[c.selected?"selected":""],p=N.width,z=H(N.x),C=z+p,B=E(p/2),g=H(G?c.q1Plot:c.lowPlot),i=H(G?c.q3Plot:c.lowPlot),k=H(c.highPlot),l=H(c.lowPlot),r.stroke=c.stemColor||d.stemColor||T,r["stroke-width"]=j(c.stemWidth,d.stemWidth,d.lineWidth),r.dashstyle=
c.stemDashStyle||d.stemDashStyle,w.stroke=c.whiskerColor||d.whiskerColor||T,w["stroke-width"]=j(c.whiskerWidth,d.whiskerWidth,d.lineWidth),v.stroke=c.medianColor||d.medianColor||T,v["stroke-width"]=j(c.medianWidth,d.medianWidth,d.lineWidth),v["stroke-linecap"]="round",q=r["stroke-width"]%2/2,o=z+B+q,u=["M",o,i,"L",o,k,"M",o,g,"L",o,l],G&&(q=f["stroke-width"]%2/2,o=H(o)+q,g=H(g)+q,i=H(i)+q,z+=q,C+=q,s=["M",z,i,"L",z,g,"L",C,g,"L",C,i,"L",z,i,"z"]),K&&(q=w["stroke-width"]%2/2,k+=q,l+=q,t=["M",o-B*K,
k,"L",o+B*K,k,"M",o-B*K,l,"L",o+B*K,l]),q=v["stroke-width"]%2/2,m=E(c.medianPlot)+q,y=["M",z,m,"L",C,m],n)?(c.stem.animate({d:u}),K&&c.whiskers.animate({d:t}),G&&c.box.animate({d:s}),c.medianShape.animate({d:y})):(c.graphic=n=e.g().add(a.group),c.stem=e.path(u).attr(r).add(n),K&&(c.whiskers=e.path(t).attr(w).add(n)),G&&(c.box=e.path(s).attr(f).add(n)),c.medianShape=e.path(y).attr(v).add(n)))})}});l.errorbar=f(l.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{series.color}">\ufffd?</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},
whiskerWidth:null});n.errorbar=o(n.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(a){return[a.low,a.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:n.arearange?n.arearange.prototype.drawDataLabels:T,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||n.column.prototype.getColumnMetrics.call(this)}});l.waterfall=f(l.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333"});n.waterfall=o(n.column,{type:"waterfall",upColorProp:"fill",
pointArrayMap:["low","y"],pointValKey:"y",init:function(a,b){b.stacking=!0;n.column.prototype.init.call(this,a,b)},translate:function(){var a=this.yAxis,b,c,d,e,f,g,h,i,j;b=this.options.threshold;n.column.prototype.translate.apply(this);i=b;d=this.points;c=0;for(b=d.length;c<b;c++)e=d[c],f=e.shapeArgs,g=this.getStack(c),j=g.points[this.index+","+c],isNaN(e.y)&&(e.y=this.yData[c]),h=C(i,i+e.y)+j[0],f.y=a.translate(h,0,1),e.isSum||e.isIntermediateSum?(f.y=a.translate(j[1],0,1),f.height=a.translate(j[0],
0,1)-f.y):i+=g.total,0>f.height&&(f.y+=f.height,f.height*=-1),e.plotY=f.y=E(f.y)-this.borderWidth%2/2,f.height=E(f.height),e.yBottom=f.y+f.height},processData:function(a){var b=this.yData,c=this.points,d,e=b.length,f=this.options.threshold||0,g,h,i,j,k,l;h=g=i=j=f;for(l=0;l<e;l++)k=b[l],d=c&&c[l]?c[l]:{},"sum"===k||d.isSum?b[l]=h:"intermediateSum"===k||d.isIntermediateSum?(b[l]=g,g=f):(h+=k,g+=k),i=Math.min(h,i),j=Math.max(h,j);v.prototype.processData.call(this,a);this.dataMin=i;this.dataMax=j},toYData:function(a){return a.isSum?
"sum":a.isIntermediateSum?"intermediateSum":a.y},getAttribs:function(){n.column.prototype.getAttribs.apply(this,arguments);var b=this.options,c=b.states,d=b.upColor||this.color,b=a.Color(d).brighten(0.1).get(),e=f(this.pointAttr),g=this.upColorProp;e[""][g]=d;e.hover[g]=c.hover.upColor||b;e.select[g]=c.select.upColor||d;h(this.points,function(a){0<a.y&&!a.color&&(a.pointAttr=e,a.color=d)})},getGraphPath:function(){var a=this.data,b=a.length,c=E(this.options.lineWidth+this.borderWidth)%2/2,d=[],e,
f,g;for(g=1;g<b;g++)f=a[g].shapeArgs,e=a[g-1].shapeArgs,f=["M",e.x+e.width,e.y+c,"L",f.x,e.y+c],0>a[g-1].y&&(f[2]+=e.height,f[5]+=e.height),d=d.concat(f);return d},getExtremes:T,getStack:function(a){var b=this.yAxis.stacks,c=this.stackKey;this.processedYData[a]<this.options.threshold&&(c="-"+c);return b[c][a]},drawGraph:v.prototype.drawGraph});l.bubble=f(l.scatter,{dataLabels:{format:"{point.z}",inside:!0,style:{color:"white",textShadow:"0px 0px 3px black"},verticalAlign:"middle"},marker:{lineColor:null,
lineWidth:1},minSize:8,maxSize:"20%",states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0});y=o(r,{haloPath:function(){return r.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size)}});n.bubble=o(n.scatter,{type:"bubble",pointClass:y,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],bubblePadding:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",
fill:"fillColor"},applyOpacity:function(a){var b=this.options.marker,c=j(b.fillOpacity,0.5),a=a||b.fillColor||this.color;1!==c&&(a=N(a).setOpacity(c).get("rgba"));return a},convertAttribs:function(){var a=v.prototype.convertAttribs.apply(this,arguments);a.fill=this.applyOpacity(a.fill);return a},getRadii:function(a,b,c,d){var e,f,g,h=this.zData,i=[],j="width"!==this.options.sizeBy;f=0;for(e=h.length;f<e;f++)g=b-a,g=0<g?(h[f]-a)/(b-a):0.5,j&&0<=g&&(g=Math.sqrt(g)),i.push(z.ceil(c+g*(d-c))/2);this.radii=
i},animate:function(a){var b=this.options.animation;a||(h(this.points,function(a){var c=a.graphic,a=a.shapeArgs;c&&a&&(c.attr("r",1),c.animate({r:a.r},b))}),this.animate=null)},translate:function(){var a,c=this.data,d,e,f=this.radii;n.scatter.prototype.translate.call(this);for(a=c.length;a--;)d=c[a],e=f?f[a]:0,d.negative=d.z<(this.options.zThreshold||0),e>=this.minPxSize/2?(d.shapeType="circle",d.shapeArgs={x:d.plotX,y:d.plotY,r:e},d.dlBox={x:d.plotX-e,y:d.plotY-e,width:2*e,height:2*e}):d.shapeArgs=
d.plotY=d.dlBox=b},drawLegendSymbol:function(a,b){var c=k(a.itemStyle.fontSize)/2;b.legendSymbol=this.chart.renderer.circle(c,a.baseline-c,c).attr({zIndex:3}).add(b.legendGroup);b.legendSymbol.isMarker=!0},drawPoints:n.column.prototype.drawPoints,alignDataLabel:n.column.prototype.alignDataLabel});q.prototype.beforePadding=function(){var a=this,c=this.len,f=this.chart,g=0,i=c,l=this.isXAxis,m=l?"xData":"yData",q=this.min,o={},n=z.min(f.plotWidth,f.plotHeight),u=Number.MAX_VALUE,r=-Number.MAX_VALUE,
s=this.max-q,t=c/s,w=[];this.tickPositions&&(h(this.series,function(b){var c=b.options;if(b.bubblePadding&&(b.visible||!f.options.chart.ignoreHiddenSeries))if(a.allowZoomOutside=!0,w.push(b),l)h(["minSize","maxSize"],function(a){var b=c[a],d=/%$/.test(b),b=k(b);o[a]=d?n*b/100:b}),b.minPxSize=o.minSize,b=b.zData,b.length&&(u=z.min(u,z.max(d(b),!1===c.displayNegative?c.zThreshold:-Number.MAX_VALUE)),r=z.max(r,e(b)))}),h(w,function(a){var b=a[m],c=b.length,d;l&&a.getRadii(u,r,o.minSize,o.maxSize);if(0<
s)for(;c--;)"number"===typeof b[c]&&(d=a.radii[c],g=Math.min((b[c]-q)*t-d,g),i=Math.max((b[c]-q)*t+d,i))}),w.length&&0<s&&j(this.options.min,this.userMin)===b&&j(this.options.max,this.userMax)===b&&(i-=c,t*=(c+g-i)/c,this.min+=g/t,this.max+=i/t))};(function(){function a(b,c,d){b.call(this,c,d);this.chart.polar&&(this.closeSegment=function(a){var b=this.xAxis.center;a.push("L",b[0],b[1])},this.closedStacks=!0)}function b(a,c){var d=this.chart,e=this.options.animation,f=this.group,g=this.markerGroup,
h=this.xAxis.center,i=d.plotLeft,j=d.plotTop;d.polar?d.renderer.isSVG&&(!0===e&&(e={}),c?(d={translateX:h[0]+i,translateY:h[1]+j,scaleX:0.001,scaleY:0.001},f.attr(d),g&&g.attr(d)):(d={translateX:i,translateY:j,scaleX:1,scaleY:1},f.animate(d,e),g&&g.animate(d,e),this.animate=null)):a.call(this,c)}var c=v.prototype,d=u.prototype,e;c.toXY=function(a){var b,c=this.chart,d=a.plotX;b=a.plotY;a.rectPlotX=d;a.rectPlotY=b;d=(180*(d/Math.PI)+this.xAxis.pane.options.startAngle)%360;0>d&&(d+=360);a.clientX=d;
b=this.xAxis.postTranslate(a.plotX,this.yAxis.len-b);a.plotX=a.polarPlotX=b.x-c.plotLeft;a.plotY=a.polarPlotY=b.y-c.plotTop};c.orderTooltipPoints=function(a){if(this.chart.polar&&(a.sort(function(a,b){return a.clientX-b.clientX}),a[0]))a[0].wrappedClientX=a[0].clientX+360,a.push(a[0])};n.area&&s(n.area.prototype,"init",a);n.areaspline&&s(n.areaspline.prototype,"init",a);n.spline&&s(n.spline.prototype,"getPointSpline",function(a,b,c,d){var e,f,g,h,i,j,k;this.chart.polar?(e=c.plotX,f=c.plotY,a=b[d-
1],g=b[d+1],this.connectEnds&&(a||(a=b[b.length-2]),g||(g=b[1])),a&&g&&(h=a.plotX,i=a.plotY,b=g.plotX,j=g.plotY,h=(1.5*e+h)/2.5,i=(1.5*f+i)/2.5,g=(1.5*e+b)/2.5,k=(1.5*f+j)/2.5,b=Math.sqrt(Math.pow(h-e,2)+Math.pow(i-f,2)),j=Math.sqrt(Math.pow(g-e,2)+Math.pow(k-f,2)),h=Math.atan2(i-f,h-e),i=Math.atan2(k-f,g-e),k=Math.PI/2+(h+i)/2,Math.abs(h-k)>Math.PI/2&&(k-=Math.PI),h=e+Math.cos(k)*b,i=f+Math.sin(k)*b,g=e+Math.cos(Math.PI+k)*j,k=f+Math.sin(Math.PI+k)*j,c.rightContX=g,c.rightContY=k),d?(c=["C",a.rightContX||
a.plotX,a.rightContY||a.plotY,h||e,i||f,e,f],a.rightContX=a.rightContY=null):c=["M",e,f]):c=a.call(this,b,c,d);return c});s(c,"translate",function(a){a.call(this);if(this.chart.polar&&!this.preventPostTranslate)for(var a=this.points,b=a.length;b--;)this.toXY(a[b])});s(c,"getSegmentPath",function(a,b){var c=this.points;this.chart.polar&&!1!==this.options.connectEnds&&(b[b.length-1]===c[c.length-1]&&null!==c[0].y)&&(this.connectEnds=!0,b=[].concat(b,[c[0]]));return a.call(this,b)});s(c,"animate",b);
s(c,"setTooltipPoints",function(a,b){this.chart.polar&&g(this.xAxis,{tooltipLen:360});return a.call(this,b)});n.column&&(e=n.column.prototype,s(e,"animate",b),s(e,"translate",function(a){var b=this.xAxis,c=this.yAxis.len,d=b.center,e=b.startAngleRad,f=this.chart.renderer,g,h;this.preventPostTranslate=!0;a.call(this);if(b.isRadial){b=this.points;for(h=b.length;h--;)g=b[h],a=g.barX+e,g.shapeType="path",g.shapeArgs={d:f.symbols.arc(d[0],d[1],c-g.plotY,null,{start:a,end:a+g.pointWidth,innerR:c-j(g.yBottom,
c)})},this.toXY(g),g.tooltipPos=[g.plotX,g.plotY],g.ttBelow=g.plotY>d[1]}}),s(e,"alignDataLabel",function(a,b,d,e,f,g){this.chart.polar?(a=180*(b.rectPlotX/Math.PI),null===e.align&&(e.align=20<a&&160>a?"left":200<a&&340>a?"right":"center"),null===e.verticalAlign&&(e.verticalAlign=45>a||315<a?"bottom":135<a&&225>a?"top":"middle"),c.alignDataLabel.call(this,b,d,e,f,g)):a.call(this,b,d,e,f,g)}));s(d,"getIndex",function(a,b){var c,d=this.chart,e;d.polar?(e=d.xAxis[0].center,c=b.chartX-e[0]-d.plotLeft,
d=b.chartY-e[1]-d.plotTop,c=180-Math.round(180*(Math.atan2(c,d)/Math.PI))):c=a.call(this,b);return c});s(d,"getCoordinates",function(a,b){var c=this.chart,d={xAxis:[],yAxis:[]};c.polar?h(c.axes,function(a){var e=a.isXAxis,f=a.center,g=b.chartX-f[0]-c.plotLeft,f=b.chartY-f[1]-c.plotTop;d[e?"xAxis":"yAxis"].push({axis:a,value:a.translate(e?Math.PI-Math.atan2(g,f):Math.sqrt(Math.pow(g,2)+Math.pow(f,2)),!0)})}):d=a.call(this,b);return d})})()})(Highcharts);steal.executed("vendor/highcharts-release/highcharts-more.js");
(function(a){var b=a.Chart,c=a.addEvent,d=a.removeEvent,e=a.createElement,h=a.discardElement,g=a.css,f=a.merge,i=a.each,j=a.extend,k=Math.max,l=document,n=window,o=a.isTouchDevice,t=a.Renderer.prototype.symbols,s=a.getOptions(),q;j(s.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});s.navigation={menuStyle:{border:"1px solid #A0A0A0",
background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:o?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};s.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",
symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};a.post=function(a,b,c){var d,a=e("form",f({method:"post",
action:a,enctype:"multipart/form-data"},c),{display:"none"},l.body);for(d in b)e("input",{type:"hidden",name:d,value:b[d]},null,a);a.submit();h(a)};j(b.prototype,{getSVG:function(b){var c=this,d,g,k,q,o=f(c.options,b);l.createElementNS||(l.createElementNS=function(a,b){return l.createElement(b)});b=e("div",null,{position:"absolute",top:"-9999em",width:c.chartWidth+"px",height:c.chartHeight+"px"},l.body);g=c.renderTo.style.width;q=c.renderTo.style.height;g=o.exporting.sourceWidth||o.chart.width||/px$/.test(g)&&
parseInt(g,10)||600;q=o.exporting.sourceHeight||o.chart.height||/px$/.test(q)&&parseInt(q,10)||400;j(o.chart,{animation:!1,renderTo:b,forExport:!0,width:g,height:q});o.exporting.enabled=!1;o.series=[];i(c.series,function(a){k=f(a.options,{animation:!1,showCheckbox:!1,visible:a.visible});k.isInternal||o.series.push(k)});d=new a.Chart(o,c.callback);i(["xAxis","yAxis"],function(a){i(c[a],function(b,c){var e=d[a][c],f=b.getExtremes(),g=f.userMin,f=f.userMax;e&&(void 0!==g||void 0!==f)&&e.setExtremes(g,
f,!0,!1)})});g=d.container.innerHTML;o=null;d.destroy();h(b);g=g.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g,"\u00a0").replace(/&shy;/g,"\u00ad").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,
'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(a){return a.toLowerCase()});return g=g.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},exportChart:function(b,c){var b=b||{},d=this.options.exporting,d=this.getSVG(f({chart:{borderRadius:0}},d.chartOptions,c,{exporting:{sourceWidth:b.sourceWidth||
d.sourceWidth,sourceHeight:b.sourceHeight||d.sourceHeight}})),b=f(this.options.exporting,b);a.post(b.url,{filename:b.filename||"chart",type:b.type,width:b.width||0,scale:b.scale||2,svg:d},b.formAttributes)},print:function(){var a=this,b=a.container,c=[],d=b.parentNode,e=l.body,f=e.childNodes;a.isPrinting||(a.isPrinting=!0,i(f,function(a,b){1===a.nodeType&&(c[b]=a.style.display,a.style.display="none")}),e.appendChild(b),n.focus(),n.print(),setTimeout(function(){d.appendChild(b);i(f,function(a,b){1===
a.nodeType&&(a.style.display=c[b])});a.isPrinting=!1},1E3))},contextMenu:function(a,b,f,h,l,q,o){var n=this,s=n.options.navigation,t=s.menuItemStyle,N=n.chartWidth,T=n.chartHeight,K="cache-"+a,G=n[K],B=k(l,q),W,J,Q,X=function(b){n.pointer.inClass(b.target,a)||J()};G||(n[K]=G=e("div",{className:a},{position:"absolute",zIndex:1E3,padding:B+"px"},n.container),W=e("div",null,j({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},s.menuStyle),G),J=function(){g(G,
{display:"none"});o&&o.setState(0);n.openMenu=!1},c(G,"mouseleave",function(){Q=setTimeout(J,500)}),c(G,"mouseenter",function(){clearTimeout(Q)}),c(document,"mouseup",X),c(n,"destroy",function(){d(document,"mouseup",X)}),i(b,function(a){if(a){var b=a.separator?e("hr",null,null,W):e("div",{onmouseover:function(){g(this,s.menuItemHoverStyle)},onmouseout:function(){g(this,t)},onclick:function(){J();a.onclick.apply(n,arguments)},innerHTML:a.text||n.options.lang[a.textKey]},j({cursor:"pointer"},t),W);
n.exportDivElements.push(b)}}),n.exportDivElements.push(W,G),n.exportMenuWidth=G.offsetWidth,n.exportMenuHeight=G.offsetHeight);b={display:"block"};f+n.exportMenuWidth>N?b.right=N-f-l-B+"px":b.left=f-B+"px";h+q+n.exportMenuHeight>T&&"top"!==o.alignOptions.verticalAlign?b.bottom=T-h-B+"px":b.top=h+q-B+"px";g(G,b);n.openMenu=!0},addButton:function(b){var c=this,d=c.renderer,e=f(c.options.navigation.buttonOptions,b),g=e.onclick,h=e.menuItems,i,k,l={stroke:e.symbolStroke,fill:e.symbolFill},o=e.symbolSize||
12;c.btnCount||(c.btnCount=0);c.exportDivElements||(c.exportDivElements=[],c.exportSVGElements=[]);if(!1!==e.enabled){var n=e.theme,s=n.states,t=s&&s.hover,s=s&&s.select,G;delete n.states;g?G=function(){g.apply(c,arguments)}:h&&(G=function(){c.contextMenu(k.menuClassName,h,k.translateX,k.translateY,k.width,k.height,k);k.setState(2)});e.text&&e.symbol?n.paddingLeft=a.pick(n.paddingLeft,25):e.text||j(n,{width:e.width,height:e.height,padding:0});k=d.button(e.text,0,0,G,n,t,s).attr({title:c.options.lang[e._titleKey],
"stroke-linecap":"round"});k.menuClassName=b.menuClassName||"highcharts-menu-"+c.btnCount++;e.symbol&&(i=d.symbol(e.symbol,e.symbolX-o/2,e.symbolY-o/2,o,o).attr(j(l,{"stroke-width":e.symbolStrokeWidth||1,zIndex:1})).add(k));k.add().align(j(e,{width:k.width,x:a.pick(e.x,q)}),!0,"spacingBox");q+=(k.width+e.buttonSpacing)*("right"===e.align?-1:1);c.exportSVGElements.push(k,i)}},destroyExport:function(a){var a=a.target,b,c;for(b=0;b<a.exportSVGElements.length;b++)if(c=a.exportSVGElements[b])c.onclick=
c.ontouchstart=null,a.exportSVGElements[b]=c.destroy();for(b=0;b<a.exportDivElements.length;b++)c=a.exportDivElements[b],d(c,"mouseleave"),a.exportDivElements[b]=c.onmouseout=c.onmouseover=c.ontouchstart=c.onclick=null,h(c)}});t.menu=function(a,b,c,d){return["M",a,b+2.5,"L",a+c,b+2.5,"M",a,b+d/2+0.5,"L",a+c,b+d/2+0.5,"M",a,b+d-1.5,"L",a+c,b+d-1.5]};b.prototype.callbacks.push(function(a){var b,d=a.options.exporting,e=d.buttons;q=0;if(!1!==d.enabled){for(b in e)a.addButton(e[b]);c(a,"destroy",a.destroyExport)}})})(Highcharts);
steal.executed("vendor/highcharts-release/modules/exporting.src.js");
(function(a){var b=a.each,c=function(a,b){this.init(a,b)};a.extend(c.prototype,{init:function(a,b){this.options=a;this.chartOptions=b;this.columns=a.columns||this.rowsToColumns(a.rows)||[];this.columns.length?this.dataFound():(this.parseCSV(),this.parseTable(),this.parseGoogleSpreadsheet())},getColumnDistribution:function(){var c=this.chartOptions,e=c&&c.chart&&c.chart.type,h=[];b(c&&c.series||[],function(b){h.push((a.seriesTypes[b.type||e||"line"].prototype.pointArrayMap||[0]).length)});this.valueCount=
{global:(a.seriesTypes[e||"line"].prototype.pointArrayMap||[0]).length,individual:h}},dataFound:function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns));this.parseTypes();this.findHeaderRow();this.parsed();this.complete()},parseCSV:function(){var a=this,c=this.options,h=c.csv,g=this.columns,f=c.startRow||0,i=c.endRow||Number.MAX_VALUE,j=c.startColumn||0,k=c.endColumn||Number.MAX_VALUE,l,n,o=0;h&&(n=h.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(c.lineDelimiter||
"\n"),l=c.itemDelimiter||(-1!==h.indexOf("\t")?"\t":","),b(n,function(c,e){var h=a.trim(c),m=0===h.indexOf("#");e>=f&&e<=i&&(!m&&""!==h)&&(h=c.split(l),b(h,function(a,b){b>=j&&b<=k&&(g[b-j]||(g[b-j]=[]),g[b-j][o]=a)}),o+=1)}),this.dataFound())},parseTable:function(){var a=this.options,c=a.table,h=this.columns,g=a.startRow||0,f=a.endRow||Number.MAX_VALUE,i=a.startColumn||0,j=a.endColumn||Number.MAX_VALUE;c&&("string"===typeof c&&(c=document.getElementById(c)),b(c.getElementsByTagName("tr"),function(a,
c){c>=g&&c<=f&&b(a.children,function(a,b){if(("TD"===a.tagName||"TH"===a.tagName)&&b>=i&&b<=j)h[b-i]||(h[b-i]=[]),h[b-i][c-g]=a.innerHTML})}),this.dataFound())},parseGoogleSpreadsheet:function(){var a=this,b=this.options,c=b.googleSpreadsheetKey,g=this.columns,f=b.startRow||0,i=b.endRow||Number.MAX_VALUE,j=b.startColumn||0,k=b.endColumn||Number.MAX_VALUE,l,n;c&&jQuery.ajax({dataType:"json",url:"https://spreadsheets.google.com/feeds/cells/"+c+"/"+(b.googleSpreadsheetWorksheet||"od6")+"/public/values?alt=json-in-script&callback=?",
error:b.error,success:function(b){var b=b.feed.entry,c,e=b.length,h=0,m=0,r;for(r=0;r<e;r++)c=b[r],h=Math.max(h,c.gs$cell.col),m=Math.max(m,c.gs$cell.row);for(r=0;r<h;r++)r>=j&&r<=k&&(g[r-j]=[],g[r-j].length=Math.min(m,i-f));for(r=0;r<e;r++)c=b[r],l=c.gs$cell.row-1,n=c.gs$cell.col-1,n>=j&&n<=k&&(l>=f&&l<=i)&&(g[n-j][l-f]=c.content.$t);a.dataFound()}})},findHeaderRow:function(){b(this.columns,function(){});this.headerRow=0},trim:function(a){return"string"===typeof a?a.replace(/^\s+|\s+$/g,""):a},parseTypes:function(){for(var a=
this.columns,b=a.length,c,g,f,i;b--;)for(c=a[b].length;c--;)g=a[b][c],f=parseFloat(g),i=this.trim(g),i==f?(a[b][c]=f,31536E6<f?a[b].isDatetime=!0:a[b].isNumeric=!0):(g=this.parseDate(g),0===b&&"number"===typeof g&&!isNaN(g)?(a[b][c]=g,a[b].isDatetime=!0):a[b][c]=""===i?null:i)},dateFormats:{"YYYY-mm-dd":{regex:"^([0-9]{4})-([0-9]{2})-([0-9]{2})$",parser:function(a){return Date.UTC(+a[1],a[2]-1,+a[3])}}},parseDate:function(a){var b=this.options.parseDate,c,g,f;b&&(c=b(a));if("string"===typeof a)for(g in this.dateFormats)b=
this.dateFormats[g],(f=a.match(b.regex))&&(c=b.parser(f));return c},rowsToColumns:function(a){var b,c,g,f,i;if(a){i=[];c=a.length;for(b=0;b<c;b++){f=a[b].length;for(g=0;g<f;g++)i[g]||(i[g]=[]),i[g][b]=a[b][g]}}return i},parsed:function(){this.options.parsed&&this.options.parsed.call(this,this.columns)},complete:function(){var b=this.columns,c,h,g=this.options,f,i,j,k,l,n;if(g.complete){this.getColumnDistribution();1<b.length&&(c=b.shift(),0===this.headerRow&&c.shift(),c.isDatetime?h="datetime":c.isNumeric||
(h="category"));for(k=0;k<b.length;k++)0===this.headerRow&&(b[k].name=b[k].shift());i=[];for(n=k=0;k<b.length;n++){f=a.pick(this.valueCount.individual[n],this.valueCount.global);j=[];if(k+f<=b.length)for(l=0;l<b[k].length;l++)j[l]=[c[l],void 0!==b[k][l]?b[k][l]:null],1<f&&j[l].push(void 0!==b[k+1][l]?b[k+1][l]:null),2<f&&j[l].push(void 0!==b[k+2][l]?b[k+2][l]:null),3<f&&j[l].push(void 0!==b[k+3][l]?b[k+3][l]:null),4<f&&j[l].push(void 0!==b[k+4][l]?b[k+4][l]:null);i[n]={name:b[k].name,data:j};k+=f}g.complete({xAxis:{type:h},
series:i})}}});a.Data=c;a.data=function(a,b){return new c(a,b)};a.wrap(a.Chart.prototype,"init",function(c,e,h){var g=this;e&&e.data?a.data(a.extend(e.data,{complete:function(f){e.hasOwnProperty("series")&&("object"===typeof e.series?b(e.series,function(b,c){e.series[c]=a.merge(b,f.series[c])}):delete e.series);e=a.merge(f,e);c.call(g,e,h)}}),e):c.call(g,e,h)})})(Highcharts);steal.executed("vendor/highcharts-release/modules/data.src.js");
(function(a){function b(a,b){function e(a){a=1-a*a*a;return a*a*a}var b=b||0.25,h=a.map(function(a){return a[0]}),g=function(a){var b={},c,d=a.length,e=[];for(c=0;c<d;c+=1)b[a[c]]=a[c];for(c in b)e.push(b[c]);return e}(h);2/g.length>b&&(b=Math.min(2/g.length,1),console.warn("updated bandwith to "+b));var g=a.map(function(a){return a[1]}),f=[],i=0,j=Math.floor(b*h.length)-1,k;for(k in h){var l=h[k];0<k&&j<h.length-1&&h[j+1]-h[k]<h[k]-h[i]&&(i++,j++);for(var n=Math.abs(1/(h[h[k]-h[i]>h[j]-h[k]?i:j]-
l)),o=0,t=0,s=0,q=0,m=0,r=i;r<=j;){var u=h[r],w=g[r],y=e((r<k?l-u:u-l)*n),v=u*y,o=o+y,t=t+v,s=s+u*v,q=q+w*y,m=m+w*v;r++}n=t/o;q/=o;m/=o;o=s/o;o=o==n*n?0:(m-n*q)/(o-n*n);f[k]=o*l+(q-o*n)}console.debug(f);return{equation:"",points:h.map(function(a,b){return[a,f[b]]}),string:""}}a.wrap(a.Chart.prototype,"init",function(a){for(var d=arguments[1].series,e=[],h=0,h=0;h<d.length;h++){var g=d[h];if(g.regression&&!g.rendered){g.regressionSettings=g.regressionSettings||{};var f=g.regressionSettings.type||"linear",
i={data:[],color:g.regressionSettings.color,yAxis:g.yAxis,lineWidth:2,marker:{enabled:!1},tooltip:{enabled:!1},isRegressionLine:!0,name:g.name+": "+(g.regressionSettings.label||"Equation: %eq"),enableMouseTracking:!1,type:"spline"};if("linear"==f){for(var j=g.data,k=[0,0,0,0,0],l=0,g=[];l<j.length;l++)j[l].y&&(k[0]+=j[l].x,k[1]+=j[l].y,k[2]+=j[l].x*j[l].x,k[3]+=j[l].x*j[l].y,k[4]+=j[l].y*j[l].y);for(var f=(l*k[3]-k[0]*k[1])/(l*k[2]-k[0]*k[0]),n=k[1]/l-f*k[0]/l,k=(l*k[3]-k[0]*k[1])/Math.sqrt((l*k[2]-
k[0]*k[0])*(l*k[4]-k[1]*k[1])),k=k*k,l=0,o=j.length;l<o;l++)g.push([j[l].x,j[l].x*f+n]);j="Slope="+Math.round(1E3*f)/1E3+", Intercept="+Math.round(1E3*n)/1E3+", R-squared="+Math.round(1E3*k)/1E3;g={equation:[f,n],points:g,string:j};i.type="line"}else if("exponential"==f){f=g.data;k=[0,0,0,0,0,0];n=0;g=[];for(j=f.length;n<j;n++)f[n][1]&&(k[0]+=f[n][0],k[1]+=f[n][1],k[2]+=f[n][0]*f[n][0]*f[n][1],k[3]+=f[n][1]*Math.log(f[n][1]),k[4]+=f[n][0]*f[n][1]*Math.log(f[n][1]),k[5]+=f[n][0]*f[n][1]);j=k[1]*k[2]-
k[5]*k[5];n=Math.pow(Math.E,(k[2]*k[3]-k[5]*k[4])/j);k=(k[1]*k[4]-k[5]*k[3])/j;l=0;for(j=f.length;l<j;l++)o=[f[l][0],n*Math.pow(Math.E,k*f[l][0])],g.push(o);f="y = "+Math.round(100*n)/100+"e^("+Math.round(100*k)/100+"x)";g={equation:[n,k],points:g,string:f}}else if("polynomial"==f){f=g.data;n=2;"undefined"==typeof n&&(n=2);for(var l=[],o=[],g=[],t=0,s=0,j=0,n=n+1;j<n;j++){for(var q=0,k=f.length;q<k;q++)f[q][1]&&(t+=Math.pow(f[q][0],j)*f[q][1]);l.push(t);for(var t=0,m=[],r=0;r<n;r++){q=0;for(k=f.length;q<
k;q++)f[q][1]&&(s+=Math.pow(f[q][0],j+r));m.push(s);s=0}o.push(m)}o.push(l);j=o;q=j.length-1;n=Array(n);for(k=0;k<q;k++){t=k;for(l=k+1;l<q;l++)Math.abs(j[k][l])>Math.abs(j[k][t])&&(t=l);for(o=k;o<q+1;o++)s=j[o][k],j[o][k]=j[o][t],j[o][t]=s;for(l=k+1;l<q;l++)for(o=q;o>=k;o--)j[o][l]-=j[o][k]*j[k][l]/j[k][k]}for(l=q-1;0<=l;l--){s=0;for(o=l+1;o<q;o++)s+=j[o][l]*n[o];n[l]=(j[q][l]-s)/j[l][l]}j=0;for(k=f.length;j<k;j++){for(o=l=0;o<n.length;o++)l+=n[o]*Math.pow(f[j][0],o);g.push([f[j][0],l])}f="y = ";
for(j=n.length-1;0<=j;j--)f=1<j?f+(Math.round(100*n[j])/100+"x^"+j+" + "):1==j?f+(Math.round(100*n[j])/100+"x + "):f+Math.round(100*n[j])/100;g={equation:n,points:g,string:f}}else if("logarithmic"==f){n=g.data;k=[0,0,0,0];l=0;g=[];for(j=n.length;l<j;l++)n[l][1]&&(k[0]+=Math.log(n[l][0]),k[1]+=n[l][1]*Math.log(n[l][0]),k[2]+=n[l][1],k[3]+=Math.pow(Math.log(n[l][0]),2));f=(l*k[1]-k[2]*k[0])/(l*k[3]-k[0]*k[0]);k=(k[2]-f*k[0])/l;l=0;for(j=n.length;l<j;l++)o=[n[l][0],k+f*Math.log(n[l][0])],g.push(o);n=
"y = "+Math.round(100*k)/100+" + "+Math.round(100*f)/100+" ln(x)";g={equation:[k,f],points:g,string:n}}else if("loess"==f)g=b(g.data,(g.regressionSettings.loessSmooth||25)/100);else{console.error("Invalid regression type: ",f);break}g.rSquared=0;g.rValue=0;i.data=g.points;i.name=i.name.replace("%r2",g.rSquared);i.name=i.name.replace("%r",g.rValue);i.name=i.name.replace("%eq",g.string);i.regressionOutputs=g;e.push(i);arguments[1].series[h].rendered=!0}}arguments[1].series=d.concat(e);a.apply(this,
Array.prototype.slice.call(arguments,1))})})(Highcharts);steal.executed("lib/external/Highcharts-regression/highcharts-regression.js");
(function(){var a=function(){return this}(),b=function(a,c,d){"string"!==typeof a?b.original?b.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace()):(2==arguments.length&&(d=c),b.modules||(b.modules={},b.payloads={}),b.payloads[a]=d,b.modules[a]=null)},c=function(a,b,d){if("[object Array]"===Object.prototype.toString.call(b)){for(var i=[],j=0,k=b.length;j<k;++j){var l=e(a,b[j]);if(!l&&c.original)return c.original.apply(window,arguments);
i.push(l)}d&&d.apply(null,i)}else{if("string"===typeof b){i=e(a,b);if(!i&&c.original)return c.original.apply(window,arguments);d&&d();return i}if(c.original)return c.original.apply(window,arguments)}},d=function(a,b){if(-1!==b.indexOf("!")){var c=b.split("!");return d(a,c[0])+"!"+d(a,c[1])}if("."==b.charAt(0))for(b=a.split("/").slice(0,-1).join("/")+"/"+b;-1!==b.indexOf(".")&&c!=b;)c=b,b=b.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"");return b},e=function(a,e){var e=d(a,e),f=b.modules[e];if(!f){f=
b.payloads[e];if("function"===typeof f){var i={},j={id:e,uri:"",exports:i,packaged:!0},i=f(function(a,b){return c(e,a,b)},i,j)||j.exports;b.modules[e]=i;delete b.payloads[e]}f=b.modules[e]=i||f}return f};(function(d){var e=function(a,b){return c("",a,b)},f=a;d&&(a[d]||(a[d]={}),f=a[d]);if(!f.define||!f.define.packaged)b.original=f.define,f.define=b,f.define.packaged=!0;if(!f.require||!f.require.packaged)c.original=f.require,f.require=e,f.require.packaged=!0})("ace")})();
ace.define("ace/lib/regexp",["require","exports","module"],function(){function a(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(c=c||0;c<a.length;c++)if(a[c]===b)return c;return-1}var b=RegExp.prototype.exec,c=RegExp.prototype.test,d=String.prototype.replace,e=void 0===b.call(/()??/,"")[1],h=function(){var a=/^/g;c.call(a,"");return!a.lastIndex}();if(!h||!e)RegExp.prototype.exec=function(c){var f=b.apply(this,arguments),i;if("string"==typeof c&&f){!e&&1<f.length&&-1<a(f,"")&&(i=RegExp(this.source,
d.call((this.global?"g":"")+(this.ignoreCase?"i":"")+(this.multiline?"m":"")+(this.extended?"x":"")+(this.sticky?"y":""),"g","")),d.call(c.slice(f.index),i,function(){for(var a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(f[a]=void 0)}));if(this._xregexp&&this._xregexp.captureNames)for(var j=1;j<f.length;j++)(i=this._xregexp.captureNames[j-1])&&(f[i]=f[j]);!h&&this.global&&(!f[0].length&&this.lastIndex>f.index)&&this.lastIndex--}return f},h||(RegExp.prototype.test=function(a){(a=b.call(this,
a))&&this.global&&(!a[0].length&&this.lastIndex>a.index)&&this.lastIndex--;return!!a})});
ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function a(){}function b(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}function c(a){a=+a;a!==a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(0<a||-1)*Math.floor(Math.abs(a)));return a}Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if("function"!=typeof c)throw new TypeError("Function.prototype.bind called on incompatible "+c);var d=h.call(arguments,1),e=function(){if(this instanceof
e){var a=c.apply(this,d.concat(h.call(arguments)));return Object(a)===a?a:this}return c.apply(b,d.concat(h.call(arguments)))};c.prototype&&(a.prototype=c.prototype,e.prototype=new a,a.prototype=null);return e});var d=Function.prototype.call,e=Object.prototype,h=Array.prototype.slice,g=d.bind(e.toString),f=d.bind(e.hasOwnProperty),i,j,k,l,n;if(n=f(e,"__defineGetter__"))i=d.bind(e.__defineGetter__),j=d.bind(e.__defineSetter__),k=d.bind(e.__lookupGetter__),l=d.bind(e.__lookupSetter__);if(2!=[1,2].splice(0).length)if(function(){function a(b){b=
Array(b+2);b[0]=b[1]=0;return b}var b=[],c;b.splice.apply(b,a(20));b.splice.apply(b,a(26));c=b.length;b.splice(5,0,"XXX");c+1==b.length;if(c+1==b.length)return!0}()){var o=Array.prototype.splice;Array.prototype.splice=function(a,b){return arguments.length?o.apply(this,[void 0===a?0:a,void 0===b?this.length-a:b].concat(h.call(arguments,2))):[]}}else Array.prototype.splice=function(a,b){var c=this.length;0<a?a>c&&(a=c):void 0==a?a=0:0>a&&(a=Math.max(c+a,0));a+b<c||(b=c-a);var d=this.slice(a,a+b),e=
h.call(arguments,2),f=e.length;if(a===c)f&&this.push.apply(this,e);else{var g=Math.min(b,c-a),i=a+g,j=i+f-g,k=c-i,c=c-g;if(j<i)for(g=0;g<k;++g)this[j+g]=this[i+g];else if(j>i)for(g=k;g--;)this[j+g]=this[i+g];if(f&&a===c)this.length=c,this.push.apply(this,e);else{this.length=c+f;for(g=0;g<f;++g)this[a+g]=e[g]}}return d};Array.isArray||(Array.isArray=function(a){return"[object Array]"==g(a)});var d=Object("a"),t="a"!=d[0]||!(0 in d);Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c=
H(this),d=t&&"[object String]"==g(this)?this.split(""):c,e=-1,f=d.length>>>0;if("[object Function]"!=g(a))throw new TypeError;for(;++e<f;)e in d&&a.call(b,d[e],e,c)});Array.prototype.map||(Array.prototype.map=function(a,b){var c=H(this),d=t&&"[object String]"==g(this)?this.split(""):c,e=d.length>>>0,f=Array(e);if("[object Function]"!=g(a))throw new TypeError(a+" is not a function");for(var h=0;h<e;h++)h in d&&(f[h]=a.call(b,d[h],h,c));return f});Array.prototype.filter||(Array.prototype.filter=function(a,
b){var c=H(this),d=t&&"[object String]"==g(this)?this.split(""):c,e=d.length>>>0,f=[],h;if("[object Function]"!=g(a))throw new TypeError(a+" is not a function");for(var i=0;i<e;i++)i in d&&(h=d[i],a.call(b,h,i,c)&&f.push(h));return f});Array.prototype.every||(Array.prototype.every=function(a,b){var c=H(this),d=t&&"[object String]"==g(this)?this.split(""):c,e=d.length>>>0;if("[object Function]"!=g(a))throw new TypeError(a+" is not a function");for(var f=0;f<e;f++)if(f in d&&!a.call(b,d[f],f,c))return!1;
return!0});Array.prototype.some||(Array.prototype.some=function(a,b){var c=H(this),d=t&&"[object String]"==g(this)?this.split(""):c,e=d.length>>>0;if("[object Function]"!=g(a))throw new TypeError(a+" is not a function");for(var f=0;f<e;f++)if(f in d&&a.call(b,d[f],f,c))return!0;return!1});Array.prototype.reduce||(Array.prototype.reduce=function(a){var b=H(this),c=t&&"[object String]"==g(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=g(a))throw new TypeError(a+" is not a function");
if(!d&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var e=0,f;if(2<=arguments.length)f=arguments[1];else{do{if(e in c){f=c[e++];break}if(++e>=d)throw new TypeError("reduce of empty array with no initial value");}while(1)}for(;e<d;e++)e in c&&(f=a.call(void 0,f,c[e],e,b));return f});Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var b=H(this),c=t&&"[object String]"==g(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=g(a))throw new TypeError(a+
" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var e,d=d-1;if(2<=arguments.length)e=arguments[1];else{do{if(d in c){e=c[d--];break}if(0>--d)throw new TypeError("reduceRight of empty array with no initial value");}while(1)}do d in this&&(e=a.call(void 0,e,c[d],d,b));while(d--);return e});if(!Array.prototype.indexOf||-1!=[0,1].indexOf(1,2))Array.prototype.indexOf=function(a){var b=t&&"[object String]"==g(this)?this.split(""):
H(this),d=b.length>>>0;if(!d)return-1;var e=0;1<arguments.length&&(e=c(arguments[1]));for(e=0<=e?e:Math.max(0,d+e);e<d;e++)if(e in b&&b[e]===a)return e;return-1};if(!Array.prototype.lastIndexOf||-1!=[0,1].lastIndexOf(0,-3))Array.prototype.lastIndexOf=function(a){var b=t&&"[object String]"==g(this)?this.split(""):H(this),d=b.length>>>0;if(!d)return-1;var e=d-1;1<arguments.length&&(e=Math.min(e,c(arguments[1])));for(e=0<=e?e:d-Math.abs(e);0<=e;e--)if(e in b&&a===b[e])return e;return-1};Object.getPrototypeOf||
(Object.getPrototypeOf=function(a){return a.__proto__||(a.constructor?a.constructor.prototype:e)});Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(a,b){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+a);if(f(a,b)){var c,d,g;c={enumerable:!0,configurable:!0};if(n){var h=a.__proto__;a.__proto__=e;d=k(a,b);g=l(a,b);a.__proto__=h;if(d||g)return d&&(c.get=d),g&&(c.set=g),c}c.value=a[b];return c}});
Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)});if(!Object.create){var s;s=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var a={},b;for(b in a)a[b]=null;a.constructor=a.hasOwnProperty=a.propertyIsEnumerable=a.isPrototypeOf=a.toLocaleString=a.toString=a.valueOf=a.__proto__=null;return a};Object.create=function(a,b){var c;if(null===a)c=s();else{if("object"!=typeof a)throw new TypeError("typeof prototype["+typeof a+"] != 'object'");
c=function(){};c.prototype=a;c=new c;c.__proto__=a}void 0!==b&&Object.defineProperties(c,b);return c}}if(Object.defineProperty){var d=b({}),q="undefined"==typeof document||b(document.createElement("div"));if(!d||!q)var m=Object.defineProperty}if(!Object.defineProperty||m)Object.defineProperty=function(a,b,c){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.defineProperty called on non-object: "+a);if("object"!=typeof c&&"function"!=typeof c||null===c)throw new TypeError("Property description must be an object: "+
c);if(m)try{return m.call(Object,a,b,c)}catch(d){}if(f(c,"value"))if(n&&(k(a,b)||l(a,b))){var g=a.__proto__;a.__proto__=e;delete a[b];a[b]=c.value;a.__proto__=g}else a[b]=c.value;else{if(!n)throw new TypeError("getters & setters can not be defined on this javascript engine");f(c,"get")&&i(a,b,c.get);f(c,"set")&&j(a,b,c.set)}return a};Object.defineProperties||(Object.defineProperties=function(a,b){for(var c in b)f(b,c)&&Object.defineProperty(a,c,b[c]);return a});Object.seal||(Object.seal=function(a){return a});
Object.freeze||(Object.freeze=function(a){return a});try{Object.freeze(function(){})}catch(r){Object.freeze=function(a){return function(b){return"function"==typeof b?b:a(b)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(a){return a});Object.isSealed||(Object.isSealed=function(){return!1});Object.isFrozen||(Object.isFrozen=function(){return!1});Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)===a)throw new TypeError;for(var b="";f(a,b);)b+="?";a[b]=
!0;var c=f(a,b);delete a[b];return c});if(!Object.keys){var u=!0,w="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),y=w.length,v;for(v in{toString:null})u=!1;Object.keys=function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on a non-object");var b=[],c;for(c in a)f(a,c)&&b.push(c);if(u)for(c=0;c<y;c++){var d=w[c];f(a,d)&&b.push(d)}return b}}Date.now||(Date.now=function(){return(new Date).getTime()});
v="\t\n\x0B\u000c\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||v.trim()){v="["+v+"]";var z=RegExp("^"+v+v+"*"),E=RegExp(v+v+"*$");String.prototype.trim=function(){return(""+this).replace(z,"").replace(E,"")}}var H=function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)}});
ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(a){a("./regexp");a("./es5-shim")});
ace.define("ace/lib/dom",["require","exports","module"],function(a,b){"undefined"!=typeof document&&(b.getDocumentHead=function(a){a||(a=document);return a.head||a.getElementsByTagName("head")[0]||a.documentElement},b.createElement=function(a,b){return document.createElementNS?document.createElementNS(b||"http://www.w3.org/1999/xhtml",a):document.createElement(a)},b.hasCssClass=function(a,b){return-1!==(a.className||"").split(/\s+/g).indexOf(b)},b.addCssClass=function(a,d){b.hasCssClass(a,d)||(a.className+=
" "+d)},b.removeCssClass=function(a,b){for(var e=a.className.split(/\s+/g);;){var h=e.indexOf(b);if(-1==h)break;e.splice(h,1)}a.className=e.join(" ")},b.toggleCssClass=function(a,b){for(var e=a.className.split(/\s+/g),h=!0;;){var g=e.indexOf(b);if(-1==g)break;h=!1;e.splice(g,1)}h&&e.push(b);a.className=e.join(" ");return h},b.setCssClass=function(a,d,e){e?b.addCssClass(a,d):b.removeCssClass(a,d)},b.hasCssString=function(a,b){var e=0,h,b=b||document;if(b.createStyleSheet&&(h=b.styleSheets))for(;e<
h.length;){if(h[e++].owningElement.id===a)return!0}else if(h=b.getElementsByTagName("style"))for(;e<h.length;)if(h[e++].id===a)return!0;return!1},b.importCssString=function(a,d,e){e=e||document;if(d&&b.hasCssString(d,e))return null;var h;e.createStyleSheet?(h=e.createStyleSheet(),h.cssText=a,d&&(h.owningElement.id=d)):(h=e.createElementNS?e.createElementNS("http://www.w3.org/1999/xhtml","style"):e.createElement("style"),h.appendChild(e.createTextNode(a)),d&&(h.id=d),b.getDocumentHead(e).appendChild(h))},
b.importCssStylsheet=function(a,d){if(d.createStyleSheet)d.createStyleSheet(a);else{var e=b.createElement("link");e.rel="stylesheet";e.href=a;b.getDocumentHead(d).appendChild(e)}},b.getInnerWidth=function(a){return parseInt(b.computedStyle(a,"paddingLeft"),10)+parseInt(b.computedStyle(a,"paddingRight"),10)+a.clientWidth},b.getInnerHeight=function(a){return parseInt(b.computedStyle(a,"paddingTop"),10)+parseInt(b.computedStyle(a,"paddingBottom"),10)+a.clientHeight},void 0!==window.pageYOffset?(b.getPageScrollTop=
function(){return window.pageYOffset},b.getPageScrollLeft=function(){return window.pageXOffset}):(b.getPageScrollTop=function(){return document.body.scrollTop},b.getPageScrollLeft=function(){return document.body.scrollLeft}),b.computedStyle=window.getComputedStyle?function(a,b){return b?(window.getComputedStyle(a,"")||{})[b]||"":window.getComputedStyle(a,"")||{}}:function(a,b){return b?a.currentStyle[b]:a.currentStyle},b.scrollbarWidth=function(a){var d=b.createElement("ace_inner");d.style.width=
"100%";d.style.minWidth="0px";d.style.height="200px";d.style.display="block";var e=b.createElement("ace_outer"),h=e.style;h.position="absolute";h.left="-10000px";h.overflow="hidden";h.width="200px";h.minWidth="0px";h.height="150px";h.display="block";e.appendChild(d);a=a.documentElement;a.appendChild(e);var g=d.offsetWidth;h.overflow="scroll";d=d.offsetWidth;g==d&&(d=e.clientWidth);a.removeChild(e);return g-d},b.setInnerHtml=function(a,b){var e=a.cloneNode(!1);e.innerHTML=b;a.parentNode.replaceChild(e,
a);return e},"textContent"in document.documentElement?(b.setInnerText=function(a,b){a.textContent=b},b.getInnerText=function(a){return a.textContent}):(b.setInnerText=function(a,b){a.innerText=b},b.getInnerText=function(a){return a.innerText}),b.getParentWindow=function(a){return a.defaultView||a.parentWindow})});
ace.define("ace/lib/oop",["require","exports","module"],function(a,b){b.inherits=function(a,b){a.super_=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})};b.mixin=function(a,b){for(var e in b)a[e]=b[e];return a};b.implement=function(a,d){b.mixin(a,d)}});
ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(a,b){a("./fixoldbrowsers");var c=a("./oop"),d=function(){var a={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",
97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",
81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},b,d;for(d in a.FUNCTION_KEYS)b=a.FUNCTION_KEYS[d].toLowerCase(),a[b]=parseInt(d,10);for(d in a.PRINTABLE_KEYS)b=a.PRINTABLE_KEYS[d].toLowerCase(),a[b]=parseInt(d,10);c.mixin(a,a.MODIFIER_KEYS);c.mixin(a,a.PRINTABLE_KEYS);c.mixin(a,a.FUNCTION_KEYS);a.enter=a["return"];a.escape=a.esc;a.del=a["delete"];a[173]="-";(function(){for(var b=
["cmd","ctrl","alt","shift"],c=Math.pow(2,b.length);c--;)a.KEY_MODS[c]=b.filter(function(b){return c&a.KEY_MODS[b]}).join("-")+"-"})();a.KEY_MODS[0]="";a.KEY_MODS[-1]="input";return a}();c.mixin(b,d);b.keyCodeToString=function(a){var b=d[a];"string"!=typeof b&&(b=String.fromCharCode(a));return b.toLowerCase()}});
ace.define("ace/lib/useragent",["require","exports","module"],function(a,b){b.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"};b.getOS=function(){return b.isMac?b.OS.MAC:b.isLinux?b.OS.LINUX:b.OS.WINDOWS};if("object"==typeof navigator){var c=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),d=navigator.userAgent;b.isWin="win"==c;b.isMac="mac"==c;b.isLinux="linux"==c;b.isIE="Microsoft Internet Explorer"==navigator.appName||0<=navigator.appName.indexOf("MSAppHost")?parseFloat((d.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||
[])[1]):parseFloat((d.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]);b.isOldIE=b.isIE&&9>b.isIE;b.isGecko=b.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product;b.isOldGecko=b.isGecko&&4>parseInt((d.match(/rv\:(\d+)/)||[])[1],10);b.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera);b.isWebKit=parseFloat(d.split("WebKit/")[1])||void 0;b.isChrome=parseFloat(d.split(" Chrome/")[1])||void 0;b.isAIR=0<=d.indexOf("AdobeAIR");
b.isIPad=0<=d.indexOf("iPad");b.isTouchPad=0<=d.indexOf("TouchPad");b.isChromeOS=0<=d.indexOf(" CrOS ")}});
ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,b){function c(a,b,c){var l=h(b);if(!e.isMac&&g){if(g[91]||g[92])l|=8;if(g.altGr)if(3!=(3&l))g.altGr=0;else return;if(18===c||17===c){var n="location"in b?b.location:b.keyLocation;17===c&&1===n?f=b.timeStamp:18===c&&3===l&&2===n&&(n=-f,f=b.timeStamp,n+=f,3>n&&(g.altGr=!0))}}if(c in d.MODIFIER_KEYS){switch(d.MODIFIER_KEYS[c]){case "Alt":l=2;break;case "Shift":l=4;break;case "Ctrl":l=1;break;default:l=
8}c=-1}if(l&8&&(91===c||93===c))c=-1;if(l||!(13===c&&(n="location"in b?b.location:b.keyLocation,3===n&&(a(b,l,-c),b.defaultPrevented)))){if(e.isChromeOS&&l&8){a(b,l,c);if(b.defaultPrevented)return;l&=-9}return!l&&!(c in d.FUNCTION_KEYS)&&!(c in d.PRINTABLE_KEYS)?!1:a(b,l,c)}}var d=a("./keys"),e=a("./useragent");b.addListener=function(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1);if(a.attachEvent){var d=function(){c.call(a,window.event)};c._wrapper=d;a.attachEvent("on"+b,d)}};b.removeListener=
function(a,b,c){if(a.removeEventListener)return a.removeEventListener(b,c,!1);a.detachEvent&&a.detachEvent("on"+b,c._wrapper||c)};b.stopEvent=function(a){b.stopPropagation(a);b.preventDefault(a);return!1};b.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};b.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};b.getButton=function(a){return"dblclick"==a.type?0:"contextmenu"==a.type||e.isMac&&a.ctrlKey&&!a.altKey&&!a.shiftKey?2:a.preventDefault?
a.button:{1:0,2:2,4:1}[a.button]};b.capture=function(a,c,d){function e(a){c&&c(a);d&&d(a);b.removeListener(document,"mousemove",c,!0);b.removeListener(document,"mouseup",e,!0);b.removeListener(document,"dragstart",e,!0)}b.addListener(document,"mousemove",c,!0);b.addListener(document,"mouseup",e,!0);b.addListener(document,"dragstart",e,!0);return e};b.addMouseWheelListener=function(a,c){"onmousewheel"in a?b.addListener(a,"mousewheel",function(a){void 0!==a.wheelDeltaX?(a.wheelX=-a.wheelDeltaX/8,a.wheelY=
-a.wheelDeltaY/8):(a.wheelX=0,a.wheelY=-a.wheelDelta/8);c(a)}):"onwheel"in a?b.addListener(a,"wheel",function(a){switch(a.deltaMode){case a.DOM_DELTA_PIXEL:a.wheelX=0.35*a.deltaX||0;a.wheelY=0.35*a.deltaY||0;break;case a.DOM_DELTA_LINE:case a.DOM_DELTA_PAGE:a.wheelX=5*(a.deltaX||0),a.wheelY=5*(a.deltaY||0)}c(a)}):b.addListener(a,"DOMMouseScroll",function(a){a.axis&&a.axis==a.HORIZONTAL_AXIS?(a.wheelX=5*(a.detail||0),a.wheelY=0):(a.wheelX=0,a.wheelY=5*(a.detail||0));c(a)})};b.addMultiMouseDownListener=
function(a,c,d,f){var g=0,h,t,s,q={2:"dblclick",3:"tripleclick",4:"quadclick"};b.addListener(a,"mousedown",function(a){0!==b.getButton(a)?g=0:1<a.detail?(g++,4<g&&(g=1)):g=1;if(e.isIE){var i=5<Math.abs(a.clientX-h)||5<Math.abs(a.clientY-t);if(!s||i)g=1;s&&clearTimeout(s);s=setTimeout(function(){s=null},c[g-1]||600);1==g&&(h=a.clientX,t=a.clientY)}a._clicks=g;d[f]("mousedown",a);if(4<g)g=0;else if(1<g)return d[f](q[g],a)});e.isOldIE&&b.addListener(a,"dblclick",function(a){g=2;s&&clearTimeout(s);s=
setTimeout(function(){s=null},c[g-1]||600);d[f]("mousedown",a);d[f](q[g],a)})};var h=e.isMac&&e.isOpera&&!("KeyboardEvent"in window)?function(a){return 0|(a.metaKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.ctrlKey?8:0)}:function(a){return 0|(a.ctrlKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.metaKey?8:0)};b.getModifierString=function(a){return d.KEY_MODS[h(a)]};var g=null,f=0;b.addCommandKeyListener=function(a,d){var f=b.addListener;if(e.isOldGecko||e.isOpera&&!("KeyboardEvent"in window)){var h=null;
f(a,"keydown",function(a){h=a.keyCode});f(a,"keypress",function(a){return c(d,a,h)})}else{var n=null;f(a,"keydown",function(a){g[a.keyCode]=!0;var b=c(d,a,a.keyCode);n=a.defaultPrevented;return b});f(a,"keypress",function(a){if(n&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey))b.stopEvent(a),n=null});f(a,"keyup",function(a){g[a.keyCode]=null});g||(g=Object.create(null),f(window,"focus",function(){g=Object.create(null)}))}};window.postMessage&&!e.isOldIE&&(b.nextTick=function(a,c){c=c||window;b.addListener(c,
"message",function l(d){"zero-timeout-message-1"==d.data&&(b.stopPropagation(d),b.removeListener(c,"message",l),a())});c.postMessage("zero-timeout-message-1","*")});b.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;b.nextFrame=b.nextFrame?b.nextFrame.bind(window):function(a){setTimeout(a,17)}});
ace.define("ace/lib/lang",["require","exports","module"],function(a,b){b.last=function(a){return a[a.length-1]};b.stringReverse=function(a){return a.split("").reverse().join("")};b.stringRepeat=function(a,b){for(var c="";0<b;)if(b&1&&(c+=a),b>>=1)a+=a;return c};var c=/^\s\s*/,d=/\s\s*$/;b.stringTrimLeft=function(a){return a.replace(c,"")};b.stringTrimRight=function(a){return a.replace(d,"")};b.copyObject=function(a){var b={},c;for(c in a)b[c]=a[c];return b};b.copyArray=function(a){for(var b=[],c=
0,d=a.length;c<d;c++)b[c]=a[c]&&"object"==typeof a[c]?this.copyObject(a[c]):a[c];return b};b.deepCopy=function(a){if("object"!==typeof a||!a)return a;var c=a.constructor;if(c===RegExp)return a;var c=c(),d;for(d in a)c[d]="object"===typeof a[d]?b.deepCopy(a[d]):a[d];return c};b.arrayToMap=function(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=1;return b};b.createMap=function(a){var b=Object.create(null),c;for(c in a)b[c]=a[c];return b};b.arrayRemove=function(a,b){for(var c=0;c<=a.length;c++)b===a[c]&&
a.splice(c,1)};b.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")};b.escapeHTML=function(a){return a.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")};b.getMatchOffsets=function(a,b){var c=[];a.replace(b,function(a){c.push({offset:arguments[arguments.length-2],length:a.length})});return c};b.deferredCall=function(a){var b=null,c=function(){b=null;a()},d=function(a){d.cancel();b=setTimeout(c,a||0);return d};d.schedule=d;d.call=function(){this.cancel();
a();return d};d.cancel=function(){clearTimeout(b);b=null;return d};d.isPending=function(){return b};return d};b.delayedCall=function(a,b){var c=null,d=function(){c=null;a()},i=function(a){null==c&&(c=setTimeout(d,a||b))};i.delay=function(a){c&&clearTimeout(c);c=setTimeout(d,a||b)};i.schedule=i;i.call=function(){this.cancel();a()};i.cancel=function(){c&&clearTimeout(c);c=null};i.isPending=function(){return c};return i}});
ace.define("ace/keyboard/textinput","require exports module ace/lib/event ace/lib/useragent ace/lib/dom ace/lib/lang".split(" "),function(a,b){var c=a("../lib/event"),d=a("../lib/useragent"),e=a("../lib/dom"),h=a("../lib/lang"),g=d.isChrome<18,f=d.isIE;b.TextInput=function(a,b){function k(a){if(!m){if(K){b=0;a=a?0:o.value.length-1}else var b=a?2:1,a=2;try{o.setSelectionRange(b,a)}catch(c){}}}function l(){if(!m){o.value=t;d.isWebKit&&z.schedule()}}function n(){clearTimeout(ia);ia=setTimeout(function(){if(r){o.style.cssText=
r;r=""}if(b.renderer.$keepTextAreaAtCursor==null){b.renderer.$keepTextAreaAtCursor=true;b.renderer.$moveTextAreaToCursor()}},d.isOldIE?200:0)}var o=e.createElement("textarea");o.className="ace_text-input";d.isTouchPad&&o.setAttribute("x-palm-disable-auto-cap",true);o.wrap="off";o.autocorrect="off";o.autocapitalize="off";o.spellcheck=false;o.style.opacity="0";if(d.isOldIE)o.style.top="-100px";a.insertBefore(o,a.firstChild);var t="\u0001\u0001",s=false,q=false,m=false,r="",u=true;try{var w=document.activeElement===
o}catch(y){}c.addListener(o,"blur",function(a){b.onBlur(a);w=false});c.addListener(o,"focus",function(a){w=true;b.onFocus(a);k()});this.focus=function(){o.focus()};this.blur=function(){o.blur()};this.isFocused=function(){return w};var v=h.delayedCall(function(){w&&k(u)}),z=h.delayedCall(function(){if(!m){o.value=t;w&&k()}});d.isWebKit||b.addEventListener("changeSelection",function(){if(b.selection.isEmpty()!=u){u=!u;v.schedule()}});l();if(w)b.onFocus();var E=function(a){return a.selectionStart===
0&&a.selectionEnd===a.value.length};if(!o.setSelectionRange&&o.createTextRange){o.setSelectionRange=function(a,b){var c=this.createTextRange();c.collapse(true);c.moveStart("character",a);c.moveEnd("character",b);c.select()};E=function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?false:b.text==a.value}}if(d.isOldIE){var H=false,C=function(a){if(!H){var b=o.value;if(!m&&b&&b!=t){if(a&&b==t[0])return N.schedule();B(b);H=true;l();H=false}}},N=h.delayedCall(C);
c.addListener(o,"propertychange",C);var T={13:1,27:1};c.addListener(o,"keyup",function(a){m&&(!o.value||T[a.keyCode])&&setTimeout(I,0);if((o.value.charCodeAt(0)||0)<129)return N.call();m?D():V()});c.addListener(o,"keydown",function(){N.schedule(50)})}var K=null;this.setInputHandler=function(a){K=a};this.getInputHandler=function(){return K};var G=false,B=function(a){if(K){a=K(a);K=null}if(q){k();if(a)b.onPaste(a);q=false}else if(a==t.charAt(0))G?b.execCommand("del",{source:"ace"}):b.execCommand("backspace",
{source:"ace"});else{a.substring(0,2)==t?a=a.substr(2):a.charAt(0)==t.charAt(0)?a=a.substr(1):a.charAt(a.length-1)==t.charAt(0)&&(a=a.slice(0,-1));a.charAt(a.length-1)==t.charAt(0)&&(a=a.slice(0,-1));if(a)b.onTextInput(a)}G&&(G=false)},W=function(a,b){var c=a.clipboardData||window.clipboardData;if(c&&!g){var d=f?"Text":"text/plain";return b?c.setData(d,b)!==false:c.getData(d)}},J=function(a,d){var e=b.getCopyText();if(!e)return c.preventDefault(a);if(W(a,e)){d?b.onCut():b.onCopy();c.preventDefault(a)}else{s=
true;o.value=e;o.select();setTimeout(function(){s=false;l();k();d?b.onCut():b.onCopy()})}},Q=function(a){J(a,true)},X=function(a){J(a,false)},S=function(a){var e=W(a);if(typeof e=="string"){if(e)b.onPaste(e);d.isIE&&setTimeout(k);c.preventDefault(a)}else{o.value="";q=true}};c.addCommandKeyListener(o,b.onCommandKey.bind(b));c.addListener(o,"select",function(){if(s)s=false;else if(E(o)){b.selectAll();k()}else K&&k(b.selection.isEmpty())});c.addListener(o,"input",function(){if(!m){B(o.value);l()}});
c.addListener(o,"cut",Q);c.addListener(o,"copy",X);c.addListener(o,"paste",S);(!("oncut"in o)||!("oncopy"in o)||!("onpaste"in o))&&c.addListener(a,"keydown",function(a){if((!d.isMac||a.metaKey)&&a.ctrlKey)switch(a.keyCode){case 67:X(a);break;case 86:S(a);break;case 88:Q(a)}});var V=function(){if(!m&&b.onCompositionStart&&!b.$readOnly){m={};b.onCompositionStart();setTimeout(D,0);b.on("mousedown",I);if(!b.selection.isEmpty()){b.insert("");b.session.markUndoGroup();b.selection.clearSelection()}b.session.markUndoGroup()}},
D=function(){if(m&&b.onCompositionUpdate&&!b.$readOnly){var a=o.value.replace(/\x01/g,"");if(m.lastValue!==a){b.onCompositionUpdate(a);m.lastValue&&b.undo();m.lastValue=a;if(m.lastValue){a=b.selection.getRange();b.insert(m.lastValue);b.session.markUndoGroup();m.range=b.selection.getRange();b.selection.setRange(a);b.selection.clearSelection()}}}},I=function(a){if(b.onCompositionEnd&&!b.$readOnly){var c=m;m=false;var d=setTimeout(function(){d=null;var a=o.value.replace(/\x01/g,"");if(!m)if(a==c.lastValue)l();
else if(!c.lastValue&&a){l();B(a)}});K=function(a){d&&clearTimeout(d);a=a.replace(/\x01/g,"");if(a==c.lastValue)return"";c.lastValue&&d&&b.undo();return a};b.onCompositionEnd();b.removeListener("mousedown",I);a.type=="compositionend"&&c.range&&b.selection.setRange(c.range)}},O=h.delayedCall(D,50);c.addListener(o,"compositionstart",V);if(d.isGecko)c.addListener(o,"text",function(){O.schedule()});else{c.addListener(o,"keyup",function(){O.schedule()});c.addListener(o,"keydown",function(){O.schedule()})}c.addListener(o,
"compositionend",I);this.getElement=function(){return o};this.setReadOnly=function(a){o.readOnly=a};this.onContextMenu=function(a){G=true;k(b.selection.isEmpty());b._emit("nativecontextmenu",{target:b,domEvent:a});this.moveToMouse(a,true)};this.moveToMouse=function(a,f){if(f||!d.isOldIE){if(!r)r=o.style.cssText;o.style.cssText=(f?"z-index:100000;":"")+"height:"+o.style.height+";"+(d.isIE?"opacity:0.1;":"");var g=b.container.getBoundingClientRect(),h=e.computedStyle(b.container),i=g.top+(parseInt(h.borderTopWidth)||
0),k=g.left+(parseInt(g.borderLeftWidth)||0),l=g.bottom-i-o.clientHeight-2,g=function(a){o.style.left=a.clientX-k-2+"px";o.style.top=Math.min(a.clientY-i-2,l)+"px"};g(a);if(a.type=="mousedown"){if(b.renderer.$keepTextAreaAtCursor)b.renderer.$keepTextAreaAtCursor=null;d.isWin&&!d.isOldIE&&c.capture(b.container,g,n)}}};this.onContextMenuClose=n;var ia,C=function(a){b.textInput.onContextMenu(a);n()};c.addListener(b.renderer.scroller,"contextmenu",C);c.addListener(o,"contextmenu",C)}});
ace.define("ace/mouse/default_handlers","require exports module ace/lib/dom ace/lib/event ace/lib/useragent".split(" "),function(a,b){function c(a){a.$clickSelection=null;var b=a.editor;b.setDefaultHandler("mousedown",this.onMouseDown.bind(a));b.setDefaultHandler("dblclick",this.onDoubleClick.bind(a));b.setDefaultHandler("tripleclick",this.onTripleClick.bind(a));b.setDefaultHandler("quadclick",this.onQuadClick.bind(a));b.setDefaultHandler("mousewheel",this.onMouseWheel.bind(a));["select","startSelect",
"selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(b){a[b]=this[b]},this);a.selectByLines=this.extendSelectionBy.bind(a,"getLineRange");a.selectByWords=this.extendSelectionBy.bind(a,"getWordRange")}function d(a,b){return(a.start.row==a.end.row?2*b.column-a.start.column-a.end.column:a.start.row==a.end.row-1&&!a.start.column&&!a.end.column?b.column-4:2*b.row-a.start.row-a.end.row)<0?{cursor:a.start,anchor:a.end}:{cursor:a.end,anchor:a.start}}
a("../lib/dom");a("../lib/event");a("../lib/useragent");(function(){this.onMouseDown=function(a){var b=a.inSelection(),c=a.getDocumentPosition();this.mousedownEvent=a;var d=this.editor;if(a.getButton()!==0){d.getSelectionRange().isEmpty()&&d.selection.moveToPosition(c);d.textInput.onContextMenu(a.domEvent)}else{this.mousedownEvent.time=Date.now();if(b&&!d.isFocused()){d.focus();if(this.$focusTimout&&!this.$clickSelection&&!d.inMultiSelectMode){this.setState("focusWait");this.captureMouse(a);return}}this.captureMouse(a);
this.startSelect(c,a.domEvent._clicks>1);return a.preventDefault()}};this.startSelect=function(a,b){var a=a||this.editor.renderer.screenToTextCoordinates(this.x,this.y),c=this.editor;this.mousedownEvent.getShiftKey()?c.selection.selectToPosition(a):b||c.selection.moveToPosition(a);b||this.select();c.renderer.scroller.setCapture&&c.renderer.scroller.setCapture();c.setStyle("ace_selecting");this.setState("select")};this.select=function(){var a,b=this.editor,c=b.renderer.screenToTextCoordinates(this.x,
this.y);if(this.$clickSelection){a=this.$clickSelection.comparePoint(c);if(a==-1)a=this.$clickSelection.end;else if(a==1)a=this.$clickSelection.start;else{a=d(this.$clickSelection,c);c=a.cursor;a=a.anchor}b.selection.setSelectionAnchor(a.row,a.column)}b.selection.selectToPosition(c);b.renderer.scrollCursorIntoView()};this.extendSelectionBy=function(a){var b,c=this.editor,f=c.renderer.screenToTextCoordinates(this.x,this.y),a=c.selection[a](f.row,f.column);if(this.$clickSelection){b=this.$clickSelection.comparePoint(a.start);
var i=this.$clickSelection.comparePoint(a.end);if(b==-1&&i<=0){b=this.$clickSelection.end;if(a.end.row!=f.row||a.end.column!=f.column)f=a.start}else if(i==1&&b>=0){b=this.$clickSelection.start;if(a.start.row!=f.row||a.start.column!=f.column)f=a.end}else if(b==-1&&i==1){f=a.end;b=a.start}else{a=d(this.$clickSelection,f);f=a.cursor;b=a.anchor}c.selection.setSelectionAnchor(b.row,b.column)}c.selection.selectToPosition(f);c.renderer.scrollCursorIntoView()};this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=
this.selectByLinesEnd=function(){this.$clickSelection=null;this.editor.unsetStyle("ace_selecting");this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()};this.focusWait=function(){var a=Math.sqrt(Math.pow(this.x-this.mousedownEvent.x,2)+Math.pow(this.y-this.mousedownEvent.y,2)),b=Date.now();(a>0||b-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())};this.onDoubleClick=function(a){var a=a.getDocumentPosition(),
b=this.editor,c=b.session.getBracketRange(a);if(c){if(c.isEmpty()){c.start.column--;c.end.column++}this.setState("select")}else{c=b.selection.getWordRange(a.row,a.column);this.setState("selectByWords")}this.$clickSelection=c;this.select()};this.onTripleClick=function(a){var a=a.getDocumentPosition(),b=this.editor;this.setState("selectByLines");var c=b.getSelectionRange();if(c.isMultiLine()&&c.contains(a.row,a.column)){this.$clickSelection=b.selection.getLineRange(c.start.row);this.$clickSelection.end=
b.selection.getLineRange(c.end.row).end}else this.$clickSelection=b.selection.getLineRange(a.row);this.select()};this.onQuadClick=function(){var a=this.editor;a.selectAll();this.$clickSelection=a.getSelectionRange();this.setState("selectAll")};this.onMouseWheel=function(a){if(!a.getAccelKey()){if(a.getShiftKey()&&a.wheelY&&!a.wheelX){a.wheelX=a.wheelY;a.wheelY=0}var b=a.domEvent.timeStamp,c=b-(this.$lastScrollTime||0),d=this.editor;if(d.renderer.isScrollableBy(a.wheelX*a.speed,a.wheelY*a.speed)||
c<200){this.$lastScrollTime=b;d.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed);return a.stop()}}}}).call(c.prototype);b.DefaultHandlers=c});
ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(a,b){function c(a){this.isOpen=!1;this.$element=null;this.$parentNode=a}a("./lib/oop");var d=a("./lib/dom");(function(){this.$init=function(){this.$element=d.createElement("div");this.$element.className="ace_tooltip";this.$element.style.display="none";this.$parentNode.appendChild(this.$element);return this.$element};this.getElement=function(){return this.$element||this.$init()};this.setText=function(a){d.setInnerText(this.getElement(),
a)};this.setHtml=function(a){this.getElement().innerHTML=a};this.setPosition=function(a,b){this.getElement().style.left=a+"px";this.getElement().style.top=b+"px"};this.setClassName=function(a){d.addCssClass(this.getElement(),a)};this.show=function(a,b,c){null!=a&&this.setText(a);null!=b&&null!=c&&this.setPosition(b,c);this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)};this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)};this.getHeight=function(){return this.getElement().offsetHeight};
this.getWidth=function(){return this.getElement().offsetWidth}}).call(c.prototype);b.Tooltip=c});
ace.define("ace/mouse/default_gutter_handler","require exports module ace/lib/dom ace/lib/oop ace/lib/event ace/tooltip".split(" "),function(a,b){function c(a){g.call(this,a)}var d=a("../lib/dom"),e=a("../lib/oop"),h=a("../lib/event"),g=a("../tooltip").Tooltip;e.inherits(c,g);(function(){this.setPosition=function(a,b){var c=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight,e=this.getWidth(),h=this.getHeight(),a=a+15,b=b+15;a+e>c&&(a=
a-(a+e-c));b+h>d&&(b=b-(20+h));g.prototype.setPosition.call(this,a,b)}}).call(c.prototype);b.GutterHandler=function(a){function b(){n&&(n=clearTimeout(n));if(t){l.hide();t=null;e.removeEventListener("mousewheel",b)}}var e=a.editor,g=e.renderer.$gutterLayer,l=new c(e.container);a.editor.setDefaultHandler("guttermousedown",function(b){if(e.isFocused()&&b.getButton()==0&&g.getRegion(b)!="foldWidgets"){var c=b.getDocumentPosition().row,d=e.session.selection;if(b.getShiftKey())d.selectTo(c,0);else{if(b.domEvent.detail==
2){e.selectAll();return b.preventDefault()}a.$clickSelection=e.selection.getLineRange(c)}a.setState("selectByLines");a.captureMouse(b);return b.preventDefault()}});var n,o,t;a.editor.setDefaultHandler("guttermousemove",function(c){if(d.hasCssClass(c.domEvent.target||c.domEvent.srcElement,"ace_fold-widget"))return b();t&&a.$tooltipFollowsMouse&&l.setPosition(c.x,c.y);o=c;n||(n=setTimeout(function(){n=null;if(o&&!a.isMousePressed)a:{var c=o.getDocumentPosition().row,d=g.$annotations[c];if(d){var h=
e.session.getLength();if(c==h){var h=e.renderer.pixelToScreenCoordinates(0,o.y).row,u=o.$pos;if(h>e.session.documentToScreenRow(u.row,u.column)){b();break a}}if(t!=d){t=d.text.join("<br/>");l.setHtml(t);l.show();e.on("mousewheel",b);if(a.$tooltipFollowsMouse)l.setPosition(o.x,o.y);else{c=g.$cells[e.session.documentToScreenRow(c,0)].element.getBoundingClientRect();d=l.getElement().style;d.left=c.right+"px";d.top=c.bottom+"px"}}}else b()}else b()},50))});h.addListener(e.renderer.$gutter,"mouseout",
function(){o=null;t&&!n&&(n=setTimeout(function(){n=null;b()},50))});e.on("changeSession",b)}});
ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(a,b){var c=a("../lib/event"),d=a("../lib/useragent");(function(){this.stopPropagation=function(){c.stopPropagation(this.domEvent);this.propagationStopped=!0};this.preventDefault=function(){c.preventDefault(this.domEvent);this.defaultPrevented=!0};this.stop=function(){this.stopPropagation();this.preventDefault()};this.getDocumentPosition=function(){return this.$pos?this.$pos:this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,
this.clientY)};this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var a=this.editor.getSelectionRange();if(a.isEmpty())this.$inSelection=!1;else{var b=this.getDocumentPosition();this.$inSelection=a.contains(b.row,b.column)}return this.$inSelection};this.getButton=function(){return c.getButton(this.domEvent)};this.getShiftKey=function(){return this.domEvent.shiftKey};this.getAccelKey=d.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call((b.MouseEvent=
function(a,b){this.domEvent=a;this.editor=b;this.x=this.clientX=a.clientX;this.y=this.clientY=a.clientY;this.$inSelection=this.$pos=null;this.defaultPrevented=this.propagationStopped=!1}).prototype)});
ace.define("ace/mouse/dragdrop_handler","require exports module ace/lib/dom ace/lib/event ace/lib/useragent".split(" "),function(a,b){function c(a){function b(){var a=C,c=C=r.renderer.screenToTextCoordinates(v,z),d=Date.now(),e=!a||c.row!=a.row,h=!a||c.column!=a.column;if(!B||e||h){r.$blockScrolling=r.$blockScrolling+1;r.moveCursorToPosition(c);r.$blockScrolling=r.$blockScrolling-1;B=d;q=v;m=z}else if(Math.sqrt(Math.pow(v-q,2)+Math.pow(z-m,2))>i)B=null;else if(d-B>=f){r.renderer.scrollCursorIntoView();
B=null}var c=C,d=Date.now(),h=r.renderer.layerConfig.lineHeight,j=r.renderer.layerConfig.characterWidth,e=r.renderer.scroller.getBoundingClientRect(),k=v-e.left,l=e.right-v,o=z-e.top,n=e.bottom-z,u=Math.min(k,l),s=Math.min(o,n),e={row:c.row,column:c.column};if(u/j<=2)e.column=e.column+(k<l?-3:2);if(s/h<=1)e.row=e.row+(o<n?-1:1);h=c.column!=e.column;a=!a||c.row!=a.row;c.row!=e.row||h&&!a?G?d-G>=g&&r.renderer.scrollCursorIntoView(e):G=d:G=null}function c(){H=r.selection.toOrientedRange();y=r.session.addMarker(H,
"ace_selection",r.getSelectionStyle());r.clearSelection();r.isFocused()&&r.renderer.$cursorLayer.setBlinking(false);clearInterval(E);b();E=setInterval(b,20);N=0;e.addListener(document,"mousemove",o)}function n(){clearInterval(E);r.session.removeMarker(y);y=null;r.$blockScrolling=r.$blockScrolling+1;r.selection.fromOrientedRange(H);r.$blockScrolling=r.$blockScrolling-1;r.isFocused()&&!K&&r.renderer.$cursorLayer.setBlinking(!r.getReadOnly());C=H=null;N=0;B=G=null;e.removeListener(document,"mousemove",
o)}function o(){W==null&&(W=setTimeout(function(){W!=null&&y&&n()},20))}function t(a){a=a.types;return!a||Array.prototype.some.call(a,function(a){return a=="text/plain"||a=="Text"})}function s(a){var b=["copy","copymove","all","uninitialized"],c=["move","copymove","linkmove","all","uninitialized"],d=h.isMac?a.altKey:a.ctrlKey,e="uninitialized";try{e=a.dataTransfer.effectAllowed.toLowerCase()}catch(f){}a="none";d&&b.indexOf(e)>=0?a="copy":c.indexOf(e)>=0?a="move":b.indexOf(e)>=0&&(a="copy");return a}
var q,m,r=a.editor,u=d.createElement("img");u.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(h.isOpera)u.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;";["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(b){a[b]=this[b]},this);r.addEventListener("mousedown",this.onMouseDown.bind(a));var w=r.container,y,v,z,E,H,C,N=0,T,K,G,B;this.onDragStart=function(a){if(this.cancelDrag||!w.draggable){var b=
this;setTimeout(function(){b.startSelect();b.captureMouse(a)},0);return a.preventDefault()}H=r.getSelectionRange();var c=a.dataTransfer;c.effectAllowed=r.getReadOnly()?"copy":"copyMove";if(h.isOpera){r.container.appendChild(u);u.scrollTop=0}c.setDragImage&&c.setDragImage(u,0,0);h.isOpera&&r.container.removeChild(u);c.clearData();c.setData("Text",r.session.getTextRange());K=true;this.setState("drag")};this.onDragEnd=function(a){K=w.draggable=false;this.setState(null);if(!r.getReadOnly()){a=a.dataTransfer.dropEffect;
!T&&a=="move"&&r.session.remove(r.getSelectionRange());r.renderer.$cursorLayer.setBlinking(true)}this.editor.unsetStyle("ace_dragging");this.editor.renderer.setCursorStyle("")};this.onDragEnter=function(a){if(!r.getReadOnly()&&t(a.dataTransfer)){v=a.clientX;z=a.clientY;y||c();N++;a.dataTransfer.dropEffect=T=s(a);return e.preventDefault(a)}};this.onDragOver=function(a){if(!r.getReadOnly()&&t(a.dataTransfer)){v=a.clientX;z=a.clientY;if(!y){c();N++}W!==null&&(W=null);a.dataTransfer.dropEffect=T=s(a);
return e.preventDefault(a)}};this.onDragLeave=function(a){N--;if(N<=0&&y){n();T=null;return e.preventDefault(a)}};this.onDrop=function(a){if(C){var b=a.dataTransfer;if(K)switch(T){case "move":H=H.contains(C.row,C.column)?{start:C,end:C}:r.moveText(H,C);break;case "copy":H=r.moveText(H,C,true)}else{b=b.getData("Text");H={start:C,end:r.session.insert(C,b)};r.focus();T=null}n();return e.preventDefault(a)}};e.addListener(w,"dragstart",this.onDragStart.bind(a));e.addListener(w,"dragend",this.onDragEnd.bind(a));
e.addListener(w,"dragenter",this.onDragEnter.bind(a));e.addListener(w,"dragover",this.onDragOver.bind(a));e.addListener(w,"dragleave",this.onDragLeave.bind(a));e.addListener(w,"drop",this.onDrop.bind(a));var W=null}var d=a("../lib/dom"),e=a("../lib/event"),h=a("../lib/useragent"),g=200,f=200,i=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()};this.dragWaitEnd=function(){this.editor.container.draggable=false;this.startSelect(this.mousedownEvent.getDocumentPosition());
this.selectEnd()};this.dragReadyEnd=function(){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly());this.editor.unsetStyle("ace_dragging");this.editor.renderer.setCursorStyle("");this.dragWaitEnd()};this.startDrag=function(){this.cancelDrag=false;var a=this.editor;a.container.draggable=true;a.renderer.$cursorLayer.setBlinking(false);a.setStyle("ace_dragging");a.renderer.setCursorStyle(h.isWin?"default":"move");this.setState("dragReady")};this.onMouseDrag=function(){var a=this.editor.container;
if(h.isIE&&this.state=="dragReady"){var b=Math.sqrt(Math.pow(this.x-this.mousedownEvent.x,2)+Math.pow(this.y-this.mousedownEvent.y,2));b>3&&a.dragDrop()}if(this.state==="dragWait"){b=Math.sqrt(Math.pow(this.x-this.mousedownEvent.x,2)+Math.pow(this.y-this.mousedownEvent.y,2));if(b>0){a.draggable=false;this.startSelect(this.mousedownEvent.getDocumentPosition())}}};this.onMouseDown=function(a){if(this.$dragEnabled){this.mousedownEvent=a;var b=this.editor,c=a.inSelection(),d=a.getButton();if((a.domEvent.detail||
1)===1&&d===0&&c)if(!a.editor.inMultiSelectMode||!a.getAccelKey()&&!a.getShiftKey()){this.mousedownEvent.time=Date.now();c=a.domEvent.target||a.domEvent.srcElement;if("unselectable"in c)c.unselectable="on";if(b.getDragDelay()){if(h.isWebKit){this.cancelDrag=true;b.container.draggable=true}this.setState("dragWait")}else this.startDrag();this.captureMouse(a,this.onMouseDrag.bind(this));a.defaultPrevented=true}}}}).call(c.prototype);b.DragdropHandler=c});
ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(a,b){var c=a("./dom");b.get=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.onreadystatechange=function(){4===c.readyState&&b(c.responseText)};c.send(null)};b.loadScript=function(a,b){var h=c.getDocumentHead(),g=document.createElement("script");g.src=a;h.appendChild(g);g.onload=g.onreadystatechange=function(a,c){if(c||!g.readyState||"loaded"==g.readyState||"complete"==g.readyState)g=g.onload=g.onreadystatechange=
null,c||b()}};b.qualifyURL=function(a){var b=document.createElement("a");b.href=a;return b.href}});
ace.define("ace/lib/event_emitter",["require","exports","module"],function(a,b){var c={},d=function(){this.propagationStopped=!0},e=function(){this.defaultPrevented=!0};c._emit=c._dispatchEvent=function(a,b){this._eventRegistry||(this._eventRegistry={});this._defaultHandlers||(this._defaultHandlers={});var c=this._eventRegistry[a]||[],i=this._defaultHandlers[a];if(c.length||i){if("object"!=typeof b||!b)b={};b.type||(b.type=a);b.stopPropagation||(b.stopPropagation=d);b.preventDefault||(b.preventDefault=
e);for(var c=c.slice(),j=0;j<c.length&&!(c[j](b,this),b.propagationStopped);j++);if(i&&!b.defaultPrevented)return i(b,this)}};c._signal=function(a,b){var c=(this._eventRegistry||{})[a];if(c)for(var c=c.slice(),d=0;d<c.length;d++)c[d](b,this)};c.once=function(a,b){var c=this;b&&this.addEventListener(a,function j(){c.removeEventListener(a,j);b.apply(null,arguments)})};c.setDefaultHandler=function(a,b){var c=this._defaultHandlers;c||(c=this._defaultHandlers={_disabled_:{}});if(c[a]){var d=c[a],e=c._disabled_[a];
e||(c._disabled_[a]=e=[]);e.push(d);d=e.indexOf(b);-1!=d&&e.splice(d,1)}c[a]=b};c.removeDefaultHandler=function(a,b){var c=this._defaultHandlers;if(c){var d=c._disabled_[a];c[a]==b?d&&this.setDefaultHandler(a,d.pop()):d&&(c=d.indexOf(b),-1!=c&&d.splice(c,1))}};c.on=c.addEventListener=function(a,b,c){this._eventRegistry=this._eventRegistry||{};var d=this._eventRegistry[a];d||(d=this._eventRegistry[a]=[]);if(-1==d.indexOf(b))d[c?"unshift":"push"](b);return b};c.off=c.removeListener=c.removeEventListener=
function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}};c.removeAllListeners=function(a){this._eventRegistry&&(this._eventRegistry[a]=[])};b.EventEmitter=c});
ace.define("ace/config","require exports module ace/lib/lang ace/lib/oop ace/lib/net ace/lib/event_emitter".split(" "),function(a,b,c){function d(d){k.packaged=d||a.packaged||c.packaged||j.define&&define.packaged;if(!j.document)return"";for(var d={},f="",g=document.currentScript||document._currentScript,g=(g&&g.ownerDocument||document).getElementsByTagName("script"),h=0;h<g.length;h++){var i=g[h],l=i.src||i.getAttribute("src");if(l){for(var i=i.attributes,n=0,w=i.length;n<w;n++){var y=i[n];if(y.name.indexOf("data-ace-")===
0)d[e(y.name.replace(/^data-ace-/,""))]=y.value}(l=l.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/))&&(f=l[1])}}if(f){d.base=d.base||f;d.packaged=true}d.basePath=d.base;d.workerPath=d.workerPath||d.base;d.modePath=d.modePath||d.base;d.themePath=d.themePath||d.base;delete d.base;for(var v in d)typeof d[v]!=="undefined"&&b.set(v,d[v])}function e(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}"no use strict";var h=a("./lib/lang"),g=a("./lib/oop"),f=a("./lib/net"),i=a("./lib/event_emitter").EventEmitter,
j=function(){return this}(),k={packaged:false,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};b.get=function(a){if(!k.hasOwnProperty(a))throw Error("Unknown config key: "+a);return k[a]};b.set=function(a,b){if(!k.hasOwnProperty(a))throw Error("Unknown config key: "+a);k[a]=b};b.all=function(){return h.copyObject(k)};g.implement(b,i);b.moduleUrl=function(a,b){if(k.$moduleUrls[a])return k.$moduleUrls[a];var c=a.split("/"),b=b||c[c.length-2]||"",d=b=="snippets"?
"/":"-",e=c[c.length-1];b=="worker"&&d=="-"&&(e=e.replace(RegExp("^"+b+"[\\-_]|[\\-_]"+b+"$","g"),""));if((!e||e==b)&&c.length>1)e=c[c.length-2];c=k[b+"Path"];c==null?c=k.basePath:d=="/"&&(b=d="");c&&c.slice(-1)!="/"&&(c=c+"/");return c+b+d+e+this.get("suffix")};b.setModuleUrl=function(a,b){return k.$moduleUrls[a]=b};b.$loading={};b.loadModule=function(c,d){var e,g;if(Array.isArray(c)){g=c[0];c=c[1]}try{e=a(c)}catch(h){}if(e&&!b.$loading[c])return d&&d(e);b.$loading[c]||(b.$loading[c]=[]);b.$loading[c].push(d);
if(!(b.$loading[c].length>1)){e=function(){a([c],function(a){b._emit("load.module",{name:c,module:a});var d=b.$loading[c];b.$loading[c]=null;d.forEach(function(b){b&&b(a)})})};if(!b.get("packaged"))return e();f.loadScript(b.moduleUrl(c,g),e)}};d(true);b.init=d;var l={setOptions:function(a){Object.keys(a).forEach(function(b){this.setOption(b,a[b])},this)},getOptions:function(a){var b={};if(a){if(!Array.isArray(a)){b=a;a=Object.keys(b)}}else a=Object.keys(this.$options);a.forEach(function(a){b[a]=this.getOption(a)},
this);return b},setOption:function(a,b){if(this["$"+a]!==b){var c=this.$options[a];if(c){if(c.forwardTo)return this[c.forwardTo]&&this[c.forwardTo].setOption(a,b);c.handlesSet||(this["$"+a]=b);c&&c.set&&c.set.call(this,b)}else typeof console!="undefined"&&console.warn&&console.warn('misspelled option "'+a+'"')}},getOption:function(a){var b=this.$options[a];if(b)return b.forwardTo?this[b.forwardTo]&&this[b.forwardTo].getOption(a):b&&b.get?b.get.call(this):this["$"+a];typeof console!="undefined"&&console.warn&&
console.warn('misspelled option "'+a+'"')}},n={};b.defineOptions=function(a,b,c){if(!a.$options)n[b]=a.$options={};Object.keys(c).forEach(function(b){var d=c[b];typeof d=="string"&&(d={forwardTo:d});d.name||(d.name=b);a.$options[d.name]=d;if("initialValue"in d)a["$"+d.name]=d.initialValue});g.implement(a,l);return this};b.resetOptions=function(a){Object.keys(a.$options).forEach(function(b){var c=a.$options[b];"value"in c&&a.setOption(b,c.value)})};b.setDefaultValue=function(a,c,d){a=n[a]||(n[a]={});
if(a[c])a.forwardTo?b.setDefaultValue(a.forwardTo,c,d):a[c].value=d};b.setDefaultValues=function(a,c){Object.keys(c).forEach(function(d){b.setDefaultValue(a,d,c[d])})}});
ace.define("ace/mouse/mouse_handler","require exports module ace/lib/event ace/lib/useragent ace/mouse/default_handlers ace/mouse/default_gutter_handler ace/mouse/mouse_event ace/mouse/dragdrop_handler ace/config".split(" "),function(a,b){var c=a("../lib/event"),d=a("../lib/useragent"),e=a("./default_handlers").DefaultHandlers,h=a("./default_gutter_handler").GutterHandler,g=a("./mouse_event").MouseEvent,f=a("./dragdrop_handler").DragdropHandler,i=a("../config"),j=function(a){var b=this;this.editor=
a;new e(this);new h(this);new f(this);var g=function(b){!a.isFocused()&&a.textInput&&a.textInput.moveToMouse(b);a.focus()},i=a.renderer.getMouseEventTarget();c.addListener(i,"click",this.onMouseEvent.bind(this,"click"));c.addListener(i,"mousemove",this.onMouseMove.bind(this,"mousemove"));c.addMultiMouseDownListener(i,[400,300,250],this,"onMouseEvent");if(a.renderer.scrollBarV){c.addMultiMouseDownListener(a.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent");c.addMultiMouseDownListener(a.renderer.scrollBarH.inner,
[400,300,250],this,"onMouseEvent");if(d.isIE){c.addListener(a.renderer.scrollBarV.element,"mousedown",g);c.addListener(a.renderer.scrollBarH.element,"mousemove",g)}}c.addMouseWheelListener(a.container,this.onMouseWheel.bind(this,"mousewheel"));var j=a.renderer.$gutter;c.addListener(j,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"));c.addListener(j,"click",this.onMouseEvent.bind(this,"gutterclick"));c.addListener(j,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"));c.addListener(j,
"mousemove",this.onMouseEvent.bind(this,"guttermousemove"));c.addListener(i,"mousedown",g);c.addListener(j,"mousedown",function(b){a.focus();return c.preventDefault(b)});a.on("mousemove",function(c){if(!b.state&&!b.$dragDelay&&b.$dragEnabled){var c=a.renderer.screenToTextCoordinates(c.x,c.y),d=a.session.selection.getRange(),e=a.renderer;!d.isEmpty()&&d.insideStart(c.row,c.column)?e.setCursorStyle("default"):e.setCursorStyle("")}})};(function(){this.onMouseEvent=function(a,b){this.editor._emit(a,new g(b,
this.editor))};this.onMouseMove=function(a,b){var c=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;c&&c.length&&this.editor._emit(a,new g(b,this.editor))};this.onMouseWheel=function(a,b){var c=new g(b,this.editor);c.speed=this.$scrollSpeed*2;c.wheelX=b.wheelX;c.wheelY=b.wheelY;this.editor._emit(a,c)};this.setState=function(a){this.state=a};this.captureMouse=function(a,b){this.x=a.x;this.y=a.y;this.isMousePressed=true;var e=this.editor.renderer;if(e.$keepTextAreaAtCursor)e.$keepTextAreaAtCursor=
null;var f=this,h=function(a){if(a){if(d.isWebKit&&!a.which&&f.releaseMouse)return f.releaseMouse();f.x=a.clientX;f.y=a.clientY;b&&b(a);f.mouseEvent=new g(a,f.editor);f.$mouseMoved=true}},i=function(a){clearInterval(m);j();f[f.state+"End"]&&f[f.state+"End"](a);f.state="";if(e.$keepTextAreaAtCursor==null){e.$keepTextAreaAtCursor=true;e.$moveTextAreaToCursor()}f.isMousePressed=false;f.$onCaptureMouseMove=f.releaseMouse=null;a&&f.onMouseEvent("mouseup",a)},j=function(){f[f.state]&&f[f.state]();f.$mouseMoved=
false};if(d.isOldIE&&a.domEvent.type=="dblclick")return setTimeout(function(){i(a)});f.$onCaptureMouseMove=h;f.releaseMouse=c.capture(this.editor.container,h,i);var m=setInterval(j,20)};this.releaseMouse=null;this.cancelContextMenu=function(){var a=function(b){if(!b||!(b.domEvent&&b.domEvent.type!="contextmenu")){this.editor.off("nativecontextmenu",a);b&&b.domEvent&&c.stopEvent(b.domEvent)}}.bind(this);setTimeout(a,10);this.editor.on("nativecontextmenu",a)}}).call(j.prototype);i.defineOptions(j.prototype,
"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:d.isMac?150:0},dragEnabled:{initialValue:true},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:true}});b.MouseHandler=j});
ace.define("ace/mouse/fold_handler",["require","exports","module"],function(a,b){b.FoldHandler=function(a){a.on("click",function(b){var e=b.getDocumentPosition(),h=a.session;if(e=h.getFoldAt(e.row,e.column,1))b.getAccelKey()?h.removeFold(e):h.expandFold(e),b.stop()});a.on("gutterclick",function(b){if("foldWidgets"==a.renderer.$gutterLayer.getRegion(b)){var e=b.getDocumentPosition().row,h=a.session;if(h.foldWidgets&&h.foldWidgets[e])a.session.onFoldWidgetClick(e,b);a.isFocused()||a.focus();b.stop()}});
a.on("gutterdblclick",function(b){if("foldWidgets"==a.renderer.$gutterLayer.getRegion(b)){var e=b.getDocumentPosition().row,h=a.session,g=h.getParentFoldRangeData(e,!0);if(g=g.range||g.firstRange)e=g.start.row,(e=h.getFoldAt(e,h.getLine(e).length,1))?h.removeFold(e):(h.addFold("...",g),a.renderer.scrollCursorIntoView({row:g.start.row,column:0}));b.stop()}})}});
ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(a,b){var c=a("../lib/keys"),d=a("../lib/event"),e=function(a){this.$editor=a;this.$data={editor:a};this.$handlers=[];this.setDefaultHandler(a.commands)};(function(){this.setDefaultHandler=function(a){this.removeKeyboardHandler(this.$defaultHandler);this.$defaultHandler=a;this.addKeyboardHandler(a,0)};this.setKeyboardHandler=function(a){var b=this.$handlers;if(b[b.length-1]!=a){for(;b[b.length-
1]&&b[b.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(b[b.length-1]);this.addKeyboardHandler(a,1)}};this.addKeyboardHandler=function(a,b){if(a){"function"==typeof a&&!a.handleKeyboard&&(a.handleKeyboard=a);var c=this.$handlers.indexOf(a);-1!=c&&this.$handlers.splice(c,1);void 0==b?this.$handlers.push(a):this.$handlers.splice(b,0,a);-1==c&&a.attach&&a.attach(this.$editor)}};this.removeKeyboardHandler=function(a){var b=this.$handlers.indexOf(a);if(-1==b)return!1;this.$handlers.splice(b,
1);a.detach&&a.detach(this.$editor);return!0};this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]};this.getStatusText=function(){var a=this.$data,b=a.editor;return this.$handlers.map(function(c){return c.getStatusText&&c.getStatusText(b,a)||""}).filter(Boolean).join(" ")};this.$callKeyboardHandlers=function(a,b,c,e){for(var j,k=!1,l=this.$editor.commands,n=this.$handlers.length;n--;)if((j=this.$handlers[n].handleKeyboard(this.$data,a,b,c,e))&&j.command)if((k="null"==
j.command?!0:l.exec(j.command,this.$editor,j.args,e))&&e&&(-1!=a&&!0!=j.passEvent&&!0!=j.command.passEvent)&&d.stopEvent(e),k)break;return k};this.onCommandKey=function(a,b,d){var e=c.keyCodeToString(d);this.$callKeyboardHandlers(b,e,d,a)};this.onTextInput=function(a){this.$callKeyboardHandlers(-1,a)||this.$editor.commands.exec("insertstring",this.$editor,a)}}).call(e.prototype);b.KeyBinding=e});
ace.define("ace/range",["require","exports","module"],function(a,b){var c=function(a,b,c,g){this.start={row:a,column:b};this.end={row:c,column:g}};(function(){this.isEqual=function(a){return this.start.row===a.start.row&&this.end.row===a.end.row&&this.start.column===a.start.column&&this.end.column===a.end.column};this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"};this.contains=function(a,b){return 0==this.compare(a,b)};this.compareRange=
function(a){var b;b=a.end;a=a.start;b=this.compare(b.row,b.column);if(1==b)return b=this.compare(a.row,a.column),1==b?2:0==b?1:0;if(-1==b)return-2;b=this.compare(a.row,a.column);return-1==b?-1:1==b?42:0};this.comparePoint=function(a){return this.compare(a.row,a.column)};this.containsRange=function(a){return 0==this.comparePoint(a.start)&&0==this.comparePoint(a.end)};this.intersects=function(a){a=this.compareRange(a);return-1==a||0==a||1==a};this.isEnd=function(a,b){return this.end.row==a&&this.end.column==
b};this.isStart=function(a,b){return this.start.row==a&&this.start.column==b};this.setStart=function(a,b){"object"==typeof a?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=b)};this.setEnd=function(a,b){"object"==typeof a?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=b)};this.inside=function(a,b){return 0==this.compare(a,b)&&!this.isEnd(a,b)&&!this.isStart(a,b)?!0:!1};this.insideStart=function(a,b){return 0==this.compare(a,b)&&
!this.isEnd(a,b)?!0:!1};this.insideEnd=function(a,b){return 0==this.compare(a,b)&&!this.isStart(a,b)?!0:!1};this.compare=function(a,b){return!this.isMultiLine()&&a===this.start.row?b<this.start.column?-1:b>this.end.column?1:0:a<this.start.row?-1:a>this.end.row?1:this.start.row===a?b>=this.start.column?0:-1:this.end.row===a?b<=this.end.column?0:1:0};this.compareStart=function(a,b){return this.start.row==a&&this.start.column==b?-1:this.compare(a,b)};this.compareEnd=function(a,b){return this.end.row==
a&&this.end.column==b?1:this.compare(a,b)};this.compareInside=function(a,b){return this.end.row==a&&this.end.column==b?1:this.start.row==a&&this.start.column==b?-1:this.compare(a,b)};this.clipRows=function(a,b){if(this.end.row>b)var h={row:b+1,column:0};else this.end.row<a&&(h={row:a,column:0});if(this.start.row>b)var g={row:b+1,column:0};else this.start.row<a&&(g={row:a,column:0});return c.fromPoints(g||this.start,h||this.end)};this.extend=function(a,b){var h=this.compare(a,b);if(0==h)return this;
if(-1==h)var g={row:a,column:b};else var f={row:a,column:b};return c.fromPoints(g||this.start,f||this.end)};this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column};this.isMultiLine=function(){return this.start.row!==this.end.row};this.clone=function(){return c.fromPoints(this.start,this.end)};this.collapseRows=function(){return 0==this.end.column?new c(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new c(this.start.row,0,this.end.row,0)};this.toScreenRange=
function(a){var b=a.documentToScreenPosition(this.start),a=a.documentToScreenPosition(this.end);return new c(b.row,b.column,a.row,a.column)};this.moveBy=function(a,b){this.start.row+=a;this.start.column+=b;this.end.row+=a;this.end.column+=b}}).call(c.prototype);c.fromPoints=function(a,b){return new c(a.row,a.column,b.row,b.column)};c.comparePoints=function(a,b){return a.row-b.row||a.column-b.column};c.comparePoints=function(a,b){return a.row-b.row||a.column-b.column};b.Range=c});
ace.define("ace/selection","require exports module ace/lib/oop ace/lib/lang ace/lib/event_emitter ace/range".split(" "),function(a,b){var c=a("./lib/oop"),d=a("./lib/lang"),e=a("./lib/event_emitter").EventEmitter,h=a("./range").Range,g=function(a){this.session=a;this.doc=a.getDocument();this.clearSelection();this.lead=this.selectionLead=this.doc.createAnchor(0,0);this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var b=this;this.lead.on("change",function(a){b._emit("changeCursor");b.$isEmpty||
b._emit("changeSelection");if(!b.$keepDesiredColumnOnChange&&a.old.column!=a.value.column)b.$desiredColumn=null});this.selectionAnchor.on("change",function(){b.$isEmpty||b._emit("changeSelection")})};(function(){c.implement(this,e);this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column};this.isMultiLine=function(){return this.isEmpty()?false:this.getRange().isMultiLine()};this.getCursor=function(){return this.lead.getPosition()};this.setSelectionAnchor=
function(a,b){this.anchor.setPosition(a,b);if(this.$isEmpty){this.$isEmpty=false;this._emit("changeSelection")}};this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()};this.getSelectionLead=function(){return this.lead.getPosition()};this.shiftSelection=function(a){if(this.$isEmpty)this.moveCursorTo(this.lead.row,this.lead.column+a);else{var b=this.getSelectionAnchor(),c=this.getSelectionLead(),d=this.isBackwards();(!d||b.column!==0)&&this.setSelectionAnchor(b.row,
b.column+a);(d||c.column!==0)&&this.$moveSelection(function(){this.moveCursorTo(c.row,c.column+a)})}};this.isBackwards=function(){var a=this.anchor,b=this.lead;return a.row>b.row||a.row==b.row&&a.column>b.column};this.getRange=function(){var a=this.anchor,b=this.lead;return this.isEmpty()?h.fromPoints(b,b):this.isBackwards()?h.fromPoints(b,a):h.fromPoints(a,b)};this.clearSelection=function(){if(!this.$isEmpty){this.$isEmpty=true;this._emit("changeSelection")}};this.selectAll=function(){var a=this.doc.getLength()-
1;this.setSelectionAnchor(0,0);this.moveCursorTo(a,this.doc.getLine(a).length)};this.setRange=this.setSelectionRange=function(a,b){if(b){this.setSelectionAnchor(a.end.row,a.end.column);this.selectTo(a.start.row,a.start.column)}else{this.setSelectionAnchor(a.start.row,a.start.column);this.selectTo(a.end.row,a.end.column)}if(this.getRange().isEmpty())this.$isEmpty=true;this.$desiredColumn=null};this.$moveSelection=function(a){var b=this.lead;this.$isEmpty&&this.setSelectionAnchor(b.row,b.column);a.call(this)};
this.selectTo=function(a,b){this.$moveSelection(function(){this.moveCursorTo(a,b)})};this.selectToPosition=function(a){this.$moveSelection(function(){this.moveCursorToPosition(a)})};this.moveTo=function(a,b){this.clearSelection();this.moveCursorTo(a,b)};this.moveToPosition=function(a){this.clearSelection();this.moveCursorToPosition(a)};this.selectUp=function(){this.$moveSelection(this.moveCursorUp)};this.selectDown=function(){this.$moveSelection(this.moveCursorDown)};this.selectRight=function(){this.$moveSelection(this.moveCursorRight)};
this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)};this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)};this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)};this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)};this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)};this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)};this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)};
this.getWordRange=function(a,b){if(typeof b=="undefined")var c=a||this.lead,a=c.row,b=c.column;return this.session.getWordRange(a,b)};this.selectWord=function(){this.setSelectionRange(this.getWordRange())};this.selectAWord=function(){var a=this.getCursor();this.setSelectionRange(this.session.getAWordRange(a.row,a.column))};this.getLineRange=function(a,b){var c=typeof a=="number"?a:this.lead.row,d;if(d=this.session.getFoldLine(c)){c=d.start.row;d=d.end.row}else d=c;return b===true?new h(c,0,d,this.session.getLine(d).length):
new h(c,0,d+1,0)};this.selectLine=function(){this.setSelectionRange(this.getLineRange())};this.moveCursorUp=function(){this.moveCursorBy(-1,0)};this.moveCursorDown=function(){this.moveCursorBy(1,0)};this.moveCursorLeft=function(){var a=this.lead.getPosition(),b;if(b=this.session.getFoldAt(a.row,a.column,-1))this.moveCursorTo(b.start.row,b.start.column);else if(a.column===0)a.row>0&&this.moveCursorTo(a.row-1,this.doc.getLine(a.row-1).length);else{b=this.session.getTabSize();this.session.isTabStop(a)&&
this.doc.getLine(a.row).slice(a.column-b,a.column).split(" ").length-1==b?this.moveCursorBy(0,-b):this.moveCursorBy(0,-1)}};this.moveCursorRight=function(){var a=this.lead.getPosition();if(a=this.session.getFoldAt(a.row,a.column,1))this.moveCursorTo(a.end.row,a.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var b=this.session.getTabSize(),a=this.lead;this.session.isTabStop(a)&&this.doc.getLine(a.row).slice(a.column,
a.column+b).split(" ").length-1==b?this.moveCursorBy(0,b):this.moveCursorBy(0,1)}};this.moveCursorLineStart=function(){var a=this.lead.row,b=this.lead.column,c=this.session.screenToDocumentPosition(this.session.documentToScreenRow(a,b),0),a=this.session.getDisplayLine(a,null,c.row,c.column).match(/^\s*/);if(a[0].length!=b&&!this.session.$useEmacsStyleLineStart)c.column=c.column+a[0].length;this.moveCursorToPosition(c)};this.moveCursorLineEnd=function(){var a=this.lead,a=this.session.getDocumentLastRowColumnPosition(a.row,
a.column);if(this.lead.column==a.column){var b=this.session.getLine(a.row);if(a.column==b.length){b=b.search(/\s+$/);if(b>0)a.column=b}}this.moveCursorTo(a.row,a.column)};this.moveCursorFileEnd=function(){var a=this.doc.getLength()-1,b=this.doc.getLine(a).length;this.moveCursorTo(a,b)};this.moveCursorFileStart=function(){this.moveCursorTo(0,0)};this.moveCursorLongWordRight=function(){var a=this.lead.row,b=this.lead.column,c=this.doc.getLine(a),d=c.substring(b);this.session.nonTokenRe.lastIndex=0;
this.session.tokenRe.lastIndex=0;var e=this.session.getFoldAt(a,b,1);if(e)this.moveCursorTo(e.end.row,e.end.column);else{if(this.session.nonTokenRe.exec(d)){b=b+this.session.nonTokenRe.lastIndex;this.session.nonTokenRe.lastIndex=0;d=c.substring(b)}if(b>=c.length){this.moveCursorTo(a,c.length);this.moveCursorRight();a<this.doc.getLength()-1&&this.moveCursorWordRight()}else{if(this.session.tokenRe.exec(d)){b=b+this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(a,b)}}};
this.moveCursorLongWordLeft=function(){var a=this.lead.row,b=this.lead.column,c;if(c=this.session.getFoldAt(a,b,-1))this.moveCursorTo(c.start.row,c.start.column);else{c=this.session.getFoldStringAt(a,b,-1);c==null&&(c=this.doc.getLine(a).substring(0,b));c=d.stringReverse(c);this.session.nonTokenRe.lastIndex=0;this.session.tokenRe.lastIndex=0;if(this.session.nonTokenRe.exec(c)){b=b-this.session.nonTokenRe.lastIndex;c=c.slice(this.session.nonTokenRe.lastIndex);this.session.nonTokenRe.lastIndex=0}if(b<=
0){this.moveCursorTo(a,0);this.moveCursorLeft();a>0&&this.moveCursorWordLeft()}else{if(this.session.tokenRe.exec(c)){b=b-this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(a,b)}}};this.$shortWordEndIndex=function(a){var b=0,c,d=/\s/,e=this.session.tokenRe;e.lastIndex=0;if(this.session.tokenRe.exec(a))b=this.session.tokenRe.lastIndex;else{for(;(c=a[b])&&d.test(c);)b++;if(b<1)for(e.lastIndex=0;(c=a[b])&&!e.test(c);){e.lastIndex=0;b++;if(d.test(c))if(b>2){b--;break}else{for(;(c=
a[b])&&d.test(c);)b++;if(b>2)break}}}e.lastIndex=0;return b};this.moveCursorShortWordRight=function(){var a=this.lead.row,b=this.lead.column,c=this.doc.getLine(a),d=c.substring(b),e=this.session.getFoldAt(a,b,1);if(e)return this.moveCursorTo(e.end.row,e.end.column);if(b==c.length){b=this.doc.getLength();do{a++;d=this.doc.getLine(a)}while(a<b&&/^\s*$/.test(d));/^\s+/.test(d)||(d="");b=0}d=this.$shortWordEndIndex(d);this.moveCursorTo(a,b+d)};this.moveCursorShortWordLeft=function(){var a=this.lead.row,
b=this.lead.column,c;if(c=this.session.getFoldAt(a,b,-1))return this.moveCursorTo(c.start.row,c.start.column);c=this.session.getLine(a).substring(0,b);if(b===0){do{a--;c=this.doc.getLine(a)}while(a>0&&/^\s*$/.test(c));b=c.length;/\s+$/.test(c)||(c="")}c=this.$shortWordEndIndex(d.stringReverse(c));return this.moveCursorTo(a,b-c)};this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()};this.moveCursorWordLeft=function(){this.session.$selectLongWords?
this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()};this.moveCursorBy=function(a,b){var c=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(b===0)this.$desiredColumn?c.column=this.$desiredColumn:this.$desiredColumn=c.column;c=this.session.screenToDocumentPosition(c.row+a,c.column);a!==0&&b===0&&c.row===this.lead.row&&c.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[c.row]&&c.row++;this.moveCursorTo(c.row,c.column+b,b===0)};this.moveCursorToPosition=
function(a){this.moveCursorTo(a.row,a.column)};this.moveCursorTo=function(a,b,c){var d=this.session.getFoldAt(a,b,1);if(d){a=d.start.row;b=d.start.column}this.$keepDesiredColumnOnChange=true;this.lead.setPosition(a,b);this.$keepDesiredColumnOnChange=false;if(!c)this.$desiredColumn=null};this.moveCursorToScreen=function(a,b,c){a=this.session.screenToDocumentPosition(a,b);this.moveCursorTo(a.row,a.column,c)};this.detach=function(){this.lead.detach();this.anchor.detach();this.session=this.doc=null};
this.fromOrientedRange=function(a){this.setSelectionRange(a,a.cursor==a.start);this.$desiredColumn=a.desiredColumn||this.$desiredColumn};this.toOrientedRange=function(a){var b=this.getRange();if(a){a.start.column=b.start.column;a.start.row=b.start.row;a.end.column=b.end.column;a.end.row=b.end.row}else a=b;a.cursor=this.isBackwards()?a.start:a.end;a.desiredColumn=this.$desiredColumn;return a};this.getRangeOfMovements=function(a){var b=this.getCursor();try{a.call(null,this);var c=this.getCursor();return h.fromPoints(b,
c)}catch(d){return h.fromPoints(b,b)}finally{this.moveCursorToPosition(b)}};this.toJSON=function(){if(this.rangeCount)var a=this.ranges.map(function(a){var b=a.clone();b.isBackwards=a.cursor==a.start;return b});else{a=this.getRange();a.isBackwards=this.isBackwards()}return a};this.fromJSON=function(a){if(a.start==void 0){if(this.rangeList){this.toSingleRange(a[0]);for(var b=a.length;b--;){var c=h.fromPoints(a[b].start,a[b].end);if(a.isBackwards)c.cursor=c.start;this.addRange(c,true)}return}a=a[0]}this.rangeList&&
this.toSingleRange(a);this.setSelectionRange(a,a.isBackwards)};this.isEqual=function(a){if((a.length||this.rangeCount)&&a.length!=this.rangeCount)return false;if(!a.length||!this.ranges)return this.getRange().isEqual(a);for(var b=this.ranges.length;b--;)if(!this.ranges[b].isEqual(a[b]))return false;return true}}).call(g.prototype);b.Selection=g});
ace.define("ace/tokenizer",["require","exports","module"],function(a,b){var c=2E3,d=function(a){this.states=a;this.regExps={};this.matchMappings={};for(var b in this.states){for(var a=this.states[b],c=[],d=0,i=this.matchMappings[b]={defaultToken:"text"},j="g",k=[],l=0;l<a.length;l++){var n=a[l];n.defaultToken&&(i.defaultToken=n.defaultToken);n.caseInsensitive&&(j="gi");if(null!=n.regex){n.regex instanceof RegExp&&(n.regex=n.regex.toString().slice(1,-1));var o=n.regex,t=RegExp("(?:("+o+")|(.))").exec("a").length-
2;Array.isArray(n.token)?1==n.token.length||1==t?n.token=n.token[0]:t-1!=n.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:n,groupCount:t-1}),n.token=n.token[0]):(n.tokenArray=n.token,n.token=null,n.onMatch=this.$arrayTokens):"function"==typeof n.token&&!n.onMatch&&(n.onMatch=1<t?this.$applyToken:n.token);1<t&&(/\\\d/.test(n.regex)?o=n.regex.replace(/\\([0-9]+)/g,function(a,b){return"\\"+(parseInt(b,10)+d+1)}):(t=1,o=this.removeCapturingGroups(n.regex)),!n.splitRegex&&
"string"!=typeof n.token&&k.push(n));i[d]=l;d+=t;c.push(o);n.onMatch||(n.onMatch=null)}}c.length||(i[0]=0,c.push("$"));k.forEach(function(a){a.splitRegex=this.createSplitterRegexp(a.regex,j)},this);this.regExps[b]=RegExp("("+c.join(")|(")+")|($)",j)}};(function(){this.$setMaxTokenCount=function(a){c=a|0};this.$applyToken=function(a){var b=this.splitRegex.exec(a).slice(1),c=this.token.apply(this,b);if("string"===typeof c)return[{type:c,value:a}];for(var a=[],d=0,i=c.length;d<i;d++)b[d]&&(a[a.length]=
{type:c[d],value:b[d]});return a};this.$arrayTokens=function(a){if(!a)return[];a=this.splitRegex.exec(a);if(!a)return"text";for(var b=[],c=this.tokenArray,d=0,i=c.length;d<i;d++)a[d+1]&&(b[b.length]={type:c[d],value:a[d+1]});return b};this.removeCapturingGroups=function(a){return a.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(a,b){return b?"(?:":a})};this.createSplitterRegexp=function(a,b){if(-1!=a.indexOf("(?=")){var c=0,d=!1,i,j,k;a.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(a,
b,e,h,s,q){d?d="]"!=s:s?d=!0:h?(c==i&&(j=q+1,i=-1),c--):e&&(c++,1!=e.length&&(i=c,k=q));return a});null!=j&&/^\)*$/.test(a.substr(j))&&(a=a.substring(0,k)+a.substr(j))}return RegExp(a,(b||"").replace("g",""))};this.getLineTokens=function(a,b){if(b&&"string"!=typeof b){var d=b.slice(0),b=d[0];"#tmp"===b&&(d.shift(),b=d.shift())}else d=[];var f=b||"start",i=this.states[f];i||(f="start",i=this.states[f]);var j=this.matchMappings[f],k=this.regExps[f];k.lastIndex=0;for(var l,n=[],o=0,t=0,s={type:null,
value:""};l=k.exec(a);){var q=j.defaultToken,m=null,r=l[0],u=k.lastIndex;if(u-r.length>o){var w=a.substring(o,u-r.length);s.type==q?s.value+=w:(s.type&&n.push(s),s={type:q,value:w})}for(w=0;w<l.length-2;w++)if(void 0!==l[w+1]){m=i[j[w]];q=m.onMatch?m.onMatch(r,f,d):m.token;m.next&&(f="string"==typeof m.next?m.next:m.next(f,d),i=this.states[f],i||(this.reportError("state doesn't exist",f),f="start",i=this.states[f]),j=this.matchMappings[f],o=u,k=this.regExps[f],k.lastIndex=u);break}if(r)if("string"===
typeof q)(!m||!1!==m.merge)&&s.type===q?s.value+=r:(s.type&&n.push(s),s={type:q,value:r});else if(q){s.type&&n.push(s);s={type:null,value:""};for(w=0;w<q.length;w++)n.push(q[w])}if(o==a.length)break;o=u;if(t++>c){for(t>2*a.length&&this.reportError("infinite loop with in ace tokenizer",{startState:b,line:a});o<a.length;)s.type&&n.push(s),s={value:a.substring(o,o+=2E3),type:"overflow"};f="start";d=[];break}}s.type&&n.push(s);1<d.length&&d[0]!==f&&d.unshift("#tmp",f);return{tokens:n,state:d.length?d:
f}};this.reportError=function(a,b){var c=Error(a);c.data=b;"object"==typeof console&&console.error&&console.error(c);setTimeout(function(){throw c;})}}).call(d.prototype);b.Tokenizer=d});
ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(a,b){var c=a("../lib/lang"),d=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(a,b){if(b)for(h in a){for(var c=a[h],d=0;d<c.length;d++){var e=c[d];if(e.next||e.onMatch)"string"!=typeof e.next?e.nextState&&0!==e.nextState.indexOf(b)&&(e.nextState=b+e.nextState):0!==e.next.indexOf(b)&&(e.next=b+e.next)}this.$rules[b+h]=c}else for(var h in a)this.$rules[h]=
a[h]};this.getRules=function(){return this.$rules};this.embedRules=function(a,b,d,e,h){a="function"==typeof a?(new a).getRules():a;if(e)for(var l=0;l<e.length;l++)e[l]=b+e[l];else for(l in e=[],a)e.push(b+l);this.addRules(a,b);if(d){h=Array.prototype[h?"push":"unshift"];for(l=0;l<e.length;l++)h.apply(this.$rules[e[l]],c.deepCopy(d))}this.$embeds||(this.$embeds=[]);this.$embeds.push(b)};this.getEmbeds=function(){return this.$embeds};var a=function(a,b){("start"!=a||b.length)&&b.unshift(this.nextState,
a);return this.nextState},b=function(a,b){b.shift();return b.shift()||"start"};this.normalizeRules=function(){function c(j){j=i[j];j.processed=!0;for(var k=0;k<j.length;k++){var l=j[k];!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token+=".start",l.push=!0);var n=l.next||l.push;if(n&&Array.isArray(n)){var o=l.stateName;o||(o=l.token,"string"!=typeof o&&(o=o[0]||""),i[o]&&(o+=d++));i[o]=n;l.next=
o;c(o)}else"pop"==n&&(l.next=b);l.push&&(l.nextState=l.next||l.push,l.next=a,delete l.push);if(l.rules)for(var t in l.rules)i[t]?i[t].push&&i[t].push.apply(i[t],l.rules[t]):i[t]=l.rules[t];if(l.include||"string"==typeof l)var s=i[l.include||l];else Array.isArray(l)&&(s=l);s&&(s=[k,1].concat(s),l.noEscape&&(s=s.filter(function(a){return!a.next})),j.splice.apply(j,s),k--,s=null);l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}
var d=0,i=this.$rules;Object.keys(i).forEach(c,this)};this.createKeywordMapper=function(a,b,c,d){var e=Object.create(null);Object.keys(a).forEach(function(b){var f=a[b];c&&(f=f.toLowerCase());for(var f=f.split(d||"|"),h=f.length;h--;)e[f[h]]=b});Object.getPrototypeOf(e)&&(e.__proto__=null);this.$keywordList=Object.keys(e);a=null;return c?function(a){return e[a.toLowerCase()]||b}:function(a){return e[a]||b}};this.getKeywords=function(){return this.$keywords}}).call(d.prototype);b.TextHighlightRules=
d});
ace.define("ace/mode/behaviour",["require","exports","module"],function(a,b){var c=function(){this.$behaviours={}};(function(){this.add=function(a,b,c){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[a]:this.$behaviours[a]={}}this.$behaviours[a][b]=c};this.addBehaviours=function(a){for(var b in a)for(var c in a[b])this.add(b,c,a[b][c])};this.remove=function(a){this.$behaviours&&this.$behaviours[a]&&delete this.$behaviours[a]};this.inherit=function(a,b){this.addBehaviours("function"===typeof a?
(new a).getBehaviours(b):a.getBehaviours(b))};this.getBehaviours=function(a){if(a){for(var b={},c=0;c<a.length;c++)this.$behaviours[a[c]]&&(b[a[c]]=this.$behaviours[a[c]]);return b}return this.$behaviours}}).call(c.prototype);b.Behaviour=c});
ace.define("ace/unicode",["require","exports","module"],function(a,b){b.packages={};var c={L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",
Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",
Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",
Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",
Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",
Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",
P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",
Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",
Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",
S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",
Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",
So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",
Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",
Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"},
d=/\w{4}/g,e;for(e in c)b.packages[e]=c[e].replace(d,"\\u$&")});
ace.define("ace/token_iterator",["require","exports","module"],function(a,b){var c=function(a,b,c){this.$session=a;this.$row=b;this.$rowTokens=a.getTokens(b);this.$tokenIndex=(a=a.getTokenAt(b,c))?a.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;0>this.$tokenIndex;){this.$row-=1;if(0>this.$row)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row);this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]};this.stepForward=function(){this.$tokenIndex+=
1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){this.$row+=1;a||(a=this.$session.getLength());if(this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row);this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]};this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]};this.getCurrentTokenRow=function(){return this.$row};this.getCurrentTokenColumn=function(){var a=this.$rowTokens,b=this.$tokenIndex,c=a[b].start;if(void 0!==c)return c;for(c=
0;0<b;)b-=1,c+=a[b].value.length;return c}}).call(c.prototype);b.TokenIterator=c});
ace.define("ace/mode/text","require exports module ace/tokenizer ace/mode/text_highlight_rules ace/mode/behaviour ace/unicode ace/lib/lang ace/token_iterator ace/range".split(" "),function(a,b){var c=a("../tokenizer").Tokenizer,d=a("./text_highlight_rules").TextHighlightRules,e=a("./behaviour").Behaviour,h=a("../unicode"),g=a("../lib/lang"),f=a("../token_iterator").TokenIterator,i=a("../range").Range,j=function(){this.HighlightRules=d;this.$behaviour=new e};(function(){this.tokenRe=RegExp("^["+h.packages.L+
h.packages.Mn+h.packages.Mc+h.packages.Nd+h.packages.Pc+"\\$_]+","g");this.nonTokenRe=RegExp("^(?:[^"+h.packages.L+h.packages.Mn+h.packages.Mc+h.packages.Nd+h.packages.Pc+"\\$_]|\\s])+","g");this.getTokenizer=function(){if(!this.$tokenizer){this.$highlightRules=this.$highlightRules||new this.HighlightRules;this.$tokenizer=new c(this.$highlightRules.getRules())}return this.$tokenizer};this.blockComment=this.lineCommentStart="";this.toggleCommentLines=function(a,b,c,d){function e(a){for(var b=c;b<=
d;b++)a(f.getLine(b),b)}var f=b.doc,h=true,i=true,j=Infinity,u=b.getTabSize(),a=false;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart)){w=this.lineCommentStart.map(g.escapeRegExp).join("|");C=this.lineCommentStart[0]}else{w=g.escapeRegExp(this.lineCommentStart);C=this.lineCommentStart}var w=RegExp("^(\\s*)(?:"+w+") ?"),a=b.getUseSoftTabs(),y=function(a,b){var c=a.match(w);if(c){var d=c[1].length,e=c[0].length;!H(a,d,e)&&c[0][e-1]==" "&&e--;f.removeInLine(b,d,e)}},v=C+" ",z=function(a,
b){if(!h||/\S/.test(a))H(a,j,j)?f.insertInLine({row:b,column:j},v):f.insertInLine({row:b,column:j},C)},E=function(a){return w.test(a)},H=function(a,b,c){for(var d=0;b--&&a.charAt(b)==" ";)d++;if(d%u!=0)return false;for(d=0;a.charAt(c++)==" ";)d++;return u>2?d%u!=u-1:d%u==0}}else{if(!this.blockComment)return false;var C=this.blockComment.start,N=this.blockComment.end,w=RegExp("^(\\s*)(?:"+g.escapeRegExp(C)+")"),T=RegExp("(?:"+g.escapeRegExp(N)+")\\s*$"),z=function(a,b){if(!E(a,b)&&(!h||/\S/.test(a))){f.insertInLine({row:b,
column:a.length},N);f.insertInLine({row:b,column:j},C)}},y=function(a,b){var c;(c=a.match(T))&&f.removeInLine(b,a.length-c[0].length,a.length);(c=a.match(w))&&f.removeInLine(b,c[1].length,c[0].length)},E=function(a,c){if(w.test(a))return true;for(var d=b.getTokens(c),e=0;e<d.length;e++)if(d[e].type==="comment")return true}}var K=Infinity;e(function(a,b){var c=a.search(/\S/);if(c!==-1){c<j&&(j=c);i&&!E(a,b)&&(i=false)}else if(K>a.length)K=a.length});if(j==Infinity){j=K;i=h=false}a&&j%u!=0&&(j=Math.floor(j/
u)*u);e(i?y:z)};this.toggleBlockComment=function(a,b,c,d){if(a=this.blockComment){!a.start&&a[0]&&(a=a[0]);var e=new f(b,d.row,d.column),g=e.getCurrentToken(),h=b.selection.toOrientedRange(),j,r;if(g&&/comment/.test(g.type)){for(var u,w;g&&/comment/.test(g.type);){g=g.value.indexOf(a.start);if(g!=-1){c=e.getCurrentTokenRow();e=e.getCurrentTokenColumn()+g;u=new i(c,e,c,e+a.start.length);break}g=e.stepBackward()}e=new f(b,d.row,d.column);for(g=e.getCurrentToken();g&&/comment/.test(g.type);){g=g.value.indexOf(a.end);
if(g!=-1){c=e.getCurrentTokenRow();e=e.getCurrentTokenColumn()+g;w=new i(c,e,c,e+a.end.length);break}g=e.stepForward()}w&&b.remove(w);if(u){b.remove(u);j=u.start.row;r=-a.start.length}}else{r=a.start.length;j=c.start.row;b.insert(c.end,a.end);b.insert(c.start,a.start)}if(h.start.row==j)h.start.column=h.start.column+r;if(h.end.row==j)h.end.column=h.end.column+r;b.selection.fromOrientedRange(h)}};this.getNextLineIndent=function(a,b){return this.$getIndent(b)};this.checkOutdent=function(){return false};
this.autoOutdent=function(){};this.$getIndent=function(a){return a.match(/^\s*/)[0]};this.createWorker=function(){return null};this.createModeDelegates=function(a){this.$embeds=[];this.$modes={};for(var b in a)if(a[b]){this.$embeds.push(b);this.$modes[b]=new a[b]}var c=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(b=0;b<c.length;b++)(function(a){var d=c[b],e=a[d];a[c[b]]=function(){return this.$delegator(d,arguments,
e)}})(this)};this.$delegator=function(a,b,c){var d=b[0];typeof d!="string"&&(d=d[0]);for(var e=0;e<this.$embeds.length;e++)if(this.$modes[this.$embeds[e]]){var f=d.split(this.$embeds[e]);if(!f[0]&&f[1]){b[0]=f[1];c=this.$modes[this.$embeds[e]];return c[a].apply(c,b)}}a=c.apply(this,b);return c?a:void 0};this.transformAction=function(a,b,c,d,e){if(this.$behaviour){var f=this.$behaviour.getBehaviours(),g;for(g in f)if(f[g][b]){var h=f[g][b].apply(this,arguments);if(h)return h}}};this.getKeywords=function(a){if(!this.completionKeywords){var b=
this.$tokenizer.rules,c=[],d;for(d in b)for(var e=b[d],f=0,g=e.length;f<g;f++)if(typeof e[f].token==="string")/keyword|support|storage/.test(e[f].token)&&c.push(e[f].regex);else if(typeof e[f].token==="object")for(var h=0,i=e[f].token.length;h<i;h++)if(/keyword|support|storage/.test(e[f].token[h])){d=e[f].regex.match(/\(.+?\)/g)[h];c.push(d.substr(1,d.length-2))}this.completionKeywords=c}return!a?this.$keywordList:c.concat(this.$keywordList||[])};this.$createKeywordList=function(){this.$highlightRules||
this.getTokenizer();return this.$keywordList=this.$highlightRules.$keywordList||[]};this.getCompletions=function(){return(this.$keywordList||this.$createKeywordList()).map(function(a){return{name:a,value:a,score:0,meta:"keyword"}})};this.$id="ace/mode/text"}).call(j.prototype);b.Mode=j});
ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b){var c=a("./lib/oop"),d=a("./lib/event_emitter").EventEmitter;(function(){c.implement(this,d);this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)};this.getDocument=function(){return this.document};this.$insertRight=!1;this.onChange=function(a){var a=a.data,b=a.range;if(!(b.start.row==b.end.row&&b.start.row!=this.row)&&!(b.start.row>this.row)&&!(b.start.row==this.row&&
b.start.column>this.column)){var c=this.row,d=this.column,i=b.start,b=b.end;"insertText"===a.action?i.row===c&&i.column<=d?i.column===d&&this.$insertRight||(i.row===b.row?d+=b.column-i.column:(d-=i.column,c+=b.row-i.row)):i.row!==b.row&&i.row<c&&(c+=b.row-i.row):"insertLines"===a.action?i.row===c&&0===d&&this.$insertRight||i.row<=c&&(c+=b.row-i.row):"removeText"===a.action?i.row===c&&i.column<d?d=b.column>=d?i.column:Math.max(0,d-(b.column-i.column)):i.row!==b.row&&i.row<c?(b.row===c&&(d=Math.max(0,
d-b.column)+i.column),c-=b.row-i.row):b.row===c&&(c-=b.row-i.row,d=Math.max(0,d-b.column)+i.column):"removeLines"==a.action&&i.row<=c&&(b.row<=c?c-=b.row-i.row:(c=i.row,d=0));this.setPosition(c,d,!0)}};this.setPosition=function(a,b,c){a=c?{row:a,column:b}:this.$clipPositionToDocument(a,b);this.row==a.row&&this.column==a.column||(b={row:this.row,column:this.column},this.row=a.row,this.column=a.column,this._signal("change",{old:b,value:a}))};this.detach=function(){this.document.removeEventListener("change",
this.$onChange)};this.attach=function(a){this.document=a||this.document;this.document.on("change",this.$onChange)};this.$clipPositionToDocument=function(a,b){var c={};a>=this.document.getLength()?(c.row=Math.max(0,this.document.getLength()-1),c.column=this.document.getLine(c.row).length):0>a?(c.row=0,c.column=0):(c.row=a,c.column=Math.min(this.document.getLine(c.row).length,Math.max(0,b)));0>b&&(c.column=0);return c}}).call((b.Anchor=function(a,b,c){this.$onChange=this.onChange.bind(this);this.attach(a);
"undefined"==typeof c?this.setPosition(b.row,b.column):this.setPosition(b,c)}).prototype)});
ace.define("ace/document","require exports module ace/lib/oop ace/lib/event_emitter ace/range ace/anchor".split(" "),function(a,b){var c=a("./lib/oop"),d=a("./lib/event_emitter").EventEmitter,e=a("./range").Range,h=a("./anchor").Anchor,g=function(a){this.$lines=[];a.length===0?this.$lines=[""]:Array.isArray(a)?this._insertLines(0,a):this.insert({row:0,column:0},a)};(function(){c.implement(this,d);this.setValue=function(a){var b=this.getLength();this.remove(new e(0,0,b,this.getLine(b-1).length));this.insert({row:0,
column:0},a)};this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())};this.createAnchor=function(a,b){return new h(this,a,b)};this.$split="aaa".split(/a/).length===0?function(a){return a.replace(/\r\n|\r/g,"\n").split("\n")}:function(a){return a.split(/\r\n|\r|\n/)};this.$detectNewLine=function(a){this.$autoNewLine=(a=a.match(/^.*?(\r\n|\r|\n)/m))?a[1]:"\n";this._signal("changeNewLineMode")};this.getNewLineCharacter=function(){switch(this.$newLineMode){case "windows":return"\r\n";
case "unix":return"\n";default:return this.$autoNewLine||"\n"}};this.$autoNewLine="";this.$newLineMode="auto";this.setNewLineMode=function(a){if(this.$newLineMode!==a){this.$newLineMode=a;this._signal("changeNewLineMode")}};this.getNewLineMode=function(){return this.$newLineMode};this.isNewLine=function(a){return a=="\r\n"||a=="\r"||a=="\n"};this.getLine=function(a){return this.$lines[a]||""};this.getLines=function(a,b){return this.$lines.slice(a,b+1)};this.getAllLines=function(){return this.getLines(0,
this.getLength())};this.getLength=function(){return this.$lines.length};this.getTextRange=function(a){if(a.start.row==a.end.row)return this.getLine(a.start.row).substring(a.start.column,a.end.column);var b=this.getLines(a.start.row,a.end.row);b[0]=(b[0]||"").substring(a.start.column);var c=b.length-1;a.end.row-a.start.row==c&&(b[c]=b[c].substring(0,a.end.column));return b.join(this.getNewLineCharacter())};this.$clipPosition=function(a){var b=this.getLength();if(a.row>=b){a.row=Math.max(0,b-1);a.column=
this.getLine(b-1).length}else if(a.row<0)a.row=0;return a};this.insert=function(a,b){if(!b||b.length===0)return a;a=this.$clipPosition(a);this.getLength()<=1&&this.$detectNewLine(b);var c=this.$split(b),d=c.splice(0,1)[0],e=c.length==0?null:c.splice(c.length-1,1)[0],a=this.insertInLine(a,d);if(e!==null){a=this.insertNewLine(a);a=this._insertLines(a.row,c);a=this.insertInLine(a,e||"")}return a};this.insertLines=function(a,b){return a>=this.getLength()?this.insert({row:a,column:0},"\n"+b.join("\n")):
this._insertLines(Math.max(a,0),b)};this._insertLines=function(a,b){if(b.length==0)return{row:a,column:0};for(;b.length>61440;)var c=this._insertLines(a,b.slice(0,61440)),b=b.slice(61440),a=c.row;c=[a,0];c.push.apply(c,b);this.$lines.splice.apply(this.$lines,c);c=new e(a,0,a+b.length,0);this._signal("change",{data:{action:"insertLines",range:c,lines:b}});return c.end};this.insertNewLine=function(a){var a=this.$clipPosition(a),b=this.$lines[a.row]||"";this.$lines[a.row]=b.substring(0,a.column);this.$lines.splice(a.row+
1,0,b.substring(a.column,b.length));b={row:a.row+1,column:0};this._signal("change",{data:{action:"insertText",range:e.fromPoints(a,b),text:this.getNewLineCharacter()}});return b};this.insertInLine=function(a,b){if(b.length==0)return a;var c=this.$lines[a.row]||"";this.$lines[a.row]=c.substring(0,a.column)+b+c.substring(a.column);c={row:a.row,column:a.column+b.length};this._signal("change",{data:{action:"insertText",range:e.fromPoints(a,c),text:b}});return c};this.remove=function(a){a instanceof e||
(a=e.fromPoints(a.start,a.end));a.start=this.$clipPosition(a.start);a.end=this.$clipPosition(a.end);if(a.isEmpty())return a.start;var b=a.start.row,c=a.end.row;if(a.isMultiLine()){var d=a.start.column==0?b:b+1,g=c-1;a.end.column>0&&this.removeInLine(c,0,a.end.column);g>=d&&this._removeLines(d,g);if(d!=b){this.removeInLine(b,a.start.column,this.getLine(b).length);this.removeNewLine(a.start.row)}}else this.removeInLine(b,a.start.column,a.end.column);return a.start};this.removeInLine=function(a,b,c){if(b!=
c){var d=new e(a,b,a,c),g=this.getLine(a),h=g.substring(b,c),b=g.substring(0,b)+g.substring(c,g.length);this.$lines.splice(a,1,b);this._signal("change",{data:{action:"removeText",range:d,text:h}});return d.start}};this.removeLines=function(a,b){return a<0||b>=this.getLength()?this.remove(new e(a,0,b+1,0)):this._removeLines(a,b)};this._removeLines=function(a,b){var c=new e(a,0,b+1,0),d=this.$lines.splice(a,b-a+1);this._signal("change",{data:{action:"removeLines",range:c,nl:this.getNewLineCharacter(),
lines:d}});return d};this.removeNewLine=function(a){var b=this.getLine(a),c=this.getLine(a+1),d=new e(a,b.length,a+1,0);this.$lines.splice(a,2,b+c);this._signal("change",{data:{action:"removeText",range:d,text:this.getNewLineCharacter()}})};this.replace=function(a,b){a instanceof e||(a=e.fromPoints(a.start,a.end));if(b.length==0&&a.isEmpty())return a.start;if(b==this.getTextRange(a))return a.end;this.remove(a);return b?this.insert(a.start,b):a.start};this.applyDeltas=function(a){for(var b=0;b<a.length;b++){var c=
a[b],d=e.fromPoints(c.range.start,c.range.end);c.action=="insertLines"?this.insertLines(d.start.row,c.lines):c.action=="insertText"?this.insert(d.start,c.text):c.action=="removeLines"?this._removeLines(d.start.row,d.end.row-1):c.action=="removeText"&&this.remove(d)}};this.revertDeltas=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b],d=e.fromPoints(c.range.start,c.range.end);c.action=="insertLines"?this._removeLines(d.start.row,d.end.row-1):c.action=="insertText"?this.remove(d):c.action=="removeLines"?
this._insertLines(d.start.row,c.lines):c.action=="removeText"&&this.insert(d.start,c.text)}};this.indexToPosition=function(a,b){for(var c=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,e=b||0,g=c.length;e<g;e++){a=a-(c[e].length+d);if(a<0)return{row:e,column:a+c[e].length+d}}return{row:g-1,column:c[g-1].length}};this.positionToIndex=function(a,b){for(var c=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,e=0,g=Math.min(a.row,c.length),h=b||0;h<g;++h)e=e+(c[h].length+
d);return e+a.column}}).call(g.prototype);b.Document=g});
ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b){var c=a("./lib/oop"),d=a("./lib/event_emitter").EventEmitter,e=function(a){this.running=!1;this.lines=[];this.states=[];this.currentLine=0;this.tokenizer=a;var b=this;this.$worker=function(){if(b.running){for(var a=new Date,c=b.currentLine,d=-1,e=b.doc;b.lines[c];)c++;var h=c,e=e.getLength(),n=0;for(b.running=!1;c<e;){b.$tokenizeRow(c);d=c;do c++;while(b.lines[c]);n++;if(0===n%
5&&20<new Date-a){b.running=setTimeout(b.$worker,20);break}}b.currentLine=c;h<=d&&b.fireUpdateEvent(h,d)}}};(function(){c.implement(this,d);this.setTokenizer=function(a){this.tokenizer=a;this.lines=[];this.states=[];this.start(0)};this.setDocument=function(a){this.doc=a;this.lines=[];this.states=[];this.stop()};this.fireUpdateEvent=function(a,b){this._signal("update",{data:{first:a,last:b}})};this.start=function(a){this.currentLine=Math.min(a||0,this.currentLine,this.doc.getLength());this.lines.splice(this.currentLine,
this.lines.length);this.states.splice(this.currentLine,this.states.length);this.stop();this.running=setTimeout(this.$worker,700)};this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))};this.$updateOnChange=function(a){var b=a.range,c=b.start.row,b=b.end.row-c;0===b?this.lines[c]=null:"removeText"==a.action||"removeLines"==a.action?(this.lines.splice(c,b+1,null),this.states.splice(c,b+1,null)):(a=Array(b+1),a.unshift(c,1),this.lines.splice.apply(this.lines,a),this.states.splice.apply(this.states,
a));this.currentLine=Math.min(c,this.currentLine,this.doc.getLength());this.stop()};this.stop=function(){this.running&&clearTimeout(this.running);this.running=!1};this.getTokens=function(a){return this.lines[a]||this.$tokenizeRow(a)};this.getState=function(a){this.currentLine==a&&this.$tokenizeRow(a);return this.states[a]||"start"};this.$tokenizeRow=function(a){var b=this.tokenizer.getLineTokens(this.doc.getLine(a),this.states[a-1],a);this.states[a]+""!==b.state+""?(this.states[a]=b.state,this.lines[a+
1]=null,this.currentLine>a+1&&(this.currentLine=a+1)):this.currentLine==a&&(this.currentLine=a+1);return this.lines[a]=b.tokens}}).call(e.prototype);b.BackgroundTokenizer=e});
ace.define("ace/search_highlight","require exports module ace/lib/lang ace/lib/oop ace/range".split(" "),function(a,b){var c=a("./lib/lang");a("./lib/oop");var d=a("./range").Range,e=function(a,b,c){this.setRegexp(a);this.clazz=b;this.type=c||"text"};(function(){this.MAX_RANGES=500;this.setRegexp=function(a){if(this.regExp+""!=a+""){this.regExp=a;this.cache=[]}};this.update=function(a,b,e,i){if(this.regExp)for(var j=i.lastRow,k=i.firstRow;k<=j;k++){var l=this.cache[k];if(l==null){l=c.getMatchOffsets(e.getLine(k),
this.regExp);l.length>this.MAX_RANGES&&(l=l.slice(0,this.MAX_RANGES));l=l.map(function(a){return new d(k,a.offset,k,a.offset+a.length)});this.cache[k]=l.length?l:""}for(var n=l.length;n--;)b.drawSingleLineMarker(a,l[n].toScreenRange(e),this.clazz,i)}}}).call(e.prototype);b.SearchHighlight=e});
ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(a,b){function c(a,b){this.foldData=a;Array.isArray(b)?this.folds=b:b=this.folds=[b];var c=b[b.length-1];this.range=new d(b[0].start.row,b[0].start.column,c.end.row,c.end.column);this.start=this.range.start;this.end=this.range.end;this.folds.forEach(function(a){a.setFoldLine(this)},this)}var d=a("../range").Range;(function(){this.shiftRow=function(a){this.start.row+=a;this.end.row+=a;this.folds.forEach(function(b){b.start.row+=
a;b.end.row+=a})};this.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a);this.folds.sort(function(a,b){return-a.range.compareEnd(b.start.row,b.start.column)});0<this.range.compareEnd(a.start.row,a.start.column)?(this.end.row=a.end.row,this.end.column=a.end.column):0>this.range.compareStart(a.end.row,a.end.column)&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==
this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else if(a.end.row==this.start.row)this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column;else throw Error("Trying to add fold to FoldRow that doesn't have a matching row");a.foldLine=this};this.containsRow=function(a){return a>=this.start.row&&a<=this.end.row};this.walk=function(a,b,c){var d=0,i=this.folds,j,k,l;l=!0;null==b&&(b=this.end.row,c=this.end.column);for(var n=0;n<i.length;n++){j=
i[n];k=j.range.compareStart(b,c);if(-1==k){a(null,b,c,d,l);return}l=a(null,j.start.row,j.start.column,d,l);if(!l&&a(j.placeholder,j.start.row,j.start.column,d)||0===k)return;l=!j.sameRow;d=j.end.column}a(null,b,c,d,l)};this.getNextFoldTo=function(a,b){for(var c,d,i=0;i<this.folds.length;i++){c=this.folds[i];d=c.range.compareEnd(a,b);if(-1==d)return{fold:c,kind:"after"};if(0===d)return{fold:c,kind:"inside"}}return null};this.addRemoveChars=function(a,b,c){var d=this.getNextFoldTo(a,b),i;if(d)if(i=
d.fold,"inside"==d.kind&&i.start.column!=b&&i.start.row!=a)window.console&&window.console.log(a,b,i);else if(i.start.row==a){a=this.folds;b=a.indexOf(i);0===b&&(this.start.column+=c);for(b;b<a.length;b++){i=a[b];i.start.column+=c;if(!i.sameRow)return;i.end.column+=c}this.end.column+=c}};this.split=function(a,b){var d=this.getNextFoldTo(a,b);if(!d||"inside"==d.kind)return null;var f=this.folds,i=this.foldData,d=f.indexOf(d.fold),j=f[d-1];this.end.row=j.end.row;this.end.column=j.end.column;f=f.splice(d,
f.length-d);f=new c(i,f);i.splice(i.indexOf(this)+1,0,f);return f};this.merge=function(a){for(var b=a.folds,c=0;c<b.length;c++)this.addFold(b[c]);b=this.foldData;b.splice(b.indexOf(a),1)};this.toString=function(){var a=[this.range.toString()+": ["];this.folds.forEach(function(b){a.push("  "+b.toString())});a.push("]");return a.join("\n")};this.idxToPosition=function(a){for(var b=0,c=0;c<this.folds.length;c++){var d=this.folds[c],a=a-(d.start.column-b);if(0>a)return{row:d.start.row,column:d.start.column+
a};a-=d.placeholder.length;if(0>a)return d.start;b=d.end.column}return{row:this.end.row,column:this.end.column+a}}}).call(c.prototype);b.FoldLine=c});
ace.define("ace/range_list",["require","exports","module","ace/range"],function(a,b){var c=a("./range").Range.comparePoints,d=function(){this.ranges=[]};(function(){this.comparePoints=c;this.pointIndex=function(a,b,d){for(var f=this.ranges,d=d||0;d<f.length;d++){var i=f[d],j=c(a,i.end);if(!(0<j)){a=c(a,i.start);if(0===j)return b&&0!==a?-d-2:d;if(0<a||0===a&&!b)return d;break}}return-d-1};this.add=function(a){var b=!a.isEmpty(),c=this.pointIndex(a.start,b);0>c&&(c=-c-1);b=this.pointIndex(a.end,b,c);
0>b?b=-b-1:b++;return this.ranges.splice(c,b-c,a)};this.addList=function(a){for(var b=[],c=a.length;c--;)b.push.call(b,this.add(a[c]));return b};this.substractPoint=function(a){a=this.pointIndex(a);if(0<=a)return this.ranges.splice(a,1)};this.merge=function(){for(var a=[],b=this.ranges,b=b.sort(function(a,b){return c(a.start,b.start)}),d=b[0],f,i=1;i<b.length;i++){f=d;var d=b[i],j=c(f.end,d.start);!(0>j)&&!(0==j&&!f.isEmpty()&&!d.isEmpty())&&(0>c(f.end,d.end)&&(f.end.row=d.end.row,f.end.column=d.end.column),
b.splice(i,1),a.push(d),d=f,i--)}this.ranges=b;return a};this.contains=function(a,b){return 0<=this.pointIndex({row:a,column:b})};this.containsPoint=function(a){return 0<=this.pointIndex(a)};this.rangeAtPoint=function(a){a=this.pointIndex(a);if(0<=a)return this.ranges[a]};this.clipRows=function(a,b){var c=this.ranges;if(c[0].start.row>b||c[c.length-1].start.row<a)return[];var d=this.pointIndex({row:a,column:0});0>d&&(d=-d-1);var i=this.pointIndex({row:b,column:0},d);0>i&&(i=-i-1);for(var j=[];d<i;d++)j.push(c[d]);
return j};this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)};this.attach=function(a){this.session&&this.detach();this.session=a;this.onChange=this.$onChange.bind(this);this.session.on("change",this.onChange)};this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)};this.$onChange=function(a){var b=a.data.range;if("i"==a.data.action[0])var a=b.start,c=b.end;else c=b.start,a=b.end;for(var b=a.row,d=c.row-b,c=-a.column+c.column,
i=this.ranges,j=0,k=i.length;j<k;j++){var l=i[j];if(!(l.end.row<b)){if(l.start.row>b)break;l.start.row==b&&l.start.column>=a.column&&!(l.start.column==a.column&&this.$insertRight)&&(l.start.column+=c,l.start.row+=d);l.end.row==b&&l.end.column>=a.column&&!(l.end.column==a.column&&this.$insertRight)&&(l.end.column==a.column&&0<c&&j<k-1&&l.end.column>l.start.column&&l.end.column==i[j+1].start.column&&(l.end.column-=c),l.end.column+=c,l.end.row+=d)}}if(0!=d&&j<k)for(;j<k;j++)l=i[j],l.start.row+=d,l.end.row+=
d}}).call(d.prototype);b.RangeList=d});
ace.define("ace/edit_session/fold","require exports module ace/range ace/range_list ace/lib/oop".split(" "),function(a,b){a("../range");var c=a("../range_list").RangeList,d=a("../lib/oop"),e=b.Fold=function(a,b){this.foldLine=null;this.placeholder=b;this.range=a;this.start=a.start;this.end=a.end;this.sameRow=a.start.row==a.end.row;this.subFolds=this.ranges=[]};d.inherits(e,c);(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()};this.setFoldLine=function(a){this.foldLine=
a;this.subFolds.forEach(function(b){b.setFoldLine(a)})};this.clone=function(){var a=this.range.clone(),b=new e(a,this.placeholder);this.subFolds.forEach(function(a){b.subFolds.push(a.clone())});b.collapseChildren=this.collapseChildren;return b};this.addSubFold=function(a){if(!this.range.isEqual(a)){if(!this.range.containsRange(a))throw Error("A fold can't intersect already existing fold"+a.range+this.range);var b=this.start,c=a.start;c.row=c.row-b.row;if(c.row==0)c.column=c.column-b.column;c=a.end;
c.row=c.row-b.row;if(c.row==0)c.column=c.column-b.column;for(var d=a.start.row,e=a.start.column,b=0,c=-1;b<this.subFolds.length;b++){c=this.subFolds[b].range.compare(d,e);if(c!=1)break}d=this.subFolds[b];if(c==0)return d.addSubFold(a);for(var d=a.range.end.row,e=a.range.end.column,k=b,c=-1;k<this.subFolds.length;k++){c=this.subFolds[k].range.compare(d,e);if(c!=1)break}if(c==0)throw Error("A fold can't intersect already existing fold"+a.range+this.range);this.subFolds.splice(b,k-b,a);a.setFoldLine(this.foldLine);
return a}};this.restoreRange=function(a){var b=this.start,c=a.start;if(c.row==0)c.column=c.column+b.column;c.row=c.row+b.row;a=a.end;if(a.row==0)a.column=a.column+b.column;a.row=a.row+b.row}}).call(e.prototype)});
ace.define("ace/edit_session/folding","require exports module ace/range ace/edit_session/fold_line ace/edit_session/fold ace/token_iterator".split(" "),function(a,b){var c=a("../range").Range,d=a("./fold_line").FoldLine,e=a("./fold").Fold,h=a("../token_iterator").TokenIterator;b.Folding=function(){this.getFoldAt=function(a,b,c){var d=this.getFoldLine(a);if(!d)return null;for(var d=d.folds,e=0;e<d.length;e++){var h=d[e];if(h.range.contains(a,b)&&!(c==1&&h.range.isEnd(a,b))&&!(c==-1&&h.range.isStart(a,
b)))return h}};this.getFoldsInRange=function(a){var b=a.start,c=a.end,d=this.$foldData,e=[];b.column=b.column+1;c.column=c.column-1;for(var h=0;h<d.length;h++){var n=d[h].range.compareRange(a);if(n!=2){if(n==-2)break;for(var o=d[h].folds,t=0;t<o.length;t++){var s=o[t],n=s.range.compareRange(a);if(n==-2)break;else if(n==2)continue;else if(n==42)break;e.push(s)}}}b.column=b.column-1;c.column=c.column+1;return e};this.getFoldsInRangeList=function(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){b=
b.concat(this.getFoldsInRange(a))},this)}else b=this.getFoldsInRange(a);return b};this.getAllFolds=function(){for(var a=[],b=this.$foldData,c=0;c<b.length;c++)for(var d=0;d<b[c].folds.length;d++)a.push(b[c].folds[d]);return a};this.getFoldStringAt=function(a,b,c,d){d=d||this.getFoldLine(a);if(!d)return null;for(var e={end:{column:0}},h,n,o=0;o<d.folds.length;o++){n=d.folds[o];var t=n.range.compareEnd(a,b);if(t==-1){h=this.getLine(n.start.row).substring(e.end.column,n.start.column);break}else if(t===
0)return null;e=n}h||(h=this.getLine(n.start.row).substring(e.end.column));return c==-1?h.substring(0,b-e.end.column):c==1?h.substring(b-e.end.column):h};this.getFoldLine=function(a,b){var c=this.$foldData,d=0;b&&(d=c.indexOf(b));d==-1&&(d=0);for(d;d<c.length;d++){var e=c[d];if(e.start.row<=a&&e.end.row>=a)return e;if(e.end.row>a)break}return null};this.getNextFoldLine=function(a,b){var c=this.$foldData,d=0;b&&(d=c.indexOf(b));d==-1&&(d=0);for(d;d<c.length;d++){var e=c[d];if(e.end.row>=a)return e}return null};
this.getFoldedRowCount=function(a,b){for(var c=this.$foldData,d=b-a+1,e=0;e<c.length;e++){var h=c[e],n=h.end.row,h=h.start.row;if(n>=b){h<b&&(d=h>=a?d-(b-h):0);break}else n>=a&&(d=h>=a?d-(n-h):d-(n-a+1))}return d};this.$addFoldLine=function(a){this.$foldData.push(a);this.$foldData.sort(function(a,b){return a.start.row-b.start.row});return a};this.addFold=function(a,b){var c=this.$foldData,h=false,k;if(a instanceof e)k=a;else{k=new e(b,a);k.collapseChildren=b.collapseChildren}this.$clipRangeToDocument(k.range);
var l=k.start.row,n=k.start.column,o=k.end.row,t=k.end.column;if(!(l<o||l==o&&n<=t-2))throw Error("The range has to be at least 2 characters width");var s=this.getFoldAt(l,n,1),q=this.getFoldAt(o,t,-1);if(s&&q==s)return s.addSubFold(k);s&&!s.range.isStart(l,n)&&this.removeFold(s);q&&!q.range.isEnd(o,t)&&this.removeFold(q);n=this.getFoldsInRange(k.range);if(n.length>0){this.removeFolds(n);n.forEach(function(a){k.addSubFold(a)})}for(n=0;n<c.length;n++){var m=c[n];if(o==m.start.row){m.addFold(k);h=true;
break}else if(l==m.end.row){m.addFold(k);h=true;if(!k.sameRow&&(c=c[n+1])&&c.start.row==o){m.merge(c);break}break}else if(o<=m.start.row)break}h||(m=this.$addFoldLine(new d(this.$foldData,k)));this.$useWrapMode?this.$updateWrapData(m.start.row,m.start.row):this.$updateRowLengthCache(m.start.row,m.start.row);this.$modified=true;this._emit("changeFold",{data:k,action:"add"});return k};this.addFolds=function(a){a.forEach(function(a){this.addFold(a)},this)};this.removeFold=function(a){var b=a.foldLine,
c=b.start.row,d=b.end.row,e=this.$foldData,h=b.folds;if(h.length==1)e.splice(e.indexOf(b),1);else if(b.range.isEnd(a.end.row,a.end.column)){h.pop();b.end.row=h[h.length-1].end.row;b.end.column=h[h.length-1].end.column}else if(b.range.isStart(a.start.row,a.start.column)){h.shift();b.start.row=h[0].start.row;b.start.column=h[0].start.column}else if(a.sameRow)h.splice(h.indexOf(a),1);else{b=b.split(a.start.row,a.start.column);h=b.folds;h.shift();b.start.row=h[0].start.row;b.start.column=h[0].start.column}this.$updating||
(this.$useWrapMode?this.$updateWrapData(c,d):this.$updateRowLengthCache(c,d));this.$modified=true;this._emit("changeFold",{data:a,action:"remove"})};this.removeFolds=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);b.forEach(function(a){this.removeFold(a)},this);this.$modified=true};this.expandFold=function(a){this.removeFold(a);a.subFolds.forEach(function(b){a.restoreRange(b);this.addFold(b)},this);a.collapseChildren>0&&this.foldAll(a.start.row+1,a.end.row,a.collapseChildren-1);a.subFolds=
[]};this.expandFolds=function(a){a.forEach(function(a){this.expandFold(a)},this)};this.unfold=function(a,b){var d,e;if(a==null){d=new c(0,0,this.getLength(),0);b=true}else d=typeof a=="number"?new c(a,0,a,this.getLine(a).length):"row"in a?c.fromPoints(a,a):a;e=this.getFoldsInRangeList(d);if(b)this.removeFolds(e);else for(var h=e;h.length;){this.expandFolds(h);h=this.getFoldsInRangeList(d)}if(e.length)return e};this.isRowFolded=function(a,b){return!!this.getFoldLine(a,b)};this.getRowFoldEnd=function(a,
b){var c=this.getFoldLine(a,b);return c?c.end.row:a};this.getRowFoldStart=function(a,b){var c=this.getFoldLine(a,b);return c?c.start.row:a};this.getFoldDisplayLine=function(a,b,c,d,e){if(d==null)d=a.start.row;e==null&&(e=0);if(b==null)b=a.end.row;if(c==null)c=this.getLine(b).length;var h=this.doc,n="";a.walk(function(a,b,c,f){if(!(b<d)){if(b==d){if(c<e)return;f=Math.max(e,f)}n=a!=null?n+a:n+h.getLine(b).substring(f,c)}},b,c);return n};this.getDisplayLine=function(a,b,c,d){var e=this.getFoldLine(a);
if(e)return this.getFoldDisplayLine(e,a,b,c,d);a=this.doc.getLine(a);return a.substring(d||0,b||a.length)};this.$cloneFoldData=function(){var a=[];return a=this.$foldData.map(function(b){b=b.folds.map(function(a){return a.clone()});return new d(a,b)})};this.toggleFold=function(a){var b=this.selection.getRange(),c;if(b.isEmpty()){var d=b.start;if(c=this.getFoldAt(d.row,d.column)){this.expandFold(c);return}if(a=this.findMatchingBracket(d))if(b.comparePoint(a)==1)b.end=a;else{b.start=a;b.start.column++;
b.end.column--}else if(a=this.findMatchingBracket({row:d.row,column:d.column+1})){b.comparePoint(a)==1?b.end=a:b.start=a;b.start.column++}else b=this.getCommentFoldRange(d.row,d.column)||b}else{d=this.getFoldsInRange(b);if(a&&d.length){this.expandFolds(d);return}d.length==1&&(c=d[0])}c||(c=this.getFoldAt(b.start.row,b.start.column));if(c&&c.range.toString()==b.toString())this.expandFold(c);else{c="...";if(!b.isMultiLine()){c=this.getTextRange(b);if(c.length<4)return;c=c.trim().substring(0,2)+".."}this.addFold(c,
b)}};this.getCommentFoldRange=function(a,b,d){var e=new h(this,a,b),k=e.getCurrentToken();if(k&&/^comment|string/.test(k.type)){var l=new c,n=RegExp(k.type.replace(/\..*/,"\\."));if(d!=1){do k=e.stepBackward();while(k&&n.test(k.type));e.stepForward()}l.start.row=e.getCurrentTokenRow();l.start.column=e.getCurrentTokenColumn()+2;e=new h(this,a,b);if(d!=-1){do k=e.stepForward();while(k&&n.test(k.type));k=e.stepBackward()}else k=e.getCurrentToken();l.end.row=e.getCurrentTokenRow();l.end.column=e.getCurrentTokenColumn()+
k.value.length-2;return l}};this.foldAll=function(a,b,c){c==void 0&&(c=1E5);var d=this.foldWidgets;if(d)for(var b=b||this.getLength(),e=a=a||0;e<b;e++){d[e]==null&&(d[e]=this.getFoldWidget(e));if(d[e]=="start"){var h=this.getFoldWidgetRange(e);if(h&&h.isMultiLine()&&h.end.row<=b&&h.start.row>=a){e=h.end.row;try{var n=this.addFold("...",h);if(n)n.collapseChildren=c}catch(o){}}}}};this.$foldStyles={manual:1,markbegin:1,markbeginend:1};this.$foldStyle="markbegin";this.setFoldStyle=function(a){if(!this.$foldStyles[a])throw Error("invalid fold style: "+
a+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=a){this.$foldStyle=a;a=="manual"&&this.unfold();a=this.$foldMode;this.$setFolding(null);this.$setFolding(a)}};this.$setFolding=function(a){if(this.$foldMode!=a){this.$foldMode=a;this.removeListener("change",this.$updateFoldWidgets);this._emit("changeAnnotation");if(!a||this.$foldStyle=="manual")this.foldWidgets=null;else{this.foldWidgets=[];this.getFoldWidget=a.getFoldWidget.bind(a,this,this.$foldStyle);this.getFoldWidgetRange=
a.getFoldWidgetRange.bind(a,this,this.$foldStyle);this.$updateFoldWidgets=this.updateFoldWidgets.bind(this);this.on("change",this.$updateFoldWidgets)}}};this.getParentFoldRangeData=function(a,b){var c=this.foldWidgets;if(!c||b&&c[a])return{};for(var d=a-1,e;d>=0;){var h=c[d];h==null&&(h=c[d]=this.getFoldWidget(d));if(h=="start"){var n=this.getFoldWidgetRange(d);e||(e=n);if(n&&n.end.row>=a)break}d--}return{range:d!==-1&&n,firstRange:e}};this.onFoldWidgetClick=function(a,b){b=b.domEvent;if(!this.$toggleFoldWidget(a,
{children:b.shiftKey,all:b.ctrlKey||b.metaKey,siblings:b.altKey})){var c=b.target||b.srcElement;if(c&&/ace_fold-widget/.test(c.className))c.className=c.className+" ace_invalid"}};this.$toggleFoldWidget=function(a,b){if(this.getFoldWidget){var c=this.getFoldWidget(a),d=this.getLine(a),c=c==="end"?-1:1;if(c=this.getFoldAt(a,c===-1?0:d.length,c))b.children||b.all?this.removeFold(c):this.expandFold(c);else{if((d=this.getFoldWidgetRange(a,true))&&!d.isMultiLine())if((c=this.getFoldAt(d.start.row,d.start.column,
1))&&d.isEqual(c.range)){this.removeFold(c);return}if(b.siblings){c=this.getParentFoldRangeData(a);if(c.range)var e=c.range.start.row+1,h=c.range.end.row;this.foldAll(e,h,b.all?1E4:0)}else if(b.children){d||this.getLength();this.foldAll(a+1,d.end.row,b.all?1E4:0)}else if(d){if(b.all)d.collapseChildren=1E4;this.addFold("...",d)}return d}}};this.toggleFoldWidget=function(){var a=this.selection.getCursor().row,a=this.getRowFoldStart(a),b=this.$toggleFoldWidget(a,{});if(!b){b=this.getParentFoldRangeData(a,
true);if(b=b.range||b.firstRange){a=b.start.row;(a=this.getFoldAt(a,this.getLine(a).length,1))?this.removeFold(a):this.addFold("...",b)}}};this.updateFoldWidgets=function(a){var b=a.data,c=b.range,a=c.start.row,c=c.end.row-a;if(c===0)this.foldWidgets[a]=null;else if(b.action=="removeText"||b.action=="removeLines")this.foldWidgets.splice(a,c+1,null);else{b=Array(c+1);b.unshift(a,1);this.foldWidgets.splice.apply(this.foldWidgets,b)}}}});
ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(a,b){var c=a("../token_iterator").TokenIterator,d=a("../range").Range;b.BracketMatch=function(){this.findMatchingBracket=function(a,b){if(0==a.column)return null;var c=b||this.getLine(a.row).charAt(a.column-1);if(""==c)return null;c=c.match(/([\(\[\{])|([\)\]\}])/);return!c?null:c[1]?this.$findClosingBracket(c[1],a):this.$findOpeningBracket(c[2],a)};this.getBracketRange=function(a){var b=
this.getLine(a.row),c=!0,f=b.charAt(a.column-1);(f=f&&f.match(/([\(\[\{])|([\)\]\}])/))||(f=b.charAt(a.column),a={row:a.row,column:a.column+1},f=f&&f.match(/([\(\[\{])|([\)\]\}])/),c=!1);if(!f)return null;if(f[1]){b=this.$findClosingBracket(f[1],a);if(!b)return null;a=d.fromPoints(a,b);c||(a.end.column++,a.start.column--);a.cursor=a.end}else{b=this.$findOpeningBracket(f[2],a);if(!b)return null;a=d.fromPoints(b,a);c||(a.start.column++,a.end.column--);a.cursor=a.start}return a};this.$brackets={")":"(",
"(":")","]":"[","[":"]","{":"}","}":"{"};this.$findOpeningBracket=function(a,b,d){var f=this.$brackets[a],i=1,j=new c(this,b.row,b.column),k=j.getCurrentToken();k||(k=j.stepForward());if(k){d||(d=RegExp("(\\.?"+k.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+"));b=b.column-j.getCurrentTokenColumn()-2;for(k=k.value;;){for(;0<=b;){var l=k.charAt(b);if(l==f){if(i-=1,0==i)return{row:j.getCurrentTokenRow(),column:b+j.getCurrentTokenColumn()}}else l==a&&(i+=
1);b-=1}do k=j.stepBackward();while(k&&!d.test(k.type));if(null==k)break;k=k.value;b=k.length-1}return null}};this.$findClosingBracket=function(a,b,d){var f=this.$brackets[a],i=1,j=new c(this,b.row,b.column),k=j.getCurrentToken();k||(k=j.stepForward());if(k){d||(d=RegExp("(\\.?"+k.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+"));for(b=b.column-j.getCurrentTokenColumn();;){for(var k=k.value,l=k.length;b<l;){var n=k.charAt(b);if(n==f){if(i-=1,0==i)return{row:j.getCurrentTokenRow(),
column:b+j.getCurrentTokenColumn()}}else n==a&&(i+=1);b+=1}do k=j.stepForward();while(k&&!d.test(k.type));if(null==k)break;b=0}return null}}}});
ace.define("ace/edit_session","require exports module ace/lib/oop ace/lib/lang ace/config ace/lib/event_emitter ace/selection ace/mode/text ace/range ace/document ace/background_tokenizer ace/search_highlight ace/edit_session/folding ace/edit_session/bracket_match".split(" "),function(a,b){var c=a("./lib/oop"),d=a("./lib/lang"),e=a("./config"),h=a("./lib/event_emitter").EventEmitter,g=a("./selection").Selection,f=a("./mode/text").Mode,i=a("./range").Range,j=a("./document").Document,k=a("./background_tokenizer").BackgroundTokenizer,
l=a("./search_highlight").SearchHighlight,n=function(a,b){this.$breakpoints=[];this.$decorations=[];this.$frontMarkers={};this.$backMarkers={};this.$markerId=1;this.$undoSelect=true;this.$foldData=[];this.$foldData.toString=function(){return this.join("\n")};this.on("changeFold",this.onChangeFold.bind(this));this.$onChange=this.onChange.bind(this);if(typeof a!="object"||!a.getLine)a=new j(a);this.setDocument(a);this.selection=new g(this);e.resetOptions(this);this.setMode(b);e._signal("session",this)};
(function(){function a(b){return b<4352?false:b>=4352&&b<=4447||b>=4515&&b<=4519||b>=4602&&b<=4607||b>=9001&&b<=9002||b>=11904&&b<=11929||b>=11931&&b<=12019||b>=12032&&b<=12245||b>=12272&&b<=12283||b>=12288&&b<=12350||b>=12353&&b<=12438||b>=12441&&b<=12543||b>=12549&&b<=12589||b>=12593&&b<=12686||b>=12688&&b<=12730||b>=12736&&b<=12771||b>=12784&&b<=12830||b>=12832&&b<=12871||b>=12880&&b<=13054||b>=13056&&b<=19903||b>=19968&&b<=42124||b>=42128&&b<=42182||b>=43360&&b<=43388||b>=44032&&b<=55203||b>=
55216&&b<=55238||b>=55243&&b<=55291||b>=63744&&b<=64255||b>=65040&&b<=65049||b>=65072&&b<=65106||b>=65108&&b<=65126||b>=65128&&b<=65131||b>=65281&&b<=65376||b>=65504&&b<=65510}c.implement(this,h);this.setDocument=function(a){this.doc&&this.doc.removeListener("change",this.$onChange);this.doc=a;a.on("change",this.$onChange);this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument());this.resetCaches()};this.getDocument=function(){return this.doc};this.$resetRowCache=function(a){if(a){var b=
this.$docRowCache.length,a=this.$getRowCacheIndex(this.$docRowCache,a)+1;if(b>a){this.$docRowCache.splice(a,b);this.$screenRowCache.splice(a,b)}}else{this.$docRowCache=[];this.$screenRowCache=[]}};this.$getRowCacheIndex=function(a,b){for(var c=0,d=a.length-1;c<=d;){var e=c+d>>1,f=a[e];if(b>f)c=e+1;else if(b<f)d=e-1;else return e}return c-1};this.resetCaches=function(){this.$modified=true;this.$wrapData=[];this.$rowLengthCache=[];this.$resetRowCache(0);this.bgTokenizer&&this.bgTokenizer.start(0)};
this.onChangeFold=function(a){this.$resetRowCache(a.data.start.row)};this.onChange=function(a){var b=a.data;this.$modified=true;this.$resetRowCache(b.range.start.row);var c=this.$updateInternalDataOnChange(a);if(!this.$fromUndo&&this.$undoManager&&!b.ignore){this.$deltasDoc.push(b);c&&c.length!=0&&this.$deltasFold.push({action:"removeFolds",folds:c});this.$informUndoManager.schedule()}this.bgTokenizer&&this.bgTokenizer.$updateOnChange(b);this._signal("change",a)};this.setValue=function(a){this.doc.setValue(a);
this.selection.moveTo(0,0);this.$resetRowCache(0);this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];this.setUndoManager(this.$undoManager);this.getUndoManager().reset()};this.getValue=this.toString=function(){return this.doc.getValue()};this.getSelection=function(){return this.selection};this.getState=function(a){return this.bgTokenizer.getState(a)};this.getTokens=function(a){return this.bgTokenizer.getTokens(a)};this.getTokenAt=function(a,b){var c=this.bgTokenizer.getTokens(a),d=0;if(b==null){e=
c.length-1;d=this.getLine(a).length}else for(var e=0;e<c.length;e++){d=d+c[e].value.length;if(d>=b)break}c=c[e];if(!c)return null;c.index=e;c.start=d-c.value.length;return c};this.setUndoManager=function(a){this.$undoManager=a;this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];this.$informUndoManager&&this.$informUndoManager.cancel();if(a){var b=this;this.$syncInformUndoManager=function(){b.$informUndoManager.cancel();if(b.$deltasFold.length){b.$deltas.push({group:"fold",deltas:b.$deltasFold});
b.$deltasFold=[]}if(b.$deltasDoc.length){b.$deltas.push({group:"doc",deltas:b.$deltasDoc});b.$deltasDoc=[]}b.$deltas.length>0&&a.execute({action:"aceupdate",args:[b.$deltas,b],merge:b.mergeUndoDeltas});b.mergeUndoDeltas=false;b.$deltas=[]};this.$informUndoManager=d.delayedCall(this.$syncInformUndoManager)}};this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()};this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}};this.getUndoManager=
function(){return this.$undoManager||this.$defaultUndoManager};this.getTabString=function(){return this.getUseSoftTabs()?d.stringRepeat(" ",this.getTabSize()):"\t"};this.setUseSoftTabs=function(a){this.setOption("useSoftTabs",a)};this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs};this.setTabSize=function(a){this.setOption("tabSize",a)};this.getTabSize=function(){return this.$tabSize};this.isTabStop=function(a){return this.$useSoftTabs&&a.column%this.$tabSize===0};
this.$overwrite=false;this.setOverwrite=function(a){this.setOption("overwrite",a)};this.getOverwrite=function(){return this.$overwrite};this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)};this.addGutterDecoration=function(a,b){this.$decorations[a]||(this.$decorations[a]="");this.$decorations[a]=this.$decorations[a]+(" "+b);this._signal("changeBreakpoint",{})};this.removeGutterDecoration=function(a,b){this.$decorations[a]=(this.$decorations[a]||"").replace(" "+b,"");this._signal("changeBreakpoint",
{})};this.getBreakpoints=function(){return this.$breakpoints};this.setBreakpoints=function(a){this.$breakpoints=[];for(var b=0;b<a.length;b++)this.$breakpoints[a[b]]="ace_breakpoint";this._signal("changeBreakpoint",{})};this.clearBreakpoints=function(){this.$breakpoints=[];this._signal("changeBreakpoint",{})};this.setBreakpoint=function(a,b){b===void 0&&(b="ace_breakpoint");b?this.$breakpoints[a]=b:delete this.$breakpoints[a];this._signal("changeBreakpoint",{})};this.clearBreakpoint=function(a){delete this.$breakpoints[a];
this._signal("changeBreakpoint",{})};this.addMarker=function(a,b,c,d){var e=this.$markerId++,a={range:a,type:c||"line",renderer:typeof c=="function"?c:null,clazz:b,inFront:!!d,id:e};if(d){this.$frontMarkers[e]=a;this._signal("changeFrontMarker")}else{this.$backMarkers[e]=a;this._signal("changeBackMarker")}return e};this.addDynamicMarker=function(a,b){if(a.update){var c=this.$markerId++;a.id=c;a.inFront=!!b;if(b){this.$frontMarkers[c]=a;this._signal("changeFrontMarker")}else{this.$backMarkers[c]=a;
this._signal("changeBackMarker")}return a}};this.removeMarker=function(a){var b=this.$frontMarkers[a]||this.$backMarkers[a];if(b){var c=b.inFront?this.$frontMarkers:this.$backMarkers;if(b){delete c[a];this._signal(b.inFront?"changeFrontMarker":"changeBackMarker")}}};this.getMarkers=function(a){return a?this.$frontMarkers:this.$backMarkers};this.highlight=function(a){if(!this.$searchHighlight)this.$searchHighlight=this.addDynamicMarker(new l(null,"ace_selected-word","text"));this.$searchHighlight.setRegexp(a)};
this.highlightLines=function(a,b,c,d){if(typeof b!="number"){c=b;b=a}c||(c="ace_step");a=new i(a,0,b,Infinity);a.id=this.addMarker(a,c,"fullLine",d);return a};this.setAnnotations=function(a){this.$annotations=a;this._signal("changeAnnotation",{})};this.getAnnotations=function(){return this.$annotations||[]};this.clearAnnotations=function(){this.setAnnotations([])};this.$detectNewLine=function(a){this.$autoNewLine=(a=a.match(/^.*?(\r?\n)/m))?a[1]:"\n"};this.getWordRange=function(a,b){var c=this.getLine(a),
d=false;b>0&&(d=!!c.charAt(b-1).match(this.tokenRe));d||(d=!!c.charAt(b).match(this.tokenRe));var d=d?this.tokenRe:/^\s+$/.test(c.slice(b-1,b+1))?/\s/:this.nonTokenRe,e=b;if(e>0){do e--;while(e>=0&&c.charAt(e).match(d));e++}for(var f=b;f<c.length&&c.charAt(f).match(d);)f++;return new i(a,e,a,f)};this.getAWordRange=function(a,b){for(var c=this.getWordRange(a,b),d=this.getLine(c.end.row);d.charAt(c.end.column).match(/[ \t]/);)c.end.column=c.end.column+1;return c};this.setNewLineMode=function(a){this.doc.setNewLineMode(a)};
this.getNewLineMode=function(){return this.doc.getNewLineMode()};this.setUseWorker=function(a){this.setOption("useWorker",a)};this.getUseWorker=function(){return this.$useWorker};this.onReloadTokenizer=function(a){this.bgTokenizer.start(a.data.first);this._signal("tokenizerUpdate",a)};this.$modes={};this.$modeId=this.$mode=null;this.setMode=function(a,b){if(a&&typeof a==="object"){if(a.getTokenizer)return this.$onChangeMode(a);var c=a,d=c.path}else d=a||"ace/mode/text";this.$modes["ace/mode/text"]||
(this.$modes["ace/mode/text"]=new f);if(this.$modes[d]&&!c){this.$onChangeMode(this.$modes[d]);b&&b()}else{this.$modeId=d;e.loadModule(["mode",d],function(a){if(this.$modeId!==d)return b&&b();if(this.$modes[d]&&!c)return this.$onChangeMode(this.$modes[d]);if(a&&a.Mode){a=new a.Mode(c);if(!c){this.$modes[d]=a;a.$id=d}this.$onChangeMode(a);b&&b()}}.bind(this));this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],true)}};this.$onChangeMode=function(a,b){if(!b)this.$modeId=a.$id;if(this.$mode!==
a){this.$mode=a;this.$stopWorker();this.$useWorker&&this.$startWorker();var c=a.getTokenizer();if(c.addEventListener!==void 0){var d=this.onReloadTokenizer.bind(this);c.addEventListener("update",d)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(c);else{this.bgTokenizer=new k(c);var e=this;this.bgTokenizer.addEventListener("update",function(a){e._signal("tokenizerUpdate",a)})}this.bgTokenizer.setDocument(this.getDocument());this.tokenRe=a.tokenRe;this.nonTokenRe=a.nonTokenRe;if(!b){a.attachToSession&&
a.attachToSession(this);this.$options.wrapMethod.set.call(this,this.$wrapMethod);this.$setFolding(a.foldingRules);this.bgTokenizer.start(0);this._emit("changeMode")}}};this.$stopWorker=function(){if(this.$worker){this.$worker.terminate();this.$worker=null}};this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(a){if(typeof console=="object"){console.log("Could not load worker");console.log(a)}this.$worker=null}};this.getMode=function(){return this.$mode};this.$scrollTop=
0;this.setScrollTop=function(a){if(!(this.$scrollTop===a||isNaN(a))){this.$scrollTop=a;this._signal("changeScrollTop",a)}};this.getScrollTop=function(){return this.$scrollTop};this.$scrollLeft=0;this.setScrollLeft=function(a){if(!(this.$scrollLeft===a||isNaN(a))){this.$scrollLeft=a;this._signal("changeScrollLeft",a)}};this.getScrollLeft=function(){return this.$scrollLeft};this.getScreenWidth=function(){this.$computeWidth();return this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):
this.screenWidth};this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var a=0;this.lineWidgets.forEach(function(b){if(b&&b.screenWidth>a)a=b.screenWidth});return this.lineWidgetWidth=a};this.$computeWidth=function(a){if(this.$modified||a){this.$modified=false;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var a=this.doc.getAllLines(),b=this.$rowLengthCache,c=0,d=0,e=this.$foldData[d],f=e?e.start.row:Infinity,g=a.length,h=0;h<g;h++){if(h>
f){h=e.end.row+1;if(h>=g)break;f=(e=this.$foldData[d++])?e.start.row:Infinity}b[h]==null&&(b[h]=this.$getStringScreenWidth(a[h])[0]);b[h]>c&&(c=b[h])}this.screenWidth=c}};this.getLine=function(a){return this.doc.getLine(a)};this.getLines=function(a,b){return this.doc.getLines(a,b)};this.getLength=function(){return this.doc.getLength()};this.getTextRange=function(a){return this.doc.getTextRange(a||this.selection.getRange())};this.insert=function(a,b){return this.doc.insert(a,b)};this.remove=function(a){return this.doc.remove(a)};
this.undoChanges=function(a,b){if(a.length){this.$fromUndo=true;for(var c=null,d=a.length-1;d!=-1;d--){var e=a[d];if(e.group=="doc"){this.doc.revertDeltas(e.deltas);c=this.$getUndoSelection(e.deltas,true,c)}else e.deltas.forEach(function(a){this.addFolds(a.folds)},this)}this.$fromUndo=false;c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c);return c}};this.redoChanges=function(a,b){if(a.length){this.$fromUndo=true;for(var c=null,d=0;d<a.length;d++){var e=a[d];if(e.group=="doc"){this.doc.applyDeltas(e.deltas);
c=this.$getUndoSelection(e.deltas,false,c)}}this.$fromUndo=false;c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c);return c}};this.setUndoSelect=function(a){this.$undoSelect=a};this.$getUndoSelection=function(a,b,c){function d(a){a=a.action==="insertText"||a.action==="insertLines";return b?!a:a}var e=a[0],f,g;f=d(e)?i.fromPoints(e.range.start,e.range.end):i.fromPoints(e.range.start,e.range.start);for(var h=1;h<a.length;h++){e=a[h];if(d(e)){g=e.range.start;f.compare(g.row,g.column)==-1&&
f.setStart(e.range.start);g=e.range.end;f.compare(g.row,g.column)==1&&f.setEnd(e.range.end)}else{g=e.range.start;f.compare(g.row,g.column)==-1&&(f=i.fromPoints(e.range.start,e.range.start))}}if(c!=null){if(i.comparePoints(c.start,f.start)===0){c.start.column=c.start.column+(f.end.column-f.start.column);c.end.column=c.end.column+(f.end.column-f.start.column)}a=c.compareRange(f);a==1?f.setStart(c.start):a==-1&&f.setEnd(c.end)}return f};this.replace=function(a,b){return this.doc.replace(a,b)};this.moveText=
function(a,b,c){var d=this.getTextRange(a),e=this.getFoldsInRange(a),b=i.fromPoints(b,b);if(!c){this.remove(a);var f=a.start.row-a.end.row,g=f?-a.end.column:a.start.column-a.end.column;if(g){if(b.start.row==a.end.row&&b.start.column>a.end.column)b.start.column=b.start.column+g;if(b.end.row==a.end.row&&b.end.column>a.end.column)b.end.column=b.end.column+g}if(f&&b.start.row>=a.end.row){b.start.row=b.start.row+f;b.end.row=b.end.row+f}}b.end=this.insert(b.start,d);if(e.length){var h=a.start,a=b.start,
f=a.row-h.row,g=a.column-h.column;this.addFolds(e.map(function(a){a=a.clone();if(a.start.row==h.row)a.start.column=a.start.column+g;if(a.end.row==h.row)a.end.column=a.end.column+g;a.start.row=a.start.row+f;a.end.row=a.end.row+f;return a}))}return b};this.indentRows=function(a,b,c){for(c=c.replace(/\t/g,this.getTabString());a<=b;a++)this.insert({row:a,column:0},c)};this.outdentRows=function(a){for(var a=a.collapseRows(),b=new i(0,0,0,0),c=this.getTabSize(),d=a.start.row;d<=a.end.row;++d){var e=this.getLine(d);
b.start.row=d;b.end.row=d;for(var f=0;f<c;++f)if(e.charAt(f)!=" ")break;if(f<c&&e.charAt(f)=="\t"){b.start.column=f;b.end.column=f+1}else{b.start.column=0;b.end.column=f}this.remove(b)}};this.$moveLines=function(a,b,c){a=this.getRowFoldStart(a);b=this.getRowFoldEnd(b);if(c<0){var d=this.getRowFoldStart(a+c);if(d<0)return 0;var e=d-a}else if(c>0){d=this.getRowFoldEnd(b+c);if(d>this.doc.getLength()-1)return 0;e=d-b}else{a=this.$clipRowToDocument(a);b=this.$clipRowToDocument(b);e=b-a+1}d=this.getFoldsInRange(new i(a,
0,b,Number.MAX_VALUE)).map(function(a){a=a.clone();a.start.row=a.start.row+e;a.end.row=a.end.row+e;return a});b=c==0?this.doc.getLines(a,b):this.doc.removeLines(a,b);this.doc.insertLines(a+e,b);d.length&&this.addFolds(d);return e};this.moveLinesUp=function(a,b){return this.$moveLines(a,b,-1)};this.moveLinesDown=function(a,b){return this.$moveLines(a,b,1)};this.duplicateLines=function(a,b){return this.$moveLines(a,b,0)};this.$clipRowToDocument=function(a){return Math.max(0,Math.min(a,this.doc.getLength()-
1))};this.$clipColumnToRow=function(a,b){return b<0?0:Math.min(this.doc.getLine(a).length,b)};this.$clipPositionToDocument=function(a,b){b=Math.max(0,b);if(a<0)b=a=0;else{var c=this.doc.getLength();if(a>=c){a=c-1;b=this.doc.getLine(c-1).length}else b=Math.min(this.doc.getLine(a).length,b)}return{row:a,column:b}};this.$clipRangeToDocument=function(a){if(a.start.row<0){a.start.row=0;a.start.column=0}else a.start.column=this.$clipColumnToRow(a.start.row,a.start.column);var b=this.doc.getLength()-1;if(a.end.row>
b){a.end.row=b;a.end.column=this.doc.getLine(b).length}else a.end.column=this.$clipColumnToRow(a.end.row,a.end.column);return a};this.$wrapLimit=80;this.$useWrapMode=false;this.$wrapLimitRange={min:null,max:null};this.setUseWrapMode=function(a){if(a!=this.$useWrapMode){this.$useWrapMode=a;this.$modified=true;this.$resetRowCache(0);if(a){a=this.getLength();this.$wrapData=Array(a);this.$updateWrapData(0,a-1)}this._signal("changeWrapMode")}};this.getUseWrapMode=function(){return this.$useWrapMode};this.setWrapLimitRange=
function(a,b){if(this.$wrapLimitRange.min!==a||this.$wrapLimitRange.max!==b){this.$wrapLimitRange={min:a,max:b};this.$modified=true;this._signal("changeWrapMode")}};this.adjustWrapLimit=function(a,b){var c=this.$wrapLimitRange;c.max<0&&(c={min:b,max:b});c=this.$constrainWrapLimit(a,c.min,c.max);if(c!=this.$wrapLimit&&c>1){this.$wrapLimit=c;this.$modified=true;if(this.$useWrapMode){this.$updateWrapData(0,this.getLength()-1);this.$resetRowCache(0);this._signal("changeWrapLimit")}return true}return false};
this.$constrainWrapLimit=function(a,b,c){b&&(a=Math.max(b,a));c&&(a=Math.min(c,a));return a};this.getWrapLimit=function(){return this.$wrapLimit};this.setWrapLimit=function(a){this.setWrapLimitRange(a,a)};this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}};this.$updateInternalDataOnChange=function(a){var b=this.$useWrapMode,c,d=a.data.action,e=a.data.range.start.row,f=a.data.range.end.row,g=a.data.range.start,h=a.data.range.end,i=null;if(d.indexOf("Lines")!=
-1){f=d=="insertLines"?e+a.data.lines.length:e;c=a.data.lines?a.data.lines.length:f-e}else c=f-e;this.$updating=true;if(c!=0)if(d.indexOf("remove")!=-1){this[b?"$wrapData":"$rowLengthCache"].splice(e,c);d=this.$foldData;i=this.getFoldsInRange(a.data.range);this.removeFolds(i);var a=this.getFoldLine(h.row),j=0;if(a){a.addRemoveChars(h.row,h.column,g.column-h.column);a.shiftRow(-c);if((f=this.getFoldLine(e))&&f!==a){f.merge(a);a=f}j=d.indexOf(a)+1}for(j;j<d.length;j++){a=d[j];a.start.row>=h.row&&a.shiftRow(-c)}f=
e}else{d=Array(c);d.unshift(e,0);a=b?this.$wrapData:this.$rowLengthCache;a.splice.apply(a,d);d=this.$foldData;a=this.getFoldLine(e);j=0;if(a){j=a.range.compareInside(g.row,g.column);if(j==0){if(a=a.split(g.row,g.column)){a.shiftRow(c);a.addRemoveChars(f,0,h.column-g.column)}}else if(j==-1){a.addRemoveChars(e,0,h.column-g.column);a.shiftRow(c)}j=d.indexOf(a)+1}for(j;j<d.length;j++){a=d[j];a.start.row>=e&&a.shiftRow(c)}}else{c=Math.abs(a.data.range.start.column-a.data.range.end.column);if(d.indexOf("remove")!=
-1){i=this.getFoldsInRange(a.data.range);this.removeFolds(i);c=-c}(a=this.getFoldLine(e))&&a.addRemoveChars(e,g.column,c)}b&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!");this.$updating=false;b?this.$updateWrapData(e,f):this.$updateRowLengthCache(e,f);return i};this.$updateRowLengthCache=function(a,b){this.$rowLengthCache[a]=null;this.$rowLengthCache[b]=null};this.$updateWrapData=function(a,c){for(var d=this.doc.getAllLines(),
e=this.getTabSize(),f=this.$wrapData,h=this.$wrapLimit,i,j,k=a,c=Math.min(c,d.length-1);k<=c;)if(j=this.getFoldLine(k,j)){i=[];j.walk(function(a,c,e,f){if(a!=null){a=this.$getDisplayTokens(a,i.length);a[0]=b;for(c=1;c<a.length;c++)a[c]=g}else a=this.$getDisplayTokens(d[c].substring(f,e),i.length);i=i.concat(a)}.bind(this),j.end.row,d[j.end.row].length+1);f[j.start.row]=this.$computeWrapSplits(i,h,e);k=j.end.row+1}else{i=this.$getDisplayTokens(d[k]);f[k]=this.$computeWrapSplits(i,h,e);k++}};var b=
3,g=4;this.$computeWrapSplits=function(a,c){function d(b){var c=a.slice(h,b),f=c.length;c.join("").replace(/12/g,function(){f=f-1}).replace(/2/g,function(){f=f-1});i=i+f;e.push(i);h=b}if(a.length==0)return[];for(var e=[],f=a.length,h=0,i=0,j=this.$wrapAsCode;f-h>c;){var k=h+c;if(a[k-1]>=10&&a[k]>=10)d(k);else if(a[k]==b||a[k]==g){for(k;k!=h-1;k--)if(a[k]==b)break;if(!(k>h)){k=h+c;for(k;k<a.length;k++)if(a[k]!=g)break;if(k==a.length)break}d(k)}else{for(var l=Math.max(k-(j?10:c-(c>>2)),h-1);k>l&&a[k]<
b;)k--;if(j){for(;k>l&&a[k]<b;)k--;for(;k>l&&a[k]==9;)k--}else for(;k>l&&a[k]<10;)k--;if(k>l)d(++k);else{k=h+c;a[k]==2&&k--;d(k)}}}return e};this.$getDisplayTokens=function(b,c){for(var d=[],e,c=c||0,f=0;f<b.length;f++){e=b.charCodeAt(f);if(e==9){e=this.getScreenTabSize(d.length+c);d.push(11);for(var g=1;g<e;g++)d.push(12)}else e==32?d.push(10):e>39&&e<48||e>57&&e<64?d.push(9):e>=4352&&a(e)?d.push(1,2):d.push(1)}return d};this.$getStringScreenWidth=function(b,c,d){if(c==0)return[0,0];c==null&&(c=
Infinity);var d=d||0,e,f;for(f=0;f<b.length;f++){e=b.charCodeAt(f);d=e==9?d+this.getScreenTabSize(d):e>=4352&&a(e)?d+2:d+1;if(d>c)break}return[d,f]};this.lineWidgets=null;this.getRowLength=function(a){var b=this.lineWidgets?this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:0;return!this.$useWrapMode||!this.$wrapData[a]?1+b:this.$wrapData[a].length+1+b};this.getRowLineCount=function(a){return!this.$useWrapMode||!this.$wrapData[a]?1:this.$wrapData[a].length+1};this.getScreenLastRowColumn=function(a){a=
this.screenToDocumentPosition(a,Number.MAX_VALUE);return this.documentToScreenColumn(a.row,a.column)};this.getDocumentLastRowColumn=function(a,b){return this.getScreenLastRowColumn(this.documentToScreenRow(a,b))};this.getDocumentLastRowColumnPosition=function(a,b){return this.screenToDocumentPosition(this.documentToScreenRow(a,b),Number.MAX_VALUE/10)};this.getRowSplitData=function(a){if(this.$useWrapMode)return this.$wrapData[a]};this.getScreenTabSize=function(a){return this.$tabSize-a%this.$tabSize};
this.screenToDocumentRow=function(a,b){return this.screenToDocumentPosition(a,b).row};this.screenToDocumentColumn=function(a,b){return this.screenToDocumentPosition(a,b).column};this.screenToDocumentPosition=function(a,b){if(a<0)return{row:0,column:0};var c,d=0,e=0,f,g=0;c=0;var h=this.$screenRowCache,i=this.$getRowCacheIndex(h,a),j=h.length;if(j&&i>=0){g=h[i];d=this.$docRowCache[i];i=a>h[j-1]}else i=!j;for(var j=this.getLength()-1,k=(h=this.getNextFoldLine(d))?h.start.row:Infinity;g<=a;){c=this.getRowLength(d);
if(g+c>a||d>=j)break;else{g=g+c;d++;if(d>k){d=h.end.row+1;k=(h=this.getNextFoldLine(d,h))?h.start.row:Infinity}}if(i){this.$docRowCache.push(d);this.$screenRowCache.push(g)}}if(h&&h.start.row<=d){c=this.getFoldDisplayLine(h);d=h.start.row}else{if(g+c<=a||d>j)return{row:j,column:this.getLine(j).length};c=this.getLine(d);h=null}if(this.$useWrapMode&&(i=this.$wrapData[d])){g=Math.floor(a-g);f=i[g];if(g>0&&i.length){e=i[g-1]||i[i.length-1];c=c.substring(e)}}e=e+this.$getStringScreenWidth(c,b)[1];this.$useWrapMode&&
e>=f&&(e=f-1);return h?h.idxToPosition(e):{row:d,column:e}};this.documentToScreenPosition=function(a,b){var c=typeof b==="undefined"?this.$clipPositionToDocument(a.row,a.column):this.$clipPositionToDocument(a,b),a=c.row,b=c.column,c=0,d=null;if(d=this.getFoldAt(a,b,1)){a=d.start.row;b=d.start.column}var e,d=0;e=this.$docRowCache;var f=this.$getRowCacheIndex(e,a),g=e.length;if(g&&f>=0)var d=e[f],c=this.$screenRowCache[f],h=a>e[g-1];else h=!g;for(g=(f=this.getNextFoldLine(d))?f.start.row:Infinity;d<
a;){if(d>=g){e=f.end.row+1;if(e>a)break;g=(f=this.getNextFoldLine(e,f))?f.start.row:Infinity}else e=d+1;c=c+this.getRowLength(d);d=e;if(h){this.$docRowCache.push(d);this.$screenRowCache.push(c)}}if(f&&d>=g){e=this.getFoldDisplayLine(f,a,b);d=f.start.row}else{e=this.getLine(a).substring(0,b);d=a}if(this.$useWrapMode&&(d=this.$wrapData[d])){for(f=0;e.length>=d[f];){c++;f++}e=e.substring(d[f-1]||0,e.length)}return{row:c,column:this.$getStringScreenWidth(e)[0]}};this.documentToScreenColumn=function(a,
b){return this.documentToScreenPosition(a,b).column};this.documentToScreenRow=function(a,b){return this.documentToScreenPosition(a,b).row};this.getScreenLength=function(){var a=0,b=null;if(this.$useWrapMode)for(var c=this.$wrapData.length,d=0,e=0,f=(b=this.$foldData[e++])?b.start.row:Infinity;d<c;){var g=this.$wrapData[d],a=a+(g?g.length+1:1);d++;if(d>f){d=b.end.row+1;f=(b=this.$foldData[e++])?b.start.row:Infinity}}else{a=this.getLength();c=this.$foldData;for(e=0;e<c.length;e++){b=c[e];a=a-(b.end.row-
b.start.row)}}this.lineWidgets&&(a=a+this.$getWidgetScreenLength());return a};this.$setFontMetrics=function(){};this.destroy=function(){if(this.bgTokenizer){this.bgTokenizer.setDocument(null);this.bgTokenizer=null}this.$stopWorker()}}).call(n.prototype);a("./edit_session/folding").Folding.call(n.prototype);a("./edit_session/bracket_match").BracketMatch.call(n.prototype);e.defineOptions(n.prototype,"session",{wrap:{set:function(a){!a||a=="off"?a=false:a=="free"?a=true:a=="printMargin"?a=-1:typeof a==
"string"&&(a=parseInt(a,10)||false);if(this.$wrap!=a){if(a){var b=typeof a=="number"?a:null;this.setWrapLimitRange(b,b);this.setUseWrapMode(true)}else this.setUseWrapMode(false);this.$wrap=a}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":!this.getWrapLimitRange().min?"free":this.$wrap:"off"},handlesSet:true},wrapMethod:{set:function(a){a=a=="auto"?this.$mode.type!="text":a!="text";if(a!=this.$wrapAsCode){this.$wrapAsCode=a;if(this.$useWrapMode){this.$modified=true;this.$resetRowCache(0);
this.$updateWrapData(0,this.getLength()-1)}}},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(a){this.$useWorker=a;this.$stopWorker();a&&this.$startWorker()},initialValue:true},useSoftTabs:{initialValue:true},tabSize:{set:function(a){if(!(isNaN(a)||this.$tabSize===a)){this.$modified=true;this.$rowLengthCache=[];this.$tabSize=a;this._signal("changeTabSize")}},initialValue:4,handlesSet:true},overwrite:{set:function(){this._signal("changeOverwrite")},
initialValue:false},newLineMode:{set:function(a){this.doc.setNewLineMode(a)},get:function(){return this.doc.getNewLineMode()},handlesSet:true},mode:{set:function(a){this.setMode(a)},get:function(){return this.$modeId}}});b.EditSession=n});
ace.define("ace/search","require exports module ace/lib/lang ace/lib/oop ace/range".split(" "),function(a,b){var c=a("./lib/lang"),d=a("./lib/oop"),e=a("./range").Range,h=function(){this.$options={}};(function(){this.set=function(a){d.mixin(this.$options,a);return this};this.getOptions=function(){return c.copyObject(this.$options)};this.setOptions=function(a){this.$options=a};this.find=function(a){a=this.$matchIterator(a,this.$options);if(!a)return false;var b=null;a.forEach(function(a,c,d){if(a.start)b=
a;else{d=a.offset+(d||0);b=new e(c,d,c,d+a.length)}return true});return b};this.findAll=function(a){var b=this.$options;if(!b.needle)return[];this.$assembleRegExp(b);var d=b.range,h=d?a.getLines(d.start.row,d.end.row):a.doc.getAllLines(),a=[],k=b.re;if(b.$isMultiLine){var l=k.length,n=h.length-l,o,t=k.offset||0;a:for(;t<=n;t++){for(b=0;b<l;b++)if(h[t+b].search(k[b])==-1)continue a;var s=h[t],b=h[t+l-1],s=s.length-s.match(k[0])[0].length,b=b.match(k[l-1])[0].length;if(!o||!(o.end.row===t&&o.end.column>
s)){a.push(o=new e(t,s,t+l-1,b));l>2&&(t=t+l-2)}}}else for(o=0;o<h.length;o++){l=c.getMatchOffsets(h[o],k);for(b=0;b<l.length;b++){n=l[b];a.push(new e(o,n.offset,o,n.offset+n.length))}}if(d){k=h=d.start.column;o=0;for(b=a.length-1;o<b&&a[o].start.column<h&&a[o].start.row==d.start.row;)o++;for(;o<b&&a[b].end.column>k&&a[b].end.row==d.end.row;)b--;a=a.slice(o,b+1);o=0;for(b=a.length;o<b;o++){a[o].start.row=a[o].start.row+d.start.row;a[o].end.row=a[o].end.row+d.start.row}}return a};this.replace=function(a,
b){var c=this.$options,d=this.$assembleRegExp(c);if(c.$isMultiLine)return b;if(d){var e=d.exec(a);if(!e||e[0].length!=a.length)return null;b=a.replace(d,b);if(c.preserveCase){b=b.split("");for(c=Math.min(a.length,a.length);c--;){d=a[c];b[c]=d&&d.toLowerCase()!=d?b[c].toUpperCase():b[c].toLowerCase()}b=b.join("")}return b}};this.$matchIterator=function(a,b){var d=this.$assembleRegExp(b);if(!d)return false;var h=this,k,l=b.backwards;if(b.$isMultiLine)var n=d.length,o=function(b,c,f){var h=b.search(d[0]);
if(h!=-1){for(var j=1;j<n;j++){b=a.getLine(c+j);if(b.search(d[j])==-1)return}b=b.match(d[n-1])[0].length;c=new e(c,h,c+n-1,b);if(d.offset==1){c.start.row--;c.start.column=Number.MAX_VALUE}else if(f)c.start.column=c.start.column+f;if(k(c))return true}};else o=l?function(a,b,e){for(var a=c.getMatchOffsets(a,d),f=a.length-1;f>=0;f--)if(k(a[f],b,e))return true}:function(a,b,e){for(var a=c.getMatchOffsets(a,d),f=0;f<a.length;f++)if(k(a[f],b,e))return true};return{forEach:function(c){k=c;h.$lineIterator(a,
b).forEach(o)}}};this.$assembleRegExp=function(a,b){if(a.needle instanceof RegExp)return a.re=a.needle;var d=a.needle;if(!a.needle)return a.re=false;a.regExp||(d=c.escapeRegExp(d));a.wholeWord&&(d="\\b"+d+"\\b");var e=a.caseSensitive?"gm":"gmi";a.$isMultiLine=!b&&/[\n\r]/.test(d);if(a.$isMultiLine)return a.re=this.$assembleMultilineRegExp(d,e);try{var h=RegExp(d,e)}catch(l){h=false}return a.re=h};this.$assembleMultilineRegExp=function(a,b){for(var c=a.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),d=[],
e=0;e<c.length;e++)try{d.push(RegExp(c[e],b))}catch(h){return false}if(c[0]==""){d.shift();d.offset=1}else d.offset=0;return d};this.$lineIterator=function(a,b){var c=b.backwards==true,d=b.skipCurrent!=false,e=b.range,h=b.start;h||(h=e?e[c?"end":"start"]:a.selection.getRange());h.start&&(h=h[d!=c?"end":"start"]);var n=e?e.start.row:0,o=e?e.end.row:a.getLength()-1;return{forEach:c?function(c){var d=h.row,e=a.getLine(d).substring(0,h.column);if(!c(e,d)){for(d--;d>=n;d--)if(c(a.getLine(d),d))return;
if(b.wrap!=false){d=o;for(n=h.row;d>=n;d--)if(c(a.getLine(d),d))break}}}:function(c){var d=h.row,e=a.getLine(d).substr(h.column);if(!c(e,d,h.column)){for(d=d+1;d<=o;d++)if(c(a.getLine(d),d))return;if(b.wrap!=false){d=n;for(o=h.row;d<=o;d++)if(c(a.getLine(d),d))break}}}}}}).call(h.prototype);b.Search=h});
ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,b){function c(a,b){this.platform=b||(h.isMac?"mac":"win");this.commands={};this.commandKeyBinding={};this.addCommands(a);this.$singleCommand=!0}function d(a,b){c.call(this,a,b);this.$singleCommand=!1}var e=a("../lib/keys"),h=a("../lib/useragent"),g=e.KEY_MODS;d.prototype=c.prototype;(function(){this.addCommand=function(a){this.commands[a.name]&&this.removeCommand(a);this.commands[a.name]=
a;a.bindKey&&this._buildKeyHash(a)};this.removeCommand=function(a,b){var c=a&&("string"===typeof a?a:a.name),a=this.commands[c];b||delete this.commands[c];var c=this.commandKeyBinding,d;for(d in c){var e=c[d];if(e==a)delete c[d];else if(Array.isArray(e)){var g=e.indexOf(a);-1!=g&&(e.splice(g,1),1==e.length&&(c[d]=e[0]))}}};this.bindKey=function(a,b,c){"object"==typeof a&&(a=a[this.platform]);if(a){if("function"==typeof b)return this.addCommand({exec:b,bindKey:a,name:b.name||a});a.split("|").forEach(function(a){var d=
"";if(-1!=a.indexOf(" ")){var e=a.split(/\s+/),a=e.pop();e.forEach(function(a){a=this.parseKeys(a);d+=(d?" ":"")+(g[a.hashId]+a.key);this._addCommandToBinding(d,"chainKeys")},this);d+=" "}a=this.parseKeys(a);this._addCommandToBinding(d+(g[a.hashId]+a.key),b,c)},this)}};this._addCommandToBinding=function(a,b,c){var d=this.commandKeyBinding,e;b?!d[a]||this.$singleCommand?d[a]=b:(Array.isArray(d[a])?-1!=(e=d[a].indexOf(b))&&d[a].splice(e,1):d[a]=[d[a]],c||b.isDefault?d[a].unshift(b):d[a].push(b)):delete d[a]};
this.addCommands=function(a){a&&Object.keys(a).forEach(function(b){var c=a[b];if(c){if("string"===typeof c)return this.bindKey(c,b);"function"===typeof c&&(c={exec:c});"object"===typeof c&&(c.name||(c.name=b),this.addCommand(c))}},this)};this.removeCommands=function(a){Object.keys(a).forEach(function(b){this.removeCommand(a[b])},this)};this.bindKeys=function(a){Object.keys(a).forEach(function(b){this.bindKey(b,a[b])},this)};this._buildKeyHash=function(a){this.bindKey(a.bindKey,a)};this.parseKeys=
function(a){var b=a.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(a){return a}),c=b.pop(),d=e[c];if(e.FUNCTION_KEYS[d])c=e.FUNCTION_KEYS[d].toLowerCase();else if(b.length){if(1==b.length&&"shift"==b[0])return{key:c.toUpperCase(),hashId:-1}}else return{key:c,hashId:-1};for(var d=0,g=b.length;g--;){var h=e.KEY_MODS[b[g]];if(null==h)return"undefined"!=typeof console&&console.error("invalid modifier "+b[g]+" in "+a),!1;d|=h}return{key:c,hashId:d}};this.findKeyCommand=function(a,b){return this.commandKeyBinding[g[a]+
b]};this.handleKeyboard=function(a,b,c,d){b=g[b]+c;c=this.commandKeyBinding[b];a.$keyChain&&(a.$keyChain+=" "+b,c=this.commandKeyBinding[a.$keyChain]||c);if(c&&("chainKeys"==c||"chainKeys"==c[c.length-1]))return a.$keyChain=a.$keyChain||b,{command:"null"};a.$keyChain&&0<d&&(a.$keyChain="");return{command:c}}}).call(c.prototype);b.HashHandler=c;b.MultiHashHandler=d});
ace.define("ace/commands/command_manager","require exports module ace/lib/oop ace/keyboard/hash_handler ace/lib/event_emitter".split(" "),function(a,b){var c=a("../lib/oop"),d=a("../keyboard/hash_handler").MultiHashHandler,e=a("../lib/event_emitter").EventEmitter,h=function(a,b){d.call(this,b,a);this.byName=this.commands;this.setDefaultHandler("exec",function(a){return a.command.exec(a.editor,a.args||{})})};c.inherits(h,d);(function(){c.implement(this,e);this.exec=function(a,b,c){if(Array.isArray(a)){for(var d=
a.length;d--;)if(this.exec(a[d],b,c))return true;return false}typeof a==="string"&&(a=this.commands[a]);if(!a||b&&b.$readOnly&&!a.readOnly)return false;a={editor:b,command:a,args:c};a.returnValue=this._emit("exec",a);this._signal("afterExec",a);return a.returnValue===false?false:true};this.toggleRecording=function(a){if(!this.$inReplay){a&&a._emit("changeStatus");if(this.recording){this.macro.pop();this.removeEventListener("exec",this.$addCommandToMacro);if(!this.macro.length)this.macro=this.oldMacro;
return this.recording=false}if(!this.$addCommandToMacro)this.$addCommandToMacro=function(a){this.macro.push([a.command,a.args])}.bind(this);this.oldMacro=this.macro;this.macro=[];this.on("exec",this.$addCommandToMacro);return this.recording=true}};this.replay=function(a){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(a);try{this.$inReplay=true;this.macro.forEach(function(b){typeof b=="string"?this.exec(b,a):this.exec(b[0],a,b[1])},this)}finally{this.$inReplay=false}}};
this.trimMacro=function(a){return a.map(function(a){if(typeof a[0]!="string")a[0]=a[0].name;a[1]||(a=a[0]);return a})}}).call(h.prototype);b.CommandManager=h});
ace.define("ace/commands/default_commands","require exports module ace/lib/lang ace/config ace/range".split(" "),function(a,b){function c(a,b){return{win:a,mac:b}}var d=a("../lib/lang"),e=a("../config"),h=a("../range").Range;b.commands=[{name:"showSettingsMenu",bindKey:c("Ctrl-,","Command-,"),exec:function(a){e.loadModule("ace/ext/settings_menu",function(b){b.init(a);a.showSettingsMenu()})},readOnly:true},{name:"goToNextError",bindKey:c("Alt-E","Ctrl-E"),exec:function(a){e.loadModule("ace/ext/error_marker",
function(b){b.showErrorMarker(a,1)})},scrollIntoView:"animate",readOnly:true},{name:"goToPreviousError",bindKey:c("Alt-Shift-E","Ctrl-Shift-E"),exec:function(a){e.loadModule("ace/ext/error_marker",function(b){b.showErrorMarker(a,-1)})},scrollIntoView:"animate",readOnly:true},{name:"selectall",bindKey:c("Ctrl-A","Command-A"),exec:function(a){a.selectAll()},readOnly:true},{name:"centerselection",bindKey:c(null,"Ctrl-L"),exec:function(a){a.centerSelection()},readOnly:true},{name:"gotoline",bindKey:c("Ctrl-L",
"Command-L"),exec:function(a){var b=parseInt(prompt("Enter line number:"),10);isNaN(b)||a.gotoLine(b)},readOnly:true},{name:"fold",bindKey:c("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(a){a.session.toggleFold(false)},scrollIntoView:"center",readOnly:true},{name:"unfold",bindKey:c("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(a){a.session.toggleFold(true)},scrollIntoView:"center",readOnly:true},{name:"toggleFoldWidget",bindKey:c("F2","F2"),exec:function(a){a.session.toggleFoldWidget()},
scrollIntoView:"center",readOnly:true},{name:"toggleParentFoldWidget",bindKey:c("Alt-F2","Alt-F2"),exec:function(a){a.session.toggleFoldWidget(true)},scrollIntoView:"center",readOnly:true},{name:"foldall",bindKey:c("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(a){a.session.foldAll()},scrollIntoView:"center",readOnly:true},{name:"foldOther",bindKey:c("Alt-0","Command-Option-0"),exec:function(a){a.session.foldAll();a.session.unfold(a.selection.getAllRanges())},scrollIntoView:"center",readOnly:true},
{name:"unfoldall",bindKey:c("Alt-Shift-0","Command-Option-Shift-0"),exec:function(a){a.session.unfold()},scrollIntoView:"center",readOnly:true},{name:"findnext",bindKey:c("Ctrl-K","Command-G"),exec:function(a){a.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"findprevious",bindKey:c("Ctrl-Shift-K","Command-Shift-G"),exec:function(a){a.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"selectOrFindNext",bindKey:c("Alt-K",
"Ctrl-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findNext()},readOnly:true},{name:"selectOrFindPrevious",bindKey:c("Alt-Shift-K","Ctrl-Shift-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findPrevious()},readOnly:true},{name:"find",bindKey:c("Ctrl-F","Command-F"),exec:function(a){e.loadModule("ace/ext/searchbox",function(b){b.Search(a)})},readOnly:true},{name:"overwrite",bindKey:"Insert",exec:function(a){a.toggleOverwrite()},readOnly:true},{name:"selecttostart",
bindKey:c("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(a){a.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:c("Ctrl-Home","Command-Home|Command-Up"),exec:function(a){a.navigateFileStart()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:c("Shift-Up","Shift-Up"),exec:function(a){a.getSelection().selectUp()},multiSelectAction:"forEach",
readOnly:true},{name:"golineup",bindKey:c("Up","Up|Ctrl-P"),exec:function(a,b){a.navigateUp(b.times)},multiSelectAction:"forEach",readOnly:true},{name:"selecttoend",bindKey:c("Ctrl-Shift-End","Command-Shift-Down"),exec:function(a){a.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:c("Ctrl-End","Command-End|Command-Down"),exec:function(a){a.navigateFileEnd()},multiSelectAction:"forEach",readOnly:true,
scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:c("Shift-Down","Shift-Down"),exec:function(a){a.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"golinedown",bindKey:c("Down","Down|Ctrl-N"),exec:function(a,b){a.navigateDown(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectwordleft",bindKey:c("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(a){a.getSelection().selectWordLeft()},
multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotowordleft",bindKey:c("Ctrl-Left","Option-Left"),exec:function(a){a.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selecttolinestart",bindKey:c("Alt-Shift-Left","Command-Shift-Left"),exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotolinestart",bindKey:c("Alt-Left|Home","Command-Left|Home|Ctrl-A"),
exec:function(a){a.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectleft",bindKey:c("Shift-Left","Shift-Left"),exec:function(a){a.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotoleft",bindKey:c("Left","Left|Ctrl-B"),exec:function(a,b){a.navigateLeft(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectwordright",bindKey:c("Ctrl-Shift-Right","Option-Shift-Right"),
exec:function(a){a.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotowordright",bindKey:c("Ctrl-Right","Option-Right"),exec:function(a){a.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selecttolineend",bindKey:c("Alt-Shift-Right","Command-Shift-Right"),exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotolineend",
bindKey:c("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(a){a.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectright",bindKey:c("Shift-Right","Shift-Right"),exec:function(a){a.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotoright",bindKey:c("Right","Right|Ctrl-F"),exec:function(a,b){a.navigateRight(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectpagedown",
bindKey:"Shift-PageDown",exec:function(a){a.selectPageDown()},readOnly:true},{name:"pagedown",bindKey:c(null,"Option-PageDown"),exec:function(a){a.scrollPageDown()},readOnly:true},{name:"gotopagedown",bindKey:c("PageDown","PageDown|Ctrl-V"),exec:function(a){a.gotoPageDown()},readOnly:true},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(a){a.selectPageUp()},readOnly:true},{name:"pageup",bindKey:c(null,"Option-PageUp"),exec:function(a){a.scrollPageUp()},readOnly:true},{name:"gotopageup",
bindKey:"PageUp",exec:function(a){a.gotoPageUp()},readOnly:true},{name:"scrollup",bindKey:c("Ctrl-Up",null),exec:function(a){a.renderer.scrollBy(0,-2*a.renderer.layerConfig.lineHeight)},readOnly:true},{name:"scrolldown",bindKey:c("Ctrl-Down",null),exec:function(a){a.renderer.scrollBy(0,2*a.renderer.layerConfig.lineHeight)},readOnly:true},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},
{name:"selectlineend",bindKey:"Shift-End",exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"togglerecording",bindKey:c("Ctrl-Alt-E","Command-Option-E"),exec:function(a){a.commands.toggleRecording(a)},readOnly:true},{name:"replaymacro",bindKey:c("Ctrl-Shift-E","Command-Shift-E"),exec:function(a){a.commands.replay(a)},readOnly:true},{name:"jumptomatching",bindKey:c("Ctrl-P","Ctrl-P"),exec:function(a){a.jumpToMatching()},multiSelectAction:"forEach",
readOnly:true},{name:"selecttomatching",bindKey:c("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(a){a.jumpToMatching(true)},multiSelectAction:"forEach",readOnly:true},{name:"passKeysToBrowser",bindKey:c("null","null"),exec:function(){},passEvent:true,readOnly:true},{name:"cut",exec:function(a){var b=a.getSelectionRange();a._emit("cut",b);if(!a.selection.isEmpty()){a.session.remove(b);a.clearSelection()}},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:c("Ctrl-D","Command-D"),
exec:function(a){a.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:c("Ctrl-Shift-D","Command-Shift-D"),exec:function(a){a.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:c("Ctrl-Alt-S","Command-Alt-S"),exec:function(a){a.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:c("Ctrl-/","Command-/"),exec:function(a){a.toggleCommentLines()},
multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:c("Ctrl-Shift-/","Command-Shift-/"),exec:function(a){a.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:c("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(a){a.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:c("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(a){a.modifyNumber(-1)},multiSelectAction:"forEach"},
{name:"replace",bindKey:c("Ctrl-H","Command-Option-F"),exec:function(a){e.loadModule("ace/ext/searchbox",function(b){b.Search(a,true)})}},{name:"undo",bindKey:c("Ctrl-Z","Command-Z"),exec:function(a){a.undo()}},{name:"redo",bindKey:c("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(a){a.redo()}},{name:"copylinesup",bindKey:c("Alt-Shift-Up","Command-Option-Up"),exec:function(a){a.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:c("Alt-Up","Option-Up"),exec:function(a){a.moveLinesUp()},
scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:c("Alt-Shift-Down","Command-Option-Down"),exec:function(a){a.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:c("Alt-Down","Option-Down"),exec:function(a){a.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:c("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(a){a.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:c("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),
exec:function(a){a.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:c("Shift-Delete",null),exec:function(a){if(a.selection.isEmpty())a.remove("left");else return false},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:c("Alt-Backspace","Command-Backspace"),exec:function(a){a.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:c("Alt-Delete","Ctrl-K"),exec:function(a){a.removeToLineEnd()},
multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:c("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(a){a.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:c("Ctrl-Delete","Alt-Delete"),exec:function(a){a.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:c("Shift-Tab","Shift-Tab"),exec:function(a){a.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},
{name:"indent",bindKey:c("Tab","Tab"),exec:function(a){a.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:c("Ctrl-[","Ctrl-["),exec:function(a){a.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:c("Ctrl-]","Ctrl-]"),exec:function(a){a.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(a,b){a.insert(b)},multiSelectAction:"forEach",
scrollIntoView:"cursor"},{name:"inserttext",exec:function(a,b){a.insert(d.stringRepeat(b.text||"",b.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:c(null,"Ctrl-O"),exec:function(a){a.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:c("Ctrl-T","Ctrl-T"),exec:function(a){a.transposeLetters()},multiSelectAction:function(a){a.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:c("Ctrl-U",
"Ctrl-U"),exec:function(a){a.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:c("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(a){a.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:c("Ctrl-Shift-L","Command-Shift-L"),exec:function(a){var b=a.selection.getRange();b.start.column=b.end.column=0;b.end.row++;a.selection.setRange(b,false)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"joinlines",
bindKey:c(null,null),exec:function(a){for(var b=a.selection.isBackwards(),c=b?a.selection.getSelectionLead():a.selection.getSelectionAnchor(),b=b?a.selection.getSelectionAnchor():a.selection.getSelectionLead(),e=a.session.doc.getLine(c.row).length,k=a.session.doc.getTextRange(a.selection.getRange()).replace(/\n\s*/," ").length,l=a.session.doc.getLine(c.row),n=c.row+1;n<=b.row+1;n++){var o=d.stringTrimLeft(d.stringTrimRight(a.session.doc.getLine(n)));o.length!==0&&(o=" "+o);l=l+o}b.row+1<a.session.doc.getLength()-
1&&(l=l+a.session.doc.getNewLineCharacter());a.clearSelection();a.session.doc.replace(new h(c.row,0,b.row+2,0),l);if(k>0){a.selection.moveCursorTo(c.row,c.column);a.selection.selectTo(c.row,c.column+k)}else{e=a.session.doc.getLine(c.row).length>e?e+1:e;a.selection.moveCursorTo(c.row,e)}},multiSelectAction:"forEach",readOnly:true},{name:"invertSelection",bindKey:c(null,null),exec:function(a){var b=a.session.doc.getLength()-1,c=a.session.doc.getLine(b).length,d=a.selection.rangeList.ranges,e=[];d.length<
1&&(d=[a.selection.getRange()]);for(var l=0;l<d.length;l++){l==d.length-1&&(d[l].end.row===b&&d[l].end.column===c||e.push(new h(d[l].end.row,d[l].end.column,b,c)));l===0?d[l].start.row===0&&d[l].start.column===0||e.push(new h(0,0,d[l].start.row,d[l].start.column)):e.push(new h(d[l-1].end.row,d[l-1].end.column,d[l].start.row,d[l].start.column))}a.exitMultiSelectMode();a.clearSelection();for(l=0;l<e.length;l++)a.selection.addRange(e[l],false)},readOnly:true,scrollIntoView:"none"}]});
ace.define("ace/editor","require exports module ace/lib/fixoldbrowsers ace/lib/oop ace/lib/dom ace/lib/lang ace/lib/useragent ace/keyboard/textinput ace/mouse/mouse_handler ace/mouse/fold_handler ace/keyboard/keybinding ace/edit_session ace/search ace/range ace/lib/event_emitter ace/commands/command_manager ace/commands/default_commands ace/config ace/token_iterator".split(" "),function(a,b){a("./lib/fixoldbrowsers");var c=a("./lib/oop"),d=a("./lib/dom"),e=a("./lib/lang"),h=a("./lib/useragent"),g=
a("./keyboard/textinput").TextInput,f=a("./mouse/mouse_handler").MouseHandler,i=a("./mouse/fold_handler").FoldHandler,j=a("./keyboard/keybinding").KeyBinding,k=a("./edit_session").EditSession,l=a("./search").Search,n=a("./range").Range,o=a("./lib/event_emitter").EventEmitter,t=a("./commands/command_manager").CommandManager,s=a("./commands/default_commands").commands,q=a("./config"),m=a("./token_iterator").TokenIterator,r=function(a,b){this.container=a.getContainerElement();this.renderer=a;this.commands=
new t(h.isMac?"mac":"win",s);this.textInput=new g(a.getTextAreaContainer(),this);this.renderer.textarea=this.textInput.getElement();this.keyBinding=new j(this);this.$mouseHandler=new f(this);new i(this);this.$blockScrolling=0;this.$search=(new l).set({wrap:true});this.$historyTracker=this.$historyTracker.bind(this);this.commands.on("exec",this.$historyTracker);this.$initOperationListeners();this._$emitInputEvent=e.delayedCall(function(){this._signal("input",{});this.session&&this.session.bgTokenizer&&
this.session.bgTokenizer.scheduleStart()}.bind(this));this.on("change",function(a,b){b._$emitInputEvent.schedule(31)});this.setSession(b||new k(""));q.resetOptions(this);q._signal("editor",this)};(function(){c.implement(this,o);this.$initOperationListeners=function(){this.selections=[];this.commands.on("exec",this.startOperation.bind(this),true);this.commands.on("afterExec",this.endOperation.bind(this),true);this.$opResetTimer=e.delayedCall(this.endOperation.bind(this));this.on("change",function(){this.curOp||
this.startOperation();this.curOp.docChanged=true}.bind(this),true);this.on("changeSelection",function(){this.curOp||this.startOperation();this.curOp.selectionChanged=true}.bind(this),true)};this.curOp=null;this.prevOp={};this.startOperation=function(a){if(this.curOp){if(!a||this.curOp.command)return;this.prevOp=this.curOp}if(!a){this.previousCommand=null;a={}}this.$opResetTimer.schedule();this.curOp={command:a.command||{},args:a.args,scrollTop:this.renderer.scrollTop}};this.endOperation=function(a){if(this.curOp){if(a&&
a.returnValue===false)return this.curOp=null;if((a=this.curOp.command)&&a.scrollIntoView){switch(a.scrollIntoView){case "center":this.renderer.scrollCursorIntoView(null,0.5);break;case "animate":case "cursor":this.renderer.scrollCursorIntoView();break;case "selectionPart":var b=this.selection.getRange(),c=this.renderer.layerConfig;(b.start.row>=c.lastRow||b.end.row<=c.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}a.scrollIntoView=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=
this.curOp;this.curOp=null}};this.$mergeableCommands=["backspace","del","insertstring"];this.$historyTracker=function(a){if(this.$mergeUndoDeltas){var b=this.prevOp,c=this.$mergeableCommands,d=b.command&&a.command.name==b.command.name;if(a.command.name=="insertstring"){var e=a.args;if(this.mergeNextCommand===void 0)this.mergeNextCommand=true;d=d&&this.mergeNextCommand&&(!/\s/.test(e)||/\s/.test(b.args));this.mergeNextCommand=true}else d=d&&c.indexOf(a.command.name)!==-1;this.$mergeUndoDeltas!="always"&&
Date.now()-this.sequenceStartTime>2E3&&(d=false);if(d)this.session.mergeUndoDeltas=true;else if(c.indexOf(a.command.name)!==-1)this.sequenceStartTime=Date.now()}};this.setKeyboardHandler=function(a,b){if(a&&typeof a==="string"){this.$keybindingId=a;var c=this;q.loadModule(["keybinding",a],function(d){c.$keybindingId==a&&c.keyBinding.setKeyboardHandler(d&&d.handler);b&&b()})}else{this.$keybindingId=null;this.keyBinding.setKeyboardHandler(a);b&&b()}};this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()};
this.setSession=function(a){if(this.session!=a){var b=this.session;if(b){this.session.removeEventListener("change",this.$onDocumentChange);this.session.removeEventListener("changeMode",this.$onChangeMode);this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate);this.session.removeEventListener("changeTabSize",this.$onChangeTabSize);this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit);this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode);
this.session.removeEventListener("onChangeFold",this.$onChangeFold);this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker);this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker);this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint);this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation);this.session.removeEventListener("changeOverwrite",this.$onCursorChange);this.session.removeEventListener("changeScrollTop",
this.$onScrollTopChange);this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var c=this.session.getSelection();c.removeEventListener("changeCursor",this.$onCursorChange);c.removeEventListener("changeSelection",this.$onSelectionChange)}if(this.session=a){this.$onDocumentChange=this.onDocumentChange.bind(this);a.addEventListener("change",this.$onDocumentChange);this.renderer.setSession(a);this.$onChangeMode=this.onChangeMode.bind(this);a.addEventListener("changeMode",this.$onChangeMode);
this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this);a.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate);this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer);a.addEventListener("changeTabSize",this.$onChangeTabSize);this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this);a.addEventListener("changeWrapLimit",this.$onChangeWrapLimit);this.$onChangeWrapMode=this.onChangeWrapMode.bind(this);a.addEventListener("changeWrapMode",this.$onChangeWrapMode);this.$onChangeFold=
this.onChangeFold.bind(this);a.addEventListener("changeFold",this.$onChangeFold);this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this);this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker);this.$onChangeBackMarker=this.onChangeBackMarker.bind(this);this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker);this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this);this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint);this.$onChangeAnnotation=
this.onChangeAnnotation.bind(this);this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation);this.$onCursorChange=this.onCursorChange.bind(this);this.session.addEventListener("changeOverwrite",this.$onCursorChange);this.$onScrollTopChange=this.onScrollTopChange.bind(this);this.session.addEventListener("changeScrollTop",this.$onScrollTopChange);this.$onScrollLeftChange=this.onScrollLeftChange.bind(this);this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange);this.selection=
a.getSelection();this.selection.addEventListener("changeCursor",this.$onCursorChange);this.$onSelectionChange=this.onSelectionChange.bind(this);this.selection.addEventListener("changeSelection",this.$onSelectionChange);this.onChangeMode();this.$blockScrolling=this.$blockScrolling+1;this.onCursorChange();this.$blockScrolling=this.$blockScrolling-1;this.onScrollTopChange();this.onScrollLeftChange();this.onSelectionChange();this.onChangeFrontMarker();this.onChangeBackMarker();this.onChangeBreakpoint();
this.onChangeAnnotation();this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit();this.renderer.updateFull()}else{this.selection=null;this.renderer.setSession(a)}this._signal("changeSession",{session:a,oldSession:b});b&&b._signal("changeEditor",{oldEditor:this});a&&a._signal("changeEditor",{editor:this})}};this.getSession=function(){return this.session};this.setValue=function(a,b){this.session.doc.setValue(a);b?b==1?this.navigateFileEnd():b==-1&&this.navigateFileStart():this.selectAll();return a};
this.getValue=function(){return this.session.getValue()};this.getSelection=function(){return this.selection};this.resize=function(a){this.renderer.onResize(a)};this.setTheme=function(a,b){this.renderer.setTheme(a,b)};this.getTheme=function(){return this.renderer.getTheme()};this.setStyle=function(a){this.renderer.setStyle(a)};this.unsetStyle=function(a){this.renderer.unsetStyle(a)};this.getFontSize=function(){return this.getOption("fontSize")||d.computedStyle(this.container,"fontSize")};this.setFontSize=
function(a){this.setOption("fontSize",a)};this.$highlightBrackets=function(){if(this.session.$bracketHighlight){this.session.removeMarker(this.session.$bracketHighlight);this.session.$bracketHighlight=null}if(!this.$highlightPending){var a=this;this.$highlightPending=true;setTimeout(function(){a.$highlightPending=false;var b=a.session;if(b&&b.bgTokenizer){var c=b.findMatchingBracket(a.getCursorPosition());if(c)var d=new n(c.row,c.column,c.row,c.column+1);else b.$mode.getMatching&&(d=b.$mode.getMatching(a.session));
if(d)b.$bracketHighlight=b.addMarker(d,"ace_bracket","text")}},50)}};this.$highlightTags=function(){if(!this.$highlightTagPending){var a=this;this.$highlightTagPending=true;setTimeout(function(){a.$highlightTagPending=false;var b=a.session;if(b&&b.bgTokenizer){var c=a.getCursorPosition(),d=new m(a.session,c.row,c.column),c=d.getCurrentToken();if(!c||c.type.indexOf("tag-name")===-1){b.removeMarker(b.$tagHighlight);b.$tagHighlight=null}else{var e=c.value,f=0,g=d.stepBackward();if(g.value=="<"){do{g=
c;(c=d.stepForward())&&c.value===e&&c.type.indexOf("tag-name")!==-1&&(g.value==="<"?f++:g.value==="</"&&f--)}while(c&&f>=0)}else{do{c=g;g=d.stepBackward();c&&c.value===e&&c.type.indexOf("tag-name")!==-1&&(g.value==="<"?f++:g.value==="</"&&f--)}while(g&&f<=0);d.stepForward()}if(c){e=d.getCurrentTokenRow();d=d.getCurrentTokenColumn();c=new n(e,d,e,d+c.value.length);if(b.$tagHighlight&&c.compareRange(b.$backMarkers[b.$tagHighlight].range)!==0){b.removeMarker(b.$tagHighlight);b.$tagHighlight=null}if(c&&
!b.$tagHighlight)b.$tagHighlight=b.addMarker(c,"ace_bracket","text")}else{b.removeMarker(b.$tagHighlight);b.$tagHighlight=null}}}},50)}};this.focus=function(){var a=this;setTimeout(function(){a.textInput.focus()});this.textInput.focus()};this.isFocused=function(){return this.textInput.isFocused()};this.blur=function(){this.textInput.blur()};this.onFocus=function(a){if(!this.$isFocused){this.$isFocused=true;this.renderer.showCursor();this.renderer.visualizeFocus();this._emit("focus",a)}};this.onBlur=
function(a){if(this.$isFocused){this.$isFocused=false;this.renderer.hideCursor();this.renderer.visualizeBlur();this._emit("blur",a)}};this.$cursorChange=function(){this.renderer.updateCursor()};this.onDocumentChange=function(a){var b=a.data,c=b.range;this.renderer.updateLines(c.start.row,c.start.row==c.end.row&&b.action!="insertLines"&&b.action!="removeLines"?c.end.row:Infinity,this.session.$useWrapMode);this._signal("change",a);this.$cursorChange();this.$updateHighlightActiveLine()};this.onTokenizerUpdate=
function(a){a=a.data;this.renderer.updateLines(a.first,a.last)};this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())};this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())};this.onCursorChange=function(){this.$cursorChange();this.$blockScrolling||this.renderer.scrollCursorIntoView();this.$highlightBrackets();this.$highlightTags();this.$updateHighlightActiveLine();this._signal("changeSelection")};this.$updateHighlightActiveLine=function(){var a=
this.getSession(),b;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())b=this.getCursorPosition();this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(b=false)}if(a.$highlightLineMarker&&!b){a.removeMarker(a.$highlightLineMarker.id);a.$highlightLineMarker=null}else if(!a.$highlightLineMarker&&b){b=new n(b.row,b.column,b.row,Infinity);b.id=a.addMarker(b,"ace_active-line","screenLine");a.$highlightLineMarker=b}else if(b){a.$highlightLineMarker.start.row=
b.row;a.$highlightLineMarker.end.row=b.row;a.$highlightLineMarker.start.column=b.column;a._signal("changeBackMarker")}};this.onSelectionChange=function(){var a=this.session;a.$selectionMarker&&a.removeMarker(a.$selectionMarker);a.$selectionMarker=null;if(this.selection.isEmpty())this.$updateHighlightActiveLine();else{var b=this.selection.getRange(),c=this.getSelectionStyle();a.$selectionMarker=a.addMarker(b,"ace_selection",c)}this.session.highlight(this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp());
this._signal("changeSelection")};this.$getSelectionHighLightRegexp=function(){var a=this.session,b=this.getSelectionRange();if(!b.isEmpty()&&!b.isMultiLine()){var c=b.start.column-1,d=b.end.column+1,a=a.getLine(b.start.row),e=a.length,f=a.substring(Math.max(c,0),Math.min(d,e));if(!(c>=0&&/^[\w\d]/.test(f)||d<=e&&/[\w\d]$/.test(f))){f=a.substring(b.start.column,b.end.column);if(/^[\w\d]+$/.test(f))return this.$search.$assembleRegExp({wholeWord:true,caseSensitive:true,needle:f})}}};this.onChangeFrontMarker=
function(){this.renderer.updateFrontMarkers()};this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()};this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()};this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())};this.onChangeMode=function(a){this.renderer.updateText();this._emit("changeMode",a)};this.onChangeWrapLimit=function(){this.renderer.updateFull()};this.onChangeWrapMode=function(){this.renderer.onResize(true)};this.onChangeFold=
function(){this.$updateHighlightActiveLine();this.renderer.updateFull()};this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())};this.getCopyText=function(){var a=this.getSelectedText();this._signal("copy",a);return a};this.onCopy=function(){this.commands.exec("copy",this)};this.onCut=function(){this.commands.exec("cut",this)};this.onPaste=function(a){if(!this.$readOnly){a={text:a};this._signal("paste",a);this.insert(a.text,true)}};this.execCommand=function(a,b){return this.commands.exec(a,
this,b)};this.insert=function(a,b){var c=this.session,d=c.getMode(),e=this.getCursorPosition();if(this.getBehavioursEnabled()&&!b){var f=d.transformAction(c.getState(e.row),"insertion",this,c,a);if(f){if(a!==f.text)this.$mergeNextCommand=this.session.mergeUndoDeltas=false;a=f.text}}a=="\t"&&(a=this.session.getTabString());if(this.selection.isEmpty()){if(this.session.getOverwrite()){g=new n.fromPoints(e,e);g.end.column=g.end.column+a.length;this.session.remove(g)}}else{var g=this.getSelectionRange(),
e=this.session.remove(g);this.clearSelection()}if(a=="\n"||a=="\r\n"){var h=c.getLine(e.row);if(e.column>h.search(/\S|$/)){g=h.substr(e.column).search(/\S|$/);c.doc.removeInLine(e.row,e.column,e.column+g)}}this.clearSelection();var i=e.column,g=c.getState(e.row),h=c.getLine(e.row),j=d.checkOutdent(g,h,a);c.insert(e,a);f&&f.selection&&(f.selection.length==2?this.selection.setSelectionRange(new n(e.row,i+f.selection[0],e.row,i+f.selection[1])):this.selection.setSelectionRange(new n(e.row+f.selection[0],
f.selection[1],e.row+f.selection[2],f.selection[3])));if(c.getDocument().isNewLine(a)){f=d.getNextLineIndent(g,h.slice(0,e.column),c.getTabString());c.insert({row:e.row+1,column:0},f)}j&&d.autoOutdent(g,c,e.row)};this.onTextInput=function(a){this.keyBinding.onTextInput(a)};this.onCommandKey=function(a,b,c){this.keyBinding.onCommandKey(a,b,c)};this.setOverwrite=function(a){this.session.setOverwrite(a)};this.getOverwrite=function(){return this.session.getOverwrite()};this.toggleOverwrite=function(){this.session.toggleOverwrite()};
this.setScrollSpeed=function(a){this.setOption("scrollSpeed",a)};this.getScrollSpeed=function(){return this.getOption("scrollSpeed")};this.setDragDelay=function(a){this.setOption("dragDelay",a)};this.getDragDelay=function(){return this.getOption("dragDelay")};this.setSelectionStyle=function(a){this.setOption("selectionStyle",a)};this.getSelectionStyle=function(){return this.getOption("selectionStyle")};this.setHighlightActiveLine=function(a){this.setOption("highlightActiveLine",a)};this.getHighlightActiveLine=
function(){return this.getOption("highlightActiveLine")};this.setHighlightGutterLine=function(a){this.setOption("highlightGutterLine",a)};this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")};this.setHighlightSelectedWord=function(a){this.setOption("highlightSelectedWord",a)};this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord};this.setAnimatedScroll=function(a){this.renderer.setAnimatedScroll(a)};this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()};
this.setShowInvisibles=function(a){this.renderer.setShowInvisibles(a)};this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()};this.setDisplayIndentGuides=function(a){this.renderer.setDisplayIndentGuides(a)};this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()};this.setShowPrintMargin=function(a){this.renderer.setShowPrintMargin(a)};this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()};this.setPrintMarginColumn=function(a){this.renderer.setPrintMarginColumn(a)};
this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()};this.setReadOnly=function(a){this.setOption("readOnly",a)};this.getReadOnly=function(){return this.getOption("readOnly")};this.setBehavioursEnabled=function(a){this.setOption("behavioursEnabled",a)};this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")};this.setWrapBehavioursEnabled=function(a){this.setOption("wrapBehavioursEnabled",a)};this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")};
this.setShowFoldWidgets=function(a){this.setOption("showFoldWidgets",a)};this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")};this.setFadeFoldWidgets=function(a){this.setOption("fadeFoldWidgets",a)};this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")};this.remove=function(a){this.selection.isEmpty()&&(a=="left"?this.selection.selectLeft():this.selection.selectRight());a=this.getSelectionRange();if(this.getBehavioursEnabled()){var b=this.session,c=b.getState(a.start.row),
c=b.getMode().transformAction(c,"deletion",this,b,a);if(a.end.column===0){var d=b.getTextRange(a);if(d[d.length-1]=="\n"){b=b.getLine(a.end.row);if(/^\s+$/.test(b))a.end.column=b.length}}c&&(a=c)}this.session.remove(a);this.clearSelection()};this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft();this.session.remove(this.getSelectionRange());
this.clearSelection()};this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var a=this.getSelectionRange();if(a.start.column==a.end.column&&a.start.row==a.end.row){a.end.column=0;a.end.row++}this.session.remove(a);this.clearSelection()};this.splitLine=function(){if(!this.selection.isEmpty()){this.session.remove(this.getSelectionRange());
this.clearSelection()}var a=this.getCursorPosition();this.insert("\n");this.moveCursorToPosition(a)};this.transposeLetters=function(){if(this.selection.isEmpty()){var a=this.getCursorPosition(),b=a.column;if(b!==0){var c=this.session.getLine(a.row);if(b<c.length){c=c.charAt(b)+c.charAt(b-1);a=new n(a.row,b-1,a.row,b+1)}else{c=c.charAt(b-1)+c.charAt(b-2);a=new n(a.row,b-2,a.row,b)}this.session.replace(a,c)}}};this.toLowerCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();
var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toLowerCase());this.selection.setSelectionRange(a)};this.toUpperCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toUpperCase());this.selection.setSelectionRange(a)};this.indent=function(){var a=this.session,b=this.getSelectionRange();if(b.start.row<b.end.row){b=this.$getSelectedRows();
a.indentRows(b.first,b.last,"\t")}else if(b.start.column<b.end.column&&!/^\s+$/.test(a.getTextRange(b))){b=this.$getSelectedRows();a.indentRows(b.first,b.last,"\t")}else{var c=a.getLine(b.start.row),d=b.start,f=a.getTabSize(),a=a.documentToScreenColumn(d.row,d.column);if(this.session.getUseSoftTabs())b=e.stringRepeat(" ",f-a%f);else{for(a=a%f;c[b.start.column]==" "&&a;){b.start.column--;a--}this.selection.setSelectionRange(b);b="\t"}return this.insert(b)}};this.blockIndent=function(){var a=this.$getSelectedRows();
this.session.indentRows(a.first,a.last,"\t")};this.blockOutdent=function(){this.session.outdentRows(this.session.getSelection().getRange())};this.sortLines=function(){for(var a=this.$getSelectedRows(),b=this.session,c=[],d=a.first;d<=a.last;d++)c.push(b.getLine(d));c.sort(function(a,b){return a.toLowerCase()<b.toLowerCase()?-1:a.toLowerCase()>b.toLowerCase()?1:0});for(var e=new n(0,0,0,0),d=a.first;d<=a.last;d++){var f=b.getLine(d);e.start.row=d;e.end.row=d;e.end.column=f.length;b.replace(e,c[d-a.first])}};
this.toggleCommentLines=function(){var a=this.session.getState(this.getCursorPosition().row),b=this.$getSelectedRows();this.session.getMode().toggleCommentLines(a,this.session,b.first,b.last)};this.toggleBlockComment=function(){var a=this.getCursorPosition(),b=this.session.getState(a.row),c=this.getSelectionRange();this.session.getMode().toggleBlockComment(b,this.session,c,a)};this.getNumberAt=function(a,b){var c=/[\-]?[0-9]+(?:\.[0-9]+)?/g;c.lastIndex=0;for(var d=this.session.getLine(a);c.lastIndex<
b;){var e=c.exec(d);if(e.index<=b&&e.index+e[0].length>=b)return{value:e[0],start:e.index,end:e.index+e[0].length}}return null};this.modifyNumber=function(a){var b=this.selection.getCursor().row,c=this.selection.getCursor().column,d=this.session.getTextRange(new n(b,c-1,b,c));if(!isNaN(parseFloat(d))&&isFinite(d)&&(d=this.getNumberAt(b,c))){var e=d.value.indexOf(".")>=0?d.start+d.value.indexOf(".")+1:d.end,f=d.start+d.value.length-e,g=parseFloat(d.value),g=g*Math.pow(10,f),a=e!==d.end&&c<e?a*Math.pow(10,
d.end-c-1):a*Math.pow(10,d.end-c),g=(g+a)/Math.pow(10,f),a=g.toFixed(f);this.session.replace(new n(b,d.start,b,d.end),a);this.moveCursorTo(b,Math.max(d.start+1,c+a.length-d.value.length))}};this.removeLines=function(){var a=this.$getSelectedRows();this.session.remove(a.first===0||a.last+1<this.session.getLength()?new n(a.first,0,a.last+1,0):new n(a.first-1,this.session.getLine(a.first-1).length,a.last,this.session.getLine(a.last).length));this.clearSelection()};this.duplicateSelection=function(){var a=
this.selection,b=this.session,c=a.getRange(),d=a.isBackwards();if(c.isEmpty()){a=c.start.row;b.duplicateLines(a,a)}else{var e=d?c.start:c.end,b=b.insert(e,b.getTextRange(c),false);c.start=e;c.end=b;a.setSelectionRange(c,d)}};this.moveLinesDown=function(){this.$moveLines(function(a,b){return this.session.moveLinesDown(a,b)})};this.moveLinesUp=function(){this.$moveLines(function(a,b){return this.session.moveLinesUp(a,b)})};this.moveText=function(a,b,c){return this.session.moveText(a,b,c)};this.copyLinesUp=
function(){this.$moveLines(function(a,b){this.session.duplicateLines(a,b);return 0})};this.copyLinesDown=function(){this.$moveLines(function(a,b){return this.session.duplicateLines(a,b)})};this.$moveLines=function(a){var b=this.selection;if(!b.inMultiSelectMode||this.inVirtualSelectionMode){var c=b.toOrientedRange(),d=this.$getSelectedRows(c),d=a.call(this,d.first,d.last);c.moveBy(d,0);b.fromOrientedRange(c)}else{c=b.rangeList.ranges;b.rangeList.detach(this.session);for(var e=c.length;e--;){for(var f=
e,d=c[e].collapseRows(),g=d.end.row,h=d.start.row;e--;){d=c[e].collapseRows();if(h-d.end.row<=1)h=d.end.row;else break}e++;for(d=a.call(this,h,g);f>=e;){c[f].moveBy(d,0);f--}}b.fromOrientedRange(b.ranges[0]);b.rangeList.attach(this.session)}};this.$getSelectedRows=function(){var a=this.getSelectionRange().collapseRows();return{first:this.session.getRowFoldStart(a.start.row),last:this.session.getRowFoldEnd(a.end.row)}};this.onCompositionStart=function(){this.renderer.showComposition(this.getCursorPosition())};
this.onCompositionUpdate=function(a){this.renderer.setCompositionText(a)};this.onCompositionEnd=function(){this.renderer.hideComposition()};this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()};this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()};this.isRowVisible=function(a){return a>=this.getFirstVisibleRow()&&a<=this.getLastVisibleRow()};this.isRowFullyVisible=function(a){return a>=this.renderer.getFirstFullyVisibleRow()&&a<=this.renderer.getLastFullyVisibleRow()};
this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1};this.$moveByPage=function(a,b){var c=this.renderer,d=this.renderer.layerConfig,e=a*Math.floor(d.height/d.lineHeight);this.$blockScrolling++;if(b===true)this.selection.$moveSelection(function(){this.moveCursorBy(e,0)});else if(b===false){this.selection.moveCursorBy(e,0);this.selection.clearSelection()}this.$blockScrolling--;var f=c.scrollTop;c.scrollBy(0,e*d.lineHeight);b!=null&&c.scrollCursorIntoView(null,
0.5);c.animateScrolling(f)};this.selectPageDown=function(){this.$moveByPage(1,true)};this.selectPageUp=function(){this.$moveByPage(-1,true)};this.gotoPageDown=function(){this.$moveByPage(1,false)};this.gotoPageUp=function(){this.$moveByPage(-1,false)};this.scrollPageDown=function(){this.$moveByPage(1)};this.scrollPageUp=function(){this.$moveByPage(-1)};this.scrollToRow=function(a){this.renderer.scrollToRow(a)};this.scrollToLine=function(a,b,c,d){this.renderer.scrollToLine(a,b,c,d)};this.centerSelection=
function(){var a=this.getSelectionRange();this.renderer.alignCursor({row:Math.floor(a.start.row+(a.end.row-a.start.row)/2),column:Math.floor(a.start.column+(a.end.column-a.start.column)/2)},0.5)};this.getCursorPosition=function(){return this.selection.getCursor()};this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())};this.getSelectionRange=function(){return this.selection.getRange()};this.selectAll=function(){this.$blockScrolling=this.$blockScrolling+
1;this.selection.selectAll();this.$blockScrolling=this.$blockScrolling-1};this.clearSelection=function(){this.selection.clearSelection()};this.moveCursorTo=function(a,b){this.selection.moveCursorTo(a,b)};this.moveCursorToPosition=function(a){this.selection.moveCursorToPosition(a)};this.jumpToMatching=function(a,b){var c=this.getCursorPosition(),d=new m(this.session,c.row,c.column),e=d.getCurrentToken(),f=e||d.stepForward();if(f){var g,h=false,i={},j=c.column-f.start,k,l={")":"(","(":"(","]":"[","[":"[",
"{":"{","}":"{"};do{if(f.value.match(/[{}()\[\]]/g))for(;j<f.value.length&&!h;j++){if(l[f.value[j]]){k=l[f.value[j]]+"."+f.type.replace("rparen","lparen");isNaN(i[k])&&(i[k]=0);switch(f.value[j]){case "(":case "[":case "{":i[k]++;break;case ")":case "]":case "}":i[k]--;if(i[k]===-1){g="bracket";h=true}}}}else if(f&&f.type.indexOf("tag-name")!==-1){isNaN(i[f.value])&&(i[f.value]=0);e.value==="<"?i[f.value]++:e.value==="</"&&i[f.value]--;if(i[f.value]===-1){g="tag";h=true}}if(!h){e=f;f=d.stepForward();
j=0}}while(f&&!h);if(g){var o,q;if(g==="bracket"){o=this.session.getBracketRange(c);if(!o){o=new n(d.getCurrentTokenRow(),d.getCurrentTokenColumn()+j-1,d.getCurrentTokenRow(),d.getCurrentTokenColumn()+j-1);q=o.start;if(b||q.row===c.row&&Math.abs(q.column-c.column)<2)o=this.session.getBracketRange(q)}}else if(g==="tag"){if(f&&f.type.indexOf("tag-name")!==-1)g=f.value;else return;o=new n(d.getCurrentTokenRow(),d.getCurrentTokenColumn()-2,d.getCurrentTokenRow(),d.getCurrentTokenColumn()-2);if(o.compare(c.row,
c.column)===0){h=false;do{f=e;if(e=d.stepBackward()){e.type.indexOf("tag-close")!==-1&&o.setEnd(d.getCurrentTokenRow(),d.getCurrentTokenColumn()+1);if(f.value===g&&f.type.indexOf("tag-name")!==-1){e.value==="<"?i[g]++:e.value==="</"&&i[g]--;i[g]===0&&(h=true)}}}while(e&&!h)}if(f&&f.type.indexOf("tag-name")){q=o.start;if(q.row==c.row&&Math.abs(q.column-c.column)<2)q=o.end}}(q=o&&o.cursor||q)&&(a?o&&b?this.selection.setRange(o):o&&o.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(q.row,
q.column):this.selection.moveTo(q.row,q.column))}}};this.gotoLine=function(a,b,c){this.selection.clearSelection();this.session.unfold({row:a-1,column:b||0});this.$blockScrolling=this.$blockScrolling+1;this.exitMultiSelectMode&&this.exitMultiSelectMode();this.moveCursorTo(a-1,b||0);this.$blockScrolling=this.$blockScrolling-1;this.isRowFullyVisible(a-1)||this.scrollToLine(a-1,true,c)};this.navigateTo=function(a,b){this.selection.moveTo(a,b)};this.navigateUp=function(a){if(this.selection.isMultiLine()&&
!this.selection.isBackwards())return this.moveCursorToPosition(this.selection.anchor.getPosition());this.selection.clearSelection();this.selection.moveCursorBy(-a||-1,0)};this.navigateDown=function(a){if(this.selection.isMultiLine()&&this.selection.isBackwards())return this.moveCursorToPosition(this.selection.anchor.getPosition());this.selection.clearSelection();this.selection.moveCursorBy(a||1,0)};this.navigateLeft=function(a){if(this.selection.isEmpty())for(a=a||1;a--;)this.selection.moveCursorLeft();
else this.moveCursorToPosition(this.getSelectionRange().start);this.clearSelection()};this.navigateRight=function(a){if(this.selection.isEmpty())for(a=a||1;a--;)this.selection.moveCursorRight();else this.moveCursorToPosition(this.getSelectionRange().end);this.clearSelection()};this.navigateLineStart=function(){this.selection.moveCursorLineStart();this.clearSelection()};this.navigateLineEnd=function(){this.selection.moveCursorLineEnd();this.clearSelection()};this.navigateFileEnd=function(){this.selection.moveCursorFileEnd();
this.clearSelection()};this.navigateFileStart=function(){this.selection.moveCursorFileStart();this.clearSelection()};this.navigateWordRight=function(){this.selection.moveCursorWordRight();this.clearSelection()};this.navigateWordLeft=function(){this.selection.moveCursorWordLeft();this.clearSelection()};this.replace=function(a,b){b&&this.$search.set(b);var c=this.$search.find(this.session),d=0;if(!c)return d;this.$tryReplace(c,a)&&(d=1);if(c!==null){this.selection.setSelectionRange(c);this.renderer.scrollSelectionIntoView(c.start,
c.end)}return d};this.replaceAll=function(a,b){b&&this.$search.set(b);var c=this.$search.findAll(this.session),d=0;if(!c.length)return d;this.$blockScrolling=this.$blockScrolling+1;var e=this.getSelectionRange();this.selection.moveTo(0,0);for(var f=c.length-1;f>=0;--f)this.$tryReplace(c[f],a)&&d++;this.selection.setSelectionRange(e);this.$blockScrolling=this.$blockScrolling-1;return d};this.$tryReplace=function(a,b){b=this.$search.replace(this.session.getTextRange(a),b);if(b!==null){a.end=this.session.replace(a,
b);return a}return null};this.getLastSearchOptions=function(){return this.$search.getOptions()};this.find=function(a,b,d){b||(b={});typeof a=="string"||a instanceof RegExp?b.needle=a:typeof a=="object"&&c.mixin(b,a);var e=this.selection.getRange();if(b.needle==null){a=this.session.getTextRange(e)||this.$search.$options.needle;if(!a){e=this.session.getWordRange(e.start.row,e.start.column);a=this.session.getTextRange(e)}this.$search.set({needle:a})}this.$search.set(b);b.start||this.$search.set({start:e});
a=this.$search.find(this.session);if(b.preventScroll)return a;if(a){this.revealRange(a,d);return a}b.backwards?e.start=e.end:e.end=e.start;this.selection.setRange(e)};this.findNext=function(a,b){this.find({skipCurrent:true,backwards:false},a,b)};this.findPrevious=function(a,b){this.find(a,{skipCurrent:true,backwards:true},b)};this.revealRange=function(a,b){this.$blockScrolling=this.$blockScrolling+1;this.session.unfold(a);this.selection.setSelectionRange(a);this.$blockScrolling=this.$blockScrolling-
1;var c=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(a.start,a.end,0.5);b!==false&&this.renderer.animateScrolling(c)};this.undo=function(){this.$blockScrolling++;this.session.getUndoManager().undo();this.$blockScrolling--;this.renderer.scrollCursorIntoView(null,0.5)};this.redo=function(){this.$blockScrolling++;this.session.getUndoManager().redo();this.$blockScrolling--;this.renderer.scrollCursorIntoView(null,0.5)};this.destroy=function(){this.renderer.destroy();this._signal("destroy",
this);this.session&&this.session.destroy()};this.setAutoScrollEditorIntoView=function(a){if(a){var b,c=this,d=false;if(!this.$scrollAnchor)this.$scrollAnchor=document.createElement("div");var e=this.$scrollAnchor;e.style.cssText="position:absolute";this.container.insertBefore(e,this.container.firstChild);var f=this.on("changeSelection",function(){d=true}),g=this.renderer.on("beforeRender",function(){d&&(b=c.renderer.container.getBoundingClientRect())}),h=this.renderer.on("afterRender",function(){if(d&&
b&&(c.isFocused()||c.searchBox&&c.searchBox.isFocused())){var a=c.renderer,f=a.$cursorLayer.$pixelPos,a=a.layerConfig,g=f.top-a.offset;d=f.top>=0&&g+b.top<0?true:f.top<a.height&&f.top+b.top+a.lineHeight>window.innerHeight?false:null;if(d!=null){e.style.top=g+"px";e.style.left=f.left+"px";e.style.height=a.lineHeight+"px";e.scrollIntoView(d)}d=b=null}});this.setAutoScrollEditorIntoView=function(a){if(!a){delete this.setAutoScrollEditorIntoView;this.removeEventListener("changeSelection",f);this.renderer.removeEventListener("afterRender",
h);this.renderer.removeEventListener("beforeRender",g)}}}};this.$resetCursorStyle=function(){var a=this.$cursorStyle||"ace",b=this.renderer.$cursorLayer;if(b){b.setSmoothBlinking(/smooth/.test(a));b.isBlinking=!this.$readOnly&&a!="wide";d.setCssClass(b.element,"ace_slim-cursors",/slim/.test(a))}}}).call(r.prototype);q.defineOptions(r.prototype,"editor",{selectionStyle:{set:function(a){this.onSelectionChange();this._signal("changeSelectionStyle",{data:a})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},
initialValue:true},highlightSelectedWord:{set:function(){this.$onSelectionChange()},initialValue:true},readOnly:{set:function(){this.$resetCursorStyle()},initialValue:false},cursorStyle:{set:function(){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[false,true,"always"],initialValue:true},behavioursEnabled:{initialValue:true},wrapBehavioursEnabled:{initialValue:true},autoScrollEditorIntoView:{set:function(a){this.setAutoScrollEditorIntoView(a)}},
hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",
theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"});b.Editor=r});
ace.define("ace/undomanager",["require","exports","module"],function(a,b){var c=function(){this.reset()};(function(){this.execute=function(a){var b=a.args[0];this.$doc=a.args[1];a.merge&&this.hasUndo()&&(this.dirtyCounter--,b=this.$undoStack.pop().concat(b));this.$undoStack.push(b);this.$redoStack=[];0>this.dirtyCounter&&(this.dirtyCounter=NaN);this.dirtyCounter++};this.undo=function(a){var b=this.$undoStack.pop(),c=null;b&&(c=this.$doc.undoChanges(b,a),this.$redoStack.push(b),this.dirtyCounter--);
return c};this.redo=function(a){var b=this.$redoStack.pop(),c=null;b&&(c=this.$doc.redoChanges(b,a),this.$undoStack.push(b),this.dirtyCounter++);return c};this.reset=function(){this.$undoStack=[];this.$redoStack=[];this.dirtyCounter=0};this.hasUndo=function(){return 0<this.$undoStack.length};this.hasRedo=function(){return 0<this.$redoStack.length};this.markClean=function(){this.dirtyCounter=0};this.isClean=function(){return 0===this.dirtyCounter}}).call(c.prototype);b.UndoManager=c});
ace.define("ace/layer/gutter","require exports module ace/lib/dom ace/lib/oop ace/lib/lang ace/lib/event_emitter".split(" "),function(a,b){var c=a("../lib/dom"),d=a("../lib/oop"),e=a("../lib/lang"),h=a("../lib/event_emitter").EventEmitter,g=function(a){this.element=c.createElement("div");this.element.className="ace_layer ace_gutter-layer";a.appendChild(this.element);this.setShowFoldWidgets(this.$showFoldWidgets);this.gutterWidth=0;this.$annotations=[];this.$updateAnnotations=this.$updateAnnotations.bind(this);
this.$cells=[]};(function(){d.implement(this,h);this.setSession=function(a){this.session&&this.session.removeEventListener("change",this.$updateAnnotations);if(this.session=a)a.on("change",this.$updateAnnotations)};this.addGutterDecoration=function(a,b){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration");this.session.addGutterDecoration(a,b)};this.removeGutterDecoration=function(a,b){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration");
this.session.removeGutterDecoration(a,b)};this.setAnnotations=function(a){this.$annotations=[];for(var b=0;b<a.length;b++){var c=a[b],d=c.row,g=this.$annotations[d];g||(g=this.$annotations[d]={text:[]});d=(d=c.text)?e.escapeHTML(d):c.html||"";g.text.indexOf(d)===-1&&g.text.push(d);c=c.type;if(c=="error")g.className=" ace_error";else if(c=="warning"&&g.className!=" ace_error")g.className=" ace_warning";else if(c=="info"&&!g.className)g.className=" ace_info"}};this.$updateAnnotations=function(a){if(this.$annotations.length){var b=
a.data,c=b.range,a=c.start.row,c=c.end.row-a;if(c!==0)if(b.action=="removeText"||b.action=="removeLines")this.$annotations.splice(a,c+1,null);else{b=Array(c+1);b.unshift(a,1);this.$annotations.splice.apply(this.$annotations,b)}}};this.update=function(a){for(var b=this.session,d=a.firstRow,e=Math.min(a.lastRow+a.gutterOffset,b.getLength()-1),g=b.getNextFoldLine(d),h=g?g.start.row:Infinity,o=this.$showFoldWidgets&&b.foldWidgets,t=b.$breakpoints,s=b.$decorations,q=b.$firstLineNumber,m=0,r=b.gutterRenderer||
this.$renderer,u=null,w=-1;;){if(d>h){d=g.end.row+1;h=(g=b.getNextFoldLine(d,g))?g.start.row:Infinity}if(d>e){for(;this.$cells.length>w+1;){u=this.$cells.pop();this.element.removeChild(u.element)}break}u=this.$cells[++w];if(!u){u={element:null,textNode:null,foldWidget:null};u.element=c.createElement("div");u.textNode=document.createTextNode("");u.element.appendChild(u.textNode);this.element.appendChild(u.element);this.$cells[w]=u}m="ace_gutter-cell ";t[d]&&(m=m+t[d]);s[d]&&(m=m+s[d]);this.$annotations[d]&&
(m=m+this.$annotations[d].className);if(u.element.className!=m)u.element.className=m;m=b.getRowLength(d)*a.lineHeight+"px";if(m!=u.element.style.height)u.element.style.height=m;if(o){var y=o[d];y==null&&(y=o[d]=b.getFoldWidget(d))}if(y){if(!u.foldWidget){u.foldWidget=c.createElement("span");u.element.appendChild(u.foldWidget)}m="ace_fold-widget ace_"+y;m=y=="start"&&d==h&&d<g.end.row?m+" ace_closed":m+" ace_open";if(u.foldWidget.className!=m)u.foldWidget.className=m;m=a.lineHeight+"px";if(u.foldWidget.style.height!=
m)u.foldWidget.style.height=m}else if(u.foldWidget){u.element.removeChild(u.foldWidget);u.foldWidget=null}var v=m=r?r.getText(b,d):d+q;if(v!=u.textNode.data)u.textNode.data=v;d++}this.element.style.height=a.minHeight+"px";if(this.$fixedWidth||b.$useWrapMode)m=b.getLength()+q;a=r?r.getWidth(b,m,a):m.toString().length*a.characterWidth;b=this.$padding||this.$computePadding();a=a+(b.left+b.right);if(a!==this.gutterWidth&&!isNaN(a)){this.gutterWidth=a;this.element.style.width=Math.ceil(this.gutterWidth)+
"px";this._emit("changeGutterWidth",a)}};this.$fixedWidth=false;this.$showLineNumbers=true;this.$renderer="";this.setShowLineNumbers=function(a){this.$renderer=!a&&{getWidth:function(){return""},getText:function(){return""}}};this.getShowLineNumbers=function(){return this.$showLineNumbers};this.$showFoldWidgets=true;this.setShowFoldWidgets=function(a){a?c.addCssClass(this.element,"ace_folding-enabled"):c.removeCssClass(this.element,"ace_folding-enabled");this.$showFoldWidgets=a;this.$padding=null};
this.getShowFoldWidgets=function(){return this.$showFoldWidgets};this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var a=c.computedStyle(this.element.firstChild);this.$padding={};this.$padding.left=parseInt(a.paddingLeft)+1||0;this.$padding.right=parseInt(a.paddingRight)||0;return this.$padding};this.getRegion=function(a){var b=this.$padding||this.$computePadding(),c=this.element.getBoundingClientRect();if(a.x<b.left+c.left)return"markers";if(this.$showFoldWidgets&&
a.x>c.right-b.right)return"foldWidgets"}}).call(g.prototype);b.Gutter=g});
ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(a,b){var c=a("../range").Range,d=a("../lib/dom"),e=function(a){this.element=d.createElement("div");this.element.className="ace_layer ace_marker-layer";a.appendChild(this.element)};(function(){this.$padding=0;this.setPadding=function(a){this.$padding=a};this.setSession=function(a){this.session=a};this.setMarkers=function(a){this.markers=a};this.update=function(a){if(a=a||this.config){this.config=a;var b=
[],c;for(c in this.markers){var d=this.markers[c];if(d.range){var e=d.range.clipRows(a.firstRow,a.lastRow);if(!e.isEmpty())if(e=e.toScreenRange(this.session),d.renderer){var k=this.$getTop(e.start.row,a);d.renderer(b,e,this.$padding+e.start.column*a.characterWidth,k,a)}else"fullLine"==d.type?this.drawFullLineMarker(b,e,d.clazz,a):"screenLine"==d.type?this.drawScreenLineMarker(b,e,d.clazz,a):e.isMultiLine()?"text"==d.type?this.drawTextMarker(b,e,d.clazz,a):this.drawMultiLineMarker(b,e,d.clazz,a):this.drawSingleLineMarker(b,
e,d.clazz+" ace_start",a)}else d.update(b,this,this.session,a)}this.element.innerHTML=b.join("")}};this.$getTop=function(a,b){return(a-b.firstRowScreen)*b.lineHeight};this.drawTextMarker=function(a,b,d,e,j){var k=b.start.row,l=new c(k,b.start.column,k,this.session.getScreenLastRowColumn(k));this.drawSingleLineMarker(a,l,d+" ace_start",e,1,j);k=b.end.row;l=new c(k,0,k,b.end.column);this.drawSingleLineMarker(a,l,d,e,0,j);for(k=b.start.row+1;k<b.end.row;k++)l.start.row=k,l.end.row=k,l.end.column=this.session.getScreenLastRowColumn(k),
this.drawSingleLineMarker(a,l,d,e,1,j)};this.drawMultiLineMarker=function(a,b,c,d,e){var k=this.$padding,l=d.lineHeight,n=this.$getTop(b.start.row,d),o=k+b.start.column*d.characterWidth,e=e||"";a.push("<div class='",c," ace_start' style='","height:",l,"px;","right:0;","top:",n,"px;","left:",o,"px;",e,"'></div>");n=this.$getTop(b.end.row,d);a.push("<div class='",c,"' style='","height:",l,"px;","width:",b.end.column*d.characterWidth,"px;","top:",n,"px;","left:",k,"px;",e,"'></div>");l=(b.end.row-b.start.row-
1)*d.lineHeight;0>l||(n=this.$getTop(b.start.row+1,d),a.push("<div class='",c,"' style='","height:",l,"px;","right:0;","top:",n,"px;","left:",k,"px;",e,"'></div>"))};this.drawSingleLineMarker=function(a,b,c,d,e,k){var l=d.lineHeight,e=(b.end.column+(e||0)-b.start.column)*d.characterWidth,n=this.$getTop(b.start.row,d);a.push("<div class='",c,"' style='","height:",l,"px;","width:",e,"px;","top:",n,"px;","left:",this.$padding+b.start.column*d.characterWidth,"px;",k||"","'></div>")};this.drawFullLineMarker=
function(a,b,c,d,e){var k=this.$getTop(b.start.row,d),l=d.lineHeight;b.start.row!=b.end.row&&(l+=this.$getTop(b.end.row,d)-k);a.push("<div class='",c,"' style='","height:",l,"px;","top:",k,"px;","left:0;right:0;",e||"","'></div>")};this.drawScreenLineMarker=function(a,b,c,d,e){b=this.$getTop(b.start.row,d);a.push("<div class='",c,"' style='","height:",d.lineHeight,"px;","top:",b,"px;","left:0;right:0;",e||"","'></div>")}}).call(e.prototype);b.Marker=e});
ace.define("ace/layer/text","require exports module ace/lib/oop ace/lib/dom ace/lib/lang ace/lib/useragent ace/lib/event_emitter".split(" "),function(a,b){var c=a("../lib/oop"),d=a("../lib/dom"),e=a("../lib/lang");a("../lib/useragent");var h=a("../lib/event_emitter").EventEmitter,g=function(a){this.element=d.createElement("div");this.element.className="ace_layer ace_text-layer";a.appendChild(this.element);this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){c.implement(this,h);this.EOF_CHAR=
"\u00b6";this.EOL_CHAR_LF="\u00ac";this.EOL_CHAR_CRLF="\u00a4";this.EOL_CHAR=this.EOL_CHAR_LF;this.TAB_CHAR="\u2192";this.SPACE_CHAR="\u00b7";this.$padding=0;this.$updateEolChar=function(){var a=this.session.doc.getNewLineCharacter()=="\n"?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=a){this.EOL_CHAR=a;return true}};this.setPadding=function(a){this.$padding=a;this.element.style.padding="0 "+a+"px"};this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0};this.getCharacterWidth=
function(){return this.$fontMetrics.$characterSize.width||0};this.$setFontMetrics=function(a){this.$fontMetrics=a;this.$fontMetrics.on("changeCharacterSize",function(a){this._signal("changeCharacterSize",a)}.bind(this));this.$pollSizeChanges()};this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()};this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()};this.setSession=function(a){(this.session=a)&&this.$computeTabString()};this.showInvisibles=
false;this.setShowInvisibles=function(a){if(this.showInvisibles==a)return false;this.showInvisibles=a;this.$computeTabString();return true};this.displayIndentGuides=true;this.setDisplayIndentGuides=function(a){if(this.displayIndentGuides==a)return false;this.displayIndentGuides=a;this.$computeTabString();return true};this.$tabStrings=[];this.onChangeTabSize=this.$computeTabString=function(){var a=this.session.getTabSize();this.tabSize=a;for(var b=this.$tabStrings=[0],c=1;c<a+1;c++)this.showInvisibles?
b.push("<span class='ace_invisible ace_invisible_tab'>"+this.TAB_CHAR+e.stringRepeat("\u00a0",c-1)+"</span>"):b.push(e.stringRepeat("\u00a0",c));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;a="ace_indent-guide";c=b="";if(this.showInvisibles)var a=a+" ace_invisible",b=" ace_invisible_space",c=" ace_invisible_tab",d=e.stringRepeat(this.SPACE_CHAR,this.tabSize),g=this.TAB_CHAR+e.stringRepeat("\u00a0",this.tabSize-1);else g=d=e.stringRepeat("\u00a0",this.tabSize);this.$tabStrings[" "]=
"<span class='"+a+b+"'>"+d+"</span>";this.$tabStrings["\t"]="<span class='"+a+c+"'>"+g+"</span>"}};this.updateLines=function(a,b,c){(this.config.lastRow!=a.lastRow||this.config.firstRow!=a.firstRow)&&this.scrollLines(a);this.config=a;for(var d=Math.max(b,a.firstRow),c=Math.min(c,a.lastRow),b=this.element.childNodes,e=0,g=a.firstRow;g<d;g++){var h=this.session.getFoldLine(g);if(h)if(h.containsRow(d)){d=h.start.row;break}else g=h.end.row;e++}g=d;for(d=(h=this.session.getNextFoldLine(g))?h.start.row:
Infinity;;){if(g>d){g=h.end.row+1;d=(h=this.session.getNextFoldLine(g,h))?h.start.row:Infinity}if(g>c)break;var t=b[e++];if(t){var s=[];this.$renderLine(s,g,!this.$useLineGroups(),g==d?h:false);t.style.height=a.lineHeight*this.session.getRowLength(g)+"px";t.innerHTML=s.join("")}g++}};this.scrollLines=function(a){var b=this.config;this.config=a;if(!b||b.lastRow<a.firstRow||a.lastRow<b.firstRow)return this.update(a);var c=this.element;if(b.firstRow<a.firstRow)for(var d=this.session.getFoldedRowCount(b.firstRow,
a.firstRow-1);d>0;d--)c.removeChild(c.firstChild);if(b.lastRow>a.lastRow)for(d=this.session.getFoldedRowCount(a.lastRow+1,b.lastRow);d>0;d--)c.removeChild(c.lastChild);if(a.firstRow<b.firstRow){d=this.$renderLinesFragment(a,a.firstRow,b.firstRow-1);c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d)}if(a.lastRow>b.lastRow){d=this.$renderLinesFragment(a,b.lastRow+1,a.lastRow);c.appendChild(d)}};this.$renderLinesFragment=function(a,b,c){for(var e=this.element.ownerDocument.createDocumentFragment(),
g=this.session.getNextFoldLine(b),h=g?g.start.row:Infinity;;){if(b>h){b=g.end.row+1;h=(g=this.session.getNextFoldLine(b,g))?g.start.row:Infinity}if(b>c)break;var o=d.createElement("div"),t=[];this.$renderLine(t,b,false,b==h?g:false);o.innerHTML=t.join("");if(this.$useLineGroups()){o.className="ace_line_group";e.appendChild(o);o.style.height=a.lineHeight*this.session.getRowLength(b)+"px"}else for(;o.firstChild;)e.appendChild(o.firstChild);b++}return e};this.update=function(a){this.config=a;for(var b=
[],c=a.lastRow,d=a.firstRow,e=this.session.getNextFoldLine(d),g=e?e.start.row:Infinity;;){if(d>g){d=e.end.row+1;g=(e=this.session.getNextFoldLine(d,e))?e.start.row:Infinity}if(d>c)break;this.$useLineGroups()&&b.push("<div class='ace_line_group' style='height:",a.lineHeight*this.session.getRowLength(d),"px'>");this.$renderLine(b,d,false,d==g?e:false);this.$useLineGroups()&&b.push("</div>");d++}this.element.innerHTML=b.join("")};this.$textToken={text:true,rparen:true,lparen:true};this.$renderToken=
function(a,b,c,d){var g=this,h=d.replace(/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,
function(a,c,d,f){if(c)return g.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+e.stringRepeat(g.SPACE_CHAR,a.length)+"</span>":e.stringRepeat("\u00a0",a.length);if(a=="&")return"&#38;";if(a=="<")return"&#60;";if(a=="\t"){a=g.session.getScreenTabSize(b+f);b=b+(a-1);return g.$tabStrings[a]}if(a=="\u3000"){a=g.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk";c=g.showInvisibles?g.SPACE_CHAR:"";b=b+1;return"<span class='"+a+"' style='width:"+g.config.characterWidth*
2+"px'>"+c+"</span>"}if(d)return"<span class='ace_invisible ace_invisible_space ace_invalid'>"+g.SPACE_CHAR+"</span>";b=b+1;return"<span class='ace_cjk' style='width:"+g.config.characterWidth*2+"px'>"+a+"</span>"});if(this.$textToken[c.type])a.push(h);else{var o="ace_"+c.type.replace(/\./g," ace_"),t="";c.type=="fold"&&(t=" style='width:"+c.value.length*this.config.characterWidth+"px;' ");a.push("<span class='",o,"'",t,">",h,"</span>")}return b+d.length};this.renderIndentGuide=function(a,b,c){var d=
b.search(this.$indentGuideRe);if(d<=0||d>=c)return b;if(b[0]==" "){d=d-d%this.tabSize;a.push(e.stringRepeat(this.$tabStrings[" "],d/this.tabSize));return b.substr(d)}if(b[0]=="\t"){a.push(e.stringRepeat(this.$tabStrings["\t"],d));return b.substr(d)}return b};this.$renderWrappedLine=function(a,b,c,d){for(var e=0,g=0,h=c[0],t=0,s=0;s<b.length;s++){var q=b[s],m=q.value;if(s==0&&this.displayIndentGuides){e=m.length;m=this.renderIndentGuide(a,m,h);if(!m)continue;e=e-m.length}if(e+m.length<h){t=this.$renderToken(a,
t,q,m);e=e+m.length}else{for(;e+m.length>=h;){this.$renderToken(a,t,q,m.substring(0,h-e));m=m.substring(h-e);e=h;d||a.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>");g++;t=0;h=c[g]||Number.MAX_VALUE}if(m.length!=0){e=e+m.length;t=this.$renderToken(a,t,q,m)}}}};this.$renderSimpleLine=function(a,b){var c=0,d=b[0],e=d.value;this.displayIndentGuides&&(e=this.renderIndentGuide(a,e));e&&(c=this.$renderToken(a,c,d,e));for(var g=1;g<b.length;g++){d=b[g];e=d.value;c=this.$renderToken(a,
c,d,e)}};this.$renderLine=function(a,b,c,d){!d&&d!=false&&(d=this.session.getFoldLine(b));var e=d?this.$getFoldLineTokens(b,d):this.session.getTokens(b);c||a.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(b)),"px'>");if(e.length){var g=this.session.getRowSplitData(b);g&&g.length?this.$renderWrappedLine(a,e,g,c):this.$renderSimpleLine(a,e)}if(this.showInvisibles){if(d)b=d.end.row;a.push("<span class='ace_invisible ace_invisible_eol'>",
b==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")}c||a.push("</div>")};this.$getFoldLineTokens=function(a,b){var c=this.session,d=[],e=c.getTokens(a);b.walk(function(a,b,f,g,h){if(a!=null)d.push({type:"fold",value:a});else{h&&(e=c.getTokens(b));if(e.length)a:{a=e;for(h=b=0;h+a[b].value.length<g;){h=h+a[b].value.length;b++;if(b==a.length)break a}if(h!=g){var i=a[b].value.substring(g-h);i.length>f-g&&(i=i.substring(0,f-g));d.push({type:a[b].type,value:i});h=g+i.length;b=b+1}for(;h<
f&&b<a.length;){i=a[b].value;i.length+h>f?d.push({type:a[b].type,value:i.substring(0,f-h)}):d.push(a[b]);h=h+i.length;b=b+1}}}},b.end.row,this.session.getLine(b.end.row).length);return d};this.$useLineGroups=function(){return this.session.getUseWrapMode()};this.destroy=function(){clearInterval(this.$pollSizeChangesTimer);this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode);delete this.$measureNode}}).call(g.prototype);b.Text=g});
ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(a,b){var c=a("../lib/dom"),d,e=function(a){this.element=c.createElement("div");this.element.className="ace_layer ace_cursor-layer";a.appendChild(this.element);void 0===d&&(d="opacity"in this.element);this.isVisible=!1;this.isBlinking=!0;this.blinkInterval=1E3;this.smoothBlinking=!1;this.cursors=[];this.cursor=this.addCursor();c.addCssClass(this.element,"ace_hidden-cursors");this.$updateCursors=this.$updateVisibility.bind(this)};
(function(){this.$updateVisibility=function(a){for(var b=this.cursors,c=b.length;c--;)b[c].style.visibility=a?"":"hidden"};this.$updateOpacity=function(a){for(var b=this.cursors,c=b.length;c--;)b[c].style.opacity=a?"":"0"};this.$padding=0;this.setPadding=function(a){this.$padding=a};this.setSession=function(a){this.session=a};this.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())};this.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())};
this.setSmoothBlinking=function(a){a!=this.smoothBlinking&&!d&&(this.smoothBlinking=a,c.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.$updateCursors=(a?this.$updateOpacity:this.$updateVisibility).bind(this),this.restartTimer())};this.addCursor=function(){var a=c.createElement("div");a.className="ace_cursor";this.element.appendChild(a);this.cursors.push(a);return a};this.removeCursor=function(){if(1<this.cursors.length){var a=this.cursors.pop();a.parentNode.removeChild(a);
return a}};this.hideCursor=function(){this.isVisible=!1;c.addCssClass(this.element,"ace_hidden-cursors");this.restartTimer()};this.showCursor=function(){this.isVisible=!0;c.removeCssClass(this.element,"ace_hidden-cursors");this.restartTimer()};this.restartTimer=function(){var a=this.$updateCursors;clearInterval(this.intervalId);clearTimeout(this.timeoutId);this.smoothBlinking&&c.removeCssClass(this.element,"ace_smooth-blinking");a(!0);if(this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&
setTimeout(function(){c.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var b=function(){this.timeoutId=setTimeout(function(){a(!1)},0.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0);b()},this.blinkInterval);b()}};this.getPixelPosition=function(a,b){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var c=this.session.documentToScreenPosition(a);return{left:this.$padding+c.column*this.config.characterWidth,top:(c.row-
(b?this.config.firstRowScreen:0))*this.config.lineHeight}};this.update=function(a){this.config=a;var b=this.session.$selectionMarkers,c=0,d=0;if(void 0===b||0===b.length)b=[{cursor:null}];for(var c=0,e=b.length;c<e;c++){var k=this.getPixelPosition(b[c].cursor,!0);if(!((k.top>a.height+a.offset||0>k.top)&&1<c)){var l=(this.cursors[d++]||this.addCursor()).style;l.left=k.left+"px";l.top=k.top+"px";l.width=a.characterWidth+"px";l.height=a.lineHeight+"px"}}for(;this.cursors.length>d;)this.removeCursor();
this.$setOverwrite(this.session.getOverwrite());this.$pixelPos=k;this.restartTimer()};this.$setOverwrite=function(a){a!=this.overwrite&&((this.overwrite=a)?c.addCssClass(this.element,"ace_overwrite-cursors"):c.removeCssClass(this.element,"ace_overwrite-cursors"))};this.destroy=function(){clearInterval(this.intervalId);clearTimeout(this.timeoutId)}}).call(e.prototype);b.Cursor=e});
ace.define("ace/scrollbar","require exports module ace/lib/oop ace/lib/dom ace/lib/event ace/lib/event_emitter".split(" "),function(a,b){var c=a("./lib/oop"),d=a("./lib/dom"),e=a("./lib/event"),h=a("./lib/event_emitter").EventEmitter,g=function(a){this.element=d.createElement("div");this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix;this.inner=d.createElement("div");this.inner.className="ace_scrollbar-inner";this.element.appendChild(this.inner);a.appendChild(this.element);this.setVisible(false);
this.skipEvent=false;e.addListener(this.element,"scroll",this.onScroll.bind(this));e.addListener(this.element,"mousedown",e.preventDefault)};(function(){c.implement(this,h);this.setVisible=function(a){this.element.style.display=a?"":"none";this.isVisible=a}}).call(g.prototype);var f=function(a,b){g.call(this,a);this.scrollTop=0;b.$scrollbarWidth=this.width=d.scrollbarWidth(a.ownerDocument);this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};c.inherits(f,g);(function(){this.classSuffix=
"-v";this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop;this._emit("scroll",{data:this.scrollTop})}this.skipEvent=false};this.getWidth=function(){return this.isVisible?this.width:0};this.setHeight=function(a){this.element.style.height=a+"px"};this.setInnerHeight=function(a){this.inner.style.height=a+"px"};this.setScrollHeight=function(a){this.inner.style.height=a+"px"};this.setScrollTop=function(a){if(this.scrollTop!=a){this.skipEvent=true;this.scrollTop=this.element.scrollTop=
a}}}).call(f.prototype);var i=function(a,b){g.call(this,a);this.scrollLeft=0;this.height=b.$scrollbarWidth;this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};c.inherits(i,g);(function(){this.classSuffix="-h";this.onScroll=function(){if(!this.skipEvent){this.scrollLeft=this.element.scrollLeft;this._emit("scroll",{data:this.scrollLeft})}this.skipEvent=false};this.getHeight=function(){return this.isVisible?this.height:0};this.setWidth=function(a){this.element.style.width=a+"px"};
this.setInnerWidth=function(a){this.inner.style.width=a+"px"};this.setScrollWidth=function(a){this.inner.style.width=a+"px"};this.setScrollLeft=function(a){if(this.scrollLeft!=a){this.skipEvent=true;this.scrollLeft=this.element.scrollLeft=a}}}).call(i.prototype);b.ScrollBar=f;b.ScrollBarV=f;b.ScrollBarH=i;b.VScrollBar=f;b.HScrollBar=i});
ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(a,b){var c=a("./lib/event"),d=function(a,b){this.onRender=a;this.pending=!1;this.changes=0;this.window=b||window};(function(){this.schedule=function(a){this.changes|=a;if(!this.pending&&this.changes){this.pending=!0;var b=this;c.nextFrame(function(){b.pending=!1;for(var a;a=b.changes;)b.changes=0,b.onRender(a)},this.window)}}}).call(d.prototype);b.RenderLoop=d});
ace.define("ace/layer/font_metrics","require exports module ace/lib/oop ace/lib/dom ace/lib/lang ace/lib/useragent ace/lib/event_emitter".split(" "),function(a,b){var c=a("../lib/oop"),d=a("../lib/dom"),e=a("../lib/lang"),h=a("../lib/useragent"),g=a("../lib/event_emitter").EventEmitter,f=0;(function(){c.implement(this,g);this.$characterSize={width:0,height:0};this.$testFractionalRect=function(){var a=d.createElement("div");this.$setMeasureNodeStyles(a.style);a.style.width="0.2px";document.documentElement.appendChild(a);
var b=a.getBoundingClientRect().width;f=b>0&&b<1?50:100;a.parentNode.removeChild(a)};this.$setMeasureNodeStyles=function(a,b){a.width=a.height="auto";a.left=a.top="-100px";a.visibility="hidden";a.position="fixed";a.whiteSpace="pre";h.isIE<8?a["font-family"]="inherit":a.font="inherit";a.overflow=b?"hidden":"visible"};this.checkForSizeChanges=function(){var a=this.$measureSizes();if(a&&(this.$characterSize.width!==a.width||this.$characterSize.height!==a.height)){this.$measureNode.style.fontWeight="bold";
var b=this.$measureSizes();this.$measureNode.style.fontWeight="";this.$characterSize=a;this.charSizes=Object.create(null);this.allowBoldFonts=b&&b.width===a.width&&b.height===a.height;this._emit("changeCharacterSize",{data:a})}};this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var a=this;return this.$pollSizeChangesTimer=setInterval(function(){a.checkForSizeChanges()},500)};this.setPolling=function(a){a&&this.$pollSizeChanges()};this.$measureSizes=function(){if(f===
50){var a=null;try{a=this.$measureNode.getBoundingClientRect()}catch(b){a={width:0,height:0}}a={height:a.height,width:a.width/f}}else a={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/f};return a.width===0||a.height===0?null:a};this.$measureCharWidth=function(a){this.$main.innerHTML=e.stringRepeat(a,f);return this.$main.getBoundingClientRect().width/f};this.getCharacterWidth=function(a){var b=this.charSizes[a];b===void 0&&(this.charSizes[a]=this.$measureCharWidth(a)/this.$characterSize.width);
return b};this.destroy=function(){clearInterval(this.$pollSizeChangesTimer);this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call((b.FontMetrics=function(a){this.el=d.createElement("div");this.$setMeasureNodeStyles(this.el.style,true);this.$main=d.createElement("div");this.$setMeasureNodeStyles(this.$main.style);this.$measureNode=d.createElement("div");this.$setMeasureNodeStyles(this.$measureNode.style);this.el.appendChild(this.$main);this.el.appendChild(this.$measureNode);
a.appendChild(this.el);f||this.$testFractionalRect();this.$measureNode.innerHTML=e.stringRepeat("X",f);this.$characterSize={width:0,height:0};this.checkForSizeChanges()}).prototype)});
ace.define("ace/virtual_renderer","require exports module ace/lib/oop ace/lib/dom ace/config ace/lib/useragent ace/layer/gutter ace/layer/marker ace/layer/text ace/layer/cursor ace/scrollbar ace/scrollbar ace/renderloop ace/layer/font_metrics ace/lib/event_emitter".split(" "),function(a,b){var c=a("./lib/oop"),d=a("./lib/dom"),e=a("./config"),h=a("./lib/useragent"),g=a("./layer/gutter").Gutter,f=a("./layer/marker").Marker,i=a("./layer/text").Text,j=a("./layer/cursor").Cursor,k=a("./scrollbar").HScrollBar,
l=a("./scrollbar").VScrollBar,n=a("./renderloop").RenderLoop,o=a("./layer/font_metrics").FontMetrics,t=a("./lib/event_emitter").EventEmitter;d.importCssString('.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}',
"ace_editor");var s=function(a,b){var c=this;this.container=a||d.createElement("div");this.$keepTextAreaAtCursor=!h.isOldIE;d.addCssClass(this.container,"ace_editor");this.setTheme(b);this.$gutter=d.createElement("div");this.$gutter.className="ace_gutter";this.container.appendChild(this.$gutter);this.scroller=d.createElement("div");this.scroller.className="ace_scroller";this.container.appendChild(this.scroller);this.content=d.createElement("div");this.content.className="ace_content";this.scroller.appendChild(this.content);
this.$gutterLayer=new g(this.$gutter);this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this));this.$markerBack=new f(this.content);this.canvas=(this.$textLayer=new i(this.content)).element;this.$markerFront=new f(this.content);this.$cursorLayer=new j(this.content);this.$vScroll=this.$horizScroll=false;this.scrollBar=this.scrollBarV=new l(this.container,this);this.scrollBarH=new k(this.container,this);this.scrollBarV.addEventListener("scroll",function(a){c.$scrollAnimation||c.session.setScrollTop(a.data-
c.scrollMargin.top)});this.scrollBarH.addEventListener("scroll",function(a){c.$scrollAnimation||c.session.setScrollLeft(a.data-c.scrollMargin.left)});this.scrollLeft=this.scrollTop=0;this.cursorPos={row:0,column:0};this.$fontMetrics=new o(this.container,500);this.$textLayer.$setFontMetrics(this.$fontMetrics);this.$textLayer.addEventListener("changeCharacterSize",function(a){c.updateCharacterSize();c.onResize(true,c.gutterWidth,c.$size.width,c.$size.height);c._signal("changeCharacterSize",a)});this.$size=
{width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:true};this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1};this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0};this.$loop=new n(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView);this.$loop.schedule(this.CHANGE_FULL);this.updateCharacterSize();this.setPadding(4);e.resetOptions(this);e._emit("renderer",this)};
(function(){this.CHANGE_CURSOR=1;this.CHANGE_MARKER=2;this.CHANGE_GUTTER=4;this.CHANGE_SCROLL=8;this.CHANGE_LINES=16;this.CHANGE_TEXT=32;this.CHANGE_SIZE=64;this.CHANGE_MARKER_BACK=128;this.CHANGE_MARKER_FRONT=256;this.CHANGE_FULL=512;this.CHANGE_H_SCROLL=1024;c.implement(this,t);this.updateCharacterSize=function(){if(this.$textLayer.allowBoldFonts!=this.$allowBoldFonts){this.$allowBoldFonts=this.$textLayer.allowBoldFonts;this.setStyle("ace_nobold",!this.$allowBoldFonts)}this.layerConfig.characterWidth=
this.characterWidth=this.$textLayer.getCharacterWidth();this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight();this.$updatePrintMargin()};this.setSession=function(a){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode);(this.session=a)&&this.scrollMargin.top&&a.getScrollTop()<=0&&a.setScrollTop(-this.scrollMargin.top);this.$cursorLayer.setSession(a);this.$markerBack.setSession(a);this.$markerFront.setSession(a);this.$gutterLayer.setSession(a);this.$textLayer.setSession(a);
if(a){this.$loop.schedule(this.CHANGE_FULL);this.session.$setFontMetrics(this.$fontMetrics);this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this);this.onChangeNewLineMode();this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode)}};this.updateLines=function(a,b,c){b===void 0&&(b=Infinity);if(this.$changedLines){if(this.$changedLines.firstRow>a)this.$changedLines.firstRow=a;if(this.$changedLines.lastRow<b)this.$changedLines.lastRow=b}else this.$changedLines={firstRow:a,lastRow:b};if(this.$changedLines.lastRow<
this.layerConfig.firstRow)if(c)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)};this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT);this.$textLayer.$updateEolChar()};this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER);this.$textLayer.onChangeTabSize()};this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)};this.updateFull=
function(a){a?this.$renderChanges(this.CHANGE_FULL,true):this.$loop.schedule(this.CHANGE_FULL)};this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()};this.$changes=0;this.$updateSizeAsync=function(){if(this.$loop.pending)this.$size.$dirty=true;else this.onResize()};this.onResize=function(a,b,c,d){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=a?1:0;var e=this.container;d||(d=e.clientHeight||e.scrollHeight);c||(c=e.clientWidth||e.scrollWidth);b=this.$updateCachedSize(a,
b,c,d);if(!this.$size.scrollerHeight||!c&&!d)return this.resizing=0;if(a)this.$gutterLayer.$padding=null;a?this.$renderChanges(b|this.$changes,true):this.$loop.schedule(b|this.$changes);if(this.resizing)this.resizing=0}};this.$updateCachedSize=function(a,b,c,d){var d=d-(this.$extraHeight||0),e=0,f=this.$size,g={width:f.width,height:f.height,scrollerHeight:f.scrollerHeight,scrollerWidth:f.scrollerWidth};if(d&&(a||f.height!=d)){f.height=d;e=e|this.CHANGE_SIZE;f.scrollerHeight=f.height;if(this.$horizScroll)f.scrollerHeight=
f.scrollerHeight-this.scrollBarH.getHeight();this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px";e=e|this.CHANGE_SCROLL}if(c&&(a||f.width!=c)){e=e|this.CHANGE_SIZE;f.width=c;b==null&&(b=this.$showGutter?this.$gutter.offsetWidth:0);this.gutterWidth=b;this.scrollBarH.element.style.left=this.scroller.style.left=b+"px";f.scrollerWidth=Math.max(0,c-b-this.scrollBarV.getWidth());this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px";this.scroller.style.bottom=
this.scrollBarH.getHeight()+"px";if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||a)e=e|this.CHANGE_FULL}f.$dirty=!c||!d;e&&this._signal("resize",g);return e};this.onGutterResize=function(){var a=this.$showGutter?this.$gutter.offsetWidth:0;if(a!=this.gutterWidth)this.$changes=this.$changes|this.$updateCachedSize(true,a,this.$size.width,this.$size.height);if(this.session.getUseWrapMode()&&this.adjustWrapLimit())this.$loop.schedule(this.CHANGE_FULL);else if(this.$size.$dirty)this.$loop.schedule(this.CHANGE_FULL);
else{this.$computeLayerConfig();this.$loop.schedule(this.CHANGE_MARKER)}};this.adjustWrapLimit=function(){return this.session.adjustWrapLimit(Math.floor((this.$size.scrollerWidth-this.$padding*2)/this.characterWidth),this.$showPrintMargin&&this.$printMarginColumn)};this.setAnimatedScroll=function(a){this.setOption("animatedScroll",a)};this.getAnimatedScroll=function(){return this.$animatedScroll};this.setShowInvisibles=function(a){this.setOption("showInvisibles",a)};this.getShowInvisibles=function(){return this.getOption("showInvisibles")};
this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")};this.setDisplayIndentGuides=function(a){this.setOption("displayIndentGuides",a)};this.setShowPrintMargin=function(a){this.setOption("showPrintMargin",a)};this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")};this.setPrintMarginColumn=function(a){this.setOption("printMarginColumn",a)};this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")};this.getShowGutter=function(){return this.getOption("showGutter")};
this.setShowGutter=function(a){return this.setOption("showGutter",a)};this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")};this.setFadeFoldWidgets=function(a){this.setOption("fadeFoldWidgets",a)};this.setHighlightGutterLine=function(a){this.setOption("highlightGutterLine",a)};this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")};this.$updateGutterLineHighlight=function(){var a=this.$cursorLayer.$pixelPos,b=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var c=
this.session.selection.getCursor();c.column=0;a=this.$cursorLayer.getPixelPosition(c,true);b=b*this.session.getRowLength(c.row)}this.$gutterLineHighlight.style.top=a.top-this.layerConfig.offset+"px";this.$gutterLineHighlight.style.height=b+"px"};this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var a=d.createElement("div");a.className="ace_layer ace_print-margin-layer";this.$printMarginEl=d.createElement("div");this.$printMarginEl.className=
"ace_print-margin";a.appendChild(this.$printMarginEl);this.content.insertBefore(a,this.content.firstChild)}a=this.$printMarginEl.style;a.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px";a.visibility=this.$showPrintMargin?"visible":"hidden";this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}};this.getContainerElement=function(){return this.container};this.getMouseEventTarget=function(){return this.content};this.getTextAreaContainer=function(){return this.container};this.$moveTextAreaToCursor=
function(){if(this.$keepTextAreaAtCursor){var a=this.layerConfig,b=this.$cursorLayer.$pixelPos.top,c=this.$cursorLayer.$pixelPos.left,b=b-a.offset,d=this.lineHeight;if(!(b<0||b>a.height-d)){a=this.characterWidth;if(this.$composition)var e=this.textarea.value.replace(/^\x01+/,""),a=a*(this.session.$getStringScreenWidth(e)[0]+2),d=d+2;c=c-this.scrollLeft;c>this.$size.scrollerWidth-a&&(c=this.$size.scrollerWidth-a);c=c+this.gutterWidth;this.textarea.style.height=d+"px";this.textarea.style.width=a+"px";
this.textarea.style.left=Math.min(c,this.$size.scrollerWidth-a)+"px";this.textarea.style.top=Math.min(b,this.$size.height-d)+"px"}}};this.getFirstVisibleRow=function(){return this.layerConfig.firstRow};this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)};this.getLastFullyVisibleRow=function(){return this.layerConfig.firstRow-1+Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight)};this.getLastVisibleRow=function(){return this.layerConfig.lastRow};
this.$padding=null;this.setPadding=function(a){this.$padding=a;this.$textLayer.setPadding(a);this.$cursorLayer.setPadding(a);this.$markerFront.setPadding(a);this.$markerBack.setPadding(a);this.$loop.schedule(this.CHANGE_FULL);this.$updatePrintMargin()};this.setScrollMargin=function(a,b,c,d){var e=this.scrollMargin;e.top=a|0;e.bottom=b|0;e.right=d|0;e.left=c|0;e.v=e.top+e.bottom;e.h=e.left+e.right;e.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-e.top);this.updateFull()};this.getHScrollBarAlwaysVisible=
function(){return this.$hScrollBarAlwaysVisible};this.setHScrollBarAlwaysVisible=function(a){this.setOption("hScrollBarAlwaysVisible",a)};this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible};this.setVScrollBarAlwaysVisible=function(a){this.setOption("vScrollBarAlwaysVisible",a)};this.$updateScrollBarV=function(){var a=this.layerConfig.maxHeight,b=this.$size.scrollerHeight;if(!this.$maxLines&&this.$scrollPastEnd){a=a-(b-this.lineHeight)*this.$scrollPastEnd;if(this.scrollTop>
a-b){a=this.scrollTop+b;this.scrollBarV.scrollTop=null}}this.scrollBarV.setScrollHeight(a+this.scrollMargin.v);this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)};this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h);this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)};this.$frozen=false;this.freeze=function(){this.$frozen=true};this.unfreeze=function(){this.$frozen=false};this.$renderChanges=
function(a,b){if(this.$changes){a=a|this.$changes;this.$changes=0}if(!this.session||!this.container.offsetWidth||this.$frozen||!a&&!b)this.$changes=this.$changes|a;else{if(this.$size.$dirty){this.$changes=this.$changes|a;return this.onResize(true)}this.lineHeight||this.$textLayer.checkForSizeChanges();this._signal("beforeRender");var c=this.layerConfig;if(a&this.CHANGE_FULL||a&this.CHANGE_SIZE||a&this.CHANGE_TEXT||a&this.CHANGE_LINES||a&this.CHANGE_SCROLL||a&this.CHANGE_H_SCROLL){a=a|this.$computeLayerConfig();
if(c.firstRow!=this.layerConfig.firstRow&&c.firstRowScreen==this.layerConfig.firstRowScreen){c=this.scrollTop+(c.firstRow-this.layerConfig.firstRow)*this.lineHeight;if(c>0){this.scrollTop=c;a=a|this.CHANGE_SCROLL;a=a|this.$computeLayerConfig()}}c=this.layerConfig;this.$updateScrollBarV();a&this.CHANGE_H_SCROLL&&this.$updateScrollBarH();this.$gutterLayer.element.style.marginTop=-c.offset+"px";this.content.style.marginTop=-c.offset+"px";this.content.style.width=c.width+2*this.$padding+"px";this.content.style.height=
c.minHeight+"px"}if(a&this.CHANGE_H_SCROLL){this.content.style.marginLeft=-this.scrollLeft+"px";this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"}if(a&this.CHANGE_FULL){this.$textLayer.update(c);this.$showGutter&&this.$gutterLayer.update(c);this.$markerBack.update(c);this.$markerFront.update(c);this.$cursorLayer.update(c);this.$moveTextAreaToCursor();this.$highlightGutterLine&&this.$updateGutterLineHighlight()}else if(a&this.CHANGE_SCROLL){a&this.CHANGE_TEXT||
a&this.CHANGE_LINES?this.$textLayer.update(c):this.$textLayer.scrollLines(c);this.$showGutter&&this.$gutterLayer.update(c);this.$markerBack.update(c);this.$markerFront.update(c);this.$cursorLayer.update(c);this.$highlightGutterLine&&this.$updateGutterLineHighlight();this.$moveTextAreaToCursor()}else{if(a&this.CHANGE_TEXT){this.$textLayer.update(c);this.$showGutter&&this.$gutterLayer.update(c)}else a&this.CHANGE_LINES?(this.$updateLines()||a&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(c):
(a&this.CHANGE_TEXT||a&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(c);if(a&this.CHANGE_CURSOR){this.$cursorLayer.update(c);this.$moveTextAreaToCursor();this.$highlightGutterLine&&this.$updateGutterLineHighlight()}a&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(c);a&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(c)}this._signal("afterRender")}};this.$autosize=function(){var a=this.session.getScreenLength()*this.lineHeight,b=this.$maxLines*
this.lineHeight,c=Math.max((this.$minLines||1)*this.lineHeight,Math.min(b,a))+this.scrollMargin.v+(this.$extraHeight||0),a=a>b;if(c!=this.desiredHeight||this.$size.height!=this.desiredHeight||a!=this.$vScroll){if(a!=this.$vScroll){this.$vScroll=a;this.scrollBarV.setVisible(a)}a=this.container.clientWidth;this.container.style.height=c+"px";this.$updateCachedSize(true,this.$gutterWidth,a,c);this.desiredHeight=c;this._signal("autosize")}};this.$computeLayerConfig=function(){this.$maxLines&&this.lineHeight>
1&&this.$autosize();var a=this.session,b=this.$size,c=b.height<=2*this.lineHeight,d=this.session.getScreenLength()*this.lineHeight,e=this.scrollTop%this.lineHeight,f=b.scrollerHeight+this.lineHeight,g=this.$getLongestLine(),h=!c&&(this.$hScrollBarAlwaysVisible||b.scrollerWidth-g-2*this.$padding<0),i=this.$horizScroll!==h;if(i){this.$horizScroll=h;this.scrollBarH.setVisible(h)}h=!this.$maxLines&&this.$scrollPastEnd?(b.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;d=d+h;this.session.setScrollTop(Math.max(-this.scrollMargin.top,
Math.min(this.scrollTop,d-b.scrollerHeight+this.scrollMargin.bottom)));this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,g+2*this.$padding-b.scrollerWidth+this.scrollMargin.right)));h=!c&&(this.$vScrollBarAlwaysVisible||b.scrollerHeight-d+h<0||this.scrollTop);if(c=this.$vScroll!==h){this.$vScroll=h;this.scrollBarV.setVisible(h)}var f=Math.ceil(f/this.lineHeight)-1,h=Math.max(0,Math.round((this.scrollTop-e)/this.lineHeight)),j=h+f,k,l=this.lineHeight,h=a.screenToDocumentRow(h,
0);if(e=a.getFoldLine(h))h=e.start.row;k=a.documentToScreenRow(h,0);e=a.getRowLength(h)*l;j=Math.min(a.screenToDocumentRow(j,0),a.getLength()-1);f=b.scrollerHeight+a.getRowLength(j)*l+e;e=this.scrollTop-k*l;a=0;if(this.layerConfig.width!=g)a=this.CHANGE_H_SCROLL;if(i||c){a=this.$updateCachedSize(true,this.gutterWidth,b.width,b.height);this._signal("scrollbarVisibilityChanged");c&&(g=this.$getLongestLine())}this.layerConfig={width:g,padding:this.$padding,firstRow:h,firstRowScreen:k,lastRow:j,lineHeight:l,
characterWidth:this.characterWidth,minHeight:f,maxHeight:d,offset:e,gutterOffset:Math.max(0,Math.ceil((e+b.height-b.scrollerHeight)/l)),height:this.$size.scrollerHeight};return a};this.$updateLines=function(){var a=this.$changedLines.firstRow,b=this.$changedLines.lastRow;this.$changedLines=null;var c=this.layerConfig;if(!(a>c.lastRow+1)&&!(b<c.firstRow))if(b===Infinity){this.$showGutter&&this.$gutterLayer.update(c);this.$textLayer.update(c)}else{this.$textLayer.updateLines(c,a,b);return true}};this.$getLongestLine=
function(){var a=this.session.getScreenWidth();this.showInvisibles&&!this.session.$useWrapMode&&(a=a+1);return Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(a*this.characterWidth))};this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(true));this.$loop.schedule(this.CHANGE_MARKER_FRONT)};this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers());this.$loop.schedule(this.CHANGE_MARKER_BACK)};this.addGutterDecoration=function(a,
b){this.$gutterLayer.addGutterDecoration(a,b)};this.removeGutterDecoration=function(a,b){this.$gutterLayer.removeGutterDecoration(a,b)};this.updateBreakpoints=function(){this.$loop.schedule(this.CHANGE_GUTTER)};this.setAnnotations=function(a){this.$gutterLayer.setAnnotations(a);this.$loop.schedule(this.CHANGE_GUTTER)};this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)};this.hideCursor=function(){this.$cursorLayer.hideCursor()};this.showCursor=function(){this.$cursorLayer.showCursor()};
this.scrollSelectionIntoView=function(a,b,c){this.scrollCursorIntoView(a,c);this.scrollCursorIntoView(b,c)};this.scrollCursorIntoView=function(a,b,c){if(this.$size.scrollerHeight!==0){var d=this.$cursorLayer.getPixelPosition(a),a=d.left,d=d.top,e=c&&c.top||0,c=c&&c.bottom||0,f=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;if(f+e>d){b&&(d=d-b*this.$size.scrollerHeight);d===0&&(d=-this.scrollMargin.top);this.session.setScrollTop(d)}else if(f+this.$size.scrollerHeight-c<d+this.lineHeight){b&&
(d=d+b*this.$size.scrollerHeight);this.session.setScrollTop(d+this.lineHeight-this.$size.scrollerHeight)}b=this.scrollLeft;if(b>a){a<this.$padding+2*this.layerConfig.characterWidth&&(a=-this.scrollMargin.left);this.session.setScrollLeft(a)}else b+this.$size.scrollerWidth<a+this.characterWidth?this.session.setScrollLeft(Math.round(a+this.characterWidth-this.$size.scrollerWidth)):b<=this.$padding&&a-b<this.characterWidth&&this.session.setScrollLeft(0)}};this.getScrollTop=function(){return this.session.getScrollTop()};
this.getScrollLeft=function(){return this.session.getScrollLeft()};this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight};this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)};this.scrollToRow=function(a){this.session.setScrollTop(a*this.lineHeight)};this.alignCursor=function(a,b){typeof a=="number"&&(a={row:a,column:0});var c=this.$size.scrollerHeight-this.lineHeight,c=this.$cursorLayer.getPixelPosition(a).top-
c*(b||0);this.session.setScrollTop(c);return c};this.STEPS=8;this.$calcSteps=function(a,b){for(var c=0,d=this.STEPS,e=[],c=0;c<d;++c)e.push((b-a)*(Math.pow(c/this.STEPS-1,3)+1)+a);return e};this.scrollToLine=function(a,b,c,d){a=this.$cursorLayer.getPixelPosition({row:a,column:0}).top;b&&(a=a-this.$size.scrollerHeight/2);b=this.scrollTop;this.session.setScrollTop(a);c!==false&&this.animateScrolling(b,d)};this.animateScrolling=function(a,b){var c=this.scrollTop;if(this.$animatedScroll){var d=this;if(a!=
c){if(this.$scrollAnimation){var e=this.$scrollAnimation.steps;if(e.length){a=e[0];if(a==c)return}}var f=d.$calcSteps(a,c);this.$scrollAnimation={from:a,to:c,steps:f};clearInterval(this.$timer);d.session.setScrollTop(f.shift());d.session.$scrollTop=c;this.$timer=setInterval(function(){if(f.length){d.session.setScrollTop(f.shift());d.session.$scrollTop=c}else if(c!=null){d.session.$scrollTop=-1;d.session.setScrollTop(c);c=null}else{d.$timer=clearInterval(d.$timer);d.$scrollAnimation=null;b&&b()}},
10)}}};this.scrollToY=function(a){if(this.scrollTop!==a){this.$loop.schedule(this.CHANGE_SCROLL);this.scrollTop=a}};this.scrollToX=function(a){if(this.scrollLeft!==a)this.scrollLeft=a;this.$loop.schedule(this.CHANGE_H_SCROLL)};this.scrollTo=function(a,b){this.session.setScrollTop(b);this.session.setScrollLeft(b)};this.scrollBy=function(a,b){b&&this.session.setScrollTop(this.session.getScrollTop()+b);a&&this.session.setScrollLeft(this.session.getScrollLeft()+a)};this.isScrollableBy=function(a,b){if(b<
0&&this.session.getScrollTop()>=1-this.scrollMargin.top||b>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||a<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||a>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return true};this.pixelToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=(a+this.scrollLeft-c.left-this.$padding)/this.characterWidth,
c=Math.floor((b+this.scrollTop-c.top)/this.lineHeight),e=Math.round(d);return{row:c,column:e,side:d-e>0?1:-1}};this.screenToTextCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=Math.round((a+this.scrollLeft-c.left-this.$padding)/this.characterWidth);return this.session.screenToDocumentPosition((b+this.scrollTop-c.top)/this.lineHeight,Math.max(d,0))};this.textToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=this.session.documentToScreenPosition(a,
b),e=this.$padding+Math.round(d.column*this.characterWidth);return{pageX:c.left+e-this.scrollLeft,pageY:c.top+d.row*this.lineHeight-this.scrollTop}};this.visualizeFocus=function(){d.addCssClass(this.container,"ace_focus")};this.visualizeBlur=function(){d.removeCssClass(this.container,"ace_focus")};this.showComposition=function(){if(!this.$composition)this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText};this.$keepTextAreaAtCursor=true;d.addCssClass(this.textarea,
"ace_composition");this.textarea.style.cssText="";this.$moveTextAreaToCursor()};this.setCompositionText=function(){this.$moveTextAreaToCursor()};this.hideComposition=function(){if(this.$composition){d.removeCssClass(this.textarea,"ace_composition");this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor;this.textarea.style.cssText=this.$composition.cssText;this.$composition=null}};this.setTheme=function(a,b){function c(e){if(f.$themeId!=a)return b&&b();if(e.cssClass){d.importCssString(e.cssText,
e.cssClass,f.container.ownerDocument);f.theme&&d.removeCssClass(f.container,f.theme.cssClass);var g="padding"in e?e.padding:"padding"in(f.theme||{})?4:f.$padding;f.$padding&&g!=f.$padding&&f.setPadding(g);f.$theme=e.cssClass;f.theme=e;d.addCssClass(f.container,e.cssClass);d.setCssClass(f.container,"ace_dark",e.isDark);if(f.$size){f.$size.width=0;f.$updateSizeAsync()}f._dispatchEvent("themeLoaded",{theme:e});b&&b()}}var f=this;this.$themeId=a;f._dispatchEvent("themeChange",{theme:a});!a||typeof a==
"string"?e.loadModule(["theme",a||this.$options.theme.initialValue],c):c(a)};this.getTheme=function(){return this.$themeId};this.setStyle=function(a,b){d.setCssClass(this.container,a,b!==false)};this.unsetStyle=function(a){d.removeCssClass(this.container,a)};this.setCursorStyle=function(a){if(this.scroller.style.cursor!=a)this.scroller.style.cursor=a};this.setMouseCursor=function(a){this.scroller.style.cursor=a};this.destroy=function(){this.$textLayer.destroy();this.$cursorLayer.destroy()}}).call(s.prototype);
e.defineOptions(s.prototype,"renderer",{animatedScroll:{initialValue:false},showInvisibles:{set:function(a){this.$textLayer.setShowInvisibles(a)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:false},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:true},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(a){if(typeof a=="number")this.$printMarginColumn=a;this.$showPrintMargin=!!a;this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&
this.$printMarginColumn}},showGutter:{set:function(a){this.$gutter.style.display=a?"block":"none";this.$loop.schedule(this.CHANGE_FULL);this.onGutterResize()},initialValue:true},fadeFoldWidgets:{set:function(a){d.setCssClass(this.$gutter,"ace_fade-fold-widgets",a)},initialValue:false},showFoldWidgets:{set:function(a){this.$gutterLayer.setShowFoldWidgets(a)},initialValue:true},showLineNumbers:{set:function(a){this.$gutterLayer.setShowLineNumbers(a);this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:true},
displayIndentGuides:{set:function(a){this.$textLayer.setDisplayIndentGuides(a)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:true},highlightGutterLine:{set:function(a){if(this.$gutterLineHighlight){this.$gutterLineHighlight.style.display=a?"":"none";this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()}else{this.$gutterLineHighlight=d.createElement("div");this.$gutterLineHighlight.className="ace_gutter-active-line";this.$gutter.appendChild(this.$gutterLineHighlight)}},initialValue:false,
value:true},hScrollBarAlwaysVisible:{set:function(){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:false},vScrollBarAlwaysVisible:{set:function(){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:false},fontSize:{set:function(a){typeof a=="number"&&(a=a+"px");this.container.style.fontSize=a;this.updateFontSize()},initialValue:12},fontFamily:{set:function(a){this.container.style.fontFamily=
a;this.updateFontSize()}},maxLines:{set:function(){this.updateFull()}},minLines:{set:function(){this.updateFull()}},scrollPastEnd:{set:function(a){a=+a||0;if(this.$scrollPastEnd!=a){this.$scrollPastEnd=a;this.$loop.schedule(this.CHANGE_SCROLL)}},initialValue:0,handlesSet:true},fixedWidthGutter:{set:function(a){this.$gutterLayer.$fixedWidth=!!a;this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(a){this.setTheme(a)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",
handlesSet:true}});b.VirtualRenderer=s});
ace.define("ace/worker/worker_client","require exports module ace/lib/oop ace/lib/net ace/lib/event_emitter ace/config".split(" "),function(a,b){var c=a("../lib/oop"),d=a("../lib/net"),e=a("../lib/event_emitter").EventEmitter,h=a("../config"),g=function(b,c,d,e){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this);this.changeListener=this.changeListener.bind(this);this.onMessage=this.onMessage.bind(this);if(a.nameToUrl&&!a.toUrl)a.toUrl=a.nameToUrl;if(h.get("packaged")||!a.toUrl)e=e||h.moduleUrl(c,
"worker");else{var f=this.$normalizePath,e=e||f(a.toUrl("ace/worker/worker.js",null,"_")),g={};b.forEach(function(b){g[b]=f(a.toUrl(b,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(e)}catch(t){if(t instanceof window.DOMException){e=this.$workerBlob(e);b=window.URL||window.webkitURL;e=b.createObjectURL(e);this.$worker=new Worker(e);b.revokeObjectURL(e)}else throw t;}this.$worker.postMessage({init:true,tlns:g,module:c,classname:d});this.callbackId=1;this.callbacks={};this.$worker.onmessage=
this.onMessage};(function(){c.implement(this,e);this.onMessage=function(a){a=a.data;switch(a.type){case "event":this._signal(a.name,{data:a.data});break;case "call":var b=this.callbacks[a.id];if(b){b(a.data);delete this.callbacks[a.id]}break;case "error":this.reportError(a.data);break;case "log":window.console&&console.log&&console.log.apply(console,a.data)}};this.reportError=function(a){window.console&&console.error&&console.error(a)};this.$normalizePath=function(a){return d.qualifyURL(a)};this.terminate=
function(){this._signal("terminate",{});this.deltaQueue=null;this.$worker.terminate();this.$worker=null;this.$doc&&this.$doc.off("change",this.changeListener);this.$doc=null};this.send=function(a,b){this.$worker.postMessage({command:a,args:b})};this.call=function(a,b,c){if(c){var d=this.callbackId++;this.callbacks[d]=c;b.push(d)}this.send(a,b)};this.emit=function(a,b){try{this.$worker.postMessage({event:a,data:{data:b.data}})}catch(c){console.error(c.stack)}};this.attachToDocument=function(a){this.$doc&&
this.terminate();this.$doc=a;this.call("setValue",[a.getValue()]);a.on("change",this.changeListener)};this.changeListener=function(a){if(this.deltaQueue)this.deltaQueue.push(a.data);else{this.deltaQueue=[a.data];setTimeout(this.$sendDeltaQueue,0)}};this.$sendDeltaQueue=function(){var a=this.deltaQueue;if(a){this.deltaQueue=null;a.length>20&&a.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:a})}};this.$workerBlob=function(a){a="importScripts('"+
d.qualifyURL(a)+"');";try{return new Blob([a],{type:"application/javascript"})}catch(b){var c=new (window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);c.append(a);return c.getBlob("application/javascript")}}}).call(g.prototype);var f=function(a,b,c){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this);this.changeListener=this.changeListener.bind(this);this.callbackId=1;this.callbacks={};this.messageBuffer=[];var d=null,f=false,g=Object.create(e),t=this;this.$worker={};this.$worker.terminate=
function(){};this.$worker.postMessage=function(a){t.messageBuffer.push(a);d&&(f?setTimeout(s):s())};this.setEmitSync=function(a){f=a};var s=function(){var a=t.messageBuffer.shift();a.command?d[a.command].apply(d,a.args):a.event&&g._signal(a.event,a.data)};g.postMessage=function(a){t.onMessage({data:a})};g.callback=function(a,b){this.postMessage({type:"call",id:b,data:a})};g.emit=function(a,b){this.postMessage({type:"event",name:a,data:b})};h.loadModule(["worker",b],function(a){for(d=new a[c](g);t.messageBuffer.length;)s()})};
f.prototype=g.prototype;b.UIWorkerClient=f;b.WorkerClient=g});
ace.define("ace/placeholder","require exports module ace/range ace/lib/event_emitter ace/lib/oop".split(" "),function(a,b){var c=a("./range").Range,d=a("./lib/event_emitter").EventEmitter,e=a("./lib/oop"),h=function(a,b,c,d,e,h){var n=this;this.length=b;this.session=a;this.doc=a.getDocument();this.mainClass=e;this.othersClass=h;this.$onUpdate=this.onUpdate.bind(this);this.doc.on("change",this.$onUpdate);this.$others=d;this.$onCursorChange=function(){setTimeout(function(){n.onCursorChange()})};this.$pos=
c;this.$undoStackDepth=(a.getUndoManager().$undoStack||a.getUndoManager().$undostack||{length:-1}).length;this.setup();a.selection.on("changeCursor",this.$onCursorChange)};(function(){e.implement(this,d);this.setup=function(){var a=this,b=this.doc,d=this.session,e=this.$pos;this.selectionBefore=d.selection.toJSON();d.selection.inMultiSelectMode&&d.selection.toSingleRange();this.pos=b.createAnchor(e.row,e.column);this.markerId=d.addMarker(new c(e.row,e.column,e.row,e.column+this.length),this.mainClass,
null,false);this.pos.on("change",function(b){d.removeMarker(a.markerId);a.markerId=d.addMarker(new c(b.value.row,b.value.column,b.value.row,b.value.column+a.length),a.mainClass,null,false)});this.others=[];this.$others.forEach(function(c){c=b.createAnchor(c.row,c.column);a.others.push(c)});d.setUndoSelect(false)};this.showOtherMarkers=function(){if(!this.othersActive){var a=this.session,b=this;this.othersActive=true;this.others.forEach(function(d){d.markerId=a.addMarker(new c(d.row,d.column,d.row,
d.column+b.length),b.othersClass,null,false);d.on("change",function(e){a.removeMarker(d.markerId);d.markerId=a.addMarker(new c(e.value.row,e.value.column,e.value.row,e.value.column+b.length),b.othersClass,null,false)})})}};this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=false;for(var a=0;a<this.others.length;a++)this.session.removeMarker(this.others[a].markerId)}};this.onUpdate=function(a){var a=a.data,b=a.range;if(b.start.row===b.end.row&&b.start.row===this.pos.row&&!this.$updating){this.$updating=
true;var d=a.action==="insertText"?b.end.column-b.start.column:b.start.column-b.end.column;if(b.start.column>=this.pos.column&&b.start.column<=this.pos.column+this.length+1){var e=b.start.column-this.pos.column;this.length=this.length+d;if(!this.session.$fromUndo){if(a.action==="insertText")for(var h=this.others.length-1;h>=0;h--){var l=this.others[h],n={row:l.row,column:l.column+e};if(l.row===b.start.row&&b.start.column<l.column)n.column=n.column+d;this.doc.insert(n,a.text)}else if(a.action==="removeText")for(h=
this.others.length-1;h>=0;h--){l=this.others[h];n={row:l.row,column:l.column+e};if(l.row===b.start.row&&b.start.column<l.column)n.column=n.column+d;this.doc.remove(new c(n.row,n.column,n.row,n.column-d))}b.start.column===this.pos.column&&a.action==="insertText"?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-d);for(var a=0;a<this.others.length;a++){var c=this.others[a],e=c.row,g=c.column-d;c.row===b.start.row&&b.start.column<c.column&&(g=g+d);c.setPosition(e,g)}}.bind(this),
0):b.start.column===this.pos.column&&a.action==="removeText"&&setTimeout(function(){for(var a=0;a<this.others.length;a++){var c=this.others[a];c.row===b.start.row&&b.start.column<c.column&&c.setPosition(c.row,c.column-d)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(h=0;h<this.others.length;h++)this.others[h]._emit("change",{value:this.others[h]})}this.$updating=false}};this.onCursorChange=function(a){if(!this.$updating&&this.session){var b=this.session.selection.getCursor();if(b.row===
this.pos.row&&b.column>=this.pos.column&&b.column<=this.pos.column+this.length){this.showOtherMarkers();this._emit("cursorEnter",a)}else{this.hideOtherMarkers();this._emit("cursorLeave",a)}}};this.detach=function(){this.session.removeMarker(this.markerId);this.hideOtherMarkers();this.doc.removeEventListener("change",this.$onUpdate);this.session.selection.removeEventListener("changeCursor",this.$onCursorChange);this.pos.detach();for(var a=0;a<this.others.length;a++)this.others[a].detach();this.session.setUndoSelect(true);
this.session=null};this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");for(var a=this.session.getUndoManager(),b=(a.$undoStack||a.$undostack).length-this.$undoStackDepth,c=0;c<b;c++)a.undo(true);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}).call(h.prototype);b.PlaceHolder=h});
ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(a,b){function c(a,b){return a.row==b.row&&a.column==b.column}var d=a("../lib/event"),e=a("../lib/useragent");b.onMouseDown=function(a){var b=a.domEvent,f=b.altKey,i=b.shiftKey,j=b.ctrlKey,k=a.getAccelKey(),l=a.getButton();j&&e.isMac&&(l=b.button);if(a.editor.inMultiSelectMode&&2==l)a.editor.textInput.onContextMenu(a.domEvent);else if(!j&&!f&&!k)0===l&&a.editor.inMultiSelectMode&&
a.editor.exitMultiSelectMode();else if(0===l){var n=a.editor,o=n.selection,l=n.inMultiSelectMode,t=a.getDocumentPosition(),s=o.getCursor(),s=a.inSelection()||o.isEmpty()&&c(t,s),q=a.x,m=a.y,r=function(a){q=a.clientX;m=a.clientY},u=n.session,w=n.renderer.pixelToScreenCoordinates(q,m),y=w,v;if(n.$mouseHandler.$enableJumpToDef)j&&f||k&&f?v="add":f&&(v="block");else if(k&&!f){if(v="add",!l&&i)return}else f&&(v="block");v&&e.isMac&&b.ctrlKey&&n.$mouseHandler.cancelContextMenu();if("add"==v){if(l||!s){if(!l){var z=
o.toOrientedRange();n.addSelectionMarker(z)}var E=o.rangeList.rangeAtPoint(t);n.$blockScrolling++;n.inVirtualSelectionMode=!0;i&&(E=null,z=o.ranges[0],n.removeSelectionMarker(z));n.once("mouseup",function(){var a=o.toOrientedRange();E&&a.isEmpty()&&c(E.cursor,a.cursor)?o.substractPoint(a.cursor):(i?o.substractPoint(z.cursor):z&&(n.removeSelectionMarker(z),o.addRange(z)),o.addRange(a));n.$blockScrolling--;n.inVirtualSelectionMode=!1})}}else if("block"==v){a.stop();n.inVirtualSelectionMode=!0;var H,
C=[];l&&!k?o.toSingleRange():!l&&k&&(H=o.toOrientedRange(),n.addSelectionMarker(H));i?w=u.documentToScreenPosition(o.lead):o.moveToPosition(t);y={row:-1,column:-1};d.capture(n.container,r,function(){clearInterval(N);n.removeSelectionMarkers(C);C.length||(C=[o.toOrientedRange()]);n.$blockScrolling++;H&&(n.removeSelectionMarker(H),o.toSingleRange(H));for(var a=0;a<C.length;a++)o.addRange(C[a]);n.inVirtualSelectionMode=!1;n.$mouseHandler.$clickSelection=null;n.$blockScrolling--});var N=setInterval(function(){var a=
n.renderer.pixelToScreenCoordinates(q,m),b=u.screenToDocumentPosition(a.row,a.column);if(!c(y,a)||!c(b,o.lead))y=a,n.selection.moveToPosition(b),n.renderer.scrollCursorIntoView(),n.removeSelectionMarkers(C),C=o.rectangularRangeBlock(y,w),n.$mouseHandler.$clickSelection&&1==C.length&&C[0].isEmpty()&&(C[0]=n.$mouseHandler.$clickSelection.clone()),C.forEach(n.addSelectionMarker,n),n.updateSelectionMarkers()},20);return a.preventDefault()}}}});
ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(a,b){b.defaultCommands=[{name:"addCursorAbove",exec:function(a){a.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(a){a.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(a){a.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},
readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(a){a.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(a){a.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(a){a.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(a){a.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",
mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(a){a.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(a){a.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(a){a.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}},{name:"findAll",exec:function(a){a.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},readonly:!0}];
b.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(a){a.exitMultiSelectMode()},readonly:!0,isAvailable:function(a){return a&&a.inMultiSelectMode}}];var c=a("../keyboard/hash_handler").HashHandler;b.keyboardHandler=new c(b.multiSelectCommands)});
ace.define("ace/multi_select","require exports module ace/range_list ace/range ace/selection ace/mouse/multi_select_handler ace/lib/event ace/lib/lang ace/commands/multi_select_commands ace/search ace/edit_session ace/editor ace/config".split(" "),function(a,b){function c(a){if(!a.$multiselectOnSessionChange){a.$onAddRange=a.$onAddRange.bind(a);a.$onRemoveRange=a.$onRemoveRange.bind(a);a.$onMultiSelect=a.$onMultiSelect.bind(a);a.$onSingleSelect=a.$onSingleSelect.bind(a);a.$multiselectOnSessionChange=
b.onSessionChange.bind(a);a.$checkMultiselectChange=a.$checkMultiselectChange.bind(a);a.$multiselectOnSessionChange(a);a.on("changeSession",a.$multiselectOnSessionChange);a.on("mousedown",f);a.commands.addCommands(k.defaultCommands);d(a)}}function d(a){function b(){if(d){a.renderer.setMouseCursor("");d=false}}var c=a.textInput.getElement(),d=false;i.addListener(c,"keydown",function(c){if(c.keyCode==18&&!c.ctrlKey&&!c.shiftKey&&!c.metaKey){if(!d){a.renderer.setMouseCursor("crosshair");d=true}}else d&&
b()});i.addListener(c,"keyup",b);i.addListener(c,"blur",b)}var e=a("./range_list").RangeList,h=a("./range").Range,g=a("./selection").Selection,f=a("./mouse/multi_select_handler").onMouseDown,i=a("./lib/event"),j=a("./lib/lang"),k=a("./commands/multi_select_commands");b.commands=k.defaultCommands.concat(k.multiSelectCommands);var l=new (a("./search").Search);(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(a("./edit_session").EditSession.prototype);(function(){this.rangeList=
this.ranges=null;this.addRange=function(a,b){if(a){if(!this.inMultiSelectMode&&this.rangeCount===0){var c=this.toOrientedRange();this.rangeList.add(c);this.rangeList.add(a);if(this.rangeList.ranges.length!=2){this.rangeList.removeAll();return b||this.fromOrientedRange(a)}this.rangeList.removeAll();this.rangeList.add(c);this.$onAddRange(c)}if(!a.cursor)a.cursor=a.end;c=this.rangeList.add(a);this.$onAddRange(a);c.length&&this.$onRemoveRange(c);if(this.rangeCount>1&&!this.inMultiSelectMode){this._signal("multiSelect");
this.inMultiSelectMode=true;this.session.$undoSelect=false;this.rangeList.attach(this.session)}return b||this.fromOrientedRange(a)}};this.toSingleRange=function(a){var a=a||this.ranges[0],b=this.rangeList.removeAll();b.length&&this.$onRemoveRange(b);a&&this.fromOrientedRange(a)};this.substractPoint=function(a){if(a=this.rangeList.substractPoint(a)){this.$onRemoveRange(a);return a[0]}};this.mergeOverlappingRanges=function(){var a=this.rangeList.merge();a.length?this.$onRemoveRange(a):this.ranges[0]&&
this.fromOrientedRange(this.ranges[0])};this.$onAddRange=function(a){this.rangeCount=this.rangeList.ranges.length;this.ranges.unshift(a);this._signal("addRange",{range:a})};this.$onRemoveRange=function(a){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var b=this.rangeList.ranges.pop();a.push(b);this.rangeCount=0}for(var c=a.length;c--;)this.ranges.splice(this.ranges.indexOf(a[c]),1);this._signal("removeRange",{ranges:a});if(this.rangeCount===0&&this.inMultiSelectMode){this.inMultiSelectMode=
false;this._signal("singleSelect");this.session.$undoSelect=true;this.rangeList.detach(this.session)}(b=b||this.ranges[0])&&!b.isEqual(this.getRange())&&this.fromOrientedRange(b)};this.$initRangeList=function(){if(!this.rangeList){this.rangeList=new e;this.ranges=[];this.rangeCount=0}};this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]};this.splitIntoLines=function(){if(this.rangeCount>1){var a=this.rangeList.ranges,b=a[a.length-1],a=h.fromPoints(a[0].start,
b.end);this.toSingleRange();this.setSelectionRange(a,b.cursor==b.start)}else{var a=this.getRange(),c=this.isBackwards(),d=a.start.row,b=a.end.row;if(d==b){if(c){b=a.end;a=a.start}else{b=a.start;a=a.end}this.addRange(h.fromPoints(a,a));this.addRange(h.fromPoints(b,b))}else{var c=[],e=this.getLineRange(d,true);e.start.column=a.start.column;c.push(e);for(d=d+1;d<b;d++)c.push(this.getLineRange(d,true));e=this.getLineRange(b,true);e.end.column=a.end.column;c.push(e);c.forEach(this.addRange,this)}}};this.toggleBlockSelection=
function(){if(this.rangeCount>1){var a=this.rangeList.ranges,b=a[a.length-1],a=h.fromPoints(a[0].start,b.end);this.toSingleRange();this.setSelectionRange(a,b.cursor==b.start)}else{b=this.session.documentToScreenPosition(this.selectionLead);a=this.session.documentToScreenPosition(this.selectionAnchor);this.rectangularRangeBlock(b,a).forEach(this.addRange,this)}};this.rectangularRangeBlock=function(a,b,c){var d=[],e=a.column<b.column;if(e)var f=a.column,g=b.column;else{f=b.column;g=a.column}var i=a.row<
b.row;if(i)var j=a.row,a=b.row;else{j=b.row;a=a.row}f<0&&(f=0);j<0&&(j=0);for(j==a&&(c=true);j<=a;j++){b=h.fromPoints(this.session.screenToDocumentPosition(j,f),this.session.screenToDocumentPosition(j,g));if(b.isEmpty()){if(k&&b.end.row==k.row&&b.end.column==k.column)break;var k=b.end}b.cursor=e?b.start:b.end;d.push(b)}i&&d.reverse();if(!c){for(c=d.length-1;d[c].isEmpty()&&c>0;)c--;if(c>0)for(var l=0;d[l].isEmpty();)l++;for(;c>=l;c--)d[c].isEmpty()&&d.splice(c,1)}return d}}).call(g.prototype);var n=
a("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.addSelectionMarker=function(a){if(!a.cursor)a.cursor=a.end;var b=this.getSelectionStyle();a.marker=this.session.addMarker(a,"ace_selection",b);this.session.$selectionMarkers.push(a);this.session.selectionMarkerCount=this.session.$selectionMarkers.length;return a};this.removeSelectionMarker=function(a){if(a.marker){this.session.removeMarker(a.marker);a=this.session.$selectionMarkers.indexOf(a);
a!=-1&&this.session.$selectionMarkers.splice(a,1);this.session.selectionMarkerCount=this.session.$selectionMarkers.length}};this.removeSelectionMarkers=function(a){for(var b=this.session.$selectionMarkers,c=a.length;c--;){var d=a[c];if(d.marker){this.session.removeMarker(d.marker);d=b.indexOf(d);d!=-1&&b.splice(d,1)}}this.session.selectionMarkerCount=b.length};this.$onAddRange=function(a){this.addSelectionMarker(a.range);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onRemoveRange=
function(a){this.removeSelectionMarkers(a.ranges);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onMultiSelect=function(){if(!this.inMultiSelectMode){this.inMultiSelectMode=true;this.setStyle("ace_multiselect");this.keyBinding.addKeyboardHandler(k.keyboardHandler);this.commands.setDefaultHandler("exec",this.$onMultiSelectExec);this.renderer.updateCursor();this.renderer.updateBackMarkers()}};this.$onSingleSelect=function(){if(!this.session.multiSelect.inVirtualMode){this.inMultiSelectMode=
false;this.unsetStyle("ace_multiselect");this.keyBinding.removeKeyboardHandler(k.keyboardHandler);this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec);this.renderer.updateCursor();this.renderer.updateBackMarkers();this._emit("changeSelection")}};this.$onMultiSelectExec=function(a){var b=a.command,c=a.editor;if(c.multiSelect){if(b.multiSelectAction)if(b.multiSelectAction=="forEach")a=c.forEachSelection(b,a.args);else if(b.multiSelectAction=="forEachLine")a=c.forEachSelection(b,a.args,
true);else if(b.multiSelectAction=="single"){c.exitMultiSelectMode();a=b.exec(c,a.args||{})}else a=b.multiSelectAction(c,a.args||{});else{a=b.exec(c,a.args||{});c.multiSelect.addRange(c.multiSelect.toOrientedRange());c.multiSelect.mergeOverlappingRanges()}return a}};this.forEachSelection=function(a,b,c){if(!this.inVirtualSelectionMode){var d=c==true||c&&c.$byLines,e=this.session,f=this.selection,h=f.rangeList,c=(c&&c.keepOrder?f:h).ranges,i;if(!c.length)return a.exec?a.exec(this,b||{}):a(this,b||
{});h=f._eventRegistry;f._eventRegistry={};var j=new g(e);this.inVirtualSelectionMode=true;for(var k=c.length;k--;){if(d)for(;k>0&&c[k].start.row==c[k-1].end.row;)k--;j.fromOrientedRange(c[k]);j.index=k;this.selection=e.selection=j;var l=a.exec?a.exec(this,b||{}):a(this,b||{});!i&&l!==void 0&&(i=l);j.toOrientedRange(c[k])}j.detach();this.selection=e.selection=f;this.inVirtualSelectionMode=false;f._eventRegistry=h;f.mergeOverlappingRanges();a=this.renderer.$scrollAnimation;this.onCursorChange();this.onSelectionChange();
a&&a.from==a.to&&this.renderer.animateScrolling(a.from);return i}};this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()};this.getSelectedText=function(){var a="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var a=this.multiSelect.rangeList.ranges,b=[],c=0;c<a.length;c++)b.push(this.session.getTextRange(a[c]));c=this.session.getDocument().getNewLineCharacter();a=b.join(c);a.length==(b.length-1)*c.length&&(a="")}else this.selection.isEmpty()||
(a=this.session.getTextRange(this.getSelectionRange()));return a};this.$checkMultiselectChange=function(a,b){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var c=this.multiSelect.ranges[0];if(!(this.multiSelect.isEmpty()&&b==this.multiSelect.anchor)){c=b==this.multiSelect.anchor?c.cursor==c.start?c.end:c.start:c.cursor;c.row==b.row&&c.column==b.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}}};this.onPaste=function(a){if(!this.$readOnly){var b={text:a};this._signal("paste",
b);a=b.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(a);var b=a.split(/\r\n|\r|\n/),c=this.selection.rangeList.ranges;if(b.length>c.length||b.length<2||!b[1])return this.commands.exec("insertstring",this,a);for(a=c.length;a--;){var d=c[a];d.isEmpty()||this.session.remove(d);this.session.insert(d.start,b[a])}}};this.findAll=function(a,b,c){b=b||{};b.needle=a||b.needle;if(b.needle==void 0){var d=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();
b.needle=this.session.getTextRange(d)}this.$search.set(b);a=this.$search.findAll(this.session);if(!a.length)return 0;this.$blockScrolling=this.$blockScrolling+1;b=this.multiSelect;c||b.toSingleRange(a[0]);for(c=a.length;c--;)b.addRange(a[c],true);d&&b.rangeList.rangeAtPoint(d.start)&&b.addRange(d,true);this.$blockScrolling=this.$blockScrolling-1;return a.length};this.selectMoreLines=function(a,b){var c=this.selection.toOrientedRange(),d=c.cursor==c.end,e=this.session.documentToScreenPosition(c.cursor);
if(this.selection.$desiredColumn)e.column=this.selection.$desiredColumn;var f=this.session.screenToDocumentPosition(e.row+a,e.column);if(c.isEmpty())g=f;else var g=this.session.documentToScreenPosition(d?c.end:c.start),g=this.session.screenToDocumentPosition(g.row+a,g.column);if(d){d=h.fromPoints(f,g);d.cursor=d.start}else{d=h.fromPoints(g,f);d.cursor=d.end}d.desiredColumn=e.column;if(this.selection.inMultiSelectMode){if(b)var i=c.cursor}else this.selection.addRange(c);this.selection.addRange(d);
i&&this.selection.substractPoint(i)};this.transposeSelections=function(a){for(var b=this.session,c=b.multiSelect,d=c.ranges,e=d.length;e--;){var f=d[e];if(f.isEmpty()){var g=b.getWordRange(f.start.row,f.start.column);f.start.row=g.start.row;f.start.column=g.start.column;f.end.row=g.end.row;f.end.column=g.end.column}}c.mergeOverlappingRanges();c=[];for(e=d.length;e--;){f=d[e];c.unshift(b.getTextRange(f))}a<0?c.unshift(c.pop()):c.push(c.shift());for(e=d.length;e--;){f=d[e];g=f.clone();b.replace(f,c[e]);
f.start.row=g.start.row;f.start.column=g.start.column}};this.selectMore=function(a,b,c){var d=this.session,e=d.multiSelect.toOrientedRange();if(e.isEmpty()){e=d.getWordRange(e.start.row,e.start.column);e.cursor=a==-1?e.start:e.end;this.multiSelect.addRange(e);if(c)return}c=d.getTextRange(e);l.$options.wrap=true;l.$options.needle=c;l.$options.backwards=a==-1;if(d=l.find(d)){d.cursor=a==-1?d.start:d.end;this.$blockScrolling=this.$blockScrolling+1;this.session.unfold(d);this.multiSelect.addRange(d);
this.$blockScrolling=this.$blockScrolling-1;this.renderer.scrollCursorIntoView(null,0.5)}b&&this.multiSelect.substractPoint(e.cursor)};this.alignCursors=function(){var a=this.session,b=a.multiSelect,c=b.ranges,d=-1,e=c.filter(function(a){if(a.cursor.row==d)return true;d=a.cursor.row});if(!c.length||e.length==c.length-1){var c=this.selection.getRange(),e=c.start.row,f=c.end.row,g=e==f;if(g){var i=this.session.getLength(),k;do k=this.session.getLine(f);while(/[=:]/.test(k)&&++f<i);do k=this.session.getLine(e);
while(/[=:]/.test(k)&&--e>0);e<0&&(e=0);f>=i&&(f=i-1)}f=this.session.doc.removeLines(e,f);f=this.$reAlignText(f,g);this.session.doc.insert({row:e,column:0},f.join("\n")+"\n");if(!g){c.start.column=0;c.end.column=f[f.length-1].length}this.selection.setRange(c)}else{e.forEach(function(a){b.substractPoint(a.cursor)});var l=0,n=Infinity,E=c.map(function(b){var b=b.cursor,c=a.getLine(b.row).substr(b.column).search(/\S/g);c==-1&&(c=0);if(b.column>l)l=b.column;c<n&&(n=c);return c});c.forEach(function(b,
c){var d=b.cursor,e=l-d.column,f=E[c]-n;e>f?a.insert(d,j.stringRepeat(" ",e-f)):a.remove(new h(d.row,d.column,d.row,d.column-e+f));b.start.column=b.end.column=l;b.start.row=b.end.row=d.row;b.cursor=b.end});b.fromOrientedRange(c[0]);this.renderer.updateCursor();this.renderer.updateBackMarkers()}};this.$reAlignText=function(a,b){function c(a){return j.stringRepeat(" ",a)}function d(a){return!a[2]?a[0]:c(i)+a[2]+c(k-a[2].length+l)+a[4].replace(/^([=:])\s+/,"$1 ")}function e(a){return!a[2]?a[0]:c(i+k-
a[2].length)+a[2]+c(l," ")+a[4].replace(/^([=:])\s+/,"$1 ")}function f(a){return!a[2]?a[0]:c(i)+a[2]+c(l)+a[4].replace(/^([=:])\s+/,"$1 ")}var g=true,h=true,i,k,l;return a.map(function(a){var b=a.match(/(\s*)(.*?)(\s*)([=:].*)/);if(!b)return[a];if(i==null){i=b[1].length;k=b[2].length;l=b[3].length;return b}i+k+l!=b[1].length+b[2].length+b[3].length&&(h=false);i!=b[1].length&&(g=false);if(i>b[1].length)i=b[1].length;if(k<b[2].length)k=b[2].length;if(l>b[3].length)l=b[3].length;return b}).map(b?d:g?
h?e:d:f)}}).call(n.prototype);b.onSessionChange=function(a){var b=a.session;if(b&&!b.multiSelect){b.$selectionMarkers=[];b.selection.$initRangeList();b.multiSelect=b.selection}this.multiSelect=b&&b.multiSelect;if(a=a.oldSession){a.multiSelect.off("addRange",this.$onAddRange);a.multiSelect.off("removeRange",this.$onRemoveRange);a.multiSelect.off("multiSelect",this.$onMultiSelect);a.multiSelect.off("singleSelect",this.$onSingleSelect);a.multiSelect.lead.off("change",this.$checkMultiselectChange);a.multiSelect.anchor.off("change",
this.$checkMultiselectChange)}if(b){b.multiSelect.on("addRange",this.$onAddRange);b.multiSelect.on("removeRange",this.$onRemoveRange);b.multiSelect.on("multiSelect",this.$onMultiSelect);b.multiSelect.on("singleSelect",this.$onSingleSelect);b.multiSelect.lead.on("change",this.$checkMultiselectChange);b.multiSelect.anchor.on("change",this.$checkMultiselectChange)}b&&this.inMultiSelectMode!=b.selection.inMultiSelectMode&&(b.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};b.MultiSelect=
c;a("./config").defineOptions(n.prototype,"editor",{enableMultiselect:{set:function(a){c(this);if(a){this.on("changeSession",this.$multiselectOnSessionChange);this.on("mousedown",f)}else{this.off("changeSession",this.$multiselectOnSessionChange);this.off("mousedown",f)}},value:true}})});
ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(a,b){var c=a("../../range").Range;(function(){this.foldingStopMarker=this.foldingStartMarker=null;this.getFoldWidget=function(a,b,c){a=a.getLine(c);return this.foldingStartMarker.test(a)?"start":"markbeginend"==b&&this.foldingStopMarker&&this.foldingStopMarker.test(a)?"end":""};this.getFoldWidgetRange=function(){return null};this.indentationBlock=function(a,b,h){var g=/\S/,f=a.getLine(b),i=f.search(g);if(-1!=
i){for(var h=h||f.length,j=a.getLength(),k=f=b;++b<j;){var l=a.getLine(b).search(g);if(-1!=l){if(l<=i)break;k=b}}if(k>f)return a=a.getLine(k).length,new c(f,h,k,a)}};this.openingBracketBlock=function(a,b,h,g,f){h={row:h,column:g+1};if(b=a.$findClosingBracket(b,h,f))return f=a.foldWidgets[b.row],null==f&&(f=a.getFoldWidget(b.row)),"start"==f&&b.row>h.row&&(b.row--,b.column=a.getLine(b.row).length),c.fromPoints(h,b)};this.closingBracketBlock=function(a,b,h,g){h={row:h,column:g};if(a=a.$findOpeningBracket(b,
h))return a.column++,h.column--,c.fromPoints(a,h)}}).call((b.FoldMode=function(){}).prototype)});
ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(a,b){b.isDark=!1;b.cssClass="ace-tm";b.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';a("../lib/dom").importCssString(b.cssText,
b.cssClass)});
ace.define("ace/line_widgets","require exports module ace/lib/oop ace/lib/dom ace/range".split(" "),function(a,b){function c(a){this.session=a;this.session.widgetManager=this;this.session.getRowLength=this.getRowLength;this.session.$getWidgetScreenLength=this.$getWidgetScreenLength;this.updateOnChange=this.updateOnChange.bind(this);this.renderWidgets=this.renderWidgets.bind(this);this.measureWidgets=this.measureWidgets.bind(this);this.session._changedWidgets=[];this.$onChangeEditor=this.$onChangeEditor.bind(this);
this.session.on("change",this.updateOnChange);this.session.on("changeEditor",this.$onChangeEditor)}a("./lib/oop");var d=a("./lib/dom");a("./range");(function(){this.getRowLength=function(a){var b;b=this.lineWidgets?this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:0;return!this.$useWrapMode||!this.$wrapData[a]?1+b:this.$wrapData[a].length+1+b};this.$getWidgetScreenLength=function(){var a=0;this.lineWidgets.forEach(function(b){b&&b.rowCount&&(a=a+b.rowCount)});return a};this.$onChangeEditor=function(a){this.attach(a.editor)};
this.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach();if(this.editor!=a){this.detach();if(this.editor=a){a.widgetManager=this;a.renderer.on("beforeRender",this.measureWidgets);a.renderer.on("afterRender",this.renderWidgets)}}};this.detach=function(){var a=this.editor;if(a){this.editor=null;a.widgetManager=null;a.renderer.off("beforeRender",this.measureWidgets);a.renderer.off("afterRender",this.renderWidgets);(a=this.session.lineWidgets)&&a.forEach(function(a){if(a&&
a.el&&a.el.parentNode){a._inDocument=false;a.el.parentNode.removeChild(a.el)}})}};this.updateOnChange=function(a){var b=this.session.lineWidgets;if(b){var c=a.data,d=c.range,a=d.start.row,d=d.end.row-a;if(d!==0){if(c.action=="removeText"||c.action=="removeLines")b.splice(a+1,d).forEach(function(a){a&&this.removeLineWidget(a)},this);else{c=Array(d);c.unshift(a,0);b.splice.apply(b,c)}this.$updateRows()}}};this.$updateRows=function(){var a=this.session.lineWidgets;if(a){var b=true;a.forEach(function(a,
c){if(a){b=false;a.row=c}});if(b)this.session.lineWidgets=null}};this.addLineWidget=function(a){if(!this.session.lineWidgets)this.session.lineWidgets=Array(this.session.getLength());this.session.lineWidgets[a.row]=a;var b=this.editor.renderer;if(a.html&&!a.el){a.el=d.createElement("div");a.el.innerHTML=a.html}if(a.el){d.addCssClass(a.el,"ace_lineWidgetContainer");a.el.style.position="absolute";a.el.style.zIndex=5;b.container.appendChild(a.el);a._inDocument=true}if(!a.coverGutter)a.el.style.zIndex=
3;if(!a.pixelHeight)a.pixelHeight=a.el.offsetHeight;if(a.rowCount==null)a.rowCount=a.pixelHeight/b.layerConfig.lineHeight;this.session._emit("changeFold",{data:{start:{row:a.row}}});this.$updateRows();this.renderWidgets(null,b);return a};this.removeLineWidget=function(a){a._inDocument=false;a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el);if(a.editor&&a.editor.destroy)try{a.editor.destroy()}catch(b){}this.session.lineWidgets&&(this.session.lineWidgets[a.row]=void 0);this.session._emit("changeFold",
{data:{start:{row:a.row}}});this.$updateRows()};this.onWidgetChanged=function(a){this.session._changedWidgets.push(a);this.editor&&this.editor.renderer.updateFull()};this.measureWidgets=function(a,b){var c=this.session._changedWidgets,d=b.layerConfig;if(c&&c.length){for(var i=Infinity,j=0;j<c.length;j++){var k=c[j];if(!k._inDocument){k._inDocument=true;b.container.appendChild(k.el)}k.h=k.el.offsetHeight;if(!k.fixedWidth){k.w=k.el.offsetWidth;k.screenWidth=Math.ceil(k.w/d.characterWidth)}var l=k.h/
d.lineHeight;if(k.coverLine){l=l-this.session.getRowLineCount(k.row);l<0&&(l=0)}if(k.rowCount!=l){k.rowCount=l;if(k.row<i)i=k.row}}if(i!=Infinity){this.session._emit("changeFold",{data:{start:{row:i}}});this.session.lineWidgetWidth=null}this.session._changedWidgets=[]}};this.renderWidgets=function(a,b){var c=b.layerConfig,d=this.session.lineWidgets;if(d){for(var i=Math.min(this.firstRow,c.firstRow),j=Math.max(this.lastRow,c.lastRow,d.length);i>0&&!d[i];)i--;this.firstRow=c.firstRow;this.lastRow=c.lastRow;
for(b.$cursorLayer.config=c;i<=j;i++){var k=d[i];if(k&&k.el){if(!k._inDocument){k._inDocument=true;b.container.appendChild(k.el)}var l=b.$cursorLayer.getPixelPosition({row:i,column:0},true).top;k.coverLine||(l=l+c.lineHeight*this.session.getRowLineCount(k.row));k.el.style.top=l-c.offset+"px";l=k.coverGutter?0:b.gutterWidth;k.fixedWidth||(l=l-b.scrollLeft);k.el.style.left=l+"px";k.el.style.right=k.fixedWidth?b.scrollBar.getWidth()+"px":""}}}}}).call(c.prototype);b.LineWidgets=c});
ace.define("ace/ext/error_marker","require exports module ace/line_widgets ace/lib/dom ace/range".split(" "),function(a,b){function c(a,b,c){a=a.getAnnotations().sort(h.comparePoints);if(a.length){var d;a:{d={row:b,column:-1};for(var e=h.comparePoints,l=0,n=a.length-1;l<=n;){var o=l+n>>1,t=e(d,a[o]);if(t>0)l=o+1;else if(t<0)n=o-1;else{d=o;break a}}d=-(l+1)}d<0&&(d=-d-1);d>=a.length-1?d=c>0?0:a.length-1:d===0&&c<0&&(d=a.length-1);if((e=a[d])&&c){if(e.row===b){do e=a[d=d+c];while(e&&e.row===b);if(!e)return a.slice()}l=
[];b=e.row;do{l[c<0?"unshift":"push"](e);e=a[d=d+c]}while(e&&e.row==b);return l.length&&l}}}var d=a("../line_widgets").LineWidgets,e=a("../lib/dom"),h=a("../range").Range;b.showErrorMarker=function(a,b){var h=a.session;if(!h.widgetManager){h.widgetManager=new d(h);h.widgetManager.attach(a)}var j=a.getCursorPosition(),k=j.row,l=h.lineWidgets&&h.lineWidgets[k];l?l.destroy():k=k-b;if(k=c(h,k,b)){l=k[0];j.column=(l.pos&&typeof l.column!="number"?l.pos.sc:l.column)||0;j.row=l.row;l=a.renderer.$gutterLayer.$annotations[j.row]}else{if(l)return;
l={text:["Looks good!"],className:"ace_ok"}}a.session.unfold(j.row);a.selection.moveToPosition(j);var n={row:j.row,fixedWidth:true,coverGutter:true,el:e.createElement("div")},k=n.el.appendChild(e.createElement("div")),o=n.el.appendChild(e.createElement("div"));o.className="error_widget_arrow "+l.className;j=a.renderer.$cursorLayer.getPixelPosition(j).left;o.style.left=j+a.renderer.gutterWidth-5+"px";n.el.className="error_widget_wrapper";k.className="error_widget "+l.className;k.innerHTML=l.text.join("<br>");
k.appendChild(e.createElement("div"));var t=function(a,b,c){if(b===0&&(c==="esc"||c==="return")){n.destroy();return{command:"null"}}};n.destroy=function(){if(!a.$mouseHandler.isMousePressed){a.keyBinding.removeKeyboardHandler(t);h.widgetManager.removeLineWidget(n);a.off("changeSelection",n.destroy);a.off("changeSession",n.destroy);a.off("mouseup",n.destroy);a.off("change",n.destroy)}};a.keyBinding.addKeyboardHandler(t);a.on("changeSelection",n.destroy);a.on("changeSession",n.destroy);a.on("mouseup",
n.destroy);a.on("change",n.destroy);a.session.widgetManager.addLineWidget(n);n.el.onmousedown=a.focus.bind(a);a.renderer.scrollCursorIntoView(null,0.5,{bottom:n.el.offsetHeight})};e.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }",
"")});
ace.define("ace/ace","require exports module ace/lib/fixoldbrowsers ace/lib/dom ace/lib/event ace/editor ace/edit_session ace/undomanager ace/virtual_renderer ace/worker/worker_client ace/keyboard/hash_handler ace/placeholder ace/multi_select ace/mode/folding/fold_mode ace/theme/textmate ace/ext/error_marker ace/config".split(" "),function(a,b){a("./lib/fixoldbrowsers");var c=a("./lib/dom"),d=a("./lib/event"),e=a("./editor").Editor,h=a("./edit_session").EditSession,g=a("./undomanager").UndoManager,f=
a("./virtual_renderer").VirtualRenderer;a("./worker/worker_client");a("./keyboard/hash_handler");a("./placeholder");a("./multi_select");a("./mode/folding/fold_mode");a("./theme/textmate");a("./ext/error_marker");b.config=a("./config");b.require=a;b.edit=function(a){if(typeof a=="string"){var g=a,a=document.getElementById(g);if(!a)throw Error("ace.edit can't find div #"+g);}if(a&&a.env&&a.env.editor instanceof e)return a.env.editor;g="";if(a&&/input|textarea/i.test(a.tagName)){var h=a,g=h.value,a=
c.createElement("pre");h.parentNode.replaceChild(a,h)}else{g=c.getInnerText(a);a.innerHTML=""}g=b.createEditSession(g);a=new e(new f(a));a.setSession(g);var l={document:g,editor:a,onResize:a.resize.bind(a,null)};if(h)l.textarea=h;d.addListener(window,"resize",l.onResize);a.on("destroy",function(){d.removeListener(window,"resize",l.onResize);l.editor.container.env=null});a.container.env=a.env=l;return a};b.createEditSession=function(a,b){var c=new h(a,b);c.setUndoManager(new g);return c};b.EditSession=
h;b.UndoManager=g});(function(){ace.require(["ace/ace"],function(a){a&&a.config.init(!0);window.ace||(window.ace=a);for(var b in a)a.hasOwnProperty(b)&&(window.ace[b]=a[b])})})();steal.executed("lib/external/ace-editor/ace.js");steal("vendor/jQuery.Hotkeys/jquery.hotkeys.js","vendor/jquery.cookie/jquery.cookie.js","vendor/jcarousel/jquery.jcarousel.js");steal.executed("lib/external/stealjqueryPlugins.js");
(function(a){function b(b){"string"===typeof b.data&&(b.data={keys:b.data});if(b.data&&b.data.keys&&"string"===typeof b.data.keys){var d=b.handler,e=b.data.keys.toLowerCase().split(" ");b.handler=function(b){if(!(this!==b.target&&(/textarea|select/i.test(b.target.nodeName)||a.hotkeys.options.filterTextInputs&&-1<a.inArray(b.target.type,a.hotkeys.textAcceptingInputTypes)))){var c="keypress"!==b.type&&a.hotkeys.specialKeys[b.which],f=String.fromCharCode(b.which).toLowerCase(),i="",j={};a.each(["alt",
"ctrl","shift"],function(a,d){b[d+"Key"]&&c!==d&&(i+=d+"+")});b.metaKey&&!b.ctrlKey&&"meta"!==c&&(i+="meta+");b.metaKey&&"meta"!==c&&-1<i.indexOf("alt+ctrl+shift+")&&(i=i.replace("alt+ctrl+shift+","hyper+"));c?j[i+c]=!0:(j[i+f]=!0,j[i+a.hotkeys.shiftNums[f]]=!0,"shift+"===i&&(j[a.hotkeys.shiftNums[f]]=!0));for(var f=0,k=e.length;f<k;f++)if(j[e[f]])return d.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",
20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},
shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:"text password number email url range date month week time datetime datetime-local search color tel".split(" "),options:{filterTextInputs:!0}};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})})(jQuery||this.jQuery||window.jQuery);steal.executed("vendor/jQuery.Hotkeys/jquery.hotkeys.js");
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){function b(a){return e.raw?a:encodeURIComponent(a)}function c(b,c){var f;if(e.raw)f=b;else a:{var i=b;0===i.indexOf('"')&&(i=i.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{i=decodeURIComponent(i.replace(d," "));f=e.json?JSON.parse(i):i;break a}catch(j){}f=void 0}return a.isFunction(c)?c(f):f}var d=/\+/g,e=a.cookie=function(d,g,f){if(void 0!==
g&&!a.isFunction(g)){f=a.extend({},e.defaults,f);if("number"===typeof f.expires){var i=f.expires,j=f.expires=new Date;j.setTime(+j+864E5*i)}return document.cookie=[b(d),"=",b(e.json?JSON.stringify(g):""+g),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}for(var f=d?void 0:{},i=document.cookie?document.cookie.split("; "):[],j=0,k=i.length;j<k;j++){var l=i[j].split("="),n;n=l.shift();n=e.raw?n:decodeURIComponent(n);
l=l.join("=");if(d&&d===n){f=c(l,g);break}if(!d&&void 0!==(l=c(l)))f[n]=l}return f};e.defaults={};a.removeCookie=function(b,c){if(void 0===a.cookie(b))return!1;a.cookie(b,"",a.extend({},c,{expires:-1}));return!a.cookie(b)}});steal.executed("vendor/jquery.cookie/jquery.cookie.js");
(function(a){var b=a.jCarousel={};b.version="0.3.4";var c=/^([+\-]=)?(.+)$/;b.parseTarget=function(a){var b=!1,h="object"!==typeof a?c.exec(a):null;h?(a=parseInt(h[2],10)||0,h[1]&&(b=!0,"-="===h[1]&&(a*=-1))):"object"!==typeof a&&(a=parseInt(a,10)||0);return{target:a,relative:b}};b.detectCarousel=function(a){for(var b;0<a.length;){b=a.filter("[data-jcarousel]");if(0<b.length)return b;b=a.find("[data-jcarousel]");if(0<b.length)return b;a=a.parent()}return null};b.base=function(c){return{version:b.version,
_options:{},_element:null,_carousel:null,_init:a.noop,_create:a.noop,_destroy:a.noop,_reload:a.noop,create:function(){this._element.attr("data-"+c.toLowerCase(),!0).data(c,this);if(!1===this._trigger("create"))return this;this._create();this._trigger("createend");return this},destroy:function(){if(!1===this._trigger("destroy"))return this;this._destroy();this._trigger("destroyend");this._element.removeData(c).removeAttr("data-"+c.toLowerCase());return this},reload:function(a){if(!1===this._trigger("reload"))return this;
a&&this.options(a);this._reload();this._trigger("reloadend");return this},element:function(){return this._element},options:function(b,c){if(0===arguments.length)return a.extend({},this._options);if("string"===typeof b){if("undefined"===typeof c)return"undefined"===typeof this._options[b]?null:this._options[b];this._options[b]=c}else this._options=a.extend({},this._options,b);return this},carousel:function(){this._carousel||(this._carousel=b.detectCarousel(this.options("carousel")||this._element))||
a.error('Could not detect carousel for plugin "'+c+'"');return this._carousel},_trigger:function(b,h,g){var f,i=!1,g=[this].concat(g||[]);(h||this._element).each(function(){f=a.Event((c+":"+b).toLowerCase());a(this).trigger(f,g);f.isDefaultPrevented()&&(i=!0)});return!i}}};b.plugin=function(c,e){var h=a[c]=function(b,c){this._element=a(b);this.options(c);this._init();this.create()};h.fn=h.prototype=a.extend({},b.base(c),e);a.fn[c]=function(b){var e=Array.prototype.slice.call(arguments,1),i=this;"string"===
typeof b?this.each(function(){var h=a(this).data(c);if(!h)return a.error("Cannot call methods on "+c+' prior to initialization; attempted to call method "'+b+'"');if(!a.isFunction(h[b])||"_"===b.charAt(0))return a.error('No such method "'+b+'" for '+c+" instance");var k=h[b].apply(h,e);if(k!==h&&"undefined"!==typeof k)return i=k,!1}):this.each(function(){var e=a(this).data(c);e instanceof h?e.reload(b):new h(this,b)});return i};return h}})(jQuery);
(function(a,b){var c=function(a){return parseFloat(a)||0};a.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,underflow:!1,relative:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,transitions:!1,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:a(),_first:a(),_last:a(),_visible:a(),_fullyvisible:a(),_init:function(){var a=this;
this.onWindowResize=function(){a.resizeTimer&&clearTimeout(a.resizeTimer);a.resizeTimer=setTimeout(function(){a.reload()},100)};return this},_create:function(){this._reload();a(b).on("resize.jcarousel",this.onWindowResize)},_destroy:function(){a(b).off("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical");null==this.vertical&&(this.vertical=this.list().height()>this.list().width());this.rtl=this.options("rtl");null==this.rtl&&(this.rtl=function(b){if("rtl"===
(""+b.attr("dir")).toLowerCase())return!0;var c=!1;b.parents("[dir]").each(function(){if(/rtl/i.test(a(this).attr("dir")))return c=!0,!1});return c}(this._element));this.lt=this.vertical?"top":"left";this.relative="relative"===this.list().css("position");this._items=this._list=null;var b=0<=this.index(this._target)?this._target:this.closest();this.circular="circular"===this.options("wrap");this.underflow=!1;var c={left:0,top:0};0<b.length&&(this._prepare(b),this.list().find("[data-jcarousel-clone]").remove(),
this._items=null,this.underflow=this._fullyvisible.length>=this.items().length,this.circular=this.circular&&!this.underflow,c[this.lt]=this._position(b)+"px");this.move(c);return this},list:function(){if(null===this._list){var b=this.options("list");this._list=a.isFunction(b)?b.call(this):this._element.find(b)}return this._list},items:function(){if(null===this._items){var b=this.options("items");this._items=(a.isFunction(b)?b.call(this):this.list().find(b)).not("[data-jcarousel-clone]")}return this._items},
index:function(a){return this.items().index(a)},closest:function(){var b=this,e=this.list().position()[this.lt],h=a(),g=!1,f=this.vertical?"bottom":this.rtl&&!this.relative?"left":"right",i;this.rtl&&this.relative&&!this.vertical&&(e+=this.list().width()-this.clipping());this.items().each(function(){h=a(this);if(g)return!1;var j=b.dimension(h);e+=j;if(0<=e)if(i=j-c(h.css("margin-"+f)),0>=Math.abs(e)-j+i/2)g=!0;else return!1});return h},target:function(){return this._target},first:function(){return this._first},
last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var a=this.options("wrap"),b=this.items().length-1,c=this.options("center")?this._target:this._last;return 0<=b&&!this.underflow&&(a&&"first"!==a||this.index(c)<b||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var a=this.options("wrap");return 0<this.items().length&&
!this.underflow&&(a&&"last"!==a||0<this.index(this._first)||this.tail&&this.inTail)?!0:!1},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(a){return a["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(b,c,h){if(this.animating||!1===this._trigger("scroll",null,[b,c]))return this;a.isFunction(c)&&(h=c,c=!0);var g=a.jCarousel.parseTarget(b);if(g.relative){var b=this.items().length-1,f=Math.abs(g.target),i=this.options("wrap"),j;if(0<
g.target)if(j=this.index(this._last),j>=b&&this.tail)this.inTail?"both"===i||"last"===i?this._scroll(0,c,h):a.isFunction(h)&&h.call(this,!1):this._scrollTail(c,h);else if(g=this.index(this._target),this.underflow&&g===b&&("circular"===i||"both"===i||"last"===i)||!this.underflow&&j===b&&("both"===i||"last"===i))this._scroll(0,c,h);else if(f=g+f,this.circular&&f>b){i=b;for(b=this.items().get(-1);i++<f;)b=this.items().eq(0),(g=0<=this._visible.index(b))&&b.after(b.clone(!0).attr("data-jcarousel-clone",
!0)),this.list().append(b),g||(g={},g[this.lt]=this.dimension(b),this.moveBy(g)),this._items=null;this._scroll(b,c,h)}else this._scroll(Math.min(f,b),c,h);else if(this.inTail)this._scroll(Math.max(this.index(this._first)-f+1,0),c,h);else if(j=this.index(this._first),g=this.index(this._target),g=this.underflow?g:j,f=g-f,0>=g&&(this.underflow&&"circular"===i||"both"===i||"first"===i))this._scroll(b,c,h);else if(this.circular&&0>f){i=f;for(b=this.items().get(0);0>i++;)b=this.items().eq(-1),0<=this._visible.index(b)&&
b.after(b.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(b),this._items=null,f=this.dimension(b),g={},g[this.lt]=-f,this.moveBy(g);this._scroll(b,c,h)}else this._scroll(Math.max(f,0),c,h)}else this._scroll(g.target,c,h);this._trigger("scrollend");return this},moveBy:function(a,b){var h=this.list().position(),g=1,f=0;this.rtl&&!this.vertical&&(g=-1,this.relative&&(f=this.list().width()-this.clipping()));a.left&&(a.left=h.left+f+c(a.left)*g+"px");a.top&&(a.top=h.top+f+c(a.top)*g+"px");
return this.move(a,b)},move:function(b,c){var c=c||{},h=this.options("transitions"),g=!!h,f=!!h.transforms,i=!!h.transforms3d,j=c.duration||0,k=this.list();if(!g&&0<j)k.animate(b,c);else{var l=c.complete||a.noop,n={};if(g)var o={transitionDuration:k.css("transitionDuration"),transitionTimingFunction:k.css("transitionTimingFunction"),transitionProperty:k.css("transitionProperty")},t=l,l=function(){a(this).css(o);t.call(this)},h=h.easing||c.easing,n=0<j?f||i?"all":b.left?"left":"top":"none",n={transitionDuration:(0<
j?j/1E3:0)+"s",transitionTimingFunction:h,transitionProperty:n,transform:"none"};i?n.transform="translate3d("+(b.left||0)+","+(b.top||0)+",0)":f?n.transform="translate("+(b.left||0)+","+(b.top||0)+")":a.extend(n,b);if(g&&0<j)k.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",l);k.css(n);0>=j&&k.each(function(){l.call(this)})}},_scroll:function(b,c,h){if(this.animating)return a.isFunction(h)&&h.call(this,!1),this;"object"!==typeof b?b=this.items().eq(b):"undefined"===
typeof b.jquery&&(b=a(b));if(0===b.length)return a.isFunction(h)&&h.call(this,!1),this;this.inTail=!1;this._prepare(b);var b=this._position(b),g=this.list().position()[this.lt];if(b===g)return a.isFunction(h)&&h.call(this,!1),this;g={};g[this.lt]=b+"px";this._animate(g,c,h);return this},_scrollTail:function(b,c){if(this.animating||!this.tail)return a.isFunction(c)&&c.call(this,!1),this;var h=this.list().position()[this.lt];this.rtl&&this.relative&&!this.vertical&&(h+=this.list().width()-this.clipping());
h=this.rtl&&!this.vertical?h+this.tail:h-this.tail;this.inTail=!0;var g={};g[this.lt]=h+"px";this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())});this._animate(g,b,c);return this},_animate:function(b,c,h){h=h||a.noop;if(!1===this._trigger("animate"))return h.call(this,!1),this;this.animating=!0;var g=this.options("animation"),f=a.proxy(function(){this.animating=!1;var a=this.list().find("[data-jcarousel-clone]");0<a.length&&(a.remove(),this._reload());
this._trigger("animateend");h.call(this,!0)},this),g="object"===typeof g?a.extend({},g):{duration:g},i=g.complete||a.noop;!1===c?g.duration=0:"undefined"!==typeof a.fx.speeds[g.duration]&&(g.duration=a.fx.speeds[g.duration]);g.complete=function(){f();i.call(this)};this.move(b,g);return this},_prepare:function(b){var e=this.index(b),h=e,g=this.dimension(b),f=this.clipping(),i=this.vertical?"bottom":this.rtl?"left":"right",j=this.options("center"),k={target:b,first:b,last:b,visible:b,fullyvisible:g<=
f?b:a()},l,n;j&&(g/=2,f/=2);if(g<f)for(;;){l=this.items().eq(++h);if(0===l.length){if(!this.circular)break;l=this.items().eq(0);if(b.get(0)===l.get(0))break;(n=0<=this._visible.index(l))&&l.after(l.clone(!0).attr("data-jcarousel-clone",!0));this.list().append(l);n||(n={},n[this.lt]=this.dimension(l),this.moveBy(n));this._items=null}n=this.dimension(l);if(0===n)break;g+=n;k.last=l;k.visible=k.visible.add(l);n=c(l.css("margin-"+i));g-n<=f&&(k.fullyvisible=k.fullyvisible.add(l));if(g>=f)break}if(!this.circular&&
!j&&g<f)for(h=e;!(0>--h);){l=this.items().eq(h);if(0===l.length)break;n=this.dimension(l);if(0===n)break;g+=n;k.first=l;k.visible=k.visible.add(l);n=c(l.css("margin-"+i));g-n<=f&&(k.fullyvisible=k.fullyvisible.add(l));if(g>=f)break}this._update(k);this.tail=0;!j&&"circular"!==this.options("wrap")&&("custom"!==this.options("wrap")&&this.index(k.last)===this.items().length-1)&&(g-=c(k.last.css("margin-"+i)),g>f&&(this.tail=g-f));return this},_position:function(a){var b=this._first,c=b.position()[this.lt],
g=this.options("center"),f=g?this.clipping()/2-this.dimension(b)/2:0;this.rtl&&!this.vertical?(c=this.relative?c-(this.list().width()-this.dimension(b)):c-(this.clipping()-this.dimension(b)),c+=f):c-=f;!g&&(this.index(a)>this.index(b)||this.inTail)&&this.tail?(c=this.rtl&&!this.vertical?c-this.tail:c+this.tail,this.inTail=!0):this.inTail=!1;return-c},_update:function(b){var c=this,h={target:this._target,first:this._first,last:this._last,visible:this._visible,fullyvisible:this._fullyvisible},g=this.index(b.first||
h.first)<this.index(h.first),f,i=function(f){var i=[],l=[];b[f].each(function(){0>h[f].index(this)&&i.push(this)});h[f].each(function(){0>b[f].index(this)&&l.push(this)});g?i=i.reverse():l=l.reverse();c._trigger(f+"in",a(i));c._trigger(f+"out",a(l));c["_"+f]=b[f]};for(f in b)i(f);return this}})})(jQuery,window);
(function(a){a.jcarousel.fn.scrollIntoView=function(b,c,d){var b=a.jCarousel.parseTarget(b),e=this.index(this._fullyvisible.first()),h=this.index(this._fullyvisible.last()),b=b.relative?0>b.target?Math.max(0,e+b.target):h+b.target:"object"!==typeof b.target?b.target:this.index(b.target);if(b<e)return this.scroll(b,c,d);if(b>=e&&b<=h)return a.isFunction(d)&&d.call(this,!1),this;for(var g=this.items(),e=this.clipping(),f=this.vertical?"bottom":this.rtl?"left":"right",h=0,i;;){i=g.eq(b);if(0===i.length)break;
h+=this.dimension(i);if(h>=e){g=parseFloat(i.css("margin-"+f))||0;h-g!==e&&b++;break}if(0>=b)break;b--}return this.scroll(b,c,d)}})(jQuery);
(function(a){a.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=a.proxy(function(){this._destroy();this.carousel().one("jcarousel:createend",a.proxy(this._create,this))},this);this.onReload=a.proxy(this._reload,this);this.onEvent=a.proxy(function(b){b.preventDefault();b=this.options("method");a.isFunction(b)?b.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",
this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload);this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent);this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent);this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var b=a.jCarousel.parseTarget(this.options("target")),c=this.carousel();b.relative?c=c.jcarousel(0<b.target?"hasNext":"hasPrev"):
(b="object"!==typeof b.target?c.jcarousel("items").eq(b.target):b.target,c=0<=c.jcarousel("target").index(b));this._active!==c&&(this._trigger(c?"active":"inactive"),this._active=c);return this}})})(jQuery);
(function(a){a.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(a){return'<a href="#'+a+'">'+a+"</a>"},event:"click",method:"scroll"},_carouselItems:null,_pages:{},_items:{},_currentPage:null,_init:function(){this.onDestroy=a.proxy(function(){this._destroy();this.carousel().one("jcarousel:createend",a.proxy(this._create,this))},this);this.onReload=a.proxy(this._reload,this);this.onScroll=a.proxy(this._update,this)},_create:function(){this.carousel().one("jcarousel:destroy",
this.onDestroy).on("jcarousel:reloadend",this.onReload).on("jcarousel:scrollend",this.onScroll);this._reload()},_destroy:function(){this._clear();this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend",this.onReload).off("jcarousel:scrollend",this.onScroll);this._carouselItems=null},_reload:function(){var b=this.options("perPage");this._pages={};this._items={};a.isFunction(b)&&(b=b.call(this));if(null==b)this._pages=this._calculatePages();else for(var b=parseInt(b,10)||0,
c=this._getCarouselItems(),d=1,e=0,h;;){h=c.eq(e++);if(0===h.length)break;this._pages[d]=this._pages[d]?this._pages[d].add(h):h;0===e%b&&d++}this._clear();var g=this,f=this.carousel().data("jcarousel"),i=this._element,j=this.options("item"),k=this._getCarouselItems().length;a.each(this._pages,function(b,c){var d=g._items[b]=a(j.call(g,b,c));d.on(g.options("event")+".jcarouselpagination",a.proxy(function(){var a=c.eq(0);if(f.circular){var d=f.index(f.target()),e=f.index(a);parseFloat(b)>parseFloat(g._currentPage)?
e<d&&(a="+="+(k-d+e)):e>d&&(a="-="+(d+(k-e)))}f[this.options("method")](a)},g));i.append(d)});this._update()},_update:function(){var b=this.carousel().jcarousel("target"),c;a.each(this._pages,function(a,e){e.each(function(){if(b.is(this))return c=a,!1});if(c)return!1});this._currentPage!==c&&(this._trigger("inactive",this._items[this._currentPage]),this._trigger("active",this._items[c]));this._currentPage=c},items:function(){return this._items},reloadCarouselItems:function(){this._carouselItems=null;
return this},_clear:function(){this._element.empty();this._currentPage=null},_calculatePages:function(){for(var a=this.carousel().data("jcarousel"),c=this._getCarouselItems(),d=a.clipping(),e=0,h=0,g=1,f={},i,j;;){i=c.eq(h++);if(0===i.length)break;j=a.dimension(i);e+j>d&&(g++,e=0);e+=j;f[g]=f[g]?f[g].add(i):i}return f},_getCarouselItems:function(){this._carouselItems||(this._carouselItems=this.carousel().jcarousel("items"));return this._carouselItems}})})(jQuery);
(function(a,b){var c,d;a.each({hidden:"visibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",webkitHidden:"webkitvisibilitychange"},function(a,h){if("undefined"!==typeof b[a])return c=a,d=h,!1});a.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3E3,autostart:!0},_timer:null,_started:!1,_init:function(){this.onDestroy=a.proxy(function(){this._destroy();this.carousel().one("jcarousel:createend",a.proxy(this._create,this))},this);this.onAnimateEnd=a.proxy(this._start,
this);this.onVisibilityChange=a.proxy(function(){b[c]?this._stop():this._start()},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy);a(b).on(d,this.onVisibilityChange);this.options("autostart")&&this.start()},_destroy:function(){this._stop();this.carousel().off("jcarousel:destroy",this.onDestroy);a(b).off(d,this.onVisibilityChange)},_start:function(){this._stop();if(this._started)return this.carousel().one("jcarousel:animateend",this.onAnimateEnd),this._timer=setTimeout(a.proxy(function(){this.carousel().jcarousel("scroll",
this.options("target"))},this),this.options("interval")),this},_stop:function(){this._timer&&(this._timer=clearTimeout(this._timer));this.carousel().off("jcarousel:animateend",this.onAnimateEnd);return this},start:function(){this._started=!0;this._start();return this},stop:function(){this._started=!1;this._stop();return this}})})(jQuery,document);steal.executed("vendor/jcarousel/jquery.jcarousel.js");
steal("lib/external/pixel-admin/javascripts/bootstrap.min.js","lib/external/pixel-admin/stylesheets/bootstrap.css","lib/external/pixel-admin/stylesheets/pixel-admin.css","lib/external/pixel-admin/stylesheets/widgets.min.css","lib/external/pixel-admin/stylesheets/rtl.min.css","lib/external/pixel-admin/stylesheets/themes.min.css","lib/external/pixel-admin/stylesheets/font-awesome.css","lib/external/pixel-admin/stylesheets/pages.min.css");steal.executed("lib/external/pixel-admin/stealPixelAdmin.js");
+function(a){a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});return setTimeout(function(){c||a(d).trigger(a.support.transition.end)},b),this};a(function(){var b=a.support,c;a:{c=document.createElement("bootstrap");var d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},e;for(e in d)if(void 0!==c.style[e]){c={end:d[e]};break a}c=!1}b.transition=c})}(jQuery);
+function(a){var b=function(b){a(b).on("click",'[data-dismiss="alert"]',this.close)};b.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var h=a(this),g=h.attr("data-target");g||(g=h.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,""));var f=a(g);b&&b.preventDefault();f.length||(f=h.hasClass("alert")?h:h.parent());f.trigger(b=a.Event("close.bs.alert"));b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):
c())};var c=a.fn.alert;a.fn.alert=function(c){return this.each(function(){var e=a(this),h=e.data("bs.alert");h||e.data("bs.alert",h=new b(this));"string"==typeof c&&h[c].call(e)})};a.fn.alert.Constructor=b;a.fn.alert.noConflict=function(){return a.fn.alert=c,this};a(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',b.prototype.close)}(jQuery);
+function(a){var b=function(c,e){this.$element=a(c);this.options=a.extend({},b.DEFAULTS,e);this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."};b.prototype.setState=function(b){var c=this.$element,h=c.is("input")?"val":"html",g=c.data(),b=b+"Text";g.resetText||c.data("resetText",c[h]());c[h](g[b]||this.options[b]);setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,c.addClass("disabled").attr("disabled","disabled")):this.isLoading&&(this.isLoading=!1,c.removeClass("disabled").removeAttr("disabled"))},
this),0)};b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active"));a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var e=a(this),h=e.data("bs.button"),g="object"==
typeof c&&c;h||e.data("bs.button",h=new b(this,g));"toggle"==c?h.toggle():c&&h.setState(c)})};a.fn.button.Constructor=b;a.fn.button.noConflict=function(){return a.fn.button=c,this};a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn"));c.button("toggle");b.preventDefault()})}(jQuery);
+function(a){var b=function(b,c){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5E3,pause:"hover",wrap:!0};b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&
(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this};b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)};b.prototype.to=function(b){var c=this,h=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):h==b?this.pause().cycle():this.slide(b>h?"next":"prev",a(this.$items[b]))};
b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};b.prototype.next=function(){return this.sliding?void 0:this.slide("next")};b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")};b.prototype.slide=function(b,c){var h=this.$element.find(".item.active"),g=c||h[b](),f=this.interval,i="next"==b?"left":
"right",j="next"==b?"first":"last",k=this;if(!g.length){if(!this.options.wrap)return;g=this.$element.find(".item")[j]()}if(g.hasClass("active"))return this.sliding=!1;j=a.Event("slide.bs.carousel",{relatedTarget:g[0],direction:i});return this.$element.trigger(j),j.isDefaultPrevented()?void 0:(this.sliding=!0,f&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(k.$indicators.children()[k.getActiveIndex()]);
b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")?(g.addClass(b),h.addClass(i),g.addClass(i),h.one(a.support.transition.end,function(){g.removeClass([b,i].join(" ")).addClass("active");h.removeClass(["active",i].join(" "));k.sliding=!1;setTimeout(function(){k.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1E3*h.css("transition-duration").slice(0,-1))):(h.removeClass("active"),g.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),
f&&this.cycle(),this)};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var e=a(this),h=e.data("bs.carousel"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c),f="string"==typeof c?c:g.slide;h||e.data("bs.carousel",h=new b(this,g));"number"==typeof c?h.to(c):f?h[f]():g.interval&&h.pause().cycle()})};a.fn.carousel.Constructor=b;a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this};a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",
function(b){var c,h=a(this),g=a(h.attr("data-target")||(c=h.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""));c=a.extend({},g.data(),h.data());var f=h.attr("data-slide-to");f&&(c.interval=!1);g.carousel(c);(f=h.attr("data-slide-to"))&&g.data("bs.carousel").to(f);b.preventDefault()});a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery);
+function(a){var b=function(c,e){this.$element=a(c);this.options=a.extend({},b.DEFAULTS,e);this.transitioning=null;this.options.parent&&(this.$parent=a(this.options.parent));this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0};b.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){if((b=this.$parent&&
this.$parent.find("> .panel > .in"))&&b.length){var c=b.data("bs.collapse");if(c&&c.transitioning)return;b.collapse("hide");c||b.data("bs.collapse",null)}var h=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[h](0);this.transitioning=1;b=function(){this.$element.removeClass("collapsing").addClass("collapse in")[h]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return b.call(this);c=a.camelCase(["scroll",h].join("-"));
this.$element.one(a.support.transition.end,a.proxy(b,this)).emulateTransitionEnd(350)[h](this.$element[0][c])}}};b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){b=this.dimension();this.$element[b](this.$element[b]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var c=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};
return a.support.transition?void this.$element[b](0).one(a.support.transition.end,a.proxy(c,this)).emulateTransitionEnd(350):c.call(this)}}};b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var e=a(this),h=e.data("bs.collapse"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);!h&&g.toggle&&"show"==c&&(c=!c);h||e.data("bs.collapse",h=new b(this,g));"string"==typeof c&&h[c]()})};a.fn.collapse.Constructor=
b;a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this};a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,h=a(this),b=h.attr("data-target")||b.preventDefault()||(c=h.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");c=a(b);var g=(b=c.data("bs.collapse"))?"toggle":h.data(),f=h.attr("data-parent"),i=f&&a(f);b&&b.transitioning||(i&&i.find('[data-toggle=collapse][data-parent="'+f+'"]').not(h).addClass("collapsed"),h[c.hasClass("in")?"addClass":"removeClass"]("collapsed"));
c.collapse(g)})}(jQuery);
+function(a){function b(b){a(d).remove();a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));return(c=c&&a(c))&&c.length?c:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",h=function(b){a(b).on("click.bs.dropdown",this.toggle)};
h.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var g=c(e),h=g.hasClass("open");if(b(),!h){"ontouchstart"in document.documentElement&&!g.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);h={relatedTarget:this};if(g.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;g.toggleClass("open").trigger("shown.bs.dropdown",h);e.focus()}return!1}};h.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=
a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var g=c(d),h=g.hasClass("open");if(!h||h&&27==b.keyCode)return 27==b.which&&g.find(e).focus(),d.click();d=g.find("[role=menu] li:not(.divider):visible a, [role=listbox] li:not(.divider):visible a");d.length&&(g=d.index(d.filter(":focus")),38==b.keyCode&&0<g&&g--,40==b.keyCode&&g<d.length-1&&g++,~g||(g=0),d.eq(g).focus())}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");
d||c.data("bs.dropdown",d=new h(this));"string"==typeof b&&d[b].call(c)})};a.fn.dropdown.Constructor=h;a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this};a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,h.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",h.prototype.keydown)}(jQuery);
+function(a){var b=function(b,c){this.options=c;this.$element=a(b);this.$backdrop=this.isShown=null;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)};b.prototype.show=function(b){var c=this,h=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(h);this.isShown||h.isDefaultPrevented()||
(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var g=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body);c.$element.show().scrollTop(0);g&&c.$element[0].offsetWidth;c.$element.addClass("in").attr("aria-hidden",!1);c.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});g?c.$element.find(".modal-dialog").one(a.support.transition.end,
function(){c.$element.focus().trigger(f)}).emulateTransitionEnd(300):c.$element.focus().trigger(f)}))};b.prototype.hide=function(b){b&&b.preventDefault();b=a.Event("hide.bs.modal");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,
this)).emulateTransitionEnd(300):this.hideModal())};b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))};b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")};b.prototype.hideModal=
function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var h=a.support.transition&&c;if(!(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",
a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),this.$backdrop.addClass("in"),!b))h?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=
function(c,e){return this.each(function(){var h=a(this),g=h.data("bs.modal"),f=a.extend({},b.DEFAULTS,h.data(),"object"==typeof c&&c);g||h.data("bs.modal",g=new b(this,f));"string"==typeof c?g[c](e):f.show&&g.show(e)})};a.fn.modal.Constructor=b;a.fn.modal.noConflict=function(){return a.fn.modal=c,this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),h=c.attr("href"),g=a(c.attr("data-target")||h&&h.replace(/.*(?=#[^\s]+$)/,"")),h=g.data("bs.modal")?"toggle":
a.extend({remote:!/#/.test(h)&&h},g.data(),c.data());c.is("a")&&b.preventDefault();g.modal(h,this).one("hide",function(){c.is(":visible")&&c.focus()})});a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery);
+function(a){var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};b.prototype.init=function(b,c,h){this.enabled=!0;this.type=b;this.$element=a(c);this.options=this.getOptions(h);b=this.options.trigger.split(" ");
for(c=b.length;c--;)if(h=b[c],"click"==h)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=h){var g="hover"==h?"mouseleave":"focusout";this.$element.on(("hover"==h?"mouseenter":"focusin")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(g+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};b.prototype.getDefaults=
function(){return b.DEFAULTS};b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b};b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,g){c[a]!=g&&(b[a]=g)}),b};b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()};b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):
c.hide()};b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&!(this.$element.trigger(b),b.isDefaultPrevented())){var c=this,b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,g=/\s?auto?\s?/i,f=g.test(h);f&&(h=h.replace(g,"")||"top");b.detach().css({top:0,left:0,display:"block"}).addClass(h);this.options.container?
b.appendTo(this.options.container):b.insertAfter(this.$element);var g=this.getPosition(),i=b[0].offsetWidth,j=b[0].offsetHeight;if(f){var k=this.$element.parent(),f=h,l=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),k="body"==this.options.container?0:k.offset().left,h="bottom"==h&&g.top+g.height+j-l>o?"top":"top"==h&&0>g.top-l-j?"bottom":"right"==h&&g.right+
i>n?"left":"left"==h&&g.left-i<k?"right":h;b.removeClass(f).addClass(h)}this.applyPlacement(this.getCalculatedOffset(h,g,i,j),h);this.hoverState=null;h=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?b.one(a.support.transition.end,h).emulateTransitionEnd(150):h()}};b.prototype.applyPlacement=function(b,c){var h,g=this.tip(),f=g[0].offsetWidth,i=g[0].offsetHeight,j=parseInt(g.css("margin-top"),10),k=parseInt(g.css("margin-left"),10);isNaN(j)&&(j=
0);isNaN(k)&&(k=0);b.top+=j;b.left+=k;a.offset.setOffset(g[0],a.extend({using:function(a){g.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0);g.addClass("in");j=g[0].offsetWidth;k=g[0].offsetHeight;("top"==c&&k!=i&&(h=!0,b.top=b.top+i-k),/bottom|top/.test(c))?(i=0,0>b.left&&(i=-2*b.left,b.left=0,g.offset(b),j=g[0].offsetWidth,k=g[0].offsetHeight),this.replaceArrow(i-f+j,j,"left")):this.replaceArrow(k-i,k,"top");h&&g.offset(b)};b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,
a?50*(1-a/b)+"%":"")};b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};b.prototype.hide=function(){function b(){"in"!=c.hoverState&&h.detach();c.$element.trigger("hidden.bs."+c.type)}var c=this,h=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(h.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?h.one(a.support.transition.end,
b).emulateTransitionEnd(150):b(),this.hoverState=null,this)};b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};b.prototype.hasContent=function(){return this.getTitle()};b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())};
b.prototype.getCalculatedOffset=function(a,b,c,g){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-g,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-g/2,left:b.left-c}:{top:b.top+b.height/2-g/2,left:b.left+b.width}};b.prototype.getTitle=function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)};b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)};
b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};b.prototype.enable=function(){this.enabled=!0};b.prototype.disable=function(){this.enabled=!1};b.prototype.toggleEnabled=function(){this.enabled=!this.enabled};b.prototype.toggle=function(b){b=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;b.tip().hasClass("in")?
b.leave(b):b.enter(b)};b.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var e=a(this),h=e.data("bs.tooltip"),g="object"==typeof c&&c;(h||"destroy"!=c)&&(h||e.data("bs.tooltip",h=new b(this,g)),"string"==typeof c&&h[c]())})};a.fn.tooltip.Constructor=b;a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery);
+function(a){var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);b.prototype.constructor=b;b.prototype.getDefaults=function(){return b.DEFAULTS};b.prototype.setContent=
function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};b.prototype.hasContent=function(){return this.getTitle()||this.getContent()};b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||
("function"==typeof b.content?b.content.call(a[0]):b.content)};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var e=a(this),h=e.data("bs.popover"),g="object"==typeof c&&c;(h||"destroy"!=c)&&(h||e.data("bs.popover",h=new b(this,g)),"string"==typeof c&&h[c]())})};a.fn.popover.Constructor=b;a.fn.popover.noConflict=
function(){return a.fn.popover=c,this}}(jQuery);
+function(a){function b(c,e){var h,g=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c);this.$body=a("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",g);this.options=a.extend({},b.DEFAULTS,e);this.selector=(this.options.target||(h=a(c).attr("href"))&&h.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.offsets=a([]);this.targets=a([]);this.activeTarget=null;this.refresh();this.process()}b.DEFAULTS={offset:10};b.prototype.refresh=function(){var b=this.$element[0]==
window?"offset":"position";this.offsets=a([]);this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var h=a(this),h=h.data("target")||h.attr("href"),g=/^#./.test(h)&&a(h);return g&&g.length&&g.is(":visible")&&[[g[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),h]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]);c.targets.push(this[1])})};b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+
this.options.offset,c=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),g=this.offsets,f=this.targets,i=this.activeTarget;if(b>=c)return i!=(a=f.last()[0])&&this.activate(a);if(i&&b<=g[0])return i!=(a=f[0])&&this.activate(a);for(a=g.length;a--;)i!=f[a]&&b>=g[a]&&(!g[a+1]||b<=g[a+1])&&this.activate(f[a])};b.prototype.activate=function(b){this.activeTarget=b;a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");b=a(this.selector+
'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]').parents("li").addClass("active");b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active"));b.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var e=a(this),h=e.data("bs.scrollspy"),g="object"==typeof c&&c;h||e.data("bs.scrollspy",h=new b(this,g));"string"==typeof c&&h[c]()})};a.fn.scrollspy.Constructor=b;a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=
c,this};a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery);
+function(a){var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),h=b.data("target");if(h||(h=b.attr("href"),h=h&&h.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var g=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:g});if(b.trigger(f),!f.isDefaultPrevented())h=a(h),this.activate(b.parent("li"),c),this.activate(h,h.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:g})})}};b.prototype.activate=
function(b,c,h){function g(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");i?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");h&&h()}var f=c.find("> .active"),i=h&&a.support.transition&&f.hasClass("fade");i?f.one(a.support.transition.end,g).emulateTransitionEnd(150):g();f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var e=a(this),
h=e.data("bs.tab");h||e.data("bs.tab",h=new b(this));"string"==typeof c&&h[c]()})};a.fn.tab.Constructor=b;a.fn.tab.noConflict=function(){return a.fn.tab=c,this};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();a(this).tab("show")})}(jQuery);
+function(a){var b=function(c,e){this.options=a.extend({},b.DEFAULTS,e);this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(c);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()};b.RESET="affix affix-top affix-bottom";b.DEFAULTS={offset:0};b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");
var a=this.$window.scrollTop();return this.pinnedOffset=this.$element.offset().top-a};b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),e=this.$window.scrollTop(),h=this.$element.offset(),g=this.options.offset,f=g.top,i=g.bottom;"top"==this.affixed&&(h.top+=e);"object"!=typeof g&&(i=f=g);"function"==typeof f&&(f=g.top(this.$element));"function"==typeof i&&
(i=g.bottom(this.$element));e=null!=this.unpin&&e+this.unpin<=h.top?!1:null!=i&&h.top+this.$element.height()>=c-i?"bottom":null!=f&&f>=e?"top":!1;this.affixed!==e&&(this.unpin&&this.$element.css("top",""),h="affix"+(e?"-"+e:""),g=a.Event(h+".bs.affix"),this.$element.trigger(g),g.isDefaultPrevented()||(this.affixed=e,this.unpin="bottom"==e?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(h).trigger(a.Event(h.replace("affix","affixed"))),"bottom"==e&&this.$element.offset({top:c-
i-this.$element.height()})))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var e=a(this),h=e.data("bs.affix"),g="object"==typeof c&&c;h||e.data("bs.affix",h=new b(this,g));"string"==typeof c&&h[c]()})};a.fn.affix.Constructor=b;a.fn.affix.noConflict=function(){return a.fn.affix=c,this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{};c.offsetBottom&&(c.offset.bottom=c.offsetBottom);c.offsetTop&&(c.offset.top=
c.offsetTop);b.affix(c)})})}(jQuery);steal.executed("lib/external/pixel-admin/javascripts/bootstrap.min.js");steal("vendor/blockui/jquery.blockUI.js");steal.executed("lib/external/stealBlockUI.js");
(function(){function a(a){function c(c,e){var g,u,w=c==window,y=e&&void 0!==e.message?e.message:void 0,e=a.extend({},a.blockUI.defaults,e||{});if(!e.ignoreIfBlocked||!a(c).data("blockUI.isBlocked")){e.overlayCSS=a.extend({},a.blockUI.defaults.overlayCSS,e.overlayCSS||{});g=a.extend({},a.blockUI.defaults.css,e.css||{});e.onOverlayClick&&(e.overlayCSS.cursor="pointer");u=a.extend({},a.blockUI.defaults.themedCSS,e.themedCSS||{});y=void 0===y?e.message:y;w&&t&&d(window,{fadeOut:0});if(y&&"string"!=typeof y&&
(y.parentNode||y.jquery)){var v=y.jquery?y[0]:y,z={};a(c).data("blockUI.history",z);z.el=v;z.parent=v.parentNode;z.display=v.style.display;z.position=v.style.position;z.parent&&z.parent.removeChild(v)}a(c).data("blockUI.onUnblock",e.onUnblock);var z=e.baseZ,E;E=l||e.forceIframe?a('<iframe class="blockUI" style="z-index:'+z++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+e.iframeSrc+'"></iframe>'):a('<div class="blockUI" style="display:none"></div>');
v=e.theme?a('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+z++ +';display:none"></div>'):a('<div class="blockUI blockOverlay" style="z-index:'+z++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');e.theme&&w?(z='<div class="blockUI '+e.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">',e.title&&(z+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+
(e.title||"&nbsp;")+"</div>"),z+='<div class="ui-widget-content ui-dialog-content"></div></div>'):e.theme?(z='<div class="blockUI '+e.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">',e.title&&(z+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(e.title||"&nbsp;")+"</div>"),z+='<div class="ui-widget-content ui-dialog-content"></div></div>'):z=w?'<div class="blockUI '+e.blockMsgClass+' blockPage" style="z-index:'+
(z+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+e.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>';z=a(z);y&&(e.theme?(z.css(u),z.addClass("ui-widget-content")):z.css(g));e.theme||v.css(e.overlayCSS);v.css("position",w?"fixed":"absolute");(l||e.forceIframe)&&E.css("opacity",0);g=[E,v,z];var H=w?a("body"):a(c);a.each(g,function(){this.appendTo(H)});e.theme&&e.draggable&&a.fn.draggable&&z.draggable({handle:".ui-dialog-titlebar",cancel:"li"});
u=o&&(!a.support.boxModel||0<a("object,embed",w?null:c).length);if(n||u){w&&e.allowBodyStretch&&a.support.boxModel&&a("html,body").css("height","100%");if((n||!a.support.boxModel)&&!w){u=j(c,"borderTopWidth");var C=j(c,"borderLeftWidth"),N=u?"(0 - "+u+")":0,T=C?"(0 - "+C+")":0}a.each(g,function(a,b){var c=b[0].style;c.position="absolute";if(2>a)w?c.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+e.quirksmodeOffsetHack+') + "px"'):
c.setExpression("height",'this.parentNode.offsetHeight + "px"'),w?c.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):c.setExpression("width",'this.parentNode.offsetWidth + "px"'),T&&c.setExpression("left",T),N&&c.setExpression("top",N);else if(e.centerY)w&&c.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),
c.marginTop=0;else if(!e.centerY&&w){var d="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(e.css&&e.css.top?parseInt(e.css.top,10):0)+') + "px"';c.setExpression("top",d)}})}y&&(e.theme?z.find(".ui-widget-content").append(y):z.append(y),(y.jquery||y.nodeType)&&a(y).show());(l||e.forceIframe)&&e.showOverlay&&E.show();e.fadeIn?(g=e.onBlock?e.onBlock:k,E=e.showOverlay&&!y?g:k,g=y?g:k,e.showOverlay&&v._fadeIn(e.fadeIn,E),y&&z._fadeIn(e.fadeIn,
g)):(e.showOverlay&&v.show(),y&&z.show(),e.onBlock&&e.onBlock.bind(z)());h(1,c,e);w?(t=z[0],s=a(e.focusableElements,t),e.focusInput&&setTimeout(f,20)):i(z[0],e.centerX,e.centerY);e.timeout&&(y=setTimeout(function(){w?a.unblockUI(e):a(c).unblock(e)},e.timeout),a(c).data("blockUI.timeout",y))}}function d(c,d){var f,g=c==window,i=a(c),j=i.data("blockUI.history"),k=i.data("blockUI.timeout");k&&(clearTimeout(k),i.removeData("blockUI.timeout"));d=a.extend({},a.blockUI.defaults,d||{});h(0,c,d);null===d.onUnblock&&
(d.onUnblock=i.data("blockUI.onUnblock"),i.removeData("blockUI.onUnblock"));var l;l=g?a("body").children().filter(".blockUI").add("body > .blockUI"):i.find(">.blockUI");if(d.cursorReset&&(1<l.length&&(l[1].style.cursor=d.cursorReset),2<l.length))l[2].style.cursor=d.cursorReset;g&&(t=s=null);d.fadeOut?(f=l.length,l.stop().fadeOut(d.fadeOut,function(){0===--f&&e(l,j,d,c)})):e(l,j,d,c)}function e(c,d,e,f){var g=a(f);if(!g.data("blockUI.isBlocked")){c.each(function(){this.parentNode&&this.parentNode.removeChild(this)});
d&&d.el&&(d.el.style.display=d.display,d.el.style.position=d.position,d.el.style.cursor="default",d.parent&&d.parent.appendChild(d.el),g.removeData("blockUI.history"));g.data("blockUI.static")&&g.css("position","static");if("function"==typeof e.onUnblock)e.onUnblock(f,e);c=a(document.body);d=c.width();e=c[0].style.width;c.width(d-1).width(d);c[0].style.width=e}}function h(c,d,e){var f=d==window,d=a(d);if(c||!(f&&!t||!f&&!d.data("blockUI.isBlocked")))d.data("blockUI.isBlocked",c),f&&e.bindEvents&&
(!c||e.showOverlay)&&(c?a(document).bind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",e,g):a(document).unbind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",g))}function g(c){if("keydown"===c.type&&c.keyCode&&9==c.keyCode&&t&&c.data.constrainTabKey){var d=s,e=c.shiftKey&&c.target===d[0];if(!c.shiftKey&&c.target===d[d.length-1]||e)return setTimeout(function(){f(e)},10),!1}var d=c.data,g=a(c.target);if(g.hasClass("blockOverlay")&&d.onOverlayClick)d.onOverlayClick(c);
return 0<g.parents("div."+d.blockMsgClass).length?!0:0===g.parents().children().filter("div.blockUI").length}function f(a){s&&(a=s[!0===a?s.length-1:0])&&a.focus()}function i(a,b,c){var d=a.parentNode,e=a.style,f=(d.offsetWidth-a.offsetWidth)/2-j(d,"borderLeftWidth"),a=(d.offsetHeight-a.offsetHeight)/2-j(d,"borderTopWidth");b&&(e.left=0<f?f+"px":"0");c&&(e.top=0<a?a+"px":"0")}function j(c,d){return parseInt(a.css(c,d),10)||0}a.fn._fadeIn=a.fn.fadeIn;var k=a.noop||function(){},l=/MSIE/.test(navigator.userAgent),
n=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),o=a.isFunction(document.createElement("div").style.setExpression);a.blockUI=function(a){c(window,a)};a.unblockUI=function(a){d(window,a)};a.growlUI=function(c,d,e,f){var g=a('<div class="growlUI"></div>');c&&g.append("<h1>"+c+"</h1>");d&&g.append("<h2>"+d+"</h2>");void 0===e&&(e=3E3);var h=function(c){c=c||{};a.blockUI({message:g,fadeIn:"undefined"!==typeof c.fadeIn?c.fadeIn:700,fadeOut:"undefined"!==typeof c.fadeOut?c.fadeOut:
1E3,timeout:"undefined"!==typeof c.timeout?c.timeout:e,centerY:!1,showOverlay:!1,onUnblock:f,css:a.blockUI.defaults.growlCSS})};h();g.css("opacity");g.mouseover(function(){h({fadeIn:0,timeout:3E4});var c=a(".blockMsg");c.stop();c.fadeTo(300,1)}).mouseout(function(){a(".blockMsg").fadeOut(1E3)})};a.fn.block=function(d){if(this[0]===window)return a.blockUI(d),this;var e=a.extend({},a.blockUI.defaults,d||{});this.each(function(){var c=a(this);(!e.ignoreIfBlocked||!c.data("blockUI.isBlocked"))&&c.unblock({fadeOut:0})});
return this.each(function(){"static"==a.css(this,"position")&&(this.style.position="relative",a(this).data("blockUI.static",!0));this.style.zoom=1;c(this,d)})};a.fn.unblock=function(c){return this[0]===window?(a.unblockUI(c),this):this.each(function(){d(this,c)})};a.blockUI.version=2.7;a.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",
cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1E3,centerX:!0,centerY:!0,
allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var t=null,s=[]}"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(jQuery)})();steal.executed("vendor/blockui/jquery.blockUI.js");steal("vendor/jstree/jquery.jstree.js","vendor/jstree/themes/apple/style.css");
steal.executed("lib/external/stealjsTree.js");steal.executed("vendor/jstree/jquery.jstree.js");steal("vendor/qtip2/jquery.qtip.min.js","vendor/qtip2/jquery.qtip.min.css");steal.executed("lib/external/stealQtip.js");
(function(a,b,c){(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)})(function(d){function e(a,b,c,e){this.id=c;this.target=a;this.tooltip=W;this.elements={target:a};this._id=O+"-"+c;this.timers={img:{}};this.options=b;this.plugins={};this.cache={event:{},target:d(),disabled:B,attr:e,onTooltip:B,lastClass:""};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=B}function h(a){return a===
W||"object"!==d.type(a)}function g(a){return!(d.isFunction(a)||a&&a.attr||a.length||"object"===d.type(a)&&(a.jquery||a.then))}function f(a){var b,c,e,f;return h(a)?B:(h(a.metadata)&&(a.metadata={type:a.metadata}),"content"in a&&(b=a.content,h(b)||b.jquery||b.done?b=a.content={text:c=g(b)?B:b}:c=b.text,"ajax"in b&&(e=b.ajax,f=e&&e.once!==B,delete b.ajax,b.text=function(a,b){var g=c||d(this).attr(b.options.content.attr)||"Loading...",h=d.ajax(d.extend({},e,{context:b})).then(e.success,W,e.error).then(function(a){return a&&
f&&b.set("content.text",a),a},function(a,c,d){b.destroyed||0===a.status||b.set("content.text",c+": "+d)});return f?g:(b.set("content.text",g),h)}),"title"in b&&(h(b.title)||(b.button=b.title.button,b.title=b.title.text),g(b.title||B)&&(b.title=B))),"position"in a&&h(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&h(a.show)&&(a.show=a.show.jquery?{target:a.show}:a.show===G?{ready:G}:{event:a.show}),"hide"in a&&h(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in
a&&h(a.style)&&(a.style={classes:a.style}),d.each(I,function(){this.sanitize&&this.sanitize(a)}),a)}function i(a,b){for(var c,d=0,e=a,f=b.split(".");e=e[f[d++]];)f.length>d&&(c=e);return[c||a,f.pop()]}function j(a,b){var c,d,e;for(c in this.checks)for(d in this.checks[c])(e=RegExp(d,"i").exec(a))&&(b.push(e),("builtin"===c||this.plugins[c])&&this.checks[c][d].apply(this.plugins[c]||this,b))}function k(a){return la.concat("").join(a?"-"+a+" ":" ")}function l(c){return c&&{type:c.type,pageX:c.pageX,
pageY:c.pageY,target:c.target,relatedTarget:c.relatedTarget,scrollX:c.scrollX||a.pageXOffset||b.body.scrollLeft||b.documentElement.scrollLeft,scrollY:c.scrollY||a.pageYOffset||b.body.scrollTop||b.documentElement.scrollTop}||{}}function n(a,b){return 0<b?setTimeout(d.proxy(a,this),b):(a.call(this),c)}function o(a){return this.tooltip.hasClass(na)?B:(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=n.call(this,function(){this.toggle(G,a)},this.options.show.delay),c)}function t(a){if(this.tooltip.hasClass(na))return B;
var b=d(a.relatedTarget),c=b.closest(sa)[0]===this.tooltip[0],e=b[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==b[0]&&"mouse"===this.options.position.target&&c||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(c||e))try{a.preventDefault(),a.stopImmediatePropagation()}catch(f){}else this.timers.hide=n.call(this,function(){this.toggle(B,a)},this.options.hide.delay,this)}function s(a){return this.tooltip.hasClass(na)||!this.options.hide.inactive?
B:(clearTimeout(this.timers.inactive),this.timers.inactive=n.call(this,function(){this.hide(a)},this.options.hide.inactive),c)}function q(a){this.rendered&&0<this.tooltip[0].offsetWidth&&this.reposition(a)}function m(a,c,e){d(b.body).delegate(a,(c.split?c:c.join(Oa+" "))+Oa,function(){var a=H.api[d.attr(this,M)];a&&!a.disabled&&e.apply(a,arguments)})}function r(a,c,g){var h,i,j,k,l=d(b.body),n=a[0]===b?l:a,m=a.metadata?a.metadata(g.metadata):W,o="html5"===g.metadata.type&&m?m[g.metadata.name]:W,p=
a.data(g.metadata.name||"qtipopts");try{p="string"==typeof p?d.parseJSON(p):p}catch(q){}if(j=d.extend(G,{},H.defaults,g,"object"==typeof p?f(p):W,f(o||m)),g=j.position,j.id=c,"boolean"==typeof j.content.text){if(i=a.attr(j.content.attr),j.content.attr===B||!i)return B;j.content.text=i}if(g.container.length||(g.container=l),g.target===B&&(g.target=n),j.show.target===B&&(j.show.target=n),j.show.solo===G&&(j.show.solo=g.container.closest("body")),j.hide.target===B&&(j.hide.target=n),j.position.viewport===
G&&(j.position.viewport=g.container),g.container=g.container.eq(0),g.at=new N(g.at,G),g.my=new N(g.my),a.data(O))if(j.overwrite)a.qtip("destroy",!0);else if(j.overwrite===B)return B;return a.attr(ia,c),j.suppress&&(k=a.attr("title"))&&a.removeAttr("title").attr(L,k).attr("title",""),h=new e(a,j,c,!!i),a.data(O,h),a.one("remove.qtip-"+c+" removeqtip.qtip-"+c,function(){var a;(a=d(this).data(O))&&a.destroy(!0)}),h}function u(a){return a.charAt(0).toUpperCase()+a.slice(1)}function w(a,b){var d,e;d=b.charAt(0).toUpperCase()+
b.slice(1);var f=(b+" "+R.join(d+" ")+d).split(" "),g=0;if(cb[b])return a.css(cb[b]);for(;d=f[g++];)if((e=a.css(d))!==c)return cb[b]=d,e}function y(a,b){return Math.ceil(parseFloat(w(a,b)))}function v(a,b){this._ns="tip";this.options=b;this.offset=b.offset;this.size=[b.width,b.height];this.init(this.qtip=a)}function z(a,b){this.options=b;this._ns="-modal";this.init(this.qtip=a)}function E(a){this._ns="ie6";this.init(this.qtip=a)}var H,C,N,T,K,G=!0,B=!1,W=null,J="x",Q="y",X="width",S="center",V="flipinvert",
D="shift",I={},O="qtip",ia="data-hasqtip",M="data-qtip-id",la=["ui-widget","ui-tooltip"],sa="."+O,P="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),ga=O+"-fixed",ea=O+"-default",aa=O+"-focus",Ja=O+"-hover",na=O+"-disabled",L="oldtitle",p=function(){for(var a=3,c=b.createElement("div");(c.innerHTML="<\!--[if gt IE "+ ++a+"]><i></i><![endif]--\>")&&c.getElementsByTagName("i")[0];);return 4<a?a:0/0}(),ua=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||
[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||B;C=e.prototype;C._when=function(a){return d.when.apply(d,a)};C.render=function(a){if(this.rendered||this.destroyed)return this;var b=this,c=this.options,e=this.cache,f=this.elements,g=c.content.text,h=c.content.title,i=c.content.button,j=c.position,k=("."+this._id+" ",[]);return d.attr(this.target[0],"aria-describedby",this._id),this.tooltip=f.tooltip=d("<div/>",{id:this._id,"class":[O,ea,c.style.classes,O+"-pos-"+c.position.my.abbrev()].join(" "),
width:c.style.width||"",height:c.style.height||"",tracking:"mouse"===j.target&&j.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":B,"aria-describedby":this._id+"-content","aria-hidden":G}).toggleClass(na,this.disabled).attr(M,this.id).data(O,this).appendTo(j.container).append(f.content=d("<div />",{"class":O+"-content",id:this._id+"-content","aria-atomic":G})),this.rendered=-1,this.positioning=G,h&&(this._createTitle(),d.isFunction(h)||k.push(this._updateTitle(h,B))),i&&this._createButton(),
d.isFunction(g)||k.push(this._updateContent(g,B)),this.rendered=G,this._setWidget(),d.each(I,function(a){var c;"render"===this.initialize&&(c=this(b))&&(b.plugins[a]=c)}),this._unassignEvents(),this._assignEvents(),this._when(k).then(function(){b._trigger("render");b.positioning=B;b.hiddenDuringWait||!c.show.ready&&!a||b.toggle(G,e.event,B);b.hiddenDuringWait=B}),H.api[this.id]=this,this};C.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=G;var a=this.target,c=a.attr(L);this.rendered&&
this.tooltip.stop(1,0).find("*").remove().end().remove();d.each(this.plugins,function(){this.destroy&&this.destroy()});clearTimeout(this.timers.show);clearTimeout(this.timers.hide);this._unassignEvents();a.removeData(O).removeAttr(M).removeAttr(ia).removeAttr("aria-describedby");this.options.suppress&&c&&a.attr("title",c).removeAttr(L);this._unbind(a);this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=W;delete H.api[this.id]}}return this.destroyed?this.target:(a===G&&"hide"!==
this.triggering||!this.rendered?b.call(this):(this.tooltip.one("tooltiphidden",d.proxy(b,this)),!this.triggering&&this.hide()),this.target)};T=C.checks={builtin:{"^id$":function(a,b,c,e){var c=c===G?H.nextid:c,f=O+"-"+c;c!==B&&0<c.length&&!d("#"+f).length?(this._id=f,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=e},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,
b,c){this._updateContent(c)},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c))},"^content.title$":function(a,b,d){return d?(d&&!this.elements.title&&this._createTitle(),this._updateTitle(d),c):this._removeTitle()},"^content.button$":function(a,b,c){this._updateButton(c)},"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(a[b]=new N(c,"at"===b))},
"^position.container$":function(a,b,c){this.rendered&&this.tooltip.appendTo(c)},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(G)||this.toggle(G))},"^style.classes$":function(a,b,c,d){this.rendered&&this.tooltip.removeClass(d).addClass(c)},"^style.(width|height)":function(a,b,c){this.rendered&&this.tooltip.css(b,c)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(a,b,c){this.rendered&&this.tooltip.toggleClass(ea,!!c)},"^events.(render|show|move|hide|focus|blur)$":function(a,
b,c){this.rendered&&this.tooltip[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var a=this.options.position;this.tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse);this._unassignEvents();this._assignEvents()}}}};C.get=function(a){if(this.destroyed)return this;a=i(this.options,a.toLowerCase());a=a[0][a[1]];return a.precedance?a.string():a};var bb=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,
wb=/^prerender|show\.ready/i;C.set=function(a,b){if(this.destroyed)return this;var e,g=this.rendered,h=B,k=this.options;return this.checks,"string"==typeof a?(e=a,a={},a[e]=b):a=d.extend({},a),d.each(a,function(b,e){if(g&&wb.test(b))return delete a[b],c;var f,j=i(k,b.toLowerCase());f=j[0][j[1]];j[0][j[1]]=e&&e.nodeType?d(e):e;h=bb.test(b)||h;a[b]=[j[0],j[1],e,f]}),f(k),this.positioning=G,d.each(a,d.proxy(j,this)),this.positioning=B,this.rendered&&0<this.tooltip[0].offsetWidth&&h&&this.reposition("mouse"===
k.position.target?W:this.cache.event),this};C._update=function(a,b){var c=this,e=this.cache;return this.rendered&&a?(d.isFunction(a)&&(a=a.call(this.elements.target,e.event,this)||""),d.isFunction(a.then)?(e.waiting=G,a.then(function(a){return e.waiting=B,c._update(a,b)},W,function(a){return c._update(a,b)})):a===B||!a&&""!==a?B:(a.jquery&&0<a.length?b.empty().append(a.css({display:"block",visibility:"visible"})):b.html(a),this._waitForContent(b).then(function(a){a.images&&a.images.length&&c.rendered&&
0<c.tooltip[0].offsetWidth&&c.reposition(e.event,!a.length)}))):B};C._waitForContent=function(a){var b=this.cache;return b.waiting=G,(d.fn.imagesLoaded?a.imagesLoaded():d.Deferred().resolve([])).done(function(){b.waiting=B}).promise()};C._updateContent=function(a,b){this._update(a,this.elements.content,b)};C._updateTitle=function(a,b){this._update(a,this.elements.title,b)===B&&this._removeTitle(B)};C._createTitle=function(){var a=this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle();a.titlebar=
d("<div />",{"class":O+"-titlebar "+(this.options.style.widget?k("header"):"")}).append(a.title=d("<div />",{id:b,"class":O+"-title","aria-atomic":G})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type)});this.options.content.button&&this._createButton()};
C._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=W,a!==B&&this.reposition())};C.reposition=function(c,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=G;var f,g,h=this.cache,i=this.tooltip,j=this.options.position,k=j.target,l=j.my,n=j.at,m=j.viewport,o=j.container,q=j.adjust,s=q.method.split(" "),t=i.outerWidth(B),r=i.outerHeight(B),u=0,v=0,w=i.css("position"),y={left:0,top:0},z=0<i[0].offsetWidth,C=c&&"scroll"===
c.type,E=d(a),H=o[0].ownerDocument,D=this.mouse;if(d.isArray(k)&&2===k.length)n={x:"left",y:"top"},y={left:k[0],top:k[1]};else if("mouse"===k)n={x:"left",y:"top"},!D||!D.pageX||!q.mouse&&c&&c.pageX?c&&c.pageX||((!q.mouse||this.options.show.distance)&&h.origin&&h.origin.pageX?c=h.origin:(!c||c&&("resize"===c.type||"scroll"===c.type))&&(c=h.event)):c=D,"static"!==w&&(y=o.offset()),H.body.offsetWidth!==(a.innerWidth||H.documentElement.clientWidth)&&(g=d(b.body).offset()),y={left:c.pageX-y.left+(g&&g.left||
0),top:c.pageY-y.top+(g&&g.top||0)},q.mouse&&C&&D&&(y.left-=(D.scrollX||0)-E.scrollLeft(),y.top-=(D.scrollY||0)-E.scrollTop());else{if("event"===k?c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?h.target=d(c.target):c.target||(h.target=this.elements.target):"event"!==k&&(h.target=d(k.jquery?k:this.elements.target)),k=h.target,k=d(k).eq(0),0===k.length)return this;k[0]===b||k[0]===a?(u=ua?a.innerWidth:k.width(),v=ua?a.innerHeight:k.height(),k[0]===a&&(y={top:(m||k).scrollTop(),left:(m||k).scrollLeft()})):
I.imagemap&&k.is("area")?f=I.imagemap(this,k,n,I.viewport?s:B):I.svg&&k&&k[0].ownerSVGElement?f=I.svg(this,k,n,I.viewport?s:B):(u=k.outerWidth(B),v=k.outerHeight(B),y=k.offset());f&&(u=f.width,v=f.height,g=f.offset,y=f.position);y=this.reposition.offset(k,y,o);(3.1<ua&&4.1>ua||4.3<=ua&&4.33>ua||!ua&&"fixed"===w)&&(y.left-=E.scrollLeft(),y.top-=E.scrollTop());(!f||f&&f.adjustable!==B)&&(y.left+="right"===n.x?u:n.x===S?u/2:0,y.top+="bottom"===n.y?v:n.y===S?v/2:0)}return y.left+=q.x+("right"===l.x?-t:
l.x===S?-t/2:0),y.top+=q.y+("bottom"===l.y?-r:l.y===S?-r/2:0),I.viewport?(y.adjusted=I.viewport(this,y,j,u,v,t,r),g&&y.adjusted.left&&(y.left+=g.left),g&&y.adjusted.top&&(y.top+=g.top)):y.adjusted={left:0,top:0},this._trigger("move",[y,m.elem||m],c)?(delete y.adjusted,e===B||!z||isNaN(y.left)||isNaN(y.top)||"mouse"===k||!d.isFunction(j.effect)?i.css(y):d.isFunction(j.effect)&&(j.effect.call(i,this,d.extend({},y)),i.queue(function(a){d(this).css({opacity:"",height:""});p&&this.style.removeAttribute("filter");
a()})),this.positioning=B,this):this};C.reposition.offset=function(a,c,e){if(!e[0])return c;var f,g,h,a=d(a[0].ownerDocument),i=!!p&&"CSS1Compat"!==b.compatMode,e=e[0];do if("static"!==(g=d.css(e,"position"))){if("fixed"===g){g=e.getBoundingClientRect();var j=a;c.left+=-1*j.scrollLeft();c.top+=-1*j.scrollTop()}else g=d(e).position(),g.left+=parseFloat(d.css(e,"borderLeftWidth"))||0,g.top+=parseFloat(d.css(e,"borderTopWidth"))||0;c.left-=g.left+(parseFloat(d.css(e,"marginLeft"))||0);c.top-=g.top+(parseFloat(d.css(e,
"marginTop"))||0);f||"hidden"===(h=d.css(e,"overflow"))||"visible"===h||(f=d(e))}while(e=e.offsetParent);if(f&&(f[0]!==a[0]||i))c.left+=1*f.scrollLeft(),c.top+=1*f.scrollTop();return c};var Xa=(N=C.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,S).toLowerCase();this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase();this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===
c||"b"===c?Q:J}).prototype;Xa.invert=function(a,b){this[a]="left"===this[a]?"right":"right"===this[a]?"left":b||this[a]};Xa.string=function(){var a=this.x,b=this.y;return a===b?a:this.precedance===Q||this.forceY&&"center"!==b?b+" "+a:a+" "+b};Xa.abbrev=function(){var a=this.string().split(" ");return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")};Xa.clone=function(){return new N(this.string(),this.forceY)};C.toggle=function(a,c,e){var f=this.cache,g=this.options,h=this.tooltip;if(c){if(/over|enter/.test(c.type)&&
/out|leave/.test(f.event.type)&&g.show.target.add(c.target).length===g.show.target.length&&h.has(c.relatedTarget).length)return this;f.event=l(c)}if(this.waiting&&!a&&(this.hiddenDuringWait=G),!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;var i,j,k,g=a?"show":"hide",n=this.options[g],m=(this.options[a?"hide":"show"],this.options.position),o=this.options.content,q=this.tooltip.css("width"),s=this.tooltip.is(":visible"),t=a||1===n.target.length,r=!c||2>n.target.length||
f.target[0]===c.target;return(typeof a).search("boolean|number")&&(a=!s),i=!h.is(":animated")&&s===a&&r,j=i?W:!!this._trigger(g,[90]),this.destroyed?this:(j!==B&&a&&this.focus(c),!j||i?this:(d.attr(h[0],"aria-hidden",!a),a?(f.origin=l(this.mouse),d.isFunction(o.text)&&this._updateContent(o.text,B),d.isFunction(o.title)&&this._updateTitle(o.title,B),!K&&"mouse"===m.target&&m.adjust.mouse&&(d(b).bind("mousemove."+O,this._storeMouse),K=G),q||h.css("width",h.outerWidth(B)),this.reposition(c,e),q||h.css("width",
""),n.solo&&("string"==typeof n.solo?d(n.solo):d(sa,n.solo)).not(h).not(n.target).qtip("hide",d.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete f.origin,K&&!d(sa+'[tracking="true"]:visible',n.solo).not(h).length&&(d(b).unbind("mousemove."+O),K=B),this.blur(c)),k=d.proxy(function(){a?(p&&h[0].style.removeAttribute("filter"),h.css("overflow",""),"string"==typeof n.autofocus&&d(this.options.show.autofocus,h).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):h.css({display:"",
visibility:"",opacity:"",left:"",top:""});this._trigger(a?"visible":"hidden")},this),n.effect===B||t===B?(h[g](),k()):d.isFunction(n.effect)?(h.stop(1,1),n.effect.call(h,this),h.queue("fx",function(a){k();a()})):h.fadeTo(90,a?1:0,k),a&&n.target.trigger("qtip-"+this.id+"-inactive"),this))};C.show=function(a){return this.toggle(G,a)};C.hide=function(a){return this.toggle(B,a)};C.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=d(sa),c=this.tooltip,e=parseInt(c[0].style.zIndex,10),
f=H.zindex+b.length;return c.hasClass(aa)||this._trigger("focus",[f],a)&&(e!==f&&(b.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)}),b.filter("."+aa).qtip("blur",a)),c.addClass(aa)[0].style.zIndex=f),this};C.blur=function(a){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(aa),this._trigger("blur",[this.tooltip.css("zIndex")],a),this)};C.disable=function(a){return this.destroyed?this:("toggle"===a?a=!(this.rendered?this.tooltip.hasClass(na):this.disabled):"boolean"!=
typeof a&&(a=G),this.rendered&&this.tooltip.toggleClass(na,a).attr("aria-disabled",a),this.disabled=!!a,this)};C.enable=function(){return this.disable(B)};C._createButton=function(){var a=this,b=this.elements,c=b.tooltip,e=this.options.content.button,f="string"==typeof e?e:"Close tooltip";b.button&&b.button.remove();b.button=e.jquery?e:d("<a />",{"class":"qtip-close "+(this.options.style.widget?"":O+"-icon"),title:f,"aria-label":f}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"}));
b.button.appendTo(b.titlebar||c).attr("role","button").click(function(b){return c.hasClass(na)||a.hide(b),B})};C._updateButton=function(a){if(!this.rendered)return B;var b=this.elements.button;a?this._createButton():b.remove()};C._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass(na);c.removeClass(na);na=a?"ui-state-disabled":"qtip-disabled";c.toggleClass(na,d);c.toggleClass("ui-helper-reset "+k(),a).toggleClass(ea,this.options.style.def&&!a);b.content&&
b.content.toggleClass(k("content"),a);b.titlebar&&b.titlebar.toggleClass(k("header"),a);b.button&&b.button.toggleClass(O+"-icon",!a)};C._storeMouse=function(a){(this.mouse=l(a)).type="mousemove"};C._bind=function(a,b,c,e,f){e="."+this._id+(e?"-"+e:"");b.length&&d(a).bind((b.split?b:b.join(e+" "))+e,d.proxy(c,f||this))};C._unbind=function(a,b){d(a).unbind("."+this._id+(b?"-"+b:""))};var Oa="."+O;d(function(){m(sa,["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,c=d(a.currentTarget),
e=d(a.relatedTarget||a.target),f=this.options;b?(this.focus(a),c.hasClass(ga)&&!c.hasClass(na)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length&&this.hide(a);c.toggleClass(Ja,b)});m("["+M+"]",P,s)});C._trigger=function(a,b,c){var e=d.Event("tooltip"+a);return e.originalEvent=c&&d.extend({},c)||this.cache.event||W,this.triggering=a,this.tooltip.trigger(e,[this].concat(b||[])),this.triggering=B,!e.isDefaultPrevented()};C._bindEvents=
function(a,b,e,f,g,h){if(f.add(e).length===f.length){var i=[],b=d.map(b,function(b){var e=d.inArray(b,a);return-1<e?(i.push(a.splice(e,1)[0]),c):b});i.length&&this._bind(e,i,function(a){(this.rendered&&0<this.tooltip[0].offsetWidth?h:g).call(this,a)})}this._bind(e,a,g);this._bind(f,b,h)};C._assignInitialEvents=function(a){function b(a){return this.disabled||this.destroyed?B:(this.cache.event=l(a),this.cache.target=a?d(a.target):[c],clearTimeout(this.timers.show),this.timers.show=n.call(this,function(){this.render("object"==
typeof a||e.show.ready)},e.show.delay),c)}var e=this.options,f=e.show.target,g=e.hide.target,h=e.show.event?d.trim(""+e.show.event).split(" "):[],i=e.hide.event?d.trim(""+e.hide.event).split(" "):[];/mouse(over|enter)/i.test(e.show.event)&&!/mouse(out|leave)/i.test(e.hide.event)&&i.push("mouseleave");this._bind(f,"mousemove",function(a){this._storeMouse(a);this.cache.onTarget=G});this._bindEvents(h,i,f,g,b,function(){clearTimeout(this.timers.show)});(e.show.ready||e.prerender)&&b.call(this,a)};C._assignEvents=
function(){var c=this,e=this.options,f=e.position,g=this.tooltip,h=e.show.target,i=e.hide.target,j=f.container,k=f.viewport,l=d(b),n=(d(b.body),d(a)),m=e.show.event?d.trim(""+e.show.event).split(" "):[],p=e.hide.event?d.trim(""+e.hide.event).split(" "):[];d.each(e.events,function(a,b){c._bind(g,"toggle"===a?["tooltipshow","tooltiphide"]:["tooltip"+a],b,null,g)});/mouse(out|leave)/i.test(e.hide.event)&&"window"===e.hide.leave&&this._bind(l,["mouseout","blur"],function(a){/select|option/.test(a.target.nodeName)||
a.relatedTarget||this.hide(a)});e.hide.fixed?i=i.add(g.addClass(ga)):/mouse(over|enter)/i.test(e.show.event)&&this._bind(i,"mouseleave",function(){clearTimeout(this.timers.show)});-1<(""+e.hide.event).indexOf("unfocus")&&this._bind(j.closest("html"),["mousedown","touchstart"],function(a){var b=d(a.target),c=this.rendered&&!this.tooltip.hasClass(na)&&0<this.tooltip[0].offsetWidth,e=0<b.parents(sa).filter(this.tooltip[0]).length;b[0]===this.target[0]||b[0]===this.tooltip[0]||e||this.target.has(b[0]).length||
!c||this.hide(a)});"number"==typeof e.hide.inactive&&(this._bind(h,"qtip-"+this.id+"-inactive",s),this._bind(i.add(g),H.inactiveEvents,s,"-inactive"));this._bindEvents(m,p,h,i,o,t);this._bind(h.add(g),"mousemove",function(a){if("number"==typeof e.hide.distance){var b=this.cache.origin||{},c=this.options.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&this.hide(a)}this._storeMouse(a)});"mouse"===f.target&&f.adjust.mouse&&(e.hide.event&&this._bind(h,["mouseenter","mouseleave"],
function(a){this.cache.onTarget="mouseenter"===a.type}),this._bind(l,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(na)&&0<this.tooltip[0].offsetWidth&&this.reposition(a)}));(f.adjust.resize||k.length)&&this._bind(d.event.special.resize?k:n,"resize",q);f.adjust.scroll&&this._bind(n.add(f.container),"scroll",q)};C._unassignEvents=function(){var c=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],
this.options.position.viewport[0],this.options.position.container.closest("html")[0],a,b];this._unbind(d([]).pushStack(d.grep(c,function(a){return"object"==typeof a})))};H=d.fn.qtip=function(a,b,e){var g=(""+a).toLowerCase(),h=W,i=d.makeArray(arguments).slice(1),j=i[i.length-1],k=this[0]?d.data(this[0],O):W;return!arguments.length&&k||"api"===g?k:"string"==typeof a?(this.each(function(){var a=d.data(this,O);if(!a)return G;if(j&&j.timeStamp&&(a.cache.event=j),!b||"option"!==g&&"options"!==g)a[g]&&
a[g].apply(a,i);else{if(e===c&&!d.isPlainObject(b))return h=a.get(b),B;a.set(b,e)}}),h!==W?h:this):"object"!=typeof a&&arguments.length?c:(k=f(d.extend(G,{},a)),this.each(function(a){var b,e;return e=d.isArray(k.id)?k.id[a]:k.id,e=!e||e===B||1>e.length||H.api[e]?H.nextid++:e,b=r(d(this),e,k),b===B?G:(H.api[e]=b,d.each(I,function(){"initialize"===this.initialize&&this(b)}),b._assignInitialEvents(j),c)}))};d.qtip=e;H.api={};d.each({attr:function(a,b){if(this.length){var c=this[0],e=d.data(c,"qtip");
if("title"===a&&e&&"object"==typeof e&&e.options.suppress)return 2>arguments.length?d.attr(c,L):(e&&"title"===e.options.content.attr&&e.cache.attr&&e.set("content.text",b),this.attr(L,b))}return d.fn.attr_replacedByqTip.apply(this,arguments)},clone:function(a){var b=(d([]),d.fn.clone_replacedByqTip.apply(this,arguments));return a||b.filter("["+L+"]").attr("title",function(){return d.attr(this,L)}).removeAttr(L),b}},function(a,b){if(!b||d.fn[a+"_replacedByqTip"])return G;var c=d.fn[a+"_replacedByqTip"]=
d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments)}});d.ui||(d.cleanData_replacedByqTip=d.cleanData,d.cleanData=function(a){for(var b,c=0;(b=d(a[c])).length;c++)if(b.attr(ia))try{b.triggerHandler("removeqtip")}catch(e){}d.cleanData_replacedByqTip.apply(this,arguments)});H.version="2.2.0";H.nextid=0;H.inactiveEvents=P;H.zindex=15E3;H.defaults={prerender:B,id:B,overwrite:G,suppress:G,content:{text:G,attr:"title",title:B,button:B},position:{my:"top left",at:"bottom right",
target:B,container:B,viewport:B,adjust:{x:0,y:0,mouse:G,scroll:G,resize:G,method:"flipinvert flipinvert"},effect:function(a,b){d(this).animate(b,{duration:200,queue:B})}},show:{target:B,event:"mouseenter",effect:G,delay:90,solo:B,ready:B,autofocus:B},hide:{target:B,event:"mouseleave",effect:G,delay:0,fixed:B,inactive:B,leave:"window",distance:B},style:{classes:"",widget:B,width:B,height:B,def:G},events:{render:W,move:W,show:W,hide:W,toggle:W,visible:W,hidden:W,focus:W,blur:W}};var nb="margin",La=
!!b.createElement("canvas").getContext,Ia=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,cb={},R=["Webkit","O","Moz","ms"];if(La){C=a.devicePixelRatio||1;var Xa=function(){var a=b.createElement("canvas").getContext("2d");return a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||1}(),Sa=C/Xa}else var hb=function(a,b,c){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+
(c||"")+'" />'};d.extend(v.prototype,{init:function(a){var b,c;c=this.element=a.elements.tip=d("<div />",{"class":O+"-tip"}).prependTo(a.tooltip);La?(b=d("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=1E5,b.save()):(b=hb("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(b+b),a._bind(d("*",c).add(c),["click","mousedown"],function(a){a.stopPropagation()},this._ns));a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this);this.create()},
_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width;this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&("top"===a.y||a.y===S&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(G))},_parseCorner:function(a){var b=this.qtip.options.position.my;return a===B||b===B?a=B:a===G?a=new N(b.string()):a.string||(a=new N(a),a.fixed=G),
a},_parseWidth:function(a,b,c){var d=this.qtip.elements,b="border"+u(b)+"Width";return(c?y(c,b):y(d.content,b)||y(this._useTitle(a)&&d.titlebar||d.content,b)||y(d.tooltip,b))||0},_parseRadius:function(a){var b=this.qtip.elements,c="border"+u(a.y)+u(a.x)+"Radius";return 9>p?0:y(this._useTitle(a)&&b.titlebar||b.content,c)||y(b.tooltip,c)||0},_invalidColour:function(a,b,c){b=a.css(b);return!b||c&&b===a.css(c)||Ia.test(b)?B:b},_parseColours:function(a){var b=this.qtip.elements,c=this.element.css("cssText",
""),e="border"+u(a[a.precedance])+u("color"),a=this._useTitle(a)&&b.titlebar||b.content,f=this._invalidColour,g=[];return g[0]=f(c,"background-color")||f(a,"background-color")||f(b.content,"background-color")||f(b.tooltip,"background-color")||c.css("background-color"),g[1]=f(c,e,"color")||f(a,e,"color")||f(b.content,e,"color")||f(b.tooltip,e,"color")||b.tooltip.css(e),d("*",c).add(c).css("cssText","background-color:transparent !important;border:0 !important;"),g},_calculateSize:function(a){var b,
c,d,e=a.precedance===Q,f=this.options.width,g=this.options.height,a="c"===a.abbrev(),h=(e?f:g)*(a?0.5:1),i=Math.pow,j=Math.round,k=Math.sqrt(i(h,2)+i(g,2)),h=[this.border/h*k,this.border/g*k];return h[2]=Math.sqrt(i(h[0],2)-i(this.border,2)),h[3]=Math.sqrt(i(h[1],2)-i(this.border,2)),b=k+h[2]+h[3]+(a?0:h[0]),c=b/k,d=[j(c*f),j(c*g)],e?d:d.reverse()},_calculateTip:function(a,b,c){var c=c||1,b=b||this.size,d=b[0]*c,b=b[1]*c,c=Math.ceil(d/2),e=Math.ceil(b/2),d={br:[0,0,d,b,d,0],bl:[0,0,d,0,0,b],tr:[0,
b,d,0,d,b],tl:[0,0,0,b,d,b],tc:[0,b,c,0,d,b],bc:[0,0,d,0,c,b],rc:[0,0,d,e,0,b],lc:[d,0,d,b,0,e]};return d.lt=d.br,d.rt=d.bl,d.lb=d.tr,d.rb=d.tl,d[a.abbrev()]},_drawCoords:function(a,b){a.beginPath();a.moveTo(b[0],b[1]);a.lineTo(b[2],b[3]);a.lineTo(b[4],b[5]);a.closePath()},create:function(){var a=this.corner=(La||p)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=a.clone(),this.update()),this.element.toggle(this.enabled),
this.corner},update:function(b,c){if(!this.enabled)return this;var e,f,g,h,i,j,k,l,n=this.qtip.elements;j=this.element;var m=j.children(),o=this.options,q=this.size,s=o.mimic,t=Math.round;b||(b=this.qtip.cache.corner||this.corner);s===B?s=b:(s=new N(s),s.precedance=b.precedance,"inherit"===s.x?s.x=b.x:"inherit"===s.y?s.y=b.y:s.x===s.y&&(s[b.precedance]=b[b.precedance]));f=s.precedance;b.precedance===J?this._swapDimensions():this._resetDimensions();e=this.color=this._parseColours(b);"transparent"!==
e[1]?(l=this.border=this._parseWidth(b,b[b.precedance]),o.border&&1>l&&!Ia.test(e[1])&&(e[0]=e[1]),this.border=l=o.border!==G?o.border:l):this.border=l=0;k=this.size=this._calculateSize(b);j.css({width:k[0],height:k[1],lineHeight:k[1]+"px"});j=b.precedance===Q?[t("left"===s.x?l:"right"===s.x?k[0]-q[0]-l:(k[0]-q[0])/2),t("top"===s.y?k[1]-q[1]:0)]:[t("left"===s.x?k[0]-q[0]:0),t("top"===s.y?l:"bottom"===s.y?k[1]-q[1]-l:(k[1]-q[1])/2)];La?(g=m[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,0,
6E3,6E3),h=this._calculateTip(s,q,Sa),i=this._calculateTip(s,this.size,Sa),m.attr(X,k[0]*Sa).attr("height",k[1]*Sa),m.css(X,k[0]).css("height",k[1]),this._drawCoords(g,i),g.fillStyle=e[1],g.fill(),g.translate(j[0]*Sa,j[1]*Sa),this._drawCoords(g,h),g.fillStyle=e[0],g.fill()):(h=this._calculateTip(s),h="m"+h[0]+","+h[1]+" l"+h[2]+","+h[3]+" "+h[4]+","+h[5]+" xe",j[2]=l&&/^(r|b)/i.test(b.string())?8===p?2:1:0,m.css({coordsize:k[0]+l+" "+(k[1]+l),antialias:""+(-1<s.string().indexOf(S)),left:j[0]-j[2]*
Number(f===J),top:j[1]-j[2]*Number(f===Q),width:k[0]+l,height:k[1]+l}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:k[0]+l+" "+(k[1]+l),path:h,fillcolor:e[0],filled:!!a,stroked:!a}).toggle(!(!l&&!a));!a&&b.html(hb("stroke",'weight="'+2*l+'px" color="'+e[1]+'" miterlimit="1000" joinstyle="miter"'))}));a.opera&&setTimeout(function(){n.tip.css({display:"inline-block",visibility:"visible"})},1);c!==B&&this.calculate(b,k)},calculate:function(a,b){if(!this.enabled)return B;var c,e,
f=this,g=this.qtip.elements,h=this.element,i=this.options.offset,j=(g.tooltip.hasClass("ui-widget"),{});return a=a||this.corner,c=a.precedance,b=b||this._calculateSize(a),e=[a.x,a.y],c===J&&e.reverse(),d.each(e,function(d,e){var h,k,l;e===S?(h=c===Q?"left":"top",j[h]="50%",j[nb+"-"+h]=-Math.round(b[c===Q?0:1]/2)+i):(h=f._parseWidth(a,e,g.tooltip),k=f._parseWidth(a,e,g.content),l=f._parseRadius(a),j[e]=Math.max(-f.border,d?k:i+(l>h?l:-h)))}),j[a[c]]-=b[c===J?0:1],h.css({margin:"",top:"",bottom:"",
left:"",right:""}).css(j),j},reposition:function(a,b,d){function e(a,b,c,d,f){a===D&&i.precedance===b&&j[d]&&i[c]!==S?i.precedance=i.precedance===J?Q:J:a!==D&&j[d]&&(i[b]=i[b]===S?0<j[d]?d:f:i[b]===d?f:d)}function f(a,b,e){i[a]===S?n[nb+"-"+b]=l[a]=g[nb+"-"+b]-j[b]:(h=g[e]!==c?[j[b],-g[b]]:[-j[b],g[b]],(l[a]=Math.max(h[0],h[1]))>h[0]&&(d[b]-=j[b],l[b]=B),n[g[e]!==c?e:b]=l[a])}if(this.enabled){var g,h,a=b.cache,i=this.corner.clone(),j=d.adjusted,k=b.options.position.adjust.method.split(" "),b=k[0],
k=k[1]||k[0],l={left:B,top:B,x:0,y:0},n={};this.corner.fixed!==G&&(e(b,J,Q,"left","right"),e(k,Q,J,"top","bottom"),i.string()===a.corner.string()||a.cornerTop===j.top&&a.cornerLeft===j.left||this.update(i,B));g=this.calculate(i);g.right!==c&&(g.left=-g.right);g.bottom!==c&&(g.top=-g.bottom);g.user=this.offset;(l.left=b===D&&!!j.left)&&f(J,"left","right");(l.top=k===D&&!!j.top)&&f(Q,"top","bottom");this.element.css(n).toggle(!(l.x&&l.y||i.x===S&&l.y||i.y===S&&l.x));d.left-=g.left.charAt?g.user:b!==
D||l.top||!l.left&&!l.top?g.left+this.border:0;d.top-=g.top.charAt?g.user:k!==D||l.left||!l.left&&!l.top?g.top+this.border:0;a.cornerLeft=j.left;a.cornerTop=j.top;a.corner=i.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns);this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}});C=I.tip=function(a){return new v(a,a.options.style.tip)};C.initialize="render";C.sanitize=function(a){if(a.style&&"tip"in a.style){var b=a.style.tip;"object"!=typeof b&&
(b=a.style.tip={corner:b});/string|boolean/i.test(typeof b.corner)||(b.corner=G)}};T.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create();this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=[a.width,a.height];this.update();this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}};d.extend(G,H.defaults,{style:{tip:{corner:G,mimic:B,width:6,height:6,border:G,offset:0}}});var Ta;Ta=function(){function a(b){1>i.length&&
b.length?b.not("body").blur():i.first().focus()}function c(b){if(g.is(":visible")){var b=d(b.target),f=e.tooltip,h=b.closest(sa);(1>h.length?B:parseInt(h[0].style.zIndex,10)>parseInt(f[0].style.zIndex,10))||b.closest(sa)[0]===f[0]||a(b)}}var e,f,g,h=this,i={};d.extend(h,{init:function(){return g=h.elem=d("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return B}}).hide(),d(b.body).bind("focusin.qtip-modal",c),d(b).bind("keydown.qtip-modal",function(a){e&&e.options.show.modal.escape&&
27===a.keyCode&&e.hide(a)}),g.bind("click.qtip-modal",function(a){e&&e.options.show.modal.blur&&e.hide(a)}),h},update:function(a){e=a;i=a.options.show.modal.stealfocus!==B?a.tooltip.find("*").filter(function(){var a;if(d.expr[":"].focusable)a=d.expr[":"].focusable;else{var b,c,e;a=!isNaN(d.attr(this,"tabindex"));var f=this.nodeName&&this.nodeName.toLowerCase();a="area"===f?(b=this.parentNode,c=b.name,this.href&&c&&"map"===b.nodeName.toLowerCase()?(e=d("img[usemap=#"+c+"]")[0],!!e&&e.is(":visible")):
!1):/input|select|textarea|button|object/.test(f)?!this.disabled:"a"===f?this.href||a:a}return a}):[]},toggle:function(c,i,j){var k=(d(b.body),c.tooltip),l=c.options.show.modal,n=l.effect,m=i?"show":"hide",o=g.is(":visible"),k=d(".qtip-modal").filter(":visible:not(:animated)").not(k);return h.update(c),i&&l.stealfocus!==B&&a(d(":focus")),g.toggleClass("blurs",l.blur),i&&g.appendTo(b.body),g.is(":animated")&&o===i&&f!==B||!i&&k.length?h:(g.stop(G,B),d.isFunction(n)?n.call(g,i):n===B?g[m]():g.fadeTo(parseInt(j,
10)||90,i?1:0,function(){i||g.hide()}),i||g.queue(function(a){g.css({left:"",top:""});d(".qtip-modal").length||g.detach();a()}),f=i,e.destroyed&&(e=W),h)}});h.init()};Ta=new Ta;d.extend(z.prototype,{init:function(a){var b=a.tooltip;return this.options.on?(a.elements.overlay=Ta.elem,b.addClass("qtip-modal").css("z-index",H.modal_zindex+d(".qtip-modal").length),a._bind(b,["tooltipshow","tooltiphide"],function(a,c,e){c=a.originalEvent;if(a.target===b[0])if(c&&"tooltiphide"===a.type&&/mouse(leave|enter)/.test(c.type)&&
d(c.relatedTarget).closest(Ta.elem[0]).length)try{a.preventDefault()}catch(f){}else(!c||c&&"tooltipsolo"!==c.type)&&this.toggle(a,"tooltipshow"===a.type,e)},this._ns,this),a._bind(b,"tooltipfocus",function(a,c){if(!a.isDefaultPrevented()&&a.target===b[0]){var e=d(".qtip-modal"),f=H.modal_zindex+e.length,g=parseInt(b[0].style.zIndex,10);Ta.elem[0].style.zIndex=f-1;e.each(function(){this.style.zIndex>g&&(this.style.zIndex-=1)});e.filter("."+aa).qtip("blur",a.originalEvent);b.addClass(aa)[0].style.zIndex=
f;Ta.update(c);try{a.preventDefault()}catch(h){}}},this._ns,this),a._bind(b,"tooltiphide",function(a){a.target===b[0]&&d(".qtip-modal").filter(":visible").not(b).last().qtip("focus",a)},this._ns,this),c):this},toggle:function(a,b,d){return a&&a.isDefaultPrevented()?this:(Ta.toggle(this.qtip,!!b,d),c)},destroy:function(){this.qtip.tooltip.removeClass("qtip-modal");this.qtip._unbind(this.qtip.tooltip,this._ns);Ta.toggle(this.qtip,B);delete this.qtip.elements.overlay}});C=I.modal=function(a){return new z(a,
a.options.show.modal)};C.sanitize=function(a){a.show&&("object"!=typeof a.show.modal?a.show.modal={on:!!a.show.modal}:a.show.modal.on===c&&(a.show.modal.on=G))};H.modal_zindex=H.zindex-200;C.initialize="render";T.modal={"^show.modal.(on|blur)$":function(){this.destroy();this.init();this.qtip.elems.overlay.toggle(0<this.qtip.tooltip[0].offsetWidth)}};d.extend(G,H.defaults,{show:{modal:{on:B,effect:G,blur:G,stealfocus:G,escape:G}}});I.viewport=function(c,d,e,f,g,h,i){function j(a,b,c,e,f,g,h,i,k){var n=
d[f],r=v[a],u=y[a],w=r===f?k:r===g?-k:-k/2,z=s[f]+t[f]-(o?0:m[f]),E=z-n,k=n+k-(h===X?p:q)-z,b=w-(v.precedance===a||r===v[b]?u===f?i:u===g?-i:-i/2:0)-(u===S?i/2:0);return c===D?(b=(r===f?1:-1)*w,d[f]+=0<E?E:0<k?-k:0,d[f]=Math.max(-m[f]+t[f],n-b,Math.min(Math.max(-m[f]+t[f]+(h===X?p:q),n+b),d[f],"center"===r?n-w:1E9))):(e*=c===V?2:0,0<E&&(r!==f||0<k)?(d[f]-=b+e,l.invert(a,f)):0<k&&(r!==g||0<E)&&(d[f]-=(r===S?-b:b)+e,l.invert(a,g)),s>d[f]&&-d[f]>k&&(d[f]=n,l=v.clone())),d[f]-n}var k,l,n,m,o,p,q,s,t,
r=e.target,u=c.elements.tooltip,v=e.my,y=e.at,w=e.adjust,z=w.method.split(" "),C=z[0],z=z[1]||z[0],E=e.viewport,e=e.container,H=c.cache,G={left:0,top:0};return E.jquery&&r[0]!==a&&r[0]!==b.body&&"none"!==w.method?(m=e.offset()||G,o="static"===e.css("position"),k="fixed"===u.css("position"),p=E[0]===a?E.width():E.outerWidth(B),q=E[0]===a?E.height():E.outerHeight(B),s={left:k?0:E.scrollLeft(),top:k?0:E.scrollTop()},t=E.offset()||G,("shift"!==C||"shift"!==z)&&(l=v.clone()),G={left:"none"!==C?j(J,Q,C,
w.x,"left","right",X,f,h):0,top:"none"!==z?j(Q,J,z,w.y,"top","bottom","height",g,i):0},l&&H.lastClass!==(n=O+"-pos-"+l.abbrev())&&u.removeClass(c.cache.lastClass).addClass(c.cache.lastClass=n),G):G};I.polys={polygon:function(a,b){for(var c,d,e={width:0,height:0,position:{top:1E10,right:0,bottom:0,left:1E10},adjustable:B},f=0,g=[],h=1,i=1,j=0,k=0,f=a.length;f--;)c=[parseInt(a[--f],10),parseInt(a[f+1],10)],c[0]>e.position.right&&(e.position.right=c[0]),c[0]<e.position.left&&(e.position.left=c[0]),c[1]>
e.position.bottom&&(e.position.bottom=c[1]),c[1]<e.position.top&&(e.position.top=c[1]),g.push(c);if(c=e.width=Math.abs(e.position.right-e.position.left),d=e.height=Math.abs(e.position.bottom-e.position.top),"c"===b.abbrev())e.position={left:e.position.left+e.width/2,top:e.position.top+e.height/2};else{for(;0<c&&0<d&&0<h&&0<i;){c=Math.floor(c/2);d=Math.floor(d/2);"left"===b.x?h=c:"right"===b.x?h=e.width-c:h+=Math.floor(c/2);"top"===b.y?i=d:"bottom"===b.y?i=e.height-d:i+=Math.floor(d/2);for(f=g.length;f--&&
!(2>g.length);)j=g[f][0]-e.position.left,k=g[f][1]-e.position.top,("left"===b.x&&j>=h||"right"===b.x&&h>=j||b.x===S&&(h>j||j>e.width-h)||"top"===b.y&&k>=i||"bottom"===b.y&&i>=k||b.y===S&&(i>k||k>e.height-i))&&g.splice(f,1)}e.position={left:g[0][0],top:g[0][1]}}return e},rect:function(a,b,c,d){return{width:Math.abs(c-a),height:Math.abs(d-b),position:{left:Math.min(a,c),top:Math.min(b,d)}}},_angles:{tc:1.5,tr:1.75,tl:1.25,bc:0.5,br:0.25,bl:0.75,rc:2,lc:1,c:0},ellipse:function(a,b,c,d,e){var f=I.polys._angles[e.abbrev()],
e=0===f?0:c*Math.cos(f*Math.PI),f=d*Math.sin(f*Math.PI);return{width:2*c-Math.abs(e),height:2*d-Math.abs(f),position:{left:a+e,top:b+f},adjustable:B}},circle:function(a,b,c,d){return I.polys.ellipse(a,b,c,c,d)}};I.svg=function(a,c,e){for(var f,g,h,i,j,k,l,n=(d(b),c[0]),m=d(n.ownerSVGElement),a=n.ownerDocument,c=(parseInt(c.css("stroke-width"),10)||0)/2,o=!0;!n.getBBox;)n=n.parentNode;if(!n.getBBox||!n.parentNode)return B;switch(n.nodeName){case "ellipse":case "circle":c=I.polys.ellipse(n.cx.baseVal.value,
n.cy.baseVal.value,(n.rx||n.r).baseVal.value+c,(n.ry||n.r).baseVal.value+c,e);break;case "line":case "polygon":case "polyline":k=n.points||[{x:n.x1.baseVal.value,y:n.y1.baseVal.value},{x:n.x2.baseVal.value,y:n.y2.baseVal.value}];c=[];j=-1;for(h=k.numberOfItems||k.length;h>++j;)i=k.getItem?k.getItem(j):k[j],c.push.apply(c,[i.x,i.y]);c=I.polys.polygon(c,e);break;default:c=n.getBoundingClientRect(),c={width:c.width,height:c.height,position:{left:c.left,top:c.top}},o=!1}if(l=c.position,m=m[0],o&&m.createSVGPoint&&
(f=n.getScreenCTM(),k=m.createSVGPoint(),k.x=l.left,k.y=l.top,g=k.matrixTransform(f),l.left=g.x,l.top=g.y),a!==b)(e=d((a.defaultView||a.parentWindow).frameElement).offset())&&(l.left+=e.left,l.top+=e.top);return a=d(a),l.left+=a.scrollLeft(),l.top+=a.scrollTop(),c};I.imagemap=function(a,b,c){b.jquery||(b=d(b));var e,f,g,h=b.attr("shape").toLowerCase().replace("poly","polygon"),a=d('img[usemap="#'+b.parent("map").attr("name")+'"]'),i=d.trim(b.attr("coords")).replace(/,$/,"").split(",");if(!a.length)return B;
if("polygon"===h)c=I.polys.polygon(i,c);else{if(!I.polys[h])return B;f=-1;g=i.length;for(b=[];g>++f;)b.push(parseInt(i[f],10));c=I.polys[h].apply(this,b.concat(c))}return e=a.offset(),e.left+=Math.ceil((a.outerWidth(B)-a.width())/2),e.top+=Math.ceil((a.outerHeight(B)-a.height())/2),c.position.left+=e.left,c.position.top+=e.top,c};d.extend(E.prototype,{_scroll:function(){var b=this.qtip.elements.overlay;b&&(b[0].style.top=d(a).scrollTop()+"px")},init:function(c){var e=c.tooltip;1>d("select, object").length&&
(this.bgiframe=c.elements.bgiframe=d('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>').appendTo(e),c._bind(e,"tooltipmove",this.adjustBGIFrame,this._ns,this));this.redrawContainer=d("<div/>",{id:O+"-rcontainer"}).appendTo(b.body);c.elements.overlay&&c.elements.overlay.addClass("qtipmodal-ie6fix")&&(c._bind(a,
["scroll","resize"],this._scroll,this._ns,this),c._bind(e,["tooltipshow"],this._scroll,this._ns,this));this.redraw()},adjustBGIFrame:function(){var a,b;b=this.qtip.tooltip;var c={height:b.outerHeight(B),width:b.outerWidth(B)},d=this.qtip.plugins.tip,e=this.qtip.elements.tip;b=parseInt(b.css("borderLeftWidth"),10)||0;b={left:-b,top:-b};d&&e&&(a="x"===d.corner.precedance?[X,"left"]:["height","top"],b[a[1]]-=e[a[0]]());this.bgiframe.css(b).css(c)},redraw:function(){if(1>this.qtip.rendered||this.drawing)return this;
var a,b,c,d,e=this.qtip.tooltip,f=this.qtip.options.style,g=this.qtip.options.position.container;return this.qtip.drawing=1,f.height&&e.css("height",f.height),f.width?e.css(X,f.width):(e.css(X,"").appendTo(this.redrawContainer),b=e.width(),1>b%2&&(b+=1),c=e.css("maxWidth")||"",d=e.css("minWidth")||"",a=-1<(c+d).indexOf("%")?g.width()/100:0,c=(-1<c.indexOf("%")?a:1)*parseInt(c,10)||b,d=(-1<d.indexOf("%")?a:1)*parseInt(d,10)||0,b=c+d?Math.min(Math.max(b,d),c):b,e.css(X,Math.round(b)).appendTo(g)),this.drawing=
0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove();this.qtip._unbind([a,this.qtip.tooltip],this._ns)}});(I.ie6=function(a){return 6===p?new E(a):B}).initialize="render";T.ie6={"^content|style$":function(){this.redraw()}}})})(window,document);steal.executed("vendor/qtip2/jquery.qtip.min.js");steal("vendor/jQuery-Smart-Wizard/js/jquery.smartWizard.js");steal.executed("lib/external/stealSmartWizard.js");
function SmartWizard(a,b){this.target=a;this.options=b;this.curStepIdx=b.selected;this.steps=$(a).children("ul").children("li").children("a");this.contentWidth=0;this.msgBox=$('<div class="msgBox"><div class="content"></div><a href="#" class="close">X</a></div>');this.elmStepContainer=$("<div></div>").addClass("stepContainer");this.loader=$("<div>Loading</div>").addClass("loader");this.buttons={next:$("<a>"+b.labelNext+"</a>").attr("href","#").addClass("buttonNext"),previous:$("<a>"+b.labelPrevious+
"</a>").attr("href","#").addClass("buttonPrevious"),finish:$("<a>"+b.labelFinish+"</a>").attr("href","#").addClass("buttonFinish")};var c=function(a){a.options.enableAllSteps?($(a.steps,a.target).removeClass("selected").removeClass("disabled").addClass("done"),$(a.steps,a.target).attr("isDone",1)):($(a.steps,a.target).removeClass("selected").removeClass("done").addClass("disabled"),$(a.steps,a.target).attr("isDone",0));$(a.steps,a.target).each(function(b){$($(this).attr("href").replace(/^.+#/,"#"),
a.target).hide();$(this).attr("rel",b+1)})},d=function(a,b){return $($(b,a.target).attr("href").replace(/^.+#/,"#"),a.target)},e=function(a,b){var c=a.steps.eq(b),e=a.options.contentURL,g=a.options.contentURLData,n=c.data("hasContent"),o=b+1;e&&0<e.length?a.options.contentCache&&n?h(a,b):(e={url:e,type:"POST",data:{step_number:o},dataType:"text",beforeSend:function(){a.loader.show()},error:function(){a.loader.hide()},success:function(e){a.loader.hide();e&&0<e.length&&(c.data("hasContent",!0),d(a,
c).html(e),h(a,b))}},g&&(e=$.extend(e,g(o))),$.ajax(e)):h(a,b)},h=function(a,b){var c=a.steps.eq(b),e=a.steps.eq(a.curStepIdx);if(b!=a.curStepIdx&&$.isFunction(a.options.onLeaveStep)){var h={fromStep:a.curStepIdx+1,toStep:b+1};if(!a.options.onLeaveStep.call(a,$(e),h))return!1}a.elmStepContainer.height(d(a,c).outerHeight());h=a.curStepIdx;a.curStepIdx=b;if("slide"==a.options.transitionEffect)d(a,e).slideUp("fast",function(){d(a,c).slideDown("fast");g(a,e,c)});else if("fade"==a.options.transitionEffect)d(a,
e).fadeOut("fast",function(){d(a,c).fadeIn("fast");g(a,e,c)});else if("slideleft"==a.options.transitionEffect){var n=null,o=0;b>h?(n=a.contentWidth+10,nextElmLeft2=0,o=0-d(a,e).outerWidth()):(n=0-d(a,c).outerWidth()+20,nextElmLeft2=0,o=10+d(a,e).outerWidth());b==h?(n=$($(c,a.target).attr("href"),a.target).outerWidth()+20,nextElmLeft2=0,o=0-$($(e,a.target).attr("href"),a.target).outerWidth()):$($(e,a.target).attr("href"),a.target).animate({left:o},"fast",function(){$($(e,a.target).attr("href"),a.target).hide()});
d(a,c).css("left",n).show().animate({left:nextElmLeft2},"fast",function(){g(a,e,c)})}else d(a,e).hide(),d(a,c).show(),g(a,e,c);return!0},g=function(a,b,c){$(b,a.target).removeClass("selected");$(b,a.target).addClass("done");$(c,a.target).removeClass("disabled");$(c,a.target).removeClass("done");$(c,a.target).addClass("selected");$(c,a.target).attr("isDone",1);a.options.cycleSteps||((0>=a.curStepIdx?($(a.buttons.previous).addClass("buttonDisabled"),a.options.hideButtonsOnDisabled&&$(a.buttons.previous).hide()):
($(a.buttons.previous).removeClass("buttonDisabled"),a.options.hideButtonsOnDisabled&&$(a.buttons.previous).show()),a.steps.length-1<=a.curStepIdx)?($(a.buttons.next).addClass("buttonDisabled"),a.options.hideButtonsOnDisabled&&$(a.buttons.next).hide()):($(a.buttons.next).removeClass("buttonDisabled"),a.options.hideButtonsOnDisabled&&$(a.buttons.next).show()));!a.steps.hasClass("disabled")||a.options.enableFinishButton?($(a.buttons.finish).removeClass("buttonDisabled"),a.options.hideButtonsOnDisabled&&
$(a.buttons.finish).show()):($(a.buttons.finish).addClass("buttonDisabled"),a.options.hideButtonsOnDisabled&&$(a.buttons.finish).hide());if($.isFunction(a.options.onShowStep)&&(b={fromStep:parseInt($(b).attr("rel")),toStep:parseInt($(c).attr("rel"))},!a.options.onShowStep.call(this,$(c),b)))return!1;if(a.options.noForwardJumping)for(c=a.curStepIdx+2;c<=a.steps.length;c++)a.disableStep(c)};SmartWizard.prototype.goForward=function(){var a=this.curStepIdx+1;if(this.steps.length<=a){if(!this.options.cycleSteps)return!1;
a=0}e(this,a)};SmartWizard.prototype.goBackward=function(){var a=this.curStepIdx-1;if(0>a){if(!this.options.cycleSteps)return!1;a=this.steps.length-1}e(this,a)};SmartWizard.prototype.goToStep=function(a){a-=1;0<=a&&a<this.steps.length&&e(this,a)};SmartWizard.prototype.enableStep=function(a){a-=1;if(a==this.curStepIdx||0>a||a>=this.steps.length)return!1;a=this.steps.eq(a);$(a,this.target).attr("isDone",1);$(a,this.target).removeClass("disabled").removeClass("selected").addClass("done")};SmartWizard.prototype.disableStep=
function(a){a-=1;if(a==this.curStepIdx||0>a||a>=this.steps.length)return!1;a=this.steps.eq(a);$(a,this.target).attr("isDone",0);$(a,this.target).removeClass("done").removeClass("selected").addClass("disabled")};SmartWizard.prototype.currentStep=function(){return this.curStepIdx+1};SmartWizard.prototype.showMessage=function(a){$(".content",this.msgBox).html(a);this.msgBox.show()};SmartWizard.prototype.hideMessage=function(){this.msgBox.fadeOut("normal")};SmartWizard.prototype.showError=function(a){this.setError(a,
!0)};SmartWizard.prototype.hideError=function(a){this.setError(a,!1)};SmartWizard.prototype.setError=function(a,b){"object"==typeof a&&(b=a.iserror,a=a.stepnum);b?$(this.steps.eq(a-1),this.target).addClass("error"):$(this.steps.eq(a-1),this.target).removeClass("error")};SmartWizard.prototype.fixHeight=function(){var a=0,b=this.steps.eq(this.curStepIdx),b=d(this,b);b.children().each(function(){a+=$(this).outerHeight()});b.height(a+5);this.elmStepContainer.height(a+20)};(function(a){var b=$("<div></div>").addClass("actionBar");
b.append(a.msgBox);$(".close",a.msgBox).click(function(){a.msgBox.fadeOut("normal");return!1});var d=a.target.children("div");a.target.children("ul").addClass("anchor");d.addClass("content");a.options.errorSteps&&0<a.options.errorSteps.length&&$.each(a.options.errorSteps,function(b,c){a.setError({stepnum:c,iserror:!0})});a.elmStepContainer.append(d);b.append(a.loader);a.target.append(a.elmStepContainer);b.append(a.buttons.finish).append(a.buttons.next).append(a.buttons.previous);a.target.append(b);
this.contentWidth=a.elmStepContainer.width();$(a.buttons.next).click(function(){a.goForward();return!1});$(a.buttons.previous).click(function(){a.goBackward();return!1});$(a.buttons.finish).click(function(){if(!$(this).hasClass("buttonDisabled"))if($.isFunction(a.options.onFinish)){var b={fromStep:a.curStepIdx+1};a.options.onFinish.call(this,$(a.steps),b)}else(b=a.target.parents("form"))&&b.length&&b.submit();return!1});$(a.steps).bind("click",function(){if(a.steps.index(this)==a.curStepIdx)return!1;
var b=a.steps.index(this);1==a.steps.eq(b).attr("isDone")-0&&e(a,b);return!1});a.options.keyNavigation&&$(document).keyup(function(b){39==b.which?a.goForward():37==b.which&&a.goBackward()});c(a);e(a,a.curStepIdx)})(this)}
(function(a){a.fn.smartWizard=function(b){var c=arguments,d=void 0,e=this.each(function(){var e=a(this).data("smartWizard");if("object"==typeof b||!b||!e){var g=a.extend({},a.fn.smartWizard.defaults,b||{});e||(e=new SmartWizard(a(this),g),a(this).data("smartWizard",e))}else{if("function"==typeof SmartWizard.prototype[b])return d=SmartWizard.prototype[b].apply(e,Array.prototype.slice.call(c,1));a.error("Method "+b+" does not exist on jQuery.smartWizard")}});return void 0===d?e:d};a.fn.smartWizard.defaults=
{selected:0,keyNavigation:!0,enableAllSteps:!1,transitionEffect:"fade",contentURL:null,contentCache:!0,cycleSteps:!1,enableFinishButton:!1,hideButtonsOnDisabled:!1,errorSteps:[],labelNext:"Next",labelPrevious:"Previous",labelFinish:"Finish",noForwardJumping:!1,onLeaveStep:null,onShowStep:null,onFinish:null}})(jQuery);steal.executed("vendor/jQuery-Smart-Wizard/js/jquery.smartWizard.js");
(function(a){a.fn.ajaxfileupload=function(b){var c={params:{},action:"",onStart:function(){console.log("starting upload");console.log(this)},onComplete:function(a){console.log("got response: ");console.log(a);console.log(this)},onCancel:function(){console.log("cancelling: ");console.log(this)},valid_extensions:["gif","png","jpg","jpeg"],submit_button:null},d=!1;b&&a.extend(c,b);return this.each(function(){var b=a(this);if(!0!==b.data("ajaxUploader-setup")){b.change(function(){d=!1;null==c.submit_button&&
h()});null!=c.submit_button&&c.submit_button.click(function(){d||h()});var h=function(){if(""==b.val())return c.onCancel.apply(b,[c.params]);var f=b.val().split(".").pop().toLowerCase();-1==a.inArray(f,c.valid_extensions)?c.onComplete.apply(b,[{status:!1,message:"The select file type is invalid. File must be "+c.valid_extensions.join(", ")+"."},c.params]):(d=!0,g(b),!1!==c.onStart.apply(b,[c.params])&&b.parent("form").submit(function(a){a.stopPropagation()}).submit())};b.data("ajaxUploader-setup",
!0);var g=function(b){var e="ajaxUploader-iframe-"+Math.round((new Date).getTime()/1E3);a("body").after('<iframe width="0" height="0" style="display:none;" name="'+e+'" id="'+e+'"/>');a("#"+e).load(function(){var a,e=this.contentWindow.document.body.innerText;try{a=JSON.parse(e)}catch(g){a=e}b.siblings().remove();b.unwrap();d=!1;c.onComplete.apply(b,[a,c.params])});b.wrap(function(){return'<form action="'+c.action+'" method="POST" enctype="multipart/form-data" target="'+e+'" />'}).before(function(){var a,
b="";for(a in c.params){var d=c.params[a];"function"===typeof d&&(d=d());b+='<input type="hidden" name="'+a+'" value="'+d+'" />'}return b})}}})}})(jQuery);steal.executed("lib/external/Uploader/jquery.ajaxfileupload.js");steal("lib/external/jQRangeSlider/StealjQRangeSlider.js").then("lib/sentrana/SentranaJQRangeSlider/rangeSliderOverride.css");steal.executed("lib/sentrana/SentranaJQRangeSlider/stealSentranaJQRangeSlider.js");steal("lib/external/jQRangeSlider/jQEditRangeSlider-min.js");steal.executed("lib/external/jQRangeSlider/StealjQRangeSlider.js");
!function(a){a.widget("ui.rangeSliderMouseTouch",a.ui.mouse,{enabled:!0,_mouseInit:function(){var b=this;a.ui.mouse.prototype._mouseInit.apply(this);this._mouseDownEvent=!1;this.element.bind("touchstart."+this.widgetName,function(a){return b._touchStart(a)})},_mouseDestroy:function(){a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate);a.ui.mouse.prototype._mouseDestroy.apply(this)},enable:function(){this.enabled=!0},disable:function(){this.enabled=
!1},destroy:function(){this._mouseDestroy();a.ui.mouse.prototype.destroy.apply(this);this._mouseInit=null},_touchStart:function(b){if(!this.enabled)return!1;b.which=1;b.preventDefault();this._fillTouchEvent(b);var c=this,d=this._mouseDownEvent;this._mouseDown(b);d!==this._mouseDownEvent&&(this._touchEndDelegate=function(a){c._touchEnd(a)},this._touchMoveDelegate=function(a){c._touchMove(a)},a(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate))},
_mouseDown:function(b){return this.enabled?a.ui.mouse.prototype._mouseDown.apply(this,[b]):!1},_touchEnd:function(b){this._fillTouchEvent(b);this._mouseUp(b);a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate);this._mouseDownEvent=!1;a(document).trigger("mouseup")},_touchMove:function(a){return a.preventDefault(),this._fillTouchEvent(a),this._mouseMove(a)},_fillTouchEvent:function(a){var c;c="undefined"==typeof a.targetTouches&&
"undefined"==typeof a.changedTouches?a.originalEvent.targetTouches[0]||a.originalEvent.changedTouches[0]:a.targetTouches[0]||a.changedTouches[0];a.pageX=c.pageX;a.pageY=c.pageY}})}(jQuery);
(function(a){a.widget("ui.rangeSliderDraggable",a.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){a.ui.rangeSliderMouseTouch.prototype._create.apply(this);setTimeout(a.proxy(this._initElementIfNotDestroyed,this),10)},destroy:function(){this.cache=null;a.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_initElementIfNotDestroyed:function(){this._mouseInit&&this._initElement()},_initElement:function(){this._mouseInit();this._cache()},_setOption:function(b,c){"containment"===
b&&(this.options.containment=null===c||0===a(c).length?null:a(c))},_mouseStart:function(a){return this._cache(),this.cache.click={left:a.pageX,top:a.pageY},this.cache.initialOffset=this.element.offset(),this._triggerMouseEvent("mousestart"),!0},_mouseDrag:function(a){a=a.pageX-this.cache.click.left;return a=this._constraintPosition(a+this.cache.initialOffset.left),this._applyPosition(a),this._triggerMouseEvent("sliderDrag"),!1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(a){return 0!==
this.element.parent().length&&null!==this.cache.parent.offset&&(a=Math.min(a,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),a=Math.max(a,this.cache.parent.offset.left)),a},_applyPosition:function(a){var c={top:this.cache.offset.top,left:a};this.element.offset({left:a});this.cache.offset=c},_cacheIfNecessary:function(){null===this.cache&&this._cache()},_cache:function(){this.cache={};this._cacheMargins();this._cacheParent();this._cacheDimensions();this.cache.offset=this.element.offset()},
_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(null!==this.options.parent){var a=this.element.parent();this.cache.parent={offset:a.offset(),width:a.width()}}else this.cache.parent=null},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},
_parsePixels:function(a,c){return parseInt(a.css(c),10)||0},_triggerMouseEvent:function(a){var c=this._prepareEventData();this.element.trigger(a,c)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})})(jQuery);
(function(a,b){a.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1,scales:!1,enabled:!0,symmetricPositionning:!1},_values:null,_valuesChanged:!1,_initialized:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},ruler:null,_create:function(){this._setDefaultValues();
this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0};this.arrows={left:null,right:null};this.changing={min:!1,max:!1};this.changed={min:!1,max:!1};this._createElements();this._bindResize();setTimeout(a.proxy(this.resize,this),1);setTimeout(a.proxy(this._initValues,this),1)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max}},_bindResize:function(){var b=this;this._resizeProxy=function(a){b.resize(a)};a(window).resize(this._resizeProxy)},
_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width());this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this._initialized=!0;this.values(this._values.min,this._values.max)},_setOption:function(a,b){this._setWheelOption(a,b);this._setArrowsOption(a,b);this._setLabelsOption(a,b);this._setLabelsDurations(a,b);this._setFormatterOption(a,b);this._setBoundsOption(a,
b);this._setRangeOption(a,b);this._setStepOption(a,b);this._setScalesOption(a,b);this._setEnabledOption(a,b);this._setPositionningOption(a,b)},_validProperty:function(a,b,e){return null===a||"undefined"==typeof a[b]?e:a[b]},_setStepOption:function(a,b){"step"===a&&(this.options.step=b,this._leftHandle("option","step",b),this._rightHandle("option","step",b),this._changed(!0))},_setScalesOption:function(a,b){"scales"===a&&(!1===b||null===b?(this.options.scales=!1,this._destroyRuler()):b instanceof Array&&
(this.options.scales=b,this._updateRuler()))},_setRangeOption:function(a,b){"range"===a&&(this._bar("option","range",b),this.options.range=this._bar("option","range"),this._changed(!0))},_setBoundsOption:function(a,b){"bounds"===a&&"undefined"!=typeof b.min&&"undefined"!=typeof b.max&&this.bounds(b.min,b.max)},_setWheelOption:function(a,b){("wheelMode"===a||"wheelSpeed"===a)&&(this._bar("option",a,b),this.options[a]=this._bar("option",a))},_setLabelsOption:function(a,b){"valueLabels"===a&&!("hide"!==
b&&"show"!==b&&"change"!==b)&&(this.options.valueLabels=b,"hide"!==b?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels())},_setFormatterOption:function(a,b){"formatter"===a&&null!==b&&"function"==typeof b&&"hide"!==this.options.valueLabels&&(this._leftLabel("option","formatter",b),this.options.formatter=this._rightLabel("option","formatter",b))},_setArrowsOption:function(a,b){"arrows"!==a||!0!==b&&!1!==b||b===this.options.arrows||(!0===b?(this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),
this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0):!1===b&&(this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1),this._initWidth())},_setLabelsDurations:function(a,b){if(("durationIn"===a||"durationOut"===a||"delayOut"===a)&&parseInt(b,10)===b)null!==this.labels.left&&this._leftLabel("option",a,b),null!==this.labels.right&&
this._rightLabel("option",a,b),this.options[a]=b},_setEnabledOption:function(a,b){"enabled"===a&&this.toggle(b)},_setPositionningOption:function(a,b){"symmetricPositionning"===a&&(this._rightHandle("option",a,b),this.options[a]=this._leftHandle("option",a,b))},_createElements:function(){"absolute"!==this.element.css("position")&&this.element.css("position","relative");this.element.addClass("ui-rangeSlider");this.container=a("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element);
this.innerBar=a("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0);this._createHandles();this._createBar();this.container.prepend(this.innerBar);this._createArrows();"hide"!==this.options.valueLabels?this._createLabels():this._destroyLabels();this._updateRuler();this.options.enabled||this._toggle(this.options.enabled)},_createHandle:function(b){return a("<div />")[this._handleType()](b).bind("sliderDrag",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,
this))},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this._values.min,step:this.options.step,symmetricPositionning:this.options.symmetricPositionning}).appendTo(this.container);this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this._values.max,step:this.options.step,symmetricPositionning:this.options.symmetricPositionning}).appendTo(this.container)},_createBar:function(){this.bar=a("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",
a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this));this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed});this.options.range=this._bar("option","range");this.options.wheelMode=this._bar("option","wheelMode");this.options.wheelSpeed=this._bar("option","wheelSpeed")},_createArrows:function(){this.arrows.left=
this._createArrow("left");this.arrows.right=this._createArrow("right");this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"))},_createArrow:function(b){var d,e=a("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+b+"Arrow").css("position","absolute").css(b,0).appendTo(this.element);return d=
"right"===b?a.proxy(this._scrollRightClick,this):a.proxy(this._scrollLeftClick,this),e.bind("mousedown touchstart",d),e},_proxy:function(a,b,e){e=Array.prototype.slice.call(e);return a&&a[b]?a[b].apply(a,e):null},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),
arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(a,b){return b===this.rightHandle&&(a-=b.outerWidth()),a*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-b.outerWidth(!0))+this.options.bounds.min},_trigger:function(a){var b=
this;setTimeout(function(){b.element.trigger(a,{label:b.element,values:b.values()})},1)},_changing:function(){this._updateValues()&&(this._trigger("valuesChanging"),this._valuesChanged=!0)},_deactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","hide"),this._rightLabel("option","show","hide"))},_reactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","change"),this._rightLabel("option","show","change"))},_changed:function(a){!0===
a&&this._deactivateLabels();(this._updateValues()||this._valuesChanged)&&(this._trigger("valuesChanged"),!0!==a&&this._trigger("userValuesChanged"),this._valuesChanged=!1);!0===a&&this._reactivateLabels()},_updateValues:function(){var a=this._leftHandle("value"),b=this._rightHandle("value"),e=this._min(a,b),h=this._max(a,b),e=e!==this._values.min||h!==this._values.max;return this._values.min=this._min(a,b),this._values.max=this._max(a,b),e},_min:function(a,b){return Math.min(a,b)},_max:function(a,
b){return Math.max(a,b)},_createLabel:function(b,d){var e;return null===b?(e=this._getLabelConstructorParameters(b,d),b=a("<div />").appendTo(this.element)[this._labelType()](e)):(e=this._getLabelRefreshParameters(b,d),b[this._labelType()](e)),b},_getLabelConstructorParameters:function(a,b){return{handle:b,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},
_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){return!1===this.options.formatter||null===this.options.formatter?this._defaultFormatter:this.options.formatter},_defaultFormatter:function(a){return Math.round(a)},_destroyLabel:function(a){return null!==a&&(a[this._labelType()]("destroy"),a.remove(),a=null),a},_createLabels:function(){this.labels.left=
this._createLabel(this.labels.left,this.leftHandle);this.labels.right=this._createLabel(this.labels.right,this.rightHandle);this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left);this.labels.right=this._destroyLabel(this.labels.right)},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(a){return this.options.enabled?(a.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),this._continueScrolling("scrollRight",
4*this._stepRatio(),1),void 0):!1},_continueScrolling:function(a,b,e,h){if(!this.options.enabled)return!1;this._bar(a,e);h=h||5;h--;var g=this,f=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout(function(){0===h&&(16<b?b=Math.max(16,b/1.5):e=Math.min(f,2*e),h=5);g._continueScrolling(a,b,e,h)},b)},_scrollLeftClick:function(a){return this.options.enabled?(a.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),this._continueScrolling("scrollLeft",4*this._stepRatio(),1),void 0):
!1},_bindStopScroll:function(){var b=this;this._stopScrollHandle=function(a){a.preventDefault();b._stopScroll()};a(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){a(document).unbind("mouseup touchend",this._stopScrollHandle);this._stopScrollHandle=null;this._bar("stopScroll");clearTimeout(this._scrollTimeout)},_createRuler:function(){this.ruler=a("<div class='ui-rangeSlider-ruler' />").appendTo(this.innerBar)},_setRulerParameters:function(){this.ruler.ruler({min:this.options.bounds.min,
max:this.options.bounds.max,scales:this.options.scales})},_destroyRuler:function(){null!==this.ruler&&a.fn.ruler&&(this.ruler.ruler("destroy"),this.ruler.remove(),this.ruler=null)},_updateRuler:function(){this._destroyRuler();!1!==this.options.scales&&a.fn.ruler&&(this._createRuler(),this._setRulerParameters())},values:function(a,b){var e;if("undefined"!=typeof a&&"undefined"!=typeof b){if(!this._initialized)return this._values.min=a,this._values.max=b,this._values;this._deactivateLabels();e=this._bar("values",
a,b);this._changed(!0);this._reactivateLabels()}else e=this._bar("values",a,b);return e},min:function(a){return this._values.min=this.values(a,this._values.max).min,this._values.min},max:function(a){return this._values.max=this.values(this._values.min,a).max,this._values.max},bounds:function(a,b){return this._isValidValue(a)&&this._isValidValue(b)&&b>a&&(this._setBounds(a,b),this._updateRuler(),this._changed(!0)),this.options.bounds},_isValidValue:function(a){return"undefined"!=typeof a&&parseFloat(a)===
a},_setBounds:function(a,b){this.options.bounds={min:a,max:b};this._leftHandle("option","bounds",this.options.bounds);this._rightHandle("option","bounds",this.options.bounds);this._bar("option","bounds",this.options.bounds)},zoomIn:function(a){this._bar("zoomIn",a)},zoomOut:function(a){this._bar("zoomOut",a)},scrollLeft:function(a){this._bar("startScroll");this._bar("scrollLeft",a);this._bar("stopScroll")},scrollRight:function(a){this._bar("startScroll");this._bar("scrollRight",a);this._bar("stopScroll")},
resize:function(){this._initWidth();this._leftHandle("update");this._rightHandle("update");this._bar("update")},enable:function(){this.toggle(!0)},disable:function(){this.toggle(!1)},toggle:function(a){a===b&&(a=!this.options.enabled);this.options.enabled!==a&&this._toggle(a)},_toggle:function(a){this.options.enabled=a;this.element.toggleClass("ui-rangeSlider-disabled",!a);a=a?"enable":"disable";this._bar(a);this._leftHandle(a);this._rightHandle(a);this._leftLabel(a);this._rightLabel(a)},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows ui-rangeSlider-noArrow ui-rangeSlider-disabled");
this._destroyWidgets();this._destroyElements();this.element.removeClass("ui-rangeSlider");this.options=null;a(window).unbind("resize",this._resizeProxy);this._bindResize=this._resizeProxy=null;a.Widget.prototype.destroy.apply(this,arguments)},_destroyWidget:function(a){this["_"+a]("destroy");this[a].remove();this[a]=null},_destroyWidgets:function(){this._destroyWidget("bar");this._destroyWidget("leftHandle");this._destroyWidget("rightHandle");this._destroyRuler();this._destroyLabels()},_destroyElements:function(){this.container.remove();
this.container=null;this.innerBar.remove();this.innerBar=null;this.arrows.left.remove();this.arrows.right.remove();this.arrows=null}})})(jQuery);
(function(a){a.widget("ui.rangeSliderHandle",a.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this);this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft);this.element.append("<div class='ui-rangeSlider-handle-inner' />");
this._value=this._constraintValue(this.options.value)},destroy:function(){this.element.empty();a.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(b,c){"isLeft"!==b||!0!==c&&!1!==c||c===this.options.isLeft?"step"===b&&this._checkStep(c)?(this.options.step=c,this.update()):"bounds"===b?(this.options.bounds=c,this.update()):"range"===b&&this._checkRange(c)?(this.options.range=c,this.update()):"symmetricPositionning"===b&&(this.options.symmetricPositionning=!0===c,this.update()):
(this.options.isLeft=c,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft));a.ui.rangeSliderDraggable.prototype._setOption.apply(this,[b,c])},_checkRange:function(a){return!1===a||!this._isValidValue(a.min)&&!this._isValidValue(a.max)},_isValidValue:function(a){return"undefined"!=typeof a&&!1!==a&&parseFloat(a)!==a},_checkStep:function(a){return!1===
a||parseFloat(a)===a},_initElement:function(){a.ui.rangeSliderDraggable.prototype._initElement.apply(this);0===this.cache.parent.width||null===this.cache.parent.width?setTimeout(a.proxy(this._initElementIfNotDestroyed,this),500):(this._position(this._value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this);this._cacheParent()},_cacheParent:function(){var a=this.element.parent();this.cache.parent=
{element:a,offset:a.offset(),padding:{left:this._parsePixels(a,"paddingLeft")},width:a.width()}},_position:function(a){this._applyPosition(this._getPositionForValue(a))},_constraintPosition:function(a){return this._getPositionForValue(this._getValueForPosition(a))},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b]);this._left=b;this._setValue(this._getValueForPosition(b));this._triggerMouseEvent("moving")},_prepareEventData:function(){var b=a.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);
return b.value=this._value,b},_setValue:function(a){a!==this._value&&(this._value=a)},_constraintValue:function(a){if(a=Math.min(a,this._bounds().max),a=Math.max(a,this._bounds().min),a=this._round(a),!1!==this.options.range){var c=this.options.range.min||!1,d=this.options.range.max||!1;!1!==c&&(a=Math.max(a,this._round(c)));!1!==d&&(a=Math.min(a,this._round(d)));a=Math.min(a,this._bounds().max);a=Math.max(a,this._bounds().min)}return a},_round:function(a){return!1!==this.options.step&&0<this.options.step?
Math.round(a/this.options.step)*this.options.step:a},_getPositionForValue:function(a){if(!this.cache||!this.cache.parent||null===this.cache.parent.offset)return 0;var a=this._constraintValue(a),a=(a-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min),c=this.cache.parent.width,d=this.cache.parent.offset.left,e=this.options.isLeft?0:this.cache.width.outer;return this.options.symmetricPositionning?a*(c-2*this.cache.width.outer)+d+e:a*c+d-e},_getValueForPosition:function(a){return this._constraintValue(this._getRawValueForPositionAndBounds(a,
this.options.bounds.min,this.options.bounds.max))},_getRawValueForPositionAndBounds:function(a,c,d){var e,h,g=null===this.cache.parent.offset?0:this.cache.parent.offset.left;return this.options.symmetricPositionning?(a-=this.options.isLeft?0:this.cache.width.outer,e=this.cache.parent.width-2*this.cache.width.outer):(a+=this.options.isLeft?0:this.cache.width.outer,e=this.cache.parent.width),0===e?this._value:(h=(a-g)/e,h*(d-c)+c)},value:function(a){return"undefined"!=typeof a&&(this._cache(),a=this._constraintValue(a),
this._position(a)),this._value},update:function(){this._cache();var a=this._constraintValue(this._value),c=this._getPositionForValue(a);a!==this._value?(this._triggerMouseEvent("updating"),this._position(a),this._triggerMouseEvent("update")):c!==this.cache.offset.left&&(this._triggerMouseEvent("updating"),this._position(a),this._triggerMouseEvent("update"))},position:function(a){return"undefined"!=typeof a&&(this._cache(),a=this._constraintPosition(a),this._applyPosition(a)),this._left},add:function(a,
c){return a+c},substract:function(a,c){return a-c},stepsBetween:function(a,c){return!1===this.options.step?c-a:(c-a)/this.options.step},multiplyStep:function(a,c){return a*c},moveRight:function(a){var c;return!1===this.options.step?(c=this._left,this.position(this._left+a),this._left-c):(c=this._value,this.value(this.add(c,this.multiplyStep(this.options.step,a))),this.stepsBetween(c,this._value))},moveLeft:function(a){return-this.moveRight(-a)},stepRatio:function(){return!1===this.options.step?1:
this.cache.parent.width/((this.options.bounds.max-this.options.bounds.min)/this.options.step)}})})(jQuery);
(function(a){a.widget("ui.rangeSliderBar",a.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this);this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar");this.options.leftHandle.bind("initialize",
a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this));this.options.rightHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this));this._bindHandles();this._values=this.options.values;this._setWheelModeOption(this.options.wheelMode)},destroy:function(){this.options.leftHandle.unbind(".bar");this.options.rightHandle.unbind(".bar");this.options=
null;a.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(a,c){"range"===a?this._setRangeOption(c):"wheelSpeed"===a?this._setWheelSpeedOption(c):"wheelMode"===a&&this._setWheelModeOption(c)},_setRangeOption:function(a){if(("object"!=typeof a||null===a)&&(a=!1),!1!==a||!1!==this.options.range)this.options.range=!1!==a?{min:"undefined"==typeof a.min?this.options.range.min||!1:a.min,max:"undefined"==typeof a.max?this.options.range.max||!1:a.max}:!1,this._setLeftRange(),this._setRightRange()},
_setWheelSpeedOption:function(a){"number"==typeof a&&0<a&&(this.options.wheelSpeed=a)},_setWheelModeOption:function(a){(null===a||!1===a||"zoom"===a||"scroll"===a)&&(this.options.wheelMode!==a&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(a),this.options.wheelMode=a)},_bindMouseWheel:function(b){"zoom"===b?this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelZoom,this)):"scroll"===b&&this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelScroll,this))},
_setLeftRange:function(){if(!1===this.options.range)return!1;var a=this._values.max,c={min:!1,max:!1};c.max="undefined"!=typeof this.options.range.min&&!1!==this.options.range.min?this._leftHandle("substract",a,this.options.range.min):!1;c.min="undefined"!=typeof this.options.range.max&&!1!==this.options.range.max?this._leftHandle("substract",a,this.options.range.max):!1;this._leftHandle("option","range",c)},_setRightRange:function(){var a=this._values.min,c={min:!1,max:!1};c.min="undefined"!=typeof this.options.range.min&&
!1!==this.options.range.min?this._rightHandle("add",a,this.options.range.min):!1;c.max="undefined"!=typeof this.options.range.max&&!1!==this.options.range.max?this._rightHandle("add",a,this.options.range.max):!1;this._rightHandle("option","range",c)},_deactivateRange:function(){this._leftHandle("option","range",!1);this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--;0===this._waitingToInit&&this._initMe()},
_initMe:function(){this._cache();this.min(this._values.min);this.max(this._values.max);var a=this._leftHandle("position"),c=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:a});this.element.css("width",c-a)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(a,c){var d=Array.prototype.slice.call(c);return a[this.options.type].apply(a,
d)},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this);this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={};this.cache.rightHandle.width=this.options.rightHandle.width();this.cache.rightHandle.offset=this.options.rightHandle.offset();this.cache.leftHandle={};this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(b){a.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[b]);this._deactivateRange()},_mouseStop:function(b){a.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,
[b]);this._cacheHandles();this._values.min=this._leftHandle("value");this._values.max=this._rightHandle("value");this._reactivateRange();this._leftHandle().trigger("stop");this._rightHandle().trigger("stop")},_onDragLeftHandle:function(a,c){if(this._cacheIfNecessary(),c.element[0]===this.options.leftHandle[0]){if(this._switchedValues())return this._switchHandles(),this._onDragRightHandle(a,c),void 0;this._values.min=c.value;this.cache.offset.left=c.offset.left;this.cache.leftHandle.offset=c.offset;
this._positionBar()}},_onDragRightHandle:function(a,c){if(this._cacheIfNecessary(),c.element[0]===this.options.rightHandle[0]){if(this._switchedValues())return this._switchHandles(),this._onDragLeftHandle(a,c),void 0;this._values.max=c.value;this.cache.rightHandle.offset=c.offset;this._positionBar()}},_positionBar:function(){var a=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=a;this.element.css("width",a).offset({left:this.cache.leftHandle.offset.left})},
_onHandleStop:function(){this._setLeftRange();this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var a=this._values.min;return this._values.min=this._values.max,this._values.max=a,!0}return!1},_switchHandles:function(){var a=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle;this.options.rightHandle=a;this._leftHandle("option","isLeft",!0);this._rightHandle("option","isLeft",!1);this._bindHandles();this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",
a.proxy(this._onDragLeftHandle,this));this.options.rightHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",a.proxy(this._onDragRightHandle,this))},_constraintPosition:function(b){var c,d={};return d.left=a.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[b]),d.left=this._leftHandle("position",d.left),c=this._rightHandle("position",d.left+this.cache.width.outer-this.cache.rightHandle.width),d.width=c-d.left+this.cache.rightHandle.width,d},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,
[b.left]);this.element.width(b.width)},_mouseWheelZoom:function(b,c,d,e){if(!this.enabled)return!1;b=this._values.min+(this._values.max-this._values.min)/2;c={};d={};return!1===this.options.range||!1===this.options.range.min?(c.max=b,d.min=b):(c.max=b-this.options.range.min/2,d.min=b+this.options.range.min/2),!1!==this.options.range&&!1!==this.options.range.max&&(c.min=b-this.options.range.max/2,d.max=b+this.options.range.max/2),this._leftHandle("option","range",c),this._rightHandle("option","range",
d),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.zoomIn(e*this.options.wheelSpeed),!1},_mouseWheelScroll:function(b,c,d,e){return this.enabled?(!1===this._wheelTimeout?this.startScroll():clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.scrollLeft(e*this.options.wheelSpeed),!1):!1},_wheelStop:function(){this.stopScroll();this._wheelTimeout=!1},min:function(a){return this._leftHandle("value",
a)},max:function(a){return this._rightHandle("value",a)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange();this._triggerMouseEvent("stop");this._leftHandle().trigger("stop");this._rightHandle().trigger("stop")},scrollLeft:function(a){return a=a||1,0>a?this.scrollRight(-a):(a=this._leftHandle("moveLeft",a),this._rightHandle("moveLeft",a),this.update(),this._triggerMouseEvent("scroll"),void 0)},scrollRight:function(a){return a=a||1,0>a?this.scrollLeft(-a):
(a=this._rightHandle("moveRight",a),this._leftHandle("moveRight",a),this.update(),this._triggerMouseEvent("scroll"),void 0)},zoomIn:function(a){if(a=a||1,0>a)return this.zoomOut(-a);var c=this._rightHandle("moveLeft",a);a>c&&(c/=2,this._rightHandle("moveRight",c));this._leftHandle("moveRight",c);this.update();this._triggerMouseEvent("zoom")},zoomOut:function(a){if(a=a||1,0>a)return this.zoomIn(-a);var c=this._rightHandle("moveRight",a);a>c&&(c/=2,this._rightHandle("moveLeft",c));this._leftHandle("moveLeft",
c);this.update();this._triggerMouseEvent("zoom")},values:function(a,c){if("undefined"!=typeof a&&"undefined"!=typeof c){var d=Math.min(a,c),e=Math.max(a,c);this._deactivateRange();this.options.leftHandle.unbind(".bar");this.options.rightHandle.unbind(".bar");this._values.min=this._leftHandle("value",d);this._values.max=this._rightHandle("value",e);this._bindHandles();this._reactivateRange();this.update()}return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min();
this._values.max=this.max();this._cache();this._positionBar()}})})(jQuery);
(function(a){function b(b,d,e,h){this.label1=b;this.label2=d;this.type=e;this.options=h;this.handle1=this.label1[this.type]("option","handle");this.handle2=this.label2[this.type]("option","handle");this.cache=null;this.left=b;this.right=d;this.updating=this.initialized=this.moving=!1;this.Init=function(){this.BindHandle(this.handle1);this.BindHandle(this.handle2);"show"===this.options.show?(setTimeout(a.proxy(this.PositionLabels,this),1),this.initialized=!0):setTimeout(a.proxy(this.AfterInit,this),
1E3);this._resizeProxy=a.proxy(this.onWindowResize,this);a(window).resize(this._resizeProxy)};this.Destroy=function(){this._resizeProxy&&(a(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this.handle1.unbind(".positionner"),this.handle1=null,this.handle2.unbind(".positionner"),this.handle2=null,this.label1=null,this.label2=null,this.left=null,this.right=null);this.cache=null};this.AfterInit=function(){this.initialized=!0};this.Cache=function(){"none"!==this.label1.css("display")&&
(this.cache={},this.cache.label1={},this.cache.label2={},this.cache.handle1={},this.cache.handle2={},this.cache.offsetParent={},this.CacheElement(this.label1,this.cache.label1),this.CacheElement(this.label2,this.cache.label2),this.CacheElement(this.handle1,this.cache.handle1),this.CacheElement(this.handle2,this.cache.handle2),this.CacheElement(this.label1.offsetParent(),this.cache.offsetParent))};this.CacheIfNecessary=function(){null===this.cache?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),
this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2),this.CacheWidth(this.label1.offsetParent(),this.cache.offsetParent))};this.CacheElement=function(a,b){this.CacheWidth(a,b);this.CacheHeight(a,b);b.offset=a.offset();b.margin={left:this.ParsePixels("marginLeft",a),right:this.ParsePixels("marginRight",a)};b.border={left:this.ParsePixels("borderLeftWidth",a),right:this.ParsePixels("borderRightWidth",a)}};this.CacheWidth=
function(a,b){b.width=a.width();b.outerWidth=a.outerWidth()};this.CacheHeight=function(a,b){b.outerHeightMargin=a.outerHeight(!0)};this.ParsePixels=function(a,b){return parseInt(b.css(a),10)||0};this.BindHandle=function(b){b.bind("updating.positionner",a.proxy(this.onHandleUpdating,this));b.bind("update.positionner",a.proxy(this.onHandleUpdated,this));b.bind("moving.positionner",a.proxy(this.onHandleMoving,this));b.bind("stop.positionner",a.proxy(this.onHandleStop,this))};this.PositionLabels=function(){if(this.CacheIfNecessary(),
null!==this.cache){var a=this.GetRawPosition(this.cache.label1,this.cache.handle1),b=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.label1[e]("option","isLeft")?this.ConstraintPositions(a,b):this.ConstraintPositions(b,a);this.PositionLabel(this.label1,a.left,this.cache.label1);this.PositionLabel(this.label2,b.left,this.cache.label2)}};this.PositionLabel=function(a,b,c){var d,e,h,n=this.cache.offsetParent.offset.left+this.cache.offsetParent.border.left;0<=n-b?(a.css("right",""),a.offset({left:b})):
(d=n+this.cache.offsetParent.width,e=b+c.margin.left+c.outerWidth+c.margin.right,h=d-e,a.css("left",""),a.css("right",h))};this.ConstraintPositions=function(a,b){(a.center<b.center&&a.outerRight>b.outerLeft||a.center>b.center&&b.outerRight>a.outerLeft)&&(a=this.getLeftPosition(a,b),this.getRightPosition(a,b))};this.getLeftPosition=function(a,b){return a.left=(b.center+a.center)/2-a.cache.outerWidth-a.cache.margin.right+a.cache.border.left,a};this.getRightPosition=function(a,b){return b.left=(b.center+
a.center)/2+b.cache.margin.left+b.cache.border.left,b};this.ShowIfNecessary=function(){"show"===this.options.show||this.moving||!this.initialized||this.updating||(this.label1.stop(!0,!0).fadeIn(this.options.durationIn||0),this.label2.stop(!0,!0).fadeIn(this.options.durationIn||0),this.moving=!0)};this.HideIfNeeded=function(){!0===this.moving&&(this.label1.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||
0),this.moving=!1)};this.onHandleMoving=function(a,b){this.ShowIfNecessary();this.CacheIfNecessary();this.UpdateHandlePosition(b);this.PositionLabels()};this.onHandleUpdating=function(){this.updating=!0};this.onHandleUpdated=function(){this.updating=!1;this.cache=null};this.onHandleStop=function(){this.HideIfNeeded()};this.onWindowResize=function(){this.cache=null};this.UpdateHandlePosition=function(a){null!==this.cache&&(a.element[0]===this.handle1[0]?this.UpdatePosition(a,this.cache.handle1):this.UpdatePosition(a,
this.cache.handle2))};this.UpdatePosition=function(a,b){b.offset=a.offset;b.value=a.value};this.GetRawPosition=function(a,b){var c=b.offset.left+b.outerWidth/2,d=c-a.outerWidth/2,e=d-a.margin.left-a.border.left;return{left:d,outerLeft:e,top:b.offset.top-a.outerHeightMargin,right:d+a.outerWidth-a.border.left-a.border.right,outerRight:e+a.outerWidth+a.margin.left+a.margin.right,cache:a,center:c}};this.Init()}a.widget("ui.rangeSliderLabel",a.ui.rangeSliderMouseTouch,{options:{handle:null,formatter:!1,
handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_value:null,_create:function(){this.options.isLeft=this._handle("option","isLeft");this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block");this._createElements();this._toggleClass();this.options.handle.bind("moving.label",a.proxy(this._onMoving,this)).bind("update.label",a.proxy(this._onUpdate,this)).bind("switch.label",
a.proxy(this._onSwitch,this));"show"!==this.options.show&&this.element.hide();this._mouseInit()},destroy:function(){this.options.handle.unbind(".label");this._innerElement=this._valueContainer=this.options.handle=null;this.element.empty();this._positionner&&(this._positionner.Destroy(),this._positionner=null);a.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_createElements:function(){this._valueContainer=a("<div class='ui-rangeSlider-label-value' />").appendTo(this.element);this._innerElement=
a("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element)},_handle:function(){return this.options.handle[this.options.handleType].apply(this.options.handle,Array.prototype.slice.apply(arguments))},_setOption:function(a,b){"show"===a?this._updateShowOption(b):("durationIn"===a||"durationOut"===a||"delayOut"===a)&&this._updateDurations(a,b);this._setFormatterOption(a,b)},_setFormatterOption:function(a,b){"formatter"===a&&("function"==typeof b||!1===b)&&(this.options.formatter=b,this._display(this._value))},
_updateShowOption:function(a){this.options.show=a;"show"!==this.options.show?(this.element.hide(),this._positionner.moving=!1):(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels());this._positionner.options.show=this.options.show},_updateDurations:function(a,b){parseInt(b,10)===b&&(this._positionner.options[a]=b,this.options[a]=b)},_display:function(a){!1===this.options.formatter?this._displayText(Math.round(a)):this._displayText(this.options.formatter(a));
this._value=a},_displayText:function(a){this._valueContainer.text(a)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_positionLabels:function(){this._positionner.PositionLabels()},_mouseDown:function(a){this.options.handle.trigger(a)},_mouseUp:function(a){this.options.handle.trigger(a)},_mouseMove:function(a){this.options.handle.trigger(a)},_onMoving:function(a,b){this._display(b.value)},
_onUpdate:function(){"show"===this.options.show&&this.update()},_onSwitch:function(a,b){this.options.isLeft=b;this._toggleClass();this._positionLabels()},pair:function(a){null===this._positionner&&(this._positionner=new b(this.element,a,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),a[this.widgetName]("positionner",this._positionner))},positionner:function(a){return"undefined"!=typeof a&&(this._positionner=
a),this._positionner},update:function(){this._positionner.cache=null;this._display(this._handle("value"));"show"===this.options.show&&this._positionLabels()}})})(jQuery);
(function(a){a.widget("ui.editRangeSlider",a.ui.rangeSlider,{options:{type:"text",round:1},_create:function(){a.ui.rangeSlider.prototype._create.apply(this);this.element.addClass("ui-editRangeSlider")},destroy:function(){this.element.removeClass("ui-editRangeSlider");a.ui.rangeSlider.prototype.destroy.apply(this)},_setOption:function(b,c){("type"===b||"step"===b)&&this._setLabelOption(b,c);"type"===b&&(this.options[b]=null===this.labels.left?c:this._leftLabel("option",b));a.ui.rangeSlider.prototype._setOption.apply(this,
[b,c])},_setLabelOption:function(a,c){null!==this.labels.left&&(this._leftLabel("option",a,c),this._rightLabel("option",a,c))},_labelType:function(){return"editRangeSliderLabel"},_createLabel:function(b,c){var d=a.ui.rangeSlider.prototype._createLabel.apply(this,[b,c]);return null===b&&d.bind("valueChange",a.proxy(this._onValueChange,this)),d},_addPropertiesToParameter:function(a){return a.type=this.options.type,a.step=this.options.step,a.id=this.element.attr("id"),a},_getLabelConstructorParameters:function(b,
c){return this._addPropertiesToParameter(a.ui.rangeSlider.prototype._getLabelConstructorParameters.apply(this,[b,c]))},_getLabelRefreshParameters:function(b,c){return this._addPropertiesToParameter(a.ui.rangeSlider.prototype._getLabelRefreshParameters.apply(this,[b,c]))},_onValueChange:function(a,c){(c.isLeft?this._values.min!==this.min(c.value):this._values.max!==this.max(c.value))&&this._trigger("userValuesChanged")}})})(jQuery);
(function(a){a.widget("ui.editRangeSliderLabel",a.ui.rangeSliderLabel,{options:{type:"text",step:!1,id:""},_input:null,_text:"",_create:function(){a.ui.rangeSliderLabel.prototype._create.apply(this);this._createInput()},_setOption:function(b,c){"type"===b?this._setTypeOption(c):"step"===b&&this._setStepOption(c);a.ui.rangeSliderLabel.prototype._setOption.apply(this,[b,c])},_createInput:function(){this._input=a("<input type='"+this.options.type+"' />").addClass("ui-editRangeSlider-inputValue").appendTo(this._valueContainer);
this._setInputName();this._input.bind("keyup",a.proxy(this._onKeyUp,this));this._input.blur(a.proxy(this._onChange,this));"number"===this.options.type&&(!1!==this.options.step&&this._input.attr("step",this.options.step),this._input.click(a.proxy(this._onChange,this)));this._input.val(this._text)},_setInputName:function(){this._input.attr("name",this.options.id+(this.options.isLeft?"left":"right"))},_onSwitch:function(b,c){a.ui.rangeSliderLabel.prototype._onSwitch.apply(this,[b,c]);this._setInputName()},
_destroyInput:function(){this._input.remove();this._input=null},_onKeyUp:function(a){return 13===a.which?(this._onChange(a),!1):void 0},_onChange:function(){var a=this._returnCheckedValue(this._input.val());!1!==a&&this._triggerValue(a)},_triggerValue:function(a){this.element.trigger("valueChange",[{isLeft:this.options.handle[this.options.handleType]("option","isLeft"),value:a}])},_returnCheckedValue:function(a){var c=parseFloat(a);return isNaN(c)||isNaN(Number(a))?!1:c},_setTypeOption:function(a){"text"!==
a&&"number"!==a||this.options.type===a||(this._destroyInput(),this.options.type=a,this._createInput())},_setStepOption:function(a){this.options.step=a;"number"===this.options.type&&this._input.attr("step",!1!==a?a:"any")},_displayText:function(a){this._input.val(a);this._text=a},enable:function(){a.ui.rangeSliderLabel.prototype.enable.apply(this);this._input.attr("disabled",null)},disable:function(){a.ui.rangeSliderLabel.prototype.disable.apply(this);this._input.attr("disabled","disabled")}})})(jQuery);
steal.executed("lib/external/jQRangeSlider/jQEditRangeSlider-min.js");
jQuery.fn.extend({insertAtCursor:function(a){return this.each(function(){if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=a,this.focus();else if(this.selectionStart||"0"==this.selectionStart){var b=this.selectionStart,c=this.selectionEnd,d=this.scrollTop;this.value=this.value.substring(0,b)+a+this.value.substring(c,this.value.length);this.focus();this.selectionStart=b+a.length;this.selectionEnd=b+a.length;this.scrollTop=d}else this.value+=a,this.focus()})},insertAroundCursor:function(a,
b){return this.each(function(){if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=a+sel.text+b,this.focus();else if(this.selectionStart||"0"==this.selectionStart){var c=this.selectionStart,d=this.selectionEnd,e=this.scrollTop;this.value=this.value.substring(0,c)+a+this.value.substring(c,d)+b+this.value.substring(d,this.value.length);this.focus();this.selectionStart=c+a.length;this.selectionEnd=d+a.length;this.scrollTop=e}else this.value+=a+b,this.focus()})},selectRange:function(a,
b){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",a);c.select()}})}});steal.executed("lib/external/jquery.textarea.caret/jquery.textarea.caret.js");steal("vendor/sffjs/sffjs.js");steal.executed("lib/external/stealsffjs.js");
(function(a){"undefined"!==typeof module&&module.exports?module.exports=a():"function"===typeof define&&define.amd?define(a):(sffjs=a(),sffjs.unsafe())}).call(this,function(){function a(a){return 10>a?"0"+a:a}function b(a){for(var b in k)null==a[b]&&(a[b]=k[b]);a.f=a.f||a.D+" "+a.t;a.F=a.F||a.D+" "+a.T;a.g=a.g||a.d+" "+a.t;a.G=a.G||a.d+" "+a.T;a.m=a.M;a.y=a.Y;return a}function c(){var a;o&&(a=o.toUpperCase(),a=t[a]||t[a.split("-")[0]]);j.LC=n=a||l}function d(a,b){var c=Math.pow(10,b||0);return""+
Math.round(Math.abs(a)*c)/c}function e(a){var b=a.indexOf(".");return 0>b?a.length:b}function h(a,b){for(var c=0,d=b.length;c<d;c++)a.push(b.charAt(c)),1<a.g&&1===a.g--%3&&a.push(a.t)}function g(a,b,c,f,g,i){var j=[];j.t=i;0>a&&j.push("-");for(var a=d(a,f),f=j.g=e(a),i=a,k=i.indexOf("."),i=0>k?0:i.length-k-1,b=b-f;0<b--;)h(j,"0");h(j,a.substr(0,f));if(c||i){j.push(g);h(j,a.substr(f+1));for(c-=i;0<c--;)h(j,"0")}return j.join("")}function f(a,b){var c=n._r,f=n._t,a=Number(a);if(!isFinite(a))return""+
a;if(!b&&"0"!==b)return g(a,0,0,10,c);var i=b.match(/^([a-zA-Z])(\d*)$/);if(i){var j=i[1].toUpperCase(),k=parseInt(i[2],10),k=15<k?15:k;switch(j){case "D":return g(a,isNaN(k)?1:k,0,0);case "F":f="";case "N":return g(a,1,isNaN(k)?2:k,isNaN(k)?2:k,c,f);case "G":case "E":for(var l=0,o=Math.abs(a);10<=o;)o/=10,l++;for(;1>o;)o*=10,l--;var i=i[1],t=3;if("G"===j){if(-5<l&&(!k||l<k))return g(a,1,k?k-(0<l?l+1:1):0,k?k-(0<l?l+1:1):10,c);i="G"===i?"E":"e";t=2;j=(k||1)-1;k=(k||11)-1}else j=k=isNaN(k)?6:k;0<=
l&&(i+="+");0>a&&(o*=-1);return g(""+o,1,j,k,c,f)+i+g(l,t,0);case "P":return g(100*a,1,isNaN(k)?2:k,isNaN(k)?2:k,c,f)+" %";case "X":l=Math.round(a).toString(16);"X"===i[1]&&(l=l.toUpperCase());for(k-=l.length;0<k--;)l="0"+l;return l;case "C":b=n._c;c=n._cr;f=n._ct;break;case "R":return""+a}}-1!==b.indexOf(",.")&&(a/=1E3);-1!==b.indexOf("%")&&(a*=100);k=b.split(";");0>a&&1<k.length?(a*=-1,b=k[1]):b=k[!a&&2<k.length?2:0];for(var k=a,l=b,H=b.match(/^[^\.]*[0#],[0#]/)&&f,C=0,N=f=-1,N=0,o=-1,T=0,i=1,K,
j=l.length,G=[],t=0;t<j;t++)if(K=l.charAt(t),"'"===K||'"'===K){if(t=l.indexOf(K,t+1),0>t)break}else if("\\"===K)t++;else{if("0"===K||"#"===K)N+=T,"0"===K&&(T?o=N:0>f&&(f=C)),C+=!T;T=T||"."===K}f=0>f?1:C-f;0>k&&G.push("-");k=d(k,N);N=e(k);t=N-C;G.g=Math.max(N,f);G.t=H;for(H=0;H<j;H++)if(K=l.charAt(H),"'"===K||'"'===K){K=l.indexOf(K,H+1);G.push(l.substring(H+1,0>K?l.length:K));if(0>K)break;H=K}else if("\\"===K)G.push(l.charAt(H+1)),H++;else if("#"===K||"0"===K){if(t<N)0<=t?(i&&h(G,k.substr(0,t)),h(G,
k.charAt(t))):t>=N-f&&h(G,"0"),i=0;else if(0<o--||t<k.length)h(G,t>=k.length?"0":k.charAt(t));t++}else"."===K?(k.length>++t||0<o)&&G.push(c):","!==K&&G.push(K);return G.join("")}function i(b,c){var d=b.getFullYear(),e=b.getMonth(),f=b.getDate(),g=b.getDay(),h=b.getHours(),i=b.getMinutes(),j=b.getSeconds(),c=c||"G";1===c.length&&(c=n[c]||c);var k=n._Mg&&/(^|[^d])d(?!dd)/.test(c)?n._Mg:n._M;return c.replace(/(\\.|'[^']*'|"[^"]*"|d{1,4}|M{1,4}|yyyy|yy|HH?|hh?|mm?|ss?|tt?)/g,function(b){return"dddd"===
b?n._D[g]:"ddd"===b?n._d?n._d[g]:n._D[g].substr(0,3):"dd"===b?a(f):"d"===b?f:"MMMM"===b?k[e]:"MMM"===b?n._m?n._m[e]:n._M[e].substr(0,3):"MM"===b?a(e+1):"M"===b?e+1:"yyyy"===b?d:"yy"===b?(""+d).substr(2):"HH"===b?a(h):"H"===b?h:"hh"===b?a((h-1)%12+1):"h"===b?(h-1)%12+1:"mm"===b?a(i):"m"===b?i:"ss"===b?a(j):"s"===b?j:"tt"===b?12>h?n._am:n._pm:"t"===b?(12>h?n._am:n._pm).charAt(0):b.substr(1,b.length-1-("\\"!==b.charAt(0)))})}function j(a,b,c,d){var e=arguments;return a.replace(/\{((\d+|[a-zA-Z_$]\w*(?:\.[a-zA-Z_$]\w*|\[\d+\])*)(?:\,(-?\d*))?(?:\:([^\}]*(?:(?:\}\})+[^\}]+)*))?)\}|(\{\{)|(\}\})/g,
function(){var a=arguments,b;if(a[5])b="{";else if(a[6])b="}";else{var c=a[2];b=a[3];var d=a[4]&&a[4].replace(/\}\}/g,"}").replace(/\{\{/g,"{"),g=e,h=parseInt(c,10),a="";if(isNaN(h)){g=g[1];if(null!=g)for(var h=/(\.([a-zA-Z_$]\w*)|\[(\d+)\])/g,j=/^[a-zA-Z_$]\w*/.exec(c),g=g[j[0]];null!=g&&(j=h.exec(c));)g=g[j[2]||Number(j[3])];c=g}else{if(h>g.length-2)throw"Missing argument";c=g[h+1]}c=null!=c?c.__Format?c.__Format(d):"number"===typeof c?f(c,d):"[object Date]"===Object.prototype.toString.call(c)||
c instanceof Date?i(c,d):""+c:"";b=Number(b)||0;for(d=Math.abs(b)-c.length;0<d--;)a+=" ";b=0>b?c+a:a+c}return b})}var k={name:"",d:"MM/dd/yyyy",D:"dddd, dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",M:"MMMM dd",Y:"yyyy MMMM",s:"yyyy-MM-ddTHH:mm:ss",_M:"January February March April May June July August September October November December".split(" "),_D:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),_r:".",_t:",",_c:"\u00a4#,0.00",_ct:",",_cr:".",_am:"AM",_pm:"PM"},l=b({}),n,o="undefined"!==
typeof navigator&&(navigator.systemLanguage||navigator.language)||"",t={};j.unsafe=function(){Number.prototype.__Format=function(a){return f(this,a)};Date.prototype.__Format=function(a){return i(this,a)};String.__Format=j;for(var a=[Date.prototype,Number.prototype,String],b=0;b<a.length;b++)a[b].format=a[b].format||a[b].__Format};j.version="1.10.0";j.setCulture=function(a){o=a;c()};j.registerCulture=function(a){t[a.name.toUpperCase()]=b(a);c()};c();return j});steal.executed("vendor/sffjs/sffjs.js");
steal("lib/external/SmartSidebar/js/jquery.smartsidebar.js","lib/external/SmartSidebar/css/smartsidebar.css");steal.executed("lib/external/SmartSidebar/stealSmartSidebar.js");
(function(a){function b(b,f,i){var j=f.title||"Untitled";this.dockUndockImageHeight=24;f.isDocked={};f.isDocked[i]=!1;var k="left"==i?"fa fa-caret-right":"fa fa-caret-left",l=a('<div class="navigation-sidebar-'+i+'"><div>'),k=a('<div class="navigationPane-'+i+'"><div class="button_wrapper_docked"><div class="btn-gradient btn-gradient-navpane"><div class="icon '+k+'"></div><div/></div></div>'),n=a('<div class="dockablePanel-'+i+'"></div>');n.css("width",f.sidebarWidth);l.append(k);l.append(n);k=b.children().detach();
b.append(l);e(b,k,j,i);d(b,j,i);c(b,f,i);f.autoHeight&&(f.sidebarHeight=h(f.autoHeightMargin),a(window).resize(function(){setTimeout(function(){a(".scrollable-panel",b).css("max-height",h(f.autoHeightMargin))},500)}));a(".scrollable-panel",b).css("max-height",f.sidebarHeight)}function c(b,c,d){a(b).on("click",".navigation-sidebar-"+d,function(){c.isDocked[d]||(a(".navigationPane-"+d,b).hide(),a(".dockablePanel-"+d,b).find(".dockstate-"+d).removeClass("dockstate-"+d).addClass("undockstate-"+d).find(".dockPanelTitleImage").removeClass("dockPanelTitleImage").addClass("undockPanelTitleImage"),
"left"==d?a(".dockablePanel-"+d,b).css({display:"block",left:-settings.sidebarWidth+"px"}).animate({left:"0px"},400):a(".dockablePanel-"+d,b).css({display:"block",right:-settings.sidebarWidth+"px"}).animate({right:"0px"},400),setTimeout(function(){c.isDocked[d]=!0},400),settings.dataContainerElement&&("left"===d?settings.dataContainerElement.css({"margin-left":settings.sidebarWidth+2*settings.dockPanelMargin+"px"}):settings.dataContainerElement.css({"margin-right":settings.sidebarWidth+2*settings.dockPanelMargin+
"px"})),b.css({width:settings.sidebarWidth+"px"}),"right"===d&&b.css({"margin-left":-settings.sidebarWidth+"px"}),c.callBackFunctionOnShow&&"function"===typeof c.callBackFunctionOnShow&&c.callBackFunctionOnShow())});a(b).on("click",".undockstate-"+d,function(){"right"==d?a(".dockablePanel-"+d,b).animate({right:-settings.sidebarWidth+"px"},400):a(".dockablePanel-"+d,b).animate({left:-settings.sidebarWidth+"px"},400);a(".navigationPane-"+d,b).show();setTimeout(function(){a(".dockablePanel-"+d,b).css("display",
"none");a(".dockablePanel-"+d,b).find(".undockstate-"+d).removeClass("undockstate-"+d).addClass("dockstate-"+d).find(".undockPanelTitleImage").removeClass("undockPanelTitleImage").addClass("dockPanelTitleImage");c.isDocked[d]=!1},300);settings.dataContainerElement&&("left"===d?settings.dataContainerElement.css({"margin-left":settings.dockPanelWidth+2*settings.dockPanelMargin+"px"}):settings.dataContainerElement.css({"margin-right":settings.dockPanelWidth+2*settings.dockPanelMargin+"px"}));b.css({width:settings.dockPanelWidth+
"px"});"right"===d&&b.css({"margin-left":-settings.dockPanelWidth+"px"});c.callBackFunctionOnHide&&"function"===typeof c.callBackFunctionOnHide&&c.callBackFunctionOnHide()})}function d(b,c,d){a(".navigationPane-"+d,b).append('<p class="ssb-vertical-text">'+c+"</p>");c=settings.title;a("body").append("<span class='ssb-dummy-text'></span>");a(".ssb-dummy-text").html(c);c=a(".ssb-dummy-text").outerWidth(!0);a(".ssb-dummy-text").remove();c+=this.dockUndockImageHeight;a(".navigationPane-"+d,b).css("height",
c+"px");a(".navigationPane-"+d,b).addClass("dockPanelMargin");a(".dockablePanel-"+d,b).css("min-height",c+"px");a(".navigationPane-"+d,b).css("background",settings.bgColor);a(".navigationPane-"+d,b).css("color",settings.color);a(".docPanelTitle",b).css("background",settings.bgColor);a(".docPanelTitle",b).css("color",settings.color)}function e(b,c,d,e){a(".dockablePanel-"+e,b).append('<div class="scrollable-panel"></div>');a(".dockablePanel-"+e+" .scrollable-panel",b).html(c);a(".dockablePanel-"+e,
b).addClass("dockPanelMargin");a(".dockablePanel-"+e,b).prepend('<div class="docPanelTitle dockstate-'+e+'"><div class="docPanelTitleText">'+d+'</div><div class="button_wrapper" style="float:right"><i class="fa fa-times"><i/></div>')}function h(b){b=a(window).height()-b-45;return 400<b?b:400}a.fn.smartsidebar=function(c){settings=a.extend({},{title:void 0,position:void 0,dataContainerElement:void 0,sidebarWidth:230,sidebarHeight:600,dockPanelWidth:30,dockPanelMargin:5,callBackFunctionDefault:void 0,
callBackFunctionOnShow:void 0,callBackFunctionOnHide:void 0,isDocked:void 0,autoHeight:!1,autoHeightMargin:0,bgColor:"#613474",color:"#fff"},c);var d=settings.position||"left";this.each(function(){var c=a(this);a(c).off("click",".dockstate-"+d);a(c).off("click",".undockstate-"+d);b(c,settings,d);settings.dataContainerElement&&(settings.dataContainerElement.css({"margin-left":"0px","margin-right":"0px","margin-top":"0px","margin-bottom":"0px"}),"right"===d?settings.dataContainerElement.css({"margin-right":settings.dockPanelWidth+
2*settings.dockPanelMargin+"px"}):settings.dataContainerElement.css({"margin-left":settings.dockPanelWidth+2*settings.dockPanelMargin+"px"}));c.css({width:settings.dockPanelWidth+"px"});"right"===d&&c.css({"margin-left":-settings.dockPanelWidth+"px"});settings.callBackFunctionDefault&&"function"===typeof settings.callBackFunctionDefault&&settings.callBackFunctionDefault()});this.destroy=function(){return this.each(function(){a(this).find(".navigation-sidebar-"+d).remove()})};this.show=function(){return this.each(function(){a(this).find(".navigation-sidebar-"+
d).click()})};this.hide=function(){return this.each(function(){a(this).find(".undockstate-"+d).click()})};return this}})(jQuery);steal.executed("lib/external/SmartSidebar/js/jquery.smartsidebar.js");
(function(a){a.fn.inputHints=function(){function b(b){""==jQuery(b).val()&&jQuery(b).val(a(b).attr("placeholder")).addClass("hint")}function c(b){a(b).val()==a(b).attr("placeholder")&&a(b).val("").removeClass("hint")}var d=a(this);d.each(function(){b(this)});d.closest("form").submit(function(){d.each(function(){c(this)});return!0});return d.focus(function(){c(this)}).blur(function(){b(this)})}})(jQuery);steal.executed("lib/external/InputHints/jquery.inputhints.js");
steal("lib/external/pivot/css/webix.css","lib/external/pivot/css/pivot.css").then("lib/external/pivot/js/webix.js").then("lib/external/pivot/js/pivot.js");steal.executed("lib/external/pivot/StealPivot.js");var Sentrana={Controllers:{},Models:{},Enums:{}};Sentrana.Enums.FILTER_TYPE_RANGE="RANGE";Sentrana.Enums.FILTER_TYPE_COLUMN="COLUMN";Sentrana.Enums.CLASS_SELECTED="selected";Sentrana.Enums.ATTR_LEVEL_ONE_BUTTON="l1btn";Sentrana.Enums.ATTR_LEVEL_TWO_BUTTON="l2btn";Sentrana.Enums.ColumnType={};
Sentrana.Enums.ColumnType.ATTRIBUTE=0;Sentrana.Enums.ColumnType.METRIC=1;Sentrana.Enums.ENABLE_METRIC_ATTRIBUTE_MAPPING_TOGGLE=!0;Sentrana.Enums.PIVOT_EXPORT_URL="ExportPivotTable";
Sentrana.Enums.ErrorCode={WRONG_PASSWORD:"WRONG_PASSWORD",PREVIOUSLY_USED_PASSWORD:"PREVIOUSLY_USED_PASSWORD",PASSWORD_CANNOT_BE_EMPTY:"PASSWORD_CANNOT_BE_EMPTY",PASSWORD_FORMAT_IS_INVALID:"PASSWORD_FORMAT_IS_INVALID",PASSWORD_POLICY_VIOLATED:"PASSWORD_POLICY_VIOLATED",REPOSITORY_RETRIEVE_FAILED:"REPOSITORY_RETRIEVE_FAILED",UNKNOWN_ERROR:"UNKNOWN_ERROR",REPORT_NAME_IN_USE:"REPORT_NAME_IN_USE",BOOKLET_NAME_IN_USE:"BOOKLET_NAME_IN_USE",DERIVED_COLUMN_NAME_IN_USE:"DERIVED_COLUMN_NAME_IN_USE",INCORRECT_EMAIL:"INCORRECT_EMAIL",
INVALID_CREDENTIALS:"INVALID_CREDENTIALS",INVALID_SESSION:"INVALID_SESSION",PASSWORD_EXPIRED:"PASSWORD_EXPIRED",NO_DATA_RETURNED:"NO_DATA_RETURNED",SAVED_FILTER_GROUP_NAME_IN_USE:"Filter group name already in use",NO_SAVED_FILTER_GROUP_FOUND:"Filter group not found",KEY_NOT_FOUND:"KEY_NOT_FOUND",ELEMENT_NOT_FOUND:"ELEMENT_NOT_FOUND",UNABLE_TO_DRILL_DOWN:"UNABLE_TO_DRILL_DOWN",SERVICE_ERROR_OCCURRED:"SERVICE_ERROR_OCCURRED"};Sentrana.Enums.ApplicationRoles={BIQ_USER:"BIQ_USER",BIQ_ADMIN:"BIQ_ADMIN"};
Sentrana.ActionLog={ActionNames:{SaveReport:"Save Report",ViewReport:"View Report",ViewBooklet:"View Booklet",ViewBookletReport:"View Booklet Report",DownloadTable:"Download Table",ExportChart:"Export Chart",ExportGrid:"Export Grid",PrintGrid:"Print Grid",PrintChart:"Print Chart",PrintReport:"Print Report",AddComment:"Add Comment",RepositoriesAccessed:"Repositories Accessed",HelpAccesss:"Help Documentation Access",ViewRepositoryInformation:"View Repository Information"},Contexts:{BuilderPage:"Builder Page",
SavedReport:"Saved Report",SavedBookLet:"Saved Booklet",SharedReport:"Shared Report",SharedBooklet:"Shared Booklet",RepositoryInformation:"Repository Information",RepositorySelection:"Repository Selection page",ReportOption:"Report Option",UserOptions:"User Options"},ElementTypes:{Report:"Report",Booklet:"Booklet",Chart:"Chart",Grid:"Grid",Repository:"Repository",Link:"Link",Dialog:"Dialog",HelpPage:"Help Page"}};Sentrana.RegEx={};Sentrana.RegEx.RE_METRIC_IN_FORMULA=/\[[^\[\]]+\]|f\(\d+\)/gim;
Sentrana.RegEx.RE_VALID_FORMULA=/^(([+\-]*((\d+\.\d+|\d+|\.\d+)|(\[[^\[\]\|]+\])))([+\-\/\*]((\d+\.\d+|\d+|\.\d+)|(\[[^\[\]\|]+\]))){1,})*$/;Sentrana.RegEx.RE_MATCH_VALID_ENTRY=/\[.*?\]|[^\[\]\s]/g;Sentrana.$extends=function(a,b){a.prototype=new b;a.prototype.constructor=a};
Sentrana.formatValue=function(a,b){if(void 0===a||""===a)return"";var b=b||"text",c="dollars"==b,d="currency"==b||"number"==b||"dollars"==b,e="currency"==b||"dollars"==b,h="percentage"==b,c="currency"==b||"percentage"==b?Number(a).toFixed(2):c?Number(a).toFixed(0):""+a;if(d)for(d=/(-?\d+)(\d{3})/;d.test(c);)c=c.replace(d,"$1,$2");e&&(c="$"+c);h&&(c="%"+c);return c};
(function(){var a="January February March April May June July August September October November December".split(" "),b="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");Sentrana.formatTime=function(a){var b=a.getHours(),e=11<b?"pm":"am",b="am"===e?0===b?"12":b:12===b?b:b-12,a=a.getMinutes();return b+":"+(0===a?"00":10>a?"0"+a:a)+e};Sentrana.fillValue=function(a,b,e,h){b=b.toString();for(e-=b.length;0<e;)b="left"===h.toString().toLowerCase()?a+b:b+a,e--;return b};Sentrana.formatDateValue=
function(a,b){if(void 0===a||""===a)return"";var b=b||"dd-mm-yyyy",e="January February March April May June July August September October November December".split(" "),h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),g;try{return g=-1!=a.toString().indexOf("/Date(")?new Date(parseInt(a.replace("/Date(","").replace(")/",""),10)):a,b.replace(/(yyyy|yy|MMMM|MMM|MM|M|dddd|ddd|dd|d|HH|H|hh|h|mm|m|ss|s|tt|t)/gi,function(a){switch(a){case "yyyy":return g.getFullYear();case "yy":return g.getFullYear().toString().substr(2);
case "MMMM":return e[g.getMonth()];case "MMM":return e[g.getMonth()].substr(0,3);case "MM":return Sentrana.fillValue("0",g.getMonth()+1,2,"left");case "M":return g.getMonth();case "dddd":return h[g.getDay()];case "ddd":return h[g.getDay()].substr(0,3);case "dd":return Sentrana.fillValue("0",g.getDate(),2,"left");case "d":return g.getDate();case "HH":return Sentrana.fillValue("0",g.getHours(),2,"left");case "H":return g.getHours();case "hh":var b;return Sentrana.fillValue("0",(b=g.getHours()%12)?b:
12,2,"left");case "h":var c;return(c=g.getHours()%12)?c:12;case "mm":return Sentrana.fillValue("0",g.getMinutes(),2,"left");case "m":return g.getMinutes();case "ss":return Sentrana.fillValue("0",g.getSeconds(),2,"left");case "s":return g.getSeconds();case "tt":return 12>g.getHours()?"AM":"PM";case "t":return 12>g.getHours()?"A":"P";default:return""}})}catch(f){return""}};Sentrana.formatDate=function(c){return b[c.getDay()]+", "+a[c.getMonth()]+" "+c.getDate()+", "+c.getFullYear()+" at "+Sentrana.formatTime(c)};
Sentrana.formatMonth=function(b){return a[b.getMonth()]+" "+b.getFullYear()};Sentrana.formatCommentDate=function(a){return a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear()};Sentrana.formatCommentTime=function(a){return Sentrana.formatTime(a)};$.fn.getCursorPosition=function(){var a=$(this).get(0),b=0;if("selectionStart"in a)b=a.selectionStart;else if("selection"in document){var e,h,g;a.focus();if((h=document.selection.createRange())&&h.parentElement()===a)g=a.value.length,e=a.value.replace(/\r\n/g,
""),b=a.createTextRange(),b.moveToBookmark(h.getBookmark()),h=a.createTextRange(),h.collapse(!1),-1<b.compareEndPoints("StartToEnd",h)?b=a.value.replace(/\r\n/g,"\n").length:(b=-b.moveStart("character",-g),b+=e.slice(0,b).split("\n").length-1)}return b};$.fn.setCursorPosition=function(a){this.each(function(b,e){if(e.setSelectionRange)e.setSelectionRange(a,a);else if(e.createTextRange){var h=e.createTextRange();h.collapse(!0);h.moveEnd("character",a);h.moveStart("character",a);h.select()}});return this};
Sentrana.getChartTypeClass=function(a){switch(a){case "line":return"linechart";case "pie":return"piechart";case "bar":return"barchart";case "column":return"columnchart";case "scatter":return"scatterchart";case "stacked bar":return"stackedbarchart";case "stacked column":return"stackedcolumnchart";default:return"emptychart"}}})();$.fn.toggleSrc=function(a,b){return this.attr("src",function(c,d){return-1!=d.indexOf(a)?d.replace(a,b):d.replace(b,a)})};
Sentrana.ConfirmDialog=function(a,b,c,d,e){$("body").find("#sentrana-common-confirm-dialog").remove();$("body").append("<div id='sentrana-common-confirm-dialog'></div>");$("#sentrana-common-confirm-dialog").sentrana_confirm_dialog({title:a,message:b,onOk:c,onCancel:function(){d&&"function"===typeof d&&(d(),$("body").find("#sentrana-common-confirm-dialog").remove())},closeOnEscape:void 0!==e?e:!0})};
Sentrana.ConfirmDialogYNC=function(a,b,c,d,e,h){$("body").append("<div id='sentrana-common-confirm-dialog'></div>");$("#sentrana-common-confirm-dialog").sentrana_confirm_yes_no_cancel_dialog({title:a,message:b,closeOnEscape:void 0!==h?h:!0,onYes:c,onCancel:function(){e&&"function"===typeof e&&e();$("body").find("#sentrana-common-confirm-dialog").remove()},onNo:d})};
Sentrana.AlertDialog=function(a,b,c,d,e,h){$("body").find("#sentrana-common-alert-dialog").remove();$("body").append('<div id="sentrana-common-alert-dialog"></div>');$("#sentrana-common-alert-dialog").sentrana_alert_dialog({title:a,message:b,onOk:function(){c&&"function"===typeof c&&(h?c.call(h):c())},closeOnEscape:d})};
jQuery.fn.hint=function(a,b){b||(b="#aaa");return this.each(function(){var c=jQuery(this),d=c.css("color"),e=function(){""===c.val()||c.virgin?c.val(a).css("color",b).virgin=!0:c.css("color",d).virgin=!1},h=function(){c.virgin&&(c.val("").css("color",d).virgin=!1)};c.bind("blur change",e);c.bind("click focus",h);e();c.closest("form").bind("submit",h)})};Sentrana.isSameDay=function(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()};
Sentrana.wasMomentsAgo=function(a){return a.valueOf()>(new Date).valueOf()-36E5};Sentrana.isToday=function(a){return this.isSameDay(a,new Date)};Sentrana.isYesterday=function(a){return this.isSameDay(a,new Date((new Date).valueOf()-864E5))};Sentrana.getFirstDayOfWeek=function(a,b){var c=a.getDay()+7*b,c=new Date(a.valueOf()-864E5*c);c.setHours(0,0,0,0);return c};Sentrana.isThisWeek=function(a){return this.isSameDay(this.getFirstDayOfWeek(a,0),this.getFirstDayOfWeek(new Date,0))};
Sentrana.isLastWeek=function(a){return this.isSameDay(this.getFirstDayOfWeek(a,0),this.getFirstDayOfWeek(new Date,1))};Sentrana.removeWhiteSpace=function(a){return(a=a.match(Sentrana.RegEx.RE_MATCH_VALID_ENTRY))?a.join(""):""};Sentrana.isObject=function(a){return"object"===typeof a&&null!==a&&a};
Sentrana.getDateDiff=function(a,b,c){var a=(new Date(a)).getTime(),b="now"==b?(new Date).getTime():(new Date(b)).getTime(),d=b-a;if(isNaN(d))return NaN;switch(c){case "years":return b.getFullYear()-a.getFullYear();case "months":return 12*b.getFullYear()+b.getMonth()-(12*a.getFullYear()+a.getMonth());case "weeks":return Math.floor(d/6048E5);case "days":return Math.floor(d/864E5);case "hours":return Math.floor(d/36E5);case "minutes":return Math.floor(d/6E4);case "seconds":return Math.floor(d/1E3)}};
Sentrana.getMessageText=function(a,b){return b?(b="object"===typeof b?b:Array.prototype.slice.call(arguments,1),a.replace(/\{\{|\}\}|\{(\w+)\}/g,function(a,d){return"{{"==a?"{":"}}"==a?"}":b[d]})):a};Sentrana.getMaxViewDialogDimension=function(){var a=$(window).width()-10,b=$(window).height()-10;return{width:a,height:b}};Sentrana.EnableWindowScroll=function(){$("body").removeClass("disable-window-scroll")};Sentrana.DisableWindowScroll=function(){$("body").addClass("disable-window-scroll")};
Sentrana.mergeSecondArrayWithFirstArrayByProperty=function(a,b,c){var d=$.merge([],a);$.each(b,function(a,b){var g=$.grep(d,function(a){return a[c]==b[c]});g&&0<g.length?$.extend(!0,g[0],b):d.push(b)});return d};$.extend(!0,$.fn.dataTable.defaults,{sDom:"<'table-header clearfix'<'table-caption'><'DT-lf-right'<'DT-per-page'l><'DT-search'f><'buttonBar grid-button-bar'>>r>t<'table-footer clearfix'<'DT-label'i><'DT-pagination'p>>",oLanguage:{sLengthMenu:"Per page: _MENU_",sSearch:""}});steal.executed("js/Sentrana.js");
$.extend(Sentrana,{sessionId:"",isiPad:function(){return null!==window.navigator.userAgent.match(/iPad/i)},addDatepicker:function(a){Sentrana.isiPad()||$("#"+a).datepicker({dateFormat:"yy-mm-dd"})},setCookie:function(a,b){document.cookie=a+"="+encodeURIComponent(b)},addServiceBaseURL:function(a){return a},mapOrganizationModel:function(a){a&&(Sentrana.CurrentOrganization.attr("id",a.id),Sentrana.CurrentOrganization.attr("name",a.name),Sentrana.CurrentOrganization.attr("status",a.status),Sentrana.CurrentOrganization.attr("userCount",
a.userCount),Sentrana.CurrentOrganization.attr("groupCount",a.groupCount),Sentrana.CurrentOrganization.attr("roleCount",a.roleCount),Sentrana.CurrentOrganization.attr("applications",a.applications),Sentrana.CurrentOrganization.attr("dataFilterInstances",a.dataFilterInstances))},mapUserModel:function(a){var b=new Sentrana.Models.UserModel;b.attr("id",a.id);b.attr("firstName",a.firstName);b.attr("lastName",a.lastName);b.attr("userName",a.userName);b.attr("password",a.password);b.attr("organization",
a.organization);b.attr("email",a.email);b.attr("activeStatus",a.activeStatus);b.attr("groupMemberships",a.groupMemberships);b.attr("appRoles",a.appRoles);b.attr("dataFilterInstances",a.dataFilterInstances);return b},mapGroupModel:function(a){var b=new Sentrana.Models.GroupModel;b.attr("id",a.id);b.attr("name",a.name);b.attr("groupPath",a.groupPath);b.attr("organization",Sentrana.CurrentOrganization);b.attr("groupType",a.groupType);b.attr("parentGroup",a.parentGroup);b.attr("users",a.users);b.attr("childGroups",
a.childGroups);b.attr("appRoles",a.appRoles);b.attr("dataFilterInstances",a.dataFilterInstances);return b},showLoadingMessage:function(){!Sentrana.preventLoadingMessage&&!Sentrana.isLoaderVisible()&&($("#spinner").center(!1),$("#spinner").show(),$(".cover_background").show())},closeLoadingMessage:function(){$("#spinner").hide();$(".cover_background").hide()},isLoaderVisible:function(){return $("#spinner").is(":visible")&&$(".cover_background").is(":visible")},getMessageText:function(a,b){return b?
(b="object"===typeof b?b:Array.prototype.slice.call(arguments,1),a.replace(/\{\{|\}\}|\{(\w+)\}/g,function(a,d){return"{{"===a?"{":"}}"===a?"}":b[d]})):a}});
$.extend(Object,{keys:Object.keys||function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),d=c.length;return function(e){if("object"!==typeof e&&("function"!==typeof e||null===e))throw new TypeError("Object.keys called on non-object");var h=[],g;for(g in e)a.call(e,g)&&h.push(g);if(b)for(g=0;g<d;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()});
$.extend(String.prototype,{escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},format:String.prototype.format||function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!==typeof a[c]?a[c]:b})},toCamelCase:String.prototype.toCamelCase||function(){return this.trim().replace(/^([a-z])|[ -]([a-z])/gi,function(a,b,c){return b?b.toLowerCase():c.toUpperCase()})},toPascalCase:String.prototype.toPascalCase||
function(){return this.trim().replace(/^([a-z])|[- ]([a-z])/gi,function(a,b,c){return(b||c).toUpperCase()})}});$.extend(Array.prototype,{match:Array.prototype.match||function(a,b){return $.grep(this,function(c){return c[a]===b})},first:Array.prototype.first||function(a){return $.grep(this,a)[0]},contains:Array.prototype.contains||function(a){var b,c=this.length;for(b=0;b<c;b++)if(void 0!==this[b].Name&&this[b].Name===a.Name||void 0!==this[b].name&&this[b].name===a.name)return!0;return!1}});
$.extend(can.Map.List.prototype,{match:can.Map.List.prototype.match||function(a,b){return $.grep(this,function(c){return c[a]===b})},first:can.Map.List.prototype.first||function(a){return $.grep(this,a)[0]}});
$.extend(!0,jQuery,{ajaxManager:function(){var a={};$(document).ajaxSend(function(b,c){c._id=1;a[c._id]=c});$(document).ajaxComplete(function(b,c){delete a[c._id]});return{abortAll:function(){var b=[];can.each(a,function(a){b.push(a._id);a.abort()});return b}}}(),browser:function(){var a={},b;if(/Firefox[\/\s](\d+\.\d+)/.test(window.navigator.userAgent)){a.mozilla="mozilla";b=parseFloat(Number(RegExp.$1))}else if(/Chrome[\/\s](\d+\.\d+)/.test(window.navigator.userAgent)){a.webkit="webkit";b=parseFloat(Number(RegExp.$1))}else if(/MSIE[\s](\d+\.\d+)/.test(window.navigator.userAgent)){a.msie=
"msie";b=parseFloat(Number(RegExp.$1))}a.version=b;return a}(),fn:{removeClassRegex:function(a){var b=a instanceof RegExp?a:RegExp(a);this.each(function(a,d){var e=d.className.split(" ").filter(function(a){return!b.test(a)});d.className=e.join(" ")});return this},center:function(a,b){return this.each(function(){var c=jQuery(this);c.css({position:a?"absolute":"fixed",left:"50%",top:"50%",zIndex:"1000000"}).css({marginLeft:"-"+c.outerWidth()/2+"px",marginTop:"-"+c.outerHeight()/2+"px"});a&&!b&&c.css({marginTop:parseInt(c.css("marginTop"),
10)+jQuery(window).scrollTop(),marginLeft:parseInt(c.css("marginLeft"),10)+jQuery(window).scrollLeft()})})},enableButton:function(a){if(a=a||arguments.length===0){this.removeClass("btn-disabled");this.removeAttr("disabled");this.prop("disabled",false)}else{this.addClass("btn-disabled");this.attr("disabled","disabled");this.prop("disabled",true)}}}});$(".ui-dialog").dialog({drag:function(){$.data(this,"dragged",!0)},open:function(){$.data(this,"dragged",!1)}});steal.executed("lib/sentrana/Utils.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js","lib/sentrana/DialogControl/css/dialog.css").then("lib/sentrana/DialogControl/ContentPluginDialog.js","lib/sentrana/DialogControl/ConfirmDialog.js","lib/sentrana/DialogControl/AlertDialog.js","lib/sentrana/DialogControl/ConfirmDialogYNC.js");steal.executed("lib/sentrana/DialogControl/stealDialogControl.js");
can.Control.extend("Sentrana.Controllers.Dialog",{pluginName:"sentrana_dialog",defaults:{basePath:"lib/sentrana/DialogControl",templatesPath:"templates",tmplInit:"dialog.ejs",title:"Modal Title",modal:!0,closeOnEscape:!0,buttons:[],autoCloseOnSessionTimeout:!0,messageType:"",showCrossButton:!0,autoOpen:!0,messageIsHtml:!1}},{init:function(){this.updateView();this.options.autoOpen&&this.openDialog()},update:function(){this.updateView();this.options.autoOpen&&this.openDialog()},updateView:function(){var a=
this;this.options.messageIsHtml||(this.options.message=can.esc(this.options.message));if(0===$(".modal-dialog",this.element).length){var b=$(this.element).children().detach(),c=can.view(this.getTemplatePath(this.options.tmplInit),this.options);$(this.element).html($(c));this.dialog=$(".sentrana-modal",this.element);b.length&&$(".modal-body",this.element).html(b);$(".modal-footer button",this.element).each(function(b,c){var h=a.options.buttons[b],g="handle"+h.label.toPascalCase(),h=h.callback||a[g]||
a[g.toUpperCase()];if("function"===typeof h)$(c).on("click",h.bind(a))});this.element.show()}else this.dialog=$(".sentrana-modal",this.element).first();this.updateStatus(!1,"")},openDialog:function(a){this.dialog.modal({keyboard:this.options.closeOnEscape,backdrop:this.options.modal?"static":!0});this.dialog.modal("show");this.updateStatus(!1,"");if("function"===typeof a)this.dialog.one("shown.bs.modal",a.bind(this));!1===this.options.showCrossButton&&this.hideCrossButton()},closeDialog:function(a){this.dialog.modal("hide");
if("function"===typeof a)this.dialog.one("hidden.bs.modal",a.bind(this))},updateStatus:function(a,b){var c=$(".status-bar-loading",this.element),d=$(".status-bar-msg",this.element);a?$(c).css("display","inline-block"):$(c).hide();d.text(b?b:"")},getTemplatePath:function(a){var b=[];this.options.basePath&&(b.push(this.options.basePath),/\/$/.test(this.options.basePath)||b.push("/"));this.options.templatesPath&&(b.push(this.options.templatesPath),/\/$/.test(this.options.templatesPath)||b.push("/"));
b.push(a);return b.join("")},enableButton:function(a){$(".modal-footer button",this.element).each(function(b,c){if($(c).text().trim()===a)return $(c).removeClass("disabled"),!1})},disableButton:function(a){$(".modal-footer button",this.element).each(function(b,c){if($(c).text().trim()===a)return $(c).addClass("disabled"),!1})},hideButton:function(a){$(".modal-footer button",this.element).each(function(b,c){if($(c).text().trim()===a)return $(c).hide(),!1})},showButton:function(a){$(".modal-footer button",
this.element).each(function(b,c){if($(c).text().trim()===a)return $(c).show(),!1})},"{Sentrana.ApplicationShell.AppState} change":function(a,b,c,d,e){"sessionOpen"===c&&!e&&this.options.autoCloseOnSessionTimeout&&this.closeDialog("sessionClosed")},hideCrossButton:function(){$(".close",this.element).hide()}});steal.executed("lib/sentrana/DialogControl/SentranaDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Controllers.ContentPluginDialog",{pluginName:"sentrana_content_plugin_dialog",defaults:{contentPlugin:"",contentOptions:null}},{init:function(a,b){this._super(a,b)},update:function(a){this._super(a)},updateView:function(){this._super();this.renderContent()},renderContent:function(){var a=this.options.contentPlugin,b=this.options.contentOptions;this.$modalBody=this.$modalBody||$(".modal-body",
this.element);a&&$.fn[a]&&(this.pluginController=this.$modalBody[a](b).control())}})});steal.executed("lib/sentrana/DialogControl/ContentPluginDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Controllers.ConfirmDialog",{pluginName:"sentrana_confirm_dialog",defaults:{tmplInit:"confirmDialog.ejs",title:"Confirm",message:"Click OK to confirm.",onOk:null,onCancel:null,buttons:[{label:"Cancel",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b)},update:function(a){this._super(a)},handleCancel:function(){this.closeDialog(this.options.onCancel)},
handleOK:function(){this.closeDialog(this.options.onOk)},"button.close click":function(a,b){b.preventDefault();this.handleCancel()}})});steal.executed("lib/sentrana/DialogControl/ConfirmDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Controllers.AlertDialog",{pluginName:"sentrana_alert_dialog",defaults:{tmplInit:"confirmDialog.ejs",title:"",autoOpen:!0,message:"",onOk:null,buttons:[{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b)},update:function(a){this._super(a)},handleCancel:function(){this.closeDialog()},handleOK:function(){this.closeDialog(this.options.onOk)},"button.close click":function(a,
b){b.preventDefault();this.handleCancel()}})});steal.executed("lib/sentrana/DialogControl/AlertDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Controllers.ConfirmDialogYNC",{pluginName:"sentrana_confirm_yes_no_cancel_dialog",defaults:{tmplInit:"confirmDialog.ejs",title:"",message:"",onYes:null,onCancel:null,onNo:null,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"NO",className:"btn-no btn-default"},{label:"YES",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b)},update:function(a){this._super(a)},
handleCANCEL:function(){this.closeDialog(this.options.onCancel)},handleNO:function(){this.closeDialog(this.options.onNo)},handleYES:function(){this.closeDialog(this.options.onYes)},"button.close click":function(a,b){b.preventDefault();this.handleCancel()}})});steal.executed("lib/sentrana/DialogControl/ConfirmDialogYNC.js");
steal("lib/sentrana/AppShell/ApplicationStorage.js","lib/sentrana/AppShell/SessionKeepAliveController.js","lib/sentrana/AppShell/SentranaApplicationShell.js","lib/sentrana/Navigation/stealNavigation.js","lib/sentrana/Authentication/StealAuthenticationModule.js",function(){can.Control.extend("Sentrana.Controllers.ApplicationShellController",{pluginName:"sentrana_application_shell",appName:"",sessionID:"",convertParamMapToUrlParams:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+
escape(a[c]));return b.join("&")},generateUrl:function(a,b){b=b||{};return"/"+a+"?"+this.convertParamMapToUrlParams(b)},initApp:function(){}},{init:function(){var a=this;this.$mainContainer=this.element.find("#main-container");this.$nav=this.element.find("#top-nav");this.$loginContainer=this.element.find("#login-container");this.$mainContent=this.element.find("#main-content");this.$changePassword=this.element.find("#change-password");this.checkForExternalLink();this.loadServiceInfo();$.ajaxPrefilter("json script",
function(b,c,d){d.setRequestHeader("sessionID",a.getSessionId())})},checkForExternalLink:function(){var a=unescape(document.location.hash).replace("#","").replace("!","").split("?");if(2===a.length){var b=a[0],a=a[1].split("&");this.externalLink={token:$.trim(b),linkInfo:this.getLinkInfoAsObject(a)}}},getLinkInfoAsObject:function(a){for(var b={},c=0;c<a.length;c++){var d=a[c].split("=");b[d[0]]=$.trim(d[1].replace(/['"]+/g,""))}return b},start:function(){this.loginController=this.$loginContainer.sentrana_login_page({app:this}).control();
this.$mainContainer.show();this.changePasswordController=this.$changePassword.sentrana_change_password({app:this}).control();this.sessionKeepAliveController=new Sentrana.Controllers.SessionKeepAliveController(this);if(this.isResetPasswordUrl())this.clearUserInfo();else{var a=this.retrieveUserInfo(),b=null;this.loginController.setCookieInfo(this.retrieveRememberMeInfo());a&&(b=this.loginController.checkLogin(a.userName))}b?this.redirectToCorrectPage(b):(this.saveDataInAppStorage("redirectedToLogin",
!0),this.saveDataInAppStorage("lastAppState",{userId:null,urlHash:window.location.hash}),this.redirectToLogin())},redirectToCorrectPage:function(){document.location.hash=this.isResetPasswordUrl()?can.route.url({page:document.location.hash}):can.route.url({page:"home"})},isResetPasswordUrl:function(){return 2===unescape(document.location.hash).split("token=").length?!0:!1},updateScreen:function(){},isPasswordExpired:function(){return!1},getServerErrorMessage:function(a){var b="";if(4===a.readyState&&
404!==a.status){var c=a.getResponseHeader("ErrorCode"),d=a.getResponseHeader("ErrorMsg");c&&c.trim()&&(b=this.getMessageByErrorCode(c));if(!b||!b.trim())b=d&&d.trim()?d:a.responseJSON?a.responseJSON.message:a.responseText}else b="The requested URL was not found.";return b},getClientErrorMessage:function(a){return(a=this.getMessageByKey(a))?a.trim():a},getMessageByErrorCode:function(){},getMessageByKey:function(){},loadServiceInfo:function(){var a=this;$.ajax({url:"resources/deployment.json",dataType:"json",
async:!1,success:function(b){a.constructor.appName=b.baseUrl}})},expandServiceUrl:function(a){var a="/"===a.substr(0,1)?a.substr(1,a.length):a,b;b=0<a.indexOf("?")?a.indexOf("?"):0<a.indexOf("/")?a.indexOf("/"):a.length;return"resources"===a.substr(0,b)?a:this.constructor.appName+"/"+a},getSessionId:function(){return this.constructor.sessionId},hideAppMessage:function(){this.$appActionMsg.hide()},showAppMessage:function(a){this.$appActionMsg.show();this.$appActionMsg.html(a)},showAppMessageWithBusyWheel:function(a){this.$appActionMsg.show();
this.$appActionMsg.html("templates/loadingwheel.ejs",{message:a})},loginSuccess:function(a){this.sessionInfo=a},loginFailure:function(){},loginComplete:function(){this.app.loginSuccess();this.app.hideAppMessage()},sessionOut:function(){this.logout()},logout:function(){this.sessionInfo=void 0;this.clearUserInfo();this.clearApplicationInfo();$("html,body").attr("style","height:auto");this.$nav.hide();this.$mainContent.hide();this.loginController.show();this.redirectToLogin()},clearApplicationInfo:function(){return null},
saveCookie:function(a,b,c){!1===b instanceof Object?$.cookie(a,b,{expires:14,path:"/",domain:c}):$.cookie(a,JSON.stringify(b),{expires:14,path:"/",domain:c})},retrieveRememberMeInfo:function(){var a="true"===$.cookie("rememberMe"),b=$.cookie("userNameToRemember");return{rememberMe:a,userNameToRemember:b}},retrieveUserInfo:function(){var a=$.cookie("userName"),b=$.cookie("userID"),c=$.cookie("fullName"),d=$.cookie("orgName"),e=$.cookie("sessionId"),h=$.cookie("isDeveloper"),g="true"===$.cookie("rememberMe"),
f=$.cookie("userNameToRemember"),i=$.cookie("applications"),j=$.cookie("applicationId");return!a||!e?null:{userName:a,userID:b,sessionId:e,fullName:c,isDeveloper:"true"===h,rememberMe:g,userNameToRemember:f,orgName:d,applications:i,applicationId:j}},saveUserInfo:function(a){var b=0<$("#id-chk-remember-me:checked").length,c="";b&&(c=0<a.userName.length?a.userName:this.retrieveRememberMeInfo().userNameToRemember);var d=/(?:[^.]+\.)*([^.]+\.(?:[a-zA-Z]{3}|[a-zA-Z]{2}))/.exec(document.domain),d=d?d[1]:
d;this.saveCookie("userName",a.userName,d);this.saveCookie("userNameToRemember",c,d);this.saveCookie("fullName",a.fullName,d);this.saveCookie("userID",a.userID,d);this.saveCookie("isDeveloper",a.isDeveloper,d);this.saveCookie("rememberMe",b,d);this.saveCookie("orgName",a.orgName,d);this.saveCookie("applications",a.applications,d)},clearUserInfo:function(){this.saveUserInfo({userName:"",fullName:"",isDeveloper:"false",userID:"",sessionId:""})},saveSessionInfo:function(a){this.saveCookie("sessionId",
a)},clearSessionInfo:function(){this.saveSessionInfo("")},retrieveSessionInfo:function(){return $.cookie("sessionId")},redirectToLogin:function(){document.location.hash=this.isResetPasswordUrl()?can.route.url({page:document.location.hash}):can.route.url({page:"login"})},showPasswordResetPage:function(a){this.hideNavigationHeader();this.loginController.showResetPasswordForm(a)},saveDataInAppStorage:function(a,b){Sentrana.ApplicationStorage.setData(a,b)},getDataFromAppStorage:function(a){return Sentrana.ApplicationStorage.getData(a)},
displayNavigationHeader:function(a){if(this.constructor.menuModel){var b=this.retrieveUserInfo();this.$nav.show();this.$nav.sentrana_navigation_header({user:b,menuModel:this.constructor.menuModel,navBarModel:this.constructor.navBarModel,userActions:a})}else this.logout()},hideNavigationHeader:function(){this.$nav.hide()},"{Sentrana.ApplicationShell.AppState} change":function(a,b,c,d,e){"sessionOpen"===c&&!e&&("timeout"===a.closeSessionReason?this.sessionOut():"init"!==a.closeSessionReason&&this.logout(),
this.$nav.control()&&this.$nav.control().destroy(),$.cookie("isLoggedIn",!1));"sessionOpen"===c&&e&&this.$mainContent.show();"currentNotification"===c&&this.notice(e.msg)},"{window} resize":function(){},openSession:function(a){Sentrana.ApplicationShell.AppState.attr("sessionTimeOut",a.sessionTimeOutSeconds);Sentrana.ApplicationShell.AppState.attr("sessionOpen",!0);this.constructor.initApp()},closeSession:function(a){Sentrana.ApplicationShell.AppState.attr("closeSessionReason",a);Sentrana.ApplicationShell.AppState.attr("sessionOpen",
!1);Sentrana.ApplicationShell.AppState.attr("sessionTimeOut",null)},renewSession:function(){Sentrana.ApplicationShell.AppState.attr("sessionRenewTime",+new Date)},updateSessionTimeOut:function(a){Sentrana.ApplicationShell.AppState.attr("sessionTimeOut",a)},setCurrentNotification:function(a){Sentrana.ApplicationShell.AppState.attr("currentNotification",{msg:a,timestamp:+new Date})}});$.ajaxManager=function(){var a={};$(document).ajaxSend(function(b,c){c._id=1;a[c._id]=c});$(document).ajaxComplete(function(b,
c){delete a[c._id]});return{abortAll:function(){var b=[];$.each(a,function(a,d){b.push(d._id);d.abort()});return b}}}()});steal.executed("lib/sentrana/AppShell/ApplicationShellController.js");can.Construct.extend("Sentrana.ApplicationStorage",{AppStorage:{},getData:function(a){return this.AppStorage[a]},setData:function(a,b){this.AppStorage[a]=b},isInStorage:function(a){return this.AppStorage.hasOwnProperty(a)?!0:!1},clearAppStorage:function(){this.AppStorage={}}},{});steal.executed("lib/sentrana/AppShell/ApplicationStorage.js");
steal("lib/sentrana/AppShell/SentranaApplicationShell.js",function(){Sentrana.Controllers.SessionKeepAliveController=can.Construct.extend({callBeforeTimeoutSeconds:300,maxInterval:86400},{init:function(a){var b=this;b.keepAliveInterval=null;b.app=a;Sentrana.ApplicationShell.AppState.bind("change",function(a,d){if("sessionTimeOut"===d||"sessionRenewTime"===d){var e=Sentrana.ApplicationShell.AppState.attr("sessionTimeOut");b.isValidTimeOut(e)?b.start(e):b.stop()}})},callKeepAliveService:function(){var a=
this;$.ajax({url:"/CheckSession",type:"GET",dataType:"json",contentType:"application/json",success:function(b){Sentrana.isSuccess(b)&&a.app.updateSessionTimeOut(b.sessionTimeOutSeconds)}})},start:function(a){this.keepAliveInterval&&window.clearInterval(this.keepAliveInterval);a=a>Sentrana.Controllers.SessionKeepAliveController.maxInterval?Sentrana.Controllers.SessionKeepAliveController.maxInterval:a;a-=Sentrana.Controllers.SessionKeepAliveController.callBeforeTimeoutSeconds;this.keepAliveInterval=
window.setInterval(this.proxy(this.callKeepAliveService),1E3*a)},stop:function(){this.keepAliveInterval&&window.clearInterval(this.keepAliveInterval)},isValidTimeOut:function(a){return null!==a&&a>Sentrana.Controllers.SessionKeepAliveController.callBeforeTimeoutSeconds}})});steal.executed("lib/sentrana/AppShell/SessionKeepAliveController.js");
can.Construct("Sentrana.ApplicationShell",{AppState:new can.Map({sessionOpen:null,closeSessionReason:null,currentNotification:null,sessionTimeOut:null,processState:{schema:"reinhart_b2bdist_1",dataUpload:{state:"READY",entities:[{name:"customer",displayName:"Customer",state:"FILE_NOT_UPLOADED",loadedRowsCount:0,errorRowsCount:10},{name:"product",displayName:"Product",state:"FILE_NOT_UPLOADED",loadedRowsCount:0,errorRowsCount:10},{name:"transaction",displayName:"Transaction",state:"FILE_NOT_UPLOADED",
loadedRowsCount:0,errorRowsCount:10}]},dataMapping:{state:"DISABLED",entities:[{name:"customer",displayName:"Customer",state:{attrState:{code:"INCOMPLETE",mapped:0,unmapped:3},tableState:{code:"NOT_EXIST",msg:"Not Exist",rowLoaded:0,errorRowCount:10}}},{name:"product",displayName:"Product",state:{attrState:{code:"INCOMPLETE",mapped:0,unmapped:3},tableState:{code:"NOT_EXIST",msg:"Not Exist",rowLoaded:0,errorRowCount:10}}},{name:"transaction",displayName:"Transaction",state:{attrState:{code:"INCOMPLETE",
mapped:0,unmapped:3},tableState:{code:"NOT_EXIST",msg:"Not Exist",rowLoaded:0,errorRowCount:10}}}]},dataEngineering:{state:"DISABLED",derivedAttribute:[{name:"PriceRankScore",state:"WORKING",rowLoaded:0},{name:"PurchaseInterval",state:"COMPLETED",rowLoaded:0},{name:"XXX",state:"WORKING",rowLoaded:0},{name:"XXX",state:"COMPLETED",rowLoaded:0}]},modelExecution:[{name:"Cross Sell Model",state:"DISABLED",process:[{name:"ModelPreProcessing",state:"WORKING"},{name:"ModelTest",state:"COMPLETED"}]}],exploreResult:{state:"DISABLED"}}})},
{});steal.executed("lib/sentrana/AppShell/SentranaApplicationShell.js");steal("lib/sentrana/Navigation/NavigationController.js","lib/sentrana/Navigation/css/navigation.css");steal.executed("lib/sentrana/Navigation/stealNavigation.js");
steal("lib/sentrana/AppSwitcher/StealAppSwitcher.js",function(){can.Control.extend("Sentrana.Controllers.NavigationController",{defaults:{template:{navigationTemplate:"lib/sentrana/Navigation/templates/navigationHeader.ejs"}},pluginName:"sentrana_navigation_header"},{init:function(){if(this.isPlugin="undefined"===typeof window.Sentrana_IsPlugin?!1:window.Sentrana_IsPlugin)this.options.template.navigationTemplate="lib/sentrana/Navigation/templates/navigationHeaderPlugin.ejs";this.updateView();this.render()},
update:function(a){this._super(a);this.updateView();this.render()},updateView:function(){var a=this.options.user;this.options.navBarModel||(this.options.navBarModel={logo:{position:"left",visible:!0},tabs:{position:"left",visible:!0},userOptions:{position:"right",visible:!0}});this.element.html(can.view(this.options.template.navigationTemplate,{navBarModel:this.options.navBarModel,mainMenuItems:this.options.menuModel.mainMenuItems,userName:this.options.user.fullName,orgName:a.orgName}));$("#nav-page-list").append(can.view("lib/sentrana/Navigation/templates/moreTabsDropdown.ejs",
{}));$(".more-tabs-dropdown",this.element).hide()},render:function(){var a=this,b=JSON.parse(this.options.user.applications);1<b.length&&$(".app-switcher",this.element).sentrana_app_switcher({userApps:b,applicationId:this.options.user.applicationId});if(this.options.userActions){var c=this.element.find(".right-navbar-nav");$(".right-navbar-nav li:gt(0)").remove();$.each(this.options.userActions,function(b,e){c.append(can.view(e.templatePath,e.templateOptions));if(e.selector&&e.controllerName)a.element.find(e.selector)[e.controllerName](e.controllerOptions)})}this.highlightMenuItems();
this.isPlugin||this.generateNavDropdown()},highlightMenuItems:function(){$("#nav-page-list > li").removeClass("active");var a=this;$("#nav-page-list > li").each(function(){a.isPathToCurrentPage($(this))&&$(this).addClass("active")})},generateNavDropdown:function(){var a=$(".app-switcher",this.element),b=$("#nav-page-list",this.element),c=$("#nav-option-list",this.element),d=$(".navbar-header",this.element).innerWidth(),c=c.innerWidth(),e=b.innerWidth(),h=window.innerWidth,g=a.innerWidth(),a=h-c-e,
d=d+g;if("block"!==$(".navbar-toggle").css("display"))if(a<d&&0<e)for($(".more-tabs-dropdown",this.element).show();a<d;)a=b.children("li:not(:last-child)"),e=a.size(),$(a[e-1]).prependTo("#more-tab-page-list",this.element),e=b.innerWidth(),a=h-e-c;else for(;a>d&&0<e;){var e=$("#more-tab-page-list",this.element).children("li"),g=e.size(),f=$(e[0]).clone().css("visibility","hidden").insertBefore(b.children("li:last-child")),i=f.innerWidth();f.remove();if(a-i>d)$(e[0]).insertBefore(b.children("li:last-child")),
e=b.innerWidth(),a=h-e-c;else break;if(1>=g){$(".more-tabs-dropdown",this.element).hide();break}}},"{window} resize":function(){this.isPlugin||(this.generateNavDropdown(),"block"===$(".navbar-toggle").css("display")&&this.generateNavPages())},".navbar-toggle click":function(){this.generateNavPages()},generateNavPages:function(){for(var a=$("#nav-page-list",this.element),b=$("#more-tab-page-list",this.element).children("li"),c=b.size(),d=0;d<c;d++)$(b[d]).insertBefore(a.children("li:last-child"));
$(".more-tabs-dropdown",this.element).hide()},isPathToCurrentPage:function(a){var b=can.route.attr("page"),c=this.options.menuModel.subNavigationMenus,c=c[b]?c[b].parentSelectedMenu:"",d=this;if(a.children("a").attr("id")==="menu-"+b||a.children("a").attr("id")==="menu-"+c)return!0;var e=!1;a.children("#nav-page-list ul").each(function(){$(this).children("li").each(function(){$(this).removeClass("active");d.isPathToCurrentPage($(this))&&(e=!0,$(this).addClass("active"))})});return e},".navbar-nav a click":function(a){$(".navbar-toggle").is(":visible")&&
!$(a).hasClass("dropdown-toggle")&&$(".navbar-collapse").collapse("toggle");this.highlightMenuItems();$(a).blur()}})});steal.executed("lib/sentrana/Navigation/NavigationController.js");steal("lib/sentrana/AppSwitcher/AppSwitcherController.js","lib/sentrana/AppSwitcher/css/appSwitcher.css");steal.executed("lib/sentrana/AppSwitcher/StealAppSwitcher.js");
can.Control.extend("Sentrana.Controllers.AppSwitcher",{pluginName:"sentrana_app_switcher",defaults:{template:"lib/sentrana/AppSwitcher/templates/appSwitcher.ejs"}},{init:function(){this.render()},update:function(a){this._super(a);this.render()},render:function(){this.element.html(can.view(this.options.template,{applications:this.options.userApps,applicationId:this.options.applicationId}))}});steal.executed("lib/sentrana/AppSwitcher/AppSwitcherController.js");
steal("lib/sentrana/Authentication/LoginController.js","lib/sentrana/ChangePassword/ChangePasswordController.js","lib/sentrana/Authentication/css/authentication.css");steal.executed("lib/sentrana/Authentication/StealAuthenticationModule.js");
steal("lib/sentrana/Authentication/AuthenticationModel.js",function(){can.Control.extend("Sentrana.Controllers.LoginController",{defaults:{mainTemplate:"lib/sentrana/Authentication/templates/login.ejs",lodingWheelTemplate:"lib/sentrana/Authentication/templates/loadingwheel.ejs",authenticationModel:Sentrana.Models.AuthenticationModel,defaultMessages:{logout_failed:"INTERNAL ERROR: Logout failed.",malformed_response:"Internal Error: Malformed Login response. Please report to an administrator.",empty_user_name:"Please specify a user name",
empty_password:"Empty password not allowed",email_address_required:"Please specify your email address.",invalid_format_emailaddress:"Invalid format of Email address",incorrect_emailaddress:"Your email address was not recognized. Please try again or contact your administrator",password_updated:"Your password reset link has been sent to your email address. Please use the link to reset your password.",password_expired:"Your password has expired. Try to reset your password or contact system administrator.",
username_sent:"Your username has been sent to your email address.",malformed_response_forgotpassword:"Internal Error:  Please report to Sentrana for investigation.",incorrect_url:"The requested URL was not found.",blankSecurityCodeFieldMessage:"The Security code field cannot be left blank.",blankPasswordFieldMessage:"The password field cannot be left blank.",passwordNotMatchMessage:"Passwords do not match.",errorMessage:"Failed to change your password, please try later again.",successMessage:"Your password has been updated successfully. Please log in with your new credentials. Redirecting to login page...",
wrongCurrentPasswordMessage:"Your current password is incorrect.",samePasswordMessage:"Choose a password you haven't previously used with this account.",emptyPasswordMessage:"New password cannot be empty.",invalidSecurityCodeORToken:"Invalid security code or token.",validatinglink:"Validating password reset link. Please wait...",securityTokenExpired:"Your password reset link is no longer valid.",invalidPasswordFormatMessage:"Invalid password. Valid passwords must contain at least eight characters, no spaces, both lowercase and uppercase characters, at least one numeric digit, and at least one special character (any character not 0-9, a-z, A-Z).",
passwordPolicyViolatedMessage:"Password policy violated. You cannot use recently used 3 passwords as New Password"}},pluginName:"sentrana_login_page"},{init:function(){this.app=this.options.app;this.element.html(can.view(this.options.mainTemplate,{}));this.$loginSection=$(".login-form",this.element);this.$loginButton=$(".login-submit",this.element);this.$loginUserName=$(".input-username",this.element);this.$loginPassword=$(".input-password",this.element);this.$loginError=$(".login-error",this.element);
this.$rememberMe=this.element.find("#id-chk-remember-me");this.$loginError.hide();this.$passwordResetForm=this.element.find("#password-reset-form");this.$autoGeneratedPasswordResetForm=this.element.find("#auto-generated-password-reset-form");this.$loginMsg=this.element.find(".login-msg");this.forgotOkButton=this.element.find("#password-reset-button");this.$dwSelector=$(".dw-selector");this.$emailAddress=this.element.find("#p_email_id");this.$forgotPassError=this.element.find(".password-reset-error");
this.$forgotPassMessage=this.element.find(".password-reset-message");this.$rdopassword=this.element.find("#rdo-forgot-password");this.$rdousername=this.element.find("#rdo-forgot-username");this.$forgotPassMessage.hide();this.$securityCode=this.element.find("input[name=security-code]");this.$newPwd=this.element.find("input[name=new-password]");this.$newPwdConfirm=this.element.find("input[name=confirm-password]");this.$updatePwdButton=this.element.find("#auto-generated-password-reset-button");this.$successUpdatePwd=
this.element.find(".change-pwd-success");this.$successUpdatePwd.hide();this.$errorUpdatePwd=this.element.find(".change-pwd-error");this.$errorUpdatePwd.hide();this.show();$('[data-toggle="tooltip"]').tooltip()},render:function(){},show:function(){this.showLogin=!0;this.element.show();this.setFocustoLoginControl()},hide:function(){this.showLogin=!1;this.$loginError.hide();this.element.hide()},setFocustoLoginControl:function(){var a=this.app.retrieveRememberMeInfo();this.$loginUserName.focus();a.rememberMe?
(this.$loginUserName.val(a.userNameToRemember),this.$loginPassword.focus()):this.$loginUserName.val("")},setCookieInfo:function(a){this.$rememberMe.prop("checked",a.rememberMe);this.$loginUserName.val(a.userNameToRemember);this.$loginPassword.focus()},login:function(a,b){var c=this,d;this.options.authenticationModel.login(this.app.generateUrl?this.app.generateUrl("login"):this.app.constructor.generateUrl("login"),JSON.stringify({userName:a,password:b}),function(a){d=c.setLoginDataToApp(c,a)},function(b){c.app.isPasswordExpired(b)&&
c.showPasswordResetDialog(a);b=c.app.getServerErrorMessage(b);if(!b||!b.trim())b=c.getClientErrorMessage("malformed_response");c.loginFailed(b);d=!1});return d},setLoginDataToApp:function(a,b){a.hideLoadingWheel();if(!b||!b.userInfo||!b.sessionId)return a.$loginError.html(this.getClientErrorMessage("malformed_response")).show(),!1;var c=b.userInfo.userName;if(a.app.isPasswordExpired(b))return a.loginFailed(this.getClientErrorMessage("password_expired")),a.showPasswordResetDialog(c),!1;Sentrana.ApplicationStorage.getData("lastAppState");
Sentrana.ApplicationStorage.clearAppStorage();var d=b.userInfo.firstName+" "+b.userInfo.lastName,e=!!b.debugMode;a.app.constructor.sessionID=a.app.sessionID=b.sessionId;a.app.constructor.userLoginId=a.app.userLoginId=c;a.app.saveUserInfo({userName:c,fullName:d,isDeveloper:e,userID:b.userInfo.userID,orgName:b.userInfo.orgName,applications:b.userInfo.organization.applications});a.app.openSession(b);Sentrana.LoginData=b;$.cookie("isLoggedIn",!0);a.app.loginSuccess(b);return!0},loginFailed:function(a){this.hideLoadingWheel();
this.$loginError.html(a).show();this.app.loginFailure()},showPasswordResetDialog:function(a){this.app.changePasswordController.open(void 0,a,!0)},getClientErrorMessage:function(a){var b=this.app.getClientErrorMessage(a);b||(b=this.options.defaultMessages[a]);return b},logout:function(a){a&&this.$loginError.html("").hide();var b=this;this.options.authenticationModel.logout(this.app.generateUrl?this.app.generateUrl("logout",{}):this.app.constructor.generateUrl("logout",{}),function(){Sentrana.ApplicationStorage.clearAppStorage();
b.app.closeSession("logout")},function(a){if(a.status&&401==a.status)b.app.closeSession("logout");else{a=b.app.getServerErrorMessage(a);if(!a||!a.trim())a=b.getClientErrorMessage("logout_failed");alert(a)}})},".login-submit click":function(){this.$forgotPassMessage.html("").hide();var a=this.$loginUserName.val()||"",b=this.$loginPassword.val();""===$.trim(a)?this.$loginError.html(this.getClientErrorMessage("empty_user_name")).show():""===$.trim(b)?this.$loginError.html(this.getClientErrorMessage("empty_password")).show():
(this.$loginPassword.val(""),this.showLoadingWheel("Validating user, please wait..."),this.login(a,b))},showLoadingWheel:function(a){this.$loginSection.hide();this.$passwordResetForm.hide();this.$autoGeneratedPasswordResetForm.hide();this.$loginMsg.html(can.view(this.options.lodingWheelTemplate,{message:a,hideImage:!1}));this.$loginMsg.show()},hideLoadingWheel:function(){this.$loginSection.show();this.$passwordResetForm.hide();this.$autoGeneratedPasswordResetForm.hide();this.$loginMsg.html("");this.$loginMsg.hide()},
showErrorMessage:function(a){this.$loginError.html(a).show()},checkLogin:function(a){var b=this.app.retrieveUserInfo();if(!b)return null;a||(a=b.userName);var c=this,d;this.options.authenticationModel.checkLogin(this.app.generateUrl?this.app.generateUrl("ValidateSession",{username:a}):this.app.constructor.generateUrl("ValidateSession",{username:a}),null,function(a){a.hasOwnProperty("HasError")?(c.app.clearUserInfo(),d=null):(c.setLoginDataToApp(c,a),d=a)},function(){c.app.clearUserInfo();d=null});
return d},'input[name="pwd"] keypress':function(a,b){13===b.keyCode&&this.$loginButton.trigger("click")},"#forgot-password-link click":function(){this.showForgotPasswordForm();return!1},showLoginForm:function(){this.$passwordResetForm.hide();this.$autoGeneratedPasswordResetForm.hide();this.$loginSection.show();this.$forgotPassError.html("").hide();this.$loginMsg.html("").hide();this.$loginPassword.val("")},showForgotPasswordForm:function(){this.$loginSection.hide();this.$autoGeneratedPasswordResetForm.hide();
this.$loginError.html("").hide();this.$forgotPassMessage.html("").hide();this.$forgotPassError.html("").hide();this.$passwordResetForm.show();this.$emailAddress.val("").focus();this.$rdopassword.prop("checked",!0)},showResetPasswordForm:function(a){var b=this,c=b.app.generateUrl?b.app.generateUrl("IsValidToken",{token:a}):b.app.constructor.generateUrl("IsValidToken",{token:a});b.showLoadingWheel(b.getClientErrorMessage("validatinglink"));this.options.authenticationModel.isValidToken(c,function(c){c&&
(b.hideLoadingWheel(),b.passWordResetToken=a,b.$loginSection.hide(),b.$passwordResetForm.hide(),b.$forgotPassError.html("").hide(),b.$autoGeneratedPasswordResetForm.show())},function(a){b.hideLoadingWheel();a=b.app.getServerErrorMessage(a);if(!a||!a.trim())a=b.getClientErrorMessage("securityTokenExpired");b.showForgotPasswordForm();b.$forgotPassError.html(a).show()})},hideResetPasswordForm:function(){this.$autoGeneratedPasswordResetForm.hide();this.$passwordResetForm.hide();this.$loginSection.show();
this.$forgotPassError.html("").hide()},"#password-reset-form .close click":function(){window.location.hash=can.route.url({page:"login"});this.showLoginForm();return!1},".input-forgot-password keyup":function(a,b){13!==b.keyCode&&0<$.trim(this.$emailAddress.val()).length&&this.$forgotPassError.html("").hide()},".input-forgot-password keypress":function(a,b){if(13===b.keyCode)return setTimeout(function(){can.trigger($("#password-reset-button"),"click")},200),!1},"#password-reset-button click":function(){var a=
this.$emailAddress.val();if(0===$.trim(a).length)this.$forgotPassError.html(this.getClientErrorMessage("email_address_required")).show(),this.$emailAddress.focus();else if(this.validateEmail(a)){this.options.app.blockElement($("#login-container"),'<div class="loading"><p class="small-waitingwheel"><img src="images/loader-white.gif"/></p></div>');var b=this;setTimeout(function(){b.resetPassword(a)},400)}else this.$forgotPassError.html(this.getClientErrorMessage("invalid_format_emailaddress")).show(),
this.$emailAddress.valueOf("").focus()},validateEmail:function(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)},resetPassword:function(a){var b=this;this.options.authenticationModel.resetPassword(this.getForgotPasswordUrl(a),function(a){b.showSuccessMessage(a)},function(a){a=b.app.getServerErrorMessage(a);if(!a||!a.trim())a=b.getClientErrorMessage("incorrect_emailaddress");
b.$forgotPassError.html(a).show()},function(){b.options.app.unBlockElement($("#login-container"))})},showSuccessMessage:function(a){a?(this.$rdopassword.is(":checked")?this.$forgotPassMessage.html(this.getClientErrorMessage("password_updated")).show():this.$forgotPassMessage.html(this.getClientErrorMessage("username_sent")).show(),this.showLoginForm()):this.$forgotPassError.html(this.getClientErrorMessage("malformed_response_forgotpassword")).show()},getForgotPasswordUrl:function(a){return this.$rdopassword.is(":checked")?
this.app.generateUrl?this.app.generateUrl("ForgotPassword",{emailAddress:a}):this.app.constructor.generateUrl("ForgotPassword",{emailAddress:a}):this.app.generateUrl?this.app.generateUrl("ForgotUsername",{emailAddress:a}):this.app.constructor.generateUrl("ForgotUsername",{emailAddress:a})},"#auto-generated-password-reset-button click":function(){var a=this.$securityCode.val(),b=this.$newPwd.val(),c=this.$newPwdConfirm.val(),d=this.getClientErrorMessage("blankSecurityCodeFieldMessage"),e=this.getClientErrorMessage("blankPasswordFieldMessage"),
h=this.getClientErrorMessage("passwordNotMatchMessage");if(0===a.length)this.$errorUpdatePwd.html(d),this.$errorUpdatePwd.show();else if(0===b.length||0===c.length)this.$errorUpdatePwd.html(e),this.$errorUpdatePwd.show();else if(c!==b)this.$errorUpdatePwd.html(h),this.$errorUpdatePwd.show();else{this.options.app.blockElement($("#login-container"),'<div class="loading"><p class="small-waitingwheel"><img src="images/loader-white.gif"/></p></div>');var g=this;setTimeout(function(){g.updatePasswordFromLink(a,
b,g)},400)}},updatePasswordFromLink:function(a,b,c){var d=this.getClientErrorMessage("successMessage");this.options.authenticationModel.changeAutoGeneratedPassword(c.app.generateUrl?c.app.generateUrl("ChangeAutoGeneratedPassword",{}):c.app.constructor.generateUrl("ChangeAutoGeneratedPassword",{}),{token:c.passWordResetToken,securityCode:a,newPassword:b},function(){c.$errorUpdatePwd.hide();c.$successUpdatePwd.html(d).show();setTimeout(function(){c.hideResetPasswordForm();c.$successUpdatePwd.hide();
c.app.closeSession("logout");document.location.hash=""},3E3)},function(a){a=c.app.getServerErrorMessage(a);if(!a||!a.trim())a=c.getClientErrorMessage("invalidSecurityCodeORToken");c.$errorUpdatePwd.html(a).show()},function(){c.options.app.unBlockElement($("#login-container"))})}})});steal.executed("lib/sentrana/Authentication/LoginController.js");
can.Model.extend("Sentrana.Models.AuthenticationModel",{login:function(a,b,c,d){$.ajax({url:a,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",async:!0,data:b,success:c,error:d})},checkLogin:function(a,b,c,d){$.ajax({url:a,type:"GET",dataType:"json",async:!1,success:c,error:d})},logout:function(a,b,c){$.ajax({url:a,type:"GET",dataType:"json",async:!0,success:b,error:c})},resetPassword:function(a,b,c,d){$.ajax({url:a,type:"GET",contentType:"application/json; charset=utf-8",
dataType:"json",async:!0,complete:d,success:b,error:c})},changePassword:function(a,b,c,d){$.ajax({url:a,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",async:!0,data:JSON.stringify(b),success:c,error:d})},isValidToken:function(a,b,c){$.ajax({url:a,type:"GET",dataType:"json",async:!0,success:b,error:c})},changeAutoGeneratedPassword:function(a,b,c,d,e){$.ajax({url:a,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",async:!0,data:JSON.stringify(b),success:c,
error:d,complete:e})}},{});steal.executed("lib/sentrana/Authentication/AuthenticationModel.js");
steal("lib/sentrana/Authentication/AuthenticationModel.js",function(){can.Control.extend("Sentrana.Controllers.ChangePasswordController",{defaults:{changePasswordTemplate:"lib/sentrana/ChangePassword/changePassword.ejs",authenticationModel:Sentrana.Models.AuthenticationModel,defaultMessages:{blankPasswordFieldMessage:"The password field cannot be left blank.",passwordNotMatchMessage:"Passwords do not match.",errorMessage:"Failed to change your password, please try later again.",successMessage:"Your password has been updated successfully. Please log in with your new credentials. Logging out now...",
wrongCurrentPasswordMessage:"Your current password is incorrect.",samePasswordMessage:"Choose a password you haven't previously used with this account.",emptyPasswordMessage:"New password cannot be empty.",invalidPasswordFormatMessage:"Invalid password. Valid passwords must contain at least eight characters, no spaces, both lowercase and uppercase characters, at least one numeric digit, and at least one special character (any character not 0-9, a-z, A-Z).",passwordPolicyViolatedMessage:"Password policy violated. You cannot use recently used 3 passwords as New Password"}},
pluginName:"sentrana_change_password"},{init:function(){this.render();$('[data-toggle="tooltip"]').tooltip()},render:function(){this.element.html(can.view(this.options.changePasswordTemplate,{}));this.$currentPwd=$("input[name=old-password]",$(this.element));this.$newPwd=$("input[name=new-password]",$(this.element));this.$newPwdConfirm=$("input[name=confirm-password]",$(this.element));this.$cancelButton=$("#change-password-cancel");this.$submitButton=$("#change-password-submit");this.$success=$(".change-pwd-success",
$(this.element));this.$success.hide();this.$error=$(".change-pwd-error",$(this.element));this.$error.hide();this.userInfo=this.options.app.retrieveUserInfo();this.element.find(".form-control").focus(function(a){$(a.target).prop("type","password")}).blur(function(a){var a=$(a.target),b=a.val();(!b||0>=b.length)&&a.prop("type","text").val("")})},open:function(a,b,c){this.resetInputBox();this.userName=b;this.isExpired=c;this.$success.hide();this.$error.hide();$("#change-password-modal").on("show.bs.modal",
this.centerModal);$("#change-password-modal").modal("show");if(a)$("#change-password-modal").one("shown.bs.modal",a)},resetInputBox:function(){this.$currentPwd.val("");this.$newPwd.val("");this.$newPwdConfirm.val("")},centerModal:function(){$(this).css("display","block");var a=$(this).find(".modal-dialog"),b=($(window).height()-a.height())/2;a.css("margin-top",b)},getClientErrorMessage:function(a){var b=this.options.app.getClientErrorMessage(a);b||(b=this.options.defaultMessages[a]);return b},handleOK:function(){this.currentPassword=
this.$currentPwd.val();this.newPassword=this.$newPwd.val();this.newPasswordConfirm=this.$newPwdConfirm.val();var a=this.getClientErrorMessage("blankPasswordFieldMessage"),b=this.getClientErrorMessage("passwordNotMatchMessage"),c=this.getClientErrorMessage("samePasswordMessage");if(0===this.currentPassword.length||0===this.newPassword.length||0===this.newPasswordConfirm.length)this.$error.html(a),this.$error.show();else if(this.newPasswordConfirm!==this.newPassword)this.$error.html(b),this.$error.show();
else if(this.currentPassword===this.newPassword)this.$error.html(c),this.$error.show();else{var d=this.getClientErrorMessage("errorMessage"),e=this.getClientErrorMessage("successMessage");this.getClientErrorMessage("wrongCurrentPasswordMessage");this.getClientErrorMessage("emptyPasswordMessage");var h=this;this.options.authenticationModel.changePassword(this.options.app.generateUrl?this.options.app.generateUrl("ChangePassword",{}):this.options.app.constructor.generateUrl("ChangePassword",{}),{userName:this.userName||
this.options.app.retrieveUserInfo().userName,currentPassword:this.currentPassword,newPassword:this.newPassword,isExpired:this.isExpired},function(){h.$currentPwd.val("").focus();h.$newPwd.val("").focus();h.$newPwdConfirm.val("").focus();h.$submitButton.addClass("disabled");h.$cancelButton.addClass("disabled");h.$error.hide();h.$success.html(e);h.$success.show();setTimeout(function(){$("#change-password-modal").modal("hide");$("#change-password-form").each(function(){this.reset()});h.$success.hide();
h.$submitButton.removeClass("disabled");h.$cancelButton.removeClass("disabled");h.options.app.loginController.logout(h.isExpired)},3E3)},function(a){a=h.options.app.getServerErrorMessage(a);if(!a||!a.trim())a=d;h.$error.html(a);h.$error.show()})}},"#change-password-cancel click":function(){$("#change-password-modal").modal("hide");$("#change-password-form").each(function(){this.reset()})},"#change-password-submit click":function(){this.handleOK()},".close click":function(){$("#change-password-modal").modal("hide");
$("#change-password-form").each(function(){this.reset()})},'input[type="password"] keypress':function(a,b){13===b.keyCode&&this.handleOK()}})});steal.executed("lib/sentrana/ChangePassword/ChangePasswordController.js");
can.Control.extend("Sentrana.Controllers.RouterController",{pluginName:"sentrana_router"},{init:function(){this.app=this.options.app;this.app.start();this.resetRoute()},resetRoute:function(){can.route.ready(!1);can.route(":page/:id/:subpage",{page:"",id:"",subpage:""});can.route(":page",{page:""});can.route.ready(!0)},updateRoute:function(a){$.isEmptyObject(can.route.attr())?(document.location.hash=can.route.url({page:a}),can.route.ready(!0)):can.route.attr("page",a)},route:function(){this.updateRoute("login")},
":page route":function(a){a.page&&this.displayPage()},":page/:id/:subpage route":function(a){(a.page||a.id||a.subpage)&&this.displayPage()},displayPage:function(){var a=can.route.attr("page"),b=unescape(document.location.hash).split("token=");2===b.length?(this.app.clearApplicationInfo(),this.app.showPasswordResetPage(b[1])):(can.each($(".dialog").controls(),function(a){$(a.element).dialog("isOpen")&&"Session"!==$(a.element).attr("data-dialogType")&&(can.isFunction(a.cancelAndClose)?a.cancelAndClose():
can.isFunction(a.handleCANCEL)?a.handleCANCEL():can.isFunction(a.closeDialog)?a.closeDialog():$(a.element).dialog("close"))}),$("#main-content > div").each(function(){$(this).hide()}),b=this.app.retrieveUserInfo(),"login"!==a&&(this.app.loginController.hide(),!b)?can.route.attr("page","login"):(this.app.updateScreen(a),$(document).scrollTop(0),a=$(".fixed_header").height(),$("#content").css("margin-top",a)))},clearFocusFromInputElements:function(){$("input:focus").blur()}});steal.executed("lib/sentrana/AppShell/RouterController.js");
steal("lib/sentrana/WidgetsBase/Model/WidgetsStyleModelBase.js","lib/sentrana/WidgetsBase/Model/WidgetsPropertiesModelBase.js","lib/sentrana/WidgetsBase/Control/WidgetsControlBase.js","lib/sentrana/WidgetsBase/Control/WidgetsStyleControlBase.js","lib/sentrana/WidgetsBase/Control/WidgetsPropertiesControlBase.js");steal.executed("lib/sentrana/WidgetsBase/stealWidgetsBase.js");can.Map.extend("Sentrana.UI.Widgets.Styles.Model",{},{init:function(){this.setup({color:"#000",backgroundColor:"#fff",font:"Arial"})}});
steal.executed("lib/sentrana/WidgetsBase/Model/WidgetsStyleModelBase.js");can.Map.extend("Sentrana.UI.Widgets.Properties.Model",{},{init:function(){this.setup({styles:new Sentrana.UI.Widgets.Styles.Model})}});steal.executed("lib/sentrana/WidgetsBase/Model/WidgetsPropertiesModelBase.js");
steal("lib/sentrana/WidgetsBase/Model/WidgetsPropertiesModelBase.js",function(){can.Control.extend("Sentrana.UI.Widgets.Control",{defaults:{properties:new Sentrana.UI.Widgets.Properties.Model,mode:"view"}},{init:function(){},update:function(){},show:function(){},hide:function(){},destroy:function(){},resize:function(){},getProperties:function(){return this.options.properties.attr()},setProperties:function(){},updateView:function(){},"{properties} change":function(){this.updateView()}})});steal.executed("lib/sentrana/WidgetsBase/Control/WidgetsControlBase.js");
can.Control.extend("Sentrana.UI.Widgets.Styles.Control",{defaults:{}},{});steal.executed("lib/sentrana/WidgetsBase/Control/WidgetsStyleControlBase.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.UI.Widgets.Properties.Control",{defaults:{title:"Properties",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b)},open:function(){this.openDialog()},handleCANCEL:function(){this.closeDialog()},handleOK:function(){this.closeDialog()},"button.close click":function(a,b){b.preventDefault();
this.handleCANCEL()}})});steal.executed("lib/sentrana/WidgetsBase/Control/WidgetsPropertiesControlBase.js");steal("lib/sentrana/SideBar/SideBar.js","lib/sentrana/SideBar/css/sidebar.css");steal.executed("lib/sentrana/SideBar/stealSideBar.js");
steal("lib/sentrana/WidgetsBase/Control/WidgetsControlBase.js",function(){Sentrana.UI.Widgets.Control("Sentrana.UI.Widgets.SideBar",{pluginName:"sentrana_side_bar",defaults:{title:"untitled",position:"left",dataContainerElement:void 0,width:230,height:600,callBackFunctionDefault:void 0,callBackFunctionOnShow:void 0,callBackFunctionOnHide:void 0,callBackFunctionOnPin:void 0,callBackFunctionOnUnPin:void 0,autoHeight:!1,marginTop:0,marginBottom:0,headerIconClass:"",headerCssClass:"",draggable:!0,containmentArea:"window"}},
{init:function(){this.state="pin";this.parent=this.element.parent();var a=this.element.children().detach();this.element.html(can.view("lib/sentrana/SideBar/templates/sidebar.ejs",{options:this.options}));this.$dockablePanel=this.element.find(".sidebar-dockablePanel");this.$containerPanel=this.element.find(".sidebar-scrollable-panel");this.$sidebarTitle=this.element.find(".sidebar-docPanelTitle");this.$pinIcon=this.element.find(".sidebar-pin-icon");this.$unpinIcon=this.element.find(".sidebar-unpin-icon");
this.$containerPanel.append(a);this.element.css("position","relative");this.$dockablePanel.addClass("sidebar-position-"+this.options.position);this.$dockablePanel.css("width",this.options.width+"px");this.$sidebarTitle.addClass(this.options.headerCssClass);this.$containerPanel.css("height",this.getHeight());this.options.callBackFunctionDefault&&"function"===typeof this.options.callBackFunctionDefault&&this.options.callBackFunctionDefault();this.options.draggable&&(this.$dockablePanel.draggable({containment:this.options.containmentArea}),
this.$dockablePanel.draggable("disable"),this.$unpinIcon.show(),this.$pinIcon.hide())},show:function(){this.$dockablePanel.show("slide",{direction:this.options.position});this.options.dataContainerElement&&$(this.options.dataContainerElement).css("margin-"+this.options.position,this.options.width+"px");this.options.callBackFunctionOnShow&&"function"===typeof this.options.callBackFunctionOnShow&&this.options.callBackFunctionOnShow()},hide:function(){this.options.draggable&&this.showPinState();this.$dockablePanel.hide("slide",
{direction:this.options.position});this.options.dataContainerElement&&$(this.options.dataContainerElement).css("margin-"+this.options.position,"0px");this.options.callBackFunctionOnHide&&"function"===typeof this.options.callBackFunctionOnHide&&this.options.callBackFunctionOnHide()},getHeight:function(){var a=this.options.height;this.options.autoHeight&&(a=$(window).height()-this.options.marginTop-this.options.marginBottom-this.$sidebarTitle.outerHeight(!0),a=400<a?a:400);return a+"px"},showPinState:function(){"left"===
this.options.position?this.$dockablePanel.css({"float":"none",left:"0px",right:"",top:"0px"}):this.$dockablePanel.css({"float":"none",left:"",right:"0px",top:"0px"});this.$dockablePanel.draggable("disable");this.state="pin";this.$unpinIcon.show();this.$pinIcon.hide()},".fa-times click":function(){this.state="unpin";this.hide()},".fa-link click":function(){this.options.dataContainerElement&&$(this.options.dataContainerElement).css("margin-"+this.options.position,this.options.width+"px");this.showPinState();
this.options.callBackFunctionOnPin&&"function"===typeof this.options.callBackFunctionOnPin&&this.options.callBackFunctionOnPin()},".fa-unlink click":function(){this.options.dataContainerElement&&$(this.options.dataContainerElement).css("margin-"+this.options.position,"0px");this.$dockablePanel.css("float",this.options.position);this.$dockablePanel.draggable("enable");this.state="unpin";this.$unpinIcon.hide();this.$pinIcon.show();this.options.callBackFunctionOnUnPin&&"function"===typeof this.options.callBackFunctionOnUnPin&&
this.options.callBackFunctionOnUnPin()},"{window} resize":function(){this.options.autoHeight&&this.$containerPanel.css("max-height",this.getHeight())}})});steal.executed("lib/sentrana/SideBar/SideBar.js");steal("lib/sentrana/PlainList/PlainListStyleModel.js","lib/sentrana/PlainList/PlainListPropertyModel.js","lib/sentrana/PlainList/PlainListPropertyControl.js","lib/sentrana/PlainList/PlainList.js","lib/sentrana/PlainList/css/plainlist.css");steal.executed("lib/sentrana/PlainList/stealPlainList.js");
steal("lib/sentrana/WidgetsBase/Model/WidgetsStyleModelBase.js",function(){Sentrana.UI.Widgets.Styles.Model.extend("Sentrana.UI.Widgets.Styles.Model.PlainList",{},{init:function(){this._super()}})});steal.executed("lib/sentrana/PlainList/PlainListStyleModel.js");
steal("lib/sentrana/WidgetsBase/Model/WidgetsPropertiesModelBase.js","lib/sentrana/PlainList/PlainListStyleModel.js",function(){Sentrana.UI.Widgets.Properties.Model.extend("Sentrana.UI.Widgets.Properties.Model.PlainList",{},{init:function(){this.setup({styles:new Sentrana.UI.Widgets.Styles.Model.PlainList,items:[]})}})});steal.executed("lib/sentrana/PlainList/PlainListPropertyModel.js");
steal("lib/sentrana/WidgetsBase/Control/WidgetsPropertiesControlBase.js",function(){Sentrana.UI.Widgets.Properties.Control("Sentrana.UI.Widgets.Properties.Control.PlainList",{pluginName:"sentrana_plain_list_property",defaults:{propertyModel:null}},{init:function(a,b){this.element.append(can.view("lib/sentrana/PlainList/templates/plainListProperty.ejs",{properties:this.properties}));this.properties={};this._super(a,b);this.$color=this.element.find(".widgets-color");this.$backgroundColor=this.element.find(".widgets-background-color");
this.$font=this.element.find(".widgets-font");this.$items=this.element.find(".widgets-items")},handleOK:function(){this.updateStatus(!0,Sentrana.getMessageText("Updating widgets..."));this.options.propertyModel.attr("styles.color",this.$color.val());this.options.propertyModel.attr("styles.backgroundColor",this.$backgroundColor.val());this.options.propertyModel.attr("styles.font",this.$font.val());this.options.propertyModel.attr("items",this.$items.val().split("\n"));this.closeDialog()}})});steal.executed("lib/sentrana/PlainList/PlainListPropertyControl.js");
steal("lib/sentrana/PlainList/PlainListStyleModel.js","lib/sentrana/WidgetsBase/Control/WidgetsControlBase.js",function(){Sentrana.UI.Widgets.Control("Sentrana.UI.Widgets.PlainList",{pluginName:"sentrana_plain_list",defaults:{properties:new Sentrana.UI.Widgets.Properties.Model.PlainList}},{init:function(){this.render()},render:function(){this.element.html(can.view("lib/sentrana/PlainList/templates/plainList.ejs",{items:this.options.properties.items}))},update:function(){},show:function(){},hide:function(){},
destroy:function(){},resize:function(){},setProperties:function(){},updateView:function(){this.render();this.element.css("color",this.options.properties.attr("styles.color"));this.element.css("background-color",this.options.properties.attr("styles.backgroundColor"));this.element.css("font",this.options.properties.attr("styles.font"))},".plain-list-item click":function(){}})});steal.executed("lib/sentrana/PlainList/PlainList.js");
steal("lib/sentrana/PageWidget/Page.js","lib/sentrana/PageWidget/PropertyModel.js","lib/sentrana/PageWidget/PropertyController.js","lib/sentrana/PageWidget/PageModel.js","lib/sentrana/PageWidget/css/page.css");steal.executed("lib/sentrana/PageWidget/StealPage.js");
steal("lib/sentrana/WidgetsBase/Control/WidgetsControlBase.js",function(){Sentrana.UI.Widgets.Control("Sentrana.UI.Widgets.PageWidget",{pluginName:"sentrana_page_widget",defaults:{basePath:"lib/sentrana/PageWidget",templatesPath:"templates",tmplInit:"page-container.ejs",tmplPageContent:"page-content.ejs",tmplPageItem:"page-item.ejs",isEditMode:!0,pageTitle:"Page Title"}},{init:function(){this.pageIdPrefix=this.getPageIdPrefix();this.updateView()},getPageIdPrefix:function(){return"sentrana_page_widget_"+
($(".sentrana_page_widget")?$(".sentrana_page_widget").length:0)+"_page_"},updateView:function(){this.element.html(can.view(this.getTemplatePath(this.options.tmplInit),{}));this.pageItemContainer=this.element.find(".page-item");this.pageContentContainer=this.element.find(".page-content");this.reOrderPages();this.options.reportModel&&0===this.options.reportModel.pages.length?this.addPage():this.renderPages()},reOrderPages:function(){$("#tabs").tabs().find("ul").sortable({axis:"x",items:"li:not(.unsortable)",
update:function(){}})},sortNumber:function(a,b){return a-b},getPageId:function(){for(var a=1,b=[],c=0;c<this.options.reportModel.pages.length;c++){var d=this.options.reportModel.pages[c],e=d.id.lastIndexOf("_")+1,d=d.id.substr(e);b.push(parseInt(d,10))}b.sort(this.sortNumber);0<b.length&&(a=b[b.length-1]+1);return a},getFirstPageId:function(){return 0<this.options.reportModel.pages.length?this.options.reportModel.pages[0].id:null},addPage:function(){var a=new Sentrana.Models.PageModel,b=this.getPageId();
a.id=this.pageIdPrefix+b;a.title=this.options.pageTitle;a.reportElements=[];this.options.reportModel.pages.push(a)},renderPages:function(){var a=this.options.reportModel.pages;if(a&&0<a.length){var b=this.options.reportModel.pages.length;$(this.pageItemContainer).html(can.view(this.getTemplatePath(this.options.tmplPageItem),{pageList:this.options.reportModel.pages,isEditMode:this.options.isEditMode,pageCount:b}));for(b=0;b<a.length;b++){var c=a[b];$(this.pageContentContainer).append(can.view(this.getTemplatePath(this.options.tmplPageContent),
{pageId:c.id}))}var d=this;setTimeout(function(){d.activePage(a[0].id)},10)}},activePage:function(a){$(".page-tab",this.pageItemContainer).removeClass("active");$(".tab-pane",this.pageContentContainer).removeClass("active");$(".page-item-"+a,this.pageItemContainer).addClass("active");$("#"+a,this.pageContentContainer).addClass("active");can.trigger(this.element,"setReportPage")},getSelectedPageId:function(){return this.element.find(".page-tab.active").attr("pageId")},getPageById:function(a){var b=
this.options.reportModel.pages;if(b&&0<b.length)for(var c=0;c<b.length;c++)if(b[c].id===a)return b[c];return null},"{reportModel} change":function(a,b,c,d,e,h){switch(d){case "add":a=this.options.reportModel.pages.length;$(this.pageItemContainer).html(can.view(this.getTemplatePath(this.options.tmplPageItem),{pageList:this.options.reportModel.pages,isEditMode:this.options.isEditMode,pageCount:a}));var g=e[0].id;$(this.pageContentContainer).append(can.view(this.getTemplatePath(this.options.tmplPageContent),
{pageId:g}));var f=this;setTimeout(function(){f.activePage(g)},1);break;case "remove":e=h[0].id;$("#"+e).remove();$(".page-item-"+e).remove();var f=this,i=this.getSelectedPageId();i?setTimeout(function(){$(".page-item-"+i).removeClass("active").addClass("active");f.hideCloseButtonForSingleTab()},1):setTimeout(function(){f.activePage(f.getFirstPageId());f.hideCloseButtonForSingleTab()},1)}},hideCloseButtonForSingleTab:function(){1===this.options.reportModel.pages.length&&$(".closeTab",this.element).hide()},
titleEditMode:function(a){this.selectedTabLabel&&this.selectedTabInput&&(a?(this.selectedTabInput.show(),this.selectedTabLabel.hide()):(this.selectedTabInput.hide(),this.selectedTabLabel.show()))},updatePageTitle:function(a,b){for(var c=0;c<this.options.reportModel.pages.length;c++)if(this.options.reportModel.pages[c].id===a){this.options.reportModel.pages[c].title=b;this.selectedTabLabel.html(b);break}},".page-property click":function(){this.propertyModel=new PagePropertyModel;var a=$(".page-property-container",
this.element);$(a).control()&&($(a).control().destroy(),$(a).empty());$(a).page_property({pageController:this,propertyModel:this.propertyModel})},".add-page click":function(){this.addPage()},".page-tab dblclick":function(a){this.options.isEditMode&&(this.selectedPageId=$(a).attr("pageId"),this.selectedTabInput=$(".titleInput",a),this.selectedTabLabel=$(".titleLabel",a),this.titleEditMode(!0),this.selectedTabInput.focus())},".page-tab click":function(a){$(".titleLabel",$("#tabs")).show();$(".titleInput",
$("#tabs")).hide();a=a.attr("pageid");can.trigger(this.element,"setReportPageActive",a)},".titleInput click":function(a,b){b.preventDefault();b.stopPropagation()},".titleInput blur":function(){this.selectedTabInput.val()&&(this.updatePageTitle(this.selectedPageId,this.selectedTabInput.val()),this.titleEditMode(!1))},".closeTab click":function(a){for(var b=0,a=$(a).parent().closest(".page-tab").attr("pageId"),c=0;c<this.options.reportModel.pages.length;c++)if(this.options.reportModel.pages[c].id===
a){b=c;break}this.options.reportModel.pages.splice(b,1)},getTemplatePath:function(a){var b=[];this.options.basePath&&(b.push(this.options.basePath),/\/$/.test(this.options.basePath)||b.push("/"));this.options.templatesPath&&(b.push(this.options.templatesPath),/\/$/.test(this.options.templatesPath)||b.push("/"));b.push(a);return b.join("")}})});steal.executed("lib/sentrana/PageWidget/Page.js");
var PagePropertyModel=can.Map.extend({init:function(){this.setup({propertyChange:null});this.isEditMode=this.backColor=this.foreColor=null},setProperty:function(a,b,c){this.foreColor=a;this.backColor=b;this.isEditMode=c;this.attr("propertyChange","change")}});steal.executed("lib/sentrana/PageWidget/PropertyModel.js");
can.Control.extend("Sentrana.Controllers.PageProperty",{pluginName:"page_property",defaults:{}},{init:function(){this.updateView()},update:function(){this.updateView()},updateView:function(){this.fillPropertyValue();$(this.element).append(can.view(this.options.pageController.getTemplatePath("property-window.ejs"),{model:this.options.propertyModel}));var a=this,b=this.element.sentrana_dialog({app:this,title:"Property Window",buttons:[{id:"btnOk",label:"Ok",className:"btn-primary",callback:function(){var c=
$("#page-item-foreColor").val(),d=$("#page-item-backColor").val(),e=$("#editMode").is(":checked");a.options.propertyModel.setProperty(c,d,e);b.closeDialog()}},{id:"btnCancel",label:"Cancel",className:"btn-default",callback:function(){b.closeDialog()}}],closeOnEscape:!0,modal:!0,autoOpen:!0}).control()},"{propertyModel} change":function(a,b,c,d,e){switch(c){case "propertyChange":switch(e){case "change":this.options.pageController.options.isEditMode=this.options.propertyModel.isEditMode,this.options.pageController.renderPages(),
$(".nav-tabs li.active > a").css("color",this.options.propertyModel.foreColor),$(".page-tab > a").css("background",this.options.propertyModel.backColor),this.options.propertyModel.attr("propertyChange","")}}},setPropertyValue:function(){},fillPropertyValue:function(){this.options.propertyModel.foreColor=this.options.propertyModel.foreColor?this.options.propertyModel.foreColor:"#fff";this.options.propertyModel.backColor=$(".page-tab > a").attr("background");this.options.propertyModel.isEditMode=!0}});
steal.executed("lib/sentrana/PageWidget/PropertyController.js");can.Observe.extend("Sentrana.Models.ReportModel",{},{init:function(){this.setup({pages:[]})}});can.Observe.extend("Sentrana.Models.PageModel",{},{init:function(){this.setup({reportElements:[]});this.title=this.id=""}});steal.executed("lib/sentrana/PageWidget/PageModel.js");steal("lib/sentrana/LayoutWidgets/LayoutWidget.js","lib/sentrana/LayoutWidgets/css/layout-widget.css");steal.executed("lib/sentrana/LayoutWidgets/stealLayoutWidget.js");
can.Control.extend("Sentrana.Controllers.LayoutWidget",{pluginName:"sentrana_layout_widget",defaults:{app:null,colapsed:!0,fixedMenu:!1,leftMenus:null,rightMenus:null}},{init:function(){this.updateView()},updateView:function(){this.element.html(can.view("lib/sentrana/LayoutWidgets/templates/layout-widget.ejs",{leftMenus:this.options.leftMenus,rightMenus:this.options.rightMenus,caller:this}));this.$leftMenu=this.element.find(".layout-widget-menu-left");this.$rightMenu=this.element.find(".layout-widget-menu-right");
this.$leftMenuBg=this.element.find(".layout-widget-menu-bg-left");this.$rightMenuBg=this.element.find(".layout-widget-menu-bg-right");this.$leftMenuToggle=this.element.find(".layout-widget-menu-toggle-left");this.$rightMenuToggle=this.element.find(".layout-widget-menu-toggle-right");this.options.colapsed?(this.setExpandColapseClass(!0,"mmc"),this.setExpandColapseClass(!1,"mmc"),this.options.leftMenus&&0<this.options.leftMenus.length&&this.element.find(".layout-widget-wrapper").addClass("mmcl"),this.options.rightMenus&&
0<this.options.rightMenus.length&&this.element.find(".layout-widget-wrapper").addClass("mmcr")):(this.setExpandColapseClass(!0,"mme"),this.setExpandColapseClass(!1,"mme"),this.options.leftMenus&&0<this.options.leftMenus.length&&this.element.find(".layout-widget-wrapper").addClass("mmel"),this.options.rightMenus&&0<this.options.rightMenus.length&&this.element.find(".layout-widget-wrapper").addClass("mmer"));this.options.fixedMenu?(this.$leftMenuToggle.hide(),this.$rightMenuToggle.hide()):this.setTitleForToggleButton()},
setExpandColapseClass:function(a,b){a?(this.$leftMenu.removeClass("mmc mme"),this.$leftMenuBg.removeClass("mmc mme"),this.$leftMenuToggle.removeClass("mmc mme"),this.$leftMenu.addClass(b),this.$leftMenuBg.addClass(b),this.$leftMenuToggle.addClass(b)):(this.$rightMenu.removeClass("mmc mme"),this.$rightMenuBg.removeClass("mmc mme"),this.$rightMenuToggle.removeClass("mmc mme"),this.$rightMenu.addClass(b),this.$rightMenuBg.addClass(b),this.$rightMenuToggle.addClass(b))},getContentPanel:function(){return this.element.find(".layout-widget-content")},
".layout-widget-menu .navigation li > a mouseenter":function(a,b){var c=$(b.target).closest("li");c.parents().each(function(){$(this).removeClass("mouse-on")});c.addClass("mouse-on")},".layout-widget-menu .navigation li > a mouseleave":function(a,b){$(b.target).closest("li").removeClass("mouse-on")},".layout-widget-menu .navigation .mm-dropdown-root mouseenter":function(a){this.isCollapsed(a)&&(!this._dropdown_li||!$(this._dropdown_li).hasClass("freeze"))&&this.openDropdown(a)},".layout-widget-menu .navigation .mm-dropdown-root mouseleave":function(){this.closeCurrentDropdown()},
".layout-widget-menu .mm-dropdown > a click":function(a,b){var c=$(b.target).closest("li");c.hasClass("mm-dropdown-root")&&this.isCollapsed(a)?c.hasClass("mmc-dropdown-open")?c.hasClass("freeze")?this.closeCurrentDropdown(!0):this.freezeDropdown(c):this.openDropdown(c,!0):this.toggleSubmenu(c);return!1},".layout-widget-menu .navigation li > a click":function(a,b){var c=$(b.target).closest("li");c.hasClass("mm-dropdown")||(this.deselectMenu(a),c.addClass("active"),this.element.trigger("layout-page-main-menu-selected",
{menuId:c.attr("id")}));return!1},selectMenu:function(a){this.element.find(".layout-widget-menu .navigation").find("li#"+a).addClass("active")},deselectMenu:function(){this.element.find(".layout-widget-menu").find(".navigation").find("li").removeClass("active")},openDropdown:function(a,b){var c,d,e;null==b&&(b=!1);this._dropdown_li&&this.closeCurrentDropdown(b);c=$(a);d=c.find("> ul");e=d[0];this._dropdown_li=a;this._dropdown=e;d=d.find("> .mmc-title");d.length||(d=$('<div class="mmc-title"></div>').text(c.find("> a > .mm-text").text()),
e.insertBefore(d[0],e.firstChild));$(a).addClass("mmc-dropdown-open");$(e).addClass("mmc-dropdown-open-ul");b&&this.freezeDropdown(a);$(a).append(e)},clearCloseTimer:function(){this._close_timer&&(clearTimeout(this._close_timer),this._close_timer=null)},closeCurrentDropdown:function(a){null==a&&(a=!1);if(this._dropdown_li&&(!$(this._dropdown_li).hasClass("freeze")||a))this.clearCloseTimer(),a=$(this._dropdown),$(this._dropdown_li).append(this._dropdown),$(this._dropdown).removeClass("mmc-dropdown-open-ul"),
$(this._dropdown).removeClass("top"),$(this._dropdown_li).removeClass("mmc-dropdown-open"),$(this._dropdown_li).removeClass("freeze"),$(this._dropdown_li).attr("style",""),a.attr("style",""),this._dropdown_li=this._dropdown=null},freezeDropdown:function(a){$(a).addClass("freeze")},toggleSubmenu:function(a){this[$(a).hasClass("open")?"collapseSubmenu":"expandSubmenu"](a);return!1},collapseSubmenu:function(a){var b,c;b=$(a);c=b.find("> ul");c.animate({height:0},250,function(){return function(){$(a).removeClass("open");
c.attr("style","");return b.find(".mm-dropdown.open").removeClass("open").find("> ul").attr("style","")}}(a));return!1},expandSubmenu:function(a){var b,c,d;b=$(a).find("> ul");d=b[0];$(d).addClass("get-height");c=b.height();$(d).removeClass("get-height");d.style.display="block";d.style.height="0px";$(a).addClass("open");b.animate({height:c},250,function(){return function(){return b.attr("style","")}}(a))},renderMenu:function(a){return can.view.render("templates/page-layout-menu.ejs",{menu:a,caller:this})},
isCollapsed:function(a){return"C"===this.getMenuStatus(a)},getMenuStatus:function(a){return $(a).closest(".layout-widget-menu").hasClass("mmc")?"C":"A"},".layout-widget-menu-toggle click":function(a){this.resetMenuStyle();var b,c="Click here to expand the menu";$(a).hasClass("mmc")?(c="Click here to  collapse the menu",b="mme",$(a).hasClass("layout-widget-menu-toggle-left")?this.element.find(".layout-widget-wrapper").switchClass("mmcl","mmel"):this.element.find(".layout-widget-wrapper").switchClass("mmcr",
"mmer")):(b="mmc",$(a).hasClass("layout-widget-menu-toggle-left")?this.element.find(".layout-widget-wrapper").switchClass("mmel","mmcl"):this.element.find(".layout-widget-wrapper").switchClass("mmer","mmcr"));this.setExpandColapseClass($(a).hasClass("layout-widget-menu-toggle-left"),b);$(a).prop("title",c);this.element.trigger("layout-page-main-menu-toggled",{})},setTitleForToggleButton:function(){var a="Click here to collapse the menu";this.options.colapsed&&(a="Click here to expand the menu");this.element.find(".layout-widget-menu-toggle-left").prop("title",
a);this.element.find(".layout-widget-menu-toggle-right").prop("title",a)},resetMenuStyle:function(){this._dropdown_li&&this.closeCurrentDropdown(!0)}});steal.executed("lib/sentrana/LayoutWidgets/LayoutWidget.js");
steal("lib/sentrana/ReportChartCanJS/SentranaEnums.js","lib/sentrana/ReportChartCanJS/ReportChartOptions.js","lib/sentrana/ReportChartCanJS/ReportChartOptionsDialog.js","lib/sentrana/ReportChartCanJS/ReportChart.js").then("lib/sentrana/ReportChartCanJS/PivotChart/PivotChartOptions.js","lib/sentrana/ReportChartCanJS/PivotChart/PivotChartDataAdapter.js","lib/sentrana/ReportChartCanJS/PivotChart/PivotChart.js","lib/sentrana/ReportChartCanJS/css/reportChart.css");steal.executed("lib/sentrana/ReportChartCanJS/StealReportChart.js");
Sentrana.CHART_TYPE_LINE="line";Sentrana.CHART_TYPE_PIE="pie";Sentrana.CHART_TYPE_COLUMN="column";Sentrana.CHART_TYPE_BAR="bar";Sentrana.CHART_TYPE_STACKED_COLUMN="stacked column";Sentrana.CHART_TYPE_AREA="area";Sentrana.CHART_TYPE_STACKED_AREA="stacked area";Sentrana.CHART_TYPE_STACKED_BAR="stacked bar";Sentrana.CHART_TYPE_SCATTER="scatter";Sentrana.CHART_TYPE_HISTOGRAM="histogram";Sentrana.CHART_TYPE_GAUGE="gauge";Sentrana.CHART_TYPE_BUBBLE="bubble";Sentrana.CHART_TYPE_AREA_RANGE_LINE="arearange line";
Sentrana.CHART_TYPE_ERROR_BAR="error bar";Sentrana.CHART_TYPE_MAP="map";Sentrana.CHART_DEFAULT_XAXIS_ROTATION=0;Sentrana.CHART_CATEGORY_TITLE_MAX_LENGTH=15;Sentrana.ColType={};Sentrana.ColType.ATTRIBUTE="ATTRIBUTE";Sentrana.ColType.METRIC="METRIC";Sentrana.AttrValueType={};Sentrana.AttrValueType.TIMESERIES="TIMESERIES";Sentrana.AttrValueType.DISCRETESERIES="DISCRETESERIES";Sentrana.AttrValueType.CONTINUOUS_VALUES="CONTINUOUS_VALUES";Sentrana.AttrValueType.NA="NA";Sentrana.DataType={};
Sentrana.DataType.DATE="DATE";Sentrana.DataType.DATETIME="DATETIME";Sentrana.DataType.STRING="STRING";Sentrana.DataType.CURRENCY="CURRENCY";Sentrana.DataType.NUMBER="NUMBER";Sentrana.DataType.PERCENTAGE="PERCENTAGE";steal.executed("lib/sentrana/ReportChartCanJS/SentranaEnums.js");
(function(){Array.prototype.unique=function(){for(var a={},b=[],c=0,d=this.length;c<d;++c)a.hasOwnProperty(this[c])||(a[this[c]]=!0,b.push(this[c]));return b};Array.prototype.removeValue=function(a){return jQuery.grep(this,function(b){return b!==a})};can.Construct("Sentrana.ChartDataAdapter",{init:function(a){this.resultDataset=new Sentrana.Models.ResultDataset({data:a});this.attributeIndexArray=this.resultDataset.getIndexArray(Sentrana.ColType.ATTRIBUTE);this.metricIndexArray=this.resultDataset.getIndexArray(Sentrana.ColType.METRIC)},
populateChartOptions:function(a){var b=this.chartData=a.chartData,c=a.options;this.oldChartData=jQuery.extend(!0,{},b);a=this.chartOptions=a.getChartOptions();a.chart.renderTo=c.chart.renderTo;a.chart.height=c.chart.height;a.chart.width=c.chart.width;a.chart.type!==Sentrana.CHART_TYPE_SCATTER&&a.chart.type!==Sentrana.CHART_TYPE_BUBBLE&&this.chartType!==Sentrana.CHART_TYPE_HISTOGRAM&&(a.xAxis.categories=this.getArraySubset(this.resultDataset.getVerticalArrayFromDataSet(this.attributeIndexArray,"array"),
Sentrana.ColType.ATTRIBUTE,b.startPos,b.endPos,b.chartCollapseTail));a.setChartSeries(b.startPos,b.endPos,b.chartCollapseTail);this.createSyntheticSeries();a.title.text=null!==this.oldChartData.chartTextOptions.chartTitle?this.oldChartData.chartTextOptions.chartTitle:a.title.text;a.subtitle.text=null!==this.oldChartData.chartTextOptions.chartSubtitle?this.oldChartData.chartTextOptions.chartSubtitle:a.subtitle.text;a.setXAxisRotation(this.oldChartData.chartTextOptions.chartXLabelRotation||a.xAxis.labels.rotation);
a.xAxis.title&&(a.xAxis.title.text=this.oldChartData.chartTextOptions.chartXAxisLabel||this.getXAxisLabel());a.yAxis.title&&(a.yAxis.title.text=this.oldChartData.chartTextOptions.chartYAxisLabel||this.getYAxisLabel());c.chart.yAxisMin&&(a.yAxis.min="auto"===c.chart.yAxisMin.toLowerCase()?a.getYAxisIntersectValue(b.startPos,b.endPos,b.chartCollapseTail):parseInt(c.chart.yAxisMin,10));c.tooltip&&(a.tooltip=c.tooltip);delete a.reportChartController;return a},getChartTitle:function(){return this.getJoinedTitle(this.metricIndexArray)+
" by "+this.getJoinedTitle(this.attributeIndexArray)},getChartSubtitle:function(){return""},supportChartType:function(a){var b=this.attributeIndexArray.length,c=this.metricIndexArray.length;switch(a){case Sentrana.CHART_TYPE_PIE:return 1===b&&1===c;case Sentrana.CHART_TYPE_COLUMN:return 1<=c;case Sentrana.CHART_TYPE_BAR:return 1<=c;case Sentrana.CHART_TYPE_AREA:return 1<=c;case Sentrana.CHART_TYPE_STACKED_COLUMN:return 1<c||1<b&&1===c;case Sentrana.CHART_TYPE_STACKED_BAR:return 1<c||1<b&&1===c;case Sentrana.CHART_TYPE_STACKED_AREA:return 1<
c||1<b&&1===c;case Sentrana.CHART_TYPE_SCATTER:return 1<=b&&2===c;case Sentrana.CHART_TYPE_BUBBLE:return 3<=c;case Sentrana.CHART_TYPE_HISTOGRAM:return 1===c;case Sentrana.CHART_TYPE_MAP:return 1<=c;default:return!0}},defaultChartType:function(){var a=this.attributeIndexArray.length,b=this.metricIndexArray.length;return 1===a&&1===b||1===a&&1<b?this.resultDataset.hasTimeSeriesAttr()?Sentrana.CHART_TYPE_LINE:Sentrana.CHART_TYPE_COLUMN:2<=a&&1===b?Sentrana.CHART_TYPE_STACKED_COLUMN:1<a&&1<b?Sentrana.CHART_TYPE_COLUMN:
0===a&&1===b?Sentrana.CHART_TYPE_HISTOGRAM:1<=a&&2<=b?Sentrana.CHART_TYPE_SCATTER:3<=b?Sentrana.CHART_TYPE_BUBBLE:Sentrana.CHART_TYPE_LINE},getArraySubset:function(a,b,c,d,e){var h=[],d=d>a.length-1?a.length-1:d,h=a.slice(c,d+1);if(e&&d<a.length-1)if(b===Sentrana.ColType.METRIC){c=0;for(b=d+1;b<a.length;b++)c+=a[b];h.push({y:c,drilldown:{startPos:d+1}})}else if(b===Sentrana.ColType.ATTRIBUTE)h.push(this.chartData.chartCollapseItemName);else if(2===b){c=0;for(b=d+1;b<a.length;b++)c+=a[b][1];h.push({name:this.chartData.chartCollapseItemName,
y:c,drilldown:{startPos:d+1}})}return h},getDefaultSegAttrName:function(){return this.resultDataset.getColTitle(this.attributeIndexArray[this.attributeIndexArray.length-1])},getDefaultSegMetricName:function(){return this.resultDataset.getColTitle(this.metricIndexArray[0])},getJoinedTitle:function(a){for(var b=[],c=0;c<a.length;c++)b.push(this.resultDataset.getColTitle(a[c]));return b.join(", ")},getXAxisLabel:function(){return this.chartType===Sentrana.CHART_TYPE_SCATTER||this.chartType===Sentrana.CHART_TYPE_BUBBLE||
this.chartType===Sentrana.CHART_TYPE_HISTOGRAM?this.resultDataset.getColTitle(this.metricIndexArray[0]):this.getJoinedTitle(this.attributeIndexArray)},getYAxisLabel:function(){return this.chartType===Sentrana.CHART_TYPE_SCATTER||this.chartType===Sentrana.CHART_TYPE_BUBBLE?this.resultDataset.getColTitle(this.metricIndexArray[1]):this.chartType===Sentrana.CHART_TYPE_HISTOGRAM?"Count":this.getJoinedTitle(this.metricIndexArray)},createSyntheticSegmentedSeries:function(){var a=this.chartData.startPos,
b=this.chartData.endPos,c=this.chartOptions;c.chartType=Sentrana.CHART_TYPE_STACKED_COLUMN;this.autoSeg=!0;var d=[],e=[],h=this.resultDataset.getColumnIndexByName(this.chartData.chartSegAttrColumnName),g=this.resultDataset.getColumnIndexByName(this.chartData.chartSegMetricColumnName),f=this.attributeIndexArray.removeValue(h),d=this.getArraySubset(this.resultDataset.getVerticalArrayFromDataSet([h],"array"),Sentrana.ColType.ATTRIBUTE,a,b,!1),d=d.unique(),e=this.getArraySubset(this.resultDataset.getVerticalArrayFromDataSet(f,
"array"),Sentrana.ColType.ATTRIBUTE,a,b,!1),e=e.unique(),i=[],j,k;for(j=0;j<d.length;j++){var l=[];for(k=0;k<e.length;k++)l.push(0);i.push(l)}for(j=a;j<=b;j++){a=this.resultDataset.getRows()[j];l=[];for(k=0;k<a.cells.length;k++){var n=a.cells[k];-1!==jQuery.inArray(k,f)&&l.push(this.resultDataset.getCellValue(n,k))}k=1===l.length?jQuery.inArray(l[0],e):jQuery.inArray(l.join(", "),e);l=jQuery.inArray(this.resultDataset.getCellValue(a.cells[h],h),d);i[l][k]=a.cells[g].rawValue}for(j=0;j<d.length;j++)c.series[j]=
{name:d[j],data:i[j]};c.xAxis.categories=e;b=this.getJoinedTitle([h])+" "+this.getJoinedTitle(this.metricIndexArray)+" by "+this.getJoinedTitle(f);this.oldChartData.chartTextOptions.chartTitle=this.oldChartData.chartTextOptions.chartTitle||b;this.oldChartData.chartTextOptions.chartXAxisLabel=this.oldChartData.chartTextOptions.chartXAxisLabel||this.getJoinedTitle(f)},roundToSignifDigits:function(a,b){if(0===a)return 0;var c=Math.ceil(Math.log(Math.abs(a))/Math.LN10),c=Math.pow(10,b-c);return Math.round(a*
c)/c},computeBinEdges:function(a,b,c,d,e){for(var h=[],g=Infinity,f=-Infinity;d<=e;d++){var i=a[d].cells[b].rawValue;i<g&&(g=i);i>f&&(f=i)}a=f-g;if(0===a)return h[0]=Infinity,h;c=this.roundToSignifDigits(1*(a/c),1)/1;h[0]=Math.ceil(g/c)*c;for(d=1;!(h[d]=h[d-1]+c,h[d]>f);d++);return h},getBinIndexByValue:function(a,b){for(var c=0;c<a.length;c++)if(a[c]>b)return c;return a.length},createSyntheticBinnedSeries:function(){for(var a=this.chartData.startPos,b=this.chartData.endPos,c=this.chartOptions,d=
this.resultDataset.getColumnIndexByName(this.getDefaultSegMetricName()),e=this.chartData.binCount,h=this.resultDataset.getRows(),g=this.computeBinEdges(h,d,e,a,b),e=g.length,f=[],i=0;i<e;i++)f[i]=0;for(i=a;i<=b;i++)a=this.getBinIndexByValue(g,h[i].cells[d].rawValue),f[a]++;b=[];b[0]=f[0];for(i=1;i<f.length;i++)b[i]=b[i-1]+f[i];c.xAxis.categories=1<g.length?jQuery.map(g,function(a){return"<"+Highcharts.numberFormat(a)}):[h[0].cells[d].rawValue];d=[];h=b[b.length-1];for(i=0;i<g.length;i++)a="<b>",a+=
0<i?Highcharts.numberFormat(g[i-1]):"-Inf",a+=" - "+(isFinite(g[i])?Highcharts.numberFormat(g[i]):"Inf")+"</b><br>",a+="Current bin: "+Highcharts.numberFormat(f[i],0)+" ; "+Highcharts.numberFormat(100*f[i]/h,1)+"%<br>",a+="Cumulative: "+Highcharts.numberFormat(b[i],0)+" ; "+Highcharts.numberFormat(100*b[i]/h,1)+"%",d[i]=a;c.series[0].data=[];for(i=0;i<g.length;i++)c.series[0].data[i]={name:d[i],y:f[i]}},createSyntheticSeries:function(){this.chartData.chartAutoSegmentation&&this.chartOptions.chart.type!==
Sentrana.CHART_TYPE_PIE&&this.chartOptions.chart.type!==Sentrana.CHART_TYPE_GAUGE&&this.chartType!==Sentrana.CHART_TYPE_HISTOGRAM&&1<this.attributeIndexArray.length&&1<=this.metricIndexArray.length?this.createSyntheticSegmentedSeries():this.chartType===Sentrana.CHART_TYPE_HISTOGRAM&&1===this.metricIndexArray.length&&this.createSyntheticBinnedSeries()}});can.Construct("Sentrana.Models.ResultDataset",{},{init:function(a){$.extend(this,a.data);this.attributeIndexArray=this.getIndexArray(Sentrana.ColType.ATTRIBUTE);
this.metricIndexArray=this.getIndexArray(Sentrana.ColType.METRIC)},getRows:function(){return this.rows},getColInfos:function(){return this.colInfos},getColTitle:function(a){if(this.isNumber(a))return this.colInfos[a].title},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},getColumnIndexByName:function(a){var b=Number.NaN;$.each(this.colInfos,function(c,d){return d.title===a?(b=c,!1):!0});return b},getAttrColumnNames:function(){var a=[],b=this;$.each(this.attributeIndexArray,function(c,
d){a.push(b.colInfos[d].title)});return a},getMetricColumnNames:function(){var a=[],b=this;$.each(this.metricIndexArray,function(c,d){a.push(b.colInfos[d].title)});return a},hasCurrencyMetric:function(){var a=!0,b=this;$.each(this.metricIndexArray,function(c,d){a=a&&b.colInfos[d].dataType===Sentrana.DataType.CURRENCY});return a},hasPercentageMetric:function(){var a=!0,b=this;$.each(this.metricIndexArray,function(c,d){a=a&&b.colInfos[d].dataType===Sentrana.DataType.PERCENTAGE});return a},hasTimeSeriesAttr:function(){var a=
!1,b=this;$.each(this.attributeIndexArray,function(c,d){a=b.colInfos[d].attrValueType===Sentrana.AttrValueType.TIMESERIES;return!1});return a},getVerticalArrayFromDataSet:function(a,b){for(var c=[],d=this.getRows(),e=d.length,h=0;h<e;h++){var g=d[h];if(1===a.length)c.push(this.getCellValue(g.cells[a[0]],a[0]));else{for(var f={},f=[],i=0;i<a.length;i++)f.push(this.getCellValue(g.cells[a[i]],a[i]));f="join"===b?f.join(", "):f;c.push(f)}}return c},getCellValue:function(a,b){return this.colInfos[b].attrValueType===
Sentrana.AttrValueType.TIMESERIES?a.fmtValue&&"NULL"!==a.fmtValue?a.fmtValue:null:a.rawValue&&"NULL"!==a.rawValue?a.rawValue:null},getIndexArray:function(a){for(var b=[],c=0;c<this.colInfos.length;c++)this.colInfos[c].colType===a&&b.push(c);return b},getRowAttributeValues:function(a,b,c){for(var d=[],e=0;e<b.length;e++)e!==c&&a&&a.cells&&d.push(a.cells[b[e]].rawValue);return d.join(", ")}});can.Construct("Sentrana.Models.ChartOptions",{},{init:function(a){this.addChart();this.setDefaultColor();this.setCredits();
this.setTitle();this.setSubtitle();this.addYAxis();this.addLegend();this.addTooltip();this.addDefaultSeries();this.setDefaultNavigation();this.addXAxis(a.controller.options.showShortCategoryTitle);this.reportChartController=a.controller;a=this.reportChartController.chartAdapter;a.resultDataset.hasCurrencyMetric()?this.addCurrencyFormat():a.resultDataset.hasPercentageMetric()?this.addPercentageFormat():this.addDefaultFormat();this.setExportMenus()},addChart:function(){this.chart={renderTo:{},type:Sentrana.CHART_TYPE_LINE,
marginRight:10}},setDefaultColor:function(){this.colors="#613474 #FCC000 #C0200f #BE0067 #67A229 #C068E6 #B38900 #48731D #731409".split(" ")},setCredits:function(){this.credits={enabled:!1}},setTitle:function(){this.title={text:"default title"}},setSubtitle:function(){this.subtitle={text:"default subtitle"}},addYAxis:function(){this.yAxis={allowDecimals:!0,labels:{formatter:null},title:{text:""}}},addLegend:function(){this.legend={backgroundColor:null,reversed:!1,borderColor:null}},removeLegend:function(){this.legend.enabled=
!1},addTooltip:function(){this.tooltip={formatter:function(){return""+this.series.name+": "+this.y+""}}},removeTooltip:function(){this.tooltip.formatter=null},addDefaultSeries:function(){this.series=[{name:"",type:"",data:null}]},setDefaultNavigation:function(){this.navigation={buttonOptions:{enabled:!1}}},setExportMenus:function(){var a={exportButton:{enabled:this.reportChartController.options.chartExport.exporting.enabled,menuItems:this.reportChartController.options.chartExport.exporting.menuItems},
printButton:{enabled:this.reportChartController.options.chartExport.print.enabled}};this.reportChartController.options.chartExport.exporting.symbol&&(a.exportButton.symbol=this.reportChartController.options.chartExport.exporting.symbol,a.exportButton.borderWidth=0,a.exportButton.backgroundColor="white",a.exportButton.x=-18,a.exportButton.symbolX=6,a.exportButton.symbolY=4);this.reportChartController.options.chartExport.print.symbol&&(a.printButton.symbol=this.reportChartController.options.chartExport.print.symbol,
a.printButton.borderWidth=0,a.printButton.backgroundColor="white",a.printButton.x=-45,a.printButton.symbolX=6,a.printButton.symbolY=4);this.exporting={buttons:a,url:this.reportChartController.options.chartExport.url}},requestDrillMenu:function(a,b,c,d){c.options.model.requestDrillMenu(a,b,d)},setChart:function(a,b){b.chartData.attr("needRedraw",!1);b.chartData.attr("startPos",a);b.chartData.attr("needRedraw",!0);b.chartData.attr("endPos",a+b.chartAdapter.chartData.chartCollapseRowLimit-1)},addXAxis:function(a){this.xAxis=
{categories:[],title:{text:""},labels:{rotation:Sentrana.CHART_DEFAULT_XAXIS_ROTATION,align:"center",formatter:function(){if(a){var b="";switch(typeof this.value){case "string":b=this.value;break;case "object":b=this.value.join(", ")}if(b.length>Sentrana.CHART_CATEGORY_TITLE_MAX_LENGTH){var c=b.substring(0,Sentrana.CHART_CATEGORY_TITLE_MAX_LENGTH)+"...";return'<span title="'+b+'">'+c+"</span>"}}return this.value},useHTML:!0}}},setXAxisRotation:function(a){var b;b="bar"===this.chart.type?"right":0<
a?"left":0===a?"center":"right";null!==this.xAxis.labels?(this.xAxis.labels.rotation=a,this.xAxis.labels.align=b):(this.addXAxis(),this.setXAxisRotation(a))},addStackingPlotOptions:function(){this.plotOptions.series={stacking:"normal"}},getChartTooltipText:function(a,b,c,d){var e="",h,g,f,i,j;if(a.chartAdapter.chartType===Sentrana.CHART_TYPE_ERROR_BAR){h=0;g=b.name;f=b.linkedSeries[0].name;j=b.linkedSeries[0].data;for(e=0;e<j.length;e++)if(e===d){h=j[e].low;break}e=g+":"+this.getFormattedValue(a,
b,c)+", "+f+":"+this.getFormattedValue(a,b,h)}else if(a.chartAdapter.chartType===Sentrana.CHART_TYPE_AREA_RANGE_LINE){i=f=0;g=b.name;h=b.linkedSeries[0].name;j=b.linkedSeries[0].data;for(e=0;e<j.length;e++)if(e===d){f=j[e].low;i=j[e].high;break}e=g+":"+this.getFormattedValue(a,b,c)+", "+h+":"+this.getFormattedValue(a,b,f)+"-"+this.getFormattedValue(a,b,i)}else if(a.chartAdapter.chartType===Sentrana.CHART_TYPE_PIE){a="";for(e=c=0;e<b.points.length;e++)if(e===d){a=b.points[e].name;c=b.points[e].percentage;
break}e=a+": "+Highcharts.numberFormat(c,2)+" %"}else e=""+b.name+": "+this.getFormattedValue(a,b,c);return e},getFormattedValue:function(a,b,c){var d="";a&&a.chartAdapter&&(a=a.chartAdapter,d=a.resultDataset.hasCurrencyMetric()?this.getNumberFormat(b,c,"$"):a.resultDataset.hasPercentageMetric()?Highcharts.numberFormat(100*c,2)+" %":this.getNumberFormat(b,c,""));return d},getNumberFormat:function(a,b,c){var d=this.getDecimalCount(b,".");return(a=a.formatString?a.formatString:void 0)?this.dotNetFormatter(b,
a):c+Highcharts.numberFormat(b,2>d?d:2)},getDrillablePointer:function(){var a=this,b=Sentrana.CHART_TYPE_PIE,c=a.reportChartController;return{cursor:"pointer",point:{events:{click:function(d){if(c.options.allowClickEvent){var e=[];if(a.chart.type===b||c.chartAdapter.chartType===Sentrana.CHART_TYPE_AREA_RANGE_LINE)e.push(this.name);else switch(typeof this.category){case "string":case "number":e.push($.trim(this.category));break;case "object":$.each(this.category,function(a,b){e.push($.trim(b))})}c.chartAdapter.autoSeg&&
e.push(this.series.name);e.push(this.y);if(e[0]===c.chartAdapter.chartData.chartCollapseItemName)c.options.disableOtherDrilldown||((d=this.drilldown)?a.setChart(d.startPos,c):a.setChart(0,c));else{var h=a.getChartTooltipText(c,this.series,this.y,this.x);a.requestDrillMenu(e,d,c,h)}}c.chart_element_clicked()}}},events:{legendItemClick:function(){c.chart_element_clicked()}}}},addCurrencyFormat:function(){this.addNumberFormat("$")},addPercentageFormat:function(){this.yAxis.labels.formatter=function(){return Highcharts.numberFormat(100*
this.value,2)+" %"};this.tooltip.formatter=function(){return""+this.series.name+": "+Highcharts.numberFormat(100*this.y,2)+" %"}},addDefaultFormat:function(){this.addNumberFormat("")},addNumberFormat:function(a){var b=this;this.yAxis.labels.formatter=function(){var c;if(1E6<=Math.abs(this.value))return c=b.getAxisLabelDecimalCount(this.value/1E6),a+Highcharts.numberFormat(this.value/1E6,c)+"M ";if(1E3<=Math.abs(this.value))return c=b.getAxisLabelDecimalCount(this.value/1E3),a+Highcharts.numberFormat(this.value/
1E3,c)+"K ";c=b.getAxisLabelDecimalCount(this.value);return a+Highcharts.numberFormat(this.value,c)};this.tooltip.formatter=function(){var c=b.getDecimalCount(this.y,"."),d=this.series.formatString?this.series.formatString:void 0;return d?""+this.series.name+": "+b.dotNetFormatter(this.y,d):""+this.series.name+": "+a+Highcharts.numberFormat(this.y,2>c?c:2)}},getAxisLabelDecimalCount:function(a){a=this.getDecimalCount(a,".");return 2<a?2:a},addIntegerFormat:function(){this.yAxis.labels.formatter=null;
this.yAxis.labels.format="{value:,.0f}";this.yAxis.allowDecimals=!1;this.yAxis.minTickInterval=1},dotNetFormatter:function(a,b){if(!b)return a;var c=b;if(-1<b.indexOf("N")||-1<b.indexOf("C")){-1<b.indexOf("N")&&(c="#,#");-1<b.indexOf("C")&&(c="$#,#");for(var d=parseInt(b.substr(1,b.length-1),10),e=0;e<d;e++)0===e&&(c+="."),c+="0"}return String.format("{0:"+c+"}",a)},setChartSeries:function(a,b,c){var d=this.reportChartController.chartAdapter;this.series=[];this.formatString=[];var e=this;$.each(d.metricIndexArray,
function(h,g){e.series[h]={name:d.resultDataset.getColTitle(g),data:d.getArraySubset(d.resultDataset.getVerticalArrayFromDataSet([g],"array"),Sentrana.ColType.METRIC,a,b,c)};var f=e.series[h].name,i=$.grep(d.resultDataset.colInfos,function(a){return a.title===f});e.formatString[f]=i[0].formatString})},getYAxisIntersectValue:function(a,b,c){var d=[],e=this.reportChartController.chartAdapter;$.each(e.metricIndexArray,function(h,g){var f=e.getArraySubset(e.resultDataset.getVerticalArrayFromDataSet([g],
"array"),Sentrana.ColType.METRIC,a,b,c).map(function(a){return $.isNumeric(a)?a:null}),f=Math.min.apply(Math,$.grep(f,function(a){return a}));d.push(f)});return Math.min.apply(Math,d)},validateData:function(){return null},getDecimalCount:function(a,b){var c=a+"";return-1<c.indexOf(b)?c.length-c.indexOf(b)-1:0}});Sentrana.Models.ChartOptions("Sentrana.Models.LineChartOptions",{init:function(a){this._super(a);this.chart.type=Sentrana.CHART_TYPE_LINE;this.setPlotOptions()},setPlotOptions:function(){this.plotOptions=
{line:this.getDrillablePointer()}}});Sentrana.Models.ChartOptions("Sentrana.Models.AreaChartOptions",{init:function(a){this._super(a);this.chart.type="area";this.setPlotOptions()},setPlotOptions:function(){this.plotOptions={line:this.getDrillablePointer()}}});Sentrana.Models.AreaChartOptions("Sentrana.Models.StackedAreaChartOptions",{init:function(a){this._super(a);this.addStackingPlotOptions()}});Sentrana.Models.ChartOptions("Sentrana.Models.PieChartOptions",{init:function(a){this._super(a);this.chart.type=
Sentrana.CHART_TYPE_PIE;this.setPlotOptions();this.tooltip=this.getPieToolTip()},setPlotOptions:function(){this.plotOptions={pie:this.getDrillablePointer()}},getPieToolTip:function(){return{formatter:function(){return"<b>"+this.point.name+"</b>: "+Highcharts.numberFormat(this.percentage,2)+" %"}}},setChartSeries:function(a,b,c){var d=this.reportChartController.chartAdapter;this.series[0].name=d.resultDataset.getColTitle(d.metricIndexArray[0]);this.series[0].data=d.getArraySubset(d.resultDataset.getVerticalArrayFromDataSet([d.attributeIndexArray[0],
d.metricIndexArray[0]],"array"),2,a,b,c)},containNegativeValue:function(a){var b=!1;$.each(a,function(a,d){return 0>d[1]||0>d.y?(b=!0,!1):!0});return b},validateData:function(){return this.containNegativeValue(this.series[0].data)?"Your data set contains metrics with negative values. Please try sorting the data in descending order and limiting the data range.":null}});Sentrana.Models.ChartOptions("Sentrana.Models.HistogramChartOptions",{init:function(a){this._super(a);this.chart.type="column";this.addIntegerFormat();
this.removeLegend();this.setHistogramTooltip();this.setPlotOptions();this.plotOptions.column.pointPadding=0;this.plotOptions.column.groupPadding=0;this.plotOptions.column.borderWidth=0;this.xAxis.labels.rotation=45},setHistogramTooltip:function(){this.tooltip={formatter:function(){return this.point.name}}},setPlotOptions:function(){this.plotOptions={column:this.getDrillablePointer()}}});Sentrana.Models.ChartOptions("Sentrana.Models.ColumnChartOptions",{init:function(a){this._super(a);this.chart.type=
"column";this.setPlotOptions()},setPlotOptions:function(){this.plotOptions={column:this.getDrillablePointer()}}});Sentrana.Models.ChartOptions("Sentrana.Models.BarChartOptions",{init:function(a){this._super(a);this.chart.type="bar";this.chart.marginRight=30;this.setPlotOptions()},setPlotOptions:function(){this.plotOptions={bar:this.getDrillablePointer()}}});Sentrana.Models.ColumnChartOptions("Sentrana.Models.StackedColumnChartOptions",{init:function(a){this._super(a);this.addStackingPlotOptions()}});
Sentrana.Models.BarChartOptions("Sentrana.Models.StackedBarChartOptions",{init:function(a){this._super(a);this.addStackingPlotOptions()}});Sentrana.Models.ChartOptions("Sentrana.Models.ScatterChartOptions",{init:function(a){this._super(a);this.chart.type="scatter";this.chart.marginRight=30;this.chart.zoomType="xy";this.addXAxis();this.setPlotOptions();this.setScatterToolTip()},setDefaultColor:function(){this.colors="rgba(97,52,116,0.4) rgba(252,192,0,0.4) rgba(192,32,15,0.4) rgba(190,0,103,0.4) rgba(103,162,41,0.4) rgba(192,104,230,0.4) rgba(179,137,0,0.4) rgba(72,115,29,0.4) rgba(115,20,9,0.4)".split(" ")},
setChartSeries:function(a,b){for(var c=this.reportChartController.chartAdapter,d=c.resultDataset.getColumnIndexByName(c.chartData.chartLegendAttrColumnName),e=c.attributeIndexArray.length,h=c.attributeIndexArray.length+1,g=[],g=isNaN(d)?[""]:c.getArraySubset(c.resultDataset.getVerticalArrayFromDataSet([d],"array"),Sentrana.ColType.ATTRIBUTE,a,b,!1),g=g.unique(),f=[],i=0;i<g.length;i++)f.push([]);this.xFormatString=c.resultDataset.colInfos[e].formatString;this.yFormatString=c.resultDataset.colInfos[h].formatString;
for(i=a;i<=b;i++){var j=c.resultDataset.getRows()[i],k=0;isNaN(d)||(k=jQuery.inArray(c.resultDataset.getCellValue(j.cells[d],d),g));f[k].push({name:c.resultDataset.getRowAttributeValues(j,c.attributeIndexArray,d),x:j.cells[e].rawValue,y:j.cells[h].rawValue})}this.series=[];for(i=0;i<g.length;i++)d=Sentrana.Dashboard?Sentrana.Dashboard.Settings.SHOW_SCATTER_REGRESSION_LINE||!1:!0,this.series[i]={regression:d,regressionSettings:{type:"linear",color:"rgba(223, 83, 83, .9)",label:"%eq"},showInLegend:""===
g[i]?!1:!0,name:g[i],data:f[i]};this.xAxis.title.text=c.resultDataset.getColTitle(e);this.yAxis.title.text=c.resultDataset.getColTitle(h)},addXAxis:function(){this.xAxis={title:{enabled:!0,text:""},labels:{rotation:Sentrana.CHART_DEFAULT_XAXIS_ROTATION,align:"center"},startOnTick:!0,endOnTick:!0,showLastLabel:!0}},setPlotOptions:function(){var a=this,b=a.reportChartController;this.plotOptions={scatter:{marker:{radius:5,states:{hover:{enabled:!0,lineColor:"rgb(100,100,100)"}}},point:{events:{click:function(c){if(b.options.allowClickEvent){var d=
[];$.each((this.name+"").split(","),function(a,b){d.push($.trim(b))});d.push(this.y);if(d[0]===b.chartAdapter.chartData.chartCollapseItemName)b.options.disableOtherDrilldown||((c=this.drilldown)?a.setChart(c.startPos,b):a.setChart(0,b));else{var e=a.getChartTooltipText(b,this.series,this.y,this.x);a.requestDrillMenu(d,c,b,e)}}b.chart_element_clicked()}}},states:{hover:{marker:{enabled:!1}}}},series:{turboThreshold:"15000"}}},setScatterToolTip:function(){var a=this;this.tooltip={crosshairs:!1,formatter:function(){var b=
this.series.options.showInLegend?"<strong>"+this.series.name+"</strong><br>":"",c=""===this.point.name?"":"<strong>"+this.point.name+"</strong><br>",d=a.xFormatString?a.dotNetFormatter(this.point.x,a.xFormatString):this.point.x,e=a.yFormatString?a.dotNetFormatter(this.point.y,a.yFormatString):this.point.y;return b+c+" x: <strong>"+d+"</strong><br> y: <strong>"+e+"</strong>"}}}});Sentrana.Models.ChartOptions("Sentrana.Models.UsMapChartOptions",{init:function(a){this._super(a);this.chart.type="map";
this.chart.width=400;this.legend={backgroundColor:"rgb(255, 255, 255)"};this.colorAxis={min:0,minColor:"#F0E0FF",maxColor:"#3D2E4C",stops:[[0,"#F0E0FF"],[0.67,"#CC99FF"],[1,"#3D2E4C"]]};this.mapNavigation={enabled:!0};this.removeCategories();this.setMapTooltip();this.setPlotOptions();this.yAxis.title=null;this.xAxis.title=null},removeCategories:function(){delete this.xAxis.categories},setPlotOptions:function(){var a=this,b=a.reportChartController;this.plotOptions={map:{point:{events:{click:function(c){if(b.options.allowClickEvent){var d=
[];$.each((this.code+"").split(","),function(a,b){b&&d.push($.trim(b))});0===d.length&&d.push(this.code.toUpperCase());d.push(this.y);if(d[0]===b.chartAdapter.chartData.chartCollapseItemName)b.options.disableOtherDrilldown||((c=this.drilldown)?a.setChart(c.startPos,b):a.setChart(0,b));else{var e=a.getChartTooltipText(this.name,this.value);a.requestDrillMenu(d,c,b,e)}}b.chart_element_clicked()}}},states:{hover:{color:"#00CC00"}}}}},getChartTooltipText:function(a){return a},setMapTooltip:function(){var a=
this;this.tooltip={formatter:function(){return(""===this.point.name?"":this.point.name)+": "+a.dotNetFormatter(this.point.value,a.xFormatString)}}},removeTooltip:function(){this.tooltip.formatter=null},setChartSeries:function(a,b){for(var c=this.reportChartController.chartAdapter,d=c.resultDataset.getColumnIndexByName(c.chartData.chartLegendAttrColumnName),e=c.resultDataset.getColumnIndexByName("hc_key"),h=c.attributeIndexArray.length,g=[],g=isNaN(d)?[""]:c.getArraySubset(c.resultDataset.getVerticalArrayFromDataSet([d],
"join"),Sentrana.ColType.ATTRIBUTE,a,b,!1),g=g.unique(),f=[],i=0;i<g.length;i++)f.push([]);this.xFormatString=c.resultDataset.colInfos[h].formatString;for(i=a;i<=b;i++){var j=c.resultDataset.getRows()[i];if(j){var k=0;isNaN(d)||(k=jQuery.inArray(c.resultDataset.getCellValue(j.cells[d],d),g));f[k].push({code:c.resultDataset.getRowAttributeValues(j,c.attributeIndexArray,e),value:j.cells[h].rawValue,"hc-key":j.cells[e].rawValue})}}this.series=[];for(i=0;i<g.length;i++)this.series[i]={mapData:this.reportChartController.options.chart.mapData,
joinBy:"hc-key",dataLabels:{enabled:!0,color:"white",format:"{point.code}"},name:c.chartData.chartSegMetricColumnName,data:f[i]};this.removeCategories()}});Sentrana.Models.ChartOptions("Sentrana.Models.BubbleChartOptions",{init:function(a){this._super(a);this.chart.type="bubble";this.chart.zoomType="xy";this.removeCategories();this.setBubbleToolTip()},setChartSeries:function(a,b){for(var c=this.reportChartController.chartAdapter,d=c.resultDataset.getColumnIndexByName(c.chartData.chartLegendAttrColumnName),
e=c.attributeIndexArray.length,h=c.attributeIndexArray.length+1,g=c.attributeIndexArray.length+2,f=[],f=isNaN(d)?[""]:c.getArraySubset(c.resultDataset.getVerticalArrayFromDataSet([d],"array"),Sentrana.ColType.ATTRIBUTE,a,b,!1),f=f.unique(),i=[],j=0;j<f.length;j++)i.push([]);this.xFormatString=c.resultDataset.colInfos[e].formatString;this.yFormatString=c.resultDataset.colInfos[h].formatString;this.zFormatString=c.resultDataset.colInfos[g].formatString;for(j=a;j<=b;j++)if(j<c.resultDataset.rows.length){var k=
c.resultDataset.getRows()[j],l=0;isNaN(d)||(l=jQuery.inArray(c.resultDataset.getCellValue(k.cells[d],d),f));i[l].push({name:c.resultDataset.getRowAttributeValues(k,c.attributeIndexArray,d),x:k.cells[e].rawValue,y:k.cells[h].rawValue,z:k.cells[g].rawValue})}this.series=[];for(j=0;j<f.length;j++)this.series[j]={showInLegend:""===f[j]?!1:!0,name:f[j],data:i[j]};this.xAxis.title.text=c.resultDataset.getColTitle(e);this.yAxis.title.text=c.resultDataset.getColTitle(h)},removeCategories:function(){delete this.xAxis.categories},
setBubbleToolTip:function(){var a=this;this.tooltip={formatter:function(){return(this.series.options.showInLegend?"<b>"+this.series.name+"</b><br>":"")+(""===this.point.name?"":this.point.name+"<br>")+"("+a.dotNetFormatter(this.point.x,a.xFormatString)+", "+a.dotNetFormatter(this.point.y,a.yFormatString)+"), Size: "+a.dotNetFormatter(this.point.z,a.zFormatString)}}}});Sentrana.Models.ChartOptions("Sentrana.Models.GaugeChartOptions",{init:function(a){this._super(a);this.chart.type="gauge"},pane:{startAngle:-150,
endAngle:150},yAxis:{labels:{formatter:null,step:2,rotation:"auto"},title:{text:""}},setChartSeries:function(){var a=this.reportChartController.chartAdapter,b=parseInt(a.resultDataset.rows[0].cells[1].rawValue,10),c=parseInt(a.resultDataset.rows[0].cells[2].rawValue,10),d=a.resultDataset.rows[0].cells[3].rawValue,a=a.resultDataset.colInfos[3].title;this.yAxis={min:b,max:c,allowDecimals:!0,minorTickInterval:"auto",minorTickWidth:1,minorTickLength:2,minorTickPosition:"inside",minorTickColor:"#666",
tickPixelInterval:30,tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666",labels:{formatter:null,step:2,rotation:"auto"},title:{text:""}};this.series=[{name:a,data:[d],tooltip:{valueSuffix:""}}]}});Sentrana.Models.ChartOptions("Sentrana.Models.AreaRangeLine",{init:function(a){this._super(a);this.chart.zoomType="xy";this.setPlotOptions();this.resultData=this.reportChartController.chartAdapter.resultDataset},setPlotOptions:function(){this.plotOptions={line:this.getDrillablePointer()}},getAttributeIndex:function(){for(var a=
-1,b=0;b<this.resultData.colInfos.length;b++)if(this.resultData.colInfos[b].colType===Sentrana.ColType.ATTRIBUTE){a=b;break}return a},getLowRangeIndex:function(){for(var a=-1,b=0;b<this.resultData.colInfos.length;b++){var c=this.resultData.colInfos[b];if(1===c.dataBehavior&&c.colType===Sentrana.ColType.METRIC){a=b;break}}return a},getHighRangeIndex:function(){for(var a=-1,b=0;b<this.resultData.colInfos.length;b++){var c=this.resultData.colInfos[b];if(2===c.dataBehavior&&c.colType===Sentrana.ColType.METRIC){a=
b;break}}return a},getActualValueIndex:function(){for(var a=-1,b=0;b<this.resultData.colInfos.length;b++){var c=this.resultData.colInfos[b];if(4===c.dataBehavior&&c.colType===Sentrana.ColType.METRIC){a=b;break}}return a},setChartSeries:function(a,b){for(var c=[],d=[],e=this.getAttributeIndex(),h=this.getLowRangeIndex(),g=this.getHighRangeIndex(),f=this.getActualValueIndex(),i=0,j=0,k=0,l=0,n=this.resultData.rows,o=0;o<n.length;o++)if(o>=a&&o<=b){for(var t=n[o],s=[],q=[],m=0;m<t.cells.length;m++){var r=
t.cells[m];m===h?j=r.rawValue:m===g?k=r.rawValue:m===f?l=r.rawValue:m===e&&(i=r.fmtValue)}q.push(i);q.push(l);d.push(q);s.push(i);s.push(j);s.push(k);c.push(s)}e="";this.resultData.colInfos&&this.resultData.colInfos[f]&&(e=this.resultData.colInfos[f].title);this.xAxis={type:"category",labels:{rotation:0},title:{text:""}};this.yAxis={title:{text:""}};this.tooltip={shared:!0};this.series=[{name:e,data:d,marker:{fillColor:"white",lineWidth:2,lineColor:Highcharts.getOptions().colors[0]},showInLegend:!0,
zIndex:1,tooltip:{pointFormat:'<span style="font-weight: bold; color: {series.color}">{series.name}</span>: <b>{point.y}</b>'}},{name:"Range",data:c,type:"arearange",lineWidth:0,linkedTo:":previous",color:Highcharts.getOptions().colors[0],fillOpacity:0.3,zIndex:0,tooltip:{pointFormat:'<span style="font-weight: bold; color: {series.color}"> {series.name}</span>: <b>{point.low}-{point.high}</b>'}}]}});Sentrana.Models.ChartOptions("Sentrana.Models.ErrorBar",{init:function(a){this._super(a);this.chart.zoomType=
"xy";this.chart.marginRight=20;this.setPlotOptions();this.resultData=this.reportChartController.chartAdapter.resultDataset},setPlotOptions:function(){this.plotOptions={column:this.getDrillablePointer()}},getAttributeIndex:function(){for(var a=-1,b=0;b<this.resultData.colInfos.length;b++)if(this.resultData.colInfos[b].colType===Sentrana.ColType.ATTRIBUTE){a=b;break}return a},getPredictedValueIndex:function(){for(var a=-1,b=0;b<this.resultData.colInfos.length;b++){var c=this.resultData.colInfos[b];
if(3===c.dataBehavior&&c.colType===Sentrana.ColType.METRIC){a=b;break}}return a},getActualValueIndex:function(){for(var a=-1,b=0;b<this.resultData.colInfos.length;b++){var c=this.resultData.colInfos[b];if(4===c.dataBehavior&&c.colType===Sentrana.ColType.METRIC){a=b;break}}return a},setChartSeries:function(a,b){for(var c=[],d=[],e=[],h=this.getAttributeIndex(),g=this.getPredictedValueIndex(),f=this.getActualValueIndex(),i=0,j=0,k=0,l=this.resultData.rows,n=0;n<l.length;n++)if(n>=a&&n<=b){for(var o=
l[n],t=[],s=0;s<o.cells.length;s++){var q=o.cells[s];s===g?j=q.rawValue:s===f?k=q.rawValue:s===h&&(i=q.fmtValue)}c.push(i);e.push(k);t.push(j);t.push(j);d.push(t)}h="";this.resultData.colInfos&&this.resultData.colInfos[g]&&(h=this.resultData.colInfos[g].title);g="";this.resultData.colInfos&&this.resultData.colInfos[f]&&(g=this.resultData.colInfos[f].title);this.xAxis={categories:c,labels:{rotation:0},title:{text:""}};this.yAxis=[{labels:{formatter:function(){return this.value},style:{color:"#89A54E"}},
title:{text:"",style:{color:"#89A54E"}}},{title:{text:this.reportChartController.chartAdapter.chartData.chartTextOptions.chartYAxisLabel,style:{color:"#4572A7"}},labels:{formatter:function(){return this.value},style:{color:"#4572A7"}}}];this.tooltip={shared:!0};this.series=[{name:g,type:"column",data:e,color:"#4572A7",yAxis:1,showInLegend:!0,zIndex:0,tooltip:{pointFormat:'<span style="font-weight: bold; color: {series.color}">{series.name}</span>: <b>{point.y}</b>'}},{name:h,type:"errorbar",data:d,
yAxis:1,color:"#C14A34",zIndex:1,showInLegend:!1,lineWidth:2,tooltip:{pointFormat:'<span style="font-weight: bold; color: {series.color}"> {series.name}</span>: <b>{point.low}</b>'}}]}})})();steal.executed("lib/sentrana/ReportChartCanJS/ReportChartOptions.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Controllers.ChartUserOptionsDialog",{pluginName:"sentrana_chart_user_options_dialog",defaults:{model:null,title:"Chart Options",autoOpen:!1,onCancel:null,onOk:null,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.toggleAttrColumnSeg($(".input-auto-seg",this.element));this.initTips()},open:function(){this.openDialog()},
getOptionValue:function(a,b,c){a=$("."+a,this.element);c=c?a.prop("checked")?!0:!1:a.val();return 0!==a.length?c:b},".input-auto-seg change":function(a){this.toggleAttrColumnSeg(a,!0)},".input-chart-collapse-row-limit keypress":function(a,b){var c=b.which?b.which:b.keyCode;return 48>c||57<c?!1:!0},".user-option-checkbox-text click":function(a){null===window.navigator.userAgent.match(/iPad/i)&&this.checkUncheckSiblingCheckbox(a)},".user-option-checkbox-text touchstart":function(a){this.checkUncheckSiblingCheckbox(a)},
checkUncheckSiblingCheckbox:function(a){a=$("input:checkbox",a.parent());"disabled"!==a.attr("disabled")&&(a.prop("checked")?a.prop("checked",!1):a.prop("checked",!0))},toggleAttrColumnSeg:function(a,b){var c=$(".attr-to-segment-container",this.element),d=$(".metric-to-segment-container",this.element),e=$(".collapse-tail-container",this.element);a.prop("checked")?b?(c.fadeIn(),d.fadeIn(),e.fadeOut()):(c.show(),d.show(),e.hide()):b?(c.fadeOut(),d.fadeOut(),e.fadeIn()):(c.hide(),d.hide(),e.show())},
initTips:function(){$.fn.qtip&&($(".lbl-chart-title",this.element).qtip({content:"You can change the title of the chart by changing the option value here."}),$(".lbl-chart-subtitle",this.element).qtip({content:"You can change the subtitle of the chart by changing the option value here."}),$(".lbl-x-axis-label",this.element).qtip({content:"You can change the X-Axis label of the chart by changing the option value here."}),$(".lbl-y-axis-label",this.element).qtip({content:"You can change the Y-Axis label of the chart by changing the option value here."}),
$(".lbl-x-axis-label-rotation",this.element).qtip({content:"You can change the X-Axis label rotation of the chart by changing the option value here."}),$(".lbl-chart-collapse-item-name",this.element).qtip({content:"You can change collapsed item category name on the chart by changing the option value here."}),$(".lbl-chart-collapse-row-limit",this.element).qtip({content:"You can change the row limit before we collapse row records by changing the option value here."}),$(".lbl-collapse-tail",this.element).qtip({content:"By default this option is checked. All the rows after Chart Collapse Row Limit will be collapsed into one record. The category name for this one record will be named using value in option Chart Collapse Item Name.<br/>If Auto Segmentation is selected, this option will be invalid as collapsing and segmentation are not compatible."}),
$(".lbl-auto-segmentation",this.element).qtip({content:"This option will be valid when you are creating a report containing one metric and more than one attribute. If this option is checked, the application will automatically create a segmented chart based on the report you have defined. The basic idea is pivoting on one of the attribute columns. For each of the distinct values under that attribute, a pivoted series will be created."}),$(".lbl-attribute-to-segment",this.element).qtip({content:"When Auto Segmentation option is selected, this drop down list will show up. You can change the attribute column to segment your chart."}),
$(".lbl-bin-count",this.element).qtip({content:"You can change the approximate number of histogram bins here."}))},handleCANCEL:function(){this.options.reportChartController.element.trigger("chart_option_dialog_cancel");this.closeDialog(this.options.onCancel)},handleOK:function(){var a=this.options.model,b={chartTitle:this.getOptionValue("input-chart-option-dial-title",a.attr("chartTextOptions").chartTitle),chartSubtitle:this.getOptionValue("input-chart-option-dial-subtitle",a.attr("chartTextOptions").chartSubtitle),
chartXAxisLabel:this.getOptionValue("input-x-axis-label",a.attr("chartTextOptions").chartXAxisLabel),chartYAxisLabel:this.getOptionValue("input-y-axis-label",a.attr("chartTextOptions").chartYAxisLabel),chartXLabelRotation:Number(this.getOptionValue("select-x-axis-label-rotation",a.attr("chartTextOptions").chartXLabelRotation))};a.attr("chartTextOptions",b);a.attr("chartCollapseItemName",this.getOptionValue("input-chart-collapse-item-name",a.attr("chartCollapseItemName")));0<$(".input-chart-collapse-row-limit",
this.element).length&&a.attr("chartCollapseRowLimit",Number(this.getOptionValue("input-chart-collapse-row-limit",a.attr("chartCollapseRowLimit"))));a.attr("chartLegendAttrColumnName",this.getOptionValue("select-legend-attribute",a.attr("chartLegendAttrColumnName")));a.attr("chartCollapseTail",this.getOptionValue("input-collapse-tail",a.attr("chartCollapseTail"),!0));a.attr("chartAutoSegmentation",this.getOptionValue("input-auto-seg",a.attr("chartAutoSegmentation"),!0));a.attr("chartSegAttrColumnName",
this.getOptionValue("select-attr-to-segment",a.attr("chartSegAttrColumnName")));a.attr("chartSegMetricColumnName",this.getOptionValue("select-metric-to-segment",a.attr("chartSegMetricColumnName")));0!==$(".select-bin-count",this.element).length&&a.attr("binCount",Number(this.getOptionValue("select-bin-count",a.attr("binCount"))));this.options.reportChartController.element.trigger("chart_option_dialog_ok",a);this.closeDialog(this.options.onOk)},"button.close click":function(a,b){b.preventDefault();
this.handleCANCEL()}})});steal.executed("lib/sentrana/ReportChartCanJS/ReportChartOptionsDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js","lib/sentrana/DialogControl/ConfirmDialog.js",function(){can.Observe.extend("Sentrana.Models.ChartData",{},{init:function(){this.setup({reportData:null,needRedraw:!1,chartType:null,chartTextOptions:{chartTitle:null,chartSubtitle:null,chartXAxisLabel:null,chartYAxisLabel:null,chartXLabelRotation:null},chartCollapseItemName:"Other",chartCollapseRowLimit:12,chartLegendAttrColumnName:null,chartCollapseTail:!0,chartAutoSegmentation:!1,chartSegAttrColumnName:null,
chartSegMetricColumnName:null,chartAttrColumnNames:[],chartMetricColumnNames:[],startPos:0,endPos:9,chartHeight:400,chartOptionHeightOffset:25,chartWarningHeightOffset:25,binCount:25})}});can.Control.extend("Sentrana.Controllers.ReportChart",{pluginName:"sentrana_report_chart",reportChartID:0,defaults:{basePath:"lib/sentrana/ReportChartCanJS/",chartOptionsTemplate:"templates/rc_chartOptions.ejs",optionsDialogTemplate:"templates/rc_optionsDialog.ejs",btnRestoreChartTemplate:"templates/rc_btnRestoreChart.ejs",
model:null,chartData:null,reportData:null,chartTextOptions:{chartTitle:null,chartSubtitle:null,chartXAxisLabel:null,chartYAxisLabel:null,chartXLabelRotation:null},chart:{renderTo:".report-chart-cntr",chartType:null},chartExport:{url:"/BIQSvc/SqlGen.svc/ExportChart",exporting:{enabled:!0,menuItems:[{},{},{},null]},print:{enabled:!0}},showOptions:!1,allowTypeSelectionOnFailure:!1,showOptionsButton:!0,showRestoreButton:!1,optionDialogWidth:400,rowRange:!0,allowClickEvent:!0,changeChartType:!0,allowDrill:!0,
optionsDialogModal:!1,optionsDialogResizable:!0,invisibleSeries:[],preserveOptions:!0,disableOtherDrilldown:!1,showShortCategoryTitle:!1,showChartOptions:{chartTitle:!0,chartSubtitle:!0,chartXAxisLabel:!0,chartYAxisLabel:!0,chartXAxisLabelRotation:!0,chartBinCount:!0,chartLegendAttribute:!0,chartCollapseTail:!0,chartCollapseItemName:!0,chartCollapseRowLimit:!0,chartAutoSegmentation:!0,chartAttrToSegment:!0,chartMetricToSegment:!0}}},{init:function(a,b){this.reportChartID=this.constructor.reportChartID;
this.constructor.reportChartID+=1;this.chartData=b.chartData;this.options.chart.renderTo=$(this.options.chart.renderTo,this.element)[0];if(this.options.chart.chartType===Sentrana.CHART_TYPE_MAP){var c=this,d=this.options.chart.mapKey;$.getScript("https://code.highcharts.com/mapdata/"+d+".js",function(){c.options.chart.mapData=Highcharts.maps[d];c.staticUpdate(b)})}else b.reportData&&this.staticUpdate(b)},update:function(a){a.reportData?this.staticUpdate(a):(this._super(a),this.chartData=a.chartData,
this.options.chart.renderTo=$(this.options.chart.renderTo,this.element)[0])},staticUpdate:function(a){this.options.reportData=a.reportData;a.preserveOptions&&(this.options.preserveOptions=a.preserveOptions);this.chartAdapter=new Sentrana.ChartDataAdapter(a.reportData);this.chartAdapter.chartType=a.chart.chartType||this.chartAdapter.defaultChartType();a.chartTextOptions&&(this.options.chartTextOptions=a.chartTextOptions);a.chartSegAttrColumnName&&(this.options.chartSegAttrColumnName=a.chartSegAttrColumnName);
a.chartSegMetricColumnName&&(this.options.chartSegMetricColumnName=a.chartSegMetricColumnName);this.chartData.attr("needRedraw",!1);a.donotInitChartData||this.initChartData();this.chartData.attr("needRedraw",!0);this.updateView(!0,!0)},getData:function(){return this.options.reportData||this.options.model&&this.options.model.getData()},reFlowChartView:function(){this.options.chart&&this.options.chart.renderTo&&$(this.options.chart.renderTo).highcharts()&&$(this.options.chart.renderTo).highcharts().reflow()},
reSizeChartView:function(a,b){this.chart&&($(".report-chart-cntr",this.element).css("height","auto"),this.chart.setSize(a,b))},isSeriesMadeVisible:function(a){return 0<$.grep(this.chart.series,function(b){return b.visible&&b.name===a}).length},hasData:function(){var a=this.getData();return!a||!a.rows?!1:!0},updateInvalidData:function(){var a=this.getData();$.each(a.rows,function(a,c){c.cells&&$.each(c.cells,function(a,b){b.fmtValue&&(b.fmtValue=b.fmtValue.replace(/</g,"&lt;").replace(/>/g,"&gt;"))})})},
hasValidData:function(){if(this.isMissingElement())return this.chart=null,this.showChartWarning("Select at least one metric and one attribute from Columns to create a chart"),this.element&&this.element.trigger("chart_failed"),!1;if(!this.isSavedChartTypeSupported(this.chartAdapter.chartType)){this.chart=null;var a="Failed to generate chart. Chart type is not compatible.";this.options.allowTypeSelectionOnFailure?(this.renderCharttypeButtons(refreshChartOptions),refreshSlider&&this.options.rowRange&&
this.selectAndRefreshSlider(refreshSlider),a="Select a chart type that is compatible with the new report definition. Current chart type is "+this.chartAdapter.chartType):this.element.trigger("chart_failed");this.showChartWarning(a,!0);return!1}return!0},updateView:function(a,b){var c=this;if(this.chart){if(this.options.preserveOptions){var d=[];if(this.chart.series){for(var e=0;e<this.options.invisibleSeries.length;e++)this.isSeriesMadeVisible(this.options.invisibleSeries[e])||d.push(this.options.invisibleSeries[e]);
e=$.grep(this.chart.series,function(a){return!1===a.visible});$.each(e,function(a,b){d.push(b.name)});this.options.invisibleSeries=d}}this.chart.destroy()}this.options.preserveOptions||(this.options.invisibleSeries=[]);if(this.hasData()&&(this.updateInvalidData(),this.hasRangeSlider=!1,this.hasValidData()))if($(this.options.chart.renderTo,this.element).show(),$(".chart-option",this.element).show(),$(".chart-row-range",this.element).show(),$(".report-chart-warning",this.element).length&&$(".report-chart-warning",
this.element).hide(),this.chartOptions=this.chartAdapter.populateChartOptions(this),this.chartOptions.chart.events={click:function(a,b){c.element&&can.trigger(c.element,"chart_clicked",[a,b])}},e=this.chartOptions.validateData(),null!=e)this.chart=null,this.showChartWarning(e),this.element&&this.element.trigger("chart_failed");else{try{this.chart="map"===this.chartOptions.chart.type?new Highcharts.Map(this.chartOptions):new Highcharts.Chart(this.chartOptions)}catch(h){this.chart=null;e=c.allowRestoreChart(h);
this.showChartWarning(this.getUpdatedErrorMessage(h),!1,e);this.element&&this.element.trigger("chart_failed");return}$.each(this.chart.series,function(a,b){c.chartOptions.formatString&&(b.formatString=c.chartOptions.formatString[b.name]);-1!==jQuery.inArray(b.name,c.options.invisibleSeries)&&b.hide()});this.renderCharttypeButtons(a);(!this.options.showOptions||!this.options.rowRange)&&$(".chart-row-range",this.element).hide();this.selectAndRefreshSlider(b);this.fixHeight();this.initTips();this.resizeRangeSlider();
this.element&&this.element.trigger("chart_rebind")}},allowRestoreChart:function(a){return-1<a.indexOf("Highcharts error #19")},getUpdatedErrorMessage:function(a){return-1<a.indexOf("Highcharts error #19")?"Chart generation error. Reduce number of rows, attributes or metrics. ":"Chart generation error. Reduce number of rows, attributes or metrics. "+a},selectAndRefreshSlider:function(a){a&&this.options.rowRange&&(this.element.find(".slider-chart-row-range").rangeSlider?this.options.rangeSliderName&&
"jQuerySlider"===this.options.rangeSliderName?this.refreshSlider():(this.hasRangeSlider=!0,this.refreshRangeSlider()):this.refreshSlider())},renderCharttypeButtons:function(a){a&&(a={line:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_LINE),pie:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_PIE),column:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_COLUMN),bar:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_BAR),stackedColumn:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_STACKED_COLUMN),
stackedBar:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_STACKED_BAR),scatter:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_SCATTER),bubble:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_BUBBLE),arearangeline:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_AREA_RANGE_LINE),errorbar:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_ERROR_BAR),histogram:this.chartAdapter.supportChartType(Sentrana.CHART_TYPE_HISTOGRAM)},$(".chart-option",this.element).html(can.view(this.options.basePath+
this.options.chartOptionsTemplate,{chartTypeSupported:a,reportChartID:this.reportChartID})).show(),this.options.showOptions||$(".chart-option",this.element).hide(),this.options.showOptions&&this.options.showOptionsButton?$(".btn-chart-option",this.element).button():$(".chart-option-button",this.element).hide(),$(".chart-restore-button",this.element).hide(),this.options.showOptions&&this.options.showRestoreButton&&$(".btn-chart-restore",this.element).button(),this.options.showOptions&&this.options.changeChartType?
(a=$("#"+this.chartAdapter.chartType.replace(" ","-")+"-chart-button-"+this.reportChartID),a.attr("checked",!0),a.parent().addClass("active"),$(".chart-type",this.element).buttonset()):$(".chart-type",this.element).hide())},refreshSlider:function(){var a=this,b=this.element.find(".slider-chart-row-range");b.slider({range:!0,min:1,max:this.getData().rows.length,values:[this.chartData.startPos+1,this.chartData.endPos+1],slide:function(b,d){$(".label-chart-row-range",a.element).val(d.values[0]+" - "+
d.values[1])},stop:function(b,d){a.chartData.attr("startPos",d.values[0]-1);a.chartData.attr("needRedraw",!0);a.chartData.attr("endPos",d.values[1]-1);a.element&&a.element.trigger("chart_row_slider_changed")}});$(".label-chart-row-range",this.element).val(b.slider("values",0)+" - "+b.slider("values",1))},hideSlider:function(){$(".chart-row-range",this.element).hide()},refreshRangeSlider:function(){if(2>this.getData().rows.length)$(".slider-desc",this.element).hide();else{var a=this,b=this.element.find(".slider-chart-row-range"),
c=1*this.chartData.startPos+1,d=1*this.chartData.endPos+1;$(".label-chart-row-range",this.element).val(c+" - "+d);b.rangeSlider({defaultValues:{min:c,max:d},bounds:{min:1,max:this.getData().rows.length},arrows:!1});b.bind("valuesChanged",function(b,c){a.chartData.attr("startPos",1*c.values.min.toFixed(0)-1);a.chartData.attr("needRedraw",!0);a.chartData.attr("endPos",1*c.values.max.toFixed(0)-1);a.element&&a.element.trigger("chart_row_slider_changed")});b.bind("valuesChanging",function(b,c){$(".label-chart-row-range",
a.element).val(c.values.min.toFixed(0)+" - "+c.values.max.toFixed(0))})}},resizeRangeSlider:function(){if(this.hasRangeSlider&&!(2>this.getData().rows.length)){var a=this.element.find(".slider-chart-row-range");a&&a.rangeSlider("resize")}},initTips:function(){$.fn.qtip&&($.fn.qtip.defaults.style.classes="qtip-green ui-tooltip-shadow",$(".slider-desc",this.element).qtip({content:"This will update the row range of the tabular result to be presented on chart."}))},fixHeight:function(){var a=this.options.chartHeight;
a&&$(".report-chart-cntr",this.element).outerHeight(a)},initChartData:function(){this.chartData.attr("chartType",this.chartAdapter.chartType);this.chartData.attr("chartTextOptions",{chartTitle:this.options.chartTextOptions.chartTitle||this.chartAdapter.getChartTitle(),chartSubtitle:this.options.chartTextOptions.chartSubtitle||this.chartAdapter.getChartSubtitle(),chartXAxisLabel:this.options.chartTextOptions.chartXAxisLabel||this.chartAdapter.getXAxisLabel(),chartYAxisLabel:this.options.chartTextOptions.chartYAxisLabel||
this.chartAdapter.getYAxisLabel(),chartXLabelRotation:this.options.chartTextOptions.chartXLabelRotation||Sentrana.CHART_DEFAULT_XAXIS_ROTATION});this.chartData.attr("startPos",0);this.chartData.attr("endPos",this.chartData.chartCollapseRowLimit-1<this.getData().rows.length-1?this.chartData.chartCollapseRowLimit-1:this.getData().rows.length-1);this.chartData.attr("chartLegendAttrColumnName","None");this.chartData.attr("chartAttrColumnNames",this.chartAdapter.resultDataset.getAttrColumnNames());this.chartData.attr("chartSegAttrColumnName",
this.options.chartSegAttrColumnName||this.chartAdapter.getDefaultSegAttrName());this.chartData.attr("chartMetricColumnNames",this.chartAdapter.resultDataset.getMetricColumnNames());this.chartData.attr("chartSegMetricColumnName",this.options.chartSegMetricColumnName||this.chartAdapter.getDefaultSegMetricName())},getChartData:function(){return this.chartData.serialize()},chart_element_clicked:function(){this.element.trigger("chart_element_clicked")},showSeries:function(a){if(this.chart&&this.chart.series){var b=
$.grep(this.chart.series,function(b){return b.name===a});1===b.length&&(b[0].options.showInLegend=!0,this.chart.legend.renderItem(b[0]),this.chart.legend.render(),b[0].show())}},hideSeries:function(a){if(this.chart&&this.chart.series){var b=$.grep(this.chart.series,function(b){return b.name===a});1===b.length&&(b[0].options.showInLegend=!1,b[0].legendItem=null,this.chart.legend.destroyItem(b[0]),this.chart.legend.render(),b[0].hide())}},getChartOptions:function(){var a={controller:this};switch(this.chartAdapter.chartType){case Sentrana.CHART_TYPE_LINE:return new Sentrana.Models.LineChartOptions(a);
case Sentrana.CHART_TYPE_PIE:return new Sentrana.Models.PieChartOptions(a);case Sentrana.CHART_TYPE_COLUMN:return new Sentrana.Models.ColumnChartOptions(a);case Sentrana.CHART_TYPE_BAR:return new Sentrana.Models.BarChartOptions(a);case Sentrana.CHART_TYPE_STACKED_COLUMN:return new Sentrana.Models.StackedColumnChartOptions(a);case Sentrana.CHART_TYPE_STACKED_BAR:return new Sentrana.Models.StackedBarChartOptions(a);case Sentrana.CHART_TYPE_AREA:return new Sentrana.Models.AreaChartOptions(a);case Sentrana.CHART_TYPE_STACKED_AREA:return new Sentrana.Models.StackedAreaChartOptions(a);
case Sentrana.CHART_TYPE_SCATTER:return new Sentrana.Models.ScatterChartOptions(a);case Sentrana.CHART_TYPE_BUBBLE:return new Sentrana.Models.BubbleChartOptions(a);case Sentrana.CHART_TYPE_HISTOGRAM:return new Sentrana.Models.HistogramChartOptions(a);case Sentrana.CHART_TYPE_GAUGE:return new Sentrana.Models.GaugeChartOptions(a);case Sentrana.CHART_TYPE_AREA_RANGE_LINE:return new Sentrana.Models.AreaRangeLine(a);case Sentrana.CHART_TYPE_ERROR_BAR:return new Sentrana.Models.ErrorBar(a);case Sentrana.CHART_TYPE_MAP:return new Sentrana.Models.UsMapChartOptions(a);
default:return new Sentrana.Models.ChartOptions(a)}},isMissingElement:function(){return 0===this.chartAdapter.metricIndexArray.length||0===this.chartAdapter.attributeIndexArray.length},isSavedChartTypeSupported:function(a){return this.chartAdapter.supportChartType(a)},showChartWarning:function(a,b,c){var d=this.element.find(".report-chart-warning");d.length||($("<div></div>").attr("class","report-chart-warning").appendTo(this.element),d=this.element.find(".report-chart-warning"));d.html(a);c?d.append(can.view(this.options.basePath+
this.options.btnRestoreChartTemplate,{})):d.find(".restore-chart").remove();d.show();$(this.options.chart.renderTo,this.element).hide();b||$(".chart-option",this.element).hide()},showChartAlert:function(a,b,c,d){$("body").append("<div id='sentrana_chart_modal_alert'></div>");$("#sentrana_chart_modal_alert").sentrana_alert_dialog({title:a,message:b,onOk:function(){c&&"function"===typeof c&&c();$("body").find("#sentrana_chart_modal_alert").remove()},closeOnEscape:void 0!==d?d:!0})},showRestoreButton:function(){this.options.showRestoreButton&&
$(".chart-restore-button",this.element).show()},showOptionDialog:function(){$("#chart-user-options-dialog").length||$("<div></div>").attr("id","chart-user-options-dialog").appendTo("body");$("#chart-user-options-dialog").html(can.view(this.options.basePath+this.options.optionsDialogTemplate,{model:this.chartData,chartConfiguration:this.options,reportChartController:this}));$("#chart-user-options-dialog").sentrana_chart_user_options_dialog({reportChartController:this,model:this.chartData,chartConfiguration:this.options,
autoOpen:!0,onCancel:function(){$("body").find("#chart-user-options-dialog").remove()},onOk:function(){$("body").find("#chart-user-options-dialog").remove()}})},chartTypeChangeHandler:function(){this.chartData.attr("needRedraw",!1);if((this.chartAdapter.chartType===Sentrana.CHART_TYPE_SCATTER||this.chartAdapter.chartType===Sentrana.CHART_TYPE_BUBBLE)&&0===this.chartData.startPos&&this.chartData.endPos===this.chartData.chartCollapseRowLimit-1)this.chartData.attr("endPos",50<this.getData().rows.length?
49:this.getData().rows.length-1),this.updateView(!1,!0);this.chartData.attr("needRedraw",!0)},".btn-chart-option click":function(){this.showOptionDialog()},".restore-chart click":function(){this.resetNumberOfRows()},resetNumberOfRows:function(){var a=this.chartData.chartCollapseRowLimit-1<this.getData().rows.length-1?this.chartData.chartCollapseRowLimit-1:this.getData().rows.length-1;this.chartData.attr("needRedraw",!1);this.chartData.attr("startPos",0);this.chartData.attr("endPos",a);this.chartData.attr("needRedraw",
!0);this.hasRangeSlider&&this.element.find(".slider-chart-row-range").rangeSlider("values",1,12)},".btn-chart-restore click":function(){this.getChartOptions().setChart(0);$(".chart-restore-button",this.element).hide()},"input[event='chart-type-button'] change":function(a){a=a.attr("id");this.chartData.attr("chartType",a.substr(0,a.indexOf("-chart")).replace("-"," "))},".label-chart-row-range keypress":function(a,b){13===b.keyCode&&(this.handleRowRangeChangeEvent(a,b),b.preventDefault())},".label-chart-row-range change":function(a,
b){this.handleRowRangeChangeEvent(a,b)},handleRowRangeChangeEvent:function(a,b){var c,d,e,h=this.element.find(".label-chart-row-range"),g=this.element.find(".slider-chart-row-range");this.hasRangeSlider&&(e=g.rangeSlider("values"));var f=h.val();if(0<f.indexOf("-"))d="-";else if(0<f.indexOf(","))d=",";else{this.showChartAlert("Error!","Please enter valid row range such as '1 - 10' or '1, 10'",function(){h.focus()});h.val(g.slider("values",0)+" - "+g.slider("values",1));return}c=Number($.trim(f.split(d)[0]));
d=Number($.trim(f.split(d)[1]));0===c||0===d||isNaN(c)||isNaN(d)?(this.showChartAlert("Error!","Please enter valid row range such as '1 - 10' or '1, 10'",function(){h.focus()}),this.hasRangeSlider?h.val(e.min.toFixed(0)+" - "+e.max.toFixed(0)):h.val(g.slider("values",0)+" - "+g.slider("values",1))):(h.val(c+" - "+d),this.hasRangeSlider?g.rangeSlider("values",c,d):(this.chartData.attr("startPos",c-1),this.chartData.attr("needRedraw",!0),this.chartData.attr("endPos",d-1)),b.preventDefault?b.preventDefault():
b.returnValue=!1,b.stopPropagation&&b.stopPropagation())},"{chartData} change":function(a,b,c,d,e){if(this.chartAdapter&&(this.element.trigger("chart_updated"),this.chartData.needRedraw))switch(c){case "chartTextOptions":this.updateView(!1);break;case "chartType":this.chartAdapter.chartType=e;this.chartTypeChangeHandler();this.updateView(!1);break;case "chartCollapseItemName":this.updateView(!1,!0);break;case "chartCollapseRowLimit":this.chartData.attr("endPos",this.chartData.startPos+Number(e)-1);
break;case "chartLegendAttrColumnName":this.updateView(!1);break;case "chartCollapseTail":this.updateView(!1);break;case "chartAutoSegmentation":this.updateView(!1);break;case "chartSegAttrColumnName":this.updateView(!1);break;case "chartSegMetricColumnName":this.updateView(!1);break;case "startPos":this.showRestoreButton();this.updateView(!1,!0);break;case "endPos":this.showRestoreButton();this.updateView(!1,!0);break;case "binCount":this.updateView(!1);break;default:this.updateView(!1)}},"{model} change":function(a,
b,c,d,e){"executionStatus"===c&&"SUCCESS"===e?(this.chartAdapter=new Sentrana.ChartDataAdapter(this.getData()),this.chartOptions=this.chartAdapter.populateChartOptions(this),this.chartAdapter.chartType=this.options.model.chartType||this.options.chart.chartType||this.chartAdapter.defaultChartType(),this.options.model.chartType=void 0,this.isMissingElement()||(this.chartData.fromDB||(this.chartData.attr("needRedraw",!1),this.initChartData()),this.chartData.attr("needRedraw",!0)),this.options.stopInitialRendering||
this.updateView(!0,!0)):"showChart"===c&&!0===e?this.updateView(!1,!1):"localDataChangeStatus"===c&&"SUCCESS"===e?(a=this.options.model.staticData?this.options.model.staticData:this.options.model.getData(),this.chartAdapter=new Sentrana.ChartDataAdapter(a),this.chartAdapter.chartType=this.chartData.chartType||this.chartAdapter.defaultChartType(),this.updateView(!0,!0)):"colPosChanged"===c?(a=this.options.model.getData(),this.chartAdapter=new Sentrana.ChartDataAdapter(a),this.chartAdapter.chartType=
this.chartData.chartType||this.chartAdapter.defaultChartType(),this.updateView(!0,!0)):"drillOptionsStatus"===c&&"SUCCESS"===e&&(this.options.reportData=void 0)}})});steal.executed("lib/sentrana/ReportChartCanJS/ReportChart.js");
Sentrana.Models.ChartOptions("Sentrana.Models.PivotChartOptions",{},{addChart:function(){this.chart={renderTo:{},type:Sentrana.CHART_TYPE_COLUMN,marginRight:120}},addLegend:function(){this.legend={backgroundColor:null,reversed:!1,borderColor:null,layout:"vertical",align:"right",verticalAlign:"top",width:80,y:60}},requestDrillMenu:function(){}});
Sentrana.Models.PivotChartOptions("Sentrana.Models.PivotLineChartOptions",{init:function(a){this._super(a);this.chart.type=Sentrana.CHART_TYPE_LINE;this.setPlotOptions()},setPlotOptions:function(){this.plotOptions={line:this.getDrillablePointer()}}});Sentrana.Models.PivotChartOptions("Sentrana.Models.PivotColumnChartOptions",{init:function(a){this._super(a);this.chart.type="column";this.setPlotOptions()},setPlotOptions:function(){this.plotOptions={column:this.getDrillablePointer()}}});
Sentrana.Models.PivotChartOptions("Sentrana.Models.PivotBarChartOptions",{init:function(a){this._super(a);this.chart.type="bar";this.setPlotOptions()},setPlotOptions:function(){this.plotOptions={bar:this.getDrillablePointer()}}});Sentrana.Models.PivotColumnChartOptions("Sentrana.Models.PivotStackedColumnChartOptions",{init:function(a){this._super(a);this.addStackingPlotOptions()}});
Sentrana.Models.PivotBarChartOptions("Sentrana.Models.PivotStackedBarChartOptions",{init:function(a){this._super(a);this.addStackingPlotOptions()}});steal.executed("lib/sentrana/ReportChartCanJS/PivotChart/PivotChartOptions.js");
Sentrana.Models.ResultDataset("Sentrana.Models.PivotResultDataset",{init:function(a){$.extend(this,a)},hasCurrencyMetric:function(){return this.data.pivotStructure.value.dataType===Sentrana.DataType.CURRENCY},hasPercentageMetric:function(){return this.data.pivotStructure.value.dataType===Sentrana.DataType.PERCENTAGE}});
Sentrana.ChartDataAdapter("Sentrana.PivotChartDataAdapter",{init:function(a){this.resultDataset=new Sentrana.Models.PivotResultDataset({data:a})},populateChartOptions:function(a){var b=this.chartData=a.chartData;this.pivotData=a.options.pivotData;this.oldChartData=jQuery.extend(!0,{},b);b=this.chartOptions=a.getChartOptions();b.chart.renderTo=a.options.chart.renderTo;b.chart.height=a.options.chart.height;b.chart.width=a.options.chart.width;b.xAxis.categories=this.pivotData.categories;b.series=this.pivotData.series;
a.options.tooltip&&(b.tooltip=a.options.tooltip);b.setXAxisRotation(this.oldChartData.chartTextOptions.chartXLabelRotation||b.xAxis.labels.rotation);b.title.text=this.pivotData.pivotStructure.value.title+" by "+this.pivotData.pivotStructure.row.title+" and "+this.pivotData.pivotStructure.column.title;b.subtitle.text="";b.xAxis.title.text=this.pivotData.pivotStructure.row.title;b.yAxis.title.text=this.pivotData.pivotStructure.value.title;delete b.reportChartController;return b},supportChartType:function(a){switch(a){case Sentrana.CHART_TYPE_LINE:case Sentrana.CHART_TYPE_COLUMN:case Sentrana.CHART_TYPE_BAR:case Sentrana.CHART_TYPE_STACKED_COLUMN:case Sentrana.CHART_TYPE_STACKED_BAR:return!0;
default:return!1}},defaultChartType:function(){return Sentrana.CHART_TYPE_COLUMN}});steal.executed("lib/sentrana/ReportChartCanJS/PivotChart/PivotChartDataAdapter.js");
Sentrana.Controllers.ReportChart("Sentrana.Controllers.PivotChart",{pluginName:"sentrana_pivot_chart"},{staticUpdate:function(a){this.chartAdapter=new Sentrana.PivotChartDataAdapter(this.options.pivotData);this.chartAdapter.chartType=a||this.chartAdapter.defaultChartType();this.chartData.attr("needRedraw",!0);this.updateView(!0,!0)},hasData:function(){return void 0!==this.options.pivotData},hasValidData:function(){return!this.options.pivotData.categories||!this.options.pivotData.series||!this.options.pivotData.pivotStructure?
(this.chart=null,this.showChartWarning("Invalid pivot data"),this.element&&this.element.trigger("chart_failed"),!1):!0},updateInvalidData:function(){},getChartOptions:function(){var a={controller:this};switch(this.chartAdapter.chartType){case Sentrana.CHART_TYPE_LINE:return new Sentrana.Models.PivotLineChartOptions(a);case Sentrana.CHART_TYPE_COLUMN:return new Sentrana.Models.PivotColumnChartOptions(a);case Sentrana.CHART_TYPE_BAR:return new Sentrana.Models.PivotBarChartOptions(a);case Sentrana.CHART_TYPE_STACKED_COLUMN:return new Sentrana.Models.PivotStackedColumnChartOptions(a);
case Sentrana.CHART_TYPE_STACKED_BAR:return new Sentrana.Models.PivotStackedBarChartOptions(a);default:return new Sentrana.Models.PivotChartOptions(a)}},resetNumberOfRows:function(){this.element.trigger("restore-pivot-chart")}});steal.executed("lib/sentrana/ReportChartCanJS/PivotChart/PivotChart.js");steal("lib/sentrana/ReportGrid-bootstrap/ReportGrid.js","lib/sentrana/ReportGrid-bootstrap/css/reportGrid.css");steal.executed("lib/sentrana/ReportGrid-bootstrap/StealReportGrid.js");
can.Control.extend("Sentrana.Controllers.ReportGrid",{pluginName:"sentrana_report_grid",dataTypeMap:["numeric","string","numeric","numeric","numeric"],defaults:{basePath:"lib/sentrana/ReportGrid-bootstrap",templatesPath:"templates",tmplInit:"initTable.ejs",tmplFooter:"tfoot.ejs",model:null,reportData:null,reportDefnModel:null,showFilter:!0,showPageSizeCombo:!0,showPageSelector:!0,showInfo:!0,showGridButtons:!0,pageSize:20,pageSizes:[10,20,30,50,100],scrollX:"100%",allowDrill:!0,autoHeight:!1}},{init:function(){var a=
$(".report-grid-cntr",this.element);this.$exportButton=$(".export-button",this.element);this.$reportGrid=a.html(this.getTemplatePath(this.options.tmplInit),{}).find("table");this.$tfoot=$("tfoot",this.$reportGrid);this.dataTable=null;this.initializeButtons();this.updateView();var b=this;this.on("column-reorder",function(a,c,h){b.options.reportDefnModel&&!b.options.donotUpdateModel&&(b.options.reportDefnModel.moveColumn(h.iFrom,h.iTo),b.options.model.reorderColumnPos(h.iFrom,h.iTo));can.trigger(b.element,
"grid_column_reordered",{from:h.iFrom,to:h.iTo})});if(!$.support.opacity&&!$.support.leadingWhitespace){var c=function(a){$(window).one("resize",function(){a&&a();window.setTimeout(c,100)})};c(function(){b.resizeGrid(!0)})}},getTemplatePath:function(a){var b=[];this.options.basePath&&(b.push(this.options.basePath),/\/$/.test(this.options.basePath)||b.push("/"));this.options.templatesPath&&(b.push(this.options.templatesPath),/\/$/.test(this.options.templatesPath)||b.push("/"));b.push(a);return b.join("")},
update:function(a){this.setup(this.element,a);this.updateView()},staticUpdate:function(a){this.options.reportData=a;this.updateView()},initializeButtons:function(){this.$exportButton.button()},buildsDom:function(){var a=[];a.push("R");if(this.options.showPageSizeCombo||this.options.showFilter||this.options.showGridButtons)a.push("<'table-header clearfix'<'table-caption'><'DT-lf-right'"),this.options.showPageSizeCombo&&a.push("<'DT-per-page'l>"),this.options.showFilter&&a.push("<'DT-search'f>"),this.options.showGridButtons&&
a.push("<'buttonBar grid-button-bar'>"),a.push(">r>");a.push("t");if(this.options.showInfo||this.options.showPageSelector)a.push("<'table-footer clearfix'"),this.options.showInfo&&a.push("<'DT-label'i>"),this.options.showPageSelector&&a.push("<'DT-pagination'p>"),a.push(">");return a.join("")},updateView:function(){function a(a,b){return function(c,d){return"display"===d||"filter"===d||"string"===b?c["c"+a+"_f"]:c["c"+a+"_d"]}}if((this.data=this.options.reportData||this.options.model&&this.options.model.getData())&&
this.data.rows){this.origRows=this.data.rows.slice();this.dataTable&&(this.dataTable.fnDestroy(),delete this.dataTable._oPluginColReorder,this.dataTable=null,$("thead",this.element).empty(),$("tbody",this.element).empty(),$("tfoot",this.element).empty());var b=[],c,d,e,h;c=0;for(e=this.data.rows.length;c<e;c++){var g=this.data.rows[c],f={};d=0;for(h=g.cells.length;d<h;d++){var i=g.cells[d];f["c"+d+"_d"]=i.rawValue;f["c"+d+"_f"]=i.fmtValue}b.push(f)}var j=[],k=this;$.each(this.data.colInfos,function(b,
c){var d=k.constructor.dataTypeMap[c.dataType];j.push({sTitle:c.title,sClass:"1"===c.just?"numeric":"",sType:d,mDataProp:a(b,d),fnCreatedCell:function(a,b){"Subtotal:"===b&&($(a).addClass("numeric"),$(a).parent().addClass("subtotal-row"))}})});h=[];if(this.options.reportDefnModel){d=this.options.reportDefnModel.getTemplateUnitFormsAndMetrics();c=0;for(e=d.length;c<e;c++)f=d[c],g=[c,"A"===f.sortOrder?"asc":"desc","A"===f.sortOrder?0:1,0],h[f.sortPosition-1]?h[f.sortPosition-1][3]++:h[f.sortPosition-
1]=g;c=0;for(e=h.length;c<e;c++)if(g=h[c],g[3]){for(d=0;d<g[3];d++)h.splice(c,0,[g[0]+d+1,g[1],g[2]]);c+=g[3]}}this.initializing=!0;this.dataTable=this.$reportGrid.dataTable({aaData:b,aaSorting:h,aLengthMenu:this.options.pageSizes,aoColumns:j,autoWidth:!0,bDestroy:!0,bSort:void 0===this.options.allowSort?!0:this.options.allowSort,stateSave:!0,bDeferRender:!0,bScrollCollapse:!0,footerCallback:function(){k.data.totals?k.$tfoot.html(k.getTemplatePath(k.options.tmplFooter),k.data):k.$tfoot.empty()},fnStateLoadParams:function(a,
b){b.iStart=0;b.aaSorting=a.aaSorting;b.oSearch=a.oSearch;b.ColReorder=[]},pageLength:this.options.pageSize,displayStart:0,language:{info:"Displaying rows _START_ to _END_ of _TOTAL_",lengthMenu:"Show  _MENU_  rows at a time",paginate:{first:"First",last:"Last",previous:"Prev",next:"Next"},searchPlaceholder:"Search..."},sDom:this.buildsDom(),pagingType:"full_numbers",sScrollX:this.options.scrollX,drawCallback:function(){k.options.autoHeight&&k.adjustGridHeightToContainer();k.removeTableInlineOverflowStyle();
null!=k.element&&can.trigger(k.element,"grid_drawn")}});this.initializing=!1;$(".dataTables_filter input",this.element).attr("placeholder","Search");$(".dataTables_filter input",this.element).attr("type","text");$(".buttonBar",this.element)[this.options.showGridButtons?"show":"hide"]();this.element&&can.trigger(this.element,"grid_rendered")}},adjustGridHeightToContainer:function(){var a=this.element.find(".table-header").outerHeight(!0),b=this.element.find(".table-footer").outerHeight(!0),a=a+b;this.element.find(".dataTables_scroll").css("height",
"calc(100% - "+a+"px)")},resizeGrid:function(a){this.dataTable&&(this.dataTable.fnAdjustColumnSizing(a),this.options.autoHeight&&this.adjustGridHeightToContainer())},removeTableInlineOverflowStyle:function(){window.chrome||($(".dataTables_scrollHead").css("overflow",""),$(".dataTables_scrollBody").css("overflow",""))},updateDataModel:function(){if(this.dataTable&&this.options.model){var a=this.dataTable.fnGetData(),b=this.dataTable.fnSettings().aiDisplayMaster,c=this.options.model.getData(),d=this.origRows,
e=[];this.options.model.startLocalDataChange();for(var h=0,a=a.length;h<a;h++)e.push(d[b[h]]);b=$.extend(!0,{},c);b.rows=e;this.options.model.setStaticData(b);this.options.model.endLocalDataChange("SUCCESS")}},sortDataTable:function(a,b){this.dataTable&&this.dataTable.fnSort([[a,b]])},".report-grid-cntr thead th click":function(a){can.trigger(this.element,"grid_header_clicked",{column:a})},".report-grid-cntr tbody tr mouseover":function(a){this.options.allowDrill&&(this.options.model&&1<this.options.model.reportDefnStack.length||
this.data&&this.data.drillable)?$(a).removeClass("defaultCursor").addClass("pointerCursor"):$(a).removeClass("pointerCursor").addClass("defaultCursor")},".report-grid-cntr tbody tr click":function(a,b){if(this.options.model){var c=[];$("td",a).each(function(a,b){c.push($(b).text())});c.length&&"No matching records found"===c[0]||($("tbody tr",this.element).removeClass("highlight-row"),this.options.allowDrill&&this.options.model.requestDrillMenu(c,b))}},".export-button click":function(){can.trigger(this.element,
"export_report",this.data.cacheid)},"{model} change":function(a,b,c,d,e){"executionStatus"===c&&"SUCCESS"===e?(this.options.reportData=void 0,this.options.stopInitialRendering||this.updateView()):"localDataChangeStatus"===c&&"SUCCESS"===e&&this.updateView()}," sort":function(a,b,c){if((a=this.options.reportDefnModel)&&!this.initializing){for(var b=[],d=0,e=c.aaSorting.length;d<e;d++){var h=c.aaSorting[d];b.push({columnIndex:h[0],sortOrder:"asc"===h[1]?"A":"D"})}a.changeSortSpecification(b);this.options.donotUpdateModel||
this.updateDataModel()}},"{window} resize":function(){($.support.opacity||$.support.leadingWhitespace)&&this.resizeGrid(!0)}});steal.executed("lib/sentrana/ReportGrid-bootstrap/ReportGrid.js");steal("lib/sentrana/ReportText/ReportText.js");steal.executed("lib/sentrana/ReportText/stealReportText.js");
can.Control.extend("Sentrana.Controllers.TextReport",{pluginName:"sentrana_text_report",defaults:{model:null}},{init:function(){this.$text=this.element.find(".text-report-value")},update:function(a){this.setup(this.element,a)},updateView:function(){if((this.data=this.options.model&&this.options.model.getData())&&this.data.rows)this.$text.text(this.data.rows[0].cells[0].fmtValue),this.updateTextSize()},updateTextSize:function(a,b){var c=a?a:parseInt(this.element.width()),d=b?b:parseInt(this.element.height());
this.$text.css("font-size",(c>d?d/3:c/3)+"px")},"{model} change":function(a,b,c,d,e){"executionStatus"===c&&"SUCCESS"===e?this.updateView():"localDataChangeStatus"===c&&"SUCCESS"===e&&this.updateView()}});steal.executed("lib/sentrana/ReportText/ReportText.js");steal("lib/external/GoldenLayout/css/goldenlayout-base.css","lib/external/GoldenLayout/css/goldenlayout-light-theme.css","lib/external/GoldenLayout/js/goldenlayout.js").then("lib/sentrana/GoldenLayout/SentranaGoldenLayout.js");steal.executed("lib/sentrana/GoldenLayout/StealGoldenLayout.js");
can.Control.extend("Sentrana.Controllers.BIQLayout",{pluginName:"sentrana_biq_layout",defaults:{app:null}},{init:function(){this.updateView()},update:function(){this.updateView()},updateView:function(){this.options.app.topNavBarModel.getFilteredLayout();this.element.empty();this.element.sentrana_top_navigation({app:this.options.app,navigationModel:this.options.app.topNavBarModel})}});steal.executed("js/controllers/BIQLayoutController.js");
can.Control.extend("Sentrana.Controllers.TopNavDWSelector",{pluginName:"sentrana_top_nav_dw_selector",defaults:{app:null}},{init:function(){},update:function(a){this._super(a)},".repository-options-item click":function(a){var b=a.attr("repositoryid"),a=a.text();b!==this.options.app.dwChoicesModel.attr("selectedID")&&this.element.trigger("DWSelectionChanged",{oid:b,name:a})}});steal.executed("js/controllers/TopNavDWSelectorController.js");
can.Control.extend("Sentrana.Controllers.TopNav",{pluginName:"sentrana_top_navigation",defaults:{app:null,navigationModel:null}},{init:function(){this.updateView()},update:function(a){this._super(a);this.updateView()},selectPage:function(a,b,c){var d=this.options.navigationModel.getControllerInfo(a),e=$("#"+a).children(".page-content");window.location.hash=can.route.url({page:a});$("li.nav-page-link").removeClass("active");$('a[href="#!'+a+'"]').parent().addClass("active");$(".page-content-div").hide();
d&&(a=$.extend(!0,{app:this.options.app},d.controlOptions),e[d.controllerHelperName](a));e.parent().show();e[d.controllerHelperName]("show");b&&e.trigger(b,c)},populateTopNavigation:function(){this.$menuItemContainer.append(can.view("templates/topNavMenuItem.ejs",{navItems:this.filteredLayout}))},populateUserOptionsMenu:function(){this.$menuItemContainer.append('<div class="top-nav-user-options"></div>');this.$menuItemContainer.find(".top-nav-user-options").sentrana_user_options({app:this.options.app})},
populatePageContents:function(){this.$tabContainer.append(can.view("templates/pageContent.ejs",{navItems:this.filteredLayout}))},updateView:function(){this.filteredLayout=this.options.navigationModel.getFilteredLayout();this.element.append(can.view("templates/topNavigation.ejs",{}));this.$tabContainer=$("#tabs");this.$menuItemContainer=$("#main-navbar-collapse");this.populateTopNavigation();this.populateUserOptionsMenu();this.populatePageContents()},"{navigationModel} change":function(a,b,c,d,e){"page"===
c&&e&&(this.selectPage(e),this.options.app.saveMenuInfo({level1BtnId:e,level2BtnId:""}))}});steal.executed("js/controllers/TopNavController.js");
can.Control.extend("Sentrana.Controllers.FirstLookDialog",{defaults:{autoOpen:!1,width:525,modal:!0,minHeight:0}},{pluginName:"sentrana_first_look_dialog",init:function(a,b){var a=$.isArray(a)?a:[a],c=this;$.each(a,function(b,e){$.isPlainObject(e)||(e={text:e},a.splice(b,1,e));e.click||(e.click=c.proxy("handle"+e.text))});this.buttons=a;this.maxStatusMessageLength=b},removeExInCorner:function(){this.element.dialog("widget").find(".ui-dialog-titlebar-close").hide()},getDialogOptions:function(){return{autoOpen:!1,
width:this.options.width,minHeight:this.options.minHeight,modal:this.options.modal,closeOnEscape:!1,resizable:!1,buttons:this.buttons}},handleCANCEL:function(){this.closeDialog("userClick")},enableButton:function(a,b){var c=this.element.dialog("option","buttons"),d=this;$.each(c,function(e,h){if(h.text===a)return h.disabled=!b,d.element.dialog("option","buttons",c),d.element.siblings(".ui-dialog-buttonpane").find("button").addClass("btn"),$(d.element.siblings(".ui-dialog-buttonpane").find("button")[e]).removeClass("disabled"),
!1})},hideButton:function(a){var b=this.element.dialog("option","buttons"),c=this;$.each(b,function(d,e){if(e.text===a)return e.style="display:none;",c.element.dialog("option","buttons",b),!1})},showButton:function(a){var b=this.element.dialog("option","buttons"),c=this;$.each(b,function(d,e){if(e.text===a)return e.style="",c.element.dialog("option","buttons",b),!1})},addStatusBar:function(){var a=this.element.dialog("widget");0<a.find(".dialog-status-bar").length||a.find(".ui-dialog-buttonpane").prepend("templates/dialog-status-bar.ejs",
{})},removeStatusBar:function(){this.element.dialog("widget").find(".dialog-status-bar").remove()},updateStatusBar:function(a,b,c){this.addStatusBar();var d=this.element.dialog("widget"),e=d.find(".dialog-status-bar"),h=d.find(".dialog-status-bar-loading"),d=d.find(".dialog-status-bar-msg");!b||0===b.length?(e.removeClass("dialog-status-msg-container"),e.hide()):(e.show(),e.addClass("dialog-status-msg-container"));a?h.css("display","inline-block"):h.hide();d.text(b);"fail"===c?(e.removeClass("alert-info"),
e.addClass("alert-danger")):(e.removeClass("alert-danger"),e.addClass("alert-info"));$(".ui-dialog-buttonset>button",this.element.parent()).addClass("btn").addClass("btn-default")},openDialog:function(){this.element.dialog("open");$(".ui-dialog-buttonset>button",this.element.parent()).addClass("btn").addClass("btn-default");$(".ui-dialog-buttonpane",this.element.parent()).addClass("modal-footer");this.element.addClass("modal-body")},closeDialog:function(){this.element.dialog("close");this.removeStatusBar()},
"{Sentrana.FirstLook.AppState} change":function(a,b,c,d,e){"sessionOpen"===c&&!e&&this.closeDialog("sessionClosed")}});steal.executed("js/controllers/FirstLookDialog.js");
can.Control.extend("Sentrana.Controllers.FilterControl",{pluginName:"sentrana_filter_control",defaults:{dwRepository:null,dwSelection:null,attr:null,form:null}},{init:function(){this.$filterControl=this.element.find(".element-filter");var a=this;this.$filterControl.html(can.view("templates/loadingwheel.ejs",{message:"Loading...",hideImage:!1}));this.options.dwRepository.checkLoadedForm(this.options.form,!1).then(function(){a.updateView()},function(){a.$filterControl=a.element.find(".element-filter");
a.$filterControl.html(Sentrana.getMessageText(window.app_resources.app_msg.column_filter.load_error))})},update:function(a){this._super(a);this.updateView()},updateView:function(){this.$filterControl=this.element.find(".element-filter");this.$filterControl.html("");(!this.options.form.elements||10>=this.options.form.elements.length)&&$(".accordion-search",this.element).hide();if(this.options.dwRepository||this.options.attr)this.setUMDataFilter(),this.buildElementsUI()},setUMDataFilter:function(){for(var a=
0;a<this.options.attr.forms.length;a++){var b=this.options.attr.forms[a];b.dataFilterOperator=this.options.dwRepository.getDataFilterOperator(b.oid);for(var c=0;c<b.elements.length;c++)this.options.dwRepository.setUMDataFilterToElement(this.options.attr,b,b.elements[c]);this.filterElementsByUMDataFilter(b)}},filterElementsByUMDataFilter:function(a){if(a.dataFilterOperator)switch(a.dataFilterOperator.toUpperCase()){case "IN":a.elements=$.grep(a.elements,function(a){return!0===a.isFilteredByDataFilter});
break;case "NOT IN":a.elements=$.grep(a.elements,function(a){return!1===a.isFilteredByDataFilter})}},buildElementsUI:function(){},selectFilterElement:function(a){var b=this.options.dwRepository.objectMap,c=b[$(a).attr("hid")];if(this.createFilteredMetricMode&&"ELEMENT"===c.type){var a=$(".tu"),d;$.each(a,function(a,b){$(".onlywhen-column",$(b)).attr("filter")&&(d=b)});d&&(a=b[$(d).attr("hid")],c=this.options.dwRepository.createFilteredMetric(a,c),b[c.hid]||(b[c.hid]=c),this.options.dwSelection.deselectObject(a.hid),
this.options.dwSelection.selectObject(c.hid),b=$(".tu[hid="+c.hid+"]"),$(".add-filter",b).hide(),$(".edit-filter",b).show(),Sentrana.FirstLook.createFilteredMetricMode(!1),delete this.options.dwSelection[c.hid],this.removeSelectionfromControll(c.elementHID))}else this.options.dwSelection.selectObject(a.attr("hid"))},removeSelectionfromControll:function(a){var b=$.merge($('.object-selector[hid="'+a+'"]',".onlywhen-column-filter"),$('.tree-node-selector[hid="'+a+'"]',".onlywhen-column-filter")),b=$.merge(b,
$('.element-filter-listbox-onlywhen option[hid="'+a+'"]',".onlywhen-column-filter"));$(b).is('input[type="checkbox"]')?(b.removeClass("object-selected"),$(b).is(":checked")&&(b=$('.object-selector[hid="'+a+'"]',".onlywhen-column-filter"),$(b).removeAttr("checked"))):$(b).is("option")?(b=$(b).parent("select"),$.each(b.find(":selected"),function(b,d){$(d).attr("hid")===a&&($(d).removeAttr("selected"),$(d).removeClass("object-selected"))})):$(b).is("a")&&(b.removeClass("object-selected"),b.removeClass("tree-node-selected"))},
deSelectFilterElement:function(a){this.options.dwSelection.deselectObject(a.attr("hid"))},".accordion-search-input keyup":function(a,b){this.searchElements(a,b)},".accordion-search-input click":function(a,b){this.searchElements(a,b)}});steal.executed("js/controllers/FilterControlController.js");steal("lib/sentrana/collapsible/CollapsibleContainer.js","lib/sentrana/collapsible/css/collapsibleContainer.css");steal.executed("lib/sentrana/collapsible/StealCollapsibleContainer.js");
can.Control.extend("Sentrana.Controllers.CollapsibleContainer",{pluginName:"sentrana_collapsible_container",defaults:{title:"Untitled",titleIconClass:"",showHeader:!0,showBorder:!0,allowCollapsible:!0,initialCollapsed:!1,titleCssClass:"",titleElements:[],callBackFunctionOnExpand:void 0,callBackFunctionOnCollapse:void 0,expandIcon:"fa fa-plus-square",collapseIcon:"fa fa-minus-square"}},{init:function(){this.panelTemplate="lib/sentrana/collapsible/templates/collapsibleContainer.ejs";this.containerButtonTemplate=
"lib/sentrana/collapsible/templates/collapsibleContainerActionButton.ejs";var a=this.element.html(),b=this.options.title||this.element.attr("title");this.element.html(can.view(this.panelTemplate,{panelTitle:b,allowCollapsible:this.options.allowCollapsible,iconClass:this.options.titleIconClass}));this.$indicator=this.element.find(".indicator");this.$content=this.element.find(".collapsibleContainerContent");this.$content.append(a);this.$buttonBar=this.element.find(".buttonBar");this.$title=this.element.find(".collapsibleContainerTitle");
var c=this;this.options.titleElements.forEach(function(a){c.$buttonBar.prepend(a)});this.buildCollapsiblePanelUI()},buildCollapsiblePanelUI:function(){this.UIState={expanded:!1};this.options.showHeader||this.$title.hide();this.options.showBorder||this.$content.addClass("no-border");this.options.allowCollapsible&&this.$title.css({cursor:"pointer"});this.options.initialCollapsed?this.showExpandIcon(!1):(this.$content.show(),this.showExpandIcon(!0));this.$title.addClass(this.options.titleCssClass)},
removeButtonFromBar:function(a){a&&a.cls&&(a=this.$buttonBar.find("."+a.cls).closest(".cc-button"),a.length&&a.remove())},addButtonToBar:function(a){if(a&&a.cls){a.btnStyle||(a.btnStyle="");var b="."+a.cls,c=this.$buttonBar.find(b).closest(".cc-button");c.length?c.off("click"):(this.$buttonBar.append(this.containerButtonTemplate,a),c=this.$buttonBar.find(b).closest(".cc-button"));var d=this;c.on("click",function(b){if(a.dropdown){var h=c.find(".container-drop-down"),g=$(b.delegateTarget).position();
h.css({top:g.top+$(b.delegateTarget).height(),left:g.left-h.width()+$(b.delegateTarget).width()});h.show();h.find(".container-button-menu").off("click");h.find(".container-button-menu").on("click",function(b){h.hide();$(this).trigger(a.eventType,{type:$(this).attr("elementid")});b.stopPropagation()});h.on("mouseleave",function(){h.hide()})}else d.element.trigger(a.eventType,a.eventArgs);return!1})}},getContainerPanel:function(){return this.$content},showExpandIcon:function(a){(this.UIState.expanded=
a)?(this.$indicator.removeClass(this.options.expandIcon),this.$indicator.addClass(this.options.collapseIcon)):(this.$indicator.removeClass(this.options.collapseIcon),this.$indicator.addClass(this.options.expandIcon))},showHideCollapsibleContent:function(){var a=this;if(this.options.allowCollapsible){var b=this.UIState.expanded;this.showExpandIcon(!b);this.$content.animate({height:"toggle",marginTop:"toggle",marginBottom:"toggle",paddingTop:"toggle",paddingBottom:"toggle"},function(){b?a.options.callBackFunctionOnCollapse&&
"function"===typeof a.options.callBackFunctionOnCollapse&&a.options.callBackFunctionOnCollapse():a.options.callBackFunctionOnExpand&&"function"===typeof a.options.callBackFunctionOnExpand&&a.options.callBackFunctionOnExpand()})}},".collapsibleContainerTitle click":function(){if(this.options.allowCollapsible)return this.showHideCollapsibleContent(),!1}});steal.executed("lib/sentrana/collapsible/CollapsibleContainer.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.ViewRepositoryMetadata",{pluginName:"sentrana_dialogs_view_repository_metadata",defaults:{title:"View repository metadata",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find(".report-name")},loadForm:function(){var a=Sentrana.Controllers.BIQController.methodMap.www+"/www";this.element.find(".repository-metadata-container").html(can.view("templates/repository_metadata.ejs",
{svcsUrl:a,repositoryId:this.repository.id,showDataDictionary:this.repository.showDataDictionaryDefinition}));this.$userFilterDiv=this.element.find(".user-management-filter");this.$userFilterTable=this.$userFilterDiv.find(".tbl-user-management-filter tbody");a=[];0<this.repository.datafilters.length&&(a=this.getDataFilters());this.$userFilterTable.html(can.view("templates/repository_metadata_userfilters.ejs",{userFilters:a}));this.$dataDictionaryContainer=this.element.find(".tbl-data-dictionary-definition");
this.$dataDictionaryTable=this.$dataDictionaryContainer.find(".table");this.$dataDictionaryTableBody=this.$dataDictionaryTable.find("tbody");this.$createDate=this.element.find(".repo-create-date");this.$lastUpdateDate=this.element.find(".repo-last-update-date");this.$nextUpdateDate=this.element.find(".repo-next-update-date");this.$tableInfoContainer=this.element.find(".tbl-repository-table-info");this.$metadataLoader=this.element.find(".repository-metadata-info-loading");this.$metadataContainer=this.element.find(".repository-metadata-info");
this.$showMetadataButton=this.element.find(".btn-show-repository-metadata")},getDataFilters:function(){for(var a=[],b=0;b<this.repository.datafilters.length;b++){var c={};c.id=this.repository.datafilters[b].dataFilterId;c.appliedOn=this.getAppliedOn(this.repository.datafilters[b].dataFilterId);c.includedValues="N/A";c.excludedValues="N/A";var d=this.getDataFilterValues(this.repository.datafilters[b].values);"IN"===this.repository.datafilters[b].operator?c.includedValues=d:c.excludedValues=d;a.push(c)}return a},
".btn-show-repository-metadata click":function(){this.metadataDataTableRendered?this.toggleRepositoryMetadataContainer():this.renderMetaDataDataTable()},toggleRepositoryMetadataContainer:function(){"show"===this.$showMetadataButton.val()?(this.$showMetadataButton.val("hide"),this.$showMetadataButton.text("Hide Repository Metadata"),this.$metadataContainer.fadeIn()):(this.$showMetadataButton.val("show"),this.$showMetadataButton.text("Show Repository Metadata"),this.$metadataContainer.hide())},renderMetaDataDataTable:function(){var a=
this;this.$metadataLoader.show();$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("RepositoryMetadata/"+this.repository.id),dataType:"json",success:function(b){b&&(b=b[0],a.$createDate.text(b.createDate),a.$lastUpdateDate.text(b.lastUpdateDate),a.$nextUpdateDate.text(b.nextUpdateDate),a.$tableInfoContainer.DataTable({data:b.tables,columns:[{title:"Name",data:"name"},{title:"# Of Records",data:"recordCount"},{title:"ETL Status",data:"etlErrorStatus"}]}),a.$metadataLoader.hide(),a.metadataDataTableRendered=
!0,a.toggleRepositoryMetadataContainer())}})},".btn-show-data-dictionary click":function(a){"show"===$(a).val()?($(a).val("hide"),$(a).text("Hide Data Dictionary"),this.$dataDictionaryContainer.show()):($(a).val("show"),$(a).text("Show Data Dictionary"),this.$dataDictionaryContainer.hide());this.dataDictionaryDataTableRendered||this.renderDataDictionaryTable()},renderDataDictionaryTable:function(){var a=this.repository.metricGroups,b=this.repository.reusableColumns,c=[];$.each(this.repository.dimensions,
function(a,b){for(var h=0;h<b.attributes.length;h++)c.push({name:b.attributes[h].name,description:b.attributes[h].desc,type:"Attributes"})});$.each(a,function(a,b){for(var h=0;h<b.metrics.length;h++)c.push({name:b.metrics[h].name,description:b.metrics[h].desc,type:"Metrics"})});for(a=0;a<b.length;a++)c.push({name:b[a].name,description:b[a].desc,type:"Reusable Columns"});this.$dataDictionaryTableBody.html(can.view("templates/data-dictionary-definition.ejs",{dataDictionary:c}));this.$dataDictionaryTable.dataTable({columnDefs:[{visible:!1,
targets:2},{bSortable:!1,aTargets:[0,1]}],scrollY:"300px",paging:!1,order:[[2,"asc"]],drawCallback:function(){var a=this.api(),b=a.rows({page:"current"}).nodes(),c=null;a.column(2,{page:"current"}).data().each(function(a,d){c!==a&&($(b).eq(d).before('<tr class="group"><td colspan="3">'+a+"</td></tr>"),c=a)})}});this.dataDictionaryDataTableRendered=!0},getAppliedOn:function(a){a=this.repository.dataFiltersDetail[a];return a.formName?a.attrName+" -> "+a.formName:a.attrName},getDataFilterValues:function(a){for(var b=
"",c=0;c<a.length;c++)0<b.length&&(b+=", "),b+=a[c];return b},open:function(){this.metadataDataTableRendered=this.dataDictionaryDataTableRendered=!1;this.repository=this.options.app.getDWRepository();this.element.find(".modal-title").html("Repository Information: "+this.repository.name);this.loadForm();this.openDialog()},handleCANCEL:function(){this.closeDialog("userClick")},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/RepositoryMetadataDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.DuplicateReport",{pluginName:"sentrana_dialogs_duplicate_report",defaults:{app:null,title:"Duplicate Report",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find('input[name="report-name"]')},loadForm:function(a){this.$name.val("Copy of "+a.name)},isReportExistsWithSameName:function(a){if(!this.options.app.reportDefnInfoList||
!this.options.app.reportDefnInfoList.savedReports)return!1;var b=this.options.app.retrieveUserInfo();return 0<$.grep(this.options.app.reportDefnInfoList.savedReports,function(c){return $.trim(c.name)===$.trim(a)&&c.createUserId===b.userID}).length},open:function(a){this.reportDefinitionInfoModel=a;this.loadForm(a);this.enableButton("OK");this.openDialog()},handleCANCEL:function(){this.closeDialog()},handleOK:function(){if(this.isReportExistsWithSameName(this.$name.val()))this.updateStatus(!1,"Report name already in use!",
"fail");else{this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.report_operation.copy.processing_msg));var a=this.reportDefinitionInfoModel.serialize(),a={chartOptions:a.chartOptions,chartType:a.chartType,name:this.$name.val(),definition:a.definition,showChart:a.showChart,showGrid:a.showGrid,resultOptions:a.resultOptions},b=this;(new Sentrana.Models.ReportDefinitionInfo({json:a,app:this.options.app})).save().done(function(){b.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.report_operation.copy.success_msg));
b.closeDialog("userClick")}).fail(function(a){var d=a.getResponseHeader("ErrorCode"),a=a.getResponseHeader("ErrorMsg");d===Sentrana.Enums.ErrorCode.REPORT_NAME_IN_USE?b.updateStatus(!1,a,"fail"):b.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.copy_operation.failed),"fail")}).always(function(){})}},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()},'input[name="report-name"] keyup':function(a){""!==$.trim(a.val())?this.enableButton("OK"):this.disableButton("OK")}})});
steal.executed("js/controllers/DuplicateReportDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.ShareReport",{pluginName:"sentrana_dialogs_share_report",defaults:{app:null,maxRptName:50,title:"Share Report",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"UNSHARE",className:"btn-unshare btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$tabs=this.element.find(".shrd-tabs");this.$userAutoComp=
this.element.find(".users-auto-complete");this.$userLoading=this.element.find(".users-loading");this.$userParagraph=this.element.find(".users-para");this.$newRecipients=this.element.find(".recipients");this.$emailNewRecips=this.element.find(".shrd-email-recips-new");this.$emailExistRecips=this.element.find(".shrd-email-recips-existing");this.$emailSection=this.element.find(".email-section");this.$emailSubject=this.element.find(".email-subject");this.$emailBody=this.element.find(".email-body");this.$existRecips=
this.element.find(".table tbody",this.element.find("#shrd-tab-existing"));this.$existingRecipientsTab=this.element.find("#shrd-tab-existing");this.$inviteTab=this.element.find("#shrd-tab-invite")},handleSelectEvent:function(a){"#shrd-tab-existing"===$(a).find("a").attr("href")?(this.showButton("UNSHARE"),0<this.recipientsModel.numExistingRecipients()?this.enableButton("UNSHARE"):this.disableButton("UNSHARE")):this.hideButton("UNSHARE")},handleCANCEL:function(){this.closeDialog();this.$emailExistRecips.prop("disabled",
!0);this.recipientsModel&&this.recipientsModel.unbind("change")},handleOK:function(){var a=this;this.recipientsModel.attr("subjectNew",this.$emailSubject.val());this.recipientsModel.attr("bodyNew",this.$emailBody.val());this.updateStatus(!0,app_resources.app_msg.share_report.update_recipients);var b=this.recipientsModel.save();b.done(function(b){a.updateStatus(!1,"Success!");a.closeDialog();a.reportDefinitionInfo.reloadCommentStream();a.reportDefinitionInfo.shared=a.hasShare(b.existingRecipsArray)?
!0:a.isEmpty(b.newRecipsMap)?!1:a.providedShare(b.newRecipsArray)?!0:!1;a.options.app.changeReportIcon(a.reportDefinitionInfo)});b.fail(function(b){b="Failure: "+b.getResponseHeader("ErrorMsg");a.updateStatus(!1,b,"fail")})},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},hasShare:function(a){for(var b=0;b<a.length;b++)if("AC"===a[b].partStatus)return!0;return!1},providedShare:function(a){for(var b=0;b<a.length;b++)if("AC"===a[b].partStatus)return!0;return!1},handleUNSHARE:function(){var a=
this;this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.share_report.deleting_recipients));var b=this.recipientsModel.destroy();b.done(function(){a.updateStatus(!1,"Success!");a.closeDialog();a.reportDefinitionInfo.reloadCommentStream();a.reportDefinitionInfo.shared=!1;a.options.app.changeReportIcon(a.reportDefinitionInfo)});b.fail(function(b){b="Failure: "+b.getResponseHeader("ErrorMsg");a.updateStatus(!1,b,"fail")})},showLoadingUsers:function(a){this.$userLoading[a?"show":
"hide"]();this.$userParagraph[!a?"show":"hide"]()},updateUserList:function(){var a=this;this.$userAutoComp.autocomplete({source:$.map(this.filteredUserInfoArray,function(b){if(-1===$.inArray(b.userID,a.newRecipientUserIDs))return{label:b.fullName,value:b.userID}}),minLength:2})},loadUsers:function(a){var b=this;this.recipientsModelID===a.id?this.showLoadingUsers(!1):(this.showLoadingUsers(!0),this.usersPromise=$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Users",{recipientsFor:a.id}),
type:"GET",dataType:"json"}).pipe(function(c){b.userInfoArray=c;b.userInfoMap={};$.each(b.userInfoArray,function(a,c){c.fullName=c.firstName+" "+c.lastName+" ("+c.companyName+")";b.userInfoMap[Sentrana.Models.ReportRecipients.toUserKey(c.userID)]=c});b.recipientsModelID=a.id}))},loadExistingRecipients:function(a){var b=Sentrana.Models.ReportRecipients.findOne({id:a.id,app:this.options.app}),c=this;$.when(b,this.usersPromise).done(function(b){c.recipientsModel=b;c.recipientsModel.attr("id",a.id);c.recipientsModel.bind("change",
function(){c.recipientsModel.hasChanges()?c.enableButton("OK"):c.disableButton("OK");c.$emailExistRecips.prop("checked",c.recipientsModel.isEmailNotificationEnabled()?c.$emailExistRecips.prop("checked"):!1);c.$emailExistRecips.prop("disabled",!c.recipientsModel.isEmailNotificationEnabled())});c.$existRecips.html(can.view("templates/shrd-existing-recips.ejs",{recipModel:c.recipientsModel,userInfoMap:c.userInfoMap,id:"R"+c.recipientsModel.id}));c.recipientsModel.numExistingRecipients();c.filteredUserInfoArray=
$.grep(c.userInfoArray,function(a){return!c.recipientsModel.hasExistingRecipient(a.userID)});c.updateUserList();c.showLoadingUsers(!1);c.$userAutoComp.focus()}).fail(function(a){a.getResponseHeader("ErrorMsg")!==app_resources.app_msg.session_time_out&&Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.ajax_error.recipient.load.failed.dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.ajax_error.recipient.load.failed.dialog_msg))})},loadForm:function(a){this.reportDefinitionInfo=
a;a=this.reportDefinitionInfo.name.length>this.options.maxRptName?this.reportDefinitionInfo.name.substr(0,this.options.maxRptName)+"...":this.reportDefinitionInfo.name+"-By "+this.reportDefinitionInfo.createUser;this.element.find(".modal-title").html("<span class='header-title-part-1'>Share:</span><span class='header-title-part-2'> '"+a+"'</span>");this.loadUsers(this.reportDefinitionInfo);this.$newRecipients.empty();this.$newRecipients.hide();this.senderUserID=this.options.app.retrieveUserInfo().userID;
this.newRecipientUserIDs=[];this.$userAutoComp.val("");this.$emailNewRecips.prop("checked",!1);this.$emailExistRecips.prop("checked",!1);this.$emailExistRecips.prop("disabled",!0);this.$emailSubject.val("Report Routing: "+this.reportDefinitionInfo.name+"-by "+this.reportDefinitionInfo.createUser);this.$emailBody.val("");this.loadExistingRecipients(this.reportDefinitionInfo);this.$emailSection.hide();$("#share-report-tabs li:eq(0) a").tab("show")},open:function(a){this.disableButton("OK");this.hideButton("UNSHARE");
this.loadForm(a);this.openDialog()},addUserToRecipients:function(a){this.$newRecipients.show();this.$newRecipients.append(can.view("templates/shrd-recipient.ejs",a));this.recipientsModel.addNewRecipient(a.value,"AC");this.newRecipientUserIDs.push(a.value);this.updateUserList()},changeOKButtonStatus:function(){0>=this.newRecipientUserIDs.length&&0>=this.recipientsModel.newRecipsArray.length&&(this.disableButton("OK"),this.$emailExistRecips.prop("checked",!1),this.$emailExistRecips.prop("disabled",
!0))},".users-auto-complete autocompleteselect":function(a,b,c){b.preventDefault();a.val("");this.addUserToRecipients(c.item)},".users-auto-complete autocompletefocus":function(a,b){b.preventDefault()},".delete-recipient-container click":function(a){var a=$(a).parent(".recipient"),b=a.attr("userid");a.remove();this.newRecipientUserIDs=$.grep(this.newRecipientUserIDs,function(a){return a!=b});this.recipientsModel.removeNewRecipient(b);this.$newRecipients[0<this.newRecipientUserIDs.length?"show":"hide"](100);
this.updateUserList();this.changeOKButtonStatus()},".shrd-email-recips-new click":function(a){a=a.prop("checked");this.$emailSection[a?"show":"hide"](250);this.recipientsModel.attr("notifyNew",a)},".shrd-email-recips-existing click":function(a){this.recipientsModel.attr("notifyExisting",a.prop("checked"))},".revoke-euser-action click":function(a){var b=a.prop("checked");this.recipientsModel.modifyExistingRecipient(a.parents("td").attr("userid"),b?"RV":"AC");this.changeOKButtonStatus()},".remove-euser-action click":function(a){var b=
a.prop("checked");this.recipientsModel.modifyExistingRecipient(a.parents("td").attr("userid"),b?"EX":"RJ")},".regrant-remove-euser-action click":function(a){var b=a.parents("td").attr("userid"),a=a.val();this.recipientsModel.modifyExistingRecipient(b,a)},".nav-tabs>li click":function(a){this.handleSelectEvent(a)},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/ShareReportDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.DeleteReport",{pluginName:"sentrana_dialogs_delete_report",defaults:{title:"Delete Report",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find(".report-name")},loadForm:function(a){this.$name.text(a.name)},open:function(a){this.loadForm(a);this.reportDefinitionInfoModel=
a;this.openDialog()},handleCANCEL:function(){this.closeDialog()},handleOK:function(){var a=this;this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.report_operation.remove.processing_msg));var b=this.reportDefinitionInfoModel.destroy();b.done(function(){a.updateStatus(!1,"Success!");a.closeDialog()});b.fail(function(){a.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.delete_operation.failed),"fail")})},"button.close click":function(a,b){b.preventDefault();
this.handleCANCEL()}})});steal.executed("js/controllers/DeleteReportDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.DeleteBooklet",{pluginName:"sentrana_dialogs_delete_booklet",defaults:{title:"Delete Booklet",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find(".booklet-name")},loadForm:function(a){this.$name.text(a.name)},open:function(a){this.loadForm(a);this.bookletModel=
a;this.openDialog()},handleCANCEL:function(){this.closeDialog()},handleOK:function(){var a=this;this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.booklet_operation.remove.processing_msg));var b=this.bookletModel.destroy();b.done(function(){a.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.booklet_operation.remove.success_msg));a.closeDialog()});b.fail(function(){a.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.delete_operation.failed),
"fail")})},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/DeleteBookletDialog.js");
can.Model.extend("Sentrana.Models.ReusableColumnInfo",{create:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("DerivedColumn"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},destroy:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("DerivedColumn/"+a),type:"DELETE",
headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},update:function(a,b,c,d){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("DerivedColumn/"+a),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(b),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:c,error:d})}},{init:function(a){this.app=
a}});steal.executed("js/models/ReusableColumnsModel.js");
(function(){function a(a){return"hid_"+a.replace(/[^a-zA-Z0-9]/g,"")}var b=/^\(([^@]*)@(.*)\)$/,c=/^(.*):(.*)--(.*)$/,d=/^\(([^\+]+)(.*)\)(.+)$/,e=/^f\(\d+\)$/,h=/^(.*?.+)\((.*?.+)\)$/,g=/if\((.*?[^,]+)\,(.*?.+)\)/,f=",:|[]<>{}()$;#^~.\\'\"".split(""),i=0;can.Construct("Sentrana.Models.DataWarehouseRepository",{},{init:function(a,b){this.app=b;this.supportedFeatures=this.name=this.id=null;this.loadedAttributeForms=[];this.objectMap={};this.metricGroups=[];this.metricGroupNames=[];this.dimensions=
{};this.dimensionNames=[];this.requiredAttributes=[];this.reusableColumns=[];this.datafilters=a.datafilters;this.metricDimensionMapping=a.metricDimensionMapping||[];this.showDataDictionaryDefinition=a.showDataDictionaryDefinition;this.processObjects(a);this.savedFilters=this.getSavedFilterGroup(a.savedFilterGroups)},getSavedFilterGroup:function(a){for(var b=[],c=0;c<a.length;c++){var d=this.getSavedFilterGroupModel(a[c]);this.addSavedFilterGroupToObjectMap(d);b.push(d)}return b},getSavedFilterGroupModel:function(a){var b=
this,c=a.id,d=a.name,e=a.dataSource,a=$.map(a.filterIds,function(a){return b.getObjectByOID(a,!0)});return new Sentrana.Models.SavedFilter({app:b.app,dwRepository:b,id:c,dataSource:e,name:d,filters:a})},addSavedFilterGroupToObjectMap:function(a){this.objectMap[this.makeHtmlIdForSavedFilterGroup(a.id||a.name)]=a},makeHtmlIdForSavedFilterGroup:function(a){if(a)return"hid_filtergroup_"+a.replace(/[^a-zA-Z0-9]/g,"")},hasMetrics:function(){var a=0;if(this.metricGroups&&0<this.metricGroups.length)for(var b=
0;b<this.metricGroups.length;b++)this.metricGroups[b].metrics&&(a+=this.metricGroups[b].metrics.length);return 0<a},isOnlyOneGroup:function(){for(var a=0,b=0;b<this.metricGroups.length;b++)this.metricGroups[b].metrics.length&&a++;return 1===a},getSavedFilter:function(a){a=this.getSavedFilterIndex(a);if(-1<a)return this.savedFilters[a]},getSavedFilterIndex:function(a){for(var b=0;b<this.savedFilters.length;b++)if(this.savedFilters[b].id===a)return b;return-1},getDimensionNames:function(){this.isDimensionNameExists("GroupedFilter")||
this.dimensionNames.push("GroupedFilter");return this.dimensionNames},isDimensionNameExists:function(a){return 0<$.grep(this.dimensionNames,function(b){return b===a}).length},getSupportedFeatures:function(){return this.supportedFeatures},processObjects:function(b){this.objectMap={};this.Aggregationtypes=b.aggregateFunctions;this.dataFiltersDetail={};this.id=b.oid;this.name=b.name;this.supportedFeatures=b.supportedFeatures;this.metricGroups=[];this.metricGroupNames=[];for(var c=0,d=(b.metricGroups||
[]).length;c<d;c++){var e=b.metricGroups[c],f=e.name;this.metricGroups.push(e);this.metricGroupNames.push(f);for(var f=0,g=(e.metrics||[]).length;f<g;f++){var h=e.metrics[f];h.hid=a(h.oid);h.segmentable=!0;h.type="METRIC";h.aggType=h.operation;h.originalName=h.name;h.originalHid=h.hid;this.objectMap[h.hid]=h}}this.dimensions={};this.dimensionNames=[];c=0;for(d=(b.dimensions||[]).length;c<d;c++){e=b.dimensions[c];h=e.name;this.dimensions[h]=e;this.dimensionNames.push(h);f=0;for(g=(e.attributes||[]).length;f<
g;f++){var i=e.attributes[f];i.hid=a(i.oid);i.type="ATTRIBUTE";i.dimName=h;i.formMap={};this.objectMap[i.hid]=i;i.required&&this.requiredAttributes.push(i);for(var m=0,r=i.forms.length;m<r;m++){var u=i.forms[m];i.formMap[u.oid]=u;u.formName=u.name.toUpperCase();u.type="ATTRIBUTE_FORM";u.attrHID=i.hid;u.hid=a(u.oid);u.sortOffset=m/10;this.objectMap[u.hid]=u;u.dataFilterOperator=this.getDataFilterOperator(u.oid);if(u.dataFilterOperator){var w={attrName:i.name+" ("+i.dimName+")"};1<i.forms.length&&(w.formName=
u.name);this.dataFiltersDetail[u.oid]=w}for(var w=0,y=(u.elements||[]).length;w<y;w++){var v=u.elements[w];if(v.eval||v.name)v.hid=a(v.oid),v.type="ELEMENT",v.attrHID=i.hid,v.dimName=h,this.setUMDataFilterToElement(i,u,v),this.objectMap[v.hid]=v}}}e.attributes.sort(function(a,b){return a.name.localeCompare(b.name)})}this.reusableColumns=[];c=0;for(d=(b.derivedColumns||[]).length;c<d;c++)this.addReusableColumnToObjectMap(b.derivedColumns[c])},isAttributeOnlyRepositry:function(){var a=0;if(this.metricGroups&&
0<this.metricGroups.length)for(var b=0;b<this.metricGroups.length;b++)this.metricGroups[b].metrics&&(a+=this.metricGroups[b].metrics.length);return 0===a},setUMDataFilterToElement:function(a,b,c){c.dataFilterOperator=b.dataFilterOperator;c.isFilteredByDataFilter=b.dataFilterOperator?this.isFilteredByDataFilter(b.oid,c.name):!1},getDataFilterOperator:function(a){var b=$.grep(this.datafilters,function(b){return b.dataFilterId===a});if(0<b.length)return b[0].operator},isFilteredByDataFilter:function(a,
b){var c=$.grep(this.datafilters,function(b){return b.dataFilterId===a}),d=[];0<c.length&&(d=$.grep(c[0].values,function(a){return a.toString().toUpperCase()===b.toString().toUpperCase()}));return 0<d.length},addReusableColumnToObjectMap:function(a){a=this.formateReusableColumn(a);this.reusableColumns.push(a);this.objectMap[a.hid]=a},formateReusableColumn:function(b){var c="",d,e="",f;if("CM"===b.formulaType){c=g.exec(b.formula);f=this.getObjectByOID(c[2]);d=c[1].replace(/[\(\)]/g,"").split(" and ");
c=[];for(e=0;e<d.length;e++)for(var h=d[e].split(" or "),i=0;i<h.length;i++){var q=h[i],q=q.replace(/[\[\]]/g,""),q=q.split("="),q=this.getObjectByOID($.trim(q[0])+":"+$.trim(q[1]),!0);c.push(q.hid)}e=f.name;d=f.aggType;c=c.join(",");f=f.oid}return new Sentrana.Models.ReusableColumnInfo({id:b.id,originalOid:f,oid:b.oid,name:b.name,originalName:e,dataSource:b.dataSource,formula:b.formula,formulaType:b.formulaType,outputType:b.outputType,dataType:b.outputType,precision:b.precision,type:"METRIC",hid:a(b.oid),
elementHID:c,operation:"Sum",aggType:d})},updateReusableColumnInObjectMap:function(b){for(var b=this.formateReusableColumn(b),c=-1,d=0;d<this.reusableColumns.length;d++)if(this.reusableColumns[d].id===b.id){c=d;break}-1<c&&(b.hid=a(b.oid),b.type="METRIC",this.reusableColumns.splice(c,1,b),this.objectMap[b.hid]=b)},removeReusableColumnFromObjectMap:function(a){for(var b=-1,c=0;c<this.reusableColumns.length;c++)if(this.reusableColumns[c].id===a.id){b=c;break}-1<b&&(this.reusableColumns.splice(b,1),
delete this.objectMap[a.hid])},getAllMetrics:function(){for(var a=[],b=0;b<this.metricGroups.length;b++)for(var c=0;c<this.metricGroups[b].metrics.length;c++)a.push(this.metricGroups[b].metrics[c]);return a},isAggregateMetric:function(a){var c=b.exec(a),d=!1;c&&(d=!0,a=c[1]);a=h.exec(a);if(!a||!this.isAggregationType(a[1]))return!1;var e=this.getObjectByOID(a[2]);if(!e)return!1;if(d){for(var d=c[2].split(","),f=[],g=0;g<d.length;g++){var i=this.getObjectByOID(c[2],!0);i&&f.push(i)}return 0===f.length?
!1:this.createMetricWithAggregationAndFilter(e,f,a[1])}return this.createMetricWithAggregationType(e,a[1])},isAggregationType:function(a){return 0<$.grep(this.Aggregationtypes,function(b){return b.Key.toUpperCase()===a.toUpperCase()}).length},isFilteredMetric:function(a){var c=b.exec(a),d=!1,e;if(c)return e=this.getObjectByOID(c[1]),!e?!1:this.createFilteredMetric(e,[this.getObjectByOID(c[2],!0)]);c=g.exec(a);d=!0;if(!c)return!1;e=c[2];var f,h=a.split(":");1<h.length&&(f=h[0]);e=this.getObjectByOID(e);
if(!e)return!1;for(var c=c[1].replace(/[\(\)]/g,"").split(" and "),h=[],i=0;i<c.length;i++)for(var q=c[i].split(" or "),m=0;m<q.length;m++){var r=q[m],r=r.replace(/[\[\]]/g,""),r=r.split("="),r=this.getObjectByOID($.trim(r[0])+":"+$.trim(r[1]),!0);h.push(r)}if(0===!h.length)return!1;f=this.createFilteredMetric(e,h,f);d&&(f.formula=a);return f},isRangeFilter:function(a){a=c.exec(a);if(!a)return!1;var b=this.objectMap[this.getObjectByOID(a[1],!0).attrHID];if(!b)return!1;var d="hid_"+i+"_"+(a[1]+a[2]+
a[3]).replace(/[^a-zA-Z0-9]/g,"");i+=1;return this.createRangeFilter(b.hid,b.dimName,a[1],d,0,a[2],a[3])},isTreeFilter:function(a){var b=d.exec(a);return!b?!1:this.addElement({eID:a,eName:b[3].split(":")[1],formID:b[1]})},getFilterElementsProperty:function(a){for(var b=[],c=[],e=0;e<a.length;e++){var f=a[e].oid,g=d.exec(f);g&&(f=g[3]);b.push(f);c.push(a[e].hid)}return{elementsOid:b.join(","),elementsHid:c.join(",")}},createFilteredMetric:function(a,b,c){if(!a||!b||0===b.length)return null;b=this.getFilterElementsProperty(b);
a={operation:a.operation,aggType:a.aggType,dataType:a.dataType,desc:a.desc,segmentable:a.segmentable,formula:a.formula,type:a.type,subtype:"FILTERED",originalName:a.originalName,oid:a.oid,originalOid:a.originalOid||a.oid,originalHid:a.originalHid,metricHID:a.hid,filterOid:b.elementsOid,elementHID:b.elementsHid};a.hid=this.getHID(a);a.oid=this.getFilterMetridOid(a,c);c&&0<c.length?(a.name=c,this.getMetricNameWithAggType(a)!==c&&(a.nameUpdatedManualy=!0)):a.name=this.getMetricNameWithAggType(a);return a},
getFilterMetridOid:function(a,b){var c=a.originalOid;a.aggType&&a.aggType!==a.operation&&(c=a.aggType+"("+c+")");var d=this.createFormula(a,c);b&&0<b.length&&(c=b+":"+d+",dataType:"+a.dataType+",precision:0,formulaType:CM");return c},createFormula:function(a,b){if("FILTERED"===a.subtype&&0<a.elementHID.length){for(var c=a.elementHID.split(","),d=[],e=0;e<c.length;e++)d.push(this.objectMap[c[e]]);return"if("+this.joinFilterMetricOid(this.getFiltersGroupBy(d),a)+","+b+")"}},joinFilterMetricOid:function(a){var b=
[],c=[];$.each(a,function(a,e){var f="(";b=[];for(var g=0;g<e.length;g++){var h=e[g].oid,i=d.exec(h);i&&(h=i[3]);h=h.split(":");b.push(h[0]+"=["+h[1]+"]")}f+=b.join(" or ");c.push(f+")")});return c.join(" and ")},createMetricWithAggregationType:function(a,b){if(!a||!b)return null;if(b===a.operation&&"FILTERED"!==a.subtype)return this.objectMap[a.originalHid];var c={operation:a.operation,aggType:b,dataType:a.dataType,desc:a.desc,segmentable:a.segmentable,type:a.type,subtype:a.subtype,originalName:a.originalName,
oid:a.oid,originalOid:a.originalOid||a.oid,originalHid:a.originalHid,metricHID:a.hid,filterOid:a.filterOid,elementHID:a.elementHID};c.hid=this.getHID(c);c.name=a.nameUpdatedManualy?a.name:this.getMetricNameWithAggType(c);"FILTERED"===a.subtype&&(c.oid=this.getFilterMetridOid(c,c.name));return c},createMetricWithAggregationAndFilter:function(a,b,c){if(!a||!b||0===b.length||!c)return null;b=this.getFilterElementsProperty(b);a={operation:a.operation,aggType:c,dataType:a.dataType,desc:a.desc,segmentable:a.segmentable,
type:a.type,subtype:"FILTERED",originalName:a.originalName,oid:a.oid,originalOid:a.originalOid||a.oid,originalHid:a.originalHid,metricHID:a.hid,filterOid:b.elementsOid,elementHID:b.elementsHid};a.hid=this.getHID(a);a.name=this.getMetricNameWithAggType(a);return a},getHID:function(b){var c=b.oid;!this.isFomulaColumn(b)&&b.filterOid&&(c+="@"+b.filterOid);b.aggType&&b.aggType!==b.operation&&(c+="_"+b.aggType);return a(c)},isFomulaColumn:function(a){return a.formula&&0<a.formula.length},getMetricNameWithAggType:function(a,
b){var c="",d="",e="";if(b)c=this.creatFilterMetricName(b,a);else if("FILTERED"===a.subtype&&0<a.elementHID.length){for(var c=a.elementHID.split(","),f=[],g=0;g<c.length;g++)f.push(this.objectMap[c[g]]);c=this.creatFilterMetricName(this.getFiltersGroupBy(f),a)}a.aggType&&a.aggType!==a.operation&&(d=this.getAggregationValue(a.aggType),c.length&&(d+="()"));d.length&&(e=d);c.length&&(e+=c);return e.length?a.originalName+"("+e+")":a.originalName},creatFilterMetricName:function(a){var b=[],c=[];$.each(a,
function(a,d){var e="(";b=[];for(var f=0;f<d.length;f++)b.push(d[f].name);e+=b.join(" OR ");c.push(e+")")});return c.join(" AND ")},getFiltersGroupBy:function(a){var b={},c;$.each(a,function(a,d){c=d.attrHID;b[c]||(b[c]=[]);b[c].push(d)});return b},getAggregationValue:function(a){return $.grep(this.Aggregationtypes,function(b){return b.Key===a})[0].Value},createRangeFilter:function(a,b,c,d,e,f,g){return!a||!b||!c||!d||!f||!g?null:{type:"ELEMENT",subtype:"RANGE",name:f+" - "+g,hid:d,oid:c+":"+f+"--"+
g,attrHID:a,dimName:b}},isDerivedColumn:function(a){var b=f.join("\\");return!RegExp("^[^\\"+b+"]+\\:.*\\,dataType\\:\\w+\\,precision\\:\\d+(\\,formulaType:DM)?$").exec(a)?!1:this.createDerivedColumn(a)},createDerivedColumn:function(a){var b=a.split(",");if(!b||0>=b.length)return!1;var c=b[0].split(":"),d=c[0],c=c[1],e=b[1].split(":")[1],b=b[2].split(":")[1];return{type:"METRIC",name:d,hid:"dcid_"+d,oid:a,formula:c,outputType:e,precision:b,formulaType:"DM"}},createDerivedColumnOID:function(a){return a.name+
":"+a.formula+",dataType:"+a.outputType+",precision:"+a.precision+",formulaType:"+a.formulaType},createObjectFromOID:function(a){var b=a.split(":");if(2>b.length)return null;var c=b.shift(),b=b.join(":"),d=this.getObjectByOID(c);return!d||"ATTRIBUTE_FORM"!==d.type?null:this.addElement({eID:a,eName:b,formID:c})},isSavedFilterGroup:function(a){var b=a.split(",");if(2>b.length)return!1;for(var a=[],c=0;c<b.length;c++){var d=b[c].split("@");a[$.trim(d[0])]=d[1]}if("GroupedFilter"===a.type){if("true"===
a.isSaved)a=this.getSavedFilter(a.value);else{var e=this,b=a.value.split("&").map(function(a){return e.getObjectByOID($.trim(a),!0)}),a=new Sentrana.Models.SavedFilter({app:this.app,dwRepository:this,name:a.name,filters:b});this.addSavedFilterGroupToObjectMap(a)}return a}return!1},getObjectByOID:function(b,c){var c=!0===c,d=this.isSavedFilterGroup(b);return d?d:(d=this.isAggregateMetric(b))?(this.objectMap[d.hid]||(this.objectMap[d.hid]=d),d):(d=this.isFilteredMetric(b))?this.objectMap[d.hid]=d:(d=
this.isTreeFilter(b))?d:e.test(b)?this.objectMap[a(b)]:(d=this.objectMap[a(b)])||(d=this.objectMap[a(b)+"XFRM"])?d:(d=this.isRangeFilter(b))?this.objectMap[d.hid]=d:(d=this.isDerivedColumn(b))?d:!c?null:this.createObjectFromOID(b)},retrieveReportDefnFromUrl:function(b){for(var c=b.indexOf("?"),d=(-1<c?b.substr(c+1):b).split("&"),b=null,c=0,e=d.length;c<e;c++){var f=d[c].split("=");2===f.length&&(b||(b={}),b[f[0]]=decodeURIComponent(f[1]))}d=((b||{}).filter||"").split("|");f=[];c=0;for(e=d.length;c<
e;c++){var g=d[c];if(!this.objectMap[a(g)]){var h=g.split(":");2===h.length&&f.push({eName:h[1],eID:g,formID:h[0]})}}b.totals="true"===b.totals;b.eInfos=f;return b},addElement:function(b){var c=this.getObjectByOID(b.formID),d=this.objectMap[c.attrHID],e=a(b.eID);return c?(b={name:b.eName,oid:b.eID,hid:e,type:"ELEMENT",attrHID:d.hid,dimName:d.dimName},this.objectMap[b.hid]=b):null},addElements:function(a){for(var b=0,c=(a||[]).length;b<c;b++){var d=a[b];this.getObjectByOID(d.eID)||this.addElement(d)}},
checkLoadedForm:function(a,b){var c=this,d=-1!==$.inArray(a.oid,this.loadedAttributeForms);return(!a.elements||0==a.elements.length)&&!d?(this.loadedAttributeForms.push(a.oid),$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("AttributeForm/"+a.oid),dataType:"json",async:b,success:function(a){a&&c.updateFormElements(a)}})):$.ajax({})},updateFormElements:function(b){for(var c=this.objectMap[a(b.oid)],d=this.objectMap[c.attrHID],e=0,f=(b.elements||[]).length;e<f;e++){var g=b.elements[e];if(g.eval||
g.name){g.hid=a(g.oid);g.type="ELEMENT";g.attrHID=d.hid;g.dimName=d.dimName;if(g.dataFilterOperator=c.dataFilterOperator){g.isFilteredByDataFilter=this.isFilteredByDataFilter(c.oid,g.name);var h={attrName:d.name+" ("+d.dimName+")"};1<d.forms.length&&(h.formName=c.name);this.dataFiltersDetail[c.oid]=h}else g.isFilteredByDataFilter=!1;this.objectMap[g.hid]=g}}c.elements=b.elements},isInvalidCharacterExistsInColumnName:function(a){var b=f.join("\\");return RegExp("[\\"+b+"]").test(a)},getInvalidCharactersForColumnName:function(){return f.join(" ")}})})();
steal.executed("js/constructs/DataWarehouseRepository.js");
can.Control.extend("Sentrana.Controllers.DataWarehouseAsControls",{pluginName:"sentrana_data_warehouse_as_controls",defaults:{dwRepository:null,dwSelection:null}},{init:function(){var a=this;this.hasMetrics()&&(this.metricsContainerController=$(".metrics-panel").sentrana_collapsible_container({title:"Metrics",showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control(),this.$metrics=
this.metricsContainerController.getContainerPanel());this.$dimention=$(".dimension").sentrana_collapsible_container({title:"Attributes",showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();this.$attributeElements=this.element.find(".attribute-elements");this.$reusablePopupDiv=$(".reusable-columns-list-popup");this.$savedFilterPopupDiv=
$(".saved-filter-list-popup");this.deleteReusableColumnDlg=$("#delete-reusable-column-dialog").sentrana_dialogs_delete_reusable_column({app:this.options.app}).control();this.deleteSavedFilterDlg=$("#delete-saved-filter-dialog").sentrana_dialogs_delete_saved_filter({app:this.options.app}).control();this.options.dwRepository&&(this.formulaValidatorModel=new Sentrana.Models.FormulaValidator(this.options.dwRepository.getAllMetrics(),this.options.dwRepository.reusableColumns));this.updateView()},hasMetrics:function(){var a=
0;if(this.options.dwRepository.metricGroups&&0<this.options.dwRepository.metricGroups.length)for(var b=0;b<this.options.dwRepository.metricGroups.length;b++)this.options.dwRepository.metricGroups[b].metrics&&(a+=this.options.dwRepository.metricGroups[b].metrics.length);return 0<a},update:function(a){this._super(a);this.updateView()},updateView:function(){this.options.dwRepository&&(this.hasMetrics()&&(this.buildMetricsUI(),this.buildReusableColumnsUI()),this.buildAttributesUI(),this.buildSavedFiltersUI(),
this.buildElementsUI())},buildMetricsUI:function(){this.$metrics.append('<div class="performance-metrics-grp"></div>');var a=this,b=this.element.find(".performance-metrics-grp").sentrana_side_bar_collapsible_container({title:"Performance Metrics",showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();if(this.isOnlyOneGroup())b.append('<div class="performance-metrics-'+
this.options.dwRepository.metricGroups[0].id+'" ></div>'),$(".performance-metrics-"+this.options.dwRepository.metricGroups[0].id+"",this.element).append(can.view("templates/objectCheckBox.ejs",{prefix:"pgbuilder",objects:this.options.dwRepository.metricGroups[0].metrics,totoalCount:this.options.dwRepository.metricGroups[0].metrics.length}));else for(var c=0;c<this.options.dwRepository.metricGroups.length;c++)this.options.dwRepository.metricGroups[c].metrics.length&&(b.append('<div class="performance-metrics-'+
this.options.dwRepository.metricGroups[c].id+'" ></div>'),this.element.find(".performance-metrics-"+this.options.dwRepository.metricGroups[c].id+"").sentrana_side_bar_collapsible_container({title:this.options.dwRepository.metricGroups[c].name,showHeader:!0,showBorder:!0,allowCollapsible:!0,titleCssClass:"child",callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel().append(can.view("templates/objectCheckBox.ejs",
{prefix:"pgbuilder",objects:this.options.dwRepository.metricGroups[c].metrics,totoalCount:this.options.dwRepository.metricGroups[c].metrics.length})))},buildReusableColumnsUI:function(){var a=this,b="Derived Metrics".replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-");this.$metrics.append('<div class="reusable-columns"></div>');var c=this.element.find(".reusable-columns");c.append('<div class="reusableColumns-'+b+'"></div>');b=this.element.find(".reusableColumns-"+b).sentrana_side_bar_collapsible_container({title:"Derived Metrics",
showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control();b.addButtonToBar({title:"Reusable Column",cls:"fa-superscript",eventType:"show_reusable_column_popup",dropdown:!1});this.reusableColumnContainer=b.getContainerPanel();this.populateReusableColumns();c.find(".cc-button").click(function(){a.options.app.handleUserInteraction();var b=$(this);a.$reusablePopupDiv.css({position:"absolute",
top:b.offset().top-118+"px",left:b.offset().left-6+"px"});a.$reusablePopupDiv.fadeIn("slow").show();return!1})},buildSavedFiltersUI:function(){var a=this;this.$attributeElements.append('<div class="filter-saved-filters"></div>');var b=this.element.find(".filter-saved-filters"),c=b.sentrana_side_bar_collapsible_container({title:"Saved Filters",showHeader:!0,showBorder:!0,allowCollapsible:!0,initialCollapsed:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control();
c.addButtonToBar({title:"Saved Filters",cls:"fa-filter",eventType:"show_saved_filter_popup",dropdown:!1});this.savedFilterContainer=c.getContainerPanel();this.populateSavedFilters();b.find(".cc-button").click(function(){a.options.app.handleUserInteraction();var b=$(this);a.$savedFilterPopupDiv.css({position:"absolute",top:b.offset().top-100+"px",left:b.offset().left-300+"px"});a.$savedFilterPopupDiv.fadeIn("slow").show();return!1})},populateSavedFilters:function(){var a=this,b=this.options.dwRepository.savedFilters||
[],c=[];$("input:checked",this.savedFilterContainer).each(function(){c.push($(this).attr("hid"))});this.$savedFilterPopupDiv.html(can.view("templates/saved-filter-popup.ejs",{savedFilters:b}));b={dwRepository:a.options.dwRepository,dwSelection:a.options.dwSelection,savedFilters:b};this.filterGroupController&&(this.filterGroupController.destroy(),this.savedFilterContainer.html(""));this.savedFilterContainer.append('<div class="element-filter"></div>');this.filterGroupController=$(".element-filter",
this.savedFilterContainer).sentrana_filter_group(b).control();$("input[type='checkbox']",this.savedFilterContainer).each(function(){var b=$(this).attr("hid");-1<$.inArray(b,c)&&(a.options.dwSelection.deselectObject(b),a.options.dwSelection.selectObject(b))})},".saved-filter-list-popup-item-remove-button click":function(a){if(a=this.getSavedFilter(a.attr("filterName")))this.$savedFilterPopupDiv.fadeOut("slow"),this.deleteSavedFilterDlg.open(a)},getSavedFilter:function(a){var b=null,a=this.getSavedFilterIndex(a);
-1<a&&(b=this.options.dwRepository.savedFilters[a]);return b},getSavedFilterIndex:function(a){for(var b=this.options.dwRepository.savedFilters,c=0;c<b.length;c++)if(b[c].name===a)return c;return-1},"{document} click":function(a,b){this.$reusablePopupDiv&&!this.$reusablePopupDiv.has(b.target).length&&this.$reusablePopupDiv.fadeOut("slow");this.$savedFilterPopupDiv&&!this.$savedFilterPopupDiv.has(b.target).length&&this.$savedFilterPopupDiv.fadeOut("slow")},isOnlyOneGroup:function(){for(var a=0,b=0;b<
this.options.dwRepository.metricGroups.length;b++)this.options.dwRepository.metricGroups[b].metrics.length&&a++;return 1===a},buildAttributesUI:function(){for(var a=this,b=0,c=this.options.dwRepository.dimensionNames.length;b<c;b++){var d=this.options.dwRepository.dimensionNames[b],e=this.options.dwRepository.dimensions[d];if(e){var h=d.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-");this.$dimention.append('<div class="dimension-'+h+'"></div>');d=this.element.find(".dimension-"+h).sentrana_side_bar_collapsible_container({title:d,
showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();e=$.grep(e.attributes,function(a){return a.segmentable});$(d).append(can.view("templates/objectCheckBox.ejs",{prefix:"pgbuilder",objects:e,totoalCount:e.length}))}}},buildElementsUI:function(){for(var a=this,b=!0,c=0,d=this.options.dwRepository.dimensionNames.length;c<
d;c++){var e=this.options.dwRepository.dimensionNames[c],h=this.options.dwRepository.dimensions[e];if(h)for(var g=0,f=(h.attributes||[]).length;g<f;g++){var i=h.attributes[g];if(i.formMap[i.defaultFormId].elements||"Calendar"===i.filterControl){var j=i.name.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"),k=e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"),l="filter-"+k+j;this.$attributeElements.append('<div class="'+l+'"></div>');l=this.element.find("."+l);l=l.sentrana_side_bar_collapsible_container({title:i.filterName+
" ("+i.dimName+")",showHeader:!0,showBorder:!0,allowCollapsible:!0,initialCollapsed:!b,callBackFunctionOnExpand:function(b,c){return function(){a.options.app.handleUserInteraction();$.trim(c.find(".element-filter").html()).length||a.initFilterControl(b)}}(i,l),callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();$(l).append(can.view("templates/elementHeader.ejs",{attr:i,group:k+j}));if(b||"Calendar"===i.filterControl||"Tree"==i.filterControl)this.initFilterControl(i),
b=!1}}}},checkSelectedFilter:function(a){for(var a=this.options.builderController.executionMonitorModel.reportDefinModel.filterDims[a],b=0;b<a.length;b++)this.updateSelectClass(a[b].hid,"add")},initFilterControl:function(a){var b={dwRepository:this.options.dwRepository,dwSelection:this.options.dwSelection,attr:a,form:null};$.each(a.forms,function(c,d){b.form=d;("Button"===a.filterControl||!a.filterControl)&&$(".elements-"+a.oid+"-"+d.oid).sentrana_filter_control_checkbox(b);"Tree"===a.filterControl&&
$(".elements-"+a.oid+"-"+d.oid).sentrana_filter_control_tree(b);"ListBox"===a.filterControl&&$(".elements-"+a.oid+"-"+d.oid).sentrana_filter_control_list_box(b);"Calendar"===a.filterControl&&$(".elements-"+a.oid+"-"+d.oid).sentrana_filter_control_calendar(b)});$("input[placeholder]").inputHints()}," filter_rendered":function(a,b,c){this.checkSelectedFilter(c)},populateReusableColumns:function(){var a=this,b=this.options.dwRepository.reusableColumns,c=[];$("input:checked",this.reusableColumnContainer).each(function(){c.push($(this).attr("hid"))});
for(var d=0;d<b.length;d++){var e=this.formulaValidatorModel.getFormulaWithNames(b[d].formula)||b[d].formula;$.browser.mozilla&&e&&60<e.length&&(e=e.substr(0,60)+"...");b[d].desc=e}$(this.reusableColumnContainer).html(can.view("templates/objectCheckBox.ejs",{prefix:"pgbuilder",objects:b,totoalCount:b.length}));this.$reusablePopupDiv.html(can.view("templates/reusable-formula-popup.ejs",{derivedColumns:b}));$("input[type='checkbox']",this.reusableColumnContainer).each(function(){var b=$(this),d=b.attr("hid");
if(-1<$.inArray(d,c)){var e=a.options.builderController.reportDefnModel.getTemplateUnitIndex(d);a.options.dwSelection.deselectObject(d);a.options.dwSelection.selectObject(d);a.options.builderController.reportDefnModel.deselectObject(d,"update");a.options.builderController.reportDefnModel.selectObject(d,e);b.prop("checked",!0)}})},".object-selector change":function(a){for(var b=this.options.dwRepository.objectMap[$(a).attr("hid")],c=!1,d=this.options.builderController.reportDefnModel.templateUnits,
e=0;e<d.length;e++){var h=this.options.app.dwRepository.isDerivedColumn(d[e].oid);if(h&&h.name===b.name){c=!0;break}}c?($("#"+b.hid).prop("checked",!1),Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.report_definition.column_name_conflict.dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.report_definition.column_name_conflict.dialog_msg),null,!0,!1,this)):"ELEMENT"!==b.type&&(b=a.attr("hid"),this.options.dwSelection[a.hasClass("object-selected")?"deselectObject":
"selectObject"](b))},'.formsRadio input[type="radio"] click':function(a){var b=a.attr("attrOID"),a=a.val();this.element.find(".formElements-"+b).hide();$(".elements-"+b+"-"+a).show()},".saved-filter-list-popup-item-edit-button click":function(a){if(a=this.getSavedFilter(a.attr("filterName")))this.$savedFilterPopupDiv.fadeOut("slow"),this.options.builderController.openSavedFilterDialog(a)},".saved-filter-list-popup-add-button click":function(){this.$savedFilterPopupDiv.fadeOut("slow");this.options.builderController.openSavedFilterDialog()},
" link-saved-filters-clicked":function(a,b,c){this.options.builderController.openSavedFilterDialog(c)},"{Sentrana.Models.SavedFilterGroupInfo} updated":function(a,b,c){this.updatedSavedFilter("edit",this.options.dwRepository.getSavedFilterGroupModel(c))},"{Sentrana.Models.SavedFilterGroupInfo} created":function(a,b,c){this.updatedSavedFilter("create",this.options.dwRepository.getSavedFilterGroupModel(c))},"{Sentrana.Models.SavedFilterGroupInfo} destroyed":function(a,b,c){a=this.options.dwRepository.getSavedFilterGroupModel(c);
this.options.dwRepository.savedFilters.splice(this.getSavedFilterIndex(a.name),1);b=!1;this.options.dwSelection[a.hid]&&(b=!0);this.options.dwSelection.deselectObject(a.hid);this.populateSavedFilters();b&&(c.attr("id",void 0),c=this.options.dwRepository.getSavedFilterGroupModel(c),this.options.dwRepository.objectMap[c.hid]=c,this.options.dwSelection.selectObject(c.hid))},updatedSavedFilter:function(a,b){switch(a){case "create":this.options.dwRepository.savedFilters.push(b);break;case "edit":this.options.dwRepository.savedFilters[this.getSavedFilterIndex(b.name)]=
b}this.options.dwRepository.objectMap[b.hid]=b;this.populateSavedFilters()},".reusable-columns-list-popup-add-button click":function(){this.$reusablePopupDiv.fadeOut("slow");this.options.builderController.openDerivdColumnDialog()},".reusable-columns-list-popup-item-edit-button click":function(a){for(var a=a.attr("columnid"),b=this.options.dwRepository.reusableColumns,c=null,d=0;d<b.length;d++)if(b[d].id===a){c=b[d];break}c&&(this.$reusablePopupDiv.fadeOut("slow"),"DM"===c.formulaType?this.options.builderController.openDerivdColumnDialog(null,
c):"CM"===c.formulaType&&this.options.builderController.openOnlyWhenColumnDialog(c,!1))},".reusable-columns-list-popup-item-remove-button click":function(a){for(var a=a.attr("columnid"),b=this.options.dwRepository.reusableColumns,c=null,d=0;d<b.length;d++)if(b[d].id===a){c=b[d];break}c&&(this.$reusablePopupDiv.fadeOut("slow"),this.deleteReusableColumnDlg.open(c))},"{Sentrana.Models.ReusableColumnInfo} created":function(a,b,c){this.options.dwRepository.addReusableColumnToObjectMap(c);this.populateReusableColumns()},
"{Sentrana.Models.ReusableColumnInfo} updated":function(a,b,c){this.options.dwRepository.updateReusableColumnInObjectMap(c);this.populateReusableColumns()},refreshReportsAfterReusableColumnDelete:function(a,b){if(this.options.app.reportDefnInfoList&&this.options.app.reportDefnInfoList.savedReports)for(var c=this.options.app.reportDefnInfoList.savedReports,d=0;d<c.length;d++)c[d].definition&&c[d].definition.attr("template",c[d].definition.template.replace(a,b))},refreshBookletsAfterReusableColumnDelete:function(a,
b){if(this.options.app.booklets){var c=this.options.app.booklets;if(c.savedBooklets)for(var d=0;d<c.savedBooklets.length;d++)if(c.savedBooklets[d].booklet.reports)for(var e=0;e<c.savedBooklets[d].booklet.reports.length;e++)c.savedBooklets[d].booklet.reports[e].definition&&c.savedBooklets[d].booklet.reports[e].definition.attr("template",c.savedBooklets[d].booklet.reports[e].definition.template.replace(a,b))}},refreshNestedReusableColumnsAfterReusableColumnDelete:function(a,b){for(var c=0;c<this.options.dwRepository.reusableColumns.length;c++)this.options.dwRepository.reusableColumns[c].attr("formula",
this.options.dwRepository.reusableColumns[c].formula.replace(a,b.formula))},refreshReportDefinAfterReusableColumnDelete:function(a,b,c){if(this.options.builderController.reportDefnModel)for(var d=0;d<this.options.builderController.reportDefnModel.templateUnits.length;d++){var e=this.options.builderController.reportDefnModel.templateUnits[d];if(a.test(e.oid)){c={derivedColumn:this.options.dwRepository.getObjectByOID(b),pos:d,sortPosition:e.sortPosition,sortOrder:e.sortOrder};break}}return c},"{Sentrana.Models.ReusableColumnInfo} destroyed":function(a,
b,c){var d,a=RegExp("f\\("+c.id+"\\)","gmi"),b=this.options.dwRepository.createDerivedColumnOID(c);this.refreshReportsAfterReusableColumnDelete(a,b);this.refreshBookletsAfterReusableColumnDelete(a,b);this.refreshNestedReusableColumnsAfterReusableColumnDelete(a,c);d=this.refreshReportDefinAfterReusableColumnDelete(a,b,d);this.options.dwSelection.deselectObject(c.hid);this.options.dwRepository.removeReusableColumnFromObjectMap(c);this.populateReusableColumns();this.element.trigger("update_definition_for_deleted_derived_column",
d)},"{dwSelection} change":function(a,b,c,d){this.updateSelectClass(c,d)},updateSelectClass:function(a,b){var c=$.merge($('.object-selector[hid="'+a+'"]'),$('.tree-node-selector[hid="'+a+'"]')),c=$.merge(c,$('.element-filter-listbox option[hid="'+a+'"]')),d;0<c.length&&("add"===b?(c.addClass("object-selected"),d=$('.object-selector[hid="'+a+'"]'),$(d).is(":checked")||$(d).prop("checked",!0),c.is("option")&&c.attr("selected","selected"),$(c).is("a")&&c.addClass("tree-node-selected")):"remove"===b&&
($(c).is('input[type="checkbox"]')?(c.removeClass("object-selected"),$(c).is(":checked")&&(d=$('.object-selector[hid="'+a+'"]'),$(d).prop("checked",!1))):$(c).is("option")?(c=$(c).parent("select"),$.each(c.find(":selected"),function(b,c){$(c).attr("hid")===a&&($(c).removeAttr("selected"),$(c).removeClass("object-selected"))})):$(c).is("a")&&(c.removeClass("object-selected"),c.removeClass("tree-node-selected"))))},".global-column-search-input keyup":function(a){var b=$(a).val();$(".object-selector-wrapper",
".metrics").children("label").each(function(){var a=$(this);-1<a.text().toLowerCase().indexOf(b.toLowerCase())?a.parent().show():a.parent().hide()})}});steal.executed("js/controllers/DataWarehouseAsControlsController.js");can.Observe.extend("Sentrana.Models.ObjectSelection",{},{selectObject:function(a){this.attr(a,a)},deselectObject:function(a){this.removeAttr(a)}});steal.executed("js/observes/ObjectSelectionObserve.js");
can.Observe.extend("Sentrana.Models.ReportDefin",{},{init:function(a){this.app=a.app;this.setup({templateUnits:[],filterDims:this.getDimensionArrayMap(),canView:!0,canReset:!0});this.objectMap={};this.derivedColumnMap={};this.isCleared=!0},getTemplateUnit:function(a){for(var b=0,c=this.templateUnits.length;b<c;b++)if(this.templateUnits[b].hid===a)return this.templateUnits[b]},moveTemplateUnit:function(a,b){if(a!==b){var c=this.templateUnits.splice(a,1);this.templateUnits.splice(b,0,c[0])}},moveColumn:function(a,
b){var c=this.getTemplateUnitIndices();this.moveTemplateUnit(c[a],c[b])},addTemplateUnit:function(a,b){var c=new can.Observe(a);this.objectMap[a.hid]=a.hid;this.templateUnits.splice(b,0,c)},getTemplateUnitIndex:function(a){for(var b=0,c=this.templateUnits.length;b<c;b++)if(this.templateUnits[b].hid===a)return b;return-1},selectObject:function(a,b,c){var d=this.getObjectFromObjectMap(a);if(!this.objectMap[a]&&d){var e={operation:d.operation,oid:d.oid,type:d.type,name:d.name,formula:d.formula,forms:d.forms,
selectedForms:this.computeSelectedForms(d),aggType:d.aggType,dataType:d.dataType,subtype:d.subtype,originalName:d.originalName,originalHid:d.originalHid,filterOid:d.filterOid,elementHID:d.elementHID,segmentable:d.segmentable,hid:a};switch(d.type){case "METRIC":var h=this.templateUnits.length,g=this.templateUnits.length+1;void 0!==b&&(h=b);void 0!==c&&(g=c);e.sortPos=g;e.sortOrder="D";this.addTemplateUnit(e,h);d.formula&&(this.derivedColumnMap[a]=d);break;case "ATTRIBUTE":e.sortPos=this.templateUnits.length+
1;e.sortOrder="A";this.addTemplateUnit(e,0);break;case "ELEMENT":this.app.getDWRepository(),b=d.dimName,this.app.getDWRepository(),c={hid:a},this.objectMap[a]=a,this.filterDims[b].push(c)}}},deselectObject:function(a,b){var c=this.getObjectFromObjectMap(a);if(this.objectMap[a]&&c){var d=-1;switch(c.type){case "METRIC":case "ATTRIBUTE":$.each(this.templateUnits,function(b,c){if(c.hid===a)return d=b,!1});if(0>d)return;this.templateUnits.splice(d,1);c.formula&&delete this.derivedColumnMap[a];"update"!=
b&&this.normalizeSortPositions();break;case "ELEMENT":$.each(this.filterDims[c.dimName],function(b,c){if(c.hid===a)return d=b,!1});if(0>d)return;this.filterDims[c.dimName].splice(d,1)}delete this.objectMap[a]}},normalizeSortPositions:function(a){a||(a=this.templateUnits.serialize(),a.sort(function(a,b){return a.sortPos-b.sortPos}));for(var b={},c=0,d=a.length;c<d;c++)b[a[c].hid]=c+1;c=0;for(d=this.templateUnits.length;c<d;c++)this.templateUnits[c].attr("sortPos",b[this.templateUnits[c].hid])},changeSortPosition:function(a,
b,c){var d=b+c,b=this.templateUnits.serialize();if(!(1>d||d>b.length)){b.sort(function(a,b){return a.sortPos-b.sortPos});for(var d=0,e=b.length;d<e;d++){var h=b[d];if(h.hid===a){1===c&&d<e-1?(b[d]=b[d+1],b[d+1]=h):-1===c&&0<d&&(b[d]=b[d-1],b[d-1]=h);this.normalizeSortPositions(b);break}}}},changeSortSpecification:function(a){var b=this.getTemplateUnitFormsAndMetrics(),c=b.slice();$.each(c,function(a,b){b.columnIndex=a});c.sort(function(a,b){return a.sortPos-b.sortPos});var d=$.map(a,function(a){return a.columnIndex}),
c=$.grep(c,function(a){return-1===$.inArray(a.columnIndex,d)});$.each(c,function(b,c){a.push({columnIndex:c.columnIndex,sortOrder:c.sortOrder})});for(var c={},e=1,h=0,g=(a||[]).length;h<g;h++){var f=a[h];if(!b[f.columnIndex])break;var i=b[f.columnIndex].tu;i&&!(i.hid in c)&&(i.attr("sortOrder",f.sortOrder),i.attr("sortPos",e),c[i.hid]=1,e++)}},getDimensionArrayMap:function(){var a={};$.each(this.app.getDWRepository().getDimensionNames(),function(b,c){a[c]=[]});a.GroupedFilter=[];return a},filterEmpty:function(){var a=
0,b=this.filterDims;$.each(this.app.getDWRepository().getDimensionNames(),function(c,d){a+=(b[d]||[]).length});return 0===a},clear:function(){this.isCleared=!0;this.objectMap={};this.derivedColumnMap={};this.attr({canReset:!0,canView:!0,canSave:!1,templateUnits:[],filterDims:this.getDimensionArrayMap(),totalsOn:!1},!0)},getTemplateUnitFormsAndMetrics:function(){for(var a=[],b=0,c=this.templateUnits.length;b<c;b++){var d=this.templateUnits[b],e=this.getObjectFromObjectMap(d.hid);e||(e=this.app.getDWRepository().getObjectByOID(d.oid,
!0));for(var e="ATTRIBUTE"===e.type?this.getSelectedForms(e,d.selectedForms):[e],h=0,g=e.length;h<g;h++)a.push({tu:d,object:e[h],sortOrder:d.sortOrder,sortPos:d.sortPos})}return a},getTemplateUnitIndices:function(){for(var a=[],b=0,c=this.templateUnits.length;b<c;b++)for(var d=this.templateUnits[b],e=this.getObjectFromObjectMap(d.hid),h=0,d=("ATTRIBUTE"===e.type?this.getSelectedForms(e,d.selectedForms):[e]).length;h<d;h++)a.push(b);return a},normalizeNumbers:function(a,b){var c=a.slice(0);c.sort(function(a,
c){return a[b]-c[b]});for(var d={},e={},h=0,g=c.length;h<g;h++){var f=d[c[h][b]]?d[c[h][b]]+1:1;d[c[h][b]]=f;e["i"+c[h][b]+"_"+f.toString()]=h}for(var d={},h=[],g=0,i=a.length;g<i;g++){f=d[a[g][b]]?d[a[g][b]]+1:1;d[a[g][b]]=f;var f=e["i"+a[g][b]+"_"+f.toString()],j=c[f];j[b]=f+1;h.push(j)}return h},getSort:function(){for(var a=this.getTemplateUnitFormsAndMetrics(),b=[],c=0,d=a.length;c<d;c++){var e=a[c];"ATTRIBUTE_FORM"===e.object.type?b.push({sp:e.sortPos+e.object.sortOffset,so:e.sortOrder}):"METRIC"===
e.object.type&&b.push({sp:e.sortPos,so:e.sortOrder})}a=this.normalizeNumbers(b,"sp");b=[];c=0;for(d=a.length;c<d;c++)e=a[c],b.push(e.sp+e.so);return b.join("|")},getFileNameToExport:function(){for(var a=this.app.retrieveRepositoryInfo(),a=$.trim(a.repositoryName),a=a+"_",b=0,c=(this.templateUnits||[]).length;b<c;b++)a+=this.templateUnits[b].name+"_";b=new Date;b=b.getFullYear()+""+("0"+(b.getMonth()+1)).slice(-2)+("0"+b.getDate()).slice(-2);128<a.length+b.length&&(a=a.substr(0,a.length-(a.length+
b.length-128)));return(a+b).replace(/ /g,"-")},getReportDefinitionParameters:function(a){for(var b=this.app.getDWRepository().objectMap,c=[],d=0,e=(this.templateUnits||[]).length;d<e;d++){var h=this.templateUnits[d];if(h)if("METRIC"===h.type)c.push(this.getCombinedOID(h));else if("ATTRIBUTE"===h.type)for(var g=0,f=h.forms.length;g<f;g++)h.selectedForms&1<<g&&c.push(h.forms[g].oid)}var i=[],j=this;$.each(this.app.getDWRepository().getDimensionNames(),function(c,d){if("GroupedFilter"===d)for(var e=
0,f=j.filterDims[d],g=f.length;e<g;e++){var h=j.getSavedFilter(f[e].hid),q=b[f[e].hid],m="true";h?q=h.id:(h=q,m="false",q=h.filters.map(function(a){return a.oid}).join("&"));if(a)for(m=0;m<h.filters.length;m++)i.push(b[h.filters[m].hid].oid);else i.push("type@GroupedFilter, name@"+h.name+", isSaved@"+m+", value@"+q)}else{e=0;f=j.filterDims[d];for(g=f.length;e<g;e++)i.push(b[f[e].hid].oid)}});return{template:c.join("|"),filter:i.join("|"),totals:!!this.totalsOn,sort:this.getSort()}},getSavedFilter:function(a){for(var b=
this.app.getDWRepository().savedFilters,c=0;c<b.length;c++)if(b[c].hid===a)return b[c]},getCombinedOID:function(a){var b=a.oid;this.isFormulaColumn(a)||(a.aggType&&a.aggType!==a.operation&&(b=a.aggType+"("+b+")"),a.filterOid&&(b="("+b+"@"+a.filterOid+")"));return b},isFormulaColumn:function(a){return a.formula&&0<a.formula.length},getFilterObjects:function(){var a=this,b=this.app.getDWRepository(),c=[];$.each(b.getDimensionNames(),function(d,e){for(var h=0,g=a.filterDims[e],f=g.length;h<f;h++)c.push(b.objectMap[g[h].hid])});
return c},getTemplateUnitObjectsByType:function(a){for(var b=[],c=0,d=this.templateUnits.length;c<d;c++){var e=this.getObjectFromObjectMap(this.templateUnits[c].hid);e.type===a&&b.push(e)}return b},getMetricObjects:function(){return this.getTemplateUnitObjectsByType("METRIC")},getAttributeObjects:function(){return this.getTemplateUnitObjectsByType("ATTRIBUTE")},missingRequiredAttributes:function(){var a=this.app.getDWRepository(),b=this.getFilterObjects();return $.grep(a.requiredAttributes,function(c){for(var d=
0,e=b.length;d<e;d++)if(a.objectMap[b[d].attrHID]===c)return!1;return!0})},filterElements:function(a,b){for(var c=[],d=0,e=0,h=this.templateUnits.length;e<h;e++){var g=this.templateUnits[e],f=this.getObjectFromObjectMap(g.hid);if("ATTRIBUTE"===f.type&&"Subtotal:"!==a[e]&&""!==a[e])for(var g=this.getSelectedForms(f,g.selectedForms),i=0,j=g.length;i<j;i++){var k=g[i];this.app.getDWRepository().checkLoadedForm(k);var l=this.getColumnIndex(k.oid,b);c.push({elemName:$.trim(a[l]),elemOID:k.oid+":"+$.trim(a[l]),
attrOID:f.oid});d++}else d++}return c},getColumnIndex:function(a,b){for(var c=!b?this.resultDataModel.manipulatedData.colInfos:$.grep(this.resultDataModel.manipulatedData.colInfos,function(a){return"ATTRIBUTE"===a.colType}),d=0;d<c.length;d++)if(c[d].oid===a)return d;return-1},setTotals:function(a){this.attr("totalsOn",a)},setSaved:function(a){this.attr("savedReport",a)},canSave:function(a){this.attr("canSave",a)},canView:function(a){this.attr("canView",a)},computeSelectedForms:function(a,b){if("ATTRIBUTE"!==
a.type)return 0;for(var b=b||a.defaultFormId,c=0,d=a.forms.length;c<d;c++)if(a.forms[c].oid===b)return 1<<c;return 0},getSelectedForms:function(a,b){for(var c=[],d=0,e=(a.forms||[]).length;d<e;d++){var h=a.forms[d];b&1<<d&&c.push(h)}return c},toggleSelectedForm:function(a,b){var c=this.app.getDWRepository().objectMap[a],d=this.getTemplateUnit(a);if(c&&d)for(var e=0,h=c.forms.length;e<h;e++)if(c.forms[e].oid===b){c=1<<e;d.attr("selectedForms",c&d.selectedForms?d.selectedForms&~c:d.selectedForms|c);
break}},isFormOfAttribute:function(a,b){return!a||!b?void 0:"ATTRIBUTE_FORM"!==a.type?!1:a.attrHID===b.hid},setDefn:function(a,b){a||Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.report_render.error.dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.report_render.error.dialog_msg));b=b||[];this.groupFilters=$.extend(!0,{},this.filterDims.GroupedFilter);this.clear();var c,d=a.totals,e=a.template.split("|"),h=a.sort.split("|"),g=a.filter?a.filter.split("|"):
[];this.app.getDWRepository().addElements(b);for(var f=0,i=g.length;f<i;f++)c=this.app.getDWRepository().getObjectByOID(g[f],!0),this.selectObject(c.hid);g=[];f=0;for(i=e.length;f<i;f++){c=this.app.getDWRepository().getObjectByOID(e[f]);var j=h[f],k=parseInt(j,10),j=j.substr(j.length-1,1),k={operation:c.operation,oid:c.oid,sortPos:k,type:c.type,formula:c.formula,sortOrder:j,selectedForms:0};if("ATTRIBUTE_FORM"===c.type){var j=this.app.getDWRepository().objectMap[c.attrHID],l;k.hid=j.hid;k.name=j.name;
k.selectedForms=this.computeSelectedForms(j,c.oid);k.forms=j.forms;for(k.type=j.type;f+1<i&&this.isFormOfAttribute(l=this.app.getDWRepository().getObjectByOID(e[f+1]),j);)k.selectedForms|=this.computeSelectedForms(j,l.oid),f++;g.push(k)}else"METRIC"===c.type&&(k.aggType=c.aggType,k.dataType=c.dataType,k.subtype=c.subtype,k.name=c.name,k.originalName=c.originalName,k.originalHid=c.originalHid,k.filterOid=c.filterOid,k.elementHID=c.elementHID,k.segmentable=c.segmentable,k.hid=c.hid,g.push(k),c.formula&&
!c.id&&(this.derivedColumnMap[c.hid]=c))}f=0;for(i=g.length;f<i;f++)k=g[f],this.addTemplateUnit(k,f);this.normalizeSortPositions();this.setTotals(d);this.isCleared=!1},computeReportName:function(a){for(var b=this.getFilterObjects(),c=this.getMetricObjects(),d=this.getAttributeObjects(),e=this.app.getDWRepository(),h=[],g=[],f={},i=[],j=[],i=0,k=b.length;i<k;i++){var l=e.objectMap[b[i].attrHID],n=b[i].name;if(!n.match(/^\d+$/)||l.name.match(/year/i))l.required?h.push(n):g.push(n)}h.length&&j.push(h.join(", "));
$.each(c,function(a,b){var c=b.name.replace(/\(.*$/,"").replace(/^\s+|\s+$/g,"");f[c]=1});i=$.map(f,function(a,b){return b});2<i.length?j.push("Data"):0<i.length&&j.push(i.join(", "));0<d.length&&3>=d.length&&(j.push("by"),j.push($.map(d,function(a){return a.name}).join(", ")));b=j.join(" ");0<g.length&&(g=" for "+g.join(", "),b.length+g.length<=a&&(b+=g));60<b.length&&(b="New Report");return b},isReportExistsWithSameName:function(a){if(!this.app.reportDefnInfoList||!this.app.reportDefnInfoList.savedReports)return!1;
var b=this.app.retrieveUserInfo();return 0<$.grep(this.app.reportDefnInfoList.savedReports,function(c){return $.trim(c.name)===$.trim(a)&&1*c.createUserId===1*b.userID}).length},getObjectFromObjectMap:function(a){var b=this.app.getDWRepository().objectMap[a];b||(b=this.derivedColumnMap[a]);return b},addExpressionToReportDefinition:function(a,b,c,d){this.addTemplateUnit(this.getTuObject(a,d||"D",c),b);this.derivedColumnMap[a.hid]=a},updateExpressionOfReportDefinition:function(a,b,c,d,e){this.deselectObject(a,
"update");this.addExpressionToReportDefinition(b,c,d,e)},removeExpressionFromReportDefinition:function(a){this.deselectObject(a)},addFormulaToReportDefinition:function(a,b,c){this.addTemplateUnit(this.getTuObject(a,"D",c),b)},addConditionalMetricToReportDefinition:function(a,b,c,d){this.addTemplateUnit(this.getTuObject(a,d,c),b)},updateFormulaOfReportDefinition:function(a,b,c,d){this.deselectObject(a,"update");this.addFormulaToReportDefinition(b,c,d)},removeFormulaFromReportDefinition:function(a){this.deselectObject(a)},
getTuObject:function(a,b,c){return{oid:a.oid,type:a.type,name:a.name,formula:a.formula,forms:a.forms,selectedForms:this.computeSelectedForms({}),aggType:a.aggType,dataType:a.dataType,subtype:a.subtype,originalName:a.originalName,originalHid:a.originalHid,filterOid:a.filterOid,elementHID:a.elementHID,segmentable:a.segmentable,hid:a.hid,sortPos:c,sortOrder:b}}});steal.executed("js/observes/ReportDefinObserve.js");
can.Control.extend("Sentrana.Controllers.ReportDefinEditor",{pluginName:"sentrana_report_defin_editor"},{init:function(){this.app=this.options.app;this.$resetButton=this.element.find(".clear-button");this.$viewButton=this.element.find(".view-button");this.$saveButton=this.element.find(".save-button");this.$saveAsButton=this.element.find(".save-as-button");this.$shareButton=this.element.find(".share-button");this.$reportZone=this.element.find(".report-zone");this.$actionBar=this.element.find(".panel-footer");
this.$actionButtonContainer=this.element.find(".actionButtonContainer");this.$pivotButton=this.element.find(".pivot-button");$("button",this.element).button();$(".show-total").hide()},showHideElement:function(a,b){a[b?"show":"hide"]()},cleanTemplateUnitsRow:function(){0===this.options.reportDefnModel.templateUnits.length&&(this.options.reportDefnModel.filterEmpty()?this.renderReportZone():this.hideColumnDefn())},cleanFilterDimRow:function(a){if(!(0<this.options.reportDefnModel.filterDims[a].length))if(this.empty())this.renderReportZone();
else{var a=this.$reportZone.find('.dim[dimname="'+a+'"]').parents("tr"),b=a.find("td:nth-child(1)"),c=b.text(),b=b.html();a.remove();""===c||this.options.reportDefnModel.filterEmpty()||this.$reportZone.find("tr:nth-child(3)").find("td:nth-child(1)").html(b)}},empty:function(){return!this.options.reportDefnModel.templateUnits.length&&this.options.reportDefnModel.filterEmpty()},renderReportZone:function(){this.$reportZone.html(can.view("templates/reportZone.ejs",{showTotals:!!this.totalsOn}));this.$reportZone.show();
this.ensureTemplateUnitsRow();this.hideColumnDefn()},enableOrDisableButtons:function(){this.empty()?(this.$actionBar.hide(),this.renderReportZone()):(this.$reportZone.fadeIn(),this.$actionBar.show(),this.showHideButtons())},showHideButtons:function(){this.showAllButtons();this.options.parent.reportIsRunning&&this.showOnlyViewButtons()},showAllButtons:function(){this.$actionButtonContainer.find("button").show();this.app.dwRepository.isAttributeOnlyRepositry()&&this.$pivotButton.hide();this.options.reportDefnModel.savedReport||
(this.$saveAsButton.hide(),this.$shareButton.hide())},showOnlyViewButtons:function(){this.$actionButtonContainer.find("button").hide();this.$viewButton.show()},clearSaveConfirmationMessage:function(){$(".save-execution-message").text("")},ensureTable:function(){0===this.$reportZone.find("table").length&&this.renderReportZone()},hideColumnDefn:function(){$(".formula-column-button").css("margin-bottom","5px");this.$reportZone.find(".template-units").closest("tr").find(".label").hide();this.$reportZone.find(".hr-under-columns").hide()},
showColumnDefn:function(){$(".formula-column-button").css("margin-bottom","0px");this.$reportZone.find(".template-units").closest("tr").find(".label").show();this.$reportZone.find(".hr-under-columns").show()},ensureTemplateUnitsRow:function(){this.ensureTable();0===this.$reportZone.find(".template-units").length&&(this.$reportZone.find("tbody").prepend(can.view("templates/templateUnitsRow.ejs",{})),this.$templateUnits=this.$reportZone.find(".template-units"),this.makeTemplateUnitSortable())},ensureFilterDimRow:function(a){this.ensureTable();
if(0===this.$reportZone.find('.dim[dimname="'+a+'"]').length){var b=0===this.$reportZone.find(".dim").length?"FILTER:":"";this.$reportZone.find("tbody").append(can.view("templates/filterUnitsRow.ejs",{col1Text:b,dimName:a}))}},makeTemplateUnitSortable:function(){var a=this;this.$templateUnits.sortable({containment:".report-zone",opacity:0.75,forcePlaceholderSize:!0,helper:"clone",placeholder:"tu-placeholder",revert:100,stop:function(b,c){for(var d=c.item.attr("hid"),e=a.options.reportDefnModel.templateUnits,
h=0,g=e.length;h<g;h++)if(e[h].hid===d)for(var f=$(".tu",this),i=0,j=f.length;i<j;i++)if($(f[i]).attr("hid")===d){a.options.reportDefnModel.moveTemplateUnit(h,i);a.options.parent.updateResultDefinition();return}}})},".show-totals click":function(a){this.options.reportDefnModel.setTotals(!a.hasClass("option-button-on"))},"#chk-show-total change":function(a){this.options.reportDefnModel.setTotals($(a).is(":checked"))},".pivot-button click":function(a,b){this.options.parent.validatePivotData()?this.options.parent.reportDefinitionChanged?
(this.options.parent.showPivotAnalysis=!0,this.executeReport(a,b)):this.element.trigger("show_pivot_analysis"):Sentrana.AlertDialog("Not enough columns selected.","Please select two or more attributes and at least one or more metric columns to see the pivot analysis.")},".clear-button click":function(a){$(".pivot-table-element").control()&&$(".pivot-table-element").control().destroy();$(".pivot-table-element").html("");var b=this;"RESET"===$(a).text()?(b.options.reportDefnModel.clear(),b.element.trigger("reset_report")):
this.options.parent.isChangesMade()?(a=this.options.app.retrieveUserInfo())&&a.sessionId&&Sentrana.ConfirmDialogYNC(Sentrana.getMessageText(window.app_resources.app_msg.save_changes.dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.save_changes.dialog_msg,this.options.parent.options.reportDefinitionInfoModel.name),function(){b.options.parent.executionSuccessful?b.element.trigger("save_report",{resetPage:!0}):Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.report_definition.execution.required_dialog_title),
Sentrana.getMessageText(window.app_resources.app_msg.report_definition.execution.required_dialog_msg))},function(){b.options.reportDefnModel.clear();b.element.trigger("reset_report")},function(){},!0):(b.options.reportDefnModel.clear(),b.element.trigger("reset_report"))},".view-button click":function(a,b){this.executeReport(a,b)},executeReport:function(a,b){this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.ViewReport,Context:Sentrana.ActionLog.Contexts.BuilderPage,ElementType:Sentrana.ActionLog.ElementTypes.Report});
var c=this.options.app.retrieveUserInfo();c&&c.sessionId&&(this.empty()||!this.options.reportDefnModel.templateUnits.length?Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.report_definition.validation.column.required_dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.report_definition.validation.column.required_dialog_msg)):(c=this.options.reportDefnModel.missingRequiredAttributes(),0!==c.length?(c=$.map(c,function(a){return a.name}).join("\n"),Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.report_definition.validation.element.required_dialog_title),
Sentrana.getMessageText(window.app_resources.app_msg.report_definition.validation.element.required_dialog_msg,c)),b.stopPropagation()):this.element.trigger("execute_report_by_defn",[this.options.reportDefnModel.getReportDefinitionParameters(!0),"CLEAR",null])))},".save-button click":function(){this.element.trigger("save_report")},".save-as-button click":function(){this.element.trigger("save_as_report")},".share-button click":function(){this.options.parent.shareReport()},templateUnitAdded:function(a,
b,c){var c=a.attr(c),d=parseInt(b[1],10);this.ensureTemplateUnitsRow();var e=this.element.find(".tu"),b=0===e.length?this.$templateUnits:d<e.length?$(e[d]):$(e[e.length-1]),d=0===e.length?"prepend":d<e.length?"before":"after",e=this.app.getDWRepository().Aggregationtypes,e={name:c.name,type:c.type,hid:c.hid,pos:c.sortPos,forms:c.forms,selectedForms:c.selectedForms,isDerivedColumn:!1,aggTypes:e,oid:c.oid,aggType:c.aggType,operation:c.operation,showOnlyWhen:!0,showTransform:!0,showAggregate:!0};if("METRIC"===
c.type)if(c.formula)e.isDerivedColumn=!0,e.showAggregate=!1,"CM"===this.getFormulaType(c)?e.showTransform=!1:e.showOnlyWhen=!1;else{if("FILTERED"===c.subtype&&(e.showTransform=!1),"Sum"===c.operation)e.showAggregate=!0}else e.showTransform=!1,e.showOnlyWhen=!1,e.showAggregate=!1;e.isExpandableHeader=this.isExpandableHeader(c);b[d](can.view("templates/templateUnit.ejs",e));this.element.find('.tu[hid="'+c.hid+'"]').sentrana_template_unit({ruModel:c,rdModel:a,builderPageController:this.options.parent,
isExpandableHeader:e.isExpandableHeader});this.ExpandReportDefinitionArea()},ExpandReportDefinitionArea:function(){var a=this.options.parent.element;a.find(".report-zone-collapsibleContainer").is(":visible")||(a.find(".indicator").toggleClass("fa-minus-square fa-plus-square"),a.find(".report-zone-collapsibleContainer").slideToggle("normal"))},isExpandableHeader:function(a){return"ATTRIBUTE"===a.type&&1===a.forms.length?!1:!0},getFormulaType:function(a){return a.elementHID&&0<a.elementHID.length?"CM":
"DM"},templateUnitRemoved:function(a){var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],this.element.find('.tu[hid="'+d.hid+'"]').remove();this.cleanTemplateUnitsRow()},filterDimensionAdded:function(a,b,c){var d;d=b[0];var b=this.app.getDWRepository().objectMap[d.hid],e=!1;if(b.dataFilterOperator)switch(b.dataFilterOperator.toUpperCase()){case "IN":!1===b.isFilteredByDataFilter&&(e=!0);break;case "NOT IN":!0===b.isFilteredByDataFilter&&(e=!0)}c=c[1];this.ensureFilterDimRow(c);var h="GroupedFilter"===b.dimName;
$('.dim[dimname="'+c+'"]').append(can.view("templates/filterUnit.ejs",{name:b.name,hid:d.hid,dim:c,filtered:e,isFiterGroup:h}));this.element.find('.fu[hid="'+d.hid+'"]').sentrana_report_unit({ruModel:d,rdModel:a,object:b});this.ExpandReportDefinitionArea()},filterDimensionRemoved:function(a,b){var c,d=a.length,e;for(c=0;c<d;c++)e=a[c],this.element.find('.fu[hid="'+e.hid+'"]').remove();this.cleanFilterDimRow(b[1])},"{reportDefnModel} change":function(a,b,c,d,e,h){b=c.split(".");this.clearSaveConfirmationMessage();
switch(b[0]){case "canReset":if("add"===d||"set"===d)this.$resetButton[!e?"addClass":"removeClass"]("disabled");break;case "canView":if("add"===d||"set"===d)this.$viewButton[!e?"addClass":"removeClass"]("disabled");break;case "canSave":if("add"===d||"set"===d)this.$saveButton[!e?"addClass":"removeClass"]("disabled"),this.$saveAsButton[!e?"addClass":"removeClass"]("disabled"),this.$shareButton[!e?"addClass":"removeClass"]("disabled");break;case "savedReport":if("add"===d||"set"===d)this.$resetButton.text(e?
"CLOSE":"CLEAR"),e?this.$saveAsButton.css("display","inline-block"):this.$saveAsButton.css("display","none"),e?this.$shareButton.css("display","inline-block"):this.$shareButton.css("display","none");break;case "totalsOn":("add"===d||"set"===d)&&$("#chk-show-total").prop("checked",e);this.options.parent.executionSuccessful=!1;break;case "templateUnits":var g;"add"===d&&2===b.length?(this.templateUnitAdded(a,b,c),g=a.attr(c),this.options.parent.updateResultDefinition()):"remove"===d&&(this.templateUnitRemoved(h),
1===h.length&&(g=h[0]));0<this.options.reportDefnModel.templateUnits.length?this.showColumnDefn():this.hideColumnDefn();this.options.parent.executionSuccessful=!1;this.element.trigger("apply_mteric_dimension_mapping",{reportDefnModel:this.options.reportDefnModel,newTu:g,changeType:d});break;case "filterDims":"add"===d&&3==b.length?this.filterDimensionAdded(a,e,b):"remove"===d&&this.filterDimensionRemoved(h,b),this.options.reportDefnModel.filterEmpty()?$(".hr-under-filter").css("display","none"):$(".hr-under-filter").css("display",
"block"),this.options.parent.executionSuccessful=!1}this.enableOrDisableButtons()}});steal.executed("js/controllers/ReportDefnEditorController.js");
can.Control.extend("Sentrana.Controllers.ReportUnit",{pluginName:"sentrana_report_unit",defaults:{ruModel:null,rdModel:null}},{".tu-close-container click":function(){this.options.rdModel.deselectObject(this.options.ruModel.hid)},".fu-close-container click":function(){this.options.rdModel.deselectObject(this.options.ruModel.hid)},".fu-header click":function(){this.element&&this.isGroupFilter()&&(this.element.find(".link-saved-filters").slideToggle(200),this.toggleUpDnImage())},isGroupFilter:function(){return"GroupedFilter"===
this.options.object.dimName},toggleUpDnImage:function(){var a=this.element.find(".fu-header"),a=$("i",a);$(a[0]).toggleClass("fa-rotate-90")},".link-saved-filters click":function(){this.element.trigger("link-saved-filters-clicked",this.options.object)}});steal.executed("js/controllers/ReportUnitController.js");
steal("js/controllers/ReportUnitController.js",function(){Sentrana.Controllers.ReportUnit.extend("Sentrana.Controllers.TemplateUnit",{pluginName:"sentrana_template_unit"},{init:function(){this.$sortPosition=this.element.find(".num");this.$sortOrderAsc=this.element.find(".asc");this.$sortOrderDsc=this.element.find(".desc");this.$controls=this.element.find(".controls");this.$forms=this.element.find(".forms");this.$header=this.element.find(".tu-header");this.incrementedWidth=!1;("A"===this.options.ruModel.sortOrder?
this.$sortOrderAsc:this.$sortOrderDsc).addClass("selected")},".tu-header click":function(){if(this.options.isExpandableHeader){var a=this;this.$controls.slideToggle(200,function(){a.$controls.is(":visible")||Sentrana.FirstLook.createFilteredMetricMode(!1)});this.toggleUpDnImage()}},toggleUpDnImage:function(){var a=$("i",this.$header);$(a[0]).toggleClass("fa-rotate-90")},".less click":function(){var a=this.options.ruModel;this.options.rdModel.changeSortPosition(a.hid,a.sortPos,-1)},".more click":function(){var a=
this.options.ruModel;this.options.rdModel.changeSortPosition(a.hid,a.sortPos,1)},".asc click":function(){this.options.ruModel.attr("sortOrder","A")},".desc click":function(){this.options.ruModel.attr("sortOrder","D")},".forms span click":function(a){var b=this.options.ruModel,a=a.attr("oid");this.options.rdModel.toggleSelectedForm(b.hid,a);this.element.trigger("enable-view-button")},".create-filtered-metric click":function(a){$(".edit-derived-metrics",a).is(":visible")?this.options.builderPageController.openDerivdColumnDialog(this.options.ruModel):
($(a).attr("filter",!0),Sentrana.FirstLook.createFilteredMetricMode(!0))},".transform-column click":function(){this.options.builderPageController.openDerivdColumnDialog(this.options.ruModel)},".onlywhen-column click":function(a){a=this.options.rdModel.app.dwRepository.objectMap[$(a).closest(".tu").attr("hid")];a.sortOrder=this.options.ruModel.sortOrder;a.sortPos=this.options.ruModel.sortPos;this.options.builderPageController.openOnlyWhenColumnDialog(a,!0)},".aggregation-type-drop-down-select change":function(a){var b=
$(a).val(),c=this.options.rdModel.app.dwRepository.objectMap[$(a).closest(".tu").attr("hid")];if(this.isSameMetricExist(b,c)){var d=this.options.ruModel.attr("aggType");Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.report_definition.validation.metrics.already_exists.dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.report_definition.validation.metrics.already_exists.dialog_msg),function(){$('option[value="'+d+'"]',a).prop("selected",!0)})}else this.options.ruModel.attr("aggType",
b)},isSameMetricExist:function(a,b){return 0<$.grep(this.options.rdModel.templateUnits,function(c){return c.aggType===a&&c.oid===b.oid&&c.subtype===b.subtype&&c.filterOid===b.filterOid}).length},changeAggregationType:function(a,b){var c=this.options.rdModel.app.dwRepository.objectMap,d=c[a.hid],e;e=this.options.rdModel.app.dwRepository.createMetricWithAggregationType(d,b);c[e.hid]||(c[e.hid]=e);var c=this.options.rdModel.getTemplateUnitIndex(d.hid),h=this.options.ruModel.attr("sortPos");this.options.rdModel.deselectObject(d.hid,
"update");this.options.rdModel.selectObject(e.hid,c,h)},"{ruModel} change":function(a,b,c,d,e,h){switch(c){case "sortOrder":this.$sortOrderAsc["A"===e?"addClass":"removeClass"]("selected");this.$sortOrderDsc["D"===e?"addClass":"removeClass"]("selected");break;case "sortPos":this.$sortPosition.text(e);break;case "selectedForms":var g=this;0===e?Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.report_definition.validation.attribute.form.not_selected.dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.report_definition.validation.attribute.form.not_selected.dialog_msg),
function(){g.options.ruModel.attr("selectedForms",h)}):$("span",this.$forms).each(function(a,b){$(b)[e&1<<a?"addClass":"removeClass"]("selected")});break;case "aggType":this.changeAggregationType(a,e)}}})});steal.executed("js/controllers/TemplateUnitController.js");
can.Control.extend("Sentrana.Controllers.Diagnostics",{pluginName:"sentrana_diagnostics",defaults:{executionMonitorModel:null}},{init:function(){this.$timingInfo=this.element.find(".timing-info")},"a.drop-cache click":function(a,b){b.preventDefault();this.options.executionMonitorModel.dropCache(a.attr("cid"))},"a.view-sql click":function(a,b){b.preventDefault();this.$sql.toggle(250)},"{executionMonitorModel} change":function(a,b,c,d,e){switch(c){case "executionStatus":switch(e){case "STARTING":this.$timingInfo.empty();
break;case "SUCCESS":a=a.getData(),this.$timingInfo.html(can.view("templates/timingInfo.ejs",a)),this.$sql=this.element.find(".sql"),this.$dropCache=this.element.find(".drop-cache")}break;case "droppingCache":"remove"===d?this.$dropCache.parent("li").hide(150,function(){$(this).remove()}):"set"===d&&"FAILURE"===e&&alert("Drop of cache failed.")}}});steal.executed("js/controllers/DiagnosticsController.js");
can.Control.extend("Sentrana.Controllers.PageBySelector",{pluginName:"sentrana_page_by_selector",defaults:{executionMonitorModel:null}},{init:function(){},"select change":function(a){this.options.executionMonitorModel.changePageByElement(a.val())},"{executionMonitorModel} change":function(a,b,c,d,e){"slicingStatus"===c&&"SUCCESS"===e&&((a=this.options.executionMonitorModel.getPageByInfo())?this.element.html(can.view("templates/pageBySelector.ejs",a).parent().show()):this.element.parent().hide())}});
steal.executed("js/controllers/PageBySelectorController.js");
can.Control.extend("Sentrana.Controllers.ExecutionMonitor",{pluginName:"sentrana_execution_monitor",defaults:{executionMonitorModel:null,showHideGridFn:null,showHideChartFn:null,displayShowAsButtons:!0},CLS_SHOW_AS_BTN_SELECTED:"btn-dark-gray"},{init:function(){this.$spinner=this.element.find(".spinner");this.$executionMessage=this.element.find(".execution-message");this.$numRowsMessage=this.element.find(".num-rows");this.$numRowsDisplayBtns=this.element.find(".num-rows-display-btns");this.$showAs=
this.element.find(".show-as");this.$showAsGrid=this.element.find('.butWrap[display-type="grid"]');this.$showAsChart=this.element.find('.butWrap[display-type="chart"]');this.$cancelBtn=this.element.find(".cancel-btn");this.$drillPath=this.element.find(".drill-path");this.$elapsedTime=this.element.find(".elapsed-time");this.$separators=this.element.find(".separator");this.updateView()},update:function(a){this._super(a);this.updateView()},updateView:function(){this.$showAsGrid[$.isFunction(this.options.showHideGridFn)?
"show":"hide"]();this.$showAsChart[$.isFunction(this.options.showHideChartFn)?"show":"hide"]();this.updateShowAsButtonSelection(this.$showAsGrid,this.options.executionMonitorModel.attr("showGrid"));this.updateShowAsButtonSelection(this.$showAsChart,this.options.executionMonitorModel.attr("showChart"));this.$showAs[!this.options.showHideGridFn&&!this.options.showHideChartFn?"hide":"show"]();this.options.showHideGridFn=this.options.showHideGridFn||$.noop;this.options.showHideChartFn=this.options.showHideChartFn||
$.noop},updateShowAsButtonSelection:function(a,b){a[b?"addClass":"removeClass"](this.constructor.CLS_SHOW_AS_BTN_SELECTED)},showHideViewers:function(a){a?(this.options.executionMonitorModel.attr("showGrid")&&this.options.showHideGridFn(a),this.options.executionMonitorModel.attr("showChart")&&this.options.showHideChartFn(a)):(this.options.showHideGridFn(a),this.options.showHideChartFn(a))},indicateStatus:function(a){this.element.parent().removeClass("failed-status");this.element.parent().removeClass("success-status");
this.element.parent().removeClass("starting-status");this.element.parent().addClass(a+"-status")},".drill-path-elem click":function(a,b){b.preventDefault();var c=a.data("dpi");this.options.executionMonitorModel.chartType=this.options.parent.getChartType();var d=this;this.options.executionMonitorModel.isReportDefinitionChanged()?Sentrana.ConfirmDialog("Confirm base report",window.app_resources.app_msg.drill_down.report_defintion_changed_confirm_back,function(){d.options.executionMonitorModel.executeDrillBaseReport(c)}):
d.options.executionMonitorModel.executeDrillBaseReport(c)},".butWrap click":function(a){var a=$(a),b=a.attr("display-type"),b="grid"===b||"chart"===b?"show"+b.substr(0,1).toUpperCase()+b.substr(1):void 0,a=a.hasClass(this.constructor.CLS_SHOW_AS_BTN_SELECTED);b&&this.options.executionMonitorModel.attr(b,!a)},".cancel-btn click":function(){this.options.executionMonitorModel.cancelExecutionDrillingCall()},"{executionMonitorModel} change":function(a,b,c,d,e){b=a.getData();switch(c){case "executionStatus":switch(e){case "STARTING":this.indicateStatus("starting");
this.$executionMessage.text(Sentrana.getMessageText(window.app_resources.app_msg.report_execution.processing_msg));this.$drillPath.empty();this.showHideViewers(!1);this.$spinner.show();this.$numRowsMessage.hide();this.$numRowsDisplayBtns.hide();this.$cancelBtn.show();this.$separators.hide();break;case "SUCCESS":this.indicateStatus("success");this.$executionMessage.text(a.attr("executionMessage"));(c=this.options.executionMonitorModel.getDrillPath())&&0<c.length?this.$drillPath.html(can.view("templates/drillPath.ejs",
{dpInfos:c})):this.$drillPath.empty();this.showHideViewers(!0);this.$spinner.hide();this.$numRowsMessage.text(a.attr("numRowsMessage")).show();if(this.options.hasMetrics)this.$numRowsDisplayBtns[this.options.displayShowAsButtons?"show":"hide"]();this.$cancelBtn.hide();this.options.parent&&void 0!==this.options.parent.executionSuccessful&&(this.options.parent.executionSuccessful=!0);this.$separators.show();break;case "FAILURE":this.$executionMessage.html(can.view("templates/reportException.ejs",b)),
(c=this.options.executionMonitorModel.getDrillPath())&&0<c.length?this.$drillPath.html(can.view("templates/drillPath.ejs",{dpInfos:c})):this.$drillPath.empty(),this.showHideViewers(!1),this.$spinner.hide(),this.$numRowsMessage.hide(),this.$numRowsDisplayBtns.hide(),this.$cancelBtn.hide(),this.$separators.hide(),this.$elapsedTime.hide(),$('[data-toggle="tooltip"]').tooltip()}break;case "showGrid":this.updateShowAsButtonSelection(this.$showAsGrid,this.options.executionMonitorModel.attr("showGrid"));
this.element.is(":visible")&&this.options.showHideGridFn(e);break;case "showChart":this.updateShowAsButtonSelection(this.$showAsChart,this.options.executionMonitorModel.attr("showChart"));this.element.is(":visible")&&this.options.showHideChartFn(e);break;case "elapsedTimeStr":this.$elapsedTime.text("Time: "+e)}}});steal.executed("js/controllers/ExecutionMonitorController.js");
can.Observe.extend("Sentrana.Models.ExecutionMonitor",{},{init:function(a){this.setup({executionStatus:null,executionMessage:null,drillOptionsStatus:null,drillOptionsMessage:null,drillErrorCode:null,droppingCache:null,showGrid:!0,showChart:!0,localDataChangeStatus:null});this.app=a.app;this.reportDefinModel=a.reportDefinModel;this.resultDataModel=a.resultDataModel;this.resultOptions=a.resultOptions;this.drillOptions=this.data=null;this.reportDefnStack=[];this.cacheIDStack=[];this.elemsStack=[];this.staticData=
[];this.lastviewedReportDefinitionInfoModel={};this.reportDefinModel.resultDataModel=this.resultDataModel;this.showGrid=a.showGrid;this.showChart=a.showChart;this.saveState=!1},clear:function(){this.drillOptions=this.data=null;this.reportDefnStack=[];this.cacheIDStack=[];this.elemsStack=[];this.staticData=[];this.attr("executionStatus","STARTING")},setStaticData:function(a){this.staticData=a},saveData:function(a){this.data=a;this.saveState?this.resultDataModel.updateData(a,this.resultOptions,this.resultDataModel):
this.resultDataModel.updateData(a,this.resultOptions)},getData:function(){var a=this.resultDataModel.getResultData();return a&&a!=={}?a:this.data},reorderColumnPos:function(a,b){if(this.data){var c=this.data.colInfos.splice(a,1);this.data.colInfos.splice(b,0,c[0]);for(c=0;c<this.data.rows.length;c++){var d=this.data.rows[c].cells.splice(a,1);this.data.rows[c].cells.splice(b,0,d[0])}}this.attr("colPosChanged",!this.attr("colPosChanged"))},startLocalDataChange:function(){this.attr("localDataChangeStatus",
"STARTING")},endLocalDataChange:function(a){this.attr("localDataChangeStatus",a)},saveDrillOptions:function(a){this.drillOptions=a},getDrillOptions:function(){return this.drillOptions},dropCache:function(a){var b=this;this.attr("droppingCache",a);$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("DropCache",{cacheid:a}),dataType:"json",success:function(a){!a||!a.success?b.attr("droppingCache","FAILURE"):b.removeAttr("droppingCache")}})},storeReportData:function(a,b,c,d,e){switch(d){case "CLEAR":this.reportDefnStack=
[a];this.cacheIDStack=[b];this.elemsStack=[{elems:c}];break;case "PUSH":this.reportDefnStack.push(a);this.cacheIDStack.push(b);this.elemsStack.push({elems:c});break;case "POP":for(a=0;a<e;a++)this.reportDefnStack.pop(),this.cacheIDStack.pop(),this.elemsStack.pop()}},peekCacheID:function(){return this.cacheIDStack[this.cacheIDStack.length-1]},getDrillOptionsFromService:function(a,b,c,d){$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("GetDrillOptions",a),asynch:!0,dataType:"json",success:function(a){a?
a.exptMsg?(b.attr("drillOptionsMessage",a.exptMsg),b.attr("drillErrorCode",a.errorCode),b.attr("drillOptionsStatus","FAILURE")):(!a.opts||0===a.opts.length?b.saveDrillOptions({drillUp:c,sourceEvent:d}):b.saveDrillOptions({drillUp:c,drillDown:a,sourceEvent:d}),b.attr("drillOptionsStatus","SUCCESS")):(b.attr("drillOptionsMessage",Sentrana.getMessageText(window.app_resources.app_msg.drill_down.options.no_data_returned)),b.attr("drillErrorCode",Sentrana.Enums.ErrorCode.NO_DATA_RETURNED),b.attr("drillOptionsStatus",
"FAILURE"))},error:function(){b.saveDrillOptions({drillUp:c,sourceEvent:d});b.attr("drillOptionsStatus","FAILURE");b.attr("drillErrorCode",Sentrana.Enums.ErrorCode.SERVICE_ERROR_OCCURRED)}})},isDrillRollUpAllowed:function(){return(void 0==this.lastviewedReportDefinitionInfoModel.totalsOn?!1:this.lastviewedReportDefinitionInfoModel.totalsOn)!=(void 0==this.reportDefinModel.totalsOn?!1:this.reportDefinModel.totalsOn)?!1:!0},isReportDefinitionChanged:function(){var a=this.lastviewedReportDefinitionInfoModel._backupStore(),
b=a.filterDims,a=a.templateUnits,c=this.lastviewedReportDefinitionInfoModel.filterDims.attr(),d=this.lastviewedReportDefinitionInfoModel.templateUnits.attr(),e;for(e in b)if(!this.isTwoColumnSame(b[e],c[e]))return!0;return!this.isTwoColumnSame(a,d)?!0:!1},isTwoColumnSame:function(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c].hid!==b[c].hid)return!1;return!0},requestDrillMenu:function(a,b,c){if(this.isDrillable()){var d=this;this.isReportDefinitionChanged()?Sentrana.ConfirmDialog("Confirm drill down",
window.app_resources.app_msg.drill_down.report_defintion_changed_confirm_drill,function(){d.requestDrillOptions(a,b,c)}):this.requestDrillOptions(a,b,c)}},isDrillable:function(){return(!this||1>=this.reportDefnStack.length)&&(!this.data||!this.data.drillable)?!1:!0},requestDrillOptions:function(a,b,c){if(this.isDrillable()&&this.isDrillRollUpAllowed())if($(b.currentTarget).addClass("highlight-row"),this.attr("drillOptionsStatus","STARTING"),a=this.reportDefinModel.filterElements(a,c),c=1<this.reportDefnStack.length,
this.saveDrillOptions({drillUp:c,sourceEvent:b}),0===a.length||c&&!this.data.drillable)this.attr("drillOptionsStatus","SUCCESS");else{this.attr("drillOptionsStatus","SHOWPOPUP");for(var d=[],e=0,h=a.length;e<h;e++)d.push(a[e].elemOID);this.getDrillOptionsFromService({cacheid:this.peekCacheID(),sElems:d.join("|")},this,c,b)}},renderAndExecuteReport:function(a,b,c,d){this.reportDefinModel.setDefn(this.checkSavedFilter(a),b);this.executeReportUsingDefnParams(a,c,b,d)},checkSavedFilter:function(a){var b=
a.filter.split("|"),c=[];this.reportDefinModel.getReportDefinitionParameters();for(var d=this.reportDefinModel.filterDims.GroupedFilter,e=0;e<d.length;e++){var h=this.app.dwRepository.objectMap[d[e].hid],e=this.createSavedFilterDef(h);c.push(e);for(e=0;e<h.filters.length;e++){var g=this.getFilterIndex(b,h.filters[e].oid);-1<g&&b.splice(g,1)}}for(e=0;e<b.length;e++)c.push(b[e]);a.filter=c.join("|");return a},getFilterIndex:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},createSavedFilterDef:function(a){var b=
a.id,c="true";b||(c="false",b=a.filters.map(function(a){return a.oid}).join("&"));return"type@GroupedFilter, name@"+a.name+", isSaved@"+c+", value@"+b},drillUp:function(){this.renderAndExecuteReport(this.reportDefnStack[this.reportDefnStack.length-2],void 0,"POP",1)},drillDown:function(a,b){this.renderAndExecuteReport(a,b,"PUSH")},executeDrillBaseReport:function(a){this.isDrillRollUpAllowed()&&this.renderAndExecuteReport(this.reportDefnStack[a],void 0,"POP",this.reportDefnStack.length-a-1)},getDrillPath:function(){if(this.elemsStack&&
1<this.elemsStack.length){for(var a=[{elems:"Base",dpIndex:0}],b=1,c=this.elemsStack.length;b<c;b++){for(var d=[],e=0,h=this.elemsStack[b].elems.length;e<h;e++)d.push(this.elemsStack[b].elems[e].actualName);a.push({elems:d.join(", "),dpIndex:b})}return a}},cancelExecutionDrillingCall:function(){this.lastExecuteDrillXhr&&(this.lastExecuteDrillXhr.abort(),this.lastExecuteDrillXhr=null)},updateElapsedTime:function(){var a=(new Date).valueOf()-this.startTimeMillis,b=Math.floor(a/1E3),c=Math.floor(b/60),
d=Math.floor(b-60*c),b="0"+d,a="00"+(a-6E4*c-1E3*d);this.attr("elapsedTimeStr",c+":"+b.substr(b.length-2)+"."+a.substr(a.length-3))},handleExecReportSuccess:function(a,b,c,d,e){this.saveData(a);!a||!a.rows?(this.attr("executionMessage",Sentrana.getMessageText(window.app_resources.app_msg.report_execution.no_data_returned)),this.attr("numRowsMessage",""),this.attr("executionStatus","FAILURE")):a.exptMsg?(this.attr("executionMessage",Sentrana.getMessageText(window.app_resources.app_msg.report_execution.report_error)),
this.attr("numRowsMessage",""),this.attr("executionStatus","FAILURE")):a.rows.length?(this.storeReportData(b,a.cacheid,c,d,e),this.attr("executionMessage",Sentrana.getMessageText(window.app_resources.app_msg.report_execution.success)),this.attr("numRowsMessage","Rows: "+Sentrana.formatValue(a.rows.length,"number")),this.attr("executionStatus","SUCCESS"),"CLEAR"!==d&&(this.attr("executionStatusDrilldown",""),this.attr("executionStatusDrilldown","SUCCESS"))):(this.storeReportData(b,a.cacheid,c,d,e),
this.attr("executionMessage",Sentrana.getMessageText(window.app_resources.app_msg.report_execution.success_with_no_data)),this.attr("numRowsMessage",""),this.attr("executionStatus","FAILURE"))},handleExecReportError:function(a,b){var c={},d=a.getResponseHeader("ErrorMsg");c.exptMsg=d?d:"abort"===b?Sentrana.getMessageText(window.app_resources.app_msg.report_execution.canceled_by_user):Sentrana.getMessageText(window.app_resources.app_msg.report_execution.large_dataset);this.saveData(c);this.attr("executionMessage",
Sentrana.getMessageText(window.app_resources.app_msg.report_execution.failed));this.attr("numRowsMessage","");this.attr("executionStatus","FAILURE")},handleExecReportComplete:function(){this.reportDefinModel.attr("canReset",!0);this.lastExecuteDrillXhr=null;window.clearInterval(this.intervalID);this.updateElapsedTime()},updateDefinitionForSavedFilter:function(a){for(var b=a.filter.split("|"),c=0;c<b.length;c++){var d=[],e=this.app.dwRepository.isSavedFilterGroup(b[c]);if(e){for(var h=0;h<e.filters.length;h++)d.push(e.filters[h].oid);
b[c]=d.join("|")}a.filter=b.join("|")}return a},executeReportUsingDefnParams:function(a,b,c,d){var e=this,a=this.updateDefinitionForSavedFilter(a);this.lastviewedReportDefinitionInfoModel=new can.Map({filterDims:this.reportDefinModel.attr("filterDims"),templateUnits:this.reportDefinModel.attr("templateUnits"),totalsOn:void 0==this.reportDefinModel.attr("totalsOn")?!1:this.reportDefinModel.attr("totalsOn")});this.loadTemplateAttributeForms(a.template);this.lastviewedReportDefinitionInfoModel.backup();
this.reportDefinModel.attr("canView",!1);this.reportDefinModel.attr("canReset",!1);a.repositoryid=this.app.getDWRepository().id;a&&(this.attr("executionStatus","STARTING"),this.startTimeMillis=(new Date).valueOf(),this.attr("elapsedTimeStr","0:00.000"),this.intervalID=window.setInterval(this.proxy("updateElapsedTime"),250),this.lastExecuteDrillXhr=$.ajax({type:"POST",url:Sentrana.Controllers.BIQController.generateUrl("Execute"),asynch:!0,dataType:"json",contentType:"application/json",data:JSON.stringify({template:a.template,
filter:a.filter,totals:a.totals,sort:a.sort}),headers:{sessionID:a.sessionid,repositoryID:a.repositoryid},success:function(h){e.handleExecReportSuccess(h,a,c,b,d)},error:function(a,b){e.handleExecReportError(a,b)},complete:function(){e.handleExecReportComplete()}}))},loadTemplateAttributeForms:function(a){var b=this.app.dwRepository,c=a.split("|");$.map(c,function(){var a=b.getObjectByOID(c[0]).hid,a=b.objectMap[a];a.type&&"ATTRIBUTE_FORM"==a.type&&b.checkLoadedForm(a,function(){})})}});steal.executed("js/observes/ExecutionMonitorObserve.js");
can.Control.extend("Sentrana.Controllers.DrillMenu",{pluginName:"sentrana_drill_menu",defaults:{executionMonitorModel:null}},{init:function(){this.$drillMenuSel=this.element.find(".selection");this.$drillUp=this.element.find(".drill-up");this.$drillDown=this.element.find(".drill-down");this.$drillDownTo=this.element.find(".drill-down-to");this.unCheckedOptions={}},mouseleave:function(a){var b=this.options.executionMonitorModel.getDrillOptions();$(b.sourceEvent.currentTarget).removeClass("highlight-row");
$(a).hide()},".drill-up click":function(a){a.hasClass("available")&&(this.options.executionMonitorModel.chartType=this.options.parent.getChartType(),this.options.executionMonitorModel.drillUp(),this.element.hide())},".drill-down-to input:checkbox click":function(){var a=this.getUnCheckedDrillOptions(),b=this.element.find(".drill-down-to input:checkbox");a.length===b.length?(this.element.find(".drill-down-image").attr("src","images/drill_dn_disable.png"),this.$drillDown.removeClass("available"),this.$drillDown.addClass("disabled")):
(this.$drillDown.addClass("available"),this.$drillDown.removeClass("disabled"),this.element.find(".drill-down-image").attr("src","images/drill_dn.png"))},".drill-down click":function(a){if(a.hasClass("available")){this.options.executionMonitorModel.chartType=this.options.parent.getChartType();a=this.element.data("drillDownInfo");this.element.hide();var b=a.opts[0].report,c=a.opts[0].eInfos,d=this.getUnCheckedDrillOptions();0>=d.length?this.options.executionMonitorModel.drillDown(b,c):this.FilterDrillOptionsAndDrillDown(d,
a)}},getUnCheckedDrillOptions:function(){return $(".drill-down-to input:checkbox:not(:checked)")},FilterDrillOptionsAndDrillDown:function(a,b){var c=b.opts[0],d=c.report,e=c.eInfos,h=this,g=d.template.split("|"),f=d.filter.split("|");$.each(a,function(a,b){var d=$(b).val(),l;h.unCheckedOptions[d]||(h.unCheckedOptions[d]=[],h.unCheckedOptions[d].currentLevel=h.drillLevelKey);var n=h.getTrgetElementsIndex(c.tgtAttrForms,d);if(-1!==n){l=e[n];f=$.grep(f,function(a){return a!==l.eID});for(var o=0,t=0;t<
n;t++)o+=c.tgtAttrForms[t].formCount;g[o]=l.formID;1<c.tgtAttrForms[n].formCount&&g.splice(o+1,c.tgtAttrForms[n].formCount-1);h.isunCheckedOptionsExist(h.unCheckedOptions[d],h.drillLevelKey)||h.unCheckedOptions[d].push(h.drillLevelKey);e.splice(n,1)}});d.template=g.join("|");d.filter=f.join("|");this.options.executionMonitorModel.drillDown(d,e)},getTrgetElementsIndex:function(a,b){for(var c=0;c<a.length;c++)if(a[c].formName===b)return c;return-1},isunCheckedOptionsExist:function(a,b){for(var c=!1,
d=0;d<a.length;d++)a[d]===b&&(c=!0);return c},drillReportUp:function(a){var b=a.drillUp?"images/roll_up.png":"images/roll_up_disable.png";this.element.find(".drill-up-image").attr("src",b);this.$drillUp[a.drillUp?"addClass":"removeClass"]("available");this.$drillUp[a.drillUp?"removeClass":"addClass"]("disabled")},drillReportDown:function(a){this.element.data("drillDownInfo",a.drillDown);if(a.drillDown){a=a.drillDown.opts[0];this.$drillMenuSel.html(can.view("templates/drillMenu.ejs",a));this.$drillDown.addClass("available");
this.$drillDown.removeClass("disabled");this.element.find(".drill-down-image").attr("src","images/drill_dn.png");for(var b=[],c=[],d=0;d<a.tgtAttrForms.length;d++)b.push(a.tgtAttrForms[d].formName);this.drillLevelKey=b.join();for(b=0;b<a.tgtAttrForms.length;b++){var d=a.tgtAttrForms[b].formName,e=!this.isOptionUncheked(d),d={targetValue:d,targetId:d.replace(/\s+/g,""),isVisible:e};c.push(d)}$.grep(c,function(a){return!1===a.isVisible}).length===c.length?(this.$drillMenuSel.html("<p>"+Sentrana.getMessageText(window.app_resources.app_msg.drill_down.cannot_go_deeper_hierarchy)+
"</p>"),this.$drillDownTo.html(""),this.$drillDown.removeClass("available"),this.$drillDown.addClass("disabled")):this.$drillDownTo.html(can.view("templates/drillDownTo.ejs",{tgtAttrCheckBoxess:c}))}else this.$drillMenuSel.html("<p>"+Sentrana.getMessageText(window.app_resources.app_msg.drill_down.cannot_go_deeper_report)+"</p>"),this.$drillDown.removeClass("available"),this.$drillDown.addClass("disabled"),this.element.find(".drill-down-image").attr("src","images/drill_dn_disable.png"),this.$drillDownTo.empty()},
"{executionMonitorModel} change":function(a,b,c,d,e){b=this.options.executionMonitorModel.getDrillOptions();d=this.element.closest(".panel-body").offset();"drillOptionsStatus"===c&&"SHOWPOPUP"===e&&(this.$drillMenuSel.html(can.view("templates/loadingwheel.ejs",{message:"Loading...",hideImage:!1})),this.$drillDownTo.html(""),this.element.css({top:b.sourceEvent.clientY-d.top+40+$(window).scrollTop()+"px",left:b.sourceEvent.clientX-d.left+"px"}).fadeIn(250));if("drillOptionsStatus"===c&&"SUCCESS"===
e){if(b&&(b.drillUp||b.drillDown))this.drillReportUp(b),this.drillReportDown(b),this.element.is(":visible")||this.element.css({top:b.sourceEvent.clientY-d.top+40+$(window).scrollTop()+"px",left:b.sourceEvent.clientX-d.left+"px"}).fadeIn(250)}else"drillOptionsStatus"===c&&"FAILURE"===e&&(b&&$(b.sourceEvent.currentTarget).removeClass("highlight-row"),c=a.attr("drillErrorCode"),a=c===Sentrana.Enums.ErrorCode.KEY_NOT_FOUND?Sentrana.getMessageText(window.app_resources.app_msg.drill_down.key_not_found_msg):
c===Sentrana.Enums.ErrorCode.ELEMENT_NOT_FOUND?Sentrana.getMessageText(window.app_resources.app_msg.drill_down.attribute_not_found_msg):c===Sentrana.Enums.ErrorCode.UNABLE_TO_DRILL_DOWN?Sentrana.getMessageText(window.app_resources.app_msg.drill_down.drill_down_unable_msg):a.attr("drillOptionsMessage"),Sentrana.AlertDialog("Error",a))},isOptionUncheked:function(a){var b=!1;if(this.unCheckedOptions[a])if(this.isCurrentLevel(this.unCheckedOptions[a].currentLevel))b=!1;else for(var c=this.drillLevelKey.split(","),
d=0;d<c.length;d++)c[d]===a&&(b=!0);else b=!1;return b},isCurrentLevel:function(a){return a===this.drillLevelKey?!0:!1}});steal.executed("js/controllers/DrillMenuController.js");
can.Control.extend("Sentrana.Controllers.TwoRibbonNavBar",{pluginName:"sentrana_two_ribbon_nav_bar",defaults:{selection:null,templateFile:"trnb-main.ejs",templateFilePrefix:null,app:null}},{init:function(){this.updateView()},update:function(a){this._super(a);this.updateView()},updateView:function(){if(Sentrana.isObject(this.options.selection)){var a=this.getTemplatePath();if(a){var b=this.options.selection.getFilteredLayout();this.element.html(can.view(a,{entries:b}));this.options.selection.selectDefaults()}}},
getTemplatePath:function(){var a=[];if(this.options.templateFilePrefix){var b=this.options.templateFilePrefix,c=b.length;"/"===b.substr(c-1)&&(b=b.substr(0,c-1));a.push(b)}this.options.templateFile&&a.push(this.options.templateFile);return a.join("/")},getjqoLevel1Button:function(a){return $(".nb-l1-btn["+Sentrana.Enums.ATTR_LEVEL_ONE_BUTTON+'="'+a+'"]')},getjqoLevel2Button:function(a,b){return $(".nb-l2-btn["+Sentrana.Enums.ATTR_LEVEL_ONE_BUTTON+'="'+a+'"]['+Sentrana.Enums.ATTR_LEVEL_TWO_BUTTON+
'="'+b+'"]')},getjqoLevel2Bar:function(a){return $(".nb-l2-bar["+Sentrana.Enums.ATTR_LEVEL_ONE_BUTTON+'="'+a+'"]')},getjqoLevel1Body:function(a){return $(".nb-body["+Sentrana.Enums.ATTR_LEVEL_ONE_BUTTON+'="'+a+'"]')},getjqoLevel2Body:function(a,b){return $(".nb-body["+Sentrana.Enums.ATTR_LEVEL_ONE_BUTTON+'="'+a+'"]['+Sentrana.Enums.ATTR_LEVEL_TWO_BUTTON+'="'+b+'"]')},selectLevel1Button:function(a,b){var c=this.options.selection.layoutMap[a].iconImage,d=this.options.selection.layoutMap[a].iconImageOn,
e=$("img",this.getjqoLevel1Button(a));b?($(e[0]).attr("src","images/"+d),this.getjqoLevel1Button(a).addClass(Sentrana.Enums.CLASS_SELECTED),this.getjqoLevel2Bar(a).slideDown()):($(e[0]).attr("src","images/"+c),this.getjqoLevel1Button(a).removeClass(Sentrana.Enums.CLASS_SELECTED),this.getjqoLevel2Bar(a).slideUp())},activatePageController:function(a,b,c,d){var e=this.options.selection.getControllerInfo(a,b),a=b?this.getjqoLevel2Body(a,b):this.getjqoLevel1Body(a);e&&(b=$.extend(!0,{app:this.options.app},
e.controlOptions),a[e.controllerHelperName](b));a.show();a[e.controllerHelperName]("show");c&&a.trigger(c,d)},activatePage:function(a,b,c){window.location.hash=can.route.url({page:a[0]});this.options.selection.selectLevel2Button(a[0],a[1]);this.triggerPage(a,b,c)},triggerPage:function(a,b,c){b&&(a[1]?this.getjqoLevel2Body(a[0],a[1]):this.getjqoLevel1Body(a[0])).trigger(b,c)},selectLevel2Button:function(a,b){var c=a[0],d=a[1];b?(d&&(this.getjqoLevel2Button(c,d).addClass(Sentrana.Enums.CLASS_SELECTED),
can.route.attr({route:c+"/:subpage",subpage:d})),this.activatePageController(c,d)):d?(this.getjqoLevel2Button(c,d).removeClass(Sentrana.Enums.CLASS_SELECTED),this.getjqoLevel2Body(c,d).hide()):this.getjqoLevel1Body(c).hide()},".nb-l1-btn click":function(a){a=a.attr(Sentrana.Enums.ATTR_LEVEL_ONE_BUTTON);this.options.app.saveMenuInfo({level1BtnId:a});"saved"!==a&&($(".btn-add-booklet").css("display","none"),$(".btn-show-hide-filmstrip").css("display","none"));window.location.hash=can.route.url({page:a})},
".nb-l2-btn click":function(a){var b=a.attr(Sentrana.Enums.ATTR_LEVEL_ONE_BUTTON),a=a.attr(Sentrana.Enums.ATTR_LEVEL_TWO_BUTTON);this.options.app.saveMenuInfo({level1BtnId:b,level2BtnId:a});can.route.attr({route:b+"/:subpage",subpage:a})},".btn-add-booklet click":function(a){$(a).hasClass("ui-state-disabled")||(this.options.app.bookletController&&this.options.app.bookletController.destroyThisController(),this.clearCenterPanelforBooklet(),this.options.app.bookletController=$(".booklet-composition-panel-container").sentrana_booklet_composition({app:this.options.app,
bookletDefinModel:this.options.app.bookletDefinModel}).control(),this.options.app.filmstripController&&(this.options.app.filmstripController.isRendered=!1))},clearCenterPanelforBooklet:function(){this.getjqoLevel1Body("saved").trigger("clear_center_panel",!0)},".btn-show-hide-filmstrip click":function(){$(".filmstrip-container").is(":visible")?($(".btn-show-hide-filmstrip-caption").text("Show Filmstrip"),this.options.app.filmstripController.hide()):($(".btn-show-hide-filmstrip-caption").text("Hide Filmstrip"),
this.options.app.filmstripController.show())},"{selection} change":function(a,b,c,d,e,h){"level1ButtonSelected"===c?(h&&this.selectLevel1Button(h,!1),e&&this.selectLevel1Button(e,!0)):"level2ButtonSelected"===c&&(h&&this.selectLevel2Button(h.split("|"),!1),e&&(this.selectLevel2Button(e.split("|"),!0),this.getjqoLevel1Body(e).trigger("print_closed",!0)))}});steal.executed("js/controllers/TwoRibbonNavBarController.js");
can.Observe.extend("Sentrana.Models.TwoRibbonNavBar",{},{init:function(a){$.extend(!0,this,a);this.setup({level1ButtonSelected:"",level2ButtonSelected:""});if("string"===typeof this.layout){var b=this;$.ajax({url:this.layout,async:!1,dataType:"json",success:function(a){b.layout=a}})}},getFilteredLayout:function(){$.isArray(this.filteredButtonIDs)||(this.filteredButtonIDs=[]);var a=null;$.each(this.filteredButtonIDs,function(b,c){a||(a={});a[c]=1});var b=[];this.layoutMap={};for(var c=0,d=(this.layout||
[]).length;c<d;c++)if(!a||this.layout[c].btnID in a)this.defaultLevel1ButtonID||(this.defaultLevel1ButtonID=this.layout[c].btnID,this.defaultLevel2ButtonID=this.layout[c].children&&this.layout[c].children[0]?this.layout[c].children[0].btnID:""),b.push(this.layout[c]),this.layoutMap[this.layout[c].btnID]=this.layout[c];return b},getControllerInfo:function(a,b){var c=this.layoutMap[a];if(b){for(var d=0,e=(c.children||[]).length;d<e;d++)if(c.children[d].btnID===b)return c.children[d].controllerInfo;
return null}return c.controllerInfo},selectDefaults:function(){this.defaultLevel1ButtonID&&(this.selectLevel1Button(this.defaultLevel1ButtonID),this.selectLevel2Button(this.defaultLevel1ButtonID,this.defaultLevel2ButtonID))},selectLevel1Button:function(a){this.attr("level1ButtonSelected",a);this.layoutMap[a].children?this.attr("level2ButtonSelected",a+"|"+this.layoutMap[a].children[0].btnID):this.attr("level2ButtonSelected",a)},selectLevel2Button:function(a,b){this.attr("level1ButtonSelected",a);
this.attr("level2ButtonSelected",a+"|"+b)}});steal.executed("js/observes/TwoRibbonNavBarObserve.js");
can.Observe.extend("Sentrana.Models.TopNavBar",{},{init:function(a){$.extend(!0,this,a);this.setup({page:"",level1ButtonSelected:"",level2ButtonSelected:""});if("string"===typeof this.layout){var b=this;$.ajax({url:this.layout,async:!1,dataType:"json",success:function(a){b.layout=a}})}},getFilteredLayout:function(){$.isArray(this.filteredButtonIDs)||(this.filteredButtonIDs=[]);var a=null;$.each(this.filteredButtonIDs,function(b,c){a||(a={});a[c]=1});var b=[];this.layoutMap={};for(var c=0,d=(this.layout||
[]).length;c<d;c++)if(!a||this.layout[c].btnID in a)this.defaultLevel1ButtonID||(this.defaultLevel1ButtonID=this.layout[c].btnID,this.defaultLevel2ButtonID=this.layout[c].children&&this.layout[c].children[0]?this.layout[c].children[0].btnID:""),b.push(this.layout[c]),this.layoutMap[this.layout[c].btnID]=this.layout[c];return b},getControllerInfo:function(a,b){var c=this.layoutMap[a];if(b){for(var d=0,e=(c.children||[]).length;d<e;d++)if(c.children[d].btnID===b)return c.children[d].controllerInfo;
return null}return c.controllerInfo},selectDefaults:function(){this.defaultLevel1ButtonID&&(this.selectLevel1Button(this.defaultLevel1ButtonID),this.selectLevel2Button(this.defaultLevel1ButtonID,this.defaultLevel2ButtonID))},selectLevel1Button:function(a){this.attr("level1ButtonSelected",a);this.layoutMap[a].children?this.attr("level2ButtonSelected",a+"|"+this.layoutMap[a].children[0].btnID):this.attr("level2ButtonSelected",a)},selectLevel2Button:function(a,b){this.attr("level1ButtonSelected",a);
this.attr("level2ButtonSelected",a+"|"+b)},selectPage:function(a){this.attr("page",a)}});steal.executed("js/observes/TopNavBarObserve.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.SaveUpdateAsReport",{pluginName:"sentrana_dialogs_save_update_as_report",defaults:{title:"Save Report Definition As?",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find('input[name="report-name"]')},loadForm:function(a){this.$name.val(a)},open:function(a,
b,c,d,e,h,g,f){this.reportName=a;this.showGrid=b;this.showChart=c;this.chartOptions=d;this.grandparent=e;this.bookletId=h;this.order=g;this.resultOptions=f;this.element.find(".modal-title").html("Save Existing Report As");this.loadForm(a);this.enableButton("OK");this.openDialog()},handleCANCEL:function(){this.closeDialog()},handleOK:function(){if(this.bookletId){if(this.grandparent.bookletController.isReportExistsWithSameName(this.$name.val())){this.updateStatus(!1,"Report name already in use for this booklet!",
"fail");return}}else if(this.options.reportDefnModel.isReportExistsWithSameName(this.$name.val())){this.updateStatus(!1,"Report name already in use!","fail");return}this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.report_operation.save.processing_msg));this.reportDefinitionInfoModel=new Sentrana.Models.ReportDefinitionInfo({name:this.reportName,showGrid:this.showGrid,showChart:this.showChart,chartOptions:this.chartOptions,resultOptions:this.resultOptions});this.reportDefinitionInfoModel.attr({name:this.$name.val(),
bookletId:this.bookletId,order:this.order,definition:this.options.reportDefnModel.getReportDefinitionParameters()},!1);this.options.app.update({reportDefinitionInfoModel:this.reportDefinitionInfoModel});var a=this;this.reportDefinitionInfoModel.save().done(function(){a.updateStatus(!1,"Success!");a.closeDialog();a.options.app.switchToPage("bldr","edit_report",a.reportDefinitionInfoModel)}).fail(function(b){var c=b.getResponseHeader("ErrorCode"),b=b.getResponseHeader("ErrorMsg");c===Sentrana.Enums.ErrorCode.REPORT_NAME_IN_USE?
a.updateStatus(!1,b,"fail"):a.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.save_operation.failed),"fail")}).always(function(){})},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()},'input[name="report-name"] keyup':function(a){""!==$.trim(a.val())?this.enableButton("OK"):this.disableButton("OK")}})});steal.executed("js/controllers/SaveAsReportDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.SaveUpdateReport",{pluginName:"sentrana_dialogs_save_update_report",defaults:{reportDefnModel:null,title:"Save New Report Definition?",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find('input[name="report-name"]')},loadForm:function(a){this.$name.val(a.name)},
open:function(a){this.reportDefinitionInfoModel=a;a.isNew()?this.element.find(".modal-title").html("Save New Report"):this.element.find(".modal-title").html("Update Existing Report");this.loadForm(a);this.enableButton("OK");this.openDialog()},handleCANCEL:function(){this.closeDialog()},handleOK:function(){if(this.options.reportDefnModel.isReportExistsWithSameName(this.$name.val()))this.updateStatus(!1,"Report name already in use!","fail");else{this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.report_operation.save.processing_msg));
this.reportDefinitionInfoModel.attr({name:this.$name.val(),definition:this.options.reportDefnModel.getReportDefinitionParameters()},!1);var a=this;this.reportDefinitionInfoModel.save().done(function(){a.updateStatus(!1,"Success!");a.element.find(".save-button").button({disabled:!0});a.element.find(".save-as-button").button({disabled:!0});a.closeDialog()}).fail(function(b){var c=b.getResponseHeader("ErrorCode"),b=b.getResponseHeader("ErrorMsg");c===Sentrana.Enums.ErrorCode.REPORT_NAME_IN_USE?a.updateStatus(!1,
b,"fail"):a.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.save_operation.failed),"fail")}).always(function(){})}},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()},'input[name="report-name"] keyup':function(a){""!==$.trim(a.val())?this.enableButton("OK"):this.disableButton("OK")}})});steal.executed("js/controllers/SaveReportDialog.js");
can.Construct("Sentrana.Models.ReportFilterUtil",{},{init:function(a,b){this.executionMonitorModel=b;this.app=a;this.initValues()},initValues:function(){this.reportColumnsDefn=[];this.columsForFilter=[];this.changedColumnFilters=[];this.columnFilters=[]},processReportColumnDefinitions:function(){this.initValues();var a=this;if(this.executionMonitorModel.data){var b=[],c=this.executionMonitorModel.data.colInfos,d=[],e=this.executionMonitorModel.data;if(c){for(var h=0;h<c.length;h++){var g={};g.index=
h;g.name=c[h].title;g.dataType=c[h].dataType;g.formatString=c[h].formatString;g.width=c[h].width;g.colType=c[h].colType;this.reportColumnsDefn.push(g);c[h].colType===Sentrana.ColType.METRIC&&(b.push(g),d.push({min:e.rows[0].cells[h].rawValue,max:e.rows[0].cells[h].rawValue}));this.columnFilters.push("");this.changedColumnFilters.push(!1)}for(c=0;c<e.rows.length;c++)for(g=h=0;g<e.rows[c].cells.length;g++)if(this.isMetricColumn(b,g)){var f=e.rows[c].cells[g].rawValue;f>d[h].max&&(d[h].max=f);f<d[h].min&&
(d[h].min=f);h++}this.columsForFilter=[];$.each(b,function(b,c){var e={name:c.name,formatString:c.formatString,min:d[b].min,max:d[b].max,dataType:c.dataType,index:c.index},f=new Sentrana.Models.RangeFilter({app:a.app,columnDetail:e});e.min!==e.max&&a.columsForFilter.push(f)})}}},isMetricColumn:function(a,b){return 0<$.grep(a,function(a){return a.index===b}).length},getUniqueItemsFromColumn:function(a,b){return this.getDistinctColumnValues(this.getFilteredDataSet(b).rows,a)},getUniqueItemsFromColumnAll:function(a,
b){var c=[],c=[],c=$.grep(this.reportColumnsDefn,function(b){return b.index===a}),c=b&&0<b.length&&b[b.length-1].columnName===c[0].name?this.getFilteredDataSet(b,c[0].name):this.getFilteredDataSet(b);return c=this.getDistinctColumnValues(c.rows,a)},getDistinctColumnValues:function(a,b){for(var c=[],d=[],e=0;e<a.length;e++){var h=a[e].cells[b].fmtValue,g=a[e].cells[b].rawValue;this.inArray(h,c)||(c.push(h),d.push({key:g,value:h}));if(100<c.length)return}d.sort(function(a,b){return a.key<b.key?-1:a.key>
b.key?1:0});return d},inArray:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1},getFilteredDataSet:function(a,b){if(this.executionMonitorModel){var c=$.extend(!0,{},this.executionMonitorModel.getData());if(!a||0===a.length)return c;for(var d=0;d<a.length;d++){var e=a[d];b&&b===e.columnName||(e.filterType===Sentrana.Enums.FILTER_TYPE_COLUMN?c=this.getColumnFilterdData(c,e):e.filterType===Sentrana.Enums.FILTER_TYPE_RANGE&&(c=this.getRangeFilterdData(c,e)))}return c}return null},
getGridFilteredData:function(a,b){if(!a||!b)return a;for(var c=[],d=0;d<b.length;d++)c.push(a.rows[b[d]]);d=$.extend(!0,{},a);d.rows=c;return d},getColumnFilterdData:function(a,b){if(!a||!b)return a;for(var c=b.selectedItems.values.split("|"),d=[],e=0;e<a.rows.length;e++)-1<$.inArray(a.rows[e].cells[b.columnIndex].fmtValue.toString(),c)&&d.push(a.rows[e]);c=$.extend(!0,{},a);c.rows=d;return c},getRangeFilterdData:function(a,b){if(!a||!b)return a;for(var c=[],d=0;d<a.rows.length;d++){var e=a.rows[d].cells[b.columnIndex].rawValue,
h=this.getPrecision(a.colInfos[b.columnIndex]);e&&(e=1*e.toFixed(h));e>=1*b.min&&e<=1*b.max&&c.push(a.rows[d])}d=$.extend(!0,{},a);d.rows=c;return d},getPrecision:function(a){return a.dataType===Sentrana.DataType.PERCENTAGE?6:1*a.formatString.replace(/^\D+/g,"")},getColumnValuesForRangeFiler:function(a,b){var c=this.getValuesForColumn(a,b);if(c.length&&0!==c.length){for(var d=1*c[0].rawValue,e=1*c[0].rawValue,h=1;h<c.length;h++){var g=1*c[h].rawValue;g>e&&(e=g);g<d&&(d=g)}return{min:d,max:e}}},getValuesForColumn:function(a,
b){for(var c=[],d=0;d<a.rows.length;d++)c.push(a.rows[d].cells[b]);return c},getColumnValuesForColumnFiler:function(a,b){for(var c=this.getValuesForColumn(a,b),d="",e=1;e<c.length;e++)d+=","+c[e].rawValue;return d},findValuesForSliderFromColumnTypeFilter:function(a,b){for(var c=this.getColumnValuesForRangeFiler(a,b.columnIndex),d=b.selectedItems.keys.split("|"),e=0,h=0,g=1*d[0],f=1*d[0],i=1;i<d.length;i++){var j=1*d[i];j>f&&(f=j,h=i);j<g&&(g=j,e=i)}d=b.selectedItems.values.split("|");return{min:g,
max:f,formattedMin:d[e],formattedMax:d[h],lowerBound:c.min,upperBound:c.max}},renderColumnFilters:function(a,b,c,d){var e=this;c.find(".dataTables_scrollHead .dataTable thead th .header-item-wrapper-div").append(can.view("templates/grid-column-filter.ejs",{filtered:!0})).children(".grid-column-filter").click(function(){a.handleUserInteraction();var c=b.element.find(".column-sort-element").control();c&&!c._destroyed&&c.hideThisController();var c=1*$(this).parents("th").index(),g=e.getUniqueItemsFromColumn(c,
d),f=e.getUniqueItemsFromColumnAll(c,d),i=$(this),j=b.element.find(".column-filter-element");j.css({position:"absolute",top:i.offset().top+"px",left:i.offset().left+8+"px"}).show();(i=j.control())&&!i._destroyed&&i.destroy();j.sentrana_column_base_filter({items:f,columnIndex:c,selectedItems:e.columnFilters[c],filteredItems:g});return!1})},addFilter:function(a,b){var c=$.grep(this.reportColumnsDefn,function(a){return a.name===b.columnName||a.index===b.columnIndex});if(0===c.length)return null;var d=
a||[],e=c[0];b.isMetrics=e.colType===Sentrana.ColType.METRIC;b.columnName=e.name;b.columnIndex=e.index;for(var c=[],h=-1,g=0;g<d.length;g++)c.push(d[g]),d[g].columnName===e.name&&(h=g);e=!1;if(b.filterType===Sentrana.Enums.FILTER_TYPE_RANGE){var f=this.getPrecision({formatString:b.formatString,dataType:b.dataType}),g=1*b.min.toFixed(f),i=1*b.max.toFixed(f),j=1*b.lowerBound.toFixed(f),f=1*b.upperBound.toFixed(f);g===j&&i===f&&(e=!0)}else b.filterType===Sentrana.Enums.FILTER_TYPE_COLUMN&&(e=b.isAllSelected);
-1<h&&d.splice(h,1);e||d.push(b);return{filter:d,tempFilter:c,isFilterReset:e}}});steal.executed("js/constructs/ReportFilterUtil.js");
can.Control.extend("Sentrana.Controllers.BuilderPage",{pluginName:"sentrana_builder_page",defaults:{app:null,reportDefinitionInfoModel:void 0}},{initDOMObjects:function(){this.$columns=this.element.find(".builder-page");this.$reportDefn=this.element.find(".report-definition");this.$reportTitle=this.element.find(".report-definition-title");this.$summary=this.element.find(".summary");this.$executionMonitor=this.element.find(".execution-monitor");this.$reportInfo=this.element.find(".report-info");this.$reportName=
this.$reportInfo.find(".report-info-name");this.$dataWareHouseName=this.$reportInfo.find(".warehouse-info-name");this.$diagnostics=this.element.find(".diagnostics");this.$fsDiagnostics=this.element.find(".fs-diagnostics");this.$saveAsButton=this.element.find(".save-as-button");this.$shareButton=this.element.find(".share-button");this.$saveExecutionMessage=this.element.find(".save-execution-message");this.$spinner=this.element.find(".spinner");this.$executionMessage=this.element.find(".execution-message");
this.$Totals=this.element.find(".show-total");this.$builderReportViewerContainer=this.element.find("#builderPageReportViewContainer");this.$actionBar=this.element.find(".actionbar");this.$pivotButton=this.element.find(".pivot-button");this.$pivotContainer=this.element.find(".pivot-table-element")},manipulateDOMObjects:function(){this.options.app.dwRepository&&!this.options.app.dwRepository.supportedFeatures.totals&&this.$Totals.hide();this.element.find(".report-info-selector-btn").button();this.$dataWareHouseName.text(this.options.app.dwRepository.name)},
" enable-view-button":function(){this.reportDefnModel.canSave(!1);this.reportDefnModel.canView(!0)}," column-removed":function(a,b,c){this.resultDataModel&&this.resultDataModel.removeFilter(c.name);this.executionMonitorModel&&this.executionMonitorModel.resultDataModel&&this.executionMonitorModel.resultDataModel.removeFilter(c.name)},initReportModels:function(a){this.reportDefnModel=new Sentrana.Models.ReportDefin({app:this.options.app});this.dwSelection=(new Sentrana.Models.ObjectSelection).bind("change",
function(b,c,d,e,h){a.reportDefinitionChanged=!0;a.reportDefnModel.canSave(!1);a.reportDefnModel.canView(!0);"add"===d?a.reportDefnModel.selectObject(e):"remove"===d&&a.reportDefnModel.deselectObject(h)});this.reportDefnModel.bind("change",function(b,c,d,e,h){b=c.split(".");c=!1;if("templateUnits"===b[0]||"filterDims"===b[0]){if("add"===d){d=0;for(b=e.length;d<b;d++)a.dwSelection.selectObject(e[d].hid)}else if("remove"===d){d=0;for(b=h.length;d<b;d++)a.dwSelection.deselectObject(h[d].hid)}c=!0}else"totalsOn"===
b[0]&&(c=!0);c&&a.options.reportDefinitionInfoModel&&(a.reportDefnModel.isCleared||a.options.reportDefinitionInfoModel.attr("definition",a.reportDefnModel.getReportDefinitionParameters()))});this.reusableColumnModel=new Sentrana.Models.ReusableColumnInfo;this.initResultDataModel();this.executionMonitorModel=new Sentrana.Models.ExecutionMonitor({app:this.options.app,reportDefinModel:this.reportDefnModel,resultDataModel:this.resultDataModel,resultOptions:this.getResultOptions()});this.bindExecutionMonitorEventHandler();
this.reportGridUtil=new Sentrana.Models.ReportGridUtil(this.options.app,this.executionMonitorModel)},getResultOptions:function(){var a;this.options.reportDefinitionInfoModel&&(a=this.options.reportDefinitionInfoModel.attr("resultOptions"));return a},bindExecutionMonitorEventHandler:function(){var a=this;this.executionMonitorModel.bind("change",function(b,c,d,e){if("executionStatus"===c)switch(e){case "STARTING":a.hideReportViewRequired=!1;a.$pivotContainer.hide();a.reportDefinitionChanged=!1;a.reportIsRunning=
!0;a.$actionBar.hide();a.$executionMonitor.show();a.hideReportView();$(".metric-attribute-map-toggle").addClass("disabled-icon");break;case "FAILURE":a.reportIsRunning=!1;a.reportDefnModel.canSave(!1);a.reportDefnModel.canView(!0);a.hideReportView();a.$actionBar.show();$(".metric-attribute-map-toggle").removeClass("disabled-icon");break;case "SUCCESS":this.app.dwRepository.isAttributeOnlyRepositry()||a.$pivotButton.show(),a.reportIsRunning=!1,a.reportDefnModel.canSave(!a.reportDefinitionChanged),
a.reportDefnModel.canView(a.reportDefinitionChanged),a.$actionBar.show(),$(".metric-attribute-map-toggle").removeClass("disabled-icon"),a.showPivotAnalysis?(a.hideReportViewRequired=!0,a.showPivotAnalysisControl()):a.showReportView()}else("showGrid"===c||"showChart"===c)&&a.options.reportDefinitionInfoModel&&a.options.reportDefinitionInfoModel.attr(c,e)})}," show_pivot_analysis":function(){this.showPivotAnalysisControl()}," grid_drawn":function(){this.hideReportViewRequired&&(this.hideReportViewRequired=
!1,this.hideGridAndChart())},showPivotAnalysisControl:function(){this.showPivotAnalysis=!1;this.destroyPivotView();var a=this;this.hideGridAndChart();setTimeout(function(){$(".pivot-table-element").sentrana_pivot_analysis({app:a.options.app,data:a.executionMonitorModel.data});a.reportDefnModel.canView(!0)},10)},destroyPivotView:function(){var a=$(".pivot-table-element");a.control()&&(a.control().destroy(),a.html(""))},validatePivotData:function(){var a=this.reportDefnModel.templateUnits;return 2>
$.grep(a,function(a){return"ATTRIBUTE"===a.type}).length?!1:0<$.grep(a,function(a){return a.type==="METRIC"}).length},resizePivotControl:function(){$(".pivot-table-element").control()&&$(".pivot-table-element").control().resizePivotControl()},showReportView:function(){this.$builderReportViewerContainer.show()},hideReportView:function(){this.$builderReportViewerContainer.hide()},hideGridAndChart:function(){this.$pivotContainer.show();this.builderReportViewController.hide()},initResultDataModel:function(){var a=
this;this.resultDataModel=new Sentrana.Models.ResultDataModel({app:this.options.app});this.resultDataModel.bind("change",function(b,c,d,e){switch(e){case "STARTING":a.options.app.blockElement(a.element.find(".center"),'<div class="loading"><p class="small-waitingwheel"><img src="images/loader.gif"/></p></div>')}})},initReportControls:function(){this.$columns.sentrana_data_warehouse_as_controls({app:this.options.app,dwRepository:this.options.app.getDWRepository(),dwSelection:this.dwSelection,reusableColumnModel:this.reusableColumnModel,
builderController:this});this.$reportDefn.sentrana_report_defin_editor({reportDefnModel:this.reportDefnModel,app:this.options.app,parent:this});this.initExecutionMonitorDependencies()},initExecutionMonitorDependencies:function(){this.executionMonitorController=this.$executionMonitor.sentrana_execution_monitor({executionMonitorModel:this.executionMonitorModel,showHideGridFn:function(){},showHideChartFn:function(){},parent:this,displayShowAsButtons:!1}).control();this.$diagnostics.sentrana_diagnostics({executionMonitorModel:this.executionMonitorModel})},
initReportComponents:function(a){this.initReportModels(a);this.initReportControls(a)},initDialogs:function(){this.saveUpdateRptDlg=$("#save-update-report-dialog").sentrana_dialogs_save_update_report({app:this.options.app,reportDefnModel:this.reportDefnModel}).control();this.saveUpdateAsRptDlg=$("#save-update-as-report-dialog").sentrana_dialogs_save_update_as_report({app:this.options.app,reportDefnModel:this.reportDefnModel}).control();$(".result-definition-element").html("");this.resultDefDlg=$("#result-definition-dialog").sentrana_dialogs_result_definition({app:this.options.app,
resultDataModel:this.resultDataModel}).control()},updatePageView:function(){this.builderReportViewController&&this.builderReportViewController.updateView();this.resizePivotControl()},initLeftSideBar:function(a,b){return $(".builder-page .leftcolumn").smartsidebar({title:"Columns",position:"left",sidebarWidth:a,callBackFunctionDefault:function(){$(".contentcolumn",".builder-page").addClass("contentcolumn-default-margin-left").addClass("contentcolumn-default-margin-right").addClass("contentcolumn-default-margin-top").addClass("contentcolumn-default-margin-bottom");
$(".leftcolumn",".builder-page").addClass("sidebar-default-width");$(".rightcolumn",".builder-page").addClass("sidebar-default-width").addClass("sidebar-right-default-margin-left")},callBackFunctionOnShow:function(){$(".contentcolumn",".builder-page").removeClass("contentcolumn-default-margin-left").addClass("contentcolumn-margin-left-on-left-sidebar-show");$(".leftcolumn",".builder-page").removeClass("sidebar-default-width").addClass("sidebar-width-on-show");b.updatePageView()},callBackFunctionOnHide:function(){$(".contentcolumn",
".builder-page").removeClass("contentcolumn-margin-left-on-left-sidebar-show").addClass("contentcolumn-default-margin-left");$(".leftcolumn",".builder-page").removeClass("sidebar-width-on-show").addClass("sidebar-default-width");b.updatePageView()},autoHeight:!0,autoHeightMargin:$("#main-navbar").outerHeight(!0)})},initRightSideBar:function(a,b){return $(".builder-page .rightcolumn").smartsidebar({title:"Filters",position:"right",sidebarWidth:a,callBackFunctionDefault:function(){$(".contentcolumn",
".builder-page").addClass("contentcolumn-default-margin-left").addClass("contentcolumn-default-margin-right").addClass("contentcolumn-default-margin-top").addClass("contentcolumn-default-margin-bottom");$(".leftcolumn",".builder-page").addClass("sidebar-default-width");$(".rightcolumn",".builder-page").addClass("sidebar-default-width").addClass("sidebar-right-default-margin-left")},callBackFunctionOnShow:function(){$(".contentcolumn",".builder-page").removeClass("contentcolumn-default-margin-right").addClass("contentcolumn-margin-right-on-right-sidebar-show");
$(".rightcolumn",".builder-page").removeClass("sidebar-default-width").removeClass("sidebar-right-default-margin-left").addClass("sidebar-width-on-show").addClass("sidebar-right-margin-left-on-show");b.updatePageView()},callBackFunctionOnHide:function(){$(".contentcolumn",".builder-page").removeClass("contentcolumn-margin-right-on-right-sidebar-show").addClass("contentcolumn-default-margin-right");$(".rightcolumn",".builder-page").removeClass("sidebar-width-on-show").removeClass("sidebar-right-margin-left-on-show").addClass("sidebar-default-width").addClass("sidebar-right-default-margin-left");
b.updatePageView()},autoHeight:!0,autoHeightMargin:$("#main-navbar").outerHeight(!0)})},update:function(a){this._super(a);this.needToUpdateView&&(this.updatePageView(),this.needToUpdateView=!1)},init:function(){var a=this;this.isRendered=this.executionSuccessful=!1;this.callBackFunctionOnInit=[];this.needToUpdateView=this.isColumnDefinitionChanged=!1;$(".nb-body").hide();this.options.app.isMainBlocked||this.options.app.blockMain();a.element&&a.element.html(can.view("templates/pg-builder.ejs",{}));
a.initDOMObjects();a.manipulateDOMObjects();a.initReportComponents(a);var b;window.location.search&&(b=a.dwRepository.retrieveReportDefnFromUrl(window.location.search),a.executionMonitorModel.renderAndExecuteReport(b,b.eInfos,"CLEAR"));a.initDialogs();a.reportDefnModel.canSave(!1);a.executionMonitorModel.attr("showGrid",!0);a.executionMonitorModel.attr("showChart",!0);b=a.initLeftSideBar(280,a);var c=a.initRightSideBar(280,a);Sentrana.Enums.ENABLE_METRIC_ATTRIBUTE_MAPPING_TOGGLE&&(b.find(".button_wrapper").prepend('<i class="fa fa-toggle-on metric-attribute-map-toggle"><i/>'),
b.find(".metric-attribute-map-toggle").off("click"),b.find(".metric-attribute-map-toggle").on("click",function(){a.toggleRestictButtonIcon();return!1}),setTimeout(function(){a.setMetricAtrributeMappingButtonAttr()},450));a.makeReportZoneCollapsible();b.show();c.show();a.options.app.unBlockMain();a.isRendered=!0;if(0<a.callBackFunctionOnInit.length)for(b=0;b<a.callBackFunctionOnInit.length;b++)(c=a.callBackFunctionOnInit[b])&&"function"===typeof c&&c()},toggleRestictButtonIcon:function(){$(".metric-attribute-map-toggle").hasClass("disabled-icon")||
(this.options.app.toggleMetricAtrributeMappingStatus(),this.setMetricAtrributeMappingButtonAttr(),this.options.app.metricAtrributeMappingStatus?this.applyMappingToAll():this.enableAllCheckobxes())},setMetricAtrributeMappingButtonAttr:function(){var a=$(".metric-attribute-map-toggle");this.options.app.metricAtrributeMappingStatus?($(a).attr("title","Turn off metric attribute mapping restriction"),$(a).removeClass("fa-toggle-on"),$(a).addClass("fa-toggle-off")):($(a).attr("title","Turn on metric attribute mapping restriction"),
$(a).addClass("fa-toggle-on"),$(a).removeClass("fa-toggle-off"))},makeReportZoneCollapsible:function(){this.element.find(".report-definition-header-bar").click({controller:this},this.CollapsibleContainerTitleOnClick)},CollapsibleContainerTitleOnClick:function(a){$(this).find(".indicator").toggleClass("fa-minus-square fa-plus-square");a.data.controller.element.find(".report-zone-collapsibleContainer").slideToggle("normal")},linkToReport:function(a){this.options.reportDefinitionInfoModel&&this.options.reportDefinitionInfoModel.backup();
this.isColumnDefinitionChanged=!1;this.preserveTheCloneModel(a);this.$reportTitle.html(can.view("templates/editReportTitle.ejs",{mode:"edit",report:a}));this.$reportInfo.show();"false"===this.options.app.retrieveBuilderPageReportInfo()&&this.$reportInfo.hide();this.$reportName.text(a.name);this.reportDefnModel.setSaved(!0)},preserveTheCloneModel:function(a){this.cloneReportDefinitionInfoModel=a.attr()},unlinkReport:function(){this.originalReport=void 0;this.update({reportDefinitionInfoModel:void 0,
originalReportModel:void 0});this.cloneReportDefinitionInfoModel=void 0;this.isColumnDefinitionChanged=!1;this.$reportInfo.hide();this.$reportName.text("");this.reportDefnModel.setSaved(!1)}," reset_report":function(){this.resetBuilderPage()},resetBuilderPage:function(){this.resultOptions=void 0;this.executionMonitorModel.resultOptions=void 0;this.builderReportViewController&&this.builderReportViewController.resultDataModel&&this.builderReportViewController.resultDataModel.clearTransformation();this.initResultDataModel();
this.executionMonitorModel.resultDataModel=this.resultDataModel;this.options.reportDefinitionInfoModel&&this.options.reportDefinitionInfoModel.bookletId&&this.options.app.switchToPage("saved","refresh_booklet_report",this.options.reportDefinitionInfoModel);this.options.reportDefinitionInfoModel&&this.unlinkReport(this.options.reportDefinitionInfoModel);this.options.reportDefinitionInfoModel=void 0;this.isColumnDefinitionChanged=!1;this.reportDefnModel.canSave(!1);this.executionMonitorModel.attr("showGrid",
!0);this.executionMonitorModel.attr("showChart",!0);this.pageRefreshed&&this.$actionBar.hide();this.$executionMonitor.hide();this.executionMonitorController&&this.executionMonitorController.indicateStatus("success");this.$fsDiagnostics.hide();this.$reportTitle.html("Report Definition");this.pageRefreshed=!0;this.$builderReportViewerContainer.hide();this.destroyPivotView()},isChangesMade:function(){return!this.options.reportDefinitionInfoModel?!1:this.options.reportDefinitionInfoModel.isDirty(!0)},
" save_report":function(a,b,c){this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.SaveReport,Context:Sentrana.ActionLog.Contexts.BuilderPage,ElementType:Sentrana.ActionLog.ElementTypes.Report});var d=this,a=this.reportDefnModel.computeReportName(60),b=this.executionMonitorModel.attr("showGrid"),e=this.executionMonitorModel.attr("showChart");!b&&!e&&(b=!0);var h=this.builderReportViewController.getChartOptions(),g=this.builderReportViewController.resultDataModel.getResultOptions();
this.options.reportDefinitionInfoModel?this.options.reportDefinitionInfoModel.isNew()?(this.options.reportDefinitionInfoModel.attr({name:a,showGrid:b,showChart:e,chartOptions:h,resultOptions:g},!1),this.saveUpdateRptDlg.open(this.options.reportDefinitionInfoModel)):(this.$spinner.show(),this.$executionMessage.text("Saving..."),this.$saveExecutionMessage.text(""),this.options.reportDefinitionInfoModel.attr("resultOptions",[]),this.options.reportDefinitionInfoModel.attr({showGrid:b,showChart:e,chartOptions:h,
definition:this.reportDefnModel.getReportDefinitionParameters(),resultOptions:g},!1),this.options.reportDefinitionInfoModel.save().done(function(){c&&c.resetPage?(d.reportDefnModel.clear(),d.resetBuilderPage()):($(".save-execution-message").text(Sentrana.getMessageText(window.app_resources.app_msg.report_operation.update.success_msg)).css("color","green").fadeIn(),$(".save-button",this.element).button({disabled:!0}),d.options.reportDefinitionInfoModel&&d.options.reportDefinitionInfoModel.backup())}).fail(function(){$(".save-execution-message").text(Sentrana.getMessageText(window.app_resources.app_msg.update_operation.failed)).css("color",
"red").fadeIn()}).always(function(){d.$spinner.hide();d.$executionMessage.text("")})):(this.update({reportDefinitionInfoModel:new Sentrana.Models.ReportDefinitionInfo({name:a,showGrid:b,showChart:e,chartOptions:h,resultOptions:g},this.options.app),originalReportModel:void 0}),this.saveUpdateRptDlg.open(this.options.reportDefinitionInfoModel))},openDerivdColumnDialog:function(a,b){var c=$(".formula-column-dialog"),d=c.control();d&&!d._destroyed&&d.destroy();c.html("");!a&&b&&(d=this.getIndexByHid(b.hid),
-1<d&&(a=this.reportDefnModel.templateUnits[d]));c.sentrana_dialogs_formula_column({app:this.options.app,reportDefnModel:this.reportDefnModel,dwRepository:this.options.app.dwRepository,isPartOfAnyReport:a?!0:!1,reportId:this.options.reportDefinitionInfoModel?this.options.reportDefinitionInfoModel.id:void 0}).control().open(a,b)},getIndexByHid:function(a){if(!this.reportDefnModel)return-1;for(var b=0;b<this.reportDefnModel.templateUnits.length;b++)if(this.reportDefnModel.templateUnits[b].hid===a)return b;
return-1},openOnlyWhenColumnDialog:function(a,b){var c=$(".onlywhen-column-dialog"),d=c.control();d&&!d._destroyed&&d.destroy();d=[];if(a.elementHID)for(var e=a.elementHID.split(","),h=0;h<e.length;h++){var g=this.options.app.dwRepository.objectMap[e[h]];g&&d.push(g)}e=a.id?a.attr():a;d=new Sentrana.Models.ConditionalMetric(e,d,this.options.app.dwRepository);-1<this.getIndexByHid(d.hid)&&(b=!0);c.sentrana_dialogs_only_when({app:this.options.app,width:700,conditionalMetric:d,addToreport:b,position:["center",
60],builderController:this,tu:a,reportDefnModel:this.reportDefnModel}).control().open()},openSavedFilterDialog:function(a){var b=$(".saved-filters-dialog"),c=b.control();c&&!c._destroyed&&c.destroy();b.html("");c="edit";if(a){for(var d=[],e=0;e<a.filters.length;e++){var h=this.options.app.dwRepository.getObjectByOID(a.filters[e].oid,!0);d.push(h)}a=new Sentrana.Models.SavedFilter({app:this.options.app,id:a.id,dataSource:a.dataSource,name:a.name,filters:d})}else a=new Sentrana.Models.SavedFilter({app:this.options.app}),
c="create";b.sentrana_dialogs_saved_filters({app:this.options.app,width:570,savedFilter:a,reportDefnModel:this.reportDefnModel,mode:c}).control().open()},".formula-column-button click":function(){this.openDerivdColumnDialog()},".report-info-selector-btn click":function(){$(".report-info-selector").is(":checked")&&this.options.app.saveBuilderPageReportInfo("false");this.$reportInfo.hide()}," chart_updated":function(){$(".save-button",this.element).button({disabled:!1})}," save_as_report":function(){if(this.options.reportDefinitionInfoModel){if(this.options.reportDefinitionInfoModel.bookletId)var a=
this.options.reportDefinitionInfoModel.bookletId,b=this.options.app.bookletController.getReportPosition();var c=this.executionMonitorModel.showGrid,d=this.executionMonitorModel.showChart;!c&&!d&&(c=!0);var e=this.builderReportViewController.getChartOptions(),h=this.builderReportViewController.resultDataModel.getResultOptions();this.saveUpdateAsRptDlg.open("Copy of "+this.options.reportDefinitionInfoModel.name,c,d,e,this.options.app,a,b,h)}},shareReport:function(){this.options.reportDefinitionInfoModel&&
this.element.trigger("share_report",this.options.reportDefinitionInfoModel)}," execute_report_by_defn":function(a,b,c){this.reportIsRunning&&(this.executionMonitorModel.cancelExecutionDrillingCall(),this.reportIsRunning=!0,this.reportDefinitionChanged=!1);this.$summary.show();$(".report-chart.sentrana_collapsible_container .buttonBar").css("display","inline-block");(a=this.options.app.retrieveUserInfo())&&a.isDeveloper&&this.$fsDiagnostics.show();this.reportDefnModel.canSave(!1);this.pageRefreshed=
!1;c={name:"Untitled",definition:c,showChart:!0,showGrid:!0};this.options.reportDefinitionInfoModel&&this.options.reportDefinitionInfoModel.chartOptions&&(c.chartOptions=this.options.reportDefinitionInfoModel.chartOptions);this.originalReport?(c.name=this.originalReport.name,c.createDate=this.originalReport.createDate):c.createDate=Sentrana.formatCommentDate(new Date);c=new Sentrana.Models.ReportDefinitionInfo({json:c,app:this.options.app});this.$builderReportViewerContainer.control()&&(this.executionMonitorModel.unbind("change"),
this.$builderReportViewerContainer.sentrana_report_view("destroy"),this.$builderReportViewerContainer.empty());this.bindExecutionMonitorEventHandler();this.initExecutionMonitorDependencies();this.executionMonitorModel.resultOptions=this.resultOptions;this.executionMonitorModel.saveState=!0;this.builderReportViewController=this.$builderReportViewerContainer.sentrana_report_view({app:this.options.app,executionMonitorModel:this.executionMonitorModel,showExport:!0,showPrint:!0,showChartOptions:!0,changeChartType:!0,
allowDrillDown:!0,displayMode:"write",reportDefinitionInfoModel:this.options.reportDefinitionInfoModel,resultOptions:this.resultOptions}).control();this.builderReportViewController.setTitle(void 0,"Report results");this.builderReportViewController.viewReport(c)},updateResultDefinition:function(){if(this.resultOptions)for(var a=0;a<this.resultOptions.length;a++){var b=this.getColumnIndex(this.resultOptions[a].columnId);this.resultOptions[a].columnPosition=b}},getResultDataByColumnId:function(a){for(var b=
0;b<this.resultOptions.length;b++)if(this.resultOptions[b].columnId===a)return this.resultOptions[b]},getColumnIndex:function(a){for(var b=0;b<this.reportDefnModel.templateUnits.length;b++)if(this.reportDefnModel.templateUnits[b].oid===a)return b;return-1},getYAxisLabel:function(a,b){return a==Sentrana.CHART_TYPE_SCATTER||a==Sentrana.CHART_TYPE_BUBBLE?1<b.metrics.count?b.metrics[1].name:this.getJoinedTitle(b.metrics):this.chartType==Sentrana.CHART_TYPE_HISTOGRAM?"Count":this.getJoinedTitle(b.metrics)},
getJoinedTitle:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].name);return b.join(", ")},getColumns:function(){for(var a=this.reportDefnModel.templateUnits,b=[],c=[],d=0;d<a.length;d++)"ATTRIBUTE"===a[d].type?b.push(a[d]):c.push(a[d]);return{attributes:b,metrics:c}},isNewTitleRequired:function(){return this.isReportColumnChanged()},getChartType:function(){return this.builderReportViewController.getChartType()},isReportColumnChanged:function(){if(this.isColumnDefinitionChanged)return!0;var a=
this.cloneReportDefinitionInfoModel;if(!a)return!1;var b=!1,c=this.reportDefnModel.getReportDefinitionParameters();a.definition.template!==c.template&&(this.isColumnDefinitionChanged=b=!0);return b},hideTableDialogs:function(){this.hideTableDialog(".column-sort-element");this.hideTableDialog(".column-filter-element")},hideTableDialog:function(a){(a=this.element.find(a).control())&&!a._destroyed&&a.hideThisController()}," edit_report":function(a,b,c){this.resetBuilderPage();var d=this;c.initializeFilters(function(a){a=
d.options.app.dwRepository.objectMap[a.attrHID];d.$columns.control().initFilterControl(a)});setTimeout(function(){d.isRendered?d.editReport(c):d.callBackFunctionOnInit.push(function(){d.editReport(c);d.$columns.control().checkFirstSelectedFilter()})},100)},editReport:function(a){this.resultOptions=a.resultOptions.attr();this.originalReport=a;var b=new Sentrana.Models.ReportDefinitionInfo({json:a.attr(),app:this.options.app});this.pageRefreshed=!1;$(".date-range-list").empty();this.update({reportDefinitionInfoModel:b,
originalReportModel:a});this.reportDefnModel.setDefn(b.definition);this.reportDefnModel.canSave(!1);this.linkToReport(b);this.$executionMonitor.hide();this.$fsDiagnostics.hide();this.executionMonitorModel.attr("showGrid",!0);this.executionMonitorModel.attr("showChart",!0);this.executionMonitorModel.attr("resultOptions",this.getResultOptions());$(".save-button",this.element).button({disabled:!0});this.$saveAsButton.button({disabled:!0}).show();this.$shareButton.button({disabled:!0}).show();this.$builderReportViewerContainer.html("")},
" update_definition_for_deleted_derived_column":function(a,b,c){c&&this.reportDefnModel.addExpressionToReportDefinition(c.derivedColumn,c.pos,c.sortPosition,c.sortOrder);this.options.app.savedReportsController&&this.options.app.savedReportsController.updateReportList()}," apply_mteric_dimension_mapping":function(a,b,c){this.options.app.metricAtrributeMappingStatus?(b=c.reportDefnModel,a=c.newTu,c=c.changeType,0>=this.options.app.dwRepository.metricDimensionMapping.length||(0>=b.templateUnits.length?
this.enableAllCheckobxes():a&&(b=this.getSelectedMetricGroupAndDimensions(b.templateUnits),a.formula||("METRIC"===a.type?"remove"===c&&0>=b.groupIds.length?this.enableAllDimensions():(c=this.getRelatedDimensions(b.groupIds),this.disableUnrelatedDimensions(this.getUnrelatedDimensions(c)),this.handleIncludeExcludeAttr(c,b.groupIds)):"remove"===c&&0>=b.dimNames.length?this.enableAllMetricGroups():this.disableUnrelatedMetricGroups(this.getUnrelatedMetricGroups(this.getRelatedMetricGroups(b.dimNames))))))):
this.enableAllCheckobxes()},applyMappingToAll:function(){if(!(0>=this.options.app.dwRepository.metricDimensionMapping.length)){var a=this.getSelectedMetricGroupAndDimensions(this.reportDefnModel.templateUnits);0<a.dimNames.length&&this.disableUnrelatedMetricGroups(this.getUnrelatedMetricGroups(this.getRelatedMetricGroups(a.dimNames)));if(0<a.groupIds.length){var b=this.getRelatedDimensions(a.groupIds);this.disableUnrelatedDimensions(this.getUnrelatedDimensions(b));this.handleIncludeExcludeAttr(b,
a.groupIds)}}},mergeTwoArray:function(a,b){for(var c=0;c<b.length;c++)-1>=$.inArray(b[c],a)&&a.push(b[c]);return a},getSelectedMetricGroupAndDimensions:function(a){for(var b=[],c=[],d=0;d<a.length;d++){var e=a[d];"METRIC"===e.type?(e=this.getMetricGroupByMetric(e.oid))&&b.push($.trim(e)):(e=this.options.app.dwRepository.objectMap[e.hid])&&c.push($.trim(e.dimName))}return{groupIds:b,dimNames:c}},getMetricGroupByMetric:function(a){for(var b=this.options.app.dwRepository.metricGroups,c=0;c<b.length;c++)for(var d=
0;d<b[c].metrics.length;d++)if(b[c].metrics[d].oid===a)return b[c].id;return!1},getRelatedDimensions:function(a){for(var b=[],c=$.grep(this.options.app.dwRepository.metricDimensionMapping,function(b){return-1<$.inArray(b.groupId,a)}),d=0;d<c.length;d++)for(var e=0;e<c[d].dimensions.length;e++){var h=c[d].dimensions[e].name;this.isDimensionExistsForAllGroup(h,c)&&b.push($.trim(h))}return b},isDimensionExistsForAllGroup:function(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=0;e<b[d].dimensions.length;e++){var h=
b[d].dimensions[e].name;if($.trim(a)===$.trim(h)){c++;break}}return b.length===c},getRelatedMetricGroups:function(a){for(var b=[],c=this.getSelectedMappingsByDimName(a),d=0;d<c.length;d++)this.isGroupContainsAllDimensions(c[d],a)&&-1>=$.inArray($.trim(c[d].groupId),b)&&b.push($.trim(c[d].groupId));return b},getSelectedMappingsByDimName:function(a){return $.grep(this.options.app.dwRepository.metricDimensionMapping,function(b){for(var c=!1,d=0;d<b.dimensions.length&&!(c=-1<$.inArray($.trim(b.dimensions[d].name),
a));d++);return c})},isGroupContainsAllDimensions:function(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=0;e<a.dimensions.length;e++)if($.trim(b[d])===$.trim(a.dimensions[e].name)){c++;break}return b.length===c},getUnrelatedDimensions:function(a){for(var b=this.options.app.dwRepository.dimensionNames,c=[],d=0;d<b.length;d++)-1>=$.inArray($.trim(b[d]),a)&&c.push($.trim(b[d]));return c},getUnrelatedMetricGroups:function(a){for(var b=this.options.app.dwRepository.metricGroups,c=[],d=0;d<b.length;d++)-1>=
$.inArray(b[d].id,a)&&c.push(b[d].id);return c},enableAllCheckobxes:function(){$("input.object-selector").prop("disabled",!1)},enableAllDimensions:function(){$(".dimension input.object-selector").prop("disabled",!1)},enableAllMetricGroups:function(){$(".metrics-panel input.object-selector").prop("disabled",!1)},disableUnrelatedDimensions:function(a){this.enableAllDimensions();for(var b=0;b<a.length;b++){var c=this.getAttributesByDimension(a[b]);if(c)for(var d=0;d<c.length;d++)this.disableCheckboxbyId(c[d].hid)}},
handleIncludeExcludeAttr:function(a,b){for(var c=this.getIncludeExcludeAttr(b),d=0;d<a.length;d++){var e=c[a[d]];if(e&&e.length){var h=this.getAttributesByDimension(a[d]),g=$.grep(e,function(a){return"include"===a.operation});if(g.length)for(var f=0;f<h.length;f++){var i=h[f].oid.substring(0,h[f].oid.length-5);this.isInList(i,g)||this.disableCheckboxbyId(h[f].hid)}e=$.grep(e,function(a){return"exclude"===a.operation});if(e.length)for(f=0;f<h.length;f++)i=h[f].oid.substring(0,h[f].oid.length-5),this.isInList(i,
e)&&this.disableCheckboxbyId(h[f].hid)}}},isInList:function(a,b){for(var c=0;c<b.length;c++)if(b[c].id===a)return!0;return!1},getSelectedMappingsByGroupeID:function(a){for(var b=[],c=this.options.app.dwRepository.metricDimensionMapping,d=0;d<a.length;d++)for(var e=0;e<c.length;e++)c[e].groupId===a[d]&&b.push(c[e]);return b},getIncludeExcludeAttr:function(a){for(var a=this.getSelectedMappingsByGroupeID(a),b={},c=0;c<a.length;c++)for(var d=0;d<a[c].dimensions.length;d++){var e=a[c].dimensions[d];e.name=
$.trim(e.name);b[e.name]||(b[e.name]=[]);if(e.attributes&&e.attributes.length)for(var h=0;h<e.attributes.length;h++)this.isAttributeAlreadyAdded(b[e.name],e.attributes[h])||b[e.name].push(e.attributes[h])}return b},isAttributeAlreadyAdded:function(a,b){for(var c=0;c<a.length;c++)if(a[c].id===b.id&&a[c].operation===b.operation)return!0;return!1},disableUnrelatedMetricGroups:function(a){this.enableAllMetricGroups();for(var b=0;b<a.length;b++){var c=this.getMetricsByGroup(a[b]);if(c)for(var d=0;d<c.length;d++)this.disableCheckboxbyId(c[d].hid)}},
disableUnrelatedColumns:function(a,b){this.enableAllCheckobxes();for(var c=0;c<b.length;c++){var d=this.getMetricsByGroup(b[c]);if(d)for(var e=0;e<d.length;e++)this.disableCheckboxbyId(d[e].hid)}for(c=0;c<a.length;c++)if(d=this.getAttributesByDimension(a[c]))for(e=0;e<d.length;e++)this.disableCheckboxbyId(d[e].hid)},getMetricsByGroup:function(a){for(var b=this.options.app.dwRepository.metricGroups,c=0;c<b.length;c++)if(b[c].id===a)return b[c].metrics;return!1},getAttributesByDimension:function(a){return(a=
this.options.app.dwRepository.dimensions[a])?a.attributes:!1},enableCheckboxbyId:function(a){$("input#"+a+".object-selector").prop("disabled",!1)},disableCheckboxbyId:function(a){$("input#"+a+".object-selector").prop("disabled",!0)},"{reportDefinitionInfoModel} updated":function(a){this.$reportName.text(a.name);this.originalReport&&(this.originalReport.attr("showGrid",a.attr("showGrid")),this.originalReport.attr("showChart",a.attr("showChart")),this.originalReport.attr("definition",a.attr("definition")),
this.originalReport.attr("chartOptions",a.attr("chartOptions")));this.reportDefnModel&&(this.reportDefnModel.isCleared=!1);this.pageRefreshed=!1;this.preserveTheCloneModel(new Sentrana.Models.ReportDefinitionInfo(a.attr()));this.isColumnDefinitionChanged=!1},"{reportDefinitionInfoModel} created":function(a){this.originalReport=a;this.linkToReport(new Sentrana.Models.ReportDefinitionInfo(a.attr()));this.reportDefnModel&&(this.reportDefnModel.isCleared=!1);this.pageRefreshed=!1},"{reportDefinitionInfoModel} destroyed":function(){this.resetBuilderPage()},
"{originalReportModel} destroyed":function(){this.pageRefreshed||(this.pageRefreshed=!1,this.resetBuilderPage())},inArray:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1},"{window} resize":function(){this.resizePivotControl()}," print_closed":function(){$("#saved").control()&&($("#saved").control().needToUpdateView=!0)}});steal.executed("js/controllers/BuilderPageController.js");
can.Model.extend("Sentrana.Models.ReportRecipients",{methodBase:"ReportRecipients/",toUserKey:function(a){return"u"+a},fromUserKey:function(a){return a.substr(1)},findOne:function(a,b,c){var d=a.id,e=this;delete a.id;return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl(this.methodBase+d),type:"GET",dataType:"json",success:b,error:c}).pipe(function(a){var b={existingRecipsMap:{},existingRecipsArray:a,newRecipsMap:{},newRecipsArray:[],existingRecipsToNotifyMap:{}};$.each(a,function(a,c){b.existingRecipsMap[e.toUserKey(c.userID)]=
c.partStatus});return"BookletRecipients/"===e.methodBase?new Sentrana.Models.BookletRecipients(b):new Sentrana.Models.ReportRecipients(b)})},destroy:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl(this.methodBase+a),type:"DELETE",success:b,error:c})},update:function(a,b,c,d){for(var e=[],h=[],e=Sentrana.mergeSecondArrayWithFirstArrayByProperty(b.existingRecipsArray,b.newRecipsArray,"userID"),g=0;g<e.length;g++)h.push(e[g]);e=[];b.notifyNew&&e.push({fromStatus:null,
toStatus:"AC",subject:b.subjectNew,body:b.bodyNew});b.notifyExisting&&(e.push({fromStatus:"AC",toStatus:"RV",subject:"",body:""}),e.push({fromStatus:"RV",toStatus:"AC",subject:"",body:""}));b={recips:h,emailInfos:e};return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl(this.methodBase+a),type:"PUT",dataType:"json",contentType:"text/json",data:JSON.stringify(b),success:c,error:d})}},{hasExistingRecipient:function(a){return!!(this.constructor.toUserKey(a)in this.existingRecipsMap)},numExistingRecipients:function(){return this.existingRecipsArray.length},
addNewRecipient:function(a,b){this.newRecipsMap[this.constructor.toUserKey(a)]=b;this.newRecipsArray.push({userID:a,partStatus:b});$.event.trigger("change",void 0,this,!0)},removeNewRecipient:function(a){delete this.newRecipsMap[this.constructor.toUserKey(a)];a=this.getUserIndex(this.newRecipsArray,a);-1<a&&this.newRecipsArray.splice(a,1);$.event.trigger("change",void 0,this,!0)},getUserIndex:function(a,b){for(var c=0;c<a.length;c++)if(a[c].userID===b)return c;return-1},modifyExistingRecipient:function(a,
b){var c=this.constructor.toUserKey(a),d=this.getUserIndex(this.newRecipsArray,a);b===this.existingRecipsMap[c]?(delete this.newRecipsMap[c],-1<d&&this.newRecipsArray.splice(d,1),delete this.existingRecipsToNotifyMap[c]):(this.newRecipsMap[c]=b,this.newRecipsArray.push({userID:a,partStatus:b}),"EX"!=b?this.existingRecipsToNotifyMap[c]=b:delete this.existingRecipsToNotifyMap[c]);$.event.trigger("change",void 0,this,!0)},hasChanges:function(){return!$.isEmptyObject(this.newRecipsMap)},isEmailNotificationEnabled:function(){return!$.isEmptyObject(this.existingRecipsToNotifyMap)}});
steal.executed("js/models/ReportRecipientsModel.js");
can.Model.extend("Sentrana.Models.CommentItem",{id:"cid",extractReportID:function(a){if(!1 in a)return null;var b=a.reportID;delete a.reportID;return b},findAll:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("ReportComment/"+this.extractReportID(a)),type:"GET",dataType:"json",data:a,headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},create:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("ReportComment/"+
this.extractReportID(a)),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},update:function(a,b,c,d){var e=a.split("_")[0];return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("ReportComment/"+e+"/"+a),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(b),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,
repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:c,error:d})},destroy:function(a,b,c){var d=a.split("_")[0];return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("ReportComment/"+d+"/"+a),type:"DELETE",dataType:"json",headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})}},{formatDate:function(){return Sentrana.formatCommentDate(new Date(this.date))},formatTime:function(){return Sentrana.formatCommentTime(new Date(this.date))}});
steal.executed("js/models/CommentItemModel.js");
can.Observe.extend("Sentrana.Models.CommentStream",{},{init:function(a,b){this.setup({count:0});this.reportID=a;!b||!b.comments||!b.comments.length?this.comments=[]:(this.comments=$.map(b.comments,function(a){return new Sentrana.Models.CommentItem(a.attr())}),this.tidy())},tidy:function(){this.comments.sort(function(a,b){return b.date-a.date});this.attr("count",this.comments.length)},sortItem:function(a){switch(a){case "date":this.comments.sort(function(a,c){return c.date-a.date});break;case "userName":this.comments.sort(function(a,
c){return a.userName<c.userName?-1:a.userName>c.userName?1:0});break;default:this.comments.sort(function(a,c){return c.date-a.date})}},hasComments:function(){return this.comments&&this.comments.length},getComments:function(){return this.comments},addCommentItem:function(a){a.reportID=this.reportID;var b=this;(new Sentrana.Models.CommentItem(a)).save().done(function(a){b.comments.push(a);b.tidy()})},removeComment:function(a){var b=this;$.each(this.comments,function(c,d){if(d.cid===a)return b.comments.splice(c,
1),b.attr("count",b.comments.length),!1})},reloadFromServer:function(){var a=this,b={};$.each(this.comments,function(a,d){b[d.cid]=1});$.when(Sentrana.Models.CommentItem.findAll({reportID:this.reportID})).done(function(c){$.each(c.comments,function(c,e){e.cid in b||a.comments.push(new Sentrana.Models.CommentItem(e.attr()))});a.tidy()})}});steal.executed("js/observes/CommentStreamObserve.js");
can.Control.extend("Sentrana.Controllers.CommentStream",{pluginName:"sentrana_comment_stream",defaults:{app:null,commentStreamModel:null,addButtonCss:".add-comment-btn",inputTextCss:'textarea[name="comment-text"]',commentsCss:".comments",commentsHeaderArea:".comments-header-area",templateFile:"templates/comments.ejs"}},{init:function(){this.updateView();this.deleteCommentDlg=$("#delete-comment-dialog").sentrana_dialogs_delete_comment({}).control();this.editCommentDlg=$("#edit-comment-dialog").sentrana_dialogs_edit_comment({parent:this}).control()},
update:function(a){this._super(a);this.updateView()},updateView:function(){this.$addButton=this.element.find(this.options.addButtonCss);this.$inputText=this.element.find(this.options.inputTextCss);this.$comments=this.element.find(this.options.commentsCss);this.$commentsHeaderArea=this.element.find(this.options.commentsHeaderArea);this.$commentsHeaderArea.css("display","block");this.$addButton.button("disable");this.$addButton.addClass("disabled");this.element.find(".comments-menu-item").removeClass("item-selected");
this.element.find(".comments-menu-item.creation-date").addClass("item-selected");this.options.commentStreamModel&&this.options.commentStreamModel.hasComments()?this.$comments.html(can.view(this.options.templateFile,this.options.commentStreamModel.getComments())).show():this.$comments.empty().hide();this.updateCommentCountView()},updateCommentCountView:function(a){(a=a?a:this.options.commentStreamModel)&&a.hasComments()?(a=1*a.comments.length,1===a?$(".total-user-comments").text("You have "+a+" comment"):
$(".total-user-comments").text("You have "+a+" comments")):($(".total-user-comments").text("You do not have any comment"),this.$comments.empty().hide())},".comment-button-container click":function(a){a=$(a);a.hasClass("edit")?(a=a.children(".btn-comment-edit"),this.editCommentDlg.open(this.getSelectedComment(a),this.options.commentStreamModel)):a.hasClass("delete")&&(a=a.children(".btn-comment-delete"),this.deleteCommentDlg.open(this.getSelectedComment(a),this.options.commentStreamModel))},getSelectedComment:function(a){var b=
$(a).parent().attr("id"),a=$.grep(this.options.commentStreamModel.comments,function(a){return a.cid===b});a[0].id=a[0].cid;return a[0]},"{inputTextCss} keyup":function(a,b){this.handleInputTexEvent(a,b)},"{inputTextCss} paste":function(a,b){var c=this;setTimeout(function(){c.handleInputTexEvent(a,b)},400)},"{inputTextCss} cut":function(a,b){var c=this;setTimeout(function(){c.handleInputTexEvent(a,b)},400)},handleInputTexEvent:function(a,b){this.$addButton.button(a.val()?"enable":"disable");a.val()?
this.$addButton.removeClass("disabled"):this.$addButton.addClass("disabled");a.val()&&b.ctrlKey&&13===b.keyCode&&this.$addButton.trigger("click")},refreshComments:function(a){var b=$(".comments-menu-item.item-selected").attr("type");a.sortItem(b);this.$comments.html(this.options.templateFile,a.getComments()).show();this.updateCommentCountView(a)},".comments-menu-item  click":function(a){$(a).hasClass("item-selected")||(this.options.commentStreamModel.sortItem($(a).attr("type")),this.$comments.html(this.options.templateFile,
this.options.commentStreamModel.getComments()).show(),$(".comments-menu-item").removeClass("item-selected"),$(a).addClass("item-selected"))},"{addButtonCss} click":function(a){!0!==a.button("option","disabled")&&(0>=$.trim(this.$inputText.val()).length||this.options.commentStreamModel.addCommentItem({msg:this.$inputText.val()}),this.$inputText.val("").focus(),this.$addButton.button("disable"),this.$addButton.addClass("disabled"))},".comment hover":function(a){(a=$(".comment-edit",a))&&a.css("visibility",
"visible")},".comment mouseleave":function(a){(a=$(".comment-edit",a))&&a.css("visibility","hidden")},"{commentStreamModel} change":function(a,b,c){"count"===c&&this.refreshComments(a)}});steal.executed("js/controllers/CommentStreamController.js");
can.Model.extend("Sentrana.Models.ReportDefinitionInfo",{create:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Report"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},destroy:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Report/"+a),type:"DELETE",
dataType:"json",headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},findAll:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Reports"),type:"GET",dataType:"json",data:a,headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},update:function(a,b,c,d){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Report/"+
a),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(b),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:c,error:d})}},{init:function(a){a.json&&this.setup(a.json);this.app=a.app},formatColumns:function(){if(!this.definition.template)return"[None]";var a=this.app.getDWRepository(),b=this.definition.template.split("|"),b=$.map(b,function(b){if(b=a.getObjectByOID(b)){var d=b&&"ATTRIBUTE_FORM"===
b.type?b.attrHID:void 0;return(d=d?a.objectMap[d]:void 0)?d.name+"("+b.name+")":b.name}return""});return b.join(", ")},initializeFilters:function(a){if(this.definition.filter){var b=this.app.dwRepository,c=this.definition.filter.split("|");$.map(c,function(c){b.isSavedFilterGroup(c)||(c=b.getObjectByOID(c,!0),$.map(b.objectMap[c.attrHID].forms,function(c){b.checkLoadedForm(c,!1);a&&a(c)}))})}},formatFilter:function(a){var b=this;if(!this.definition.filter)return"[None]";var c=this.app.getDWRepository(),
d=this.definition.filter.split("|"),d=$.map(d,function(d){var h=b.app.dwRepository.isSavedFilterGroup(d);if(h)return h.name+" [GroupedFilter]";var d=b.getFilterElement(d).split(":"),h=c.getObjectByOID(d[0]).attrHID,h=c.objectMap[h],g=a?"":'<span class="attr">',f=a?"":"</span>";return b.isFilteredByDataFilter(d[0],d[1])?'<span class="user-filter-applied">'+d[1]+" "+g+"["+h.name+"]"+f+"</span>":d[1]+" "+g+"["+h.name+"]"+f});return d.join(", ")},isFilteredByDataFilter:function(a,b){var c=$.grep(this.app.dwRepository.datafilters,
function(b){return b.id===a});if(0===c.length)return!1;var d=$.grep(c[0].values,function(a){return a.toString().toUpperCase()===b.toString().toUpperCase()});switch(c[0].operator.toUpperCase()){case "IN":return 0===d.length;case "NOT IN":return 0<d.length}return!1},getFilterElement:function(a){a.indexOf(")")&&(a=a.substr(a.indexOf(")")+1));return a},formatModified:function(){return Sentrana.formatDate(new Date(this.lastModDate))+" ("+this.lastModUser+")"},isViewing:function(a){this.attr("viewing",
a)},getCommentStream:function(){return this.commentStreamModel?this.commentStreamModel:this.commentStreamModel=new Sentrana.Models.CommentStream(this.id,this.comments)},reloadCommentStream:function(){this.getCommentStream().reloadFromServer()},dumpDestroyedHandlers:function(){}});steal.executed("js/models/ReportDefinitionInfoModel.js");
can.Control.extend("Sentrana.Controllers.ReportDefinitionInfo",{pluginName:"sentrana_report_definition_info",defaults:{app:null,reportDefinitionInfoModel:null}},{init:function(){this.$name=this.element.find(".name");this.$lastMod=this.element.find(".report-details-last-mod");this.$columns=this.element.find(".report-details-columns");this.$filter=this.element.find(".report-details-filter");this.$details=this.element.find(".report-details")},".report-entry-table mouseleave":function(a){a.find(".report-entry-menus").css("visibility",
"hidden");a.find(".dropdown-menu").hide();return!1},".report-entry-table mouseenter":function(a){a.find(".report-entry-menus").css("visibility","visible");return!1},".report-entry-table click":function(a){this.togglePreviousSelection(a);a.parent().hasClass("report-entry-selected")?this.element.trigger("view_report",this.options.reportDefinitionInfoModel):this.element.trigger("hide_report",this.options.reportDefinitionInfoModel)},togglePreviousSelection:function(a){this.element.trigger("clear_center_panel");
var b=a.siblings(".report-entry-menus"),c=a.siblings(".report-details"),d=a.parent(),e=$(".booklet-entry");e.removeClass("booklet-entry-selected");e.find(".booklet-details").hide();$(".report-entry").not(a.parent()).removeClass("report-entry-selected");$(".report-entry .report-entry-menus .report-entry-menu").not(b.children(".report-entry-menu")).removeClass("item-selected");$(".report-entry .report-details").not(c).hide();d.toggleClass("report-entry-selected");d.hasClass("report-entry-selected")?
this.element.trigger("show_comment_stream",this.options.reportDefinitionInfoModel):(c.hide(),this.element.trigger("show_comment_stream",null))},".report-entry-menus click":function(a){$(".report-entry-menus .dropdown-menu").hide();$(a).find(".dropdown-menu").show();return!1},".report-entry-menu click":function(a){switch(a.attr("action")){case "details":this.$details.slideToggle();break;case "edit":this.element.trigger("edit_report",this.options.reportDefinitionInfoModel);break;case "copy":this.element.trigger("duplicate_report",
this.options.reportDefinitionInfoModel);break;case "delete":this.element.trigger("delete_report",this.options.reportDefinitionInfoModel);break;case "share":this.element.trigger("share_report",this.options.reportDefinitionInfoModel)}setTimeout(function(){$(a).parent().hide()},10);return!1},closeBookletCompositionPanel:function(){this.options.app.bookletController&&this.options.app.bookletController.destroyThisController()},"{reportDefinitionInfoModel} updated":function(a){this.$name.text(a.name);this.$lastMod.text(a.formatModified());
this.$columns.text(a.formatColumns());this.$filter.text(a.formatFilter());this.element.trigger("reportDefinitionInfoModel:date_change")},"{reportDefinitionInfoModel} destroyed":function(a){this.element.trigger("reportDefinitionInfoModel:destroyed",a.id)},"{reportDefinitionInfoModel} viewing":function(a,b,c){this.element[c?"addClass":"removeClass"]("saved-report-viewing")}});steal.executed("js/controllers/ReportDefinitionInfoController.js");
can.Control.extend("Sentrana.Controllers.ReportDefinitionInfoList",{pluginName:"sentrana_report_definition_info_list",defaults:{app:null,reportDefnInfoListModel:null}},{init:function(){this.loadDomElement();this.options.reportDefnInfoListModel.getSavedReports()},getReport:function(a){return $.grep(this.options.reportDefnInfoListModel.getList(),function(b){return b.id===a})[0]},filterReportsForSearchText:function(a,b){this.searchValue&&(a=$.grep(a,function(a){return-1<a.name.toLowerCase().indexOf(b.searchValue.toLowerCase())||
-1<a.createUser.toLowerCase().indexOf(b.searchValue.toLowerCase())||-1<Sentrana.formatDateValue(new Date(a.createDate),"MM/dd/yyyy").toLowerCase().indexOf(b.searchValue.toLowerCase())}));return a},populateReportEntriesinSideBar:function(a){var b="",c=this,d={},e=c.options.app.retrieveUserInfo();e?$.each(a,function(a,g){if(g.groupName!=b){b=g.groupName;var f=b.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-");c.$reportList.append('<div class="report-list-grp-'+f+'"></div>');f=$(".report-list-grp-"+
f).sentrana_side_bar_collapsible_container({title:b,showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){c.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){c.options.app.handleUserInteraction()}}).control().getContainerPanel();d[b]=f}$(d[b]).append(can.view("templates/reportEntry.ejs",{reportInfo:g,userInfo:e}));c.element.find('.report-entry[report-id="'+g.id+'"]').sentrana_report_definition_info({app:c.options.app,reportDefinitionInfoModel:g})}):
Sentrana.FirstLook.closeSession("timeout")},updateReportList:function(){this.$loading.hide();this.$reportList.empty();var a=this.options.reportDefnInfoListModel.getList(),a=this.filterReportsForSearchText(a,this);this.populateReportEntriesinSideBar(a);a.length?(this.$hasReports.show(),this.$noReports.hide(),this.resizeElements()):this.searchValue||(this.$noReports.show(),this.$hasReports.hide());this.element.trigger("hide_report",this.options.reportDefnInfoListModel);this.element.trigger("report_list_updated");
"saved"===$(".nb-l1-btn.selected").attr("l1btn")&&($(".btn-add-booklet").css("display","block"),this.options.app.resetFilmstrip())},resizeElements:function(){this.$reportList.offset();$(window).height();$(window).width();$(".footer").outerHeight(!0)},searchReports:function(a){this.searchValue=$(a).val();this.updateReportList()},initializeReportEntry:function(){var a=$(".report-entry .menu"),b=$(".report-entry .report-details");$(".report-entry").removeClass("report-entry-selected");$(".item",a).removeClass("item-selected");
a.hide();b.hide()},"{window} resize":function(){this.resizeElements()},".sort-field click":function(a){this.options.reportDefnInfoListModel.changeSortField(a.attr("id"));this.element.find(".sort-field").parent().removeClass("active");a.parent().addClass("active");this.element.trigger("show_comment_stream",null)},".sort-order click":function(a,b){b.preventDefault();this.options.reportDefnInfoListModel.toggleSortOrder()},".accordion-search-input keyup":function(a){this.searchReports(a);this.element.trigger("show_comment_stream",
null)},"{reportDefnInfoListModel} change":function(a,b,c,d,e){if(!a.ignoreChange)switch(c){case "asc":this.updateReportList();break;case "field":this.updateReportList();break;case "count":0<=e?(this.$reportCount.text(e),this.updateReportList(),this.element.trigger("show_shared_report"),this.element.trigger("update_booklet_reports")):-2===e&&this.$loading.html("<p>"+Sentrana.getMessageText(window.app_resources.app_msg.report_load.failed)+"</p>")}},loadDomElement:function(){this.element.html(can.view("templates/reportListLayout.ejs",
{model:this.options.reportDefnInfoListModel}));this.$reportList=$(".report-list",this.element);this.$reportCount=$(".report-count",this.element);this.$noReports=$(".no-reports",this.element);this.$hasReports=$(".has-reports",this.element);this.$loading=$(".loading",this.element)}," reportDefinitionInfoModel:date_change":function(){this.updateReportList();this.element.trigger("show_comment_stream",null)}," reportDefinitionInfoModel:destroyed":function(a,b,c){this.options.reportDefnInfoListModel.removeReport(c);
this.element.trigger("show_comment_stream",null)},"{Sentrana.Models.ReportDefinitionInfo} created":function(a,b,c){c.app=this.options.app;c.bookletId?this.element.trigger("report_added_to_booklet",c):(this.options.reportDefnInfoListModel.addReport(c),this.element.trigger("show_comment_stream",null))},"{Sentrana.Models.ReportDefinitionInfo} updated":function(a,b,c){c.app=this.options.app;c.bookletId||(this.options.reportDefnInfoListModel.removeReport(c.id),this.options.reportDefnInfoListModel.addReport(c),
this.element.trigger("show_comment_stream",null))}});steal.executed("js/controllers/ReportDefinitionInfoListController.js");
can.Observe.extend("Sentrana.Models.ViewList",{getGroupName:function(a,b){switch(a){case "DATE":var c=new Date(b);return Sentrana.wasMomentsAgo(c)?"Moments Ago":Sentrana.isToday(c)?"Today":Sentrana.isYesterday(c)?"Yesterday":Sentrana.isThisWeek(c)?"This Week":Sentrana.isLastWeek(c)?"Last Week":Sentrana.formatMonth(c);default:return a}},defaults:{field:"lastModDate",asc:!0,count:-1,loadErrorMessage:""}},{init:function(a,b){this.setup($.extend({},this.constructor.defaults,a));this.app=b}});steal.executed("js/observes/ViewListObserve.js");
steal("js/observes/ViewListObserve.js",function(){Sentrana.Models.ViewList("Sentrana.Models.ReportDefinitionInfoList",{},{init:function(a,b){this.setup(a);this.app=b},getSavedReports:function(){var a=this,b=1*a.count;$.when(Sentrana.Models.ReportDefinitionInfo.findAll()).done(function(c){a.savedReports=$.map(c,function(b){return new Sentrana.Models.ReportDefinitionInfo({json:b.attr(),app:a.app})});c.length===b&&(a.attr("ignoreChange",!0),a.attr("count",b+1),a.attr("ignoreChange",!1));a.attr("count",
c.length)}).fail(function(b,d,e){a.attr("loadErrorMessage",e);a.attr("count",-2)})},getList:function(){var a=this,b="";switch(a.field){case "lastModDate":case "createDate":b="DATE";a.asc=!1;break;case "name":b="All Reports",a.asc=!0}this.savedReports.sort(function(b,d){return a.asc?b[a.field]<d[a.field]?-1:b[a.field]>d[a.field]?1:0:d[a.field]<b[a.field]?-1:d[a.field]>b[a.field]?1:0});$.each(this.savedReports,function(c,d){d.groupName=a.constructor.getGroupName(b,d[a.field])});return this.savedReports},
getSortOrderName:function(){return this.asc?"ascending":"descending"},getSortFieldName:function(){switch(this.field){case "lastModDate":return"last modification date";case "createDate":return"creation date";case "name":return"report name";default:return"Unknown"}},getSortFieldNames:function(){return[{key:"lastModDate",value:"MOD. DATE"},{key:"createDate",value:"CREATION DATE"},{key:"name",value:"ABC"}]},toggleSortOrder:function(){this.attr("asc",!this.asc)},changeSortField:function(a){this.attr("field",
a)},addReport:function(a){this.savedReports&&(this.savedReports.push(a),this.attr("count",this.savedReports.length))},removeReport:function(a){var b=this;$.each(this.savedReports,function(c,d){if(d.id===a)return b.savedReports.splice(c,1),b.attr("count",b.savedReports.length),!1})}})});steal.executed("js/observes/ReportDefinitionInfoListObserve.js");
can.Control.extend("Sentrana.Controllers.SavedReports",{pluginName:"sentrana_saved_reports",defaults:{sortAsc:!1,sortField:"lastModDate"}},{initDOMObjects:function(){this.element.html(can.view("templates/pg-savedreports.ejs",{}));this.$leftBar=this.element.find(".left");this.$centerContainer=this.element.find(".center");this.$rightBar=this.element.find(".right");this.$commentStream=this.element.find(".comment-stream");this.$savedReports=this.$leftBar.find(".saved-reports-list");this.$savedBooklets=
this.$leftBar.find(".saved-booklets-list");this.$filmstripContainer=this.element.find(".filmstrip-container");this.$bookletCompositionContainer=this.element.find(".booklet-compose-and-view");this.$bookletViewContainer=this.element.find(".booklet-view-container");this.$bookletView=this.element.find(".booklet-view");this.$savedReportViewerContainer=this.element.find(".saved-report-viewer-container")},reloadReportsAndBooklets:function(){this.reportDefnInfoList.getSavedReports();this.booklets.getSavedBooklets()},
initDialogs:function(){this.shareBookletDlg=$("#share-booklet-dialog").sentrana_dialogs_share_booklet({app:this.options.app,parent:this}).control();this.duplicateRptDlg=$("#duplicate-report-dialog").sentrana_dialogs_duplicate_report({app:this.options.app}).control();this.copyBookletDlg=$("#copy-booklet-dialog").sentrana_dialogs_copy_booklet({app:this.options.app,parent:this}).control();this.deleteRptDlg=$("#delete-report-dialog").sentrana_dialogs_delete_report({app:this.options.app}).control();this.deleteBookletDlg=
$("#delete-booklet-dialog").sentrana_dialogs_delete_booklet({app:this.options.app}).control()}," add_new_booklet":function(a){$(a).hasClass("ui-state-disabled")||(this.options.app.bookletController&&this.options.app.bookletController.destroyThisController(),this.clearCenterPanelforBooklet(),this.options.app.bookletController=$(".booklet-composition-panel-container").sentrana_booklet_composition({app:this.options.app,bookletDefinModel:this.options.app.bookletDefinModel}).control())},initLeftSideBar:function(a,
b){var c=$(".saved-reports .leftcolumn").smartsidebar({title:"Reports and Booklets",position:"left",sidebarWidth:a,callBackFunctionDefault:function(){$(".contentcolumn",".saved-reports").addClass("contentcolumn-default-margin-left").addClass("contentcolumn-default-margin-right").addClass("contentcolumn-default-margin-top").addClass("contentcolumn-default-margin-bottom");$(".leftcolumn",".saved-reports").addClass("sidebar-default-width");$(".rightcolumn",".saved-reports").addClass("sidebar-default-width").addClass("sidebar-right-default-margin-left")},
callBackFunctionOnShow:function(){$(".contentcolumn",".saved-reports").removeClass("contentcolumn-default-margin-left").addClass("contentcolumn-margin-left-on-left-sidebar-show");$(".leftcolumn",".saved-reports").removeClass("sidebar-default-width").addClass("sidebar-width-on-show");b.updatePageView()},callBackFunctionOnHide:function(){$(".contentcolumn",".saved-reports").removeClass("contentcolumn-margin-left-on-left-sidebar-show").addClass("contentcolumn-default-margin-left");$(".leftcolumn",".saved-reports").removeClass("sidebar-width-on-show").addClass("sidebar-default-width");
b.updatePageView()},autoHeight:!0,autoHeightMargin:$("#main-navbar").outerHeight(!0)});$(".saved-booklets-list",c).control().addButtonToBar({title:"Add Booklet",cls:"fa-edit",eventType:"add_new_booklet",dropdown:!1});return c},initRightSideBar:function(a,b){return $(".saved-reports .rightcolumn").smartsidebar({title:"Comment Stream",position:"right",sidebarWidth:a,callBackFunctionDefault:function(){$(".contentcolumn",".saved-reports").addClass("contentcolumn-default-margin-left").addClass("contentcolumn-default-margin-right").addClass("contentcolumn-default-margin-top").addClass("contentcolumn-default-margin-bottom");
$(".leftcolumn",".saved-reports").addClass("sidebar-default-width");$(".rightcolumn",".saved-reports").addClass("sidebar-default-width").addClass("sidebar-right-default-margin-left")},callBackFunctionOnShow:function(){$(".contentcolumn",".saved-reports").removeClass("contentcolumn-default-margin-right").addClass("contentcolumn-margin-right-on-right-sidebar-show");$(".rightcolumn",".saved-reports").removeClass("sidebar-default-width").removeClass("sidebar-right-default-margin-left").addClass("sidebar-width-on-show").addClass("sidebar-right-margin-left-on-show");
b.updatePageView()},callBackFunctionOnHide:function(){$(".contentcolumn",".saved-reports").removeClass("contentcolumn-margin-right-on-right-sidebar-show").addClass("contentcolumn-default-margin-right");$(".rightcolumn",".saved-reports").removeClass("sidebar-width-on-show").removeClass("sidebar-right-margin-left-on-show").addClass("sidebar-default-width").addClass("sidebar-right-default-margin-left");b.updatePageView()},autoHeight:!0,autoHeightMargin:$("#main-navbar").outerHeight(!0)})},hideRightSideBar:function(){$(".contentcolumn",
".saved-reports").removeClass("contentcolumn-default-margin-right").addClass("contentcolumn-margin-right-on-empty-right-sidebar");$(".rightcolumn",".saved-reports").hide()},showRightSideBar:function(){$(".contentcolumn",".saved-reports").addClass("contentcolumn-default-margin-right").removeClass("contentcolumn-margin-right-on-empty-right-sidebar");$(".rightcolumn",".saved-reports").show()},manipulateDOMObjects:function(){this.element.find("button").button();this.element.find(".comment-text").hint("Add your comments here");
this.$centerContainer.hide();this.$bookletViewContainer.hide()},initReportAndBookletModels:function(){this.reportDefnInfoList=new Sentrana.Models.ReportDefinitionInfoList({asc:this.options.sortAsc,field:this.options.sortField},this.options.app);this.booklets=new Sentrana.Models.Booklets({attrs:{asc:this.options.sortAsc,field:this.options.sortField},app:this.options.app});this.options.app.bookletDefinModel=new Sentrana.Models.BookletDefin({app:this.options.app});this.savedReportViewController=this.options.app.BookletViewController=
void 0;this.options.app.booklets=this.booklets;this.options.app.reportDefnInfoList=this.reportDefnInfoList},initReportAndBookletControllers:function(){this.$filmstripContainer.control()&&this.$filmstripContainer.sentrana_filmstrip("destroy");this.options.app.filmstripController=this.$filmstripContainer.sentrana_filmstrip({app:this.options.app}).control();var a=this,b=this.$savedReports.sentrana_collapsible_container({title:"Saved Reports",showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},
callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();this.savedReportsController=$(b).sentrana_report_definition_info_list({app:this.options.app,reportDefnInfoListModel:this.reportDefnInfoList}).control();b=this.$savedBooklets.sentrana_collapsible_container({title:"Saved Booklets",showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();
this.savedBookletsController=$(b).sentrana_booklet_definition_info_list({app:this.options.app,bookletsModel:this.booklets}).control();this.options.app.savedReportsController=this.savedReportsController},initReportAndBookletComponents:function(){this.initReportAndBookletModels();this.initReportAndBookletControllers()},init:function(){this.needToUpdateView=!1;this.initDOMObjects();this.initReportAndBookletComponents();this.initDialogs();this.manipulateDOMObjects();var a=this.initLeftSideBar(280,this),
b=this.initRightSideBar(280,this);a.show();b.show();this.options.app.unBlockMain();this.startGetSharingUpdate()}," show_shared_report":function(){if(this.options.app.sharedInfo&&"report"===this.options.app.sharedInfo.type){var a=this.element.find(".report-entry[report-id = '"+this.options.app.sharedInfo.id+"']");this.clearExternalLinkInfo();setTimeout(function(){a.find(".report-entry-table").click()},500)}}," show_shared_booklet":function(){if(this.options.app.sharedInfo&&"booklet"===this.options.app.sharedInfo.type){var a=
this.element.find(".booklet-entry[booklet-id = '"+this.options.app.sharedInfo.id+"']");this.clearExternalLinkInfo();setTimeout(function(){a.find(".booklet-entry-table").click()},500)}},clearExternalLinkInfo:function(){this.options.app.sharedInfo=null;this.options.app.externalLink=null},startGetSharingUpdate:function(){this.options.app.clearSharingUpdateTimer();this.options.app.sharingUpdate=window.setInterval(this.proxy(this.initPeriodicServerCall),1E3*window.app_resources.UPDATE_SHARING_INFORMATION_IN_SECONDS)},
initPeriodicServerCall:function(){if(!this.sharedReportBookletListUpdating){var a=this,b=this.options.app.retrieveUserInfo();b&&$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("GetSharingUpdate/"+b.userID),type:"GET",dataType:"json",headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID}}).done(function(b){a.updateReportBookletList(b)}).error(function(){})}},updateReportBookletList:function(a){if(0<a.length){this.sharedReportBookletListUpdating=
!0;this.reportBookletSharingInfo=a;this.reportSharingInfo=this.getUpdatedSharedItem(a,"REPORT");this.bookletSharingInfo=this.getUpdatedSharedItem(a,"BOOKLET");for(var a="",b=0;b<this.reportSharingInfo.length;b++)a+=this.reportSharingInfo[b].senderFullName+" has shared a report with you</br>";for(b=0;b<this.bookletSharingInfo.length;b++)a+=this.bookletSharingInfo[b].senderFullName+" has shared a booklet with you</br>";this.element&&this.element.find(".notification-sharing-updates").fadeIn().find(".notification").html(a)}},
getUpdatedSharedItem:function(a,b){return $.grep(a,function(a){return a.objectType===b})},".notification-sharing-updates .link-shared-report-booklet click":function(){this.element.find(".notification-sharing-updates").fadeOut();0<this.reportSharingInfo.length&&this.options.app.blockElement(this.element.find(".saved-reports-list"),'<div class="loading"><p class="small-waitingwheel"><img src="images/loader-white.gif"/></p></div>');0<this.bookletSharingInfo.length&&this.options.app.blockElement(this.element.find(".saved-booklets-list"),
'<div class="loading"><p class="small-waitingwheel"><img src="images/loader-white.gif"/></p></div>');this.updateReportList();this.updateBookletList();this.clearSharingInfoCache();this.clearCenterPanelforBooklet()},clearSharingInfoCache:function(){var a=this,b=this.options.app.retrieveUserInfo();b&&$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("ClearSharingInfoCache/"+b.userID),type:"GET",dataType:"json",headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID}}).done(function(){a.sharedReportBookletListUpdating=
!1}).error(function(){})},updateReportList:function(){this.reportDefnInfoList.getSavedReports()},updateBookletList:function(){this.booklets.getSavedBooklets()}," report_list_updated":function(){this.options.app.unBlockElement(this.element.find(".saved-reports-list"));this.reportListUpdated=!0}," booklet_list_updated":function(){this.options.app.unBlockElement(this.element.find(".saved-booklets-list"));this.bookletListUpdated=!0},redirectToBuilderPage:function(){!this.reportDefnInfoList.count&&!this.booklets.count&&
this.options.app.routeControl.updateRoute("bldr")},update:function(a){this._super(a);this.needToUpdateView&&(this.updatePageView(),this.needToUpdateView=!1)},updatePageView:function(){this.updateFilmstripView();this.options.app.BookletViewController&&this.options.app.BookletViewController.updateGridChartView();this.savedReportViewController&&this.savedReportViewController.updateView()}," refresh_booklet_report":function(a,b,c){this.options.app.bookletController&&this.options.app.bookletController.refreshReports(c)},
" update_booklet_reports":function(){this.options.app.bookletController&&this.options.app.bookletController.updateSavedReports()}," report_added_to_booklet":function(a,b,c){this.options.app.bookletController&&this.options.app.bookletController.addNewReport(c)}," addEditbutton_to_bookletView":function(){this.options.app.BookletViewController&&(this.options.app.BookletViewController.options&&(this.options.app.BookletViewController.options.showEdit=!0),this.options.app.BookletViewController.addEditButton())},
" copy_booklet":function(a,b,c){this.copyBookletDlg.open(c)}," share_booklet":function(a,b,c){this.shareBookletDlg.open(c)},bookletCopied:function(a){this.savedBookletsController&&(this.savedBookletsController.options.bookletsModel.addBooklet(a),this.clearCenterPanelforBooklet())},updateFilmstripView:function(){this.options.app.filmstripController&&this.options.app.filmstripController.showHideNextPrevNavigator()}," chart_failed":function(){return!1},changeReportIcon:function(a){var b=this.element.find(".report-entry[report-id='"+
a.id+"']").find(".report-entry-icon").find("img.icon-file"),c=this.options.app.retrieveUserInfo();a.shared?a.createUser===c.fullName?$(b).attr("src","images/report_shared.png"):a.createUser!==c.fullName&&$(b).attr("src","images/report_received.png"):$(b).attr("src","images/report_base.png")},changeBookletIcon:function(a){var b=this.element.find(".booklet-entry[booklet-id='"+a.id+"']").find(".booklet-entry-icon").find("img.icon-file"),c=this.options.app.retrieveUserInfo();a.shared?a.createUser===c.fullName?
$(b).attr("src","images/booklet_shared.png"):a.createUser!==c.fullName&&$(b).attr("src","images/booklet_received.png"):$(b).attr("src","images/booklet_base.png")}," edit_booklet":function(a,b,c){this.options.app.BookletViewController&&!this.options.app.BookletViewController._destroyed&&(this.options.app.BookletViewController.destroy(),this.options.app.BookletViewController=void 0);this.$bookletView.control()&&(this.$bookletView.control().destroy(),this.$bookletView.html(""));this.options.app.bookletController=
$(".booklet-composition-panel-container").sentrana_booklet_composition({app:this.options.app,bookletDefinModel:this.options.app.bookletDefinModel,bookletModel:c,showEdit:!0}).control()}," clear_center_panel":function(a,b,c){this.clearCenterPanelforBooklet(c)},clearCenterPanelforBooklet:function(a){this.viewingReport&&this.viewingReport.isViewing(!1);this.$centerContainer&&(this.$centerContainer.hide(),this.$bookletViewContainer.hide());this.$bookletCompositionContainer.show();this.$commentStream.control()&&
this.$commentStream.sentrana_comment_stream("destroy");this.$commentStream.hide();this.options.app.bookletController&&this.options.app.bookletController.destroyThisController();this.options.app.BookletViewController&&this.options.app.BookletViewController.destroy();this.options.app.resetFilmstrip();this.hideRightSideBar();a&&(a=this.element.find(".report-entry"),a.removeClass("report-entry-selected"),a.find(".menu .item").removeClass("item-selected"),a.find(".menu").hide(),a.find(".report-details").hide(),
a=this.element.find(".booklet-entry"),a.removeClass("booklet-entry-selected"),a.find(".booklet-menu .item").removeClass("item-selected"),a.find(".booklet-menu").hide(),a.find(".booklet-details").hide())}," hide_report":function(){this.viewingReport&&this.viewingReport.isViewing(!1);this.$savedReportViewerContainer.control()&&(this.$savedReportViewerContainer.sentrana_report_view("destroy"),this.$savedReportViewerContainer.empty());this.$centerContainer&&this.$centerContainer.hide();this.savedReportViewController=
void 0}," view_report":function(a,b,c){a={ActionName:Sentrana.ActionLog.ActionNames.ViewReport,Context:Sentrana.ActionLog.Contexts.SavedReport,ElementType:Sentrana.ActionLog.ElementTypes.Report,ElementId:c.id};if((b=this.options.app.retrieveUserInfo())&&b.userID!==c.createUserId)a.Context=Sentrana.ActionLog.Contexts.SharedReport;this.options.app.writeActionLog(a);this.viewingReport&&this.viewingReport.isViewing(!1);this.viewingReport=c;this.viewingReport.isViewing(!0);this.$centerContainer.show();
this.$bookletViewContainer.hide();this.options.app.resetFilmstrip();this.$savedReportViewerContainer.control()&&(this.$savedReportViewerContainer.sentrana_report_view("destroy"),this.$savedReportViewerContainer.empty());this.savedReportViewController=this.$savedReportViewerContainer.sentrana_report_view({app:this.options.app,showFilters:!0,showExport:!0,showPrint:!0,showChartOptions:!0,reportDefinitionInfoModel:c}).control();this.savedReportViewController.setTitle("Report Title: ",c.name+" - by "+
c.createUser);this.savedReportViewController.viewReport(c);this.$rightBar.show()}," show_comment_stream":function(a,b,c){null===c||!c?this.hideRightSideBar():this.showRightSideBar();this.$commentStream.control()&&this.$commentStream.sentrana_comment_stream("destroy");c?(this.$rightBar.show(),this.$commentStream.show(),this.$commentStream.sentrana_comment_stream({app:this.options.app,commentStreamModel:c.getCommentStream()})):this.$commentStream.hide()}," edit_report":function(a,b,c){this.viewingReport&&
this.viewingReport.id===c.id&&(this.element.trigger("hide_report",c),this.element.find('.report-entry[report-id="'+c.id+'"]').children(".menu").children('span[action="view"]').removeClass("item-selected"));this.options.app.switchToPage("bldr","edit_report",c)}," duplicate_report":function(a,b,c){this.duplicateRptDlg.open(c)}," delete_report":function(a,b,c){this.deleteRptDlg.open(c)}," delete_booklet":function(a,b,c){this.deleteBookletDlg.open(c)}," rdi:destroyed":function(a,b,c){this.viewingReport&&
this.viewingReport.id===c&&(this.viewingReport=null,this.$centerContainer.hide(),this.$rightBar.hide())}," booklet:destroyed":function(){this.clearCenterPanelforBooklet()}," hide_booklet":function(){this.$bookletViewContainer.hide();this.options.app.resetFilmstrip();this.options.app.BookletViewController=void 0}," view_booklet":function(a,b,c){this.options.app.blockElement(this.$bookletView,'<div class="loading"><p class="small-waitingwheel"><img src="images/loader-white.gif"/></p></div>');a={ActionName:Sentrana.ActionLog.ActionNames.ViewBooklet,
Context:Sentrana.ActionLog.Contexts.SavedBookLet,ElementType:Sentrana.ActionLog.ElementTypes.Booklet,ElementId:c.id};if((b=this.options.app.retrieveUserInfo())&&b.userID!==c.createUserId)a.Context=Sentrana.ActionLog.Contexts.SharedBooklet;this.options.app.writeActionLog(a);this.$centerContainer.hide();this.$bookletCompositionContainer.hide();this.$bookletViewContainer.show();this.$bookletView.control()&&(this.$bookletView.control().destroy(),this.$bookletView.html(""));this.options.app.BookletViewController&&
!this.options.app.BookletViewController._destroyed&&(this.options.app.BookletViewController.destroy(),this.options.app.BookletViewController=void 0);this.options.app.bookletDefinModel.setBookletDefinition(c);this.options.app.BookletViewController=this.$bookletView.sentrana_booklet_view({app:this.options.app,bookletDefinModel:this.options.app.bookletDefinModel,titleCls:"report-definition-header-bar"}).control();this.$rightBar.show()},"{window} resize":function(){}," print_closed":function(){$("#bldr").control()&&
($("#bldr").control().needToUpdateView=!0)}});steal.executed("js/controllers/SavedReportsPageController.js");
can.Control.extend("Sentrana.Controllers.DWSelector",{pluginName:"sentrana_dw_selector",defaults:{dwChoicesModel:null}},{init:function(){$("html,body").attr("style","height:auto");this.$dwSelectorContainer=$(".dw-selector");this.$loginMsg=$(".ahrc-action-msg");this.updateView();this.options.dwChoicesModel.attr("choices")||this.$dwList.hide()},update:function(a){this._super(a);this.updateView()},updateView:function(){this.$dwSelectorContainer.show();this.element.html(can.view("templates/dw-selector.ejs",
this.options.dwChoicesModel));this.$loginDWSelectorHeader=this.element.find(".login-dw-selector-header");this.$accessBtn=this.element.find(".login-dw-selector-access-button");this.$dwList=this.element.find(".login-dw-selector-dwlist");this.$dwSelector=this.element.find(".login-dw-selector");this.$dwSelectorBarSpan=this.element.find(".login-dw-selector span");if(this.options.dwChoicesModel.attr("choices")){if(0>=this.options.dwChoicesModel.choices.length){var a=this,b=this.options.app.retrieveUserInfo();
this.repositoryNotFoundModal||Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.repository.not_found.dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.repository.not_found.dialog_msg,b.userName),function(){a.options.app.loginController.logout();a.repositoryAccessModal=!1});this.repositoryNotFoundModal=!0;this.$loginDWSelectorHeader.hide();this.$accessBtn.hide();return}this.options.dwChoicesModel.attr("selectedID")||((b=this.getRepositoryFromCookie())?(this.options.dwChoicesModel.attr("selectedID",
b.repositoryID),this.options.dwChoicesModel.attr("selectedName",b.repositoryName)):(this.options.dwChoicesModel.attr("selectedID",this.options.dwChoicesModel.choices[0].oid),this.options.dwChoicesModel.attr("selectedName",this.options.dwChoicesModel.choices[0].name)));this.$dwSelectorBarSpan.text(this.options.dwChoicesModel.selectedName);this.$dwSelectorBarSpan.attr("title",this.options.dwChoicesModel.selectedName);this.$accessBtn.show();this.$dwSelector.show();this.$accessBtn.button();this.$accessBtn.focus();
this.options.dropdownOnly||(this.options.app.sharedInfo?(this.options.dwChoicesModel.attr("selectedID",this.options.app.sharedInfo.repository),this.element.trigger("repository_selected",this.options.dwChoicesModel)):1===this.options.dwChoicesModel.choices.length&&this.element.trigger("repository_selected",this.options.dwChoicesModel))}else this.$loginDWSelectorHeader.hide(),this.$accessBtn.hide();this.options.dropdownOnly&&(this.$loginDWSelectorHeader.hide(),this.$accessBtn.hide(),this.options.dwChoicesModel.choices&&
1===this.options.dwChoicesModel.choices.length&&this.$dwSelector.css("cursor","default"))},getRepositoryFromCookie:function(){if(!this.options.app)return!1;var a,b,c=this.options.app.retrieveRepositoryInfo();c&&(a=c.repositoryID,b=c.repositoryName);return!a||!b||0>=a.length||0>=b.length?!1:{repositoryID:a,repositoryName:b}},hasPreviousSelection:function(){return this.options.dwChoicesModel.previousID&&this.options.dwChoicesModel.previousName&&0<this.options.dwChoicesModel.previousID.length&&0<this.options.dwChoicesModel.previousName.length?
!0:!1},resetSelectedDw:function(){this.options.app&&!this.options.app.repositoryChanged&&this.hasPreviousSelection&&(this.$dwSelectorBarSpan.text(this.options.dwChoicesModel.previousName),this.$dwSelectorBarSpan.attr("title",this.options.dwChoicesModel.previousName),this.options.dwChoicesModel.attr("selectedID",this.options.dwChoicesModel.previousID),this.options.dwChoicesModel.attr("selectedName",this.options.dwChoicesModel.previousName),this.options.dwChoicesModel.previousID=this.options.dwChoicesModel.attr("selectedID"),
this.options.dwChoicesModel.previousName=this.options.dwChoicesModel.attr("selectedName"),this.options.app.saveRepository(this.options.dwChoicesModel.selectedID,this.options.dwChoicesModel.selectedName))},".login-dw-selector-access-button click":function(){this.element.trigger("repository_selected",this.options.dwChoicesModel)},".login-dw-selector change":function(a){var b=$("option:selected",a),c=$(b).attr("value"),b=$(b).text();c===this.options.dwChoicesModel.attr("selectedID")?this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.RepositoriesAccessed,
Context:Sentrana.ActionLog.Contexts.BuilderPage,ElementType:Sentrana.ActionLog.ElementTypes.Repository,ElementId:a.attr("elementID")}):(this.options.dwChoicesModel.attr("selectedID",c),this.options.dwChoicesModel.attr("selectedName",b),this.options.dropdownOnly&&can.trigger(this.element,"DWSelectionChanged",{oid:c,name:b}))},"{dwChoicesModel} change":function(a,b,c,d,e,h){switch(c){case "choices":this.$loginMsg.hide();this.updateView();this.$loginDWSelectorHeader.show();break;case "selectedName":this.options.dwChoicesModel.previousName=
h;break;case "selectedID":this.options.dwChoicesModel.previousID=h}}});steal.executed("js/controllers/DWSelectorController.js");can.Observe.extend("Sentrana.Models.Choices",{},{init:function(){this.setup({choices:null,selectedID:null,selectedName:null})}});steal.executed("js/observes/ChoicesObserve.js");
can.Construct("Sentrana.FirstLook",{AppState:new can.Observe({sessionOpen:null,closeSessionReason:null,createFilteredMetricMode:!1,currentNotification:null}),openSession:function(){this.AppState.attr("sessionOpen",!0)},closeSession:function(a){this.AppState.attr("closeSessionReason",a);this.AppState.attr("sessionOpen",!1)},createFilteredMetricMode:function(a){this.AppState.attr("createFilteredMetricMode",a)},setCurrentNotification:function(a){this.AppState.attr("currentNotification",{msg:a,timestamp:+new Date})},
setCurrentNotificationWithTimeAndPosition:function(a,b,c){this.AppState.attr("currentNotification",{msg:a,timeStamp:b,position:c})}},{});steal.executed("js/constructs/FirstLook.js");
Sentrana.Controllers.FilterControl("Sentrana.Controllers.FilterGroup",{pluginName:"sentrana_filter_group",defaults:{}},{init:function(){this.buildElementsUI()},buildElementsUI:function(){this.renderFilterCheckBoxes($.extend([],this.options.savedFilters))},renderFilterCheckBoxes:function(a){var b=this;can.view("templates/filterCheckbox.ejs",{objects:a,totoalCount:a.length},function(a){b.element.append(a)})},".object-selector change":function(a){$(a).is(":checked")?this.selectFilterElement(a):this.deSelectFilterElement(a)}});
steal.executed("js/controllers/FilterGroupController.js");
Sentrana.Controllers.FilterControl("Sentrana.Controllers.FilterControlCheckbox",{pluginName:"sentrana_filter_control_checkbox",defaults:{}},{init:function(){this._super()},buildElementsUI:function(){this.renderFilterCheckBoxes($.extend([],this.options.form.elements));this.element.trigger("filter_rendered",this.options.attr.dimName)},searchElements:function(a){var b=$(a).val();this.element.find(".object-selector-wrapper").children("label").each(function(){var a=$(this);-1<a.text().toLowerCase().indexOf(b.toLowerCase())?
a.parent().show():a.parent().hide()})},renderFilterCheckBoxes:function(a){this.$filterControl.append(can.view("templates/filterCheckbox.ejs",{objects:a,totalCount:a.length}))},".object-selector change":function(a){$(a).is(":checked")?this.selectFilterElement(a):this.deSelectFilterElement(a)}});steal.executed("js/controllers/FilterControlCheckboxController.js");
Sentrana.Controllers.FilterControl("Sentrana.Controllers.FilterControlTree",{pluginName:"sentrana_filter_control_tree",defaults:{}},{init:function(){this._super()},buildElementsUI:function(){for(var a=this,b=[],c=this.options.form,d=0;d<c.elements.length;d++)b.push(a.genNodeHTML(!0,c.elements[d].oid,c.elements[d].name));this.$filterControl.jstree({plugins:["ui","crrm","hotkeys","search"],core:{themes:{icons:!1},data:function(c,d){"#"==c.id?d.call(this,b.join("\r\n")):"undefined"!=c.li_attr&&$.ajax({type:"POST",
url:Sentrana.Controllers.BIQController.generateUrl("GetChildElements"),dataType:"json",contentType:"application/json",data:JSON.stringify({oid:c.li_attr.oid}),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:function(b){for(var f=[],i=0;i<b.length;i++)f.push(a.genNodeHTML(b[i].hasChildren,b[i].oid,b[i].name));a.element.trigger("filter_rendered",a.options.attr.dimName);d.call(c.id,f.join("\r\n"))}})}}}).bind("loaded.jstree",
function(){}).bind("search.jstree",function(){})},genNodeHTML:function(a,b,c){var d="",e=this.options.dwRepository.isTreeFilter(b);this.options.dwSelection.attr(e.hid)&&(d=" object-selected tree-node-selected");return'<li title="'+c+'" class="'+(a?"jstree-closed":"")+'" id="'+e.hid+'" + oid="'+b.replace('"',"&quot")+'"><a hid="'+e.hid+'" class="tree-node-selector'+d+'" href="#">'+c+"</a></li>"},searchElements:function(a,b){1!=$(a).val().length&&(13==b.keyCode?this.$filterControl.jstree("search",$(a).val(),
!1):this.$filterControl.jstree("search",$(a).val(),!0))},addTreeFilter:function(a){this.options.dwRepository.getObjectByOID($(a).parent().attr("oid"),!0);this.selectFilterElement(a)},".tree-node-selector click":function(a){this.addTreeFilter(a)}});steal.executed("js/controllers/FilterControlTreeController.js");
Sentrana.Controllers.FilterControl("Sentrana.Controllers.FilterControlListBox",{pluginName:"sentrana_filter_control_list_box",defaults:{listBoxWidth:200}},{init:function(){this._super()},buildElementsUI:function(){var a=this.options.form;this.$filterControl.append('<select class="element-filter-listbox form-control" size="10" multiple="multiple"></select>');this.$filterControl.append('<select class="element-filter-listbox-source" size="10" style="display: none" multiple="multiple"></select>');for(var b=
0;b<a.elements.length;b++)$(".element-filter-listbox",this.$filterControl).append(can.view("templates/filterListBoxOption.ejs",{name:a.elements[b].name,hid:a.elements[b].hid})),$(".element-filter-listbox-source",this.$filterControl).append(can.view("templates/filterListBoxOption.ejs",{name:a.elements[b].name,hid:a.elements[b].hid}));this.addEventHandler();this.element.trigger("filter_rendered",this.options.attr.dimName)},searchElements:function(a){var b=this,c=$(a).val();$(".element-filter-listbox",
this.$filterControl).html("");$.each($(".element-filter-listbox-source option",this.$filterControl),function(a,e){var h=$(e).text();(""===c||-1<h.toLowerCase().indexOf(c.toLowerCase()))&&$(".element-filter-listbox",b.$filterControl).append(can.view("templates/filterListBoxOption.ejs",{name:$(e).val(),hid:$(e).attr("hid")}))})},addFilter:function(){var a=this;$.each($(".element-filter-listbox option:not(:selected)",this.$filterControl),function(b,c){a.deSelectFilterElement($(c))});$.each($(".element-filter-listbox option:selected",
this.$filterControl),function(b,c){a.selectFilterElement($(c))})},addEventHandler:function(){var a=this;$(".element-filter-listbox",this.$filterControl).on("change",function(){a.addFilter()})}});steal.executed("js/controllers/FilterControlListBoxController.js");
Sentrana.Controllers.FilterControl("Sentrana.Controllers.FilterControlCalendar",{pluginName:"sentrana_filter_control_calendar",defaults:{}},{init:function(){this.rangeIndex=0;this.dateFormat="mm/dd/yy";this.dateFormatCaptionText="mm/dd/yyyy";this._super();this.rangeList={};this.updateRangeMode=!1;this.element.find(".accordion-search").hide()},buildElementsUI:function(){this.$filterControl.append(can.view("templates/filterCalendarContainer.ejs",{dateFormat:this.dateFormatCaptionText,hid:this.options.form.hid}));
$(".date-range-list",this.$filterControl).append(can.view("templates/filterCalendar.ejs",{index:this.rangeIndex}));this.initCalendarControl();this.showHideDateFormatCaption()},showHideDateFormatCaption:function(){0<$(".date-range-list",this.$filterControl).children(".filterCalendarContainer").length?this.$filterControl.children(".dateformat").css("display","block"):this.$filterControl.children(".dateformat").css("display","none")},".element-filter-calendar-from change":function(a){var b=a[0].value,
c=!0;try{$.datepicker.parseDate(this.dateFormat,b)?this.handleFromDateChange(b,a[0]):c=!1}catch(d){c=!1}c||(a[0].value="",this.removeRangeFilter(a[0]))},".element-filter-calendar-to change":function(a){var b=a[0].value,c=!0;try{$.datepicker.parseDate(this.dateFormat,b)?this.handleToDateChange(b,a[0]):c=!1}catch(d){c=!1}c||(a[0].value="",this.removeRangeFilter(a[0]))},".hasDatepicker keypress":function(a){if(13===event.keyCode)return $(a,this.$filterControl).datepicker().focus(),this.toggleDatePickerVisibility(a),
!1;$(a,this.$filterControl).datepicker("show");return!0},toggleDatePickerVisibility:function(a){$(a,this.$filterControl).datepicker("widget").is(":visible")?$(a,this.$filterControl).datepicker("hide"):$(a,this.$filterControl).datepicker("show")},initCalendarControl:function(){var a=this;$(".element-filter-calendar-from",this.$filterControl).datepicker({changeMonth:!0,changeYear:!0,yearRange:"c-20:c+20",onSelect:function(b){a.handleFromDateChange(b,this);$(this,this.$filterControl).datepicker("hide")},
beforeShow:function(){$("#ui-datepicker-div").hover(function(){a.showDockablePanel()})}});$(".element-filter-calendar-to",this.$filterControl).datepicker({changeMonth:!0,changeYear:!0,yearRange:"c-20:c+20",onSelect:function(b){a.handleToDateChange(b,this);$(this,this.$filterControl).datepicker("hide")},beforeShow:function(){$("#ui-datepicker-div").hover(function(){a.showDockablePanel()})}})},showDockablePanel:function(){$(".dockablePanel-right").is(":visible")||$(".dockablePanel-right").show(400)},
removeRangeFilter:function(a){this.options.dwSelection.deselectObject(this.rangeList[$(a).attr("index")]);this.showHideDateFormatCaption()},handleToDateChange:function(a,b){var c=$(b).attr("index"),d=this.generateValidFromDate(a,c);d&&this.createOrUpdateFilter(c,d,a);$(b)[0].value=a;$(".element-filter-calendar-from[index="+c+"]",this.$filterControl).datepicker("option","maxDate",a);$(".element-filter-calendar-from[index="+c+"]",this.$filterControl).datepicker("setDate",d)},handleFromDateChange:function(a,
b){var c=$(b).attr("index"),d=this.generateValidToDate(a,c),e=this.options.dwRepository.objectMap[this.rangeList[c]];d&&e?this.updateFilter(c,a,d):d&&this.createOrUpdateFilter(c,a,d);$(b)[0].value=a;$(".element-filter-calendar-to[index="+c+"]",this.$filterControl).datepicker("option","minDate",a);$(".element-filter-calendar-to[index="+c+"]",this.$filterControl).datepicker("setDate",d)},generateValidFromDate:function(a,b){var c=$.datepicker.formatDate(this.dateFormat,$(".element-filter-calendar-from[index="+
b+"]",this.$filterControl).datepicker("getDate"));c&&new Date(a)<new Date(c)&&(c=a);return c},generateValidToDate:function(a,b){var c=$.datepicker.formatDate(this.dateFormat,$(".element-filter-calendar-to[index="+b+"]",this.$filterControl).datepicker("getDate"));c&&new Date(c)<new Date(a)&&(c=a);return c},createOrUpdateFilter:function(a,b,c){var d=this.getOid(b,c),d=this.getHid(a,d),e=this.options.dwRepository.createRangeFilter(this.options.attr.hid,this.options.attr.dimName,this.options.form.oid,
d,a,b,c);this.rangeList[a]?this.updateFilter(a,b,c):(this.rangeList[a]=d,this.options.dwRepository.objectMap[e.hid]=e,this.options.dwSelection.selectObject(e.hid))},getCalendarTextDate:function(a){return $.datepicker.formatDate(this.dateFormat,a.datepicker("getDate"))},updateFilter:function(a,b,c){this.updateRangeMode=!0;var d=this.options.dwRepository.objectMap[this.rangeList[a]];this.options.dwSelection.deselectObject(this.rangeList[a]);this.updateRangeMode=!1;var e=this.getOid(b,c),h=this.getHid(a,
e);this.options.dwRepository.objectMap[h]=d;this.options.dwRepository.objectMap[h].name=b+" - "+c;this.options.dwRepository.objectMap[h].oid=e;this.rangeList[a]=h;this.options.dwSelection.selectObject(h)},getOid:function(a,b){return this.options.form.oid+":"+a+"--"+b},getHid:function(a,b){return"hid_"+a+"_"+b.replace(/[^a-zA-Z0-9]/g,"")},".calendar-add-additional-range click":function(){this.rangeIndex++;$(".date-range-list",this.$filterControl).append(can.view("templates/filterCalendar.ejs",{index:this.rangeIndex}));
this.initCalendarControl();this.showHideDateFormatCaption()},".date-range-close-container click":function(a){var a=$(a).closest(".filterCalendarContainer"),b=a.find(".element-filter-calendar-from"),c=a.find(".element-filter-calendar-to"),c=this.getOid(this.getCalendarTextDate(b),this.getCalendarTextDate(c));this.options.dwSelection.deselectObject(this.getHid(b.attr("index"),c));a.remove();this.showHideDateFormatCaption()},"{dwSelection} change":function(a,b,c,d){if(b=/^(.*)_(\d*)_([a-zA-z]*)(\d*)$/.exec(c)){var a=
parseInt(b[2],10),e=this.options.form.oid.replace(/[^a-zA-Z0-9]/g,"");if(b[3]!=e)return;if("add"===d)this.rangeList[a]||(d=/(\w*)\:(.{10})\-\-(.{10})$/,b=this.options.dwRepository.objectMap[c].oid,c=d.exec(b)[2],d=d.exec(b)[3],$(".date-range-list",this.$filterControl).append(can.view("templates/filterCalendar.ejs",{index:a})),this.initCalendarControl(),b=this.$filterControl.find(".element-filter-calendar-from[index="+a+"]","."+this.options.form.hid),e=this.$filterControl.find(".element-filter-calendar-to[index="+
a+"]","."+this.options.form.hid),b.datepicker("setDate",c),e.datepicker("setDate",d),this.createOrUpdateFilter(a,c,d),this.rangeIndex=a+1);else if("remove"===d){if(this.updateRangeMode)return;this.$filterControl.find(".element-filter-calendar-from[index="+a+"]","."+this.options.form.hid).closest(".filterCalendarContainer").remove()}}this.showHideDateFormatCaption()}});steal.executed("js/controllers/FilterControlCalendarController.js");
can.Control.extend("Sentrana.Controllers.UserOptions",{pluginName:"sentrana_user_options",defaults:{app:null}},{init:function(){},update:function(a){this._super(a)},".user-options-item click":function(a){this.element.trigger("UserSelectionChanged",{action:a.attr("action")});return!1}});steal.executed("js/controllers/UserOptionsController.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.ChangePassword",{defaults:{width:358}},{init:function(){this._super([{text:"OK"},"CANCEL"],100);this.$currentPwd=this.element.find(".current-password");this.$newPwd=this.element.find(".new-password");this.$newPwdConfirm=this.element.find(".new-password-confirm");this.$lblCurrentPwd=this.element.find(".lbl-current-password");this.$lblPasswordExpireInfo=this.element.find(".tr-password-expire-info");this.element.dialog(this.getDialogOptions());this.removeExInCorner()},
closeDialog:function(){this._super()},handleOK:function(){this.currentPassword=this.$currentPwd.val();this.newPassword=this.$newPwd.val();this.newPasswordConfirm=this.$newPwdConfirm.val();var a=Sentrana.getMessageText(window.app_resources.app_msg.change_password.empty_password_msg),b=Sentrana.getMessageText(window.app_resources.app_msg.change_password.password_not_match_msg);if(0===this.currentPassword.length||0===this.newPassword.length||0===this.newPasswordConfirm.length)this.updateStatusBar(!1,
a,"fail");else if(this.newPasswordConfirm!=this.newPassword)this.updateStatusBar(!1,b,"fail");else{var c=Sentrana.getMessageText(window.app_resources.app_msg.change_password.error_msg),d=Sentrana.getMessageText(window.app_resources.app_msg.change_password.success_msg),e=Sentrana.getMessageText(window.app_resources.app_msg.change_password.wrong_current_password_msg),h=Sentrana.getMessageText(window.app_resources.app_msg.change_password.same_password_msg),g=Sentrana.getMessageText(window.app_resources.app_msg.change_password.empty_new_password_msg),
f=Sentrana.getMessageText(window.app_resources.app_msg.change_password.invalidPasswordformateMessage),i=Sentrana.getMessageText(window.app_resources.app_msg.change_password.passwordPolicyViolatedMessage),j=this;$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("ChangePassword"),type:"POST",contentType:"text/json",data:JSON.stringify({userName:j.userInfo.userName,currentPassword:this.currentPassword,newPassword:this.newPassword,isExpired:j.isPasswordExpired}),async:!0,success:function(){j.enableButton("OK",
!1);j.enableButton("CANCEL",!1);j.updateStatusBar(!0,d);setTimeout(function(){j.closeDialog();j.options.app.logout()},3E3)},error:function(a){a=a.getResponseHeader("ErrorCode");a==Sentrana.Enums.ErrorCode.WRONG_PASSWORD?j.updateStatusBar(!1,e,"fail"):a==Sentrana.Enums.ErrorCode.PREVIOUSLY_USED_PASSWORD?j.updateStatusBar(!1,h,"fail"):a==Sentrana.Enums.ErrorCode.PASSWORD_CANNOT_BE_EMPTY?j.updateStatusBar(!1,g,"fail"):a==Sentrana.Enums.ErrorCode.PASSWORD_FORMAT_IS_INVALID?j.updateStatusBar(!1,f,"fail"):
a==Sentrana.Enums.ErrorCode.PASSWORD_POLICY_VIOLATED?j.updateStatusBar(!1,i,"fail"):j.updateStatusBar(!1,c,"fail")}})}},open:function(a,b){this.userInfo=a;this.isPasswordExpired=b;this.$currentPwd.val("");this.$newPwd.val("");this.$newPwdConfirm.val("");this.$lblPasswordExpireInfo[this.isPasswordExpired?"show":"hide"]();this.enableButton("OK",!0);this.enableButton("CANCEL",!0);this.openDialog()}});steal.executed("js/controllers/ChangePasswordDialog.js");
Sentrana.Controllers.CollapsibleContainer("Sentrana.Controllers.SideBarCollapsibleContainer",{pluginName:"sentrana_side_bar_collapsible_container",defaults:{expandIcon:"fa fa-angle-right",collapseIcon:"fa fa-angle-down"}},{init:function(){this.panelTemplate="templates/sideBarCollapsiblePanel.ejs";this.containerButtonTemplate="lib/sentrana/collapsible/templates/collapsibleContainerActionButton.ejs";this.element.append(can.view(this.panelTemplate,{panelTitle:this.options.title}));this.$indicator=this.element.find(".sideBarIndicator");
this.$content=this.element.find(".sideBarCollapsibleContainerContent");this.$buttonBar=this.element.find(".sideBarButtonBar");this.$title=this.element.find(".sideBarCollapsibleContainerTitle");this.buildCollapsiblePanelUI()},".sideBarCollapsibleContainerTitle click":function(){this.showHideCollapsibleContent();if(this.UIState.expanded){var a=this.$content.closest(".scrollable-panel");a.animate({scrollTop:this.$title.offset().top-a.offset().top+a.scrollTop()})}return!1}});steal.executed("js/controllers/SideBarCollapsibleContainerController.js");
can.Control.extend("Sentrana.Controller.CompositeRepository",{pluginName:"sentrana_composite_repository",defaults:{app:null,model:null}},{init:function(){this.element.html(can.view("templates/pg-repoman-composite.ejs",{}))}});steal.executed("js/controllers/RepositoryCompositePageController.js");
can.Control.extend("Sentrana.Controller.CreateRepository",{pluginName:"sentrana_create_repository",dataTypeMap:["numeric","string","numeric","numeric","numeric"],defaults:{app:null,model:null}},{init:function(){this.element.html(can.view("templates/pg-repoman-create.ejs",{}));this.jsonUpload=this.xmlUpload=!1;this.$wizard=$("#wizard");$("#wizard").smartWizard({onLeaveStep:this.leaveStepCallBack(this),keyNavigation:!1});$(".button-retrieve-table-list",this.element).button();$(".button-submit-table-list",
this.element).button();$(".button-upload-data").button();$(".button-submit-table-list").button().hide();$(".button-create-xml-repository",this.element).button();$(".button-create-json-repository",this.element).button();$(".button-upload-repository",this.element).button();$(".button-create-new-repository").button();this.review=!1;this.selectedRepos=[];this.repositoryConfig=new Sentrana.Models.RepositoryCreateAttrs;this.metaDataController=$(".table-metadata",this.element).sentrana_handle_metadata({data:this.data,
model:this.repositoryConfig}).control();this.updateView()},leaveStepCallBack:function(a){return function(b){if(3==b.attr("rel")){if($(".input-xml").prop("checked"))return a.xmlUpload=!0,a.createXMLRepository();a.jsonUpload=!0;return a.createJSONRepository()}return!0}},updateView:function(){$(".step1-1").hide();$(".step1-2").hide();$(".step1-3").hide()},showTableList:function(){$(".table-list").empty();$(".table-list").append(can.view("templates/pg-repoman-table-list.ejs",this.DBMetaData))},getColumnID:function(a){return a.replace(/\s/g,
"").replace(/\(/g,"").replace(/\)/g,"")},setUpMetaDataInfo:function(){$(".dw-config").html(can.view("templates/pg-repoman-repository-dw-config.ejs",{dataWarehouse:{connection:this.data[0].tableInfo.connectionInfo,tableInfo:this.data[0].tableInfo}}))},setUpColumnMappingUI:function(){var a=this;$.each(this.data,function(b,c){$.each(c.colInfos,function(b,c){c.className=a.getColumnID(c.title)})});this.metaDataController.update(this.data,[])},generateColMappings:function(){var a=[],b;for(b in this.repositoryConfig.attributes){var c=
this.repositoryConfig.attributes[b];if(c.isLocal&&c.attributeForms&&this.repositoryConfig.forms[c.attributeForms[0]]){var d={title:null,attrDef:null,factDef:null,metricDef:null},e=null,h=null,g=null,f=null,i=null,e=this.getNewAttrDef();e.dimension.name=c.dimension;e.attribute.id=c.rid;e.attribute.name=c.name;e.attribute.desc=c.description;e.attribute.filterControl=c.filterControl;e.attribute.parentAttributeId=c.parent;var j;for(j=0;j<c.attributeForms.length;j++){var k=this.getNewAttrFormDef(),l=this.repositoryConfig.forms[c.attributeForms[j]];
k.id="af"+l.id;k.name=l.name;k.dataType=c.dataType;k.inJoin=l.inJoin;e.attributeForms.push(k)}for(j=0;j<this.repositoryConfig.selectors.length;j++)k=c.dynamicElements[this.repositoryConfig.selectors[j]],k.selected&&(l=this.getNewDynamicElement(),l.selector=j,l.value=k.value,e.dynamicElements.push(l));d.title=c.name;d.attrDef=e;d.factDef=h;d.metricDef=g;d.perMetricDef=f;d.percentTotalMetricDef=i;a.push(d)}}for(var n in this.repositoryConfig.metrics)b=this.repositoryConfig.metrics[n],b.isLocal&&b.facts&&
this.repositoryConfig.forms[b.facts[0]]&&(d={title:null,attrDef:null,factDef:null,metricDef:null},i=f=e=null,h=this.getNewFactDef(),h.fact.id="fact"+b.facts[0],h.fact.name=this.repositoryConfig.forms[b.facts[0]].name,g=this.getNewMetricDef(),g.metric.id=b.rid,g.metric.name=b.name,g.metric.desc=b.description,g.metric.factId="fact"+b.facts[0],g.metric.dataType=b.dataType,g.metric.operation=b.operation,g.metric.formatString=b.formatString,g.metric.metricGroup=this.getColumnID(b.metricGroup),h.metric=
g.metric,d.title=b.name,d.attrDef=e,d.factDef=h,d.metricDef=g,d.perMetricDef=f,d.percentTotalMetricDef=i,a.push(d));for(var o in this.repositoryConfig.compMetrics)n=this.repositoryConfig.compMetrics[o],n.isLocal&&(d={title:null,attrDef:null,factDef:null,metricDef:null},i=f=g=h=e=null,b=this.getNewCompMetricDef(),b.compMetric.id=n.id,b.compMetric.name=n.name,b.compMetric.desc=n.description,b.compMetric.metrics.push(n.metric1Id),n.metric2Id?b.compMetric.metrics.push(n.metric2Id):b.compMetric.metrics.push(""),
b.compMetric.dataType=n.dataType,b.compMetric.formatString=n.formatString,b.compMetric.metricGroup=n.metricGroup,1==n.compType?f=b:i=b,d.title=b.name,d.attrDef=e,d.factDef=h,d.metricDef=g,d.perMetricDef=f,d.percentTotalMetricDef=i,a.push(d));return a},generateTable:function(a){var b=this.getNewTableDef();b.id=a.id;b.databaseId=a.tableID;for(var c=0;c<a.columns.segments.length;c++){var d=a.columns.segments[c];this.repositoryConfig.segments[d.databaseId]&&b.columns.segments.push({id:"af"+d.attributeForm,
databaseId:d.databaseId})}for(c=0;c<a.columns.data.length;c++)d=a.columns.data[c],this.repositoryConfig.data[d.databaseId]&&b.columns.data.push({id:"fact"+d.fact,databaseId:d.databaseId});for(c=0;c<a.joins.length;c++)b.joins.push(this.generateJoin(a.joins[c]));return b},generateJoin:function(a){var b=this.getNewJoinDef();b.joinType=a.joinType;for(var c=0;c<a.conditions.length;c++){var d=this.getNewConditionDef(),e=a.conditions[c];d.comparisonOperator=e.comparisonOperator;var h=this.getNewComparisonDef();
h.lvalue=e.lvalue;h.rvalue=e.rvalue;e.literal?d.literalComparison=h:d.variableComparison=h;b.conditions.push(d)}b.table=this.generateTable(a.table);return b},generateTables:function(){for(var a=[],b=0;b<this.repositoryConfig.baseTables.length;b++){var c=this.repositoryConfig.baseTables[b];c.id||(c=this.repositoryConfig.tables[this.repositoryConfig.baseTables[b]]);c=this.generateTable(c);a.push(c)}return a},getNewTableDef:function(){return{id:"",databaseId:"",columns:{segments:[],data:[]},rootFilter:null,
joins:[]}},getNewJoinDef:function(){return{joinType:0,conditions:[],table:null}},getNewConditionDef:function(){return{comparisonOperator:0,literalComparison:null,variableComparison:null}},getNewComparisonDef:function(){return{value1:"",value2:""}},getNewSegmentDef:function(){return{id:"",databaseId:""}},getNewAttrDef:function(){return{dimension:{name:"Product"},attribute:{id:"",name:"Product",desc:"",parentAttributeId:"",attrValueType:"DiscreteSeries",filterControl:""},attributeForms:[],dynamicElements:[]}},
getNewAttrFormDef:function(){return{id:"",name:"Product",dataType:"",hidden:!1,isDefault:!0,canonicalSort:!0}},getNewFactDef:function(){return{fact:{id:"",name:"Product",desc:""}}},getNewMetricDef:function(){return{metric:{id:"",name:"",desc:"",factId:"",dataType:"Currency",operation:"Sum",formatString:"C0",metricGroup:""}}},getNewCompMetricDef:function(){return{compMetric:{id:"",name:"",desc:"",metrics:[],dataType:"Currency",formatString:"C0",metricGroup:""}}},getNewDynamicElement:function(){return{selector:null,
value:""}},getDataSourceConnectionInfo:function(){var a=$(".step1-1");return{dbType:$(".select-db-type",a).val(),ip:$(".db-server-ip input",a).val(),port:$(".db-server-port input",a).val(),instance:$(".db-instance-name input",a).val(),userName:$(".db-user-name input",a).val(),password:$(".db-password input",a).val()}},validateRepositoryDef:function(){this.colMappings=this.generateColMappings();for(var a={},b=!1,c=0,d=this.colMappings.length;c<d;c++)if(this.colMappings[c].attrDef)if(b=!0,this.colMappings[c].attrDef.dimension.name){if("Self"==
this.colMappings[c].attrDef.attribute.parentAttributeId){if(a[this.colMappings[c].attrDef.dimension.name])return'You may only have one "Self" parent attribute per dimension!';a[this.colMappings[c].attrDef.dimension.name]=!0}}else return"You must define all dimensions!";return b?null:"You must at least have one attribute defined!"},setUpConfigure:function(a,b){this.data=a;this.jsonUpload=this.xmlUpload=!1;!b&&"Maltyped elements in dataset"==this.data[0].exptMsg?(this.element.append(can.view("templates/pg-repoman-maldata-dialog.ejs",
this.data[0])),this.maltypedDataDialog=$("#maltyped-data-dialog").sentrana_dialogs_maltyped_data({}).control(),this.maltypedDataDialog.open()):(this.setUpMetaDataInfo(),this.setUpColumnMappingUI(),$(".buttonNext",this.$wizard).click())},collectRepositories:function(a){this.multiData.push(a);this.multiData.length==this.selectedRepos.length&&this.setUpConfigure(this.multiData,!0)},repositoryConfigData:function(){var a=this.validateRepositoryDef();if(a)return $(".create-rep-status").text(a),!1;this.tableInfo=
this.data[0].tableInfo;this.colMappings=this.generateColMappings();this.tables=this.generateTables();return{repositoryId:$(".metadata .repository-id input").val(),repositoryName:$(".metadata .repository-name input").val(),columnMappings:this.colMappings,tables:this.tables,tableInfo:this.tableInfo}},createJSONRepository:function(){var a=this.repositoryConfigData();if(!a)return!1;this.repoDef=a;$(".repo-xml").val(JSON.stringify(a,void 0,2));$(".upload-rep-path").val("http://localhost/BIQSvc/SqlGen.svc/CreateJSONRepository");
return!0},createXMLRepository:function(){var a=this.repositoryConfigData();if(!a)return!1;$.ajax({type:"POST",url:"/BIQSvc/RepoMan.svc/CreateXMLRepository",dataType:"text",contentType:"application/json",data:JSON.stringify(a),success:function(a){$(".repo-xml").val(a);$(".upload-rep-path").val("http://localhost/BIQSvc/SqlGen.svc/UploadRepository");$(".step3-1").show();$(".step3-2").hide()},error:function(a,c,d){$(".repo-xml").val(a.responseText);$(".repo-xml").val(d)}});return!0},".db-table click":function(){this.selectedRepos=
[];$(".step1-1").show();$(".step1-2").hide();$(".step1-3").hide();$(".buttonNext",this.$wizard).click()},".csv-file click":function(){this.selectedRepos=[];var a=this;$(".browse-file").button();$(".upload-file").button();$(".csv-uploader").ajaxfileupload({action:"/BIQSvc/RepoMan.svc/UploadCSV",valid_extensions:["txt","csv"],submit_button:$(".upload-file"),onComplete:function(b){a.setUpConfigure([b])}});$(".step1-1").hide();$(".step1-2").show();$(".step1-3").hide();$(".buttonNext",this.$wizard).click()},
".csv-uploader change":function(a){$(".csv-path").val($(a).val())},".paste-data click":function(){this.selectedRepos=[];$(".step1-1").hide();$(".step1-2").hide();$(".step1-3").show();$(".buttonNext",this.$wizard).click()},".button-retrieve-table-list click":function(){$(".table-list",this.element).show();this.DataSourceConnectionInfo=this.getDataSourceConnectionInfo();var a=this;this.selectedRepos=[];this.options.app.blockUI("Retrieving table list, please wait...",this.options.app.ajaxCallStatus.PROGRESS,
"CANCEL",function(){$.ajaxManager.abortAll();$.unblockUI()});$.ajax({type:"POST",url:"/BIQSvc/RepoMan.svc/GetTableList",contentType:"application/json",data:JSON.stringify(a.DataSourceConnectionInfo),success:function(b){a.DBMetaData=b;a.showTableList();$.unblockUI()}})},".checkbox-select-table change":function(a){a=$(a);a.prop("checked")?a.prop("checked",!1):a.prop("checked",!0)},".table-list li click":function(a){a=$("input:checkbox",$(a));a.prop("checked")?(a.prop("checked",!1),this.selectedRepos.splice(this.selectedRepos.indexOf(a.attr("id")),
1),1>this.selectedRepos.length&&$(".button-submit-table-list").hide()):(a.prop("checked",!0),this.selectedRepos.push(a.attr("id")),$(".button-submit-table-list").show())},".button-submit-table-list click":function(){this.multiData=[];for(var a=this,b=0;b<this.selectedRepos.length;b++){var c=this.selectedRepos[b],c={connectionInfo:this.getDataSourceConnectionInfo(),tableName:c};this.options.app.blockUI("Reading database table, please wait...",this.options.app.ajaxCallStatus.PROGRESS,"CANCEL",function(){$.ajaxManager.abortAll();
$.unblockUI()});$.ajax({type:"POST",url:"/BIQSvc/RepoMan.svc/ReviewDBTableData",contentType:"application/json",data:JSON.stringify(c),success:function(b){a.collectRepositories(b);$.unblockUI()}})}},".button-upload-data click":function(){var a=this;$.ajax({type:"POST",url:"/BIQSvc/RepoMan.svc/ReviewCSVData",contentType:"application/csv",data:$(".csv-data-input").val(),success:function(b){a.setUpConfigure([b])}})},".button-create-xml-repository click":function(){this.createXMLRepository()},".button-create-json-repository click":function(){var a=
this,b=this.repositoryConfigData();b&&$.ajax({type:"POST",url:"/BIQSvc/RepoMan.svc/CreateJSONRepository",contentType:"application/json",data:JSON.stringify(b),success:function(b){b.errorMsg?$(".create-rep-status").text(b.errorMsg):($(".buttonNext",a.$wizard).click(),$(".step3-1").hide(),$(".step3-2").show())},error:function(a,b,e){$(".create-rep-status").val(a.responseText);$(".create-rep-status").val(e)}})},".button-upload-repository click":function(){var a=this;$(".upload-rep-path").val();var b=
$(".repo-xml").val();this.xmlUpload?$.ajax({type:"POST",url:"/BIQSvc/SqlGen.svc/UploadRepository",dataType:"text",contentType:"application/xml",data:b,success:function(){$(".upload-rep-status").text("Your repository has been uploaded successfully!");$(".buttonNext",a.$wizard).click()},error:function(a,b,e){$(".upload-rep-status").text(a.responseText);$(".upload-rep-status").text(e)}}):this.jsonUpload&&$.ajax({type:"POST",url:"/BIQSvc/RepoMan.svc/CreateJSONRepository",contentType:"application/json",
data:b,success:function(a){a.errorMsg?$(".upload-rep-status").text(a.errorMsg):$(".upload-rep-status").text("Success!")},error:function(a,b,e){$(".upload-rep-status").val(a.responseText);$(".upload-rep-status").val(e)}})},".button-create-new-repository click":function(){$("#step-1",this.$wizard).click()}});steal.executed("js/controllers/RepositoryCreatePageController.js");
can.Control.extend("Sentrana.Controllers.HandleMetadata",{pluginName:"sentrana_handle_metadata",defaults:{data:null,model:null}},{init:function(){this.model=this.options.model;this.data=this.options.data;this.$testing=$(".testing");this.$reviewTable=$(".table-content-review");this.$formTable=$(".form-mapping-information");this.$columnTable=$(".column-mapping-information");this.$compMetrics=$(".composite-metrics");this.$joins=$(".tables");this.testing=this.$testing.sentrana_testing_repository_manager({model:this.model}).control();
this.reviewTableController=this.$reviewTable.sentrana_review_table_data({model:this.model,data:this.data,testing:this.testing}).control();this.formController=this.$formTable.sentrana_form_mapping_ui({model:this.model,testing:this.testing}).control();this.columnController=this.$columnTable.sentrana_column_mapping_ui({model:this.model,testing:this.testing}).control();this.compMetricController=this.$compMetrics.sentrana_composite_metrics({model:this.model,testing:this.testing}).control();this.joinController=
this.$joins.sentrana_tables({model:this.model,testing:this.testing}).control()},update:function(a){this.data=a;this.updateModel();this.$reviewTable.empty();this.$formTable.empty();this.$columnTable.empty();this.$compMetrics.empty();this.$joins.empty();this.reviewTableController.update(a,this.selectedRepos);this.formController.update();this.columnController.update();this.compMetricController.update();this.joinController.update(a,this.selectedRepos);this.testing.update(!1,1)},getColumnIDFromElement:function(a){return a.parent().parent().attr("class")},
getColumnID:function(a){return a.replace(/\s/g,"").replace(/\(/g,"").replace(/\)/g,"")},getColInfo:function(a){for(var b=0,c=this.data.colInfos.length;b<c;b++)if(this.data.colInfos[b].title==a)return this.data.colInfos[b];return null},updateModel:function(){if(this.data){this.selectedRepos=[];this.model.clear();this.model.tableInfo=this.data[0].tableInfo;for(var a=0;a<this.data.length;a++){var b=this.data[a],c=this.data[a].tableInfo.tableName;this.selectedRepos.push(c);for(var d=0;d<b.colInfos.length;d++){var e=
b.colInfos[d],h=e.title,g=this.getColumnID(h);e.colID=g;var f=e.colType,e=this.model.setNewForm(g,h,e.dataType,f,"",!1,c);0===f?(this.model.updateDimensionChildren(e.attributes[0],""),e.segment=this.model.getNewSegment(g,e.id)):e.datum=this.model.getNewDatum(g,e.id)}}}}});steal.executed("js/controllers/HandleMetadataController.js");
can.Control.extend("Sentrana.Controllers.ReviewTableData",{pluginName:"sentrana_review_table_data",dataTypeMap:["numeric","string","numeric","numeric","numeric"],defaults:{model:null,data:null,testing:null}},{init:function(){this.model=this.options.model;this.data=this.options.data;this.testing=this.options.testing},update:function(a,b){this.data=a;if(this.selectedRepos=b){this.element.append('Select Table: <select class="select-table-name" />');for(var c=0;c<b.length;c++)this.createReviewTable(c);
this.setTableNames();this.showReviewTable(0)}},setTableNames:function(){for(var a=$(".select-table-name",this.element),b=0;b<this.selectedRepos.length;b++){var c=$("<option></option>").val(b).html(this.selectedRepos[b]);a.append(c)}},showReviewTable:function(a){$(".dataTables_wrapper").hide();$("#table-content-review-tbl_"+a+"_wrapper",this.element).show()},createReviewTable:function(a){var b=this.data[a];this.element.append("templates/pg-repoman-review-table.ejs",{id:a});for(var a=$("#table-content-review-tbl_"+
a,this.element),c=[],d=0,e=b.rows.length;d<e;d++){for(var h=b.rows[d],g=[],f=0,i=h.cells.length;f<i;f++)g.push(h.cells[f].rawValue);c.push(g)}h=[];d=0;for(e=b.colInfos.length;d<e;d++)g=b.colInfos[d],h.push({sTitle:g.title,sClass:"1"==g.just?"numeric":"",sType:this.constructor.dataTypeMap[g.dataType]});this.initializing=!0;this.dataTable=a.dataTable({aaData:c,aoColumns:h,asStripeClasses:["odd-row","even-row"],bAutoWidth:!1,bDestroy:!0,iDisplayLength:10,iDisplayStart:0})},".select-table-name change":function(a){this.showReviewTable($(a).val())}});
steal.executed("js/controllers/ReviewTableDataController.js");
can.Control.extend("Sentrana.Controllers.ColumnMappingUI",{pluginName:"sentrana_column_mapping_ui",defaults:{model:null,testing:null}},{init:function(){this.model=this.options.model;this.testing=this.options.testing},parseModel:function(){var a=[],b;for(b in this.model.attributes){var c=this.model.attributes[b];c.isLocal&&a.push(c)}for(var d in this.model.metrics)b=this.model.metrics[d],b.isLocal&&a.push(b);return{colInfos:a}},update:function(){this.detach=!0;this.element.append(can.view("templates/pg-repoman-column-mapping.ejs",
this.parseModel()));this.newDimensionDlg=$(".dialog-new-dimension",this.element).sentrana_dialogs_new_dimension({}).control();this.editMetricDlg=$(".dialog-edit-metric",this.element).sentrana_dialogs_edit_metric({model:this.model}).control();this.editAttributeDlg=$(".dialog-edit-attribute",this.element).sentrana_dialogs_edit_attribute({model:this.model}).control();this.newMetricGroupDlg=$(".dialog-new-metric-group",this.element).sentrana_dialogs_new_metric_group({}).control();this.element.append(can.view("templates/pg-repoman-dynamic-elements-dialog.ejs",
this.model));this.dynamicElementsDlg=$(".dialog-dynamic-elements",this.element).sentrana_dialogs_dynamic_elements({}).control();this.selectDataDlg=$(".dialog-selected-data",this.element).sentrana_dialogs_select_data({model:this.model}).control();$(".button-submit-name",this.element).button();$(".button-dynamic-elements",this.element).button();$(".button-attach-form-fact",this.element).button();$(".button-delete",this.element).button();this.updateAllColumns();this.populateDimensions()},validSelection:function(a){return"rgb(255, 0, 0)"!=
a.css("color")},getColumnIDFromElement:function(a){return a.parent().parent().attr("class")},getColumnID:function(a){return a.replace(/\s/g,"").replace(/\(/g,"").replace(/\)/g,"")},getColInfo:function(a){for(var b=0,c=this.data.colInfos.length;b<c;b++)if(this.data.colInfos[b].title==a)return this.data.colInfos[b];return null},changeElementClass:function(a,b,c){a.parent().parent().removeClass(b);a.parent().parent().addClass(c)},changeColumnClass:function(a,b){var c=$("."+a);c.removeClass(a);c.addClass(b)},
dataTypeToInt:function(a){switch(a){case "Datetime":return 0;case "String":return 1;case "Currency":return 2;case "Number":return 3;case "Percentage":return 4;case "Boolean":return 5;default:return""}},updateAllColumns:function(){this.updateAllNames();this.updateAllParentAttributes();this.updateAllDimensions();this.updateDeleteButtons()},updateAllNames:function(){var a=null,b;for(b in this.model.attributes){var c=this.model.attributes[b];c.isLocal&&(a=$(".input-name",$("."+b)),a.val(c.name))}for(var d in this.model.metrics)b=
this.model.metrics[d],b.isLocal&&(a=$(".input-name",$("."+d)),a.val(b.name))},updateAllDimensions:function(){if(this.model.dimensionUpdated()){for(var a in this.model.attributes)this.model.attributes[a].isLocal&&this.addNewDimension(a);for(var b in this.model.metrics)this.model.metrics[b].isLocal&&this.addNewDimension(b)}},populateDimensions:function(){if(1<this.model.dimensions.allDimensions.length){for(var a in this.model.attributes){var b=this.model.attributes[a];if(b.isLocal){for(var c=0;c<this.model.dimensions.allDimensions.length;c++)this.addNewDimension(a,
this.model.dimensions.allDimensions[c]);$(".select-dimension",$("."+a)).val(b.dimension)}}for(var d in this.model.metrics)if(this.model.metrics[d].isLocal)for(a=0;a<this.model.dimensions.allDimensions.length;a++)this.addNewDimension(d,this.model.dimensions.allDimensions[a])}},addNewDimension:function(a,b){b||(b=this.model.newDimension);var c=$(".select-dimension [value=New]",$("."+a)),d=$("<option></option>").val(b).html(b);c.before(d)},updateAllParentAttributes:function(){for(var a in this.model.attributes){var b=
this.model.attributes[a];if(b.isLocal){var c=b.dimension,b=$(".select-parent-attribute",$("."+a)),c=this.model.dimensions.dimensionChildren[c];c instanceof Array||(c=[]);this.replaceParentAttributes(a,c)?b.val(this.model.attributes[a].parent):b.val("Self");this.model.attributes[a].parent=b.val()}}},replaceParentAttributes:function(a,b){for(var c=$(".select-parent-attribute",$("."+a)).empty(),d=!1,e=0,h=b.length;e<h;e++){var g=this.model.attributes[b[e]];if(g&&a!=g.id){var f=$($("<option></option>").val(g.id).html(g.name));
this.model.detectParentCycle(a,g)?f.css("color","red"):g.id==this.model.attributes[a].parent&&(d=!0);c.append(f)}}c.append($("<option></option>").val("Self").html("Self"));return d},updateMetricGroups:function(){for(var a in this.model.attributes)this.model.attributes[a].isLocal&&this.addMetricGroup(a,this.model.newMetricGroup);for(var b in this.model.metrics)this.model.metrics[b].isLocal&&this.addMetricGroup(b,this.model.newMetricGroup)},addMetricGroup:function(a,b){var c=$(".select-metric-group [value=New]",
$("."+a)),d=$("<option></option>").val(b).html(b);c.before(d)},updateAllDataTypes:function(){for(var a in this.model.attributes){var b=this.model.attributes[a];b.isLocal&&$(".select-data-type",$("."+a)).val(""+b.dataType)}for(var c in this.model.metrics)a=this.model.metrics[c],a.isLocal&&$(".select-data-type",$("."+c)).val(""+a.dataType)},setColumnDisplay:function(a,b){var c=$("."+a);$(".select-column-type",c).val(b);1==b?($(".select-parent-attribute",c).hide(),$(".select-dimension",c).hide(),$(".select-attr-value-type",
c).hide(),$(".select-metric-group",c).show(),$(".select-filter-control",c).hide(),$(".button-delete",c).show()):($(".select-parent-attribute",c).show(),$(".select-dimension",c).show(),$(".select-attr-value-type",c).show(),$(".select-metric-group",c).hide(),$(".select-filter-control",c).show());$(".button-dynamic-elements",c).hide()},flipColumnType:function(a){var b=$("."+a),c;this.setColumnDisplay(a,(this.model.getAttrOrMetr(a).colType+1)%2);0===this.model.getAttrOrMetr(a).colType||"0"===this.model.getAttrOrMetr(a).colType?
(c=this.model.attrToMetric(this.model.attributes[a]).id,this.model.deleteDimensionChild(a),this.model.metrics[c].metricGroup=$("select-metric-group",b).val()):(c=this.model.metricToAttr(this.model.metrics[a]).id,this.model.updateDimensionChildren(c,""));this.changeColumnClass(a,c);this.updateAllColumns()},updateIDs:function(){for(var a=0,b=this.model.idUpdates.length;a<b;a++){var c=this.model.idUpdates[a];this.changeColumnClass(c.oldID,c.newID);c=this.model.getAttrOrMetr(c.newID);this.setColumnDisplay(c.id,
c.colType)}this.model.idUpdates=[]},updateDeleteButtons:function(){for(var a in this.model.attributes){var b=this.model.attributes[a];if(b.isLocal){var c=$(".button-delete",$("."+a));0<b.attributeForms.length?c.hide():c.show()}}},"{model} change":function(a,b,c,d,e,h){this.testing.runAllTests(c+" changed from "+h+"->"+e);switch(c){case "newDimension":if(!e)break;this.model.updateDimensionChildren(this.model.lastChangedID,e);this.model.attributes[this.model.lastChangedID].dimension=e;this.updateAllColumns();
this.model.addDimension();this.model.dimensionUpdated();$(".select-dimension",$("."+this.model.lastChangedID)).val(e);break;case "newMetricGroup":if(!e)break;this.model.updateMetricGroupChildren(this.model.lastChangedID,e);this.model.metrics[this.model.lastChangedID].metricGroup=e;this.updateMetricGroups();$(".select-metric-group",$("."+this.model.lastChangedID)).val(e);break;case "updatedDataTypes":this.detach=!1;this.updateAllDataTypes();this.detach=!0;break;case "updatedColTypes":this.detach=!1;
this.updateIDs();this.updateAllColumns();this.detach=!0;break;case "updatedMetric":this.updateAllColumns();break;case "updatedAttribute":this.updateAllColumns();break;case "updatedFormSelection":this.updateDeleteButtons()}},".select-attr-value-type change":function(a){this.model.attributes[this.getColumnIDFromElement(a)].attrValueType=$(a).val()},".select-filter-control change":function(a){this.model.attributes[this.getColumnIDFromElement(a)].filterControl=$(a).val()},".select-column-type change":function(a){this.detach&&
(this.flipColumnType(this.getColumnIDFromElement(a)),this.model.attr("addDeleteMetric",(this.model.addDeleteMetric+1)%2))},".select-parent-attribute change":function(a){var b=this.getColumnIDFromElement(a),c=this.model.attributes[b];this.validSelection($(".select-parent-attribute [value="+$(a).val()+"]",$("."+b)))?("Self"==$(a).val()&&(this.model.dimensions.dimensionParents[c.dimension]=b),this.model.attributes[b].parent=$(a).val(),this.updateAllColumns()):$(a).val(this.model.attributes[b].parent)},
".select-dimension change":function(a){var b=this.getColumnIDFromElement(a),c=$(a).val();"New"==c?(this.model.lastChangedID=b,this.newDimensionDlg.open(this.model,b),$(a).val(this.model.attributes[b].dimension)):(this.model.updateDimensionChildren(b,c),this.model.attributes[b].dimension=$(a).val(),this.updateAllColumns(),$(".select-parent-attribute",$("."+b)).val(this.model.dimensions.dimensionParents[$(a).val()]),this.model.attributes[b].parent=$(".select-parent-attribute",$("."+b)).val())},".select-metric-group change":function(a){var b=
this.getColumnIDFromElement(a),c=$(a).val();"New"==c?(this.model.lastChangedID=b,this.newMetricGroupDlg.open(this.model),$(a).val(this.model.metrics[b].metricGroup)):(this.model.updateMetricGroupChildren(b,c),this.model.metrics[b].metricGroup=$(a).val())},".select-data-type change":function(a){var b=this.getColumnIDFromElement(a);this.detach&&this.model.detachFromForms(b);this.model.getAttrOrMetr(b).dataType=$(a).val()},".input-name change":function(a){this.model.getAttrOrMetr(this.getColumnIDFromElement(a)).name=
$(a).val();this.updateAllColumns()},".button-dynamic-elements click":function(a){this.dynamicElementsDlg.open(this.model,this.model.attributes[this.getColumnIDFromElement(a)])},".button-edit-description click":function(a){a=this.model.getAttrOrMetr(this.getColumnIDFromElement(a));0===a.colType||"0"===a.colType?this.editAttributeDlg.open(a):this.editMetricDlg.open(a)},".button-attach-form-fact click":function(a){this.selectDataDlg.open(this.getColumnIDFromElement(a))},".button-delete click":function(a){var a=
this.getColumnIDFromElement(a),b=this.model.getAttrOrMetr(a);1==b.colType?this.model.deleteMetric(b):this.model.deleteAttr(b);$("."+a).remove()}});steal.executed("js/controllers/ColumnMappingUIController.js");
can.Control.extend("Sentrana.Controllers.FormMappingUI",{pluginName:"sentrana_form_mapping_ui",defaults:{model:null,testing:null}},{update:function(){this.element.append(can.view("templates/pg-repoman-form-mapping.ejs",this.parseModel()));$(".button-submit-name",this.element).button();$(".button-select-data",this.element).button();this.setTableNames()},init:function(){this.model=this.options.model;this.testing=this.options.testing},parseModel:function(){var a=[],b;for(b in this.model.forms){var c=
this.model.forms[b];c.isLocal&&a.push(c)}return{colInfos:a}},getFormIDFromElement:function(a){return a.parent().parent().attr("class")},getFormID:function(a){return"_"+a.replace(/\s/g,"").replace(/\(/g,"").replace(/\)/g,"")},getColInfo:function(a){for(var b=0,c=this.data.colInfos.length;b<c;b++)if(this.data.colInfos[b].title==a)return this.data.colInfos[b];return null},updateAllDataTypes:function(){for(var a in this.model.forms){var b=this.model.forms[a];b.isLocal&&$(".select-data-type",$("."+a)).val(b.dataType)}},
updateRowTypes:function(){for(var a in this.model.forms){var b=this.model.forms[a];b.isLocal&&($(".select-row-type",$("."+a)).val(b.formType),0===b.formType||"0"===b.formType?$(".select-default",$("."+a)).show():$(".select-default",$("."+a)).hide())}},updateAllNames:function(){for(var a in this.model.forms){var b=this.model.forms[a];b.isLocal&&($(".input-name",$("."+a)).val(b.name),$(".input-column-name",$("."+a)).val(b.columnName))}},setTableNames:function(){for(var a in this.model.forms){var b=
this.model.forms[a];b.isLocal&&$(".table-name",$("."+a)).html("<strong>"+b.tableName+"</strong>")}},"{model} change":function(){},".input-name change":function(a){this.model.forms[this.getFormIDFromElement(a)].name=$(a).val()},".input-column-name change":function(a){this.model.forms[this.getFormIDFromElement(a)].columnName=$(a).val()},".select-data-type change":function(a){var b=this.getFormIDFromElement(a),a=$(a).val();this.model.propagateDataTypeChange(b,a);this.model.attr("updatedDataTypes",(this.model.updatedDataTypes+
1)%2);this.updateAllDataTypes()},".select-row-type change":function(a){var b=this.getFormIDFromElement(a),a=$(a).val();this.model.propagateFormTypeChange(b,a);this.model.attr("updatedColTypes",(this.model.updatedColTypes+1)%2);this.model.attr("addDeleteMetric",(this.model.addDeleteMetric+1)%2);this.updateRowTypes();this.updateAllNames()}});steal.executed("js/controllers/FormMappingUIController.js");
can.Control.extend("Sentrana.Controllers.CompositeMetrics",{pluginName:"sentrana_composite_metrics",defaults:{model:null,testing:null}},{init:function(){this.model=this.options.model;this.testing=this.options.testing},update:function(){this.isEmpty=!0;this.element.append(can.view("templates/pg-repoman-comp-metrics.ejs",this.parseModel()));this.editCompMetricDlg=$(".dialog-edit-comp-metric").sentrana_dialogs_edit_metric({model:this.model}).control();this.isEmpty&&$(".comp-metric-header",this.element).hide();
$(".button-add-new",this.element).button();$(".button-delete",this.element).button();this.updateAllMetrics()},parseModel:function(){var a=[];this.compMetricCount=0;for(var b in this.model.compMetrics){var c=this.model.compMetrics[b];c.isLocal&&(this.compMetricCount+=1,a.push({compMetric:c}))}0!==a.length&&(this.isEmpty=!1);return{compMetrics:a}},getColumnIDFromElement:function(a){return a.parent().parent().attr("class")},updateAllNames:function(){for(var a in this.model.compMetrics)this.model.compMetrics[a].isLocal&&
this.updateCompName(a)},updateCompName:function(a){var b=this.model.compMetrics[a];$(".input-name",$("."+a)).val(b.name)},updateAllMetrics:function(){for(var a in this.model.compMetrics)this.model.compMetrics[a].isLocal&&this.resetMetrics(a)},resetMetrics:function(a){var b=this.model.compMetrics[a],c=$("."+a),a=$(".select-metric1",c).empty(),c=$(".select-metric2",c).empty(),d=$("<option></option>").val(0).html("");a.append(d);d=$("<option></option>").val(0).html("");c.append(d);for(var e in this.model.metrics)if(d=
this.model.metrics[e],d.isLocal){var h=$("<option>",{value:d.id}).text(d.name);b.metric2Id!=d.id&&a.append(h);h=$("<option>",{value:d.id}).text(d.name);b.metric1Id!=d.id&&c.append(h)}e=this.model.metrics[b.metric1Id];d=this.model.metrics[b.metric2Id];e&&this.model.metrics[e.id]&&a.val(e.id);d&&this.model.metrics[d.id]&&c.val(d.id);b.metric1Id=a.val();b.metric2Id=c.val()},"{model} change":function(a,b,c){switch(c){case "addDeleteMetric":this.updateAllMetrics()}},".button-add-new click":function(){$(".comp-metric-header",
this.element).show();var a=$(".composite-metric-table");this.model.compNumber++;var b="comp"+this.model.compNumber;a.append(can.view("templates/pg-repoman-single-comp-metric.ejs",{id:b}));this.model.getNewCompMetric(b,b,0,null,null,4);this.resetMetrics(b);this.updateCompName(b);$(".button-delete",this.element).button();this.compMetricCount++},".select-comp-type change":function(a){var b=this.getColumnIDFromElement(a),c=this.model.compMetrics[b];1==$(a).val()?$(".select-metric2",$("."+b)).show():$(".select-metric2",
$("."+b)).hide();c.compType=$(a).val()},".select-metric1 change":function(a){this.model.compMetrics[this.getColumnIDFromElement(a)].metric1Id=$(a).val()},".select-metric2 change":function(a){this.model.compMetrics[this.getColumnIDFromElement(a)].metric2Id=$(a).val()},".button-edit-description click":function(a){this.editCompMetricDlg.open(this.model.compMetrics[this.getColumnIDFromElement(a)])},".button-delete click":function(a){a=this.getColumnIDFromElement(a);this.model.deleteCompMetric(this.model.compMetrics[a]);
$("."+a).remove();this.compMetricCount--;1>this.compMetricCount&&$(".comp-metric-header",this.element).hide()}});steal.executed("js/controllers/CompositeMetricsController.js");
can.Control.extend("Sentrana.Controllers.Tables",{pluginName:"sentrana_tables",defaults:{model:null,testing:null}},{init:function(){this.model=this.options.model;this.testing=this.options.testing;this.comparisons="= > >= < <= Contains NotContain".split(" ");this.joins=["Inner","Left","Right","Full"]},update:function(a,b){void 0!==b&&(this.element.empty(),this.data=a,this.selectedRepos=b,0<this.model.baseTables.length?this.populate():this.freshPopulate(),this.segmentsDlg=$(".dialog-segments",this.element).sentrana_dialogs_segments({model:this.model}).control(),
this.dataDlg=$(".dialog-datum",this.element).sentrana_dialogs_data({model:this.model}).control(),this.rootFilterDlg=$(".dialog-root-filter",this.element).sentrana_dialogs_root_filter({model:this.model}).control())},populate:function(){var a=1<this.selectedRepos.length;this.element.append(can.view("templates/pg-repoman-join.ejs",{selectedRepos:this.selectedRepos,comparisonOperators:this.comparisons,id:this.model.baseTables[0]}));a?($(".button-add-table",this.element).button(),$(".button-add-join",
this.element).button()):($(".button-add-table",this.element).hide(),$(".button-add-join",this.element).hide());$(".button-add-segments",this.element).button();$(".button-add-data",this.element).button();$(".button-add-filter",this.element).button();$(".button-run-query",this.element).button();this.populateJoins(this.model.baseTables[0]);for(a=1;a<this.model.baseTables.length;a++){var b=this.model.baseTables[a];this.addBaseTable(b);$("select-table",$("."+b)).val(b);this.populateJoins(b)}},addJoinElement:function(a,
b,c,d,e){a.append(can.view("templates/pg-repoman-single-table.ejs",{id:b,tables:c,joins:this.joins,lcolumns:d,rcolumns:e,compares:this.comparisons}));$(".button-add-segments",$("."+b)).button();$(".button-add-filter",$("."+b)).button();$(".button-add-comparison",$("."+b)).button();$(".button-delete",$("."+b)).button();1<c.length?$(".button-add-join",$("."+b)).button():$(".button-add-join",$("."+b)).hide()},deleteJoinElement:function(a){$("."+a.id).remove();$("."+a.id+"_padding").remove()},addConditionElement:function(a,
b,c,d){a.append("templates/pg-repoman-single-comparison-operator.ejs",{id:b,lcolumns:c,rcolumns:d,compares:this.comparisons})},populateJoin:function(a){var b=a.parentTable,c=a.table,d=a.id,e=this.model.getValidTableChoices(b,this.selectedRepos.slice(0)),h=this.getColumns(c.tableID),g=this.getAllColumns(b,[]);this.addJoinElement($("."+b.id+"_joinchild"),d,e,h,g);b=$("."+d);$(".select-dtable",b).val(c.tableID);$(".select-join-type",b).val(a.joinType);$(".select-lcompare",b).val(a.conditions[0].lvalue);
$(".select-rcompare",b).val(a.conditions[0].rvalue);$(".select-compare",b).val(a.conditions[0].comparisonOperator);this.populateJoins(c.id)},populateConditions:function(a){for(var b=1;b<a.conditions.length;b++){var c=a.conditions[b],d=$("."+a.id+"_compchild"),e=a.parentTable,h=this.getColumns(a.table.tableID),e=this.getAllColumns(e,[]);this.addConditionElement(d,c.id,h,e);d=$("."+c.id);$(".select-lcompare",d).val(c.lvalue);$(".select-rcompare",d).val(c.lvalue);$(".select-compare",d).val(c.comparisonOperator)}},
populateJoins:function(a){for(var a=this.model.tables[a],b=0;b<a.joins.length;b++){var c=a.joins[b];this.populateJoin(c);this.populateConditions(c)}},freshPopulate:function(){0<this.selectedRepos.length?(this.element.html(can.view("templates/pg-repoman-join.ejs",{selectedRepos:this.selectedRepos,comparisonOperators:this.comparisons,id:"primaryTable_1"})),$(".button-add-table",this.element).button(),$(".button-add-join",this.element).button()):(this.selectedRepos.push(this.model.tableInfo.tableName),
this.element.html(can.view("templates/pg-repoman-join.ejs",{selectedRepos:this.selectedRepos,comparisonOperators:this.comparisons,id:"primaryTable_1"})),$(".button-add-table",this.element).hide(),$(".button-add-join",this.element).hide());this.model.repoCount={};for(var a=0;a<this.selectedRepos.length;a++)this.model.repoCount[this.selectedRepos[a]]=0;$(".button-add-segments",this.element).button();$(".button-add-data",this.element).button();$(".button-add-filter",this.element).button();$(".button-run-query",
this.element).button();this.model.baseTables.push(this.model.getNewTable("primaryTable_1",this.selectedRepos[0],0,null))},addComparison:function(a){var b=$("."+a.id);null!==a.filter&&(b=$("."+a.filter.id));a=this.model.getNewCondition(a).id;b.after("templates/pg-repoman-single-comparison-operator",{id:a,name:"Comparison Operator"})},getColumnIDFromElement:function(a){return a.parent().parent().attr("class")},getTableIDFromButton:function(a){return a.parent().attr("class")},getColumns:function(a){for(var a=
this.data[this.selectedRepos.indexOf(a)],b=[],c=0;c<a.colInfos.length;c++)b.push(a.colInfos[c].colID);return b},getAllColumns:function(a,b){if(null===a)return b;b=b.concat(this.getColumns(a.tableID));return this.getAllColumns(a.parentTable,b)},getCondition:function(a){return"c-"!=a.substring(0,2)?this.model.conditions["c-"+a+"_0"]:this.model.conditions[a]},repopulateTableNames:function(a,b){a.empty();for(var c=0;c<b.length;c++)this.addTableName(a,b[c])},addTableName:function(a,b){var c=$("<option></option>").val(b).html(b);
a.append(c)},addBaseTable:function(a){0<this.selectedRepos.length?(this.element.append(can.view("templates/pg-repoman-single-basetable.ejs",{selectedRepos:this.selectedRepos,multipleTables:!0,id:a})),$(".button-add-table",this.element).button(),$(".button-add-join",this.element).button()):(this.element.append(can.view("templates/pg-repoman-single-basetable.ejs",{selectedRepos:this.selectedRepos,multipleTables:!1,id:a})),$(".button-add-table",this.element).hide(),$(".button-add-join",this.element).hide());
$(".button-add-segments",this.element).button();$(".button-add-data",this.element).button();$(".button-add-filter",this.element).button();$(".button-delete-basetable",this.element).button()},".button-add-table click":function(){var a="primaryTable_"+(this.model.baseTables.length+1);this.addBaseTable(a);this.model.baseTables.push(this.model.getNewTable(a,this.selectedRepos[0],0,null).id)},".button-add-join click":function(a){var a=this.getTableIDFromButton(a),b=this.model.tables[a],c=this.model.getValidTableChoices(b,
this.selectedRepos.slice(0)),d=c[0]+"_"+(this.model.repoCount[c[0]]+=1),e=this.model.getNewTable(d,c[0],b.depth+1,b),e=this.model.getNewJoin(b,e),h=this.getColumns(c[0]),b=this.getAllColumns(b,[]);e.conditions[0].lvalue=h[0];e.conditions[0].rvalue=b[0];e.comparisonOperator=0;e.joinType=0;this.addJoinElement($("."+a+"_joinchild"),d,c,h,b)},".button-add-comparison click":function(a){var b=this.getTableIDFromButton(a),c=this.model.joins[b],d=c.parentTable,a=this.getColumns(c.table.tableID),d=this.getAllColumns(d,
[]),b=$("."+b+"_compchild"),c=this.model.getNewCondition(c);c.lvalue=a[0];c.rvalue=d[0];c.comparisonOperator=0;this.addConditionElement(b,c.id,a,d)},".select-table change":function(a){this.model.tables[this.getTableIDFromButton(a)].tableID=$(a).val()},".select-dtable change":function(a){var b=this.getTableIDFromButton(a),c=this.model.joins[b];c.table.tableID=$(a).val();a=this.getColumns(c.table.tableID);this.repopulateTableNames($(".select-lcompare",$("."+b)),a)},".select-join-type change":function(a){this.model.joins[this.getTableIDFromButton(a)].joinType=
$(a).val()},".select-lcompare change":function(a){this.getCondition(this.getTableIDFromButton(a)).lvalue=$(a).val()},".select-rcompare change":function(a){this.getCondition(this.getTableIDFromButton(a)).rvalue=$(a).val()},".select-compare change":function(a){this.getCondition(this.getTableIDFromButton(a)).comparisonOperator=$(a).val()},".checkbox-literal change":function(a){var b=this.getColumnIDFromElement(a),c=this.getJoinCondition(b);this.model.isFilter(b)?$(a).prop("checked",!0):c.condition.literal=
!1!==$(a).prop("checked")},".select-comparison-type change":function(a){var b=this.getColumnIDFromElement(a),c=this.getJoinCondition(b);"New"==$(a).val()?(this.addComparison(c.join),$(a).val(c.condition.comparisonOperator)):this.model.isFilter(b)?c.filter.comparisonOperator=$(a).val():c.condition.comparisonOperator=$(a).val()},".input-database1 change":function(a){var b=this.getColumnIDFromElement(a),c=this.getJoinCondition(b);this.model.isFilter(b)?c.filter.value1=$(a).val():c.condition.value1=$(a).val()},
".input-database2 change":function(a){var b=this.getColumnIDFromElement(a),c=this.getJoinCondition(b);this.model.isFilter(b)?c.filter.value2=$(a).val():c.condition.value2=$(a).val()},".button-add-segments click":function(a){a=this.model.tables[this.getTableIDFromButton(a)];this.segmentsDlg.open(a,this.getColumns(a.tableID))},".button-add-data click":function(a){a=this.model.tables[this.getTableIDFromButton(a)];this.dataDlg.open(a,this.getColumns(a.tableID))},".button-delete click":function(a){a=this.model.tables[this.getTableIDFromButton(a)];
this.deleteJoinElement(a);this.model.fullDeleteTable(a)},".button-delete-basetable click":function(a){a=this.model.tables[this.getTableIDFromButton(a)];this.deleteJoinElement(a);this.model.deleteBaseTable(a)},".button-add-filter click":function(a){a=this.model.tables[this.getTableIDFromButton(a)];this.rootFilterDlg.open(a,this.data[this.selectedRepos.indexOf(a.tableID)].tableInfo)},".button-run-query click":function(a){this.getColumnIDFromElement(a)}});steal.executed("js/controllers/TablesController.js");
can.Observe.extend("Sentrana.Models.RepositoryCreateAttrs",{},{init:function(){this.setup({tableInfo:{},forms:{},dimensions:{allDimensions:[],dimensionChildren:{},dimensionParents:{}},attributes:{},metrics:{},metricGroups:{},compMetrics:{},compNumber:0,tables:{},baseTables:[],tableNumber:0,conditions:{},joins:{},segments:{},data:{},repoCount:{},lastChangedID:null,newDimension:"",newMetricGroup:"",updatedDataTypes:0,updatedFormSelection:{formID:null,selections:null},idUpdates:[],updatedColTypes:0,
updatedMetric:0,updatedAttribute:0,addDeleteMetric:0,selectors:["MaxElement"]})},clear:function(){this.forms={};this.dimensions={allDimensions:[],dimensionChildren:{},dimensionParents:{}};this.attributes={};this.metrics={};this.compMetrics={};this.tables={};this.baseTables=[];this.segments={};this.data={};this.repoCount={}},makePrettyString:function(a){return a.replace(/_/g," ").replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},setNewForm:function(a,b,c,d,
e,h,g,f,i){f={name:this.makePrettyString(b),id:"_"+a,rid:a,columnName:a,dataType:c,formType:d,isDefault:!0,isLocal:!0,attributes:[],metrics:[],description:"",inJoin:!1,tableName:g,segment:f,datum:i};this.forms[f.id]=f;if(!h)if(0===d||"0"===d)f.name=f.name,this.getNewAttr(a,b,c,e,"Self",[f.rid],g);else if(1===d||"1"===d)f.name=f.name,this.getNewMetric(a,b,c,[f.rid],g);return f},getNewAttr:function(a,b,c,d,e,h,g){d&&0>this.dimensions.allDimensions.indexOf(d)&&this.dimensions.allDimensions.push(d);a=
{name:this.makePrettyString(b),id:a,rid:a,dataType:c,colType:0,dimension:d,parent:e,dynamicElements:{},attrValueType:"DiscreteSeries",description:"",attributeForms:[],tableName:g,filterControl:"None",isLocal:!0};for(b=0;b<this.selectors.length;b++)a.dynamicElements[this.selectors[b]]={selected:!1,value:""};this.addAttr(a);if(h){for(b=0;b<h.length;b++)d=h[b],"_"!=d.substring(0,1)&&(d="_"+d),this.attachAttrForm(a.id,d);c||(a.dataType=h[0]?this.forms["_"+h[0]].dataType:6)}a.parent=e;return a},getNewMetric:function(a,
b,c,d,e){a={name:this.makePrettyString(b),id:a,rid:a,dataType:c,colType:1,description:"",operation:"Sum",formatString:"C0",facts:[],metricGroup:"",tableName:e,isLocal:!0};this.addMetric(a);if(d){b=0;for(e=d.length;b<e;b++){var h=d[b];"_"!=h.substring(0,1)&&(h="_"+h);this.attachMetricFact(a.id,h)}c||(a.dataType=this.forms["_"+d[0]].dataType)}return a},getNewCompMetric:function(a,b,c,d,e,h,g){a={name:b,id:a,rid:a,dataType:h,compType:c,metric1Id:null,metric2Id:null,desc:"",metricGroup:"",formatString:"#,##0.0%;(#,##0.0%)",
tableName:g,isLocal:!0};a.metric1Id=d&&d.id?d.id:d;a.metric2Id=e&&e.id?e.id:e;this.addCompMetric(a);return a},getNewTable:function(a,b,c,d){a={id:a,tableID:b,databaseId:"",parentTable:d,joins:[],columns:{segments:[],data:[]},rootFilter:null,isLocal:!0,depth:c};this.addTable(a);return a},getNewJoin:function(a,b){var c={parentTable:a,id:b.id,joinType:0,conditions:[],table:b};this.getNewCondition(c);a.joins.push(c);this.addJoin(c);return c},getNewRootFilter:function(a){return a.rootFilter={id:a.id+"_filter",
parentTable:a,literal:!0,comparisonOperator:0,lvalue:"",rvalue:""}},getNewCondition:function(a){var b={id:"c-"+a.id+"_"+a.conditions.length,join:a,literal:!1,comparisonOperator:0,lvalue:"",rvalue:""};a.conditions.push(b);this.addCondition(b);return b},getNewSegment:function(a,b){var c={databaseId:a,attributeForm:b};this.addSegment(c);return c},getNewDatum:function(a,b){var c={databaseId:a,fact:b};this.addDatum(c);return c},getValidTableChoices:function(a,b){var c=b.indexOf(a.tableID);-1<c&&b.splice(c,
1);return null===a.parentTable?b:this.getValidTableChoices(a.parentTable,b)},metricToAttr:function(a,b){this.deleteMetric(a);return this.getNewAttr(a.id,a.name,a.dataType,"","Self",b,a.tableName)},attrToMetric:function(a,b){this.deleteAttr(a);return this.getNewMetric(a.id,a.name,a.dataType,b,a.tableName)},segmentToDatum:function(a){var b=this.getNewDatum(a.databaseId,a.attributeForm);this.deleteSegment(a);return b},datumToSegment:function(a){var b=this.getNewSegment(a.databaseId,a.fact);this.deleteDatum(a);
return b},getAttrOrMetr:function(a){return this.metrics[a]?this.metrics[a]:this.attributes[a]},propagateDataTypeChange:function(a,b){var c=this.forms[a];if(c.dataType!=b){c.dataType=b;var d=0,e=0,h=0,g=0;if(0===c.formType||"0"===c.formType){d=0;for(h=c.attributes.length;d<h;d++){var f=this.attributes[c.attributes[d]];f.dataType=b;e=0;for(g=f.attributeForms.length;e<g;e++)this.propagateDataTypeChange(f.attributeForms[e],b)}}else{d=0;for(h=c.metrics.length;d<h;d++){f=this.metrics[c.metrics[d]];f.dataType=
b;e=0;for(g=f.facts.length;e<g;e++)this.propagateDataTypeChange(f.facts[e],b)}}}},propagateFormTypeChange:function(a,b){var c=this.forms[a];if(c.formType!=b){var d=0,e=0;if(0===c.formType||"0"===c.formType){for(c.formType=b;0<c.attributes.length;){for(var h=c.attributes[0],g=this.attributes[h],d=0,e=g.attributeForms.length;d<e;d++)this.propagateFormTypeChange(g.attributeForms[d],b);d=this.attrToMetric(g,g.attributeForms).id;this.idUpdates.push({oldID:h,newID:d})}c.attributes=[];c.datum=this.segmentToDatum(c.segment)}else{for(c.formType=
b;0<c.metrics.length;){h=c.metrics[0];g=this.metrics[h];d=0;for(e=g.facts.length;d<e;d++)this.propagateFormTypeChange(g.facts[d],b);d=this.metricToAttr(g,g.facts).id;this.updateDimensionChildren(d,"");this.idUpdates.push({oldID:h,newID:d})}c.metrics=[];c.segment=this.datumToSegment(c.datum)}}},updateAttrFormSelections:function(){for(var a=this.forms[this.updatedFormSelection.formID],b=this.updatedFormSelection.selections,c="",d=0,e=b.length;d<e;d++)c=b[d],0>this.attributes[c].attributeForms.indexOf(a.id)&&
(this.attributes[c].attributeForms.push(a.id),a.attributes.push(c));for(d=0;d<a.attributes.length;)c=a.attributes[d],0>b.indexOf(c)?(e=this.attributes[c].attributeForms.indexOf(a.id),this.attributes[c].attributeForms.splice(e,1),a.attributes.splice(d,1)):d++},updateMetricFormSelections:function(){for(var a=this.forms[this.updatedFormSelection.formID],b=this.updatedFormSelection.selections,c="",d=0,e=b.length;d<e;d++)c=b[d],0>this.metrics[c].facts.indexOf(a.id)&&(this.metrics[c].facts.push(a.id),a.metrics.push(c));
for(d=0;d<a.metrics.length;)c=a.metrics[d],0>b.indexOf(c)?(e=this.metrics[c].facts.indexOf(a.id),this.metrics[c].facts.splice(e,1),a.metrics.splice(d,1)):d++},attachToForm:function(a,b){0<this.getAttrOrMetr(a).colType?this.attachMetricFact(a,b):this.attachAttrForm(a,b)},detachFromForm:function(a,b){0<this.getAttrOrMetr(a).colType?this.detachMetricFact(a,b):this.detachAttrForm(a,b)},attachAttrForm:function(a,b){var c=this.forms[b];0>c.attributes.indexOf(a)&&c.attributes.push(a);c=this.attributes[a];
0>c.attributeForms.indexOf(b)&&c.attributeForms.push(b)},detachAttrForm:function(a,b){var c=this.forms[b],d=this.attributes[a],e=c.attributes.indexOf(a);-1<e&&c.attributes.splice(e,1);c=d.attributeForms.indexOf(b);-1<c&&d.attributeForms.splice(c,1)},attachMetricFact:function(a,b){var c=this.forms[b];0>c.metrics.indexOf(a)&&c.metrics.push(a);c=this.metrics[a];0>c.facts.indexOf(b)&&c.facts.push(b)},detachMetricFact:function(a,b){var c=this.forms[b],d=this.metrics[a],e=c.metrics.indexOf(a);-1<e&&c.metrics.splice(e,
1);c=d.facts.indexOf(b);-1<c&&d.facts.splice(c,1)},detachFromForms:function(a){a=this.getAttrOrMetr(a);1==a.colType?this.detachMetricFacts(a):this.detachAttrForms(a)},dimensionUpdated:function(){return""!==this.newDimension&&0>this.dimensions.allDimensions.indexOf(this.newDimension)},addDimension:function(){this.dimensionUpdated()&&this.dimensions.allDimensions.push(this.newDimension)},addAttr:function(a){this.attributes[a.id]=a},detachAttrForms:function(a){for(var b=0,c=a.attributeForms.length;b<
c;b++){var d=this.forms[a.attributeForms[b]],e=d.attributes.indexOf(a.id);-1<e&&d.attributes.splice(e,1)}},deleteBaseTable:function(a){for(var b=0;b<this.baseTables.length;b++)if(a.id==this.baseTables[b].id){this.deleteTable(a);this.baseTables.splice(b,1);break}},deleteAttr:function(a){this.detachAttrForms(a);delete this.attributes[a.id]},addMetric:function(a){this.metrics[a.id]=a},detachMetricFacts:function(a){for(var b=0,c=a.facts.length;b<c;b++){var d=this.forms[a.facts[b]],e=d.metrics.indexOf(a.id);
-1<e&&d.metrics.splice(e,1)}},deleteMetric:function(a){this.detachMetricFacts(a);delete this.metrics[a.id]},addCompMetric:function(a){this.compMetrics[a.id]=a},deleteCompMetric:function(a){delete this.compMetrics[a.id]},addTable:function(a){this.tables[a.id]=a},deleteTable:function(a){delete this.tables[a.id]},addCondition:function(a){this.conditions[a.id]=a},deleteCondition:function(a){delete this.conditions[a.id]},addJoin:function(a){this.joins[a.id]=a},deleteJoin:function(a){delete this.joins[a.id]},
addSegment:function(a){this.segments[a.databaseId]=a},deleteSegment:function(a){delete this.segments[a.databaseId]},addDatum:function(a){this.data[a.databaseId]=a},deleteDatum:function(a){delete this.data[a.databaseId]},fullDeleteTable:function(a){for(var b=0;b<a.joins.length;b++){for(var c=a.joins[b],d=0;d<c.conditions.length;d++)this.deleteCondition(c.conditions[d]);this.fullDeleteTable(c.table);this.deleteJoin(c)}this.deleteTable(a)},attachSegment:function(a,b){0>this.hasSegment(a,b.databaseId)&&
a.columns.segments.push(b)},detachSegment:function(a,b){var c=this.hasSegment(a,b);-1<c&&a.columns.segments.splice(c,1)},attachDatum:function(a,b){0>this.hasDatum(a,b.databaseId)&&a.columns.data.push(b)},detachDatum:function(a,b){var c=this.hasDatum(a,b);-1<c&&a.columns.data.splice(c,1)},isFilter:function(a){var b=a.indexOf("_");return"filter"==a.substring(b+1)},hasSegment:function(a,b){for(var c=0;c<a.columns.segments.length;c++)if(a.columns.segments[c].databaseId==b)return c;return-1},hasDatum:function(a,
b){for(var c=0;c<a.columns.data.length;c++)if(a.columns.data[c].databaseId==b)return c;return-1},setMetricGroupChild:function(a,b){b in this.metricGroups?this.metricGroups[b].push(a):this.metricGroups[b]=[a]},deleteMetricGroupChild:function(a){for(var b in this.metricGroups)if(this.metricGroups[b]instanceof Array){var c=this.metricGroups[b].indexOf(a);-1<c&&this.metricGroups[b].splice(c,1)}},updateMetricGroupChildren:function(a,b){this.deleteMetricGroupChild(a);this.setMetricGroupChild(a,b)},setDimensionChild:function(a,
b){b in this.dimensions.dimensionChildren?this.dimensions.dimensionChildren[b].push(a):this.dimensions.dimensionChildren[b]=[a]},deleteDimensionChild:function(a){for(var b in this.dimensions.dimensionChildren)if(this.dimensions.dimensionChildren[b]instanceof Array){var c=this.dimensions.dimensionChildren[b].indexOf(a);-1<c&&this.dimensions.dimensionChildren[b].splice(c,1)}},updateDimensionChildren:function(a,b){this.deleteDimensionChild(a);this.setDimensionChild(a,b)},updateDimensionSelections:function(a,
b){this.attributes[a].dimension=b;-1==this.dimensions.allDimensions.indexOf(b)&&this.dimensions.allDimensions.push(b);this.updateDimensionChildren(a,b)},detectParentCycle:function(a,b){return b.id==a?!0:"Self"===b.parent?!1:this.detectParentCycle(a,this.attributes[b.parent])},attrsOrMetrics:function(a){return 0===a||"0"===a?this.attributes:1===a||"1"===a?this.metrics:null}});steal.executed("js/observes/RepositoryCreateAttrsObserve.js");
can.Control.extend("Sentrana.Testing.RepositoryManager",{pluginName:"sentrana_testing_repository_manager",model:null},{init:function(){this.model=this.options.model;this.tests="attrToFormLinking metricToFactLinking parentCycle dimensionLinking formWellDefined correctColumnClass".split(" ")},update:function(a,b){this.debug=a;this.alertLevel=b},runAllTests:function(a){if(this.debug){this.precipEvent=a;for(var a=0,b=this.tests.length;a<b;a++)this[this.tests[a]]()}},sendAlert:function(a){switch((this.alertLevel>>
1)%2){case 1:a("Invariant: "+a.invariant)}},attrToFormLinking:function(){for(var a in this.model.attributes){var b=this.model.attributes[a];if(b.isLocal)for(var c=0,d=b.attributeForms.length;c<d;c++){var e=this.model.forms[b.attributeForms[c]];0>e.attributes.indexOf(a)&&this.sendAlert({invariant:"Attribute->Form Linking",errorMsg:e.id+" has no child "+a})}}},metricToFactLinking:function(){for(var a in this.model.metrics){var b=this.model.metrics[a];if(b.isLocal)for(var c=0,d=b.facts.length;c<d;c++){var e=
this.model.forms[b.facts[c]];0>e.metrics.indexOf(a)&&this.sendAlert({invariant:"Metric->Fact Linking",errorMsg:e.id+" has no child "+a})}}},parentCycle:function(){for(var a in this.model.attributes){var b=this.model.attributes[a];b.isLocal&&"Self"!=b.parent&&this.model.detectParentCycle(a,this.model.attributes[b.parent])&&this.sendAlert({invariant:"Parent Cycle",errorMsg:a+" has a parent cycle"})}},dimensionLinking:function(){for(var a in this.model.attributes){var b=this.model.attributes[a];if(b.isLocal)for(var c in this.model.dimensions.dimensionChildren){var d=
this.model.dimensions.dimensionChildren[c];$.isArray(d)&&-1<d.indexOf(a)&&b.dimension!=c&&this.sendAlert({invariant:"Dimension Linking",errorMsg:c+" links to "+a+" links to "+b.dimension})}}},formWellDefined:function(){for(var a in this.model.forms){var b=this.model.forms[a];if(b.isLocal){0<b.metrics.length&&0<b.attributes.length&&this.sendAlert({invariant:"formWellDefined",errorMsg:a+" has both "+b.attributes.length+" attributes, and "+b.metrics.length+" metrics"});0<b.metrics.length&&1!=b.formType&&
this.sendAlert({invariant:"formWellDefined",errorMsg:a+" has "+b.metrics.length+" metrics, has type "+b.formType});0<b.attributes.length&&0!==b.formType&&this.sendAlert({invariant:"formWellDefined",errorMsg:a+" has "+b.attributes.length+" attributes, has type "+b.formType});for(var c=0,d=b.metrics.length;c<d;c++)b.metrics[c].colType!=b.formType&&this.sendAlert({invariant:"formWellDefined",errorMsg:a+" ascribes a metric "+b.metrics[c]+" of type "+b.metrics[c].colType});for(d=b.metrics.length;c<d;c++)b.attributes[0].colType!=
b.formType&&this.sendAlert({invariant:"formWellDefined",errorMsg:a+" ascribes an attribute "+b.attributes[0]+" of type "+b.attributes[0].colType})}}},getColumnIDFromElement:function(a){return a.parent().parent().attr("class")},correctColumnClass:function(){for(var a in this.model.attributes)this.model.attributes[a].isLocal&&($("."+a)||this.sendAlert({invariant:"correctColumnClass",errorMsg:a+" has no table row"}));for(var b in this.model.metrics)this.model.metrics[b].isLocal&&($("."+b)||this.sendAlert({invariant:"correctColumnClass",
errorMsg:b+" has no table row"}))}});steal.executed("js/controllers/RepositoryManagerController.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.NewDimension",{defaults:{width:555}},{init:function(){this._super(["OK","CANCEL"],50);this.$name=$(".input-name",this.element);this.element.dialog(this.getDialogOptions());this.removeExInCorner()},handleOK:function(){var a=this.$name.val();this.model.addDimension(a);this.model.attr("newDimension",this.$name.val());this.model.dimensions.dimensionParents[a]=this.attrID;this.closeDialog()},handleCANCEL:function(){this.closeDialog()},open:function(a,
b){this.model=a;this.attrID=b;this.openDialog()},'input[name="dimension-name"] keyup':function(a){this.enableButton("OK",""!==$.trim(a.val()))}});steal.executed("js/controllers/NewDimensionDialog.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.NewMetricGroup",{defaults:{width:555}},{init:function(){this._super(["OK","CANCEL"],50);this.$name=$(".input-name",this.element);this.element.dialog(this.getDialogOptions());this.removeExInCorner()},handleOK:function(){this.$name.val();this.model.attr("newMetricGroup",this.$name.val());this.closeDialog()},handleCANCEL:function(){this.closeDialog()},open:function(a){this.model=a;this.openDialog()},'input[name="dimension-name"] keyup':function(a){this.enableButton("OK",
""!==$.trim(a.val()))}});steal.executed("js/controllers/NewMetricGroupDialog.js");Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.MaltypedData",{defaults:{width:440}},{init:function(){this._super(["OK"],50);this.element.dialog(this.getDialogOptions());this.removeExInCorner()},handleOK:function(){this.closeDialog()},open:function(){this.openDialog()}});steal.executed("js/controllers/MaltypedDataDialog.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.DynamicElements",{defaults:{width:440}},{init:function(){this._super(["OK","CANCEL"],50);this.element.dialog(this.getDialogOptions())},handleOK:function(){for(var a=this.attribute,b=this.model,c=0;c<b.selectors.length;c++){var d=b.selectors[c];a.dynamicElements[d].selected=$(".input-selected",$("."+d)).prop("checked");a.dynamicElements[d].value=$(".input-value",$("."+d)).val()}this.closeDialog()},open:function(a,b){this.model=a;this.attribute=
b;for(var c=0;c<a.selectors.length;c++){var d=a.selectors[c];$(".input-selected",$("."+d)).prop("checked",b.dynamicElements[d].selected);$(".input-value",$("."+d)).val(b.dynamicElements[d].value)}this.openDialog()}});steal.executed("js/controllers/DynamicElementsDialog.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.SelectData",{defaults:{width:440,model:null}},{init:function(){this._super(["OK","CANCEL"],50);this.model=this.options.model;this.element.dialog(this.getDialogOptions())},insertData:function(a){var b=$(".form-data",this.element).empty(),c;for(c in this.model.forms){var d=this.model.forms[c];if(d.isLocal&&d.formType==this.elem.colType){var e=$("<input></input>").val(c).attr("type",this.inputType).attr("name","selectdata").addClass(c);-1<a.indexOf(c)?
e.prop("checked",!0):this.elem.dataType!=d.dataType&&e.attr("disabled","disabled");b.append(e).append("&nbsp"+d.name+"<br>")}}},collectSelections:function(){for(var a in this.model.forms)this.model.forms[a].isLocal&&($("."+a).is(":checked")?this.model.attachToForm(this.elem.id,a):this.model.detachFromForm(this.elem.id,a));return[]},handleOK:function(){this.collectSelections();this.model.attr("updatedFormSelection",(this.model.updatedFormSelection+1)%2);this.closeDialog()},open:function(a){var a=this.model.getAttrOrMetr(a),
b;0<a.colType?(this.inputType="radio",b=a.facts):(this.inputType="checkbox",b=a.attributeForms);this.elem=a;this.insertData(b);this.openDialog()}});steal.executed("js/controllers/SelectDataDialog.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.Segments",{defaults:{width:440,model:null}},{init:function(){this._super(["OK","CANCEL","ALL"],50);this.model=this.options.model;this.element.dialog(this.getDialogOptions())},insertData:function(){for(var a=$(".form-data",this.element).empty(),b=0;b<this.columns.length;b++){var c=this.columns[b];if(void 0!==this.model.segments[c]){var d=$("<input></input>").val(c).attr("type","checkbox").addClass(c);-1<this.model.hasSegment(this.table,c)&&d.prop("checked",
!0);a.append(d).append("&nbsp"+c+"<br>")}}},collectSelections:function(){for(var a=0;a<this.columns.length;a++){var b=this.columns[a];if($("."+b,this.element).is(":checked")){var c=this.model.segments[b];this.model.attachSegment(this.table,c)}else this.model.detachSegment(this.table,c)}},handleOK:function(){this.collectSelections();this.closeDialog()},handleALL:function(){for(var a=0;a<this.columns.length;a++)$("."+this.columns[a],this.element).prop("checked",!0)},open:function(a,b){this.table=a;
this.columns=b;this.insertData();this.openDialog()}});steal.executed("js/controllers/SegmentsDialog.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.Data",{defaults:{width:440,model:null}},{init:function(){this._super(["OK","CANCEL","ALL"],50);this.model=this.options.model;this.element.dialog(this.getDialogOptions())},insertData:function(){for(var a=$(".form-data",this.element).empty(),b=0;b<this.columns.length;b++){var c=this.columns[b];if(void 0!==this.model.data[c]){var d=$("<input></input>").val(c).attr("type","checkbox").addClass(c);-1<this.model.hasDatum(this.table,c)&&d.prop("checked",
!0);a.append(d).append("&nbsp"+c+"<br>")}}},collectSelections:function(){for(var a=0;a<this.columns.length;a++){var b=this.columns[a];if($("."+b,this.element).is(":checked")){var c=this.model.data[b];this.model.attachDatum(this.table,c)}else this.model.detachDatum(this.table,c)}},handleOK:function(){this.collectSelections();this.closeDialog()},handleALL:function(){for(var a=0;a<this.columns.length;a++)$("."+this.columns[a],this.element).prop("checked",!0)},open:function(a,b){this.table=a;this.columns=
b;this.insertData();this.openDialog()}});steal.executed("js/controllers/DataDialog.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.EditMetric",{defaults:{width:440},model:null},{init:function(){this._super(["OK","CANCEL"],50);this.metric=null;this.model=this.options.model;this.element.dialog(this.getDialogOptions());this.$name=$('input[name="name"]',this.element);this.$description=$('input[name="description"]',this.element);this.$datatype=$('input[name="datatype"]',this.element);this.$operation=$('input[name="operation"]',this.element);this.$formatstring=$('input[name="formatstring"]',
this.element);this.removeExInCorner()},dataTypeToString:function(a){switch(parseInt(a,10)){case 0:return"Datetime";case 1:return"String";case 2:return"Currency";case 3:return"Number";case 4:return"Percentage";case 5:return"Boolean";default:return"Not a valid datatype (will default to String)"}},dataTypeToInt:function(a){switch(a){case "Datetime":return 0;case "String":return 1;case "Currency":return 2;case "Number":return 3;case "Percentage":return 4;case "Boolean":return 5;default:return 1}},handleOK:function(){var a=
this.metric;a.name=this.$name.val();a.description=this.$description.val();a.dataType=this.dataTypeToInt(this.$datatype.val());a.operation=this.$operation.val();a.formatString=this.$formatstring.val();this.model.attr("updatedMetric",(this.model.updatedMetric+1)%2);this.closeDialog()},handleCANCEL:function(){this.closeDialog()},open:function(a){this.metric=a;this.$name.val(a.name);this.$description.val(a.description);this.$datatype.val(this.dataTypeToString(a.dataType));this.$operation.val(a.operation);
this.$formatstring.val(a.formatString);this.openDialog()}});steal.executed("js/controllers/EditMetricDialog.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.EditAttribute",{defaults:{width:440},model:null},{init:function(){this._super(["OK","CANCEL"],50);this.attr=null;this.model=this.options.model;this.element.dialog(this.getDialogOptions());this.$name=$('input[name="name"]',this.element);this.$description=$('input[name="description"]',this.element);this.removeExInCorner()},handleOK:function(){var a=this.attr;a.name=this.$name.val();a.description=this.$description.val();this.model.attr("updatedAttribute",
(this.model.updatedAttribute+1)%2);this.closeDialog()},handleCANCEL:function(){this.closeDialog()},open:function(a){this.attr=a;this.$name.val(a.name);this.$description.val(a.description);this.openDialog()}});steal.executed("js/controllers/EditAttributeDialog.js");
Sentrana.Controllers.FirstLookDialog("Sentrana.Dialogs.RootFilter",{defaults:{width:700}},{init:function(){this._super(["OK","CANCEL","DELETE"],50);this.attr=null;this.model=this.options.model;this.$colname=$(".input-name",this.element);this.$comparison=$(".select-comp",this.element);this.$literal=$(".input-literal",this.element);this.$queryResult=$(".query-result",this.element);this.element.dialog(this.getDialogOptions())},handleOK:function(){null===this.rootFilter&&this.model.getNewRootFilter(this.table);
this.table.rootFilter.lvalue=this.$colname.val();this.table.rootFilter.rvalue=this.$literal.val();this.table.rootFilter.comparisonOperator=this.$comparison.val();this.closeDialog()},handleCANCEL:function(){this.closeDialog()},handleDELETE:function(){this.table.rootFilter=null;this.closeDialog()},open:function(a,b){this.table=a;this.tableInfo=b;this.rootFilter=a.rootFilter;null!==this.rootFilter?(this.$colname.val(this.rootFilter.lvalue),this.$literal.val(this.rootFilter.rvalue),this.$comparison.val(this.rootFilter.comparisonOperator)):
(this.$colname.val(""),this.$literal.val(""),this.$comparison.val(0));this.$queryResult.val("");this.openDialog()},displayQuery:function(a){a.errorMsg?(this.$queryResult.html(a.errorMsg),this.$queryResult.css("color","red")):this.$queryResult.html(a.result)},".button-run-query click":function(){var a=this.$literal.val(),b=this;$.ajax({type:"POST",url:"/BIQSvc/RepoMan.svc/RunTestQuery",contentType:"application/json",data:JSON.stringify({commandString:a,tableInfo:b.tableInfo}),success:function(a){b.displayQuery(a)}})}});
steal.executed("js/controllers/RootFilterDialog.js");
can.Control.extend("Sentrana.Controller.EditRepository",{pluginName:"sentrana_edit_repository",defaults:{app:null,model:null}},{init:function(){this.element.html(can.view("templates/pg-repoman-edit.ejs",{choices:this.options.app.dwChoicesModel.choices,jsonchoices:this.options.app.dwChoicesModel.jsonChoices}));$(".button-save-changes",this.element).button();$(".button-delete-repository",this.element).button();this.repositoryConfig=new Sentrana.Models.RepositoryCreateAttrs;this.metaDataController=$(".table-metadata",
this.element).sentrana_handle_metadata({data:null,model:this.repositoryConfig}).control();this.updateView();this.comparisons="= > >= < <= Contains NotContain".split(" ");this.joins=["Inner","Left","Right","Full"]},updateView:function(){},parseJSONData:function(){this.repositoryConfig.clear()},parseXMLData:function(a){var b=this.repositoryConfig,c=a.metadata,d=a.dataWarehouse;b.clear();for(a=0;a<c.attributeForms.length;a++){var e=c.attributeForms[a];b.setNewForm(e.id,e.name,e.dataType,0,null,!0)}for(a=
0;a<c.attributes.length;a++){var e=c.attributes[a],h="Self";e.parentAttributeId&&(h=e.parentAttributeId);e=b.getNewAttr(e.id,e.name,null,e.dimension.name,h,e.attributeFormIds);b.setDimensionChild(e.id,e.dimension)}for(a=0;a<c.attributes.length;a++)if(e=c.attributes[a],e.parentAttributeId)for(h=0;h<e.parentAttributeId.length;h++){var g=e.parentAttributeId[h];g!=e.id&&b[g]&&(b[g].parent=e.id)}for(a=0;a<c.facts.length;a++)e=c.facts[a],b.setNewForm(e.id,e.name,e.dataType,1,null,!0);for(a=0;a<c.metrics.simpleMetrics.length;a++)e=
c.metrics.simpleMetrics[a],b.getNewMetric(e.id,e.name,null,[e.factId]);for(a=0;a<c.metrics.compositeMetrics.length;a++)e=c.metrics.compositeMetrics[a],h=0,"Sentrana.BIQ.Conceptual.PerMetric"==e.metricType&&(h=1),b.getNewCompMetric(e.id,e.name,h,e.metricIds[0],e.metricIds[1],e.dataType);this.selectedRepos=[];this.selectedRepoIds=[];this.connectionInfo=d.connection;for(a=0;a<d.tables.length;a++)b.baseTables.push(this.parseTable(d.tables[a],null).id)},parseTable:function(a,b){var c=this.repositoryConfig;
0>this.selectedRepos.indexOf(a.id)&&(this.selectedRepos.push(a.id),this.selectedRepoIds.push(a.databaseId));c.repoCount[a.id]=void 0===c.repoCount[a.id]?0:c.repoCount[a.id]+1;var d=c.getNewTable(a.id+"_"+c.repoCount[a.id],a.id,0,b);this.parseRootFilter(a,d);for(var e=0;e<a.columns.length;e++){var h=a.columns[e];null===h.datum?d.columns.segments.push(c.getNewSegment(h.segment.databaseId,h.segment.attributeId)):d.columns.data.push(c.getNewDatum(h.datum.databaseId,h.datum.factId))}for(e=0;e<a.joins.length;e++)this.parseJoin(d,
a.joins[e]);return d},parseJoin:function(a,b){var c=this.parseTable(b.table,a),c=this.repositoryConfig.getNewJoin(a,c);c.joinType=b.joinOperator;c.conditions=[];for(var d=0;d<b.condition.length;d++)this.parseCondition(b.condition[d],c)},parseCondition:function(a,b){var c=this.repositoryConfig.getNewCondition(b);c.lvalue=a.columnId1;c.rvalue=a.columnId2;null!==a.literal&&(c.literal=!0,c.rvalue=a.literal)},parseRootFilter:function(a,b){if(null!==a.rootFilter){var c=this.repositoryConfig.getNewRootFilter(b);
c.lvalue=a.rootFilter.columnId1;c.rvalue=a.rootFilter.literal;c.comparisonOperator=this.parseComparisonOperator(a.rootFilter.operator)}},parseComparisonOperator:function(a){this.comparisons.indexOf(a)},getMultiData:function(){this.multiData=[];for(var a=this,b=0;b<this.selectedRepoIds.length;b++)$.ajax({type:"POST",url:"/BIQSvc/RepoMan.svc/ReviewDBTableData",contentType:"application/json",data:JSON.stringify({connectionInfo:this.connectionInfo,tableName:this.selectedRepoIds[b]}),success:function(b){a.collectRepositories(b)}})},
collectRepositories:function(a){this.multiData.push(a);this.multiData.length==this.selectedRepos.length&&this.metaDataController.update(this.multiData,this.selectedRepos,!0)},".xmlrepository-list li click":function(a){var b=this;$(".repository-edit li").removeClass("viewing");$(a).addClass("viewing");this.selectedRepo=$(a).attr("class").replace("viewing","").replace(" ","");$.ajax({type:"GET",url:"/BIQSvc/RepoMan.svc/Repository/"+b.selectedRepo,contentType:"application/json",dataType:"JSON",success:function(a){$(".repository-edit .metadata").empty();
b.parseXMLData(a);b.getMultiData()}})},".jsonrepository-list li click":function(a){var b=this;$(".repository-edit li").removeClass("viewing");$(a).addClass("viewing");this.selectedRepo=$(a).attr("class").replace("viewing","").replace(" ","");$.ajax({type:"GET",url:"/BIQSvc/RepoMan.svc/JSONRepository/"+b.selectedRepo,contentType:"application/json",dataType:"JSON",success:function(a){$(".repository-edit .metadata").empty();b.parseJSONData(a);b.getMultiData()}})},".button-delete-repository click":function(){var a=
this;$.ajax({type:"DELETE",url:"/BIQSvc/RepoMan.svc/Repository/"+a.selectedRepo,contentType:"application/json",dataType:"JSON",success:function(){$(".repository-list ."+a.selectedRepo).remove();alert("Repository Removed")}})}});steal.executed("js/controllers/RepositoryEditPageController.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.DeleteComment",{pluginName:"sentrana_dialogs_delete_comment",defaults:{title:"Delete Comment",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.comment=void 0;this.$comment=this.element.find(".comment-item-msg");this.$desc=this.element.find(".comment-item-desc")},loadForm:function(a){this.$desc.text(Sentrana.getMessageText(window.app_resources.app_msg.comment_operation.remove.confirm_msg));
this.$comment.text(a.msg).show()},open:function(a,b){this.loadForm(a);this.comment=a;this.commentStreamModel=b;this.openDialog()},handleCANCEL:function(){this.closeDialog()},handleOK:function(){var a=this;this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.comment_operation.remove.processing_msg));var b=this.comment.destroy();b.done(function(){a.commentStreamModel.removeComment(a.comment.cid);a.closeDialog()});b.fail(function(){a.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.delete_operation.failed),
"fail")})},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/DeleteCommentDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.EditComment",{pluginName:"sentrana_dialogs_edit_comment",defaults:{title:"Edit Comment",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.comment=void 0;this.$commentText=this.element.find(".comment-text-edit");this.$desc=this.element.find(".comment-item-desc")},handleCANCEL:function(){this.closeDialog()},
handleOK:function(){var a=this,b=this.$commentText.val();if(""!==$.trim(b)){this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.comment_operation.update.processing_msg));var c=this.comment.msg;this.comment.attr("msg",this.$commentText.val());this.comment.save().done(function(){a.updateStatus(!1,"Success!");a.options.parent.refreshComments(a.commentStreamModel);a.closeDialog()}).fail(function(){a.comment.msg=c;a.updateStatus(!1,"The update operation failed.","fail")}).always(function(){})}else a.updateStatus(!1,
"Empty comment can not be saved.","fail")},loadForm:function(a){this.$desc.text("Please write comment to edit:");this.$commentText.val(a.msg).show()},open:function(a,b){this.loadForm(a);this.comment=a;this.commentStreamModel=b;this.openDialog();var c=this.$commentText.val();this.$commentText.focus().val("").val(c)},".comment-text-edit keyup":function(a,b){0>=$.trim(this.$commentText.val()).length||b.ctrlKey&&13===b.keyCode&&this.handleOK()},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});
steal.executed("js/controllers/EditCommentDialog.js");
(function(){function a(a){this.printPageTemplate=$('<div id="print-template"></div>');window.chrome||this.printPageTemplate.append(can.view("templates/printPreviewSettings.ejs",{}));$.each(a.childNodes,function(b,c){1===c.nodeType&&(a.originalDisplay[b]=c.style.display,c.style.display="none")});a.printPreviewContainer.html(this.printPageTemplate).show();var e=a.tableData,i=0;if(!a.chartonly)for(var j=b(a),k=a.rowChunk,l=e.tableRows,n=0,o=0,t=0,s=0,q=l.length;s<q;s+=k){t++;for(var m=l.slice(s,s+k),
r=97,u="",n=n+m.length,w=0;w<j.length;w++){1<j.length&&(u="-"+String.fromCharCode(r++));i++;for(var e=d(i,a,j[w].cols),y=e.find("tbody"),v=0;v<m.length;v++)y.append(can.view("templates/printGridRow.ejs",{trclass:"",cols:m[v].cols.slice(j[w].startIndex,j[w].endIndex+1)}));e.find(".print-table-pagination").text("Displaying Rows:"+(o+1)+"-"+n);e.find(".print-table-pageno").text("Page: "+t+u)}o+=m.length}a.chartOptions&&(e=c(i+1,a),i=e.parent().find(".print-chart-container"),i.addClass("print-chart-container-border").find(".print-chart-ctr").addClass("print-chart-ctr-padding"),
i.sentrana_report_chart(a.chartOptions));window.chrome?setTimeout(function(){window.print();h(a)},1500):($(".btn-close-print-preview",this.printPageTemplate).click(function(){h(a)}),$(".btn-print-print-preview",this.printPageTemplate).click(function(){window.print();h(a)}),$("button",this.printPageTemplate).button())}function b(a){var b,c=a.columnChunk,d=a.tableData.tablecolumns,e=[],a=0;for(b=d.length;a<b;a+=c){var h=d.slice(a,a+c);e.push({startIndex:a,endIndex:(a+c>b?b:a+c)-1,cols:h})}return e}
function c(a,b){this.printPageTemplate.append(can.view("templates/printTemplate.ejs",{pageNo:a,user:b.user.fullName,pageSize:b.pageSize}));var c=$("#page-"+a,this.printPageTemplate),c=$(".print-grid-container",c);e(c,b);c.append('<div class="clear"></div>');return c}function d(a,b,c){this.printPageTemplate.append(can.view("templates/printTemplate.ejs",{pageNo:a,user:b.user.fullName,pageSize:b.pageSize}));a=this.printPageTemplate.find("#page-"+a);a=a.find(".print-grid-container",a);e(a,b);a.append(can.view("templates/printGridBodyTemplate.ejs",
{tablecolumns:c}));a.append('<div class="clear"></div>');return a}function e(a,b){var c=b.report,d=c.formatFilter(c.definition.filter);a.append(can.view("templates/printGridDescTemplate.ejs",{reportTitle:c.name,reportModifiedDate:Sentrana.formatCommentDate(new Date(c.createDate)),reportFilter:d,printDate:Sentrana.formatCommentDate(new Date)}))}function h(a){setTimeout(function(){$.each(a.childNodes,function(b,c){1===c.nodeType&&c.style.display&&(c.style.display=a.originalDisplay[b])});a.printPreviewContainer.html("").hide();
a.parent&&a.parent.trigger("print_closed")},500)}window.ClientSidePrinting=function(b){var c={printPreviewContainer:$("#print-preview-container"),originalDisplay:[],rowChunk:window.app_resources.print_config.rows_in_page,columnChunk:window.app_resources.print_config.columns_in_page,pageOrientation:window.app_resources.print_config.page_orientation,pageSize:window.app_resources.print_config.page_size,childNodes:document.body.childNodes},b=$.extend({},c,b);a(b);return this}})();steal.executed("js/ClientSidePrinting.js");
can.Control.extend("Sentrana.Controllers.BookletComposition",{pluginName:"sentrana_booklet_composition",defaults:{app:null,bookletModel:null,bookletDefinModel:null,showEdit:!1}},{init:function(){this.initialize()},initialize:function(){this.updateUI();this.saveUpdateBookletDlg=$("#save-update-booklet-dialog").sentrana_dialogs_save_update_booklet({app:this.options.app,parent:this}).control();var a=this;$.when(this.element).done(function(){a.bookletDefinModel=a.options.bookletDefinModel;a.bookletDefinModel.setBookletDefinition(a.options.bookletModel)})},
updateSavedReports:function(){var a=this.getMySavedReports();!a.length||0>=a.length?$(".mover-box-left",this.element).html(can.view("templates/loadingwheel.ejs",{message:Sentrana.getMessageText(window.app_resources.app_msg.booklet_operation.create.no_report_error_msg),hideImage:!0})):this.updateSavedReportListView(a)},updateSavedReportListView:function(a){$(".mover-box-left",this.element).html(can.view("templates/savedReporsForBooklet.ejs",{myReports:a}))},refreshReports:function(a){this.bookletDefinModel.setBookletReportSelected(-1);
var b=this.bookletDefinModel.getReportPositionByName(a.name);this.bookletDefinModel.bookletReports[b]=a;this.options.app.BookletViewController.reloadReportId=a.id;this.bookletDefinModel.setBookletReportSelected(b);this.updateReportOfModel(a)},updateReportOfModel:function(a){for(var b=this.options.bookletModel.reports,c=0;c<b.length;c++)if(b[c].id===a.id){b[c]=a;break}},updateUI:function(){this.bookletStructure=[];var a=this.getMySavedReports();this.element.html(can.view("templates/booklet-composition-panel.ejs",
{myReports:a}));!1===a?$(".mover-box-left",this.element).html(can.view("templates/loadingwheel.ejs",{message:Sentrana.getMessageText(window.app_resources.app_msg.report_load.processing),hideImage:!1})):(!a.length||0>=a.length)&&$(".mover-box-left",this.element).html(can.view("templates/loadingwheel.ejs",{message:Sentrana.getMessageText(window.app_resources.app_msg.booklet_operation.create.no_report_error_msg),hideImage:!0}));this.makeCompositionPanelCollapsible();this.element.find("button").button();
this.$viewBtn=this.element.find(".booklet-view-button");this.$saveBtn=this.element.find(".booklet-save-button");this.$savAsBtn=this.element.find(".booklet-save-as-button");this.$shareBtn=this.element.find(".booklet-share-button");this.$moveBtn=this.element.find(".dual-list-move-button");this.$orderBtn=this.element.find(".order-button");this.$viewBtn.button({disabled:!0});this.$viewBtn.addClass("disabled");this.$saveBtn.button({disabled:!0});this.$saveBtn.addClass("disabled");this.$savAsBtn.button({disabled:!0}).hide();
this.$shareBtn.button({disabled:!0}).hide();this.$savAsBtn.addClass("disabled");this.$shareBtn.addClass("disabled");this.$moveBtn.addClass("ui-state-disabled");this.$orderBtn.addClass("ui-state-disabled");this.options.bookletModel&&(this.element.find(".booklet-composition-panel-header-title").text("Booklet Composition: "+this.options.bookletModel.name+" by "+this.options.bookletModel.createUser),this.$savAsBtn.show(),this.$shareBtn.show());this.$spinner=this.element.find(".spinner").hide();this.$executionMessage=
this.element.find(".execution-message")},makeCompositionPanelCollapsible:function(){this.element.find(".booklet-composition-panel-header").click({controller:this},this.CompositionPanelOnClick)},CompositionPanelOnClick:function(a){$(this).find(".indicator").toggleClass("fa-minus-square fa-plus-square");a.data.controller.element.find(".booklet-composition-container").slideToggle("normal")},getMySavedReports:function(){if(!this.options.app.reportDefnInfoList||!this.options.app.reportDefnInfoList.savedReports)return!1;
var a=this.options.app.retrieveUserInfo();return $.grep(this.options.app.reportDefnInfoList.savedReports,function(b){return b.createUserId==a.userID})},getOriginalReport:function(a){return!this.options.app.reportDefnInfoList||!this.options.app.reportDefnInfoList.savedReports?!1:$.grep(this.options.app.reportDefnInfoList.savedReports,function(b){return b.id===a})[0]},".mover-box-left .mover-box-item click":function(a,b){$(a).hasClass("mover-box-item-selected")?$(a).removeClass("mover-box-item-selected"):
(b.ctrlKey||this.element.find(".mover-box-left .mover-box-item").removeClass("mover-box-item-selected"),$(a).addClass("mover-box-item-selected"));this.enableDisableMoveButton()},enableDisableMoveButton:function(){0<this.element.find(".mover-box-left").find(".mover-box-item.mover-box-item-selected").length?this.$moveBtn.removeClass("ui-state-disabled"):this.$moveBtn.addClass("ui-state-disabled")},".mover-box-right .mover-box-item click":function(a){this.element.find(".mover-box-right .mover-box-item").removeClass("mover-box-item-selected");
$(a).addClass("mover-box-item-selected");this.bookletDefinModel.setBookletReportSelected($(a).attr("id"))},enableDisableOrderButton:function(){0<this.element.find(".mover-box-right").find(".mover-box-item.mover-box-item-selected").length?this.$orderBtn.removeClass("ui-state-disabled"):this.$orderBtn.addClass("ui-state-disabled")},".mover-box-left .mover-box-item dblclick":function(a){this.addSingleReportTobooklet({id:$(a).attr("id"),name:$(a).attr("title")});this.element.find(".booklet-save-execution-message").text("")},
addNewReport:function(a){this.bookletDefinModel.addReportToBooklet(a);this.options.bookletModel.reports.push(a);$(".booklet-entry.booklet-entry-selected").find(".booklet-details-last-total-report").text(this.getBookletStructure().length)},isReportExistsWithSameName:function(a){var b=this.getBookletStructure();return 0<$.grep(b,function(b){return $.trim(b.name)===$.trim(a)}).length},addSingleReportTobooklet:function(a){var b=this;b.isSameNameExist(a.name)?Sentrana.ConfirmDialog(Sentrana.getMessageText(window.app_resources.app_msg.booklet.duplicate_report.dialog_title),
Sentrana.getMessageText(window.app_resources.app_msg.booklet.duplicate_report.dialog_msg_for_single,a.name),function(){b.bookletDefinModel.addReportToBooklet(b.createBookletReport(a.id));b.options.bookletModel&&b.options.bookletModel.attr("reportsRefreshed",!1);b.element.find(".mover-box-left .mover-box-item").removeClass("mover-box-item-selected");b.enableDisableMoveButton()},function(){b.element.find(".mover-box-left .mover-box-item").removeClass("mover-box-item-selected");b.enableDisableMoveButton()},
!0):(b.bookletDefinModel.addReportToBooklet(b.createBookletReport(a.id)),b.element.find(".mover-box-left .mover-box-item").removeClass("mover-box-item-selected"),b.enableDisableMoveButton(),b.options.bookletModel&&b.options.bookletModel.attr("reportsRefreshed",!1))},".dual-list-move-button click":function(){var a=this,b=this.getSelectedReports(),c=[];if(!(0>=b.length))if(this.element.find(".booklet-save-execution-message").text(""),1===b.length)this.addSingleReportTobooklet(b[0]);else{for(var c=this.getDuplicateReportInfo(b),
b=$.grep(b,function(a){return-1===$.inArray(a,c.duplicateReports)}),d=0;d<b.length;d++)a.bookletDefinModel.addReportToBooklet(a.createBookletReport(b[d].id)),a.element.find(".mover-box-left .mover-box-item").removeClass("mover-box-item-selected"),this.enableDisableButtons(),this.enableDisableMoveButton(),a.options.bookletModel&&a.options.bookletModel.attr("reportsRefreshed",!1);0<c.duplicateReports.length&&Sentrana.ConfirmDialog(Sentrana.getMessageText(window.app_resources.app_msg.booklet.duplicate_report.dialog_title),
Sentrana.getMessageText(window.app_resources.app_msg.booklet.duplicate_report.dialog_msg_for_multiple,c.duplicateReportsName),function(){for(d=0;d<c.duplicateReports.length;d++)a.bookletDefinModel.addReportToBooklet(a.createBookletReport(c.duplicateReports[d].id));a.element.find(".mover-box-left .mover-box-item").removeClass("mover-box-item-selected");a.enableDisableMoveButton();a.options.bookletModel&&a.options.bookletModel.attr("reportsRefreshed",!1)},function(){},!0)}},createBookletReport:function(a){for(var b=
this.getOriginalReport(a),a=b.name,c=0;this.isSameNameExist(a);)c++,a=b.name+"_"+c;b=jQuery.extend(!0,{},b);b.name=a;return b},getDuplicateReportInfo:function(a){for(var b=[],c="",d=0,e=0;e<a.length;e++)this.isSameNameExist(a[e].name)&&(b.push(a[e]),0<c.length&&(c+="<br/>"),d++,c+=d+"."+a[e].name);return{duplicateReports:b,duplicateReportsName:c}},enableDisableButtons:function(){0<this.getBookletStructure().length?(this.$viewBtn.button("option",{disabled:!1}),this.$viewBtn.removeClass("disabled"),
this.$saveBtn.button("option",{disabled:!1}),this.$saveBtn.removeClass("disabled"),this.$savAsBtn.button("option",{disabled:!1}),this.$savAsBtn.removeClass("disabled"),this.$shareBtn.button("option",{disabled:!1}),this.$shareBtn.removeClass("disabled")):(this.$viewBtn.button("option",{disabled:!0}),this.$viewBtn.addClass("disabled"),this.$saveBtn.button("option",{disabled:!0}),this.$saveBtn.addClass("disabled"),this.$savAsBtn.button("option",{disabled:!0}),this.$savAsBtn.addClass("disabled"),this.$shareBtn.button("option",
{disabled:!0}),this.$shareBtn.addClass("disabled"))},isSameNameExist:function(a){var b=this.getBookletStructure();return 0<$.grep(b,function(b){return b.name===a}).length},getSelectedReports:function(){var a=this.element.find(".mover-box-left").find(".mover-box-item.mover-box-item-selected"),b=[];$.each(a,function(a,d){b.push({id:$(d).attr("id"),name:$(d).attr("title")})});return b},".mover-box-right .moverbox-item-removebutton click":function(a,b){this.options.app.handleUserInteraction();b.stopPropagation();
this.bookletDefinModel.removeReportFromBooklet(1*$(a).attr("id"));this.options.bookletModel&&this.options.bookletModel.attr("reportsRefreshed",!1);this.element.find(".booklet-save-execution-message").text("")},".order-button click":function(a){var b=this.element.find(".mover-box-right").find(".mover-box-item.mover-box-item-selected");if(!(1>b.length)&&(this.element.find(".booklet-save-execution-message").text(""),a=$(a).attr("id"),b=b[0].id)){var b=1*b,c=1*b,d=this.getBookletStructure();switch(a){case "order-button-top":0<
b&&(c=0);break;case "order-button-bottom":b<d.length-1&&(c=d.length-1);break;case "order-button-dn":b<d.length-1&&(c=b+1);break;case "order-button-up":0<b&&(c=b-1)}b!==c&&(this.bookletDefinModel.changeReportPositionInBooklet(b,c),this.bookletDefinModel.setBookletReportSelected(c),this.options.bookletModel&&this.options.bookletModel.attr("reportsRefreshed",!1))}},getBookletStructure:function(){var a=[];this.bookletDefinModel&&(a=this.bookletDefinModel.getBookletReports());return a},updateBookletStructureUI:function(){var a=
this.getBookletStructure();this.element.find(".mover-box-right").html(can.view("templates/bookletStructure.ejs",{bookletReports:a}));this.$orderBtn.addClass("ui-state-disabled");this.element.find("#"+this.bookletDefinModel.selectedReportPos+".mover-box-item",".mover-box-right").addClass("mover-box-item-selected")},setItemSelected:function(a){this.element.find(".mover-box-item",".mover-box-right").removeClass("mover-box-item-selected");this.element.find("#"+a+".mover-box-item",".mover-box-right").addClass("mover-box-item-selected");
this.enableDisableOrderButton()},".booklet-save-button click":function(a){if(!0!==a.button("option","disabled"))if(this.element.find(".booklet-save-execution-message").text(""),a=[],this.options.bookletModel)if(this.options.bookletModel.isNew())a=this.getBookletStructure(),this.options.bookletModel.attr("reports",this.makeBookletReports(a)),this.saveUpdateBookletDlg.open(this.options.bookletModel);else{this.$spinner.show();this.$executionMessage.text("Saving...");this.options.bookletModel.attr("reports",
this.makeBookletReports(this.getBookletStructure()));var b=this;this.options.bookletModel.save().done(function(a){a.reports=$.map(a.reports,function(a){return new Sentrana.Models.ReportDefinitionInfo({json:a.attr(),app:b.options.app})});b.updateObserverReports(a.reports);b.options.bookletModel.attr("reportsRefreshed",!0);b.element.find(".booklet-save-execution-message").text(Sentrana.getMessageText(window.app_resources.app_msg.booklet_operation.update.success_msg)).css("color","green").fadeIn()}).fail(function(a){b.options.bookletModel.attr("reports",
b.getBookletStructure());var c=a.getResponseHeader("ErrorCode"),a=a.getResponseHeader("ErrorMsg");c===Sentrana.Enums.ErrorCode.BOOKLET_NAME_IN_USE?b.element.find(".booklet-save-execution-message").text(a).css("color","red").fadeIn():b.element.find(".booklet-save-execution-message").text(Sentrana.getMessageText(window.app_resources.app_msg.update_operation.failed)).css("color","red").fadeIn()}).always(function(){b.$spinner.hide();b.$executionMessage.text("")})}else{var a=new Sentrana.Models.Booklet,
c=this.getBookletStructure();a.attr("reports",this.makeBookletReports(c));this.saveUpdateBookletDlg.open(a)}},".booklet-save-as-button click":function(a){if(!0!==a.button("option","disabled")&&this.options.bookletModel){this.options.bookletModel.isNew()||(this.bookletName=this.options.bookletModel.name);var a=new Sentrana.Models.Booklet,b=this.getBookletStructure();a.attr("reports",this.makeBookletReports(b));a.name="Copy of "+this.bookletName;this.element.find(".booklet-save-execution-message").text("");
this.saveUpdateBookletDlg.open(a)}},".booklet-share-button click":function(a){!0!==a.button("option","disabled")&&this.options.bookletModel&&this.element.trigger("share_booklet",this.options.bookletModel)},updateControllerModel:function(a){this.update({app:this.options.app,bookletDefinModel:this.options.bookletDefinModel,bookletModel:a})},makeBookletReports:function(a){var b=[];$.each(a,function(a,d){b.push({name:d.name,id:d.id,order:a})});return b},".booklet-clear-button click":function(a){!0!==
a.button("option","disabled")&&(this.element.trigger("clear_center_panel"),$(".item[action='edit']").removeClass("item-selected"))},destroyThisController:function(){$(".booklet-view-panel-container").control()&&($(".booklet-view-panel-container").control().destroy(),$(".booklet-view-panel-container").html(""));this.options.app.bookletController&&!this.options.app.bookletController._destroyed&&(this.options.app.bookletController.destroy(),this.options.app.bookletController=void 0,$(".booklet-composition-panel-container").html(""))},
".booklet-view-button click":function(a){!0!==a.button("option","disabled")&&($(".booklet-save-execution-message").text(""),a=$(".booklet-view-panel-container"),a.control()&&(a.control().destroy(),a.html(""),this.options.app.BookletViewController=void 0),this.options.app.BookletViewController=a.sentrana_booklet_view({app:this.options.app,bookletDefinModel:this.bookletDefinModel,displayMode:"write",titleCls:"booklet-view-panel-header",showEdit:this.options.showEdit,reportsLoaded:!0}).control())},showWaitingWheel:function(a){a?
($(".btn-add-booklet").addClass("ui-state-disabled"),this.element.find(".mover-box-right").html(can.view("templates/loadingwheel.ejs",{message:Sentrana.getMessageText(window.app_resources.app_msg.booklet_load.report_loading_msg),hideImage:!1}))):$(".btn-add-booklet").removeClass("ui-state-disabled")},addEditbuttonToBookletView:function(){this.options.showEdit=!0;this.element.trigger("addEditbutton_to_bookletView")},updateObserverReports:function(a){var b=this;this.bookletDefinModel.bookletReports=
[];$.each(a,function(a,d){b.bookletDefinModel.bookletReports.push(d)});$(".booklet-entry[booklet-id="+this.options.bookletModel.id+"]").addClass("booklet-entry-selected").find(".booklet-menu").show();this.options.app.BookletViewController&&(a=a[this.bookletDefinModel.selectedReportPos])&&this.options.app.BookletViewController.viewReport(a)},getReportPosition:function(){return this.getBookletStructure().length},".report-search-input-booklet keyup":function(a){this.searchSavedReports($(a).val())},searchSavedReports:function(a){this.updateSavedReportListView(this.filterReportsForSearchText(a))},
filterReportsForSearchText:function(a){var b=this.getMySavedReports();return $.grep(b,function(b){return-1<b.name.toLowerCase().indexOf(a.toLowerCase())})},"{bookletDefinModel} change":function(a,b,c,d,e){switch(c){case "count":case "itempos":this.updateBookletStructureUI();this.enableDisableButtons();this.setItemSelected(a.selectedReportPos);break;case "selreportpos":this.setItemSelected(a.selectedReportPos);break;case "gettingServerdata":this.showWaitingWheel(e)}}});steal.executed("js/controllers/BookletCompositionController.js");
can.Model.extend("Sentrana.Models.Booklet",{create:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Booklet"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},destroy:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Booklet/"+a),type:"DELETE",headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,
repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},findAll:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Booklets"),type:"GET",dataType:"json",data:a,headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},getReports:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Reports/"+a),type:"GET",dataType:"json",headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,
repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},update:function(a,b,c,d){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Booklet/"+a),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(b),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:c,error:d})},copy:function(a,b,c,d){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Booklet/"+
a),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(b),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:c,error:d})}},{formatModified:function(){return Sentrana.formatDate(new Date(this.lastModDate))+" ("+this.lastModUser+")"}});steal.executed("js/models/BookletModel.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.SaveUpdateBooklet",{pluginName:"sentrana_dialogs_save_update_booklet",defaults:{title:"Save New Booklet?",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find('input[name="booklet-name"]')},handleCANCEL:function(){this.closeDialog()},handleOK:function(){var a=
$.trim(this.$name.val());this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.booklet_operation.save.processing_msg));this.bookletModel.attr({name:a},!1);var b=this;this.bookletModel.save().done(function(a){a.reports=$.map(a.reports,function(a){return new Sentrana.Models.ReportDefinitionInfo({json:a.attr(),app:b.options.app})});b.options.parent.updateControllerModel(b.bookletModel);b.bookletModel.attr("reportsRefreshed",!0);b.updateStatus(!1,"Success!");$(".booklet-save-as-button").button({disabled:!1}).show();
$(".booklet-share-button").button({disabled:!1}).show();$(".booklet-composition-panel-header-title").text("Booklet Composition: "+b.bookletModel.name+" by "+b.bookletModel.createUser);b.closeDialog();b.options.parent.updateObserverReports(a.reports);b.options.parent.addEditbuttonToBookletView()}).fail(function(a){var d=a.getResponseHeader("ErrorCode"),a=a.getResponseHeader("ErrorMsg");d===Sentrana.Enums.ErrorCode.BOOKLET_NAME_IN_USE?b.updateStatus(!1,a,"fail"):b.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.save_operation.failed),
"fail")}).always(function(){})},loadForm:function(a){this.$name.val(a.name);(!a.name||0>=a.name.length)&&this.disableButton("OK")},open:function(a){this.bookletModel=a;a.name?(this.element.find(".modal-title").html("Save Existing Booklet As"),this.enableButton("OK")):this.element.find(".modal-title").html("Save New Booklet");this.loadForm(a);this.openDialog();a=this.$name.val();this.$name.focus().val("").val(a)},'input[name="booklet-name"] keyup':function(a,b){this.handleInputTexEvent(a,b)},'input[name="booklet-name"] paste':function(a,
b){var c=this;setTimeout(function(){c.handleInputTexEvent(a,b)},400)},handleInputTexEvent:function(a){""!==$.trim(a.val())?this.enableButton("OK"):this.disableButton("OK")},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/SaveUpdateBookletDialog.js");
Sentrana.Models.ViewList("Sentrana.Models.Booklets",{},{init:function(a){this.setup(a.attrs);this.app=a.app},getSavedBooklets:function(){var a=this,b=1*a.count;$.when(Sentrana.Models.Booklet.findAll()).done(function(c){a.savedBooklets=$.map(c,function(b){return new Sentrana.Models.Booklet({booklet:b,app:a.app})});c.length===b&&(a.attr("ignoreChange",!0),a.attr("count",b+1),a.attr("ignoreChange",!1));a.attr("count",c.length)}).fail(function(b,d,e){a.attr("loadErrorMessage",e);a.attr("count",-2)})},
getList:function(){var a=this,b="";switch(a.field){case "lastModDate":case "createDate":b="DATE";a.asc=!1;break;case "name":b="All Booklets",a.asc=!0}this.savedBooklets.sort(function(b,d){var e=b.attr("booklet")[a.field],h=d.attr("booklet")[a.field];"string"===typeof e&&(e=e.toUpperCase(),h=h.toUpperCase());return a.asc?e<h?-1:e>h?1:0:h<e?-1:h>e?1:0});$.each(this.savedBooklets,function(c,d){d.attr("booklet.groupName",a.constructor.getGroupName(b,d.attr("booklet").attr(a.field)))});return this.savedBooklets},
getSortOrderName:function(){return this.asc?"ascending":"descending"},getSortFieldName:function(){switch(this.field){case "lastModDate":return"last modification date";case "createDate":return"creation date";case "name":return"report name";default:return"Unknown"}},getSortFieldNames:function(){return[{key:"lastModDate",value:"MOD. DATE"},{key:"createDate",value:"CREATION DATE"},{key:"name",value:"ABC"}]},toggleSortOrder:function(){this.attr("asc",!this.asc)},changeSortField:function(a){this.attr("field",
a)},addBooklet:function(a){this.savedBooklets&&(this.savedBooklets.push(new Sentrana.Models.Booklet({booklet:a,app:this.app})),this.attr("count",this.savedBooklets.length))},removeBooklet:function(a){var b=this;$.each(this.savedBooklets,function(c,d){if(d.attr("booklet").attr("id")===a.attr("id"))return b.savedBooklets.splice(c,1),b.attr("count",b.savedBooklets.length),!1})}});steal.executed("js/observes/BookletsObserve.js");
can.Observe.extend("Sentrana.Models.BookletDefin",{},{init:function(a){this.app=a.app;this.setup({count:0,itempos:"",selreportpos:"",gettingServerdata:!1});this.bookletReports=[];this.selectedReportPos=-1},setBookletDefinition:function(a){this.bookletReports=[];this.selectedReportPos=-1;this.attr("count",0);this.attr("itempos","");this.attr("selreportpos","");this.attr("gettingServerdata",!1);(this.bookletModel=a)?a.reportsRefreshed?this.addMultipleReportsToBooklet(a.reports):(this.attr("gettingServerdata",
!0),this.getReports(a.id)):this.attr("count",0)},getReports:function(a){var b=this;Sentrana.Models.Booklet.getReports(a).done(function(a){b.bookletReports=[];a=$.map(a,function(a){return new Sentrana.Models.ReportDefinitionInfo({json:a,app:b.app})});b.addMultipleReportsToBooklet(a);b.bookletModel.attr("reportsRefreshed",!0);b.bookletModel.attr("reports",a);b.attr("gettingServerdata",!1)})},getSavedBookletReports:function(){return this.bookletModel?this.bookletModel.reports:[]},addReportToBooklet:function(a){this.bookletReports.push(a);
this.attr("count",this.bookletReports.length)},addMultipleReportsToBooklet:function(a){var b=this;$.each(a,function(a,d){b.bookletReports.push(d)});this.attr("count",this.bookletReports.length)},removeReportFromBooklet:function(a){a*=1;this.bookletReports.splice(a,1);this.attr("count",this.bookletReports.length);this.selectedReportPos*=1;-1<this.selectedReportPos&&(0===this.bookletReports.length?this.setBookletReportSelected(-1):1===this.bookletReports.length||0===this.selectedReportPos?this.setBookletReportSelected(0):
this.selectedReportPos>=a?this.setBookletReportSelected(this.selectedReportPos-1):this.setBookletReportSelected(this.selectedReportPos))},removeAllReportsFromBooklet:function(){this.bookletReports=[];this.selectedReportPos=-1;this.attr("count",this.bookletReports.length);this.attr("selreportpos","")},changeReportPositionInBooklet:function(a,b){a*=1;b*=1;this.selectedReportPos*=1;if(a!==b){var c=this.bookletReports.splice(a,1);this.bookletReports.splice(b,0,c[0]);this.attr("itempos",c[0].name+"|"+
a+"|"+b);this.selectedReportPos===a?this.setBookletReportSelected(b):b>=this.selectedReportPos&&a<this.selectedReportPos?this.setBookletReportSelected(this.selectedReportPos-1):b<=this.selectedReportPos&&a>this.selectedReportPos&&this.setBookletReportSelected(this.selectedReportPos+1)}},getBookletReport:function(a){a*=1;if(this.bookletReports.length-1>=a)return this.bookletReports[a]},getBookletReports:function(){return this.bookletReports},setBookletReportSelected:function(a){a*=1;this.selectedReportPos*=
1;-1===a?(this.selectedReportPos=-1,this.attr("selreportpos","-1")):(this.selectedReportPos=a,this.attr("selreportpos",this.bookletReports.length+"|"+this.bookletReports[1*a].name+"|"+a))},getSelectedBookletReport:function(){this.selectedReportPos*=1;if(0<=this.selectedReportPos)return this.bookletReports[this.selectedReportPos]},getReportPositionByName:function(a){for(var b=0;b<this.bookletReports.length;b++)if(this.bookletReports[b].name===a)return b;return-1}});steal.executed("js/observes/BookletDefinObserve.js");
can.Control.extend("Sentrana.Controllers.BookletDefinitionInfoList",{pluginName:"sentrana_booklet_definition_info_list",defaults:{app:null,bookletsModel:null}},{init:function(){this.loadDomElement();this.options.bookletsModel.getSavedBooklets()},updateBookletList:function(a){this.$loading.hide();this.$bookletList.empty();var b="",c=this,d=this.options.bookletsModel.getList(),e={};this.searchValue&&(d=$.grep(d,function(a){return-1<a.attr("booklet").attr("name").toLowerCase().indexOf(c.searchValue.toLowerCase())||
-1<a.attr("booklet").attr("createUser").toLowerCase().indexOf(c.searchValue.toLowerCase())||-1<Sentrana.formatDateValue(new Date(a.attr("booklet").attr("createDate")),"MM/dd/yyyy").toLowerCase().indexOf(c.searchValue.toLowerCase())}));var h=c.options.app.retrieveUserInfo();h?($.each(d,function(d,f){var i=f.booklet;if(i.groupName!=b){b=i.groupName;var j=b.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-");c.$bookletList.append('<div class="booklet-list-grp-'+j+'"></div>');j=$(".booklet-list-grp-"+j).sentrana_side_bar_collapsible_container({title:b,
showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){c.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){c.options.app.handleUserInteraction()}}).control().getContainerPanel();e[b]=j}j=!1;a&&i.id===a.id&&(j=!0);$(e[b]).append(can.view("templates/bookletEntry.ejs",{bookletInfo:i,userInfo:h,isSelected:j}));$('.booklet-entry[booklet-id="'+i.id+'"]',c.element).sentrana_booklet_definition_info({app:c.options.app,bookletModel:i})}),d.length?(this.$hasBooklets.show(),
this.$noBooklets.hide(),this.resizeElements()):this.searchValue||(this.$noBooklets.show(),this.$hasBooklets.hide()),this.element.trigger("booklet_list_updated")):Sentrana.FirstLook.closeSession("timeout")},resizeElements:function(){this.$bookletList.offset();$(window).height();$(window).width();$(".footer").outerHeight(!0)},searchReports:function(a){this.searchValue=$(a).val();this.updateBookletList()},"{window} resize":function(){this.resizeElements()},".sort-field click":function(a){this.options.bookletsModel.changeSortField(a.attr("field"));
this.element.find(".sort-field").parent().removeClass("active");a.parent().addClass("active");this.element.trigger("show_comment_stream",null);this.element.trigger("clear_center_panel")},".sort-order click":function(a,b){b.preventDefault();this.options.bookletsModel.toggleSortOrder()},".accordion-search-input keyup":function(a){this.searchReports(a);this.element.trigger("show_comment_stream",null);this.element.trigger("clear_center_panel")},"{bookletsModel} change":function(a,b,c,d,e){if(!a.ignoreChange)switch(c){case "asc":this.updateBookletList();
break;case "field":this.updateBookletList();break;case "count":0<=e?(this.$bookletCount.text(e),this.updateBookletList(),this.element.trigger("show_shared_booklet")):-2===e&&this.$loading.html("<p>Your saved booklets could not be loaded. Please check your Internet connection and try again. If the problem persists, notify your Sentrana administrator.</p>")}},loadDomElement:function(){this.element.html(can.view("templates/bookletListLayout.ejs",{model:this.options.bookletsModel}));this.$bookletList=
this.element.find(".booklet-list");this.$bookletCount=this.element.find(".booklet-count");this.$noBooklets=this.element.find(".no-booklets");this.$hasBooklets=this.element.find(".has-booklets");this.$loading=this.element.find(".loading")}," booklet:date_change":function(){this.updateBookletList()},"{Sentrana.Models.Booklet} destroyed":function(a,b,c){this.options.bookletsModel.removeBooklet(c)},"{Sentrana.Models.Booklet} created":function(a,b,c){this.options.bookletsModel.addBooklet(c)},"{Sentrana.Models.Booklet} updated":function(a,
b,c){this.updateBookletList(c)}});steal.executed("js/controllers/BookletDefinitionInfoListController.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.CopyBooklet",{pluginName:"sentrana_dialogs_copy_booklet",defaults:{title:"Duplicate Booklet",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find('input[name="booklet-name"]')},loadForm:function(a){this.$name.val("Copy of "+a.name)},handleOK:function(){this.updateStatus(!0,
"Copying the booklet...");var a={id:this.bookletModel.id,name:$.trim(this.$name.val())},b=this;$.when(Sentrana.Models.Booklet.copy(b.bookletModel.id,a)).done(function(a){a.reports=$.map(a.reports,function(a){return new Sentrana.Models.ReportDefinitionInfo({json:a,app:b.options.app})});var d=new Sentrana.Models.Booklet(a);d.attr("reportsRefreshed",!1);d.attr("reports",a.reports);b.updateStatus(!1,"Booklet copied successfully");b.closeDialog("userClick");b.options.parent.bookletCopied(d)}).fail(function(a){var d=
a.getResponseHeader("ErrorCode"),a=a.getResponseHeader("ErrorMsg");d===Sentrana.Enums.ErrorCode.BOOKLET_NAME_IN_USE?b.updateStatus(!1,a,"fail"):b.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.copy_operation.failed),"fail")})},open:function(a){this.bookletModel=a;this.loadForm(a);this.enableButton("OK");this.openDialog()},'input[name="booklet-name"] keyup':function(a,b){this.handleInputTexEvent(a,b)},'input[name="booklet-name"] paste':function(a,b){var c=this;setTimeout(function(){c.handleInputTexEvent(a,
b)},400)},handleInputTexEvent:function(a){""!==$.trim(a.val())?this.enableButton("OK"):this.disableButton("OK")},handleCANCEL:function(){this.closeDialog()},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/CopyBookletDialog.js");
can.Control.extend("Sentrana.Controllers.BookletDefinitionInfo",{pluginName:"sentrana_booklet_definition_info",defaults:{app:null,bookletModel:null}},{init:function(){this.$name=this.element.find(".name");this.$lastMod=this.element.find(".booklet-details-last-mod");this.$totalReports=this.element.find(".booklet-details-last-total-report");this.$details=this.element.find(".booklet-details")},".booklet-entry-table click":function(a){this.togglePreviousSelection(a);a.parent().hasClass("booklet-entry-selected")?
this.element.trigger("view_booklet",this.options.bookletModel):this.element.trigger("hide_booklet",this.options.bookletModel)},togglePreviousSelection:function(a){this.element.trigger("clear_center_panel");this.element.trigger("show_comment_stream",null);var b=a.siblings(".booklet-entry-menus"),c=a.siblings(".booklet-details"),d=a.parent(),e=$(".report-entry");e.removeClass("report-entry-selected");e.find(".report-details").hide();$(".booklet-entry").not(a.parent()).removeClass("booklet-entry-selected");
$(".booklet-entry .booklet-entry-menus .booklet-entry-menu").not(b.children(".booklet-entry-menu")).removeClass("item-selected");$(".booklet-entry .booklet-details").not(c).hide();d.toggleClass("booklet-entry-selected");d.hasClass("booklet-entry-selected")||c.hide()},".booklet-entry-menus click":function(a){$(".booklet-entry-menus .dropdown-menu").hide();$(a).find(".dropdown-menu").show();return!1},".booklet-entry-table mouseleave":function(a){a.find(".booklet-entry-menus").css("visibility","hidden");
a.find(".dropdown-menu").hide();return!1},".booklet-entry-table mouseenter":function(a){a.find(".booklet-entry-menus").css("visibility","visible");return!1},".booklet-entry-menu click":function(a){switch(a.attr("action")){case "details":this.$details.slideToggle();break;case "edit":this.options.app.bookletController&&this.options.app.bookletController.destroyThisController();$(".item[action='view']").removeClass("item-selected");$(a).toggleClass("item-selected");$(a).prev().toggleClass("item-selected-prev");
this.element.trigger("clear_center_panel");$(a).hasClass("item-selected")?this.element.trigger("edit_booklet",this.options.bookletModel):this.element.trigger("hide_booklet",this.options.bookletModel);break;case "copy":this.element.trigger("copy_booklet",this.options.bookletModel);break;case "delete":this.element.trigger("delete_booklet",this.options.bookletModel);break;case "share":this.element.trigger("share_booklet",this.options.bookletModel)}setTimeout(function(){$(a).parent().hide()},10);return!1},
"{bookletModel} destroyed":function(a){this.element.trigger("booklet:destroyed",a.id)},"{bookletModel} updated":function(a){this.$name.text(a.name);this.$lastMod.text(a.formatModified());this.$totalReports.text(a.numberOfReports)}});steal.executed("js/controllers/BookletDefinitionInfoController.js");
function TextSelector(a){if("undefined"===typeof a)throw"Failed to find passed element";a instanceof jQuery&&(a=a[0]);this.parent=a;this._stored=null;this.get=function(){if("undefined"!==typeof a.selectionStart)return{start:a.selectionStart,end:a.selectionEnd,length:a.selectionEnd-a.selectionStart};var b=document.selection.createRange(),c=b.duplicate();c.moveToElementText(a);c.setEndPoint("EndToEnd",b);c=c.text.length-b.text.length;return{start:c,end:c+b.text.length,length:b.text.length}};this.replace=
function(b){if("undefined"!==typeof a.selectionStart)return a.value=a.value.substr(0,a.selectionStart)+b+a.value.substr(a.selectionEnd),this;a.focus();document.selection.createRange().text=b;return this};this.store=function(){this._stored=this.get()};this.load=function(){this.select(this._stored)};this.select=function(b,c){"undefined"!==typeof b.start&&(c=b.end,b=b.start);if("undefined"!==typeof a.setSelectionRange)a.focus(),a.setSelectionRange(b,c);else if("undefined"!==typeof a.createTextRange){var d=
a.createTextRange();d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);d.select()}return this};this.isSelected=function(){return 0!==this.get().length};this.text=function(){return"undefined"!==typeof document.selection?document.selection.createRange().text:a.value.substr(a.selectionStart,a.selectionEnd-a.selectionStart)}}steal.executed("js/textSelector.js");
can.Observe.extend("Sentrana.Models.FormulaValidator",{},{init:function(a,b){this.setup({validationStatus:null});this.metrics=a;this.reusableColumns=b||[]},validateFormula:function(a){var b=this;this.attr("validationStatus","RUNNING");(a=this.getFormulaWithIds(a))?(a=Sentrana.removeWhiteSpace(a),$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("ValidateFormula"),type:"POST",dataType:"json",contentType:"text/json",data:JSON.stringify({formula:a}),success:function(a){b.attr("validationStatus",
a)},error:function(){b.attr("validationStatus",!1)}})):b.attr("validationStatus",!1)},getFormulaWithIds:function(a){var b=this,c=!1,d=a.match(Sentrana.RegEx.RE_METRIC_IN_FORMULA);d&&0<d.length&&$.each(d,function(d,h){if(""!==h){var g=$.grep(b.metrics,function(a){return"["+a.name+"]"===h}),f=$.grep(b.reusableColumns,function(a){return"["+a.name+"]"===h});1===g.length+f.length?g[0]?a=a.replace("["+g[0].name+"]","["+g[0].oid+"]"):f[0]&&(a=a.replace("["+f[0].name+"]",f[0].oid)):c=!0}});return c?void 0:
a},getFormulaWithNames:function(a){var b=this,c=!1,d=a.match(Sentrana.RegEx.RE_METRIC_IN_FORMULA);d&&0<d.length&&$.each(d,function(d,h){if(""!==h){var g=$.grep(b.metrics,function(a){return"["+a.oid+"]"===h}),f=$.grep(b.reusableColumns,function(a){return a.oid===h});1===g.length+f.length?g[0]?a=a.replace("["+g[0].oid+"]","["+g[0].name+"]"):f[0]&&(a=a.replace(f[0].oid,"["+f[0].name+"]")):c=!0}});return c?void 0:a}});steal.executed("js/observes/FormulaValidatorObserve.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.FormulaColumn",{pluginName:"sentrana_dialogs_formula_column",defaults:{dwRepository:null,derivedColumnId:null,title:"Transform",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"CONTINUE",className:"btn-continue btn-primary"},{label:"PREVIOUS",className:"btn-previous btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this.reportDefnModel=
this.options.reportDefnModel;this.dwRepository=this.options.dwRepository;this.ruModel=this.derivedColumn=void 0;this.isPartOfAnyReport=this.options.isPartOfAnyReport;this.isFormulaValidated=!1;this.userID=void 0;this.element.append(can.view("templates/formula-column-dialog.ejs",{}));this._super(a,b);this.$columnName=this.element.find(".derived-column-name");this.$formulaMatrixContainer=this.element.find(".formula-matrix-container");this.$decimalPlaceValue=this.element.find(".decimal-place-num");this.$textArea=
this.element.find(".formula-bar");this.$outputTypeContainer=this.element.find(".output-type-chooser");this.textAreaSelection=new window.TextSelector(this.$textArea);this.$isReusableColumn=this.element.find("#chk-reusable-formula");this.$formulaEditorView=this.element.find(".formula-editor");this.$formulaOptionsView=this.element.find(".formula-options");this.$reusableColumnContainer=this.element.find(".reusable-column-container");this.$isReusableColumn.prop("checked",!this.isPartOfAnyReport);var c=
this;this.dwRepository&&(this.metrics=this.dwRepository.getAllMetrics(),this.reusableColumns=this.dwRepository.reusableColumns,this.formulaValidatorModel=new Sentrana.Models.FormulaValidator(this.metrics,this.reusableColumns),this.formulaValidatorModel.bind("change",function(a,b,h,g){if("validationStatus"===b)switch(g){case "RUNNING":c.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.derived_column.formula.validating_msg));break;default:g?(c.isFormulaValidated=!0,c.showFormulaValidMessage(),
c.showOptionsView()):c.showFormulaInvalidMessage()}}));this.showEditorView();this.populateTreeView()},showOptionsView:function(){this.$formulaEditorView.hide();this.$formulaOptionsView.show();this.hideButton("CONTINUE");this.showButton("PREVIOUS");this.showButton("OK");this.updateStatus(!1,"")},showEditorView:function(){this.$formulaOptionsView.hide();this.$formulaEditorView.show();this.showButton("CONTINUE");this.hideButton("PREVIOUS");this.hideButton("OK");this.updateStatus(!1,"")},populateTreeView:function(){var a=
this.generateJsonObjectForTree(),b=this;$(".formula-builder-tree-container").jstree({plugins:"themes json_data ui crrm hotkeys search".split(" "),core:{themes:{theme:"apple",icons:!1},data:a}}).bind("select_node.jstree",function(a,d){var e=d.node.data;"undefined"!==e&&(b.$textArea.insertAtCursor("["+e+"]"),b.disableOrEnableValidateButton())}).bind("loaded.jstree",function(){$(this).jstree("open_all")})},generateJsonObjectForMetricsForTree:function(){for(var a={data:"Metrics",text:"Metrics"},b=[],
c={data:"Performance Metrics",text:"Performance Metrics"},d=[],e=0;e<this.options.dwRepository.metricGroups.length;e++){for(var h={data:this.options.dwRepository.metricGroups[e].name,text:this.options.dwRepository.metricGroups[e].name},g=[],f=this.options.dwRepository.metricGroups[e].metrics,i=0;i<f.length;i++){var j=this.getLeafNodeObject(f[i]);g.push(j)}h.children=g;d.push(h)}c.children=d;b.push(c);a.children=b;return a},generateJsonObjectForFormulaColumnsForTree:function(){for(var a={data:"Formula Column",
text:"Formula Column"},b=[],c=this.options.dwRepository.reusableColumns,d=0;d<c.length;d++){var e=this.getLeafNodeObject(c[d]);b.push(e)}a.children=b;return a},getLeafNodeObject:function(a){return{data:a.name,text:a.name,metadata:{id:a.oid,name:a.name},attr:{id:a.oid}}},generateJsonObjectForTree:function(){var a=[];a.push(this.generateJsonObjectForMetricsForTree());a.push(this.generateJsonObjectForFormulaColumnsForTree());return a},isValidEntry:function(){return 0===$.trim(this.$columnName.val()).length?
(this.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.derived_column.validation.empty_column_name_msg),"fail"),!1):this.dwRepository.isInvalidCharacterExistsInColumnName(this.$columnName.val())?(this.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.derived_column.validation.column_cannot_contain_invalid_char,this.dwRepository.getInvalidCharactersForColumnName()),"fail"),!1):0===$.trim(this.$textArea.val()).length?(this.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.derived_column.validation.empty_formula_msg),
"fail"),!1):!0},getDerivedColumnFromUI:function(){var a=this.formulaValidatorModel.getFormulaWithIds(this.$textArea.val()),a=Sentrana.removeWhiteSpace(a),b=this.element.find("input[name=derived-column-outputtype]:radio:checked").attr("outputType").toUpperCase(),c=this.$decimalPlaceValue.text();return{name:this.$columnName.val(),dataSource:this.options.dwRepository.id,formula:a,outputType:b,precision:c,formulaType:"DM"}},saveDerivedColumn:function(){var a=this,b=this.getDerivedColumnFromUI(),c=!1;
this.$isReusableColumn.is(":checked")?(c=!0,b.id=this.derivedColumn.id):(b.id=void 0,b.hid=this.derivedColumn.hid,this.isPartOfAnyReport=!0);this.sameDerivedColumnNameExists(b,c)?this.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.derived_column.validation.duplicate_column_name),"fail"):c?(a.updateStatus(!0,"Saving derived column..."),(new Sentrana.Models.ReusableColumnInfo({id:b.id,name:b.name,dataSource:this.options.dwRepository.id,formula:b.formula,outputType:b.outputType,
precision:b.precision,formulaType:"DM"})).save().done(function(c){b=c;a.isPartOfAnyReport?a.ruModel?a.updateDerivedColumnInReportDefn(b):a.addDerivedColumnToReportDefn(b):a.closeDialog()}).fail(function(b){var c=b.getResponseHeader("ErrorCode"),b=b.getResponseHeader("ErrorMsg");c===Sentrana.Enums.ErrorCode.DERIVED_COLUMN_NAME_IN_USE?a.updateStatus(!1,b,"fail"):a.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.save_operation.failed),"fail")}).always(function(){})):(b.id=void 0,
this.isPartOfAnyReport&&(this.ruModel?this.updateDerivedColumnInReportDefn(b):this.addDerivedColumnToReportDefn(b)))},addDerivedColumnToReportDefn:function(a){this.addReportUnitToReportDefinition(a,this.reportDefnModel.templateUnits.length,this.reportDefnModel.templateUnits.length+1,"add")},updateDerivedColumnInReportDefn:function(a){var b=this,c=-1;$.each(this.reportDefnModel.templateUnits,function(a,e){e.hid===b.ruModel.hid&&(c=a)});this.addReportUnitToReportDefinition(a,c,this.ruModel.sortPos,
"update")},addReportUnitToReportDefinition:function(a,b,c,d){var e="",e=a.id?a.oid:this.dwRepository.createDerivedColumnOID(a);if(a=this.dwRepository.getObjectByOID(e))"update"===d?a.id?this.reportDefnModel.updateFormulaOfReportDefinition(this.derivedColumn.hid,a,b,c):this.reportDefnModel.updateExpressionOfReportDefinition(this.derivedColumn.hid,a,b,c):a.id?this.reportDefnModel.addFormulaToReportDefinition(a,b,c):this.reportDefnModel.addExpressionToReportDefinition(a,b,c),this.closeDialog()},sameDerivedColumnNameExists:function(a,
b){var c=0;if(a.name&&0<a.name.length){var d=this.ruModel?this.ruModel.hid:a.hid,e=$.grep(this.metrics,function(b){return $.trim(b.name.toLowerCase())===$.trim(a.name.toLowerCase())}),c=c+e.length,e=$.grep(this.reusableColumns,function(b){return $.trim(b.name.toLowerCase())===$.trim(a.name.toLowerCase())&&b.id!==a.id}),c=c+e.length;this.reportDefnModel&&$.each(this.reportDefnModel.derivedColumnMap,function(b,e){if($.trim(e.name.toLowerCase())===$.trim(a.name.toLowerCase())&&e.hid!==d)return c+=1,
!1});b&&(this.checkSameColumnNameExistsInSingleReports(a.name,d)&&(c+=1),this.checkSameColumnNameExistsInBookletReportExpression(a.name,d)&&(c+=1))}return 0>=c?!1:!0},checkSameColumnNameExistsInSingleReports:function(a,b){var c=!1;if(!this.options.app.reportDefnInfoList||!this.options.app.reportDefnInfoList.savedReports)return!1;for(var d=0;d<this.options.app.reportDefnInfoList.savedReports.length&&!(this.options.app.reportDefnInfoList.savedReports[d].createUserId===this.userID&&(c=this.checkSameColumnNameExistsInReportExpression(a,
b,this.options.app.reportDefnInfoList.savedReports[d])),c);d++);return c},checkSameColumnNameExistsInReportExpression:function(a,b,c){b=!1;if(c.definition&&this.options.reportId!==c.id)for(var c=c.definition.template.split("|"),d=0;d<c.length;d++){var e=this.options.dwRepository.isDerivedColumn(c[d]);if(e&&$.trim(e.name.toLowerCase())===$.trim(a.toLowerCase())){b=!0;break}}return b},checkSameColumnNameExistsInBookletReportExpression:function(a,b){var c=!1;if(!this.options.app.booklets||!this.options.app.booklets.savedBooklets)return!1;
for(var d=this,e=$.grep(this.options.app.booklets.savedBooklets,function(a){return a.booklet.createUserId===d.userID}),h=0;h<e.length;h++){for(var g=0;g<e[h].booklet.reports.length&&!(c=this.checkSameColumnNameExistsInReportExpression(a,b,e[h].booklet.reports[g]));g++);if(c)break}return c},loadForm:function(a){this.$columnName.val(a.name);this.$decimalPlaceValue.text(a.precision);this.$textArea.val(a.formula);this.loadOutputTypes(a);this.disableOrEnableValidateButton();a.id&&this.$isReusableColumn.prop("checked",
!0)},loadOutputTypes:function(a){this.$outputTypeContainer.empty();this.$outputTypeContainer.html(can.view("templates/derivedColumnOutputTypeSelection.ejs",{outputtypes:[{id:"NUMBER",name:"Number"},{id:"CURRENCY",name:"Currency"},{id:"PERCENTAGE",name:"Percentage"}],derivedColumn:a}))},open:function(a,b){this.ruModel=a;var c;b?(this.derivedColumn=b,c=$.extend(!0,{},this.derivedColumn),c.formula=this.formulaValidatorModel.getFormulaWithNames(b.formula)):a?(c=this.ruModel.attr("hid"),this.derivedColumn=
this.dwRepository.objectMap[c]||this.reportDefnModel.derivedColumnMap[c],c=$.extend(!0,{},this.derivedColumn),c.formula=c.formula?this.formulaValidatorModel.getFormulaWithNames(c.formula):this.formulaValidatorModel.getFormulaWithNames("["+c.oid+"]"),c.outputType||(c.outputType=this.derivedColumn.dataType,c.precision=2)):(c="",this.reportDefnModel&&(c="Column"+(this.reportDefnModel.templateUnits.length+1)),this.derivedColumn={name:c,formula:"",outputType:"NUMBER",precision:2},c=$.extend(!0,{},this.derivedColumn));
this.resetInputValues();this.loadForm(c);this.openDialog();this.$textArea.setCursorPosition(c.formula.length)},resetInputValues:function(){this.$columnName.val("");this.$textArea.val("");this.$decimalPlaceValue.text("2");this.disableButton("CONTINUE")},isInvalidMetricsExists:function(){var a=this,b=!1,c=this.$textArea.val().match(Sentrana.RegEx.RE_METRIC_IN_FORMULA);c&&0<c.length&&$.each(c,function(c,e){if(""!==e&&!b){var h=$.grep(a.metrics,function(a){return"["+a.name+"]"===e}),g=$.grep(a.reusableColumns,
function(a){return"["+a.name+"]"===e});if((!h||0===h.length)&&(!g||0===g.length))b=!0}});return b},isValidSyntax:function(){for(var a=this.$textArea.val(),b=0,c=0;c<a.length;c++)"("===a[c]?b++:")"===a[c]&&b--;return 0!==b?!1:!0},showFormulaValidMessage:function(){this.updateStatus(!1,"Formula syntax validated")},showFormulaInvalidMessage:function(){this.updateStatus(!1,"Formula syntax invalid","fail")},validateFormula:function(){if(this.isFormulaValidated)this.showFormulaValidMessage(),this.showOptionsView();
else{var a=!0;this.updateStatus(!0,"Validating formula...");this.isValidSyntax()||(a=!1);a?this.formulaValidatorModel.validateFormula(this.$textArea.val()):this.showFormulaInvalidMessage()}},removeText:function(a,b){var c=this.findMinIndex(a),d=this.findMaxIndex(b);this.textAreaSelection.select(c,d);this.textAreaSelection.replace("");this.$textArea.setCursorPosition(c)},findMinIndex:function(a){var b=a,c=this,d=this.$textArea.val(),e=d.match(Sentrana.RegEx.RE_METRIC_IN_FORMULA);e&&0<e.length&&$.each(e,
function(e,g){if(""!==g&&!c.isInvalidMetricsExists(g)){var f=c.findIndexes(d,g);if(0<f.length)for(var i=0;i<f.length;i++)f[i]<=a&&f[i]+g.length>a&&(b=f[i])}});return b},findMaxIndex:function(a){var b=a,c=this,d=this.$textArea.val(),e=d.match(Sentrana.RegEx.RE_METRIC_IN_FORMULA);e&&0<e.length&&$.each(e,function(e,g){if(""!==g&&!c.isInvalidMetricsExists(g)){var f=c.findIndexes(d,g);if(0<f.length)for(var i=0;i<f.length;i++)f[i]<a&&f[i]+g.length>=a&&(b=f[i]+g.length)}});return b},findIndexes:function(a,
b){for(var c=[],d=a.indexOf(b);0<=d;)c.push(d),d=a.indexOf(b,d+b.length);return c},disableOrEnableValidateButton:function(){$.trim(this.$textArea.val())?this.enableButton("CONTINUE"):this.disableButton("CONTINUE")},".increase-value click":function(){this.$decimalPlaceValue.text(parseInt(this.$decimalPlaceValue.text(),10)+1)},".decrease-value click":function(){"0"!==this.$decimalPlaceValue.text()&&this.$decimalPlaceValue.text(parseInt(this.$decimalPlaceValue.text(),10)-1)},handleCONTINUE:function(a){"disabled"!==
$(a).attr("disabled")&&this.validateFormula()},".formula-bar keydown":function(a,b){(8===b.keyCode||46===b.keyCode)&&b.preventDefault()},".formula-bar keyup":function(a,b){var c=this.$textArea.getCursorPosition();(8==b.keyCode||46==b.keyCode)&&this.textAreaSelection.isSelected()?this.removeText(this.textAreaSelection.get().start,this.textAreaSelection.get().end):8==b.keyCode?this.removeText(c-1,c):46==b.keyCode?this.removeText(c,c+1):57===b.keyCode&&b.shiftKey&&(this.$textArea.insertAtCursor(")"),
this.$textArea.setCursorPosition(c));this.disableOrEnableValidateButton();this.isFormulaValidated=!1},".formula-bar cut paste":function(){this.isFormulaValidated=!1},handlePREVIOUS:function(){this.showEditorView()},handleOK:function(){this.updateStatus(!1,"");var a=this.options.app.retrieveUserInfo();!a||!a.userID?Sentrana.FirstLook.closeSession("timeout"):(this.userID=a.userID,this.isValidEntry()&&(this.isFormulaValidated?this.saveDerivedColumn():this.validateFormula()))},handleCANCEL:function(){this.closeDialog()},
"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/FormulaColumnDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.DeleteReusableColumn",{pluginName:"sentrana_dialogs_delete_reusable_column",defaults:{title:"Delete Derived Column",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find(".reusable-column-name")},handleCANCEL:function(){this.closeDialog()},handleOK:function(){var a=
this;this.updateStatus(!0,"Deleting the derived column...");var b=this.reusableColumnInfoModel.destroy();b.done(function(){a.updateStatus(!1,"Derived column deleted successfully");a.closeDialog()});b.fail(function(b){var d=b.getResponseHeader("ErrorCode"),b=b.getResponseHeader("ErrorMsg");d===Sentrana.Enums.ErrorCode.NO_DATA_RETURNED?a.updateStatus(!1,b,"fail"):a.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.save_operation.failed),"fail")})},loadForm:function(a){this.$name.text(a.name)},
open:function(a){this.loadForm(a);this.reusableColumnInfoModel=a;this.openDialog()},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/DeleteReusableColumnDialog.js");
can.Control.extend("Sentrana.Controllers.FilmstripController",{pluginName:"sentrana_filmstrip",defaults:{mode:"write"}},{init:function(){this.app=this.options.app;this.$filmstrip=this.element.find(".jcarousel");this.$prevNav=this.element.find(".prev-navigation");this.$nextNav=this.element.find(".next-navigation");this.isRendered=!1},setBookletDefinModel:function(a,b){var c=this;b&&(this.options.mode=b);this.isRendered&&this.removeFilmstrip();this.bookletDefinModel=a;this.bookletDefinModel.bind("change",
function(a,b){"count"===b||"itempos"===b?(c.removeFilmstrip(),c.renderStrip(),c.setFilmstripItemSelected(c.bookletDefinModel.selectedReportPos)):"selreportpos"===b&&c.setFilmstripItemSelected(c.bookletDefinModel.selectedReportPos)});this.renderStrip()},renderStrip:function(){var a=this,b=[];this.bookletDefinModel&&(b=this.bookletDefinModel.getBookletReports());this.$filmstrip.empty();var c=this.$filmstrip.append("<ul/>").find("ul");$.when(c.html(can.view("templates/filmstrip.ejs",{filmstripItems:b}))).done(function(){a.$filmstrip.jcarousel();
a.isRendered=!0;a.makeFilmstripItemsSortable();a.showHideNextPrevNavigator()})},showHideNextPrevNavigator:function(){this.isRendered&&(this.$prevNav.hide(),this.$nextNav.hide(),this.isAllItemFullyVisible()||(this.$prevNav.show(),this.$nextNav.show()))},makeFilmstripItemsSortable:function(){var a=this,b=$("ul",this.$filmstrip);"write"===this.options.mode&&b.sortable({containment:".navigation",axis:"x",opacity:0.75,forcePlaceholderSize:!0,helper:"clone",placeholder:"filmstrip-drag-placeholder",revert:100,
start:function(a,b){var e=b.item.index();b.item.data("startPos",e)},stop:function(b,d){var e=d.item.data("startPos"),h=d.item.index();e!==h&&a.bookletDefinModel.changeReportPositionInBooklet(e,h)}})},reloadFilmstrip:function(){this.$filmstrip.jcarousel("reload")},removeFilmstrip:function(){this.$filmstrip.attr("data-jcarousel")&&(this.$filmstrip.jcarousel("destroy"),this.isRendered=!1)},removeFilmstripItem:function(a){this.$filmstrip.jcarousel.find("li:eq("+a+")").remove();this.$filmstrip.jcarousel("reload")},
isAllItemFullyVisible:function(){this.reloadFilmstrip();var a=!0,b=this.$filmstrip.jcarousel("fullyvisible"),c=this.$filmstrip.jcarousel("items");b&&c&&(a=c.length===b.length?!0:!1);return a},setFilmstripItemSelected:function(a){var b;if(b=this.$filmstrip.jcarousel("items")[a])0>this.$filmstrip.jcarousel("fullyvisible").index(b)&&this.$filmstrip.jcarousel("scroll",a),a=$(b).find(".filstripitem"),this.element.find(".filstripitem").not(a).removeClass("selected"),a.addClass("selected")},show:function(){$(".btn-show-hide-filmstrip-caption").text("Hide Filmstrip");
$(this.element).show();this.showHideNextPrevNavigator()},hide:function(){$(".btn-show-hide-filmstrip-caption").text("Show Filmstrip");$(this.element).hide()},".filstripitem mouseover":function(a){"write"===this.options.mode&&$(a).find(".filmstrip-item-removebutton").show()},".filstripitem mouseleave":function(a){$(a).find(".filmstrip-item-removebutton").hide()},".filstripitem click":function(a){this.bookletDefinModel.setBookletReportSelected(1*a.attr("pos"))},".prev-navigation click":function(){0<
this.$filmstrip.jcarousel("items").length&&this.$filmstrip.jcarousel("scroll","-=1")},".next-navigation click":function(){0<this.$filmstrip.jcarousel("items").length&&this.$filmstrip.jcarousel("scroll","+=1")},".filmstrip-item-removebutton click":function(a,b){b.stopPropagation();this.bookletDefinModel.removeReportFromBooklet(1*a.attr("pos"))},"{window} resize":function(){this.showHideNextPrevNavigator()}});steal.executed("js/controllers/FilmstripController.js");
can.Control.extend("Sentrana.Controllers.BookletView",{pluginName:"sentrana_booklet_view",defaults:{app:null,bookletDefinModel:null,displayMode:"read",titleCls:"",showEdit:!1}},{init:function(){this.element.html(can.view("templates/booklet-view-panel.ejs",{}));this.$containerPane=this.element.find(".report-view");this.reportViewControllerMap={};this.reportViewController=void 0;this.reloadReportId=0;this.updateUI()},update:function(){this.updateUI()},updateUI:function(){this.$containerPane.html("");
this.options.bookletDefinModel.bookletModel?this.options.reportsLoaded?this.showReports():this.options.bookletDefinModel.bookletModel.reportsRefreshed?this.showReports():this.options.bookletDefinModel.getReports(this.options.bookletDefinModel.bookletModel.id):this.showReports()},showReports:function(){if((this.reports=this.options.bookletDefinModel.getBookletReports())&&0<this.reports.length&&!this.isRendered)this.currentReportIndex=-1==this.options.bookletDefinModel.selectedReportPos?0:this.options.bookletDefinModel.selectedReportPos,
this.options.bookletDefinModel.setBookletReportSelected(-1),this.options.bookletDefinModel.setBookletReportSelected(this.currentReportIndex),this.isRendered=!0},showNavigationButtons:function(){this.reportViewController&&(this.reportViewController.addActionButton({cls:"fa-caret-left",eventType:"move_prev",title:"View previous report",dropdown:!1}),this.reportViewController.addActionButton({cls:"fa-caret-right",eventType:"move_next",title:"View next report",dropdown:!1}))},enableDisableNavigationButtons:function(){var a=
this.element.find(".fa-caret-right").closest(".btn"),b=this.element.find(".fa-caret-left").closest(".btn");!this.reports||1>=this.reports.length?(b.addClass("disabled"),a.addClass("disabled")):this.currentReportIndex?this.reports.length-1===this.currentReportIndex?(b.removeClass("disabled"),a.addClass("disabled")):(b.removeClass("disabled"),a.removeClass("disabled")):(b.addClass("disabled"),a.removeClass("disabled"))},addEditButton:function(){this.reportViewController.addActionButton({cls:"fa-edit",
eventType:"editselected_report",title:"Edit report",dropdown:!1})},removeEditButton:function(){this.reportViewController.removeButtonFromBar({cls:"fa-edit",eventType:"editselected_report"})},blockElement:function(a,b){this.isBlocked=!0;$(a).block({message:b,css:{width:"auto",padding:0,border:0,backgroundColor:"transparent",cursor:"default"},overlayCSS:{backgroundColor:"#000",opacity:0.3,cursor:"default"}})},unBlockElement:function(a){$(a).unblock();this.isBlocked=!1},renderReport:function(a,b,c){var d=
this,e=$('<div id="report-view-'+b+'"></div>'),b=e.sentrana_report_view({app:this.options.app,titleCls:this.options.titleCls,showName:c,showFilters:!0,showChartOptions:!0,reportNameWithOutSpecialChar:b,reportDefinitionInfoModel:a,callBackOnFail:function(){d.unBlockElement(d.element.find(".report-view"))}}).control();this.reportViewController=this.reportViewControllerMap[a.name]=b;var b=0,h;for(h in this.reportViewControllerMap)this.reportViewControllerMap.hasOwnProperty(h)&&b++;1<b&&this.reportViewController.hide();
"write"===this.options.displayMode?this.reportViewController.setTitle("Preview Reports: ",a.name):"read"===this.options.displayMode&&this.reportViewController.setTitle("Viewing Booklet: ",this.options.bookletDefinModel.bookletModel.name+" - by "+this.options.bookletDefinModel.bookletModel.createUser);this.$containerPane.append(e);this.reportViewController.viewReport(a);this.showNavigationButtons()},viewReport:function(a){this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.ViewBookletReport,
Context:Sentrana.ActionLog.Contexts.SavedBookLet,ElementType:Sentrana.ActionLog.ElementTypes.Report,ElementId:a.id});this.blockElement(this.element.find(".report-view"),'<div class="loading"><p class="small-waitingwheel"><img src="images/loader-white.gif"/></p></div>');this.viewingReport=a;var b=a.name.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"),c="read"===this.options.displayMode?!0:!1;(this.reportViewController=this.reportViewControllerMap[a.name])?this.reloadReportId===a.id?(this.reloadReportId=
0,this.reportViewController.destroy(),$("#report-view-"+b).remove(),this.renderReport(a,b,c)):(this.unBlockElement(this.element.find(".report-view")),$("#report-view-"+b).show(),this.hideAllRreortsExceptViewingReport()):this.renderReport(a,b,c);a.bookletId?this.options.showEdit&&this.addEditButton():this.removeEditButton();this.enableDisableNavigationButtons()},updateGridChartView:function(){this.reportViewController&&this.reportViewController.updateView()}," move_prev":function(){this.options.app.handleUserInteraction();
this.element.find(".fa-caret-left").closest(".btn").hasClass("disabled")||(this.currentReportIndex*=1,0!==this.currentReportIndex&&(this.currentReportIndex-=1,this.options.bookletDefinModel.setBookletReportSelected(this.currentReportIndex)))}," move_next":function(){this.options.app.handleUserInteraction();this.element.find(".fa-caret-right").closest(".btn").hasClass("disabled")||(this.currentReportIndex*=1,this.currentReportIndex!==this.options.bookletDefinModel.getBookletReports().length-1&&(this.currentReportIndex+=
1,this.options.bookletDefinModel.setBookletReportSelected(this.currentReportIndex)))}," editselected_report":function(){this.options.app.handleUserInteraction();this.element.trigger("edit_report",this.options.bookletDefinModel.getSelectedBookletReport())},"{bookletDefinModel} change":function(a,b,c,d,e){"selreportpos"===c&&0<a.count?0>1*e||(this.currentReportIndex=1*a.selectedReportPos,this.reports=a.getBookletReports(),(a=this.reports[this.currentReportIndex])&&this.viewReport(a)):"count"===c&&(1<=
e?(this.showReports(),this.enableDisableNavigationButtons()):this.$containerPane.hide())},hideAllRreortsExceptViewingReport:function(){for(var a=0;a<this.reports.length;a++)this.viewingReport.name!==this.reports[a].name&&this.reportViewControllerMap[this.reports[a].name]&&$("#report-view-"+this.reports[a].name.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-")).hide()},updateReportView:function(){this.hideAllRreortsExceptViewingReport();this.unBlockElement(this.element.find(".report-view"));this.reportViewController&&
(this.reportViewController.show(),this.reportViewController.updateGridView(),this.reportViewController.reFlowChartView())}," chart_rebind":function(){this.isBlocked&&this.updateReportView()}," chart_failed":function(){this.isBlocked&&this.updateReportView()}});steal.executed("js/controllers/BookletViewController.js");
steal("js/controllers/ExecutionMonitorController.js","js/observes/ExecutionMonitorObserve.js","js/constructs/ReportFilterUtil.js","js/controllers/RangeFilterController.js",function(){Sentrana.Controllers.CollapsibleContainer("Sentrana.Controllers.ReportViewController",{pluginName:"sentrana_report_view",defaults:{showName:!1,showColumns:!1,showFilters:!1,showExport:!1,showPrint:!1,showChartOptions:!1,rowRange:!0,changeChartType:!1,showMaximize:!0,allowDrillDown:!1,displayMode:"read",titleCls:"report-definition-header-bar",
callBackOnFail:void 0}},{show:function(){this.element.show()},hide:function(){this.element.hide()},initDOMObjects:function(){this.element.append(can.view("templates/"+this.panelTemplate,{titleCls:this.options.titleCls,reportNameWithOutSpecialChar:this.options.reportNameWithOutSpecialChar}));this.$indicator=this.element.find(".indicator");this.$content=this.element.find(".report-viewer-container");this.$buttonBar=this.element.find(".buttonBar");this.$title=this.element.find(".report-viewer-panel-title");
this.buildCollapsiblePanelUI();this.$containerPanel=this.getContainerPanel();this.$containerPanel.html(can.view("templates/reportViewer.ejs",{allowDrill:this.options.allowDrillDown}));this.$summary=this.element.find(".summary");this.$executionMonitor=this.element.find(".execution-monitor");this.$reportGrid=this.element.find(".report-grid");this.$reportChart=this.element.find(".report-chart");this.$reportColumn=this.element.find(".report-column");this.$reportColumnContainer=this.element.find(".report-column-cntr");
this.$reportFilter=this.element.find(".report-filter");this.$reportFilterContainer=this.element.find(".report-filter-cntr");this.$reportName=this.element.find(".report-name");this.$reportNameContainer=this.element.find(".report-name-cntr");this.$reportInfoContainer=this.element.find(".report-info-cntr");this.$reportInfoMsg=this.element.find(".report-info-loading-msg");this.$appliedRangeFilterContainer=this.element.find(".applied-range-filter-cntr");this.$appliedRangeFilter=this.element.find(".applied-range-filter");
this.$drillMenu=this.element.find(".drill-menu");this.$showHideFilters=this.element.find(".show-hide-report-filters");this.$showHideFilters.hide()},manipulateDOMObjects:function(){this.$appliedRangeFilterContainer.hide();this.$reportColumnContainer.hide();this.$reportFilterContainer.hide();this.$reportInfoContainer.hide();this.$reportNameContainer.hide()},getResultOptions:function(){var a;if(this.options.resultOptions)return this.options.resultOptions;this.options.reportDefinitionInfoModel&&(a=this.options.reportDefinitionInfoModel.resultOptions);
return a},initReportModels:function(){var a=this;this.chartDataModel=new Sentrana.Models.ChartData;this.chartDataModel.attr("chartCollapseTail",!1);this.reportDefnModel=new Sentrana.Models.ReportDefin({app:this.options.app});this.resultDataModel=new Sentrana.Models.ResultDataModel({app:this.options.app});this.resultDataModel.bind("change",function(b,c,d,e){switch(e){case "SUCCESS":a.options.app.unBlockElement(a.element.find(".report-viewer-container"));a.executionMonitorModel.resultDataModel=a.resultDataModel;
a.executionMonitorModel.startLocalDataChange();a.executionMonitorModel.setStaticData(void 0);a.executionMonitorModel.endLocalDataChange("SUCCESS");break;case "STARTING":a.options.app.blockElement(a.element.find(".report-viewer-container"),'<div class="loading"><p class="small-waitingwheel"><img src="images/loader-white.gif"/></p></div>')}});this.executionMonitorModel=new Sentrana.Models.ExecutionMonitor({app:this.options.app,reportDefinModel:this.reportDefnModel,resultDataModel:this.resultDataModel,
resultOptions:this.getResultOptions()});this.options.executionMonitorModel&&(this.executionMonitorModel=this.options.executionMonitorModel,this.executionMonitorModel.resultOptions=this.getResultOptions(),this.$executionMonitor.hide());this.executionMonitorModel.bind("change",function(b,c,d,e){"executionStatusDrilldown"===c&&"SUCCESS"===e&&setTimeout(function(){a.filterSectionRendered=!1;a.initReportFiltersController()},300);"localDataChangeStatus"===c&&"SUCCESS"===e&&a.updateDataView();if("executionStatus"===
c)switch(e){case "FAILURE":a.options.callBackOnFail&&"function"===typeof a.options.callBackOnFail&&a.options.callBackOnFail();break;case "SUCCESS":a.reportGridController&&a.reportGridController.element&&a.reportGridController.element.show();a.reportChartController&&a.reportChartController.element&&a.reportChartController.element.show();a.filterSectionRendered=!1;var h;a.executionMonitorModel.saveState&&(h=a.executionMonitorModel.resultDataModel);a.resultDataModel.updateData(a.executionMonitorModel.data,
a.getResultOptions(),h);a.showButtons();a.updateDataView();a.makeFilterContainerCollapsible()}});this.chartOptions={model:this.executionMonitorModel,chartData:this.chartDataModel,chart:{renderTo:".report-chart-cntr"},allowTypeSelectionOnFailure:!0,showOptions:this.options.showChartOptions,rowRange:this.options.rowRange,changeChartType:!1,preserveOptions:!0,showOptionsButton:!1,optionsDialogModal:!0,optionsDialogResizable:!1,parent:this,optionDialogWidth:400,allowDrill:this.options.allowDrillDown,
stopInitialRendering:!1,chartTextOptions:{chartTitle:" "},chartExport:{url:Sentrana.Controllers.BIQController.generateUrl("ExportChart"),exporting:{enabled:!1},print:{enabled:!1}},chartHeight:400,donotInitChartData:!0,showShortCategoryTitle:!0};"read"===this.options.displayMode&&(this.chartOptions.showChartOptions={chartXAxisLabelRotation:!0,chartBinCount:!0,chartLegendAttribute:!0,chartCollapseTail:!0,chartCollapseItemName:!0,chartCollapseRowLimit:!0,chartAutoSegmentation:!0,chartAttrToSegment:!0,
chartMetricToSegment:!0})},getChartType:function(){return this.chartOptions.chartData.chartType},makeFilterContainerCollapsible:function(){this.$showHideFilters.show();this.$showHideFilters.off("click");this.$showHideFilters.click({controller:this},this.ShowHideFiltersOnClick)},ShowHideFiltersOnClick:function(a){var a=a.data.controller,b=$(this).find(".indicator-icon"),c=$(this).attr("Title");$(this).attr("Title","Show filters"===c?"Hide filters":"Show filters");$(b[0]).toggleClass("fa-minus-square");
a.element.find(".report-filters-container").slideToggle("normal");a.initReportFiltersController()},initReportFiltersController:function(){this.filterSectionRendered?this.reportFiltersController&&this.reportFiltersController.reDrawSliders():(this.reportFiltersController&&!this.reportFiltersController._destroyed&&this.reportFiltersController.destroy(),this.reportFiltersController=this.element.find(".report-filters-container").sentrana_report_filters({app:this.options.app,resultDataModel:this.resultDataModel}).control(),
this.filterSectionRendered=!0)}," reset_filtercontrol":function(){this.filterSectionRendered=!1;this.initReportFiltersController()},updateDataView:function(){var a=$(document).scrollTop();this.updateAppliedFilterView();$(document).scrollTop(a)},initDialogs:function(){$(".result-definition-element").html("");if(this.options.reportNameWithOutSpecialChar)$("#"+this.options.reportNameWithOutSpecialChar).html(""),$("#"+this.options.reportNameWithOutSpecialChar).append('<div class="result-definition-element"></div>'),
this.resultDefDlg=$("#"+this.options.reportNameWithOutSpecialChar).sentrana_dialogs_result_definition({app:this.options.app,resultDataModel:this.resultDataModel}).control();else{var a=this.element.find(".result-definition-dlg");a.html("");a.append('<div class="result-definition-element"></div>');this.resultDefDlg=a.sentrana_dialogs_result_definition({app:this.options.app,resultDataModel:this.resultDataModel}).control()}this.maximizeChartDlg=this.element.find("#maximize-chart-dlg").sentrana_dialogs_maximize_chart({app:this.options.app,
dialogDimension:Sentrana.getMaxViewDialogDimension()}).control();this.printSetupDialog=this.element.find("#print-setup-dialog").sentrana_dialogs_setup_print_options({app:this.options.app}).control()},getChartOptions:function(){return this.reportChartController.getChartData()}," grid_column_reordered":function(a,b,c){this.resultDataModel.reorderColumnPos(c.from,c.to);this.executionMonitorModel.reportDefinModel.resultDataModel.reorderColumnPos(c.from,c.to);var d=this;setTimeout(function(){d.filterSectionRendered=
!1;d.initReportFiltersController();d.updateReportChartForFilter(d.resultDataModel.getData())},50)},initReportControls:function(a){this.executionMonitorController=this.$executionMonitor.sentrana_execution_monitor({executionMonitorModel:this.executionMonitorModel,showHideGridFn:function(b){a.$reportGrid[b?"show":"hide"]()},showHideChartFn:function(b){a.$reportChart[b?"show":"hide"]()},parent:this}).control();this.reportGrid=this.$reportGrid.sentrana_report_grid({model:this.executionMonitorModel,reportDefnModel:this.reportDefnModel,
donotUpdateModel:!0,stopInitialRendering:!1,allowSort:!1});this.reportGridController=this.reportGrid.control();this.reportChartController=this.$reportChart.sentrana_report_chart(this.chartOptions).control();this.drillController=this.$drillMenu.sentrana_drill_menu({executionMonitorModel:this.executionMonitorModel,parent:this}).control()},init:function(){this.titleCls=this.options.titleCls;this.panelTemplate="report-view-panel.ejs";this.containerButtonTemplate="templates/collapsibleContainerButton.ejs";
this.ExpandIcon="fa-minus-square";this.CollapseIcon="fa-plus-square";this.initDOMObjects();this.manipulateDOMObjects();this.reportWiseFilters={};this.viewingReportColumnDefn=[];var a=this;this.app=this.options.app;this.initReportModels(a);this.initReportControls(a);this.options.callBackFunctionOnExpand=function(){a.updateView()};this.options.callBackFunctionOnCollapse=function(){};this.initDialogs()},showButtons:function(){this.addButtonToBar({title:"Report Options",cls:"fa-tasks",eventType:"report_options",
dropdown:!0,menuItems:[{id:"dataFilters",name:"Data Filters"},{id:"chartOptions",name:"Chart Options"},{id:"exportTable",name:"Download Table"},{id:"exportChart",name:"Download Chart",submenuItems:[{id:"exportChart_png",name:"Download PNG"},{id:"exportChart_jpeg",name:"Download JPEG"},{id:"exportChart_pdf",name:"Download PDF"}]},{id:"maximizeChart",name:"Maximize Chart"},{id:"printChartandTable",name:"Print Chart and Table",submenuItems:[{id:"printBoth",name:"Print Chart and Table"},{id:"printTable",
name:"Print Table"},{id:"printChart",name:"Print Chart"},{id:"printSetup",name:"Setup Print Options"}]}]})}," report_options":function(a,b,c){switch(c.type){case "dataFilters":this.showFilters();break;case "chartOptions":this.showOptionDialog();break;case "exportTable":this.exportAll("grid");break;case "exportChart_png":this.exportAll("png");break;case "exportChart_jpeg":this.exportAll("jpeg");break;case "exportChart_pdf":this.exportAll("pdf");break;case "maximizeChart":this.openMaximizeReportDialog();
break;case "printTable":this.printAll("grid");break;case "printChart":this.printAll("chart");break;case "printBoth":this.printAll("both");break;case "printSetup":this.openPrintSetupDialog()}}," print-report-with-params":function(a,b,c){app_resources.print_config.columns_in_page=c.cols;app_resources.print_config.rows_in_page=c.rows;this.printAll(c.printItem)},openPrintSetupDialog:function(){this.printSetupDialog.open()},showFilters:function(){var a=this.element.find(".show-hide-report-filters"),b=
a.find(".indicator-icon");a.attr("Title","Hide filters");$(b[0]).addClass("fa-minus-square");this.element.find(".report-filters-container").fadeIn("normal");this.initReportFiltersController()}," .report-chart mouseenter":function(){if(this.options.changeChartType){this.element.find(".chart-option").find(".chart-type").show().css("visibility","visible");var a=$("#"+this.reportChartController.chartAdapter.chartType.replace(" ","-")+"-chart-button-"+this.reportChartController.reportChartID);a.attr("checked",
!0);a.parent().addClass("active")}}," .report-chart  mouseleave":function(){this.options.changeChartType&&this.element.find(".chart-option").find(".chart-type").css("visibility","hidden")},showLoadingInfo:function(a){this.$reportInfoContainer.show();this.$reportInfoMsg.html(a)},hideLoadingInfo:function(){this.$reportInfoContainer.hide()},addActionButton:function(a){this.addButtonToBar(a)},setTitle:function(a,b){var c="";a&&(c+="<strong>"+a+"</strong>");b&&(c+=b);this.$title.html(c)},updateView:function(){this.reFlowChartView();
this.updateGridView();this.initReportFiltersController()},updateChartView:function(){this.reportChartController&&!this.reportChartController._destroyed&&this.reportChartController.updateView(!1)},reFlowChartView:function(){this.reportChartController&&!this.reportChartController._destroyed&&(this.reportChartController.reFlowChartView(),this.reportChartController.resizeRangeSlider())},updateGridView:function(){this.reportGridController&&!this.reportGridController._destroyed&&(this.reportGridController.resizeGrid(!1),
this.showColumnUtilIcon())},viewReport:function(a){this.viewingReport=a;this.hideLoadingInfo();this.options.showName?(this.$reportNameContainer.show(),this.$reportName.html(a.name)):this.$reportNameContainer.hide();this.options.showColumns?(this.$reportColumnContainer.show(),this.$reportColumn.html(a.formatColumns(!1))):this.$reportColumnContainer.hide();this.options.showFilters?(this.$reportFilterContainer.show(),this.$reportFilter.html(a.formatFilter(!1))):this.$reportFilterContainer.hide();(this.options.showName||
this.options.showColumns||this.options.showFilters)&&this.$summary.addClass("report-viewer-panel-summary");this.reportDefnModel.setDefn(a.definition);this.reportGridController.options.allowDrill=this.options.allowDrillDown;a.chartOptions&&(this.chartOptions.chart.chartType=a.chartOptions.chartType,this.chartOptions.chartData.attr(a.chartOptions.attr?a.chartOptions.attr():a.chartOptions),this.chartOptions.chartData.fromDB=!0);this.reportChartController&&!this.reportChartController._destroyed&&this.reportChartController.destroy();
var b=this.hasMetrics(a.definition.template.split("|"));this.executionMonitorController.options.hasMetrics=b;this.executionMonitorModel.attr("showGrid",a.showGrid);this.executionMonitorModel.attr("showChart",b);this.reportChartController=this.$reportChart.sentrana_report_chart(this.chartOptions).control();if("write"===this.options.displayMode){var c=this.getColumns(),d=this.chartOptions.chart.chartType,b=this.getJoinedTitle(c.metrics)+" by "+this.getJoinedTitle(c.attributes),e=this.getXAxisLabel(d,
c),c=this.getYAxisLabel(d,c);this.chartOptions.chartTextOptions.chartTitle=b;this.chartOptions.chartTextOptions.chartXAxisLabel=e;this.chartOptions.chartTextOptions.chartYAxisLabel=c}this.options.executionMonitorModel?this.$summary.hide():this.$summary.show();this.drillController&&(this.drillController.unCheckedOptions={});a.initializeFilters();this.executionMonitorModel.executeReportUsingDefnParams(a.definition.attr?a.definition.attr():a.definition,"CLEAR")},hasMetrics:function(a){for(var b=0;b<
a.length;b++)if("METRIC"===this.options.app.getDWRepository().getObjectByOID(a[b]).type)return!0;return!1},getXAxisLabel:function(a,b){return a===Sentrana.CHART_TYPE_SCATTER||a===Sentrana.CHART_TYPE_BUBBLE||a===Sentrana.CHART_TYPE_HISTOGRAM?b.metrics[0].name:this.getJoinedTitle(b.attributes)},getYAxisLabel:function(a,b){return a===Sentrana.CHART_TYPE_SCATTER||a===Sentrana.CHART_TYPE_BUBBLE?1<b.metrics.count?b.metrics[1].name:this.getJoinedTitle(b.metrics):this.chartOptions.chartData.chartType===Sentrana.CHART_TYPE_HISTOGRAM?
"Count":this.getJoinedTitle(b.metrics)},getColumns:function(){for(var a=this.reportDefnModel.templateUnits,b=[],c=[],d=0;d<a.length;d++)"ATTRIBUTE"===a[d].type?b.push(a[d]):c.push(a[d]);return{attributes:b,metrics:c}},getJoinedTitle:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].name);return b.join(", ")},exportReport:function(){this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.DownloadTable,Context:Sentrana.ActionLog.Contexts.SavedReport,ElementType:Sentrana.ActionLog.ElementTypes.Report,
ElementId:this.viewingReport.id});var a=this.reportDefnModel.getFileNameToExport()+".csv",a=encodeURIComponent(a),b=this.reportDefnModel.getReportDefinitionParameters(!0);b.template=b.template.replace(/\%/g,"%25").replace(/\+/g,"%2B");b.filter=b.filter.replace(/\+/g,"%2B");this.options.app.post(Sentrana.Controllers.BIQController.generateUrl("ExportToCsv"),{templateUnits:b.template,filterUnits:b.filter,totalsOn:!1,sort:b.sort,fileName:a})},printChart:function(){this.reportChartController.chart&&this.viewingReport.showChart&&
(this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.PrintChart,Context:Sentrana.ActionLog.Contexts.SavedReport,ElementType:Sentrana.ActionLog.ElementTypes.Report,ElementId:this.viewingReport.id}),this.printChartSentranaFormat())},printChartSentranaFormat:function(){if(this.reportChartController.chart&&this.viewingReport.showChart){this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.PrintChart,Context:Sentrana.ActionLog.Contexts.SavedReport,ElementType:Sentrana.ActionLog.ElementTypes.Report,
ElementId:this.viewingReport.id});var a=this.options.app.retrieveUserInfo(),b=this.getChartOptionsForPrint();this.clientSidePrinting=new window.ClientSidePrinting({tableData:null,user:a,report:this.viewingReport,chartOptions:b,parent:this.element,chartonly:!0})}},printGrid:function(){if(this.viewingReport.showGrid){this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.PrintGrid,Context:Sentrana.ActionLog.Contexts.SavedReport,ElementType:Sentrana.ActionLog.ElementTypes.Report,
ElementId:this.viewingReport.id});var a=this.getTableData(),b=this.options.app.retrieveUserInfo();this.clientSidePrinting=new window.ClientSidePrinting({tableData:a,user:b,report:this.viewingReport,parent:this.element})}},getChartOptionsForPrint:function(){var a=this.resultDataModel.getData(),a={model:$.extend(!0,{},this.chartOptions.model),reportData:a,chartData:$.extend(!0,{},this.chartOptions.chartData),chart:{renderTo:".print-chart-ctr",chartType:this.chartOptions.chartData.chartType},showOptions:!1,
optionDialogWidth:400,allowDrill:!1,donotInitChartData:!0,chartTextOptions:{chartTitle:" "},chartExport:{exporting:{enabled:!1},print:{enabled:!1}},chartHeight:400,showShortCategoryTitle:!0};if(!this.viewingReport.showChart||!this.chartOptions.chartData||!this.chartOptions.chartData.chartType)a=void 0;return a},printGridAndChart:function(){if(this.viewingReport.showGrid||this.viewingReport.showChart)if(!this.viewingReport.showGrid&&this.viewingReport.showChart)this.printChartSentranaFormat();else{this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.PrintReport,
Context:Sentrana.ActionLog.Contexts.SavedReport,ElementType:Sentrana.ActionLog.ElementTypes.Report,ElementId:this.viewingReport.id});var a=this.getTableData(),b=this.options.app.retrieveUserInfo(),c=this.getChartOptionsForPrint();this.clientSidePrinting=new window.ClientSidePrinting({tableData:a,user:b,report:this.viewingReport,chartOptions:c,parent:this.element})}},getTableData:function(){var a=[];$.each(this.reportGrid.dataTableSettings[this.reportGrid.dataTableSettings.length-1].aoColumns,function(b,
c){a.push({columValue:c.sTitle,columnClass:c.sClass,rows:[]});a.rows=[]});for(var b=this.element.find(".table tbody tr"),c=[],d=0;d<b.length;d++){var e=this.reportGridController.dataTable.fnGetData(b[d]),h=[];$.each(a,function(a,b){h.push({columValue:e["c"+a+"_f"],columnClass:b.columnClass})});var g="odd-row";0===d%2&&(g="even-row");c.push({index:d,trclass:g,cols:h})}return{tablecolumns:a,tableRows:c}},".report-viewer-title click":function(){this.options.app.handleUserInteraction();this.showHideCollapsibleContent();
return!1}," print_all":function(a,b,c){this.printAll(c.type)},printAll:function(a){this.options.app.handleUserInteraction();if("chart"!==a||this.reportChartController.chart)"grid"===a?this.printGrid():"chart"===a?this.printChartSentranaFormat():"both"===a&&this.printGridAndChart()}," export_all":function(a,b,c){this.exportAll(c.type,c.size)},exportAll:function(a,b){this.options.app.handleUserInteraction();if("grid"===a||this.reportChartController.chart)if("grid"===a)this.exportReport();else if(this.viewingReport.showChart&&
this.chartOptions.chartData&&this.chartOptions.chartData.chartType&&this.reportChartController.chart.options){this.options.app.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.ExportChart+"-"+a,Context:Sentrana.ActionLog.Contexts.SavedReport,ElementType:Sentrana.ActionLog.ElementTypes.Report,ElementId:this.viewingReport.id});var c=this.reportDefnModel.getFileNameToExport(),d=b?b.width:this.reportChartController.chart.chartHeight+100,e=b?b.height:this.reportChartController.chart.chartWidth+
100;"pdf"===a?this.reportChartController.chart.exportChart({type:"application/pdf",sourceHeight:d,sourceWidth:e,filename:c}):"jpeg"===a?this.reportChartController.chart.exportChart({type:"image/jpeg",sourceHeight:d,sourceWidth:e,filename:c}):"png"===a&&this.reportChartController.chart.exportChart({type:"image/png",sourceHeight:d,sourceWidth:e,filename:c})}}," show_chart_options":function(){this.showOptionDialog()}," chart_failed":function(){this.element.find(".options-btn-container").remove();this.element.find(".maximize-btn-container").remove();
this.reportChartController&&this.reportChartController.hideSlider()},".options-btn-container .cc-button click":function(){this.showOptionDialog()}," .maximize-btn-container .cc-button click":function(){this.openMaximizeReportDialog()},showOptionDialog:function(){this.options.app.handleUserInteraction();this.reportChartController.chart&&this.reportChartController.showOptionDialog()},applyFilterToGridAndChart:function(a){a&&(this.updateReportGridForFilter(a),this.updateReportChartForFilter(a))},updateReportGridForFilter:function(a){this.reportGridController.staticUpdate(a)},
updateReportChartForFilter:function(a){var b=$.extend(!0,{},this.chartOptions);this.reportChartController.chartAdapter&&(b.chart.chartType=this.reportChartController.chartAdapter.chartType);b.reportData=a;this.reportChartController.staticUpdate(b)},blockElement:function(a,b){$(a).block({message:b,css:{width:"auto",padding:0,border:0,backgroundColor:"transparent",cursor:"default"},overlayCSS:{backgroundColor:"#000",opacity:0.3,cursor:"default"}})},unBlockElement:function(a){$(a).unblock()},updateAppliedFilterView:function(){this.$appliedRangeFilterContainer.show();
var a="",b=this.resultDataModel.filters||[];if(0<b.length)for(var c=0;c<b.length;c++){var d=b[c];if(d.filterType===Sentrana.Enums.FILTER_TYPE_RANGE)0<a.length&&(a+=", "),a+=d.columnName+" ["+d.formattedMin+" - "+d.formattedMax+"]";else if(d.filterType===Sentrana.Enums.FILTER_TYPE_COLUMN&&d.isMetrics){var e=this.resultDataModel.findMinMaxValues(d);0<a.length&&(a+=", ");a+=d.columnName+" ["+e.formattedMin+" - "+e.formattedMax+"]"}}this.$appliedRangeFilter.html(a);c=this.element.find(".applied-range-filter-cntr");
0<b.length?c.show():c.hide();0<a.length?c.show():c.hide()},inArray:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}," grid_rendered":function(){this.showColumnUtilIcon();this.renderShowHiddenColumnButton();this.showHideHiddedColumnIcon()}," grid_drawn":function(){this.showColumnUtilIcon()}," grid_header_clicked":function(a,b,c){b=$(c.column).find(".grid-column-util").attr("oid");a=this.resultDataModel.getColumn(b);b=this.resultDataModel.getColumnIndex(b);this.resultDataModel.startDataChange();
this.resultDataModel.swapSortPosition(b,1,"A"===a.sortOrder?"D":"A");this.resultDataModel.sortDataByMultipleColumn();this.resultDataModel.endDataChange()},renderShowHiddenColumnButton:function(){this.$reportGrid.find(".table-header .table-caption").html(can.view("templates/hidden-columns-container.ejs",{}));var a=this;this.$reportGrid.find(".hidden-column-util").click(function(){a.options.app.handleUserInteraction();var b=$(this),c=a.element.find(".report-view-panel-body").offset(),d=a.element.find(".hidden-column-element");
d.css({position:"absolute",top:b.offset().top-c.top+50+"px",left:b.offset().left-c.left+8+"px"}).show();(b=d.control())&&!b._destroyed&&b.destroy();d.sentrana_grid_hidden_column({app:a.options.app,hiddenColumns:a.resultDataModel.hiddenColumns});return!1})},".dataTable thead th mouseover":function(a){$(a).find(".grid-column-util").removeClass("invisible visible").addClass("visible")},".dataTable thead th mouseout":function(a){$(a).find(".grid-column-util").removeClass("invisible visible").addClass("invisible")},
showColumnUtilIcon:function(){var a=this.resultDataModel.manipulatedData.colInfos,b=0;if(a){$(".result-definition-element").html("");this.removeGridUtilIcons();this.renderGridUtilIcons();for(var c=0;c<a.length;c++)if(!this.resultDataModel.isColumnHidden(a[c].title)){var b=b+1,d=this.$reportGrid.find(".dataTables_scrollHead .dataTable thead th:nth-child("+b+")");d.children(".grid-column-util").attr("oid",a[c].oid);d.removeClass("sorting sorting_asc sorting_desc");"A"===a[c].sortOrder.toUpperCase()?
d.addClass("sorting_desc"):d.addClass("sorting_asc")}}},removeGridUtilIcons:function(){this.$reportGrid.find(".dataTables_scrollHead .dataTable thead th").find(".grid-column-util").remove();this.$reportGrid.find(".dataTables_scrollHead .dataTable thead th").find(".clear").remove();this.$reportGrid.find(".dataTables_scrollBody .dataTable thead th").find(".grid-column-util").remove();this.$reportGrid.find(".dataTables_scrollBody .dataTable thead th").find(".clear").remove()},renderGridUtilIcons:function(){var a=
this;this.$reportGrid.find(".dataTables_scrollHead .dataTable thead th").append(can.view("templates/grid-column-util.ejs",{})).children(".grid-column-util").click(function(){a.options.app.handleUserInteraction();var b=$(this),c=b.attr("oid"),d=a.element.find(".report-view-panel-body").offset(),e=a.element.find(".column-util-element");e.css({position:"absolute",top:b.offset().top-d.top+50+"px",left:b.offset().left-d.left+8+"px"}).show();(b=e.control())&&!b._destroyed&&b.destroy();e.sentrana_report_sort_util({app:a.options.app,
oid:c,resultDataModel:a.resultDataModel,panelBody:d});return!1})}," hide_grid_column":function(a,b,c){this.resultDataModel.startDataChange();this.resultDataModel.hideColumn(c);this.resultDataModel.endDataChange();this.showHideHiddedColumnIcon()}," restore_column":function(a,b,c){this.resultDataModel.startDataChange();this.resultDataModel.showColumn(c);this.resultDataModel.endDataChange();this.showHideHiddedColumnIcon()},showHideHiddedColumnIcon:function(){0<this.resultDataModel.hiddenColumns.length?
this.$reportGrid.find(".hidden-column-util").show():this.$reportGrid.find(".hidden-column-util").hide()}," reset_sort-options":function(){this.resultDataModel.startDataChange();this.resultDataModel.resetSortOptions();this.resultDataModel.sortDataByMultipleColumn();this.resultDataModel.endDataChange()}," chart_row_slider_changed":function(){this.options.app.handleUserInteraction()}," chart_element_clicked":function(){this.options.app.handleUserInteraction()},getChartOptionsForMaximize:function(){var a=
this.resultDataModel.getData();return{model:$.extend(!0,{},this.chartOptions.model),reportData:a,chartData:$.extend(!0,{},this.chartOptions.chartData),chart:{renderTo:".maximized-chart-cntr",chartType:this.chartOptions.chart.chartType},showOptions:!1,allowClickEvent:!1,optionDialogWidth:400,allowDrill:!1,donotInitChartData:!0,chartTextOptions:{chartTitle:" "},chartExport:{exporting:{enabled:!1},print:{enabled:!1}},chartHeight:900,startPos:0,endPos:1,showShortCategoryTitle:!0}},openMaximizeReportDialog:function(){this.maximizeChartDlg.open(this.getChartOptionsForMaximize())},
closeMaximizeWindow:function(){this.$chartArea.dialog("isOpen")&&this.$chartArea.dialog("close")}," print_closed":function(){this.options.app.handleUserInteraction();this.initReportFiltersController();this.updateView();this.reportChartController&&(this.reportChartController.updateView(void 0,!0),this.isMaximizedDialogOpened&&this.origFocus&&this.origFocus.focus())}," chart_option_dialog_ok":function(a,b,c){this.chartOptions=$.extend({},this.chartOptions,c)}})});steal.executed("js/controllers/ReportViewController.js");
can.Control.extend("Sentrana.Controllers.RangeFilter",{pluginName:"sentrana_range_filter",defaults:{app:null,rangeFilterModel:null}},{init:function(){this.app=this.options.app;this.rangeFilterModel=this.options.rangeFilterModel;this.rangeFilterModel.backup();this.element.html("templates/slider.ejs",{name:this.rangeFilterModel.columnName});this.minInput=this.element.find(".range-filter-custom-input-left");this.maxInput=this.element.find(".range-filter-custom-input-right");this.initControllerValue();
this.batchNumber=void 0},initControllerValue:function(){this.precision=this.getPrecision();var a=this;this.$sliderElement=this.element.find(".range-filter-slider-element");this.$sliderElement.editRangeSlider({defaultValues:{min:a.rangeFilterModel.min,max:a.rangeFilterModel.max},arrows:!1,valueLabels:"hide",bounds:{min:a.rangeFilterModel.lowerBound,max:a.rangeFilterModel.upperBound},formatter:function(b){return a.dotNetFormatter(b,a.rangeFilterModel.formatString)}});this.setInputValue(this.rangeFilterModel.attr("min"),
this.rangeFilterModel.attr("max"));this.$sliderElement.bind("valuesChanged",function(b,c){var d=a.precision;a.rangeFilterModel.dataType===Sentrana.DataType.PERCENTAGE&&(d=6);var e=a.rangeFilterModel.min.toFixed(d),h=a.rangeFilterModel.max.toFixed(d),g=c.values.min.toFixed(d),d=c.values.max.toFixed(d);if(a.isNumber(g)&&a.isNumber(g)){if(a.isNumber(g)&&a.isNumber(d)&&(e!==g||h!==d))can.Observe.startBatch(),a.rangeFilterModel.attr("min",1*g),a.rangeFilterModel.attr("max",1*d),e=a.dotNetFormatter(c.values.min,
a.rangeFilterModel.formatString),h=a.dotNetFormatter(c.values.max,a.rangeFilterModel.formatString),a.rangeFilterModel.attr("formattedMin",e),a.rangeFilterModel.attr("formattedMax",h),a.setInputValue(c.values.min,c.values.max),can.Observe.stopBatch();setTimeout(function(){a.setInputsWidth()},2)}else a.element.hide()});setTimeout(function(){a.setInputsWidth()},2)},setInputValue:function(a,b){var c=this.dotNetFormatter(a,this.rangeFilterModel.formatString),d=this.dotNetFormatter(b,this.rangeFilterModel.formatString);
this.minInput.val(c);this.maxInput.val(d)},setInputsWidth:function(){var a=this.dotNetFormatter(this.rangeFilterModel.attr("min"),this.rangeFilterModel.formatString),b=this.dotNetFormatter(this.rangeFilterModel.attr("max"),this.rangeFilterModel.formatString);a&&b&&(a=this.getInputWidth(a.length>b.length?a:b),this.minInput.css("width",a),this.maxInput.css("width",a))},getInputWidth:function(a){a=a.replace(/\,/g,"");a=a.replace(".","");return 9*a.length+"px"},destroyMe:function(){this.$sliderElement&&
this.$sliderElement.editRangeSlider("destroy")},reDrawSlider:function(){var a=this;this.$sliderElement&&(this.$sliderElement.editRangeSlider("destroy"),this.$sliderElement.editRangeSlider({defaultValues:{min:a.rangeFilterModel.min,max:a.rangeFilterModel.max},bounds:{min:a.rangeFilterModel.lowerBound,max:a.rangeFilterModel.upperBound},arrows:!1,valueLabels:"hide",formatter:function(b){return a.dotNetFormatter(b,a.rangeFilterModel.formatString)}}))},getPrecision:function(){return this.rangeFilterModel.dataType===
Sentrana.DataType.PERCENTAGE?1:1*this.rangeFilterModel.formatString.replace(/^\D+/g,"")},dotNetFormatter:function(a,b){var c=b;if(-1<b.indexOf("N")||-1<b.indexOf("C")){-1<b.indexOf("N")&&(c="#,#");-1<b.indexOf("C")&&(c="$#,#");var d=parseInt(b.substr(1,b.length-1),10);if(0===d)a=Math.round(a);else for(var e=0;e<d;e++)0===e&&(c+="."),c+="0"}return String.format("{0:"+c+"}",a)},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},".range-filter-custom-input-left keypress":function(a,b){if(13==
b.keyCode){var c=$(a).val();if(0===c.length||!this.isNumber(c))return this.reSetSliderValues(),!1;var c=1*c,d=this.$sliderElement.editRangeSlider("values"),d=d.max;this.$sliderElement.editRangeSlider("values",c,d);$(a).blur();return!1}return!this.isNumberKey(a,b)?!1:!0},".range-filter-custom-input-right keypress":function(a,b){if(13==b.keyCode){var c=$(a).val();if(0===c.length||!this.isNumber(c))return this.reSetSliderValues(),!1;var c=1*c,d=this.$sliderElement.editRangeSlider("values"),d=d.min;this.$sliderElement.editRangeSlider("values",
d,c);$(a).blur();return!1}return!this.isNumberKey(a,b)?!1:!0},".range-filter-custom-input-left focus":function(a){var b=this.getSliderValue("left"),c=$(a).width();$(a).css("width","9em");var d=$(a).width();c>d&&$(a).css("width",c);c=1*$(a).parent().parent().css("zIndex")+1;$(a).parent().parent().css("z-index",c);setTimeout(function(){$(a).val(b);$(a).setCursorPosition(b.length)},10)},".range-filter-custom-input-right focus":function(a){var b=this.getSliderValue("right"),c=$(a).width();$(a).css("width",
"9em");var d=$(a).width();c>d&&$(a).css("width",c);c=1*$(a).parent().parent().css("zIndex")+1;$(a).parent().parent().css("z-index",c);setTimeout(function(){$(a).val(b);$(a).setCursorPosition(b.length)},10)},".range-filter-custom-input-left blur":function(a){var b=this.dotNetFormatter(1*this.getSliderValue("left"),this.rangeFilterModel.formatString);this.setInputsWidth();$(a).parent().parent().css("z-index",1);setTimeout(function(){$(a).val(b)},100)},".range-filter-custom-input-right blur":function(a){var b=
this.dotNetFormatter(1*this.getSliderValue("right"),this.rangeFilterModel.formatString);this.setInputsWidth();$(a).parent().parent().css("z-index",1);setTimeout(function(){$(a).val(b)},100)},isNumberKey:function(a,b){var c=b.which?b.which:event.keyCode;if(45===c)return 0<=$(a).val().indexOf("-")?!1:0===$(a).getCursorPosition()?!0:!1;if(46===c){if(0<=$(a).val().indexOf("."))return!1}else if(31<c&&(48>c||57<c))return!1;return!0},getSliderValue:function(a){var b=this.$sliderElement.editRangeSlider("values"),
c=b.min;"right"===a&&(c=b.max);return this.rangeFilterModel.dataType===Sentrana.DataType.PERCENTAGE?c.toFixed(6):0===this.precision?Math.round(c):c.toFixed(this.precision)},reSetSliderValues:function(){var a=this.$sliderElement.editRangeSlider("values");this.$sliderElement.editRangeSlider("values",a.min.toFixed(this.precision),a.max.toFixed(this.precision))},setMinMax:function(a,b){a===b?this.$sliderElement.editRangeSlider({enabled:!1}):this.$sliderElement.editRangeSlider({enabled:!0});this.rangeFilterModel.unbind("change");
this.rangeFilterModel.attr("min",a);this.rangeFilterModel.attr("max",b);this.rangeFilterModel.attr("lowerBound",a);this.rangeFilterModel.attr("upperBound",b);this.rangeFilterModel.attr("formattedMin",this.dotNetFormatter(a,this.rangeFilterModel.formatString));this.rangeFilterModel.attr("formattedMax",this.dotNetFormatter(b,this.rangeFilterModel.formatString));this.$sliderElement.editRangeSlider("bounds",a,b);this.$sliderElement.editRangeSlider("values",a,b);var c=this;this.rangeFilterModel.bind("change",
function(a,b){("min"===b||"max"===b)&&c.element.trigger("range_filter_changed",a.currentTarget)})},setSliderValues:function(a,b,c,d){c===d?this.$sliderElement.editRangeSlider({enabled:!1}):this.$sliderElement.editRangeSlider({enabled:!0});a<=c&&(a=c);b>=d&&(b=d);this.rangeFilterModel.unbind("change");this.rangeFilterModel.attr("min",a);this.rangeFilterModel.attr("max",b);this.rangeFilterModel.attr("lowerBound",c);this.rangeFilterModel.attr("upperBound",d);this.rangeFilterModel.attr("formattedMin",
this.dotNetFormatter(a,this.rangeFilterModel.formatString));this.rangeFilterModel.attr("formattedMax",this.dotNetFormatter(b,this.rangeFilterModel.formatString));this.$sliderElement.editRangeSlider("bounds",c,d);this.$sliderElement.editRangeSlider("values",a,b);this.rangeFilterModel.bind("change",function(){})},"{rangeFilterModel} change":function(){},isDirty:function(){return this.rangeFilterModel.isDirty()},getFilterParam:function(){if(void 0===this.rangeFilterModel.min)return!1;var a={};a.columnName=
this.rangeFilterModel.columnName;a.lowerBound=this.rangeFilterModel.lowerBound;a.upperBound=this.rangeFilterModel.upperBound;a.min=this.rangeFilterModel.min;a.max=this.rangeFilterModel.max;a.formattedMin=this.dotNetFormatter(this.rangeFilterModel.min,this.rangeFilterModel.formatString);a.formattedMax=this.dotNetFormatter(this.rangeFilterModel.max,this.rangeFilterModel.formatString);a.formatString=this.rangeFilterModel.formatString;a.dataType=this.rangeFilterModel.dataType;return a}});steal.executed("js/controllers/RangeFilterController.js");
steal("js/models/ReportRecipientsModel.js",function(){Sentrana.Models.ReportRecipients("Sentrana.Models.BookletRecipients",{methodBase:"BookletRecipients/"},{})});steal.executed("js/models/BookletRecipientsModel.js");
can.Observe.extend("Sentrana.Models.RangeFilter",{},{init:function(a){this.app=a.app;a=a.columnDetail;this.columnIndex=a.index;this.columnName=a.name;this.formatString=a.formatString;this.dataType=a.dataType;this.setup({lowerBound:void 0!==a.lowerBound?1*a.lowerBound:1*a.min,upperBound:void 0!==a.upperBound?1*a.upperBound:1*a.max,min:1*a.min,max:1*a.max})},setMinMax:function(a,b){this.attr("min",1*a);this.attr("max",1*b)},getMinMax:function(){return{min:this.min,max:this.max}},getSelectedRanges:function(){return{lowerBound:this.lowerBound,
upperBound:this.upperBound}}});steal.executed("js/observes/RangeFilterObserve.js");can.Observe.extend("Sentrana.Models.SessionKeepAlive",{},{init:function(){this.setup({createTime:void 0})},callServiceMethodToExtendSession:function(a){var b=a.retrieveUserInfo();b&&$.ajax({url:a.constructor.generateUrl("ValidateSession",{username:b.userName}),dataType:"json",async:!1})}});steal.executed("js/observes/SessionKeepAliveObserve.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.OnlyWhen",{pluginName:"sentrana_dialogs_only_when",defaults:{title:"Conditional Metric Editor",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this.INVALID_CHARS=[",","@"];this.tu=this.options.tu;this.reportDefnModel=this.options.reportDefnModel;this.loadForm();this.buildElementsUI();this._super(a,
b);this.setColumnName();this.updateFilterWindow();this.enableDissableOKButton()},getFormula:function(a){return/if\((.*?[^,]+)\,(.*?.+)\)/.exec(a.oid)[0]},addToRepotDefinition:function(a,b){var c=a;if(this.options.addToreport){var d=this.reportDefnModel.getTemplateUnitIndex(this.tu.hid),e=void 0!==this.tu.sortPos?this.tu.sortPos:d;this.reportDefnModel.deselectObject(this.tu.hid,"update");b?(c=this.options.app.dwRepository.formateReusableColumn(a),this.reportDefnModel.addConditionalMetricToReportDefinition(c,
d,e,this.tu.sortOrder||"D")):this.reportDefnModel.selectObject(c.hid,d,this.tu.sortPos)}this.closeDialog()},isValidName:function(){var a=this.element.find(".onlywhen-column-name");return 0===$.trim(a.val()).length?(this.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.derived_column.validation.empty_column_name_msg),"fail"),!1):this.isInvalidCharacterExistsInColumnName(a.val())?(this.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.derived_column.validation.column_cannot_contain_invalid_char,
this.getInvalidCharactersForColumnName()),"fail"),!1):this.sameNameExists($.trim(a.val()))?(this.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.derived_column.validation.duplicate_column_name),"fail"),!1):!0},getInvalidCharactersForColumnName:function(){return this.INVALID_CHARS.join(" ")},isInvalidCharacterExistsInColumnName:function(a){var b=this.INVALID_CHARS.join("\\");return RegExp("[\\"+b+"]").test(a)},sameNameExists:function(a){return this.sameColumnNameExists(a)||this.sameMetricNameExists(a)||
this.sameReusableColumnNameExists(a)?!0:!1},sameColumnNameExists:function(a){var b=this;return 0<$.grep(this.options.builderController.reportDefnModel.templateUnits,function(c){return c.name===a&&c.oid!==b.tu.oid}).length},sameReusableColumnNameExists:function(a){var b=this;return 0<$.grep(this.options.app.dwRepository.reusableColumns,function(c){return c.name===a&&c.oid!==b.tu.oid}).length},sameMetricNameExists:function(a){var b=this,c=this.options.app.dwRepository.getAllMetrics();return 0<$.grep(c,
function(c){return b.tu.formula?c.name===a&&c.oid!==b.tu.oid:c.name===a}).length},open:function(){this.tu.name!==this.options.conditionalMetric.name&&(this.nameUpdatedManualy=!0,this.element.find(".onlywhen-column-name").val(this.tu.name),this.element.find(".onlywhen-column-name").attr("title",this.tu.name));this.openDialog()},enableDissableOKButton:function(){0<this.options.conditionalMetric.filters.length?this.enableButton("OK"):this.disableButton("OK")},loadForm:function(){this.element.html("");
this.element.append(can.view("templates/onlywhen-column-dialog.ejs",{}));this.element.find(".restore-default-name").button();this.$attributeElements=this.element.find(".onlywhen-column-filter");this.tu.id&&(this.element.find(".chk-reusable-onlywhen-item").prop("checked",!0),this.options.addToreport||this.element.find(".chk-reusable-onlywhen-item").prop("disabled",!0))},selectFilterElements:function(){for(var a=this.options.conditionalMetric.filters,b=0;b<a.length;b++)this.selectFilterElement(a[b].hid)},
removeSelectionfromControls:function(){for(var a=this.options.conditionalMetric.filters,b=0;b<a.length;b++)this.removeSelectionfromControl(a[b].hid)},removeSelectionfromControl:function(a){var b=$.merge($('.object-selector[hid="'+a+'"]',".onlywhen-column-filter"),$('.tree-node-selector[hid="'+a+'"]',".onlywhen-column-filter")),b=$.merge(b,$('.element-filter-listbox-onlywhen option[hid="'+a+'"]',".onlywhen-column-filter"));$(b).is('input[type="checkbox"]')?(b.removeClass("object-selected"),$(b).is(":checked")&&
(b=$('.object-selector[hid="'+a+'"]',".onlywhen-column-filter"),$(b).prop("checked",!1))):$(b).is("option")?(b=$(b).parent("select"),$.each(b.find(":selected"),function(b,d){$(d).attr("hid")===a&&($(d).removeAttr("selected"),$(d).removeClass("object-selected"))})):$(b).is("a")&&(b.removeClass("object-selected"),b.removeClass("tree-node-selected"))},setColumnName:function(){this.nameUpdatedManualy||(this.element.find(".onlywhen-column-name").val(this.options.conditionalMetric.name),this.element.find(".onlywhen-column-name").attr("title",
this.options.conditionalMetric.name))},".onlywhen-column-name keyup":function(){this.nameUpdatedManualy=!0},selectFilterElement:function(a){var b=$.merge($('.object-selector[hid="'+a+'"]',".onlywhen-column-filter"),$('.tree-node-selector[hid="'+a+'"]',".onlywhen-column-filter")),b=$.merge(b,$('.element-filter-listbox-onlywhen option[hid="'+a+'"]',".onlywhen-column-filter"));b.addClass("object-selected");a=$('.object-selector[hid="'+a+'"]',".onlywhen-column-filter");$(a).prop("checked",!0);b.is("option")&&
b.attr("selected","selected");$(b).is("a")&&b.addClass("tree-node-selected")},buildElementsUI:function(){var a=this,b=!0;this.$attributeElements.html("");for(var c=0,d=this.options.app.dwRepository.dimensionNames.length;c<d;c++){var e=this.options.app.dwRepository.dimensionNames[c],h=this.options.app.dwRepository.dimensions[e];if(h)for(var g=0,f=(h.attributes||[]).length;g<f;g++){var i=h.attributes[g];if(i.formMap[i.defaultFormId].elements||"Calendar"===i.filterControl){var j=i.name.replace(/[^a-z0-9\s]/gi,
"").replace(/[_\s]/g,"-"),k=e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"),l="filter-"+k+j;this.$attributeElements.append('<div class="'+l+'"></div>');l=this.element.find("."+l);l=l.sentrana_only_when_collapsible_container({title:i.name+" ("+i.dimName+")",showHeader:!0,showBorder:!0,allowCollapsible:!0,initialCollapsed:!b,callBackFunctionOnExpand:function(b,c){return function(){a.options.app.handleUserInteraction();$.trim(c.find(".onlywhen-element-filter").html()).length||(a.initFilterControl(b),
a.selectFilterElements())}}(i,l),callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();$(l).append(can.view("templates/elementHeaderOnlyWhen.ejs",{attr:i,group:k+j+"-onlywhen",tag:"onlywhen"}));if(b||"Calendar"===i.filterControl)this.initFilterControl(i),b=!1,setTimeout(function(){a.selectFiltersOfFirstBox()},500)}}}},selectFiltersOfFirstBox:function(){for(var a=this.getFilterElementsId(),b=0;b<a.length;b++)this.selectFilterElement(a[b].hid)},
getFilterElementsId:function(){for(var a=this.options.conditionalMetric.filters.attr(),b=[],c=0;c<a.length;c++)b.push(a[c].hid);return a},getFiltes:function(){return this.options.conditionalMetric.filters.attr()},initFilterControl:function(a){var b=this.getFilterElementsId(),c={dwRepository:this.options.app.dwRepository,dwSelection:[],attr:a,form:null,filterentHids:b,filters:this.getFiltes()};$.each(a.forms,function(b,e){if(e.dataFilterOperator)switch(e.dataFilterOperator.toUpperCase()){case "IN":e.elements=
$.grep(e.elements,function(a){return!0===a.isFilteredByDataFilter});break;case "NOT IN":e.elements=$.grep(e.elements,function(a){return!1===a.isFilteredByDataFilter})}c.form=e;c.tag="onlywhen";("Button"===a.filterControl||!a.filterControl)&&$(".onlywhen-elements-"+a.oid+"-"+e.oid+"-onlywhen",this.element).sentrana_filter_control_checkbox_only_when(c);"Tree"===a.filterControl&&$(".onlywhen-elements-"+a.oid+"-"+e.oid+"-onlywhen",this.element).sentrana_filter_control_tree_only_when(c);"ListBox"===a.filterControl&&
$(".onlywhen-elements-"+a.oid+"-"+e.oid+"-onlywhen",this.element).sentrana_filter_control_list_box_only_when(c)});$("input[placeholder]").inputHints()},".restore-default-name click":function(){this.nameUpdatedManualy=!1;this.setColumnName()},'.formsRadio input[type="radio"] click':function(a){var b=a.attr("attrOID"),c=a.attr("tag"),a=a.val();this.element.find(".onlywhen-formElements-"+b).hide();this.element.find(".onlywhen-elements-"+b+"-"+a+"-"+c).show()},".fu-close-container click":function(a){var a=
$(a).parent().parent().attr("hid"),b=this.options.conditionalMetric.getIndexOfFilter(this.options.app.dwRepository.objectMap[a]);-1<=b&&(this.options.conditionalMetric.filters.splice(b,1),this.removeSelectionfromControl(a))}," onlywhen-filter-selected":function(a,b,c){if(c.isListbox){can.Observe.startBatch();a=this.options.app.dwRepository.objectMap[$(c.options[0]).attr("hid")];this.removeOtherValueOfThisAttribute(a.attrHID);this.removeSelectionfromControls();for(b=0;b<c.options.length;b++)a=this.options.app.dwRepository.objectMap[$(c.options[b]).attr("hid")],
this.options.conditionalMetric.filters.push(a);can.Observe.stopBatch()}else this.removeSelectionfromControls(),this.addRemoveFilter(c)},removeOtherValueOfThisAttribute:function(a){for(var a=this.getFiltersByAttr(a),b=0;b<a.length;b++){var c=this.options.conditionalMetric.getIndexOfFilter(a[b]);-1<c&&this.options.conditionalMetric.filters.splice(c,1)}},getFiltersByAttr:function(a){return $.grep(this.options.conditionalMetric.filters,function(b){return b.attrHID===a})},addRemoveFilter:function(a){var a=
this.options.app.dwRepository.objectMap[$(a).attr("hid")],b=this.options.conditionalMetric.getIndexOfFilter(a);0>b?this.options.conditionalMetric.filters.push(a):this.options.conditionalMetric.filters.splice(b,1)},updateSlectionAndName:function(){this.tu&&(this.selectFilterElements(),this.options.conditionalMetric.attr("name",this.options.conditionalMetric.getMetricNameWithAggType(this.tu)),this.enableDissableOKButton(),this.updateFilterWindow())},updateFilterWindow:function(){var a=this,b=this.element.find(".conditionalmetric-filter-container");
b.html("");$.each(this.options.conditionalMetric.getFiltersGroupBy(),function(c,d){var e=a.options.app.dwRepository.objectMap[c];b.append(can.view("templates/onlywhen-column-filters.ejs",{attr:e.name+" ("+e.dimName+")",filters:d}))})},"{conditionalMetric} change":function(a,b,c){switch(c){case "isReusable":break;case "name":this.setColumnName();break;default:this.updateSlectionAndName()}},handleCANCEL:function(){this.closeDialog()},handleOK:function(){if(!(0>=this.options.conditionalMetric.filters.length)){var a=
this.element.find(".onlywhen-column-name").val();if(this.isValidName()){var b=this.element.find(".chk-reusable-onlywhen-item").is(":checked"),c=this.options.app.dwRepository.createFilteredMetric(this.tu,this.options.conditionalMetric.filters,a);c.nameUpdatedManualy=this.nameUpdatedManualy;c.formula=c.oid;this.tu.id&&!b&&(c.hid=this.options.app.dwRepository.getHID(c));this.options.app.dwRepository.objectMap[c.hid]=c;var d={name:a,dataSource:this.options.app.dwRepository.id,formula:this.getFormula(c),
outputType:c.dataType,precision:2,id:this.tu.id};if(b){this.updateStatus(!0,"Saving conditional metrics...");var e=this;(new Sentrana.Models.ReusableColumnInfo({id:d.id,name:d.name,dataSource:d.dataSource,formula:d.formula,outputType:d.outputType,precision:d.precision,formulaType:"CM"})).save().done(function(a){d=a;e.addToRepotDefinition(d,!0)}).fail(function(a){var b=a.getResponseHeader("ErrorCode"),a=a.getResponseHeader("ErrorMsg");b===Sentrana.Enums.ErrorCode.DERIVED_COLUMN_NAME_IN_USE?e.updateStatus(!1,
a,"fail"):e.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.save_operation.failed),"fail")})}else this.addToRepotDefinition(c)}}},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/OnlyWhenColumnDialog.js");
Sentrana.Controllers.SideBarCollapsibleContainer("Sentrana.Controllers.OnlyWhenCollapsibleContainer",{pluginName:"sentrana_only_when_collapsible_container",defaults:{}},{".sideBarCollapsibleContainerTitle click":function(){this.showHideCollapsibleContent();return!1}});steal.executed("js/controllers/OnlyWhenCollapsibleContainer.js");
Sentrana.Controllers.FilterControl("Sentrana.Controllers.FilterControlCheckboxOnlyWhen",{pluginName:"sentrana_filter_control_checkbox_only_when",defaults:{}},{init:function(){this.$onlywhenfilterControl=this.element.find(".onlywhen-element-filter");this._super()},buildElementsUI:function(){this.renderFilterCheckBoxes($.extend([],this.options.form.elements))},searchElements:function(a){var b=$(a).val();$.extend([],this.options.form.elements);this.element.find(".object-selector-wrapper").children("label").each(function(){var a=
$(this);-1<a.text().toLowerCase().indexOf(b.toLowerCase())?a.parent().show():a.parent().hide()})},renderFilterCheckBoxes:function(a){var b=this;can.view("templates/filterCheckboxOnlyWhen.ejs",{objects:a,totoalCount:a.length,tag:this.options.tag},function(a){b.$onlywhenfilterControl.append(a)})},".object-selector change":function(a){this.element.trigger(this.options.tag+"-filter-selected",a)}});steal.executed("js/controllers/FilterControlCheckboxOnlyWhen.js");
Sentrana.Controllers.FilterControlTree("Sentrana.Controllers.FilterControlTreeOnlyWhen",{pluginName:"sentrana_filter_control_tree_only_when",defaults:{}},{init:function(){this.$onlywhenfilterControl=this.element.find(".onlywhen-element-filter");this._super()},buildElementsUI:function(){for(var a=this,b=[],c=this.options.form,d=0;d<c.elements.length;d++)b.push(a.genNodeHTML(!0,c.elements[d].oid,c.elements[d].name));this.$onlywhenfilterControl.jstree({plugins:"themes html_data ui crrm hotkeys search".split(" "),
themes:{theme:"apple",icons:!1},core:{themes:{icons:!1},data:function(c,d){"#"==c.id?d.call(this,b.join("\r\n")):"undefined"!=c.li_attr&&$.ajax({type:"POST",url:Sentrana.Controllers.BIQController.generateUrl("GetChildElements"),dataType:"json",contentType:"application/json",data:JSON.stringify({oid:c.li_attr.oid}),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:function(b){for(var f=[],i=0;i<b.length;i++)f.push(a.genNodeHTML(b[i].hasChildren,
b[i].oid,b[i].name));a.element.trigger("filter_rendered",a.options.attr.dimName);d.call(c.id,f.join("\r\n"))}})}}}).bind("loaded.jstree",function(){}).bind("search.jstree",function(){})},genNodeHTML:function(a,b,c){var d="",e=this.options.dwRepository.isTreeFilter(b);this.isSelected(e.oid)&&(d=" object-selected tree-node-selected");return'<li title="'+c+'" class="'+(a?"jstree-closed":"")+'" id="'+e.hid+'" + oid="'+b.replace('"',"&quot")+'"><a hid="'+e.hid+'" class="tree-node-selector'+d+'" href="#">'+
c+"</a></li>"},isSelected:function(a){var b=/^\(([^\+]+)(.*)\)(.+)$/,c=b.exec(a);c&&(a=c[3]);return 0<$.grep(this.options.filters,function(d){d=d.oid;(c=b.exec(d))&&(d=c[3]);return d===a}).length},searchElements:function(a,b){1!=$(a).val().length&&(13==b.keyCode?this.$onlywhenfilterControl.jstree("search",$(a).val(),!1):this.$onlywhenfilterControl.jstree("search",$(a).val(),!0))},addTreeFilter:function(a){var b=this.options.dwRepository.getObjectByOID($(a).parent().attr("oid"),!0);b&&(this.options.filters.push(b),
this.element.trigger(this.options.tag+"-filter-selected",a))},".tree-node-selector click":function(a){this.addTreeFilter(a)}});steal.executed("js/controllers/FilterControlTreeOnlyWhen.js");
Sentrana.Controllers.FilterControlListBox("Sentrana.Controllers.FilterControlListBoxOnlyWhen",{pluginName:"sentrana_filter_control_list_box_only_when",defaults:{listBoxWidth:150}},{init:function(){this.$onlywhenfilterControl=this.element.find(".onlywhen-element-filter");this._super()},buildElementsUI:function(){var a=this.options.form;this.$onlywhenfilterControl.append('<select class="element-filter-listbox-onlywhen form-control" size="10" multiple="multiple"></select>');this.$onlywhenfilterControl.append('<select class="element-filter-listbox-source-onlywhen" size="10" style="display: none" multiple="multiple"></select>');
for(var b=0;b<a.elements.length;b++)$(".element-filter-listbox-onlywhen",this.$onlywhenfilterControl).append(can.view("templates/filterListBoxOption.ejs",{name:a.elements[b].name,hid:a.elements[b].hid})),$(".element-filter-listbox-source-onlywhen",this.$onlywhenfilterControl).append(can.view("templates/filterListBoxOption.ejs",{name:a.elements[b].name,hid:a.elements[b].hid}));this.addEventHandler()},searchElements:function(a){var b=this,c=$(a).val();$(".element-filter-listbox-onlywhen",this.$onlywhenfilterControl).html("");
$.each($(".element-filter-listbox-source-onlywhen option",this.$onlywhenfilterControl),function(a,e){var h=$(e).text();(""===c||-1<h.toLowerCase().indexOf(c.toLowerCase()))&&$(".element-filter-listbox-onlywhen",b.$onlywhenfilterControl).append(can.view("templates/filterListBoxOption.ejs",{name:$(e).val(),hid:$(e).attr("hid")}))})},addFilter:function(){var a=[];$.each($(".element-filter-listbox-onlywhen option:selected",this.$onlywhenfilterControl),function(b,c){a.push(c)});this.element.trigger(this.options.tag+
"-filter-selected",{options:a,isListbox:!0})},addEventHandler:function(){var a=this;$(".element-filter-listbox-onlywhen",this.$onlywhenfilterControl).on("change",function(){a.addFilter()})}});steal.executed("js/controllers/FilterControlListBoxOnlyWhen.js");
Sentrana.Controllers.FilterControlCalendar("Sentrana.Controllers.FilterControlCalendarOnlyWhen",{pluginName:"sentrana_filter_control_calendar_only_when",defaults:{}},{init:function(){this.rangeIndex=0;this.dateFormat="mm/dd/yy";this.dateFormatCaptionText="mm/dd/yyyy";this._super();this.rangeList={};this.updateRangeMode=!1;this.element.find(".accordion-search").hide();this.$onlywhenfilterControl=this.element.find(".onlywhen-element-filter")},buildElementsUI:function(){this.$onlywhenfilterControl.append(can.view("templates/filterCalendarContainer.ejs",
{dateFormat:this.dateFormatCaptionText,hid:this.options.form.hid}));$(".date-range-list",this.$onlywhenfilterControl).append(can.view("templates/filterCalendar.ejs",{index:this.rangeIndex}));this.$onlywhenfilterControl.append('<a href="#" class="calendar-add-additional-range">Add additional date range</a>');this.initCalendarControl();this.showHideDateFormatCaption()},showHideDateFormatCaption:function(){0<$(".date-range-list",this.$onlywhenfilterControl).children(".filterCalendarContainer").length?
this.$onlywhenfilterControl.children(".dateformat").css("display","block"):this.$onlywhenfilterControl.children(".dateformat").css("display","none")},".element-filter-calendar-from change":function(a){var b=a[0].value,c=!0;try{$.datepicker.parseDate(this.dateFormat,b)?this.handleFromDateChange(b,a[0]):c=!1}catch(d){c=!1}c||(a[0].value="",this.removeRangeFilter(a[0]))},".element-filter-calendar-to change":function(a){var b=a[0].value,c=!0;try{$.datepicker.parseDate(this.dateFormat,b)?this.handleToDateChange(b,
a[0]):c=!1}catch(d){c=!1}c||(a[0].value="",this.removeRangeFilter(a[0]))},".hasDatepicker keypress":function(a){if(13===event.keyCode)return $(a,this.$onlywhenfilterControl).datepicker().focus(),this.toggleDatePickerVisibility(a),!1;$(a,this.$onlywhenfilterControl).datepicker("show");return!0},toggleDatePickerVisibility:function(a){$(a,this.$onlywhenfilterControl).datepicker("widget").is(":visible")?$(a,this.$onlywhenfilterControl).datepicker("hide"):$(a,this.$onlywhenfilterControl).datepicker("show")},
initCalendarControl:function(){var a=this;$(".element-filter-calendar-from",this.$onlywhenfilterControl).datepicker({changeMonth:!0,changeYear:!0,yearRange:"c-20:c+20",onSelect:function(b){a.handleFromDateChange(b,this);$(this,this.$onlywhenfilterControl).datepicker("hide")},beforeShow:function(){$("#ui-datepicker-div").hover(function(){a.showDockablePanel()})}});$(".element-filter-calendar-to",this.$onlywhenfilterControl).datepicker({changeMonth:!0,changeYear:!0,yearRange:"c-20:c+20",onSelect:function(b){a.handleToDateChange(b,
this);$(this,this.$onlywhenfilterControl).datepicker("hide")},beforeShow:function(){$("#ui-datepicker-div").hover(function(){a.showDockablePanel()})}})},showDockablePanel:function(){$(".dockablePanel-right").is(":visible")||$(".dockablePanel-right").show(400)},removeRangeFilter:function(a){this.options.dwSelection.deselectObject(this.rangeList[$(a).attr("index")]);this.showHideDateFormatCaption()},handleToDateChange:function(a,b){var c=$(b).attr("index"),d=this.generateValidFromDate(a,c);d&&this.createOrUpdateFilter(c,
d,a);$(b)[0].value=a;$(".element-filter-calendar-from[index="+c+"]",this.$onlywhenfilterControl).datepicker("option","maxDate",a);$(".element-filter-calendar-from[index="+c+"]",this.$onlywhenfilterControl).datepicker("setDate",d)},handleFromDateChange:function(a,b){var c=$(b).attr("index"),d=this.generateValidToDate(a,c),e=this.options.dwRepository.objectMap[this.rangeList[c]];d&&e?this.updateFilter(c,a,d):d&&this.createOrUpdateFilter(c,a,d);$(b)[0].value=a;$(".element-filter-calendar-to[index="+
c+"]",this.$onlywhenfilterControl).datepicker("option","minDate",a);$(".element-filter-calendar-to[index="+c+"]",this.$onlywhenfilterControl).datepicker("setDate",d)},generateValidFromDate:function(a,b){var c=$.datepicker.formatDate(this.dateFormat,$(".element-filter-calendar-from[index="+b+"]",this.$onlywhenfilterControl).datepicker("getDate"));c&&new Date(a)<new Date(c)&&(c=a);return c},generateValidToDate:function(a,b){var c=$.datepicker.formatDate(this.dateFormat,$(".element-filter-calendar-to[index="+
b+"]",this.$onlywhenfilterControl).datepicker("getDate"));c&&new Date(c)<new Date(a)&&(c=a);return c},createOrUpdateFilter:function(a,b,c){var d=this.getOid(b,c),d=this.getHid(a,d),e=this.options.dwRepository.createRangeFilter(this.options.attr.hid,this.options.attr.dimName,this.options.form.oid,d,a,b,c);this.rangeList[a]?this.updateFilter(a,b,c):(this.rangeList[a]=d,this.options.dwRepository.objectMap[e.hid]=e,this.options.dwSelection.selectObject(e.hid))},getCalendarTextDate:function(a){return $.datepicker.formatDate(this.dateFormat,
a.datepicker("getDate"))},updateFilter:function(a,b,c){this.updateRangeMode=!0;var d=this.options.dwRepository.objectMap[this.rangeList[a]];this.options.dwSelection.deselectObject(this.rangeList[a]);this.updateRangeMode=!1;var e=this.getOid(b,c),h=this.getHid(a,e);this.options.dwRepository.objectMap[h]=d;this.options.dwRepository.objectMap[h].name=b+" - "+c;this.options.dwRepository.objectMap[h].oid=e;this.rangeList[a]=h;this.options.dwSelection.selectObject(h)},getOid:function(a,b){return this.options.form.oid+
":"+a+"--"+b},getHid:function(a,b){return"hid_"+a+"_"+b.replace(/[^a-zA-Z0-9]/g,"")},".calendar-add-additional-range click":function(){this.rangeIndex++;$(".date-range-list",this.$onlywhenfilterControl).append(can.view("templates/filterCalendar.ejs",{index:this.rangeIndex}));this.initCalendarControl();this.showHideDateFormatCaption()},".remove-range click":function(a){var b=$(".element-filter-calendar-from",$(a).parents().parents().parents().eq(0)),a=$(".element-filter-calendar-to",$(a).parents().parents().eq(0)),
a=this.getOid(this.getCalendarTextDate(b),this.getCalendarTextDate(a));this.options.dwSelection.deselectObject(this.getHid(b.attr("index"),a));this.showHideDateFormatCaption()},"{dwSelection} change":function(a,b,c,d){if(b=/^(.*)_(\d*)_([a-zA-z]*)(\d*)$/.exec(c)){a=parseInt(b[2],10);if(b[3]!=this.options.form.oid)return;if("add"===d){if(!this.rangeList[a]){d=/(\w*)\:(.{10})\-\-(.{10})$/;b=this.options.dwRepository.objectMap[c].oid;c=d.exec(b)[2];d=d.exec(b)[3];$(".date-range-list",this.$onlywhenfilterControl).append(can.view("templates/filterCalendar.ejs",
{index:a}));this.initCalendarControl();var b=$(".element-filter-calendar-from[index="+a+"]","."+this.options.form.hid),e=$(".element-filter-calendar-to[index="+a+"]","."+this.options.form.hid);b.datepicker("setDate",c);e.datepicker("setDate",d);this.createOrUpdateFilter(a,c,d);this.rangeIndex=a+1}}else if("remove"===d){if(this.updateRangeMode)return;$(".element-filter-calendar-from[index="+a+"]","."+this.options.form.hid).parents().parents().eq(0).remove()}}this.showHideDateFormatCaption()}});steal.executed("js/controllers/FilterControlCalendarOnlyWhen.js");
can.Observe.extend("Sentrana.Models.ConditionalMetric",{},{init:function(a,b,c){this.dwRepository=c;this.setup({filters:[],name:"",isReusable:!1});a&&this.initializeProperties(a,b)},initializeProperties:function(a,b){if(b)for(var c=0;c<b.length;c++)this.filters.push(b[c]);this.attr("name",this.getMetricNameWithAggType(a))},getIndexOfFilter:function(a){for(var b=0;b<this.filters.length;b++)if(this.filters[b].hid===a.hid)return b;return-1},getMetricNameWithAggType:function(a){return this.dwRepository.getMetricNameWithAggType(a,
this.getFiltersGroupBy())},getMetricFormula:function(a){return"if("+this.dwRepository.creatFilterMetricFormula(this.getFiltersGroupBy())+","+a.originalOid+")"},getFiltersGroupBy:function(){var a={},b;$.each(this.filters,function(c,d){b=d.attrHID;a[b]||(a[b]=[]);a[b].push(d)});return a}});steal.executed("js/observes/ConditionalMetricObserve.js");
can.Construct("Sentrana.Models.ReportGridUtil",{},{init:function(a,b){this.executionMonitorModel=b;this.app=a},renderGridUtilIcons:function(a,b,c,d){c.find(".dataTables_scrollHead .dataTable thead th").append(can.view("templates/grid-column-util.ejs",{})).children(".grid-column-util").click(function(){a.handleUserInteraction();var c=$(this),h=c.attr("oid"),g=d.getCurrentColumnIndex(h),f=d.getUniqueItemsFromColumn(g),i=d.getUniqueItemsFromColumnAll(g),j=b.element.find(".column-util-element");j.css({position:"absolute",
top:c.offset().top+12+"px",left:c.offset().left+8+"px"}).show();(c=j.control())&&!c._destroyed&&c.destroy();j.sentrana_report_grid_util({items:i,columnIndex:g,oid:h,filteredItems:f,resultDataModel:d});return!1})},removeGridUtilIcons:function(a){a.find(".dataTables_scrollHead .dataTable thead th").find(".grid-column-util").remove();a.find(".dataTables_scrollHead .dataTable thead th").find(".clear").remove()}});steal.executed("js/constructs/ReportGridUtil.js");
can.Control.extend("Sentrana.Controllers.ReportGridUtil",{pluginName:"sentrana_report_grid_util",defaults:{app:null}},{init:function(){this.initialize();this.updateView()},initialize:function(){this.columnIndex=this.options.columnIndex;this.currentSelection=[]},updateView:function(){var a=this.getColumn();this.element.html(can.view("templates/report-grid-util.ejs",{items:this.options.items,pos:a.sortPos}));this.$chekboxList=this.element.find(".filter-items");var b=this.element.find(".grid-util-container").css("width"),
b=1*b.substring(0,b.length-2),c=this.options.panelBody;$(this.element).css({left:$(this.element).offset().left-b-c.left});this.options.items?(this.updateCheckListView(this.options.items),this.uncheckFilterData()):(this.element.find(".column-search-container").hide(),this.$chekboxList.html('<span class="too-many-value">'+Sentrana.getMessageText(window.app_resources.app_msg.column_filter.too_many_unique_column)+"<span>"));a.colType!==Sentrana.ColType.METRIC&&(this.element.find(".column-util-hide-button").hide(),
this.element.find(".column-sorting-container").addClass("no-top-border"));this.sortPos=1*a.sortPos;this.checkSelectedOrder(a)},checkSelectedOrder:function(a){"A"===a.sortOrder?this.element.find('.ord-column-sort-order[value="A"]').prop("checked",!0):this.element.find('.ord-column-sort-order[value="D"]').prop("checked",!0)},getColumn:function(){var a=this.options;return $.grep(a.resultDataModel.manipulatedData.colInfos,function(b){return b.oid===a.oid})[0]},".decrease-value click":function(){this.updateSortPos(!1)},
".increase-value click":function(){this.updateSortPos(!0)},updateSortPos:function(a){var b=1*this.element.find(".column-sorting-container .decimal-place-num").text();if(a){if(b===this.options.resultDataModel.manipulatedData.colInfos.length)return!1;a=b+1}else{if(1===b)return!1;a=b-1}this.sortPos=a;this.element.find(".column-sorting-container .decimal-place-num").html(this.sortPos);return!0},uncheckFilterData:function(){for(var a=0;a<this.options.items.length;a++)this.isFiltered(this.options.items[a].value)&&
$('.checkboxItem[value="'+this.options.items[a].value+'"]',this.element).prop("checked",!1);this.element.find(".checkboxItem:checked").length===this.options.items.length?this.$chekboxAll.prop("checked",!0):this.$chekboxAll.prop("checked",!1)},isFiltered:function(a){for(var b=0;b<this.options.filteredItems.length;b++)if(this.options.filteredItems[b].value===a)return!1;return!0},updateCheckListView:function(a){this.$chekboxList.html(can.view("templates/columnBaseFilterCheckList.ejs",{items:a}));this.$chekboxAll=
this.element.find(".checkboxAll");0<this.currentSelection.length?this.updateChekboxSelection(this.currentSelection.split("|")):(this.element.find(".checkboxItem").prop("checked",!0),this.$chekboxAll.prop("checked",!0))},updateChekboxSelection:function(a){for(var b=0;b<a.length;b++)this.element.find('.checkboxItem[value="'+a[b]+'"]').prop("checked",!0);for(b=0;b<this.currentSelection.length;b++)this.element.find('.checkboxItem[value="'+this.currentSelection[b]+'"]').prop("checked",!0);this.element.find(".checkboxItem:checked").length===
this.options.items.length&&this.$chekboxAll.prop("checked",!0)},".accordion-search-input keyup":function(a){this.currentSelection=[];this.searchColumnValue(a)},searchColumnValue:function(a){var b=$(a).val(),a=$.grep(this.options.items,function(a){return-1<a.value.toLowerCase().indexOf(b.toLowerCase())});0<a.length?(this.updateCheckListView(a),0===b.length&&this.uncheckFilterData()):this.$chekboxList.html('<span class="too-many-value">'+Sentrana.getMessageText(window.app_resources.app_msg.column_filter.no_result)+
"<span>");this.enableDisableOkButton()},".checkbox-label click":function(a){a=a.parent().find("input:checkbox");a.prop("checked")?a.prop("checked",!1):a.prop("checked",!0);a.hasClass("checkboxAll")&&$(".checkboxAll").change();this.updateStatusofAll();this.enableDisableOkButton(a)},".checkboxAll change":function(){var a=this.$chekboxAll.is(":checked"),b=this.element.find(".checkboxItem");a?b.prop("checked",!0):b.prop("checked",!1);this.enableDisableOkButton()},".checkboxItem change":function(){this.updateStatusofAll();
this.enableDisableOkButton()},updateStatusofAll:function(){this.currentSelection=[];var a=this.element.find(".checkboxItem:checked");a.length===this.options.items.length?this.$chekboxAll.prop("checked",!0):this.$chekboxAll.prop("checked",!1);if(0===$(".accordion-search-input").val().length)for(var b=0;b<a.length;b++)this.currentSelection.push($(a[b]).val())},enableDisableOkButton:function(){var a=this.element.find(".checkboxItem:checked"),b=this.element.find(".filter-submit-button-ok");0<a.length?
(b.removeAttr("disabled"),b.removeClass("ui-state-disabled")):(b.attr("disabled","disabled"),b.addClass("ui-state-disabled"))},".filter-submit-button-ok click":function(a){$(a).hasClass("ui-state-disabled")||(this.hideThisController(),this.element.trigger("grid_column_property_updated",this.getParams()))},".column-util-hide-button click":function(){this.hideThisController();this.element.trigger("hide_grid_column",this.getColumn().title)},getParams:function(){var a=this.getFilterParam(),b=this.getSortParam();
return{filterParam:a,sortParam:b}},getFilterParam:function(){if(this.options.items){for(var a=$(".checkboxItem:checked",this.element),b=[],c=[],d=0;d<a.length;d++){var e=$(a[d]).val(),h=$(a[d]).attr("key");b.push(e);c.push(h)}d={};a=a.length===this.options.items.length;d.values=b.join("|");d.keys=c.join("|");return{columnIndex:this.columnIndex,columnName:this.getColumn().title,selectedItems:d,isAllSelected:a}}return!1},getSortParam:function(){var a=this.getColumn(),b=1*a.sortPos,c=this.element.find(".ord-column-sort-order:checked").val();
return b!==this.sortPos||a.sortOrder!==c?(this.options.resultDataModel.swapSortPosition(this.options.columnIndex,this.sortPos,c),{orders:this.getSortOrders()}):!1},getSortOrders:function(){for(var a=$.extend([],this.options.resultDataModel.manipulatedData.colInfos),b=[],c=0;c<a.length;c++)a[c].index=c;a.sort(function(a,b){return a.sortPos-b.sortPos});for(c=0;c<a.length;c++)b.push([a[c].index,"A"===a[c].sortOrder?"asc":"desc"]);return b},".filter-submit-button-cancel click":function(){this.hideThisController()},
"{document} click":function(a,b){this.element.has(b.target).length||this.element.hide()},hideThisController:function(){this.element.hide()}});steal.executed("js/controllers/ReportGridUtilController.js");
can.Observe.extend("Sentrana.Models.ResultDataModel",{},{init:function(a){this.setup({dataChangeStatus:null});this.app=a.app;this.originalData=$.extend(!0,{},a.originalData);this.manipulatedData=$.extend(!0,{},a.originalData);this.filters=[];this.hiddenColumns=[];this.initRangeFilterModels();this.searchText="";this.dataChanged=!1;this.transformedData=void 0},updateData:function(a,b,c){this.originalData=$.extend(!0,{},a);this.manipulatedData=$.extend(!0,{},a);this.transformedData=this.getData();this.filters=
c?c.filters:[];this.hiddenColumns=c?c.hiddenColumns:[];this.initRangeFilterModels();b&&(this.dataChanged=!0,this.updateSavedFilters(b),this.sortDataByMultipleColumn())},updateSavedFilters:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=this.getColumn(c.columnId);if(d){var e=this.getColumnIndex(d.oid);d.sortOrder=c.sortOrder;d.sortPos=c.sortPosition;if(c.isFiltered){var h={};if(d.colType===Sentrana.ColType.METRIC)var h=c.selectedKeys.split("|"),g=this.getBoundsForSlider(e),h={filterType:Sentrana.Enums.FILTER_TYPE_RANGE,
columnName:d.title,lowerBound:1*g.minValue,upperBound:1*g.maxValue,min:1*h[0],max:1*h[1],formattedMin:this.dotNetFormatter(h[0],d.formatString),formattedMax:this.dotNetFormatter(h[1],d.formatString),formatString:d.formatString,dataType:d.dataType};else h={columnIndex:c.columnPosition,columnName:d.title,filterType:Sentrana.Enums.FILTER_TYPE_COLUMN,isAllSelected:!c.isFiltered,selectedItems:{values:c.selectedKeys,keys:c.selectedKeys}};this.addFilter(h)}c.isHidden&&this.hideColumn(d.title);-1<e&&c.columnPosition!==
e&&this.reorderColumnPos(e,c.columnPosition)}}},dotNetFormatter:function(a,b){var c=b;if(-1<b.indexOf("N")||-1<b.indexOf("C")){-1<b.indexOf("N")&&(c="#,#");-1<b.indexOf("C")&&(c="$#,#");var d=parseInt(b.substr(1,b.length-1),10);if(0===d)a=Math.round(a);else for(var e=0;e<d;e++)0===e&&(c+="."),c+="0"}return String.format("{0:"+c+"}",a)},cloneThis:function(){var a=new Sentrana.Models.ResultDataModel({app:this.app});a.originalData=$.extend({},this.originalData);a.manipulatedData=$.extend({},this.manipulatedData);
a.filters=$.extend([],this.filters);a.hiddenColumns=$.extend([],this.hiddenColumns);a.searchText=this.searchText;return a},updateWithExternalData:function(a){this.dataChanged=!0;this.originalData=$.extend(!0,{},a.originalData);this.manipulatedData=$.extend(!0,{},a.manipulatedData);this.filters=$.extend(!0,[],a.filters);this.hiddenColumns=$.extend(!0,[],a.hiddenColumns);this.searchText=a.searchText},resetSortOptions:function(){for(var a=this.manipulatedData.colInfos,b=this.originalData.colInfos,c=
0;c<a.length;c++){var d=this.getOriginalColumnIndex(a[c].oid);a[c].sortOrder=b[d].sortOrder;a[c].sortPos=b[d].sortPos}},getSelectedKeys:function(a){a=this.getFilterByColumn(a);return a.isMetrics?a.min+"|"+a.max:a.selectedItems.keys},getResultOptions:function(){for(var a=this.manipulatedData.colInfos,b=[],c=0;c<a.length;c++){var d={};d.columnId=a[c].oid;d.isFiltered=this.isColumnFiltered(a[c].title);d.selectedKeys=d.isFiltered?this.getSelectedKeys(a[c].title):"";d.sortOrder=a[c].sortOrder;d.sortPosition=
a[c].sortPos;d.columnPosition=c;d.isHidden=this.isColumnHidden(a[c].title);b.push(d)}return b},initRangeFilterModels:function(){var a=this;if(this.manipulatedData){var b=[],c=this.manipulatedData.colInfos,d=[],e=this.manipulatedData;if(c){for(var h=0;h<c.length;h++){var g={};g.index=h;g.name=c[h].title;g.dataType=c[h].dataType;g.formatString=c[h].formatString;g.width=c[h].width;g.colType=c[h].colType;c[h].colType===Sentrana.ColType.METRIC&&(b.push(g),d.push({min:e.rows[0].cells[h].rawValue,max:e.rows[0].cells[h].rawValue}))}for(c=
0;c<e.rows.length;c++)for(g=h=0;g<e.rows[c].cells.length;g++)if(this.isMetricColumn(g)){var f=e.rows[c].cells[g].rawValue;f>d[h].max&&(d[h].max=f);f<d[h].min&&(d[h].min=f);h++}this.rangeFilterModels=[];$.each(b,function(b,c){var e={name:c.name,formatString:c.formatString,min:d[b].min,max:d[b].max,dataType:c.dataType,index:c.index},f=new Sentrana.Models.RangeFilter({app:a.app,columnDetail:e});e.min!==e.max&&a.rangeFilterModels.push(f)})}}},isMetricColumn:function(a){return this.manipulatedData.colInfos[a].colType===
Sentrana.ColType.METRIC},isColumnHidden:function(a){for(var b=this.hiddenColumns,c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},isColumnFiltered:function(a){for(var b=0;b<this.filters.length;b++)if(this.filters[b].columnName===a)return!0;return!1},swapSortPosition:function(a,b,c){var d=this.manipulatedData.colInfos[a].sortPos,e=this.getColumnIndexByName(this.getColumnBySortPos(b).title);this.updateColumnSortOrder(a,e,b,d,c)},updateColumnSortOrder:function(a,b,c,d,e){this.manipulatedData.colInfos[a].sortPos=
c;this.manipulatedData.colInfos[b].sortPos=d;this.manipulatedData.colInfos[a].sortOrder=e},updateColumnFilter:function(a,b,c){this.filters[a]={columnName:a,filterType:b,filters:c}},clearTransformation:function(){this.manipulatedData=$.extend(!0,{},this.originalData);this.filters=[];this.hiddenColumns=[];this.initRangeFilterModels();this.searchText="";this.dataChanged=!1},getColumnIndexByName:function(a){for(var b=this.manipulatedData.colInfos,c=0;c<b.length;c++)if(b[c].title===a)return c;return-1},
getCurrentColumnIndex:function(a,b){for(var c=this.getData(void 0,b).colInfos,d=0;d<c.length;d++)if(c[d].oid===a)return d;return-1},getColumnIndex:function(a){for(var b=this.manipulatedData.colInfos,c=0;c<b.length;c++)if(b[c].oid===a)return c;return-1},getOriginalColumnIndex:function(a){for(var b=this.originalData.colInfos,c=0;c<b.length;c++)if(b[c].oid===a)return c;return-1},getColumnBySortPos:function(a){return $.grep(this.manipulatedData.colInfos,function(b){return b.sortPos===a})[0]},getColumn:function(a){return $.grep(this.manipulatedData.colInfos,
function(b){return b.oid===a})[0]},getFilterByColumn:function(a){return $.grep(this.filters,function(b){return b.columnName===a})[0]},getData:function(a,b){if(this.manipulatedData){if((!this.filters||0===this.filters.length)&&0===this.searchText.length&&0===this.hiddenColumns.length)return this.manipulatedData;var c=$.extend(!0,{},this.manipulatedData);0<this.searchText.length&&(c=this.getSearchedData(c));for(var d=0;d<this.filters.length;d++){var e=this.filters[d];a&&a===e.columnName||(e.filterType===
Sentrana.Enums.FILTER_TYPE_COLUMN?c=this.getColumnFilteredData(c,e):e.filterType===Sentrana.Enums.FILTER_TYPE_RANGE&&(c=this.getRangeFilteredData(c,e)))}b||0<this.hiddenColumns.length&&(c=this.getDataAfterColumnHide(c));return c}return null},getSortOrders:function(){for(var a=$.extend([],this.manipulatedData.colInfos),b=[],c=0;c<a.length;c++)a[c].index=c;a.sort(function(a,b){return a.sortPos-b.sortPos});for(c=0;c<a.length;c++)b.push([a[c].index,"A"===a[c].sortOrder?"asc":"desc"]);return b},sortDataByMultipleColumn:function(a){a||
(a=this.getSortOrders());for(var b=a.length-1;0<=b;b--)this.sortData(a[b][0],a[b][1])},sortData:function(a,b){this.manipulatedData.rows.sort(function(c,d){return"a"===b.toLowerCase()||"asc"===b.toLowerCase()?c.cells[a].rawValue<d.cells[a].rawValue?-1:c.cells[a].rawValue>d.cells[a].rawValue?1:0:d.cells[a].rawValue<c.cells[a].rawValue?-1:d.cells[a].rawValue>c.cells[a].rawValue?1:0})},updateSearchText:function(a){this.searchText=$.trim(a)},getSearchedData:function(a){var b=this.searchText,a=$.extend(!0,
{},a),c=$.grep(this.manipulatedData.rows,function(a){for(var c=!1,h=0;h<a.cells.length;h++)-1<a.cells[h].fmtValue.toLowerCase().indexOf(b.toLowerCase())&&(c=!0);return c});a.rows=c;return a},getColumnFilteredData:function(a,b){if(!a||!b)return a;for(var c=b.selectedItems.keys.split("|"),d=[],e=0;e<a.rows.length;e++){var h=this.getColumnIndexByName(b.columnName);-1<h&&-1<$.inArray(a.rows[e].cells[h].rawValue.toString(),c)&&d.push(a.rows[e])}c=$.extend(!0,{},a);c.rows=d;return c},getRangeFilteredData:function(a,
b){if(!a||!b)return a;for(var c=[],d=0;d<a.rows.length;d++){var e=this.getColumnIndexByName(b.columnName);if(-1<e){var h=a.rows[d].cells[e].rawValue,e=this.getPrecision(a.colInfos[e]);h&&(h=1*h.toFixed(e));h>=1*b.min&&h<=1*b.max&&c.push(a.rows[d])}}d=$.extend(!0,{},a);d.rows=c;return d},getPrecision:function(a){if(a.dataType===Sentrana.DataType.PERCENTAGE)return 6;a.formatString||(a.formatString="");return 1*a.formatString.replace(/^\D+/g,"")},getDataAfterColumnHide:function(a){if(!a)return a;for(var a=
$.extend(!0,{},a),b=0;b<this.hiddenColumns.length;b++){for(var c=-1,d=0;d<a.colInfos.length;d++)if(a.colInfos[d].title===this.hiddenColumns[b]){a.colInfos.splice(d,1);c=d;break}for(d=0;d<a.rows.length;d++)a.rows[d].cells.splice(c,1)}return a},getFilters:function(){return this.filters},getHiddenColumns:function(){return this.hiddenColumns},hideColumn:function(a){this.hiddenColumns.push(a)},showColumn:function(a){this.hiddenColumns.splice($.inArray(a,this.hiddenColumns),1)},addFilters:function(a){for(var b=
0;b<a.length;b++)this.addFilter(a[b])},addFilter:function(a){var b=$.grep(this.manipulatedData.colInfos,function(b){return b.title===a.columnName});if(0===b.length)return null;var c=b[0];a.isMetrics=c.colType===Sentrana.ColType.METRIC;a.columnName=c.title;a.columnIndex=this.getColumnIndexByName(c.title);for(var d=[],b=-1,e=0;e<this.filters.length;e++)d.push(this.filters[e]),this.filters[e].columnName===c.title&&(b=e);c=!1;if(a.filterType===Sentrana.Enums.FILTER_TYPE_RANGE){var h=this.getPrecision({formatString:a.formatString,
dataType:a.dataType}),d=1*a.min.toFixed(h),e=1*a.max.toFixed(h),g=1*a.lowerBound.toFixed(h),h=1*a.upperBound.toFixed(h);d===g&&e===h&&(c=!0)}else a.filterType===Sentrana.Enums.FILTER_TYPE_COLUMN&&(c=a.isAllSelected);-1<b&&this.filters.splice(b,1);c||this.filters.push(a);return!0},removeFilter:function(a){this.filters.splice($.inArray(a,this.hiddenColumns),1)},removeAllFilter:function(){this.filters=[]},reorderColumnPos:function(a,b){if(!this.manipulatedData)return this.manipulatedData;var c=this.manipulatedData.colInfos.splice(a,
1);this.manipulatedData.colInfos.splice(b,0,c[0]);for(c=0;c<this.manipulatedData.rows.length;c++){var d=this.manipulatedData.rows[c].cells.splice(a,1);this.manipulatedData.rows[c].cells.splice(b,0,d[0])}},getResultData:function(){return this.transformedData?this.transformedData:this.getData()},startDataChange:function(){this.attr("dataChangeStatus","STARTING")},endDataChange:function(){this.transformedData=this.getData();this.attr("dataChangeStatus","SUCCESS")},getUniqueItemsFromColumn:function(a,
b){return this.getDistinctColumnValues(this.getData(void 0,b).rows,a)},getUniqueItemsFromColumnAll:function(a,b,c){var d=[],d=this.getData(void 0,b).colInfos[a],d=c?this.manipulatedData:0<this.filters.length&&this.filters[this.filters.length-1].columnName===d.title?this.getData(d.title,b):this.getData(void 0,b);return this.getDistinctColumnValues(d.rows,a)},getDistinctColumnValues:function(a,b){for(var c=[],d=[],e=0;e<a.length;e++){var h=a[e].cells[b].fmtValue,g=a[e].cells[b].rawValue;this.inArray(h,
c)||(c.push(h),d.push({key:g,value:h}));if(500<c.length)return}d.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});return d},inArray:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1},getBoundsForSlider:function(a){var b=this.manipulatedData;if(2>b.rows.length)return!1;for(var c=b.rows[0].cells[a].rawValue,d=b.rows[0].cells[a].rawValue,e=0;e<b.rows.length;e++){var h=b.rows[e].cells[a].rawValue;h>d&&(d=h);h<c&&(c=h)}return{minValue:c,maxValue:d}},getMinMaxValueForSlider:function(a){var b=
this.getData(void 0,!0);if(0>=b.rows.length)return!1;for(var c=b.rows[0].cells[a].rawValue,d=b.rows[0].cells[a].rawValue,e=0;e<b.rows.length;e++){var h=b.rows[e].cells[a].rawValue;h>d&&(d=h);h<c&&(c=h)}return{minValue:c,maxValue:d}},findMinMaxValues:function(a){for(var b=a.selectedItems.keys.split("|"),c=0,d=0,e=1*b[0],h=1*b[0],g=1;g<b.length;g++){var f=1*b[g];f>h&&(h=f,d=g);f<e&&(e=f,c=g)}a=a.selectedItems.values.split("|");return{min:e,max:h,formattedMin:a[c],formattedMax:a[d]}}});steal.executed("js/observes/ResultDataObserve.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.ResultDefinition",{pluginName:"sentrana_dialogs_result_definition",defaults:{title:"Result Options",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"RESET",className:"btn-reset btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b)},open:function(){this.resultDefinitionController&&!this.resultDefinitionController._destroyed&&
this.resultDefinitionController.destroy();this.resultDefinitionController=this.element.find(".result-definition-element").sentrana_result_definition({app:this.options.app,resultDataModel:this.options.resultDataModel}).control();this.openDialog()},handleRESET:function(){this.updateStatus(!0,"Reseting filters. Please wait...");var a=this;a.options.resultDataModel.dataChanged?setTimeout(function(){a.closeDialog();a.options.resultDataModel.startDataChange();setTimeout(function(){a.resultDefinitionController.resetDataModel();
a.options.resultDataModel.endDataChange()},300)},300):a.closeDialog()},handleCANCEL:function(){this.closeDialog()},handleOK:function(){this.updateStatus(!0,"Updating filters. Please wait...");var a=this;a.resultDefinitionController.getChanges()?setTimeout(function(){var b=a.resultDefinitionController.getFilters();b.error?a.updateStatus(!1,'No item selected from column "'+b.columnName+'".'):(a.closeDialog(),a.options.resultDataModel.startDataChange(),setTimeout(function(){a.resultDefinitionController.updateDataModel(b);
a.options.resultDataModel.endDataChange()},300))},300):a.closeDialog()},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/ResultDefinitionDialog.js");
can.Control.extend("Sentrana.Controllers.ResultDefinition",{pluginName:"sentrana_result_definition",defaults:{app:null}},{init:function(){this.element.html("");this.element.append(can.view("templates/result-definition.ejs"));this.element.find(".button").button();this.$columns=this.element.find(".result-definition-columns");this.$columnUtilElement=this.element.find(".result-definition-util-element");this.updateColumnsView();this.$resultColumns=this.element.find(".result-definition-columns");this.makeResultColumnSortable()},
updateColumnsView:function(){this.colInfos=$.extend([],this.getColumns());this.resultDataModel=this.options.resultDataModel.cloneThis();var a=this.getColumns();this.$columns.html(can.view("templates/result-definition-columns.ejs",{columns:a}));this.columnUtilControllers=[];for(var b=0;b<a.length;b++)this.getColumnUtilController(a[b].oid)},".result-column-header click":function(a){var b=a.parent().find(".result-column-body"),c=$(a).closest(".column-util-element").attr("oid"),d=$(a).closest(".result-definition-container");
d.animate({scrollTop:$(a).offset().top-d.offset().top+d.scrollTop()});b.is(":visible")?$(a).closest(".result-column-container").toggleClass("disabled"):$(a).closest(".result-column-container").removeClass("disabled");var e=this;setTimeout(function(){e.columnUtilControllers[c].renderFilter()},400)},getColumns:function(){return this.options.resultDataModel.manipulatedData.colInfos},getColumnUtilController:function(a){var b=this.$columns.find('.column-util-element[columnID="'+a+'"]'),c=this.$columnUtilElement.control();
c&&!c._destroyed&&c.destroy();var c=this.resultDataModel,d=c.getColumnIndex(a),e=c.getColumn(a),e=c.isColumnFiltered(e.title);this.columnUtilControllers[a]=b.sentrana_result_data_util({columnIndex:d,oid:a,resultDataModel:c,isFiltered:e}).control()},getSelectedItemsArray:function(a){for(var b=[],c=a.keys.split("|"),a=a.values.split("|"),d=0;d<c.length;d++)b.push({key:c[d],value:a[d]});return b}," show_hide_column":function(a,b,c){(a=this.resultDataModel.isColumnHidden(c.name))?this.resultDataModel.showColumn(c.name):
this.resultDataModel.hideColumn(c.name);this.columnUtilControllers[c.oid].updateHiddenStatus(!a)}," update_result_column_sort_pos":function(a,b,c){var a=this.resultDataModel.getColumn(c.oid),b=this.resultDataModel.getColumnIndex(c.oid),d=this.resultDataModel.getColumnBySortPos(c.sortPos);this.resultDataModel.swapSortPosition(b,c.sortPos,a.sortOrder);c=this.resultDataModel.getColumn(d.oid);this.columnUtilControllers[c.oid].updateControllerSortPos(c.sortPos)}," update_result_column_sort_order":function(a,
b,c){this.resultDataModel.getColumn(c.oid).sortOrder=c.sortOrder},getChanges:function(){if(this.columnOrderChanged())return!0;for(var a=this.getColumns(),b=0;b<a.length;b++){var c=this.columnUtilControllers[a[b].oid].getColumnChanges();if(c)return c}return!1},columnOrderChanged:function(){for(var a=this.colInfos,b=this.getColumns(),c=0;c<a.length;c++)if(a[c].oid!==b[c].oid)return!0;return!1},getFilters:function(){for(var a=[],b=this.getColumns(),c=0;c<b.length;c++){var d=this.columnUtilControllers[b[c].oid].getColumnFilter();
if(d){if(d.error)return d;a.push(d)}}return a},updateDataModel:function(a){this.resultDataModel.removeAllFilter();this.resultDataModel.addFilters(a);this.options.resultDataModel.updateWithExternalData(this.resultDataModel);this.options.resultDataModel.sortDataByMultipleColumn()},resetDataModel:function(){this.options.resultDataModel.clearTransformation()},makeResultColumnSortable:function(){var a=this;this.$resultColumns.sortable({cancel:".disabled",containment:this.element.find(".result-definition"),
handle:".result-column-header",opacity:0.75,forcePlaceholderSize:!0,helper:"clone",placeholder:"result-column-placeholder",revert:300,stop:function(b,c){for(var d=c.item.attr("columnid"),e=a.resultDataModel.manipulatedData.colInfos,h=0,g=e.length;h<g;h++)if(e[h].oid===d)for(var f=$(".column-util-element",this),i=0,j=f.length;i<j;i++)if($(f[i]).attr("columnid")===d){a.moveColumn(d,h,i);return}}});this.$resultColumns.disableSelection()},moveColumn:function(a,b,c){b!==c&&(this.resultDataModel.reorderColumnPos(b,
c),this.columnUtilControllers[a].updateControllerIndex(c),this.columnUtilControllers[a].updateControllerIndex(c))}});steal.executed("js/controllers/ResultDefinitionController.js");
can.Control.extend("Sentrana.Controllers.ResultDataUtil",{pluginName:"sentrana_result_data_util",defaults:{app:null}},{init:function(){this.initialize();this.updateView()},initialize:function(){this.columnIndex=this.options.columnIndex;this.currentSelection=[]},updateView:function(){var a=this.getColumn(),b=this.options.resultDataModel.isColumnHidden(a.title);this.isHidden=b;this.element.html(can.view("templates/result-definition-column-util.ejs",{pos:a.sortPos,sortOrder:a.sortOrder,isHidden:b,oid:a.oid,
name:a.title,colType:a.colType}));this.element.find("form").submit(function(a){a.preventDefault()});this.$chekboxList=this.element.find(".filter-items");b&&this.element.find(".result-column-hide-icon").show();this.sortPos=1*a.sortPos;this.oldSortPos=1*a.sortPos;this.oldSortOrder=this.sortOrder=a.sortOrder;this.makeResultDefinitionCollapsible();this.options.isFiltered?this.element.find(".result-column-filter-icon").show():this.element.find(".result-column-filter-icon").hide()},renderFilter:function(){if(!this.isFilterRendered){var a=
this.getColumn();if(a.colType==Sentrana.ColType.METRIC)this.hideSearchBox(),this.updateSlideriew(a);else{this.hideHidebutton();var b=this;setTimeout(function(){var c=b.options.resultDataModel.getUniqueItemsFromColumnAll(b.options.columnIndex,!0,!0),d=c;b.options.isFiltered&&(d=b.getFilteredItems(a.title));b.options.items=c;b.options.filteredItems=d;c?(b.updateCheckListView(c),b.uncheckFilterData(c,d)):(b.hideSearchBox(),b.$chekboxList.html('<span class="too-many-value">'+Sentrana.getMessageText(window.app_resources.app_msg.column_filter.too_many_unique_column)+
"<span>"))},400)}this.checkSelectedOrder(a);this.isFilterRendered=!0}},getFilteredItems:function(a){a=this.options.resultDataModel.getFilterByColumn(a);return"COLUMN"===a.filterType?this.getSelectedItemsArray(a.selectedItems):null},getSelectedItemsArray:function(a){for(var b=[],c=a.keys.split("|"),a=a.values.split("|"),d=0;d<c.length;d++)b.push({key:c[d],value:a[d]});return b},hideHidebutton:function(){this.element.find(".btn-hide-column-container").hide()},hideSearchBox:function(){this.element.find(".filter-items").addClass("no-top-border")},
makeResultDefinitionCollapsible:function(){this.element.find(".result-column-header").click({controller:this},this.CollapsibleContainerTitleOnClick)},CollapsibleContainerTitleOnClick:function(a){var a=a.data.controller,b=$(this).find(".result-column-header-updn-img");$(b[0]).toggleClass("fa-rotate-90");a.element.find(".result-column-body").slideToggle("normal");a.getColumn().colType==Sentrana.ColType.METRIC&&(a=a.$chekboxList.control())&&a.reDrawSlider()},checkSelectedOrder:function(a){"A"===a.sortOrder.toUpperCase()||
"ASC"===a.sortOrder.toUpperCase()?this.element.find('.ord-column-sort-order[value="A"]').prop("checked",!0):this.element.find('.ord-column-sort-order[value="D"]').prop("checked",!0)},getColumn:function(){var a=this.options;return $.grep(a.resultDataModel.manipulatedData.colInfos,function(b){return b.oid===a.oid})[0]},".btn-hide-column-container click":function(a){this.toggleButtonStatus(a);this.element.trigger("show_hide_column",{oid:this.options.oid,name:this.getColumn().title})},toggleButtonStatus:function(a){$(a).find(".btn").toggleClass("active");
0<$(a).find(".btn-primary").size()&&$(a).find(".btn").toggleClass("btn-primary");0<$(a).find(".btn-danger").size()&&$(a).find(".btn").toggleClass("btn-danger");0<$(a).find(".btn-success").size()&&$(a).find(".btn").toggleClass("btn-success");0<$(a).find(".btn-info").size()&&$(a).find(".btn").toggleClass("btn-info");$(a).find(".btn").toggleClass("btn-default")},updateHiddenStatus:function(a){a?this.element.find(".result-column-hide-icon").show():this.element.find(".result-column-hide-icon").hide()},
".decrease-value click":function(){this.updateSortPos(!1)},".increase-value click":function(){this.updateSortPos(!0)},updateSortPos:function(a){var b=1*this.element.find(".column-sorting-container .decimal-place-num").text();if(a){if(b===this.options.resultDataModel.manipulatedData.colInfos.length)return!1;a=b+1}else{if(1===b)return!1;a=b-1}this.updateControllerSortPos(a);this.element.trigger("update_result_column_sort_pos",{oid:this.options.oid,sortPos:a});return!0},updateControllerSortPos:function(a){this.sortPos=
a;this.updateSortPosView()},updateControllerIndex:function(a){this.columnIndex=a;this.options.columnIndex=a},updateSortPosView:function(){this.element.find(".column-sorting-container .decimal-place-num").html(this.sortPos);this.element.find(".result-column-sort-pos-num").html(this.sortPos)},".ord-column-sort-order click":function(a){this.sortOrder=a=$(a).val();this.updateHeaderSortOrder(a);this.element.trigger("update_result_column_sort_order",{oid:this.options.oid,sortOrder:a})},updateHeaderSortOrder:function(a){var b=
this.element.find(".result-column-sort-icon");b.removeClass("fa-sort-alpha-asc").removeClass("fa-sort-alpha-desc");"A"===a.toUpperCase()?b.addClass("fa-sort-alpha-asc"):b.addClass("fa-sort-alpha-desc")},getColumnBySortPos:function(a){return $.grep(this.options.colInfos,function(b){return b.sortPos===a})[0]},uncheckFilterData:function(){for(var a=0;a<this.options.items.length;a++)this.isFiltered(this.options.items[a].key)&&$('.checkboxItem[key="'+this.options.items[a].key+'"]',this.element).prop("checked",
!1);this.element.find(".checkboxItem:checked").length===this.options.items.length?this.$chekboxAll.prop("checked",!0):this.$chekboxAll.prop("checked",!1)},isFiltered:function(a){for(var b=0;b<this.options.filteredItems.length;b++)if(this.options.filteredItems[b].key.toString()===a.toString())return!1;return!0},updateSlideriew:function(a){var b,c,d=this.options.resultDataModel.getBoundsForSlider(this.options.columnIndex);d&&d.minValue!==d.maxValue?(this.options.isFiltered?(c=this.options.resultDataModel.getFilterByColumn(a.title),
"COLUMN"===c.filterType&&(c=this.getMinMax(c.selectedItems.keys.split("|"))),b=c.min,c=c.max):(b=d.minValue,c=d.maxValue),a=new Sentrana.Models.RangeFilter({app:this.app,columnDetail:{name:a.title,formatString:a.formatString,min:b,max:c,lowerBound:d.minValue,upperBound:d.maxValue,dataType:a.dataType,index:this.options.columnIndex}}),this.rangefilterController&&!this.rangefilterController._destroyed&&this.rangefilterController.destroy(),this.rangefilterController=this.$chekboxList.sentrana_range_filter({app:this.options.app,
rangeFilterModel:a}).control()):this.$chekboxList.html('<span class="">'+Sentrana.getMessageText(window.app_resources.app_msg.column_filter.slider_not_possible)+"<span>")},getMinMax:function(a){for(var b=1*a[0],c=0,d=0;d<a.length;d++){var e=1*a[d];e>c&&(c=e);e<b&&(b=e)}return{min:b,max:c}},updateCheckListView:function(a){this.$chekboxList.html(can.view("templates/columnBaseFilterCheckList.ejs",{items:a}));this.$chekboxAll=this.element.find(".checkboxAll");0<this.currentSelection.length?this.updateChekboxSelection(this.currentSelection.split("|")):
(this.element.find(".checkboxItem").prop("checked",!0),this.$chekboxAll.prop("checked",!0))},updateChekboxSelection:function(a){for(var b=0;b<a.length;b++)this.element.find('.checkboxItem[key="'+a[b]+'"]').prop("checked",!0);for(b=0;b<this.currentSelection.length;b++)this.element.find('.checkboxItem[key="'+this.currentSelection[b]+'"]').prop("checked",!0);this.element.find(".checkboxItem:checked").length===this.options.items.length&&this.$chekboxAll.prop("checked",!0)},".accordion-search-input keyup":function(a){this.currentSelection=
[];this.searchColumnValue(a)},searchColumnValue:function(a){var b=$(a).val(),a=$.grep(this.options.items,function(a){return-1<a.value.toLowerCase().indexOf(b.toLowerCase())});0<a.length?(this.updateCheckListView(a),0===b.length&&this.uncheckFilterData()):this.$chekboxList.html('<span class="too-many-value">'+Sentrana.getMessageText(window.app_resources.app_msg.column_filter.no_result)+"<span>")},".checkbox-label click":function(a){a=a.parent().find("input:checkbox");a.prop("checked")?a.prop("checked",
!1):a.prop("checked",!0);a.hasClass("checkboxAll")&&$(".checkboxAll").change();this.updateStatusofAll()},".checkboxAll change":function(){var a=this.$chekboxAll.is(":checked"),b=this.element.find(".checkboxItem");a?b.prop("checked",!0):b.prop("checked",!1)},".checkboxItem change":function(){this.updateStatusofAll()},updateStatusofAll:function(){this.currentSelection=[];var a=this.element.find(".checkboxItem:checked");a.length===this.options.items.length?this.$chekboxAll.prop("checked",!0):this.$chekboxAll.prop("checked",
!1);if(0===$(".accordion-search-input").val().length)for(var b=0;b<a.length;b++)this.currentSelection.push($(a[b]).val())},getFilterParam:function(){var a=$(".checkboxItem:checked",this.element),b=[],c=[],d=this.getColumn(),e=this.options.items;if(!this.isFilterRendered&&this.options.isFiltered)for(var e=this.options.resultDataModel.getUniqueItemsFromColumnAll(this.options.columnIndex,!0,!0),h=this.getFilteredItems(d.title),g=0;g<h.length;g++)b.push(h[g].value),c.push(h[g].key);else for(g=0;g<a.length;g++){var h=
$(a[g]).val(),f=$(a[g]).attr("key");b.push(h);c.push(f)}if(this.isFilterRendered&&1>c.length)return!1;g={};a=e?a.length===(e.length||0):!0;g.values=b.join("|");g.keys=c.join("|");return{columnIndex:this.columnIndex,columnName:d.title,selectedItems:g,isAllSelected:a}},getRangeFilterParam:function(){if(this.rangefilterController)return this.rangefilterController.getFilterParam()},getRangeFilterChanges:function(){if(this.rangefilterController)return this.rangefilterController.isDirty()},getFilterChanges:function(){var a=
$(".checkboxItem:checked",this.element),b=[],c=[],d=this.getColumn(),e=this.options.items;if(this.isFilterRendered){if(this.options.isFiltered){e=this.getFilteredItems(d.title);for(d=0;d<e.length;d++)b.push(e[d].key);for(d=0;d<a.length;d++)e=$(a[d]).attr("key"),c.push(e);return b.join()!==c.join()}return a.length!==e.length}return!1},getColumnChanges:function(){var a=this.getColumn(),b={},b=a.colType==Sentrana.ColType.METRIC?this.getRangeFilterChanges():this.getFilterChanges();if(this.sortPos!==this.oldSortPos||
this.sortOrder!==this.oldSortOrder)b=!0;this.isHidden!==this.options.resultDataModel.isColumnHidden(a.title)&&(b=!0);return b},getColumnFilter:function(){var a=this.getColumn(),b={};if(a.colType==Sentrana.ColType.METRIC){b=this.getRangeFilterParam();if(!b)return(a=this.options.resultDataModel.getFilterByColumn(a.title))?a:!1;b={filterType:Sentrana.Enums.FILTER_TYPE_RANGE,columnName:b.columnName,lowerBound:b.lowerBound,upperBound:b.upperBound,min:b.min,max:b.max,formattedMin:b.formattedMin,formattedMax:b.formattedMax,
formatString:b.formatString,dataType:b.dataType}}else{b=this.getFilterParam();if(!b)return{error:!0,columnName:a.title};b={columnIndex:b.columnIndex,columnName:b.columnName,filterType:Sentrana.Enums.FILTER_TYPE_COLUMN,isAllSelected:b.isAllSelected,selectedItems:b.selectedItems}}return b}});steal.executed("js/controllers/ResultDataUtilController.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.MaximizeChart",{pluginName:"sentrana_dialogs_maximize_chart",defaults:{title:"Maximize chart",autoOpen:!1}},{init:function(a,b){this._super(a,b);this.$chartContainer=this.element.find(".maximized-chart-container");this.$buttonContainer=this.element.find(".maximized-chart-dialogs-buttons");this.prepareForm()},prepareForm:function(){this.element.find(".modal-header").hide();this.element.find(".modal-footer").hide();
this.element.find(".modal-dialog").width(this.options.dialogDimension.width+"px").css("margin","auto").css("margin-top","5px");this.element.find(".modal-content").css("min-height",this.options.dialogDimension.height+"px");this.createButtons()},createButtons:function(){var a=this,b={title:"Export",cls:"fa-cloud-download",eventType:"export_all",dropdown:!0,btnStyle:"",menuItems:[{id:"png",name:"Download Chart (PNG)"},{id:"jpeg",name:"Download Chart (JPEG)"},{id:"pdf",name:"Download Chart (PDF)"}]};
this.$buttonContainer.append("templates/collapsibleContainerButton.ejs",b);this.$buttonContainer.append("templates/collapsibleContainerButton.ejs",{title:"Print",cls:"fa-print",btnStyle:"",eventType:"print_all",dropdown:!1});this.$buttonContainer.append("templates/collapsibleContainerButton.ejs",{title:"Close",cls:"fa-times",btnStyle:"",eventType:"close_dialog",dropdown:!1});this.$buttonContainer.append('<div class="clear"></div>');var c=this.$buttonContainer.find(".fa-cloud-download").closest(".cc-button");
c.on("click",function(d){if(b.dropdown){var h=c.find(".container-drop-down"),g=$(d.delegateTarget).position();h.css({top:g.top+$(d.delegateTarget).height(),left:g.left-h.width()+$(d.delegateTarget).width()});h.show();h.find(".container-button-menu").off("click");h.find(".container-button-menu").on("click",function(b){h.hide();a.element.trigger("export_all",{type:$(this).attr("elementid"),size:a.options.dialogDimension});b.stopPropagation()});h.on("mouseleave",function(){h.hide()})}else a.element.trigger(b.eventType,
b.eventArgs);return!1});var d=this.$buttonContainer.find(".fa-print").closest(".cc-button");d.off("click");d.on("click",function(){a.origFocus=document.activeElement;a.closeDialog();setTimeout(function(){a.element.trigger("print_all",{type:"chart"})},300);return!1});d=this.$buttonContainer.find(".fa-times").closest(".cc-button");d.off("click");d.on("click",function(){a.origFocus=document.activeElement;a.closeDialog();return!1})},renderChart:function(){this.chartControl&&this.chartControl.destroy();
this.chartControl=this.$chartContainer.sentrana_report_chart(this.chartOptions).control()},open:function(a){a.stopInitialRendering=!1;a.chart.chartType=a.chartData.chartType;this.chartOptions=a;this.renderChart();this.openDialog()}});Sentrana.Dialogs.MaximizeChart("Sentrana.Dialogs.MaximizePivotChart",{pluginName:"sentrana_dialogs_maximize_pivot_chart",defaults:{title:"Maximize chart",autoOpen:!1}},{renderChart:function(a){this.chartControl&&this.chartControl.destroy();this.chartControl=this.$chartContainer.sentrana_pivot_chart(this.chartOptions).control();
this.chartControl.staticUpdate(a)},open:function(a,b){this.chartOptions=a;this.$buttonContainer.find(".fa-print").closest(".cc-button").hide();this.renderChart(b);this.openDialog()}})});steal.executed("js/controllers/MaximizeChartDialog.js");
can.Control.extend("Sentrana.Controllers.ReportFilter",{pluginName:"sentrana_report_filter",defaults:{app:null}},{init:function(){this.initialize();this.updateView()},initialize:function(){this.columnIndex=this.options.columnIndex;this.currentSelection=[]},updateView:function(){var a=this.getColumn();this.element.html(can.view("templates/report-filter.ejs",{oid:a.oid,name:a.title,colType:a.colType}));this.element.find("form").submit(function(a){a.preventDefault()});this.$chekboxList=this.element.find(".filter-items");
this.makeResultDefinitionCollapsible();a.colType==Sentrana.ColType.METRIC&&this.renderFilter()},renderFilter:function(){if(!this.isFilterRendered){var a=this.getColumn();if(a.colType==Sentrana.ColType.METRIC)this.hideSearchBox(),this.updateSlideriew(a);else{var b=this;setTimeout(function(){var c=b.options.resultDataModel.getUniqueItemsFromColumnAll(b.options.columnIndex,!0,!0),d=c;b.options.isFiltered&&(d=b.getFilteredItems(a.title));b.options.items=c;b.options.filteredItems=d;c?(b.updateCheckListView(c),
b.uncheckFilterData(c,d),b.isFilterRendered=!0):(b.hideSearchBox(),b.$chekboxList.html('<span class="too-many-value">'+Sentrana.getMessageText(window.app_resources.app_msg.column_filter.too_many_unique_column)+"<span>"))},400)}this.checkSelectedOrder(a)}},getFilteredItems:function(a){return(a=this.options.resultDataModel.getFilterByColumn(a))&&"COLUMN"===a.filterType?this.getSelectedItemsArray(a.selectedItems):null},getSelectedItemsArray:function(a){for(var b=[],c=a.keys.split("|"),a=a.values.split("|"),
d=0;d<c.length;d++)b.push({key:c[d],value:a[d]});return b},hideSearchBox:function(){this.element.find(".filter-items").addClass("no-top-border")},makeResultDefinitionCollapsible:function(){this.element.find(".report-filter-header").click({controller:this},this.CollapsibleContainerTitleOnClick)},CollapsibleContainerTitleOnClick:function(a){var a=a.data.controller,b=$(this).find(".report-filter-header-updn-img");a.renderFilter();$(b[0]).toggleClass("fa-rotate-90");for(var b=$(".filter-body-attribute"),
c=0;c<b.length;c++){var d=0,e=1*$(b[0]).css("z-index");e>d&&(d=e)}d&&a.element.find(".filter-body-attribute").css("z-index",d+100);a.element.find(".report-filter-body").slideToggle("normal");a.getColumn().colType==Sentrana.ColType.METRIC&&(d=a.$chekboxList.control())&&d.reDrawSlider()}," .report-filter-container  mouseleave":function(a){var b=$(a).find(".report-filter-body");b.hasClass("filter-body-attribute")&&b.is(":visible")&&(a=$(a).find(".report-filter-header-updn-img"),$(a[0]).toggleClass("fa-rotate-90"),
b.slideToggle("normal"))},checkSelectedOrder:function(a){"A"===a.sortOrder.toUpperCase()||"ASC"===a.sortOrder.toUpperCase()?this.element.find('.ord-column-sort-order[value="A"]').prop("checked",!0):this.element.find('.ord-column-sort-order[value="D"]').prop("checked",!0)},getColumn:function(){var a=this.options;return $.grep(a.resultDataModel.manipulatedData.colInfos,function(b){return b.oid===a.oid})[0]},uncheckFilterData:function(){for(var a=0;a<this.options.items.length;a++)this.isFiltered(this.options.items[a].key)&&
$('.checkboxItem[key="'+this.options.items[a].key+'"]',this.element).prop("checked",!1);this.element.find(".checkboxItem:checked").length===this.options.items.length?this.$chekboxAll.prop("checked",!0):this.$chekboxAll.prop("checked",!1)},isFiltered:function(a){for(var b=0;b<this.options.filteredItems.length;b++)if(this.options.filteredItems[b].key.toString()===a.toString())return!1;return!0},updateSlideriew:function(a){var b,c,d=this.options.resultDataModel.getBoundsForSlider(this.options.columnIndex);
d&&d.minValue!==d.maxValue?(this.options.isFiltered?(c=this.options.resultDataModel.getFilterByColumn(a.title),"COLUMN"===c.filterType&&(c=this.getMinMax(c.selectedItems.keys.split("|"))),b=c.min,c=c.max):(b=d.minValue,c=d.maxValue),a=new Sentrana.Models.RangeFilter({app:this.app,columnDetail:{name:a.title,formatString:a.formatString,min:b,max:c,lowerBound:d.minValue,upperBound:d.maxValue,dataType:a.dataType,index:this.options.columnIndex}}),this.rangefilterController&&!this.rangefilterController._destroyed&&
this.rangefilterController.destroy(),this.rangefilterController=this.$chekboxList.sentrana_range_filter({app:this.options.app,rangeFilterModel:a}).control()):this.$chekboxList.html('<span class="">'+Sentrana.getMessageText(window.app_resources.app_msg.column_filter.slider_not_possible)+"<span>")},getMinMax:function(a){for(var b=1*a[0],c=0,d=0;d<a.length;d++){var e=1*a[d];e>c&&(c=e);e<b&&(b=e)}return{min:b,max:c}},updateCheckListView:function(a){this.$chekboxList.html(can.view("templates/columnBaseFilterCheckList.ejs",
{items:a}));this.$chekboxAll=this.element.find(".checkboxAll");0<this.currentSelection.length?this.updateChekboxSelection(this.currentSelection.split("|")):(this.element.find(".checkboxItem").prop("checked",!0),this.$chekboxAll.prop("checked",!0))},updateChekboxSelection:function(a){for(var b=0;b<a.length;b++)this.element.find('.checkboxItem[key="'+a[b]+'"]').prop("checked",!0);for(b=0;b<this.currentSelection.length;b++)this.element.find('.checkboxItem[key="'+this.currentSelection[b]+'"]').prop("checked",
!0);this.element.find(".checkboxItem:checked").length===this.options.items.length&&this.$chekboxAll.prop("checked",!0)},".accordion-search-input keyup":function(a){this.currentSelection=[];this.searchColumnValue(a)},searchColumnValue:function(a){var b=$(a).val(),a=$.grep(this.options.items,function(a){return-1<a.value.toLowerCase().indexOf(b.toLowerCase())});0<a.length?(this.updateCheckListView(a),0===b.length&&this.uncheckFilterData()):this.$chekboxList.html('<span class="too-many-value">'+Sentrana.getMessageText(window.app_resources.app_msg.column_filter.no_result)+
"<span>")},".checkbox-label click":function(a){a=a.parent().find("input:checkbox");a.prop("checked")?a.prop("checked",!1):a.prop("checked",!0);a.hasClass("checkboxAll")&&$(".checkboxAll").change();this.updateStatusofAll()},".checkboxAll change":function(){var a=this.$chekboxAll.is(":checked"),b=this.element.find(".checkboxItem");a?b.prop("checked",!0):b.prop("checked",!1)},".checkboxItem change":function(){this.updateStatusofAll()},updateStatusofAll:function(){this.currentSelection=[];var a=this.element.find(".checkboxItem:checked");
a.length===this.options.items.length?this.$chekboxAll.prop("checked",!0):this.$chekboxAll.prop("checked",!1);if(0===$(".accordion-search-input").val().length)for(var b=0;b<a.length;b++)this.currentSelection.push($(a[b]).val())},getFilterParam:function(){var a=$(".checkboxItem:checked",this.element),b=[],c=[],d=this.getColumn(),e=this.options.items;if(!this.isFilterRendered&&this.options.isFiltered)for(var e=this.options.resultDataModel.getUniqueItemsFromColumnAll(this.options.columnIndex,!0,!0),h=
this.getFilteredItems(d.title),g=0;g<h.length;g++)b.push(h[g].value),c.push(h[g].key);else for(g=0;g<a.length;g++){var h=$(a[g]).val(),f=$(a[g]).attr("key");b.push(h);c.push(f)}if(this.isFilterRendered&&1>c.length)return!1;g={};a=e?a.length===(e.length||0):!0;g.values=b.join("|");g.keys=c.join("|");return{columnIndex:this.columnIndex,columnName:d.title,selectedItems:g,isAllSelected:a}},getRangeFilterParam:function(){if(this.rangefilterController)return this.rangefilterController.getFilterParam()},
getRangeFilterChanges:function(){if(this.rangefilterController)return this.rangefilterController.isDirty()},getFilterChanges:function(){var a=$(".checkboxItem:checked",this.element),b=[],c=[],d=this.getColumn(),e=this.options.items;if(this.isFilterRendered){if(this.options.isFiltered){e=this.getFilteredItems(d.title);if(!e)return!1;for(d=0;d<e.length;d++)b.push(e[d].key);for(d=0;d<a.length;d++)e=$(a[d]).attr("key"),c.push(e);return b.join()!==c.join()}return!e?!1:a.length!==e.length}return!1},reDrawSlider:function(){if(this.getColumn().colType==
Sentrana.ColType.METRIC&&this.rangefilterController)return this.rangefilterController.reDrawSlider()},getColumnChanges:function(){var a={},a=this.getColumn().colType==Sentrana.ColType.METRIC?this.getRangeFilterChanges():this.getFilterChanges();if(this.sortPos!==this.oldSortPos||this.sortOrder!==this.oldSortOrder)a=!0;return a},getColumnFilter:function(){var a=this.getColumn(),b={};if(a.colType==Sentrana.ColType.METRIC){b=this.getRangeFilterParam();if(!b)return(a=this.options.resultDataModel.getFilterByColumn(a.title))?
a:!1;b={filterType:Sentrana.Enums.FILTER_TYPE_RANGE,columnName:b.columnName,lowerBound:b.lowerBound,upperBound:b.upperBound,min:b.min,max:b.max,formattedMin:b.formattedMin,formattedMax:b.formattedMax,formatString:b.formatString,dataType:b.dataType}}else{b=this.getFilterParam();if(!b)return{error:!0,columnName:a.title};b={columnIndex:b.columnIndex,columnName:b.columnName,filterType:Sentrana.Enums.FILTER_TYPE_COLUMN,isAllSelected:b.isAllSelected,selectedItems:b.selectedItems}}return b}});steal.executed("js/controllers/ReportFilterController.js");
can.Control.extend("Sentrana.Controllers.ReportFilters",{pluginName:"sentrana_report_filters",defaults:{app:null}},{init:function(){this.element.html("");this.element.append(can.view("templates/report-filters.ejs"));this.$columns=this.element.find(".report-filters-columns");this.updateColumnsView()},updateColumnsView:function(){this.colInfos=$.extend([],this.getColumns());this.resultDataModel=this.options.resultDataModel.cloneThis();var a=this.getColumns();this.$columns.html(can.view("templates/report-filters-columns.ejs",
{columns:a}));this.columnUtilControllers=[];for(var b=0;b<a.length;b++)this.getColumnUtilController(a[b].oid);this.element.find(".button").button()},getColumns:function(){return this.options.resultDataModel.manipulatedData.colInfos},getColumnUtilController:function(a){var b=this.element.find('.report-filter-element[columnID="'+a+'"]'),c=b.control();c&&!c._destroyed&&c.destroy();var c=this.resultDataModel,d=c.getColumnIndex(a),e=c.getColumn(a),e=c.isColumnFiltered(e.title);this.columnUtilControllers[a]=
b.sentrana_report_filter({columnIndex:d,oid:a,resultDataModel:c,isFiltered:e}).control()},getSelectedItemsArray:function(a){for(var b=[],c=a.keys.split("|"),a=a.values.split("|"),d=0;d<c.length;d++)b.push({key:c[d],value:a[d]});return b},".btn-apply-filters click":function(){if(this.getChanges()){var a=this.getFilters(),b=this;a.error?Sentrana.AlertDialog("No item selected.",'No item selected from column "'+a.columnName+'".'):(this.options.resultDataModel.startDataChange(),setTimeout(function(){b.updateDataModel(a);
b.options.resultDataModel.endDataChange()},300))}},".btn-reset-filters click":function(){if(0<this.options.resultDataModel.hiddenColumns.length||0<this.options.resultDataModel.filters.length)this.options.resultDataModel.dataChanged=!0;if(this.options.resultDataModel.dataChanged){var a=this;this.options.resultDataModel.startDataChange();setTimeout(function(){a.resetDataModel();a.element.trigger("reset_filtercontrol");a.options.resultDataModel.endDataChange()},300)}},reDrawSliders:function(){for(var a=
this.getColumns(),b=0;b<a.length;b++)this.columnUtilControllers[a[b].oid].reDrawSlider()},getChanges:function(){if(this.columnOrderChanged())return!0;for(var a=this.getColumns(),b=0;b<a.length;b++){var c=this.columnUtilControllers[a[b].oid].getColumnChanges();if(c)return c}return!1},columnOrderChanged:function(){for(var a=this.colInfos,b=this.getColumns(),c=0;c<a.length;c++)if(a[c].oid!==b[c].oid)return!0;return!1},getFilters:function(){for(var a=[],b=this.getColumns(),c=0;c<b.length;c++){var d=this.columnUtilControllers[b[c].oid].getColumnFilter();
if(d){if(d.error)return d;a.push(d)}}return a},updateDataModel:function(a){this.resultDataModel.removeAllFilter();this.resultDataModel.addFilters(a);this.options.resultDataModel.updateWithExternalData(this.resultDataModel)},resetDataModel:function(){this.options.resultDataModel.startDataChange();this.options.resultDataModel.clearTransformation();this.options.resultDataModel.endDataChange()}});steal.executed("js/controllers/ReportFiltersController.js");
can.Control.extend("Sentrana.Controllers.ReportSortUtil",{pluginName:"sentrana_report_sort_util",defaults:{app:null}},{init:function(){this.initialize();this.updateView()},initialize:function(){this.currentSelection=[]},updateView:function(){var a=this.getColumn(),b=this.options.resultDataModel.isColumnHidden(a.title);this.isHidden=b;this.element.html(can.view("templates/report-sort-util.ejs",{pos:a.sortPos,sortOrder:a.sortOrder,isHidden:b,oid:a.oid,name:a.title,colType:a.colType}));var c=this.element.find(".result-column-container").css("width"),
c=1*c.substring(0,c.length-2),d=this.options.panelBody;$(this.element).css({left:$(this.element).offset().left-c-d.left});this.element.find("form").submit(function(a){a.preventDefault()});this.$chekboxList=this.element.find(".filter-items");b&&this.element.find(".result-column-hide-icon").show();this.sortPos=1*a.sortPos;this.oldSortPos=1*a.sortPos;this.oldSortOrder=this.sortOrder=a.sortOrder;this.checkSelectedOrder(a)},checkSelectedOrder:function(a){"A"===a.sortOrder.toUpperCase()||"ASC"===a.sortOrder.toUpperCase()?
this.element.find('.ord-column-sort-order[value="A"]').prop("checked",!0):this.element.find('.ord-column-sort-order[value="D"]').prop("checked",!0)},getColumn:function(){var a=this.options;return $.grep(a.resultDataModel.manipulatedData.colInfos,function(b){return b.oid===a.oid})[0]},updateHiddenStatus:function(a){a?this.element.find(".result-column-hide-icon").show():this.element.find(".result-column-hide-icon").hide()},".decrease-value click":function(){this.updateSortPos(!1)},".increase-value click":function(){this.updateSortPos(!0)},
updateSortPos:function(a){var b=1*this.element.find(".column-sorting-container .decimal-place-num").text();if(a){if(b===this.options.resultDataModel.manipulatedData.colInfos.length)return!1;a=b+1}else{if(1===b)return!1;a=b-1}this.updateControllerSortPos(a);return!0},updateControllerSortPos:function(a){this.sortPos=a;this.updateSortPosView()},updateSortPosView:function(){this.element.find(".column-sorting-container .decimal-place-num").html(this.sortPos);this.element.find(".result-column-sort-pos-num").html(this.sortPos)},
".ord-column-sort-order click":function(a){this.sortOrder=a=$(a).val();this.updateHeaderSortOrder(a)},updateHeaderSortOrder:function(a){var b=this.element.find(".result-column-sort-icon");b.removeClass("fa-sort-alpha-asc").removeClass("fa-sort-alpha-desc");"A"===a.toUpperCase()?b.addClass("fa-sort-alpha-asc"):b.addClass("fa-sort-alpha-desc")},updateDataModel:function(){var a=this.options.resultDataModel.getColumn(this.options.oid);this.options.resultDataModel.swapSortPosition(this.options.resultDataModel.getColumnIndex(this.options.oid),
this.sortPos,a.sortOrder);a.sortPos=this.sortPos;a.sortOrder=this.sortOrder},".btn-apply-sort click":function(){this.hideThisController();this.options.resultDataModel.startDataChange();this.updateDataModel();this.options.resultDataModel.sortDataByMultipleColumn();this.options.resultDataModel.endDataChange()},".btn-reset-sort click":function(){this.hideThisController();this.element.trigger("reset_sort-options")},".btn-hide-column click":function(){this.hideThisController();this.element.trigger("hide_grid_column",
this.options.resultDataModel.getColumn(this.options.oid).title)},".btn-cancel-sort click":function(){this.hideThisController()},"{document} click":function(a,b){this.element.has(b.target).length||this.element.hide()},"{document} keyup":function(a,b){27===b.keyCode&&this.element.hide()},hideThisController:function(){this.element.hide()}});steal.executed("js/controllers/ReportSortUtilController.js");
can.Control.extend("Sentrana.Controllers.GridHiddenColumn",{pluginName:"sentrana_grid_hidden_column",defaults:{app:null}},{init:function(){this.hiddenColumns=[];this.element.html("");this.element.hide();this.options.hiddenColumns.length&&(this.hiddenColumns=this.options.hiddenColumns,this.renderHiddenColumns())},hideColumn:function(a){-1<$.inArray(a,this.hiddenColumns)||(this.hiddenColumns.push(a),this.renderHiddenColumns())},showColumn:function(a){this.hiddenColumns.splice($.inArray(a,this.hiddenColumns),
1);this.renderHiddenColumns()},updateHiddenColumnView:function(a){this.hiddenColumns=[];for(var b=0;b<a.length;b++)this.hiddenColumns.push(a[b]);this.renderHiddenColumns()},renderHiddenColumns:function(){this.element.html("");this.element.append(can.view("templates/grid-hidden-columns.ejs",{hiddenColumns:this.hiddenColumns}));var a=this.element.find(".hidden-column-label");0<this.hiddenColumns.length?(this.element.show(),a.html("Hidden Columns: ")):(a.html(""),this.element.hide())},".hidden-column-container  mouseleave":function(){this.element.hide()},
".tu-close-container click":function(a){this.element.hide();this.element.trigger("restore_column",$(a).closest(".tu").attr("columnName"))}});steal.executed("js/controllers/GridHiddenColumnController.js");
Sentrana.Dialogs.ShareReport("Sentrana.Dialogs.ShareBooklet",{pluginName:"sentrana_dialogs_share_booklet",defaults:{title:"Share Booklet",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"UNSHARE",className:"btn-unshare btn-default",disabled:!0},{label:"OK",className:"btn-ok btn-primary",disabled:!0}]}},{init:function(a,b){this._super(a,b);this.$tabs=this.element.find(".shrd-tabs");this.$userAutoComp=this.element.find(".users-auto-complete");this.$userLoading=this.element.find(".users-loading");
this.$userParagraph=this.element.find(".users-para");this.$newRecipients=this.element.find(".recipients");this.$emailNewRecips=this.element.find(".shrd-email-recips-new");this.$emailExistRecips=this.element.find(".shrd-email-recips-existing");this.$emailSection=this.element.find(".email-section");this.$emailSubject=this.element.find(".email-subject");this.$emailBody=this.element.find(".email-body");this.$existRecips=$(".table tbody",this.element.find("#shrd-tab-existing-booklet"))},loadForm:function(a){this.booklet=
a;a=this.booklet.name.length>this.options.maxRptName?this.booklet.name.substr(0,this.options.maxRptName)+"...":this.booklet.name+"-By "+this.booklet.createUser;this.element.find(".modal-title").html("<span class='header-title-part-1'>Share:</span><span class='header-title-part-2'> '"+a+"'</span>");this.loadUsers(this.booklet);this.$newRecipients.empty();this.$newRecipients.hide();this.senderUserID=this.options.app.retrieveUserInfo().userID;this.newRecipientUserIDs=[];this.$userAutoComp.val("");this.$emailNewRecips.prop("checked",
!1);this.$emailExistRecips.prop("checked",!1);this.$emailExistRecips.prop("disabled",!0);this.$emailSubject.val("Booklet Routing: "+this.booklet.name+"-by "+this.booklet.createUser);this.$emailBody.val("");this.loadExistingRecipients(this.booklet);this.$emailSection.hide();$("#share-booklet-tabs li:eq(0) a").tab("show")},loadUsers:function(a){var b=this;this.recipientsModelID===a.id?this.showLoadingUsers(!1):(this.showLoadingUsers(!0),this.usersPromise=$.ajax({url:Sentrana.Controllers.BIQController.generateUrl("Booklets/"+
a.id+"/PossibleRecipients"),type:"GET",dataType:"json"}).pipe(function(c){b.userInfoArray=c;b.userInfoMap={};$.each(b.userInfoArray,function(a,c){c.fullName=c.firstName+" "+c.lastName+" ("+c.companyName+")";b.userInfoMap[Sentrana.Models.BookletRecipients.toUserKey(c.userID)]=c});b.recipientsModelID=a.id;return b.userInfoMap}))},loadExistingRecipients:function(a){var b=Sentrana.Models.BookletRecipients.findOne({id:a.id,app:this.options.app}),c=this;$.when(b,c.usersPromise).done(function(b){c.recipientsModel=
b;c.recipientsModel.attr("id",a.id);c.recipientsModel.bind("change",function(){c.recipientsModel.hasChanges()?c.enableButton("OK"):c.disableButton("OK");c.$emailExistRecips.prop("checked",c.recipientsModel.isEmailNotificationEnabled()?c.$emailExistRecips.prop("checked"):!1);c.$emailExistRecips.prop("disabled",!c.recipientsModel.isEmailNotificationEnabled())});c.$existRecips.html(can.view("templates/shrd-existing-recips.ejs",{recipModel:c.recipientsModel,userInfoMap:c.userInfoMap,id:"B"+c.recipientsModel.id}));
c.recipientsModel.numExistingRecipients();c.filteredUserInfoArray=$.grep(c.userInfoArray,function(a){return!c.recipientsModel.hasExistingRecipient(a.userID)});c.updateUserList();c.showLoadingUsers(!1);c.$userAutoComp.focus()}).fail(function(a){a.getResponseHeader("ErrorMsg")!==app_resources.app_msg.session_time_out&&Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.ajax_error.recipient.load.failed.dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.ajax_error.recipient.load.failed.dialog_msg))})},
handleSelectEvent:function(a){"#shrd-tab-existing-booklet"===$(a).find("a").attr("href")?(this.showButton("UNSHARE"),0<this.recipientsModel.numExistingRecipients()?this.enableButton("UNSHARE"):this.disableButton("UNSHARE")):this.hideButton("UNSHARE")},handleOK:function(){var a=this;this.recipientsModel.attr("subjectNew",this.$emailSubject.val());this.recipientsModel.attr("bodyNew",this.$emailBody.val());this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.share_report.update_recipients));
var b=this.recipientsModel.save();b.done(function(b){a.updateStatus(!1,"Success!");a.closeDialog();a.booklet.shared=a.hasShare(b.existingRecipsArray)?!0:a.isEmpty(b.newRecipsMap)?!1:a.providedShare(b.newRecipsArray)?!0:!1;a.options.parent.changeBookletIcon(a.booklet)});b.fail(function(b){b="Failure: "+b.getResponseHeader("ErrorMsg");a.updateStatus(!1,b,"fail")})},handleUNSHARE:function(){var a=this;this.updateStatus(!0,Sentrana.getMessageText(window.app_resources.app_msg.share_report.deleting_recipients));
var b=this.recipientsModel.destroy();b.done(function(){a.updateStatus(!1,"Success!");a.closeDialog();a.booklet.shared=!1;a.options.parent.changeBookletIcon(a.booklet)});b.fail(function(b){b="Failure: "+b.getResponseHeader("ErrorMsg");a.updateStatus(!1,b,"fail")})}});steal.executed("js/controllers/ShareBookletDialog.js");
steal("lib/sentrana/ConfigManager/ConfigManagerModel.js","lib/sentrana/ConfigManager/ConfigManagerController.js","lib/external/ace-editor/theme-chrome.js","lib/external/ace-editor/mode-xml.js","lib/sentrana/ConfigManager/css/configmanager.css");steal.executed("lib/sentrana/ConfigManager/StealConfigManagerModule.js");
can.Construct("Sentrana.Models.ConfigurationManagerModel",{},{init:function(a,b){this.serviceMethodMap=b;this.app=a},generateUrl:function(a,b){return this.app.generateUrl?this.app.generateUrl(a,b):this.app.constructor.generateUrl(a,b)},getConfigurationGroup:function(a,b,c){can.ajax({url:this.generateUrl(this.serviceMethodMap.getConfigurationGroup,{id:a}),type:"GET",dataType:"json",async:!1,cache:!1,success:b,error:c})},getAllConfigurationGroup:function(a,b){can.ajax({url:this.generateUrl(this.serviceMethodMap.getAllConfigurationGroup),
type:"GET",dataType:"json",async:!1,cache:!1,success:a,error:b})},getAllConfigurationGroupNames:function(a,b){can.ajax({url:this.generateUrl(this.serviceMethodMap.getAllConfigurationGroupNames),type:"GET",dataType:"json",async:!1,cache:!1,success:a,error:b})},saveSelectedConfiguration:function(a,b,c){$.ajax({url:this.generateUrl(this.serviceMethodMap.saveSelectedConfiguration),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a),success:b,error:c})},saveAllConfiguration:function(a,
b,c){$.ajax({url:this.generateUrl(this.serviceMethodMap.saveAllConfiguration),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a),success:b,error:c})},saveConfigurationGroup:function(a,b,c){$.ajax({url:this.generateUrl(this.serviceMethodMap.saveConfigurationGroup),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a),success:b,error:c})},deleteConfigurationGroup:function(a,b,c){$.ajax({url:this.generateUrl(this.serviceMethodMap.deleteConfigurationGroup),
type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a),success:b,error:c})},publishConfigFiles:function(a,b,c){$.ajax({url:this.generateUrl(this.serviceMethodMap.publishConfigFiles),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a),success:b,error:c})},uploadConfigFiles:function(a,b,c){$.ajax({url:this.generateUrl(this.serviceMethodMap.uploadConfigFiles),type:"POST",contentType:!1,dataType:"json",data:a,processData:!1,
cache:!1,success:b,error:c})},downloadConfigurationGroup:function(a){a=this.generateUrl(this.serviceMethodMap.downloadConfigurationGroup,{id:a});$("<iframe>",{id:"idownloadconfiggroup",src:a}).hide().appendTo("body")}});steal.executed("lib/sentrana/ConfigManager/ConfigManagerModel.js");
can.Control.extend("Sentrana.Controllers.ConfigurationManagerController",{pluginName:"sentrana_configuration_manager",defaults:{basePath:"lib/sentrana/ConfigManager/",configManagerTemplate:"templates/config-manager.ejs",configGroupsTemplate:"templates/config-groups.ejs",configGroupTemplate:"templates/config-group.ejs",configAddGroupTemplate:"templates/add-config-group.ejs",configDuplicateGroupTemplate:"templates/duplicate-config-group.ejs",configAddNewTemplate:"templates/add-new-config.ejs",configConfirmDeleteTemplate:"templates/confirm-delete-config.ejs",
configEditorContainerTemplate:"templates/config-editor-continer.ejs",configUploadTemplate:"templates/config-upload.ejs",serviceMethodMap:{getConfigurationGroup:"GetConfigurationGroup",getAllConfigurationGroup:"GetAllConfigurationGroup",getAllConfigurationGroupNames:"getAllConfigurationGroupNames",saveSelectedConfiguration:"SaveSelectedConfiguration",saveAllConfiguration:"SaveAllConfiguration",saveConfigurationGroup:"SaveConfigurationGroup",deleteConfigurationGroup:"DeleteConfigurationGroup",publishConfigFiles:"PublishConfigFiles",
uploadConfigFiles:"UploadConfigFiles",downloadConfigurationGroup:"DownloadConfigurationGroup"},labels:{groupsHeader:"Configuration Groups",groupName:"configuration group",addGroupBtnLitle:"Add configuration group"},editorsMaxLine:50,editorsMinLine:50,fixedConfigurations:null,model:null,addNewGroup:!0,sidebarBgColor:"#613474",sidebarColor:"#fff"}},{init:function(){this.app=this.options.app;this.selectedGroup=null;this.configurationGroups=[];this.options.model=new Sentrana.Models.ConfigurationManagerModel(this.app,
this.options.serviceMethodMap);this.updateView()},update:function(a){this._super(a);this.app=this.options.app;this.updateView()},updateView:function(){var a=this;this.blockElement(this.element);setTimeout(function(){a.renderConfigManager()},100)},initLeftSideBar:function(a){this.sideBar=this.element.find(".leftcolumn").smartsidebar({title:this.options.labels.groupsHeader,position:"left",dataContainerElement:this.element.find(".contentcolumn"),sidebarWidth:a,autoHeight:!0,autoHeightMargin:$("#main-navbar").outerHeight(!0),
bgColor:this.options.sidebarBgColor,color:this.options.sidebarColor})},showErrorDialog:function(a,b,c){b=this.buildErrorMessage(b,c);b=b.replace("org.xml.sax.SAXParseException;","Invalid content at ").replace("Content is not allowed in prolog.","");Sentrana.AlertDialog(a,b)},buildErrorMessage:function(a,b){var c=a;b.responseText&&(c+=": "+b.responseText);return c},renderConfigManager:function(){this.element.html(can.view(this.options.basePath+this.options.configManagerTemplate,{}));this.isMSIE()&&
this.element.find(".config-editor-container").addClass("class-msie");this.configurationGroups=[];var a=this;this.initLeftSideBar(280);this.options.model.getAllConfigurationGroupNames(function(b){for(var c=0;c<b.length;c++)a.configurationGroups.push(b[c]);a.renderGroupList();a.renderCofigurationEditorContainer();(b=a.options.selectedGroup)?($("#configgroup-"+b).click(),$("#collapse"+b).collapse("show")):$(".panel-collapse:first").collapse("show");a.unBlockElement(a.element)},function(b){a.showErrorDialog("Failed to load",
"Failed to load "+a.options.labels.groupName,b);a.unBlockElement()})},isMSIE:function(){return 0<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./)?!0:!1},".config-editor-tab click":function(a){var b=this.getSelectedConfig().id,c=$(a).find("a").attr("key").split("-")[3];if(b!==c){this.blockElement();this.setSelectedConfig(c);var d=this;setTimeout(function(){ace.edit("editor-"+d.selectedGroup.id+"-"+c).focus();d.unBlockElement()},500);this.clearSearchAndReplaceText()}},
setSelectedConfig:function(a){var b=this.selectedGroup?this.selectedGroup.configurations:null;if(b&&b.length){a||(a=b[0].id);for(var c=0;c<b.length;c++)b[c].id.toLowerCase()===a.toLowerCase()?(b[c].isSelected=!0,this.loadEditorInfo(b[c])):b[c].isSelected=!1}},loadEditorInfo:function(a){if(a&&(this.clearEditorInfo(),a.createBy&&($("#createBy-label").show(),$("#createBy-value").text(a.createBy).show()),a.updateBy&&($("#updateBy-label").show(),$("#updateBy-value").text(a.updateBy).show()),a.createDate&&
($("#createDate-label").show(),$("#createDate-value").text(a.createDate).show()),a.updateDate))$("#updateDate-label").show(),$("#updateDate-value").text(a.updateDate).show()},clearEditorInfo:function(){$("#createBy-label").hide();$("#updateBy-label").hide();$("#createDate-label").hide();$("#updateDate-label").hide();$("#createBy-value").hide();$("#updateBy-value").hide();$("#createDate-value").hide();$("#updateDate-value").hide()},getSelectedConfig:function(){return!this.selectedGroup?null:$.grep(this.selectedGroup.configurations,
function(a){return!0===a.isSelected})[0]},renderCofigurationEditorContainer:function(){this.configurationEditorContainer=this.element.find(".config-editor-container");this.configurationEditorPanel=this.configurationEditorContainer.sentrana_collapsible_container({title:"Configuration Editor",showHeader:!0,showBorder:!0,allowCollapsible:!0}).control().getContainerPanel();this.loadConfigurationsToEditor()},loadConfigurationsToEditor:function(){if(this.selectedGroup){var a=this.isFixedConfiguration(),
b=this.selectedGroup.configurations;if(a){for(var b=[],c=0;c<this.options.fixedConfigurations.length;c++){var d=this.options.fixedConfigurations[c];this.isConfigExists(d)||(d={id:this.makeIdFromName(d),name:d,content:""},0===this.selectedGroup.configurations.length&&(d.isSelected=!0),this.selectedGroup.configurations.push(d))}for(c=0;c<this.selectedGroup.configurations.length;c++){var d=this.selectedGroup.configurations[c],e=this.getFixedConfigIndex(this.makeIdFromName(d.name.toLowerCase()));-1<e&&
b.push({name:this.options.fixedConfigurations[e],id:this.makeIdFromName(d.name.toLowerCase()),isSelected:d.isSelected})}}this.configurationEditorPanel.html(can.view(this.options.basePath+this.options.configEditorContainerTemplate,{groupId:this.selectedGroup.id,configs:b,isFixed:a}));0<this.selectedGroup.configurations.length&&this.populateEditors(this.selectedGroup,this.selectedGroup.configurationType)}else this.configurationEditorPanel.html("")},isFixedConfiguration:function(){return this.options.fixedConfigurations&&
this.options.fixedConfigurations.length},isConfigExists:function(a){for(var b=this.selectedGroup.configurations,c=0;c<b.length;c++)if(b[c].id.toLowerCase()===a.toLowerCase())return!0;return!1},getFixedConfigIndex:function(a){for(var b=this.options.fixedConfigurations,c=0;c<b.length;c++)if(b[c].toLowerCase()===a.toLowerCase())return c;return-1},renderGroupList:function(){this.configurationGroupListlement=this.element.find(".config-group-list");if(this.options.addNewGroup){var a=this;this.sideBar.find(".button_wrapper").prepend('<i title="'+
this.options.labels.addGroupBtnLitle+'" class="fa fa-plus add-config-group"><i/>');this.sideBar.find(".add-config-group").off("click");this.sideBar.find(".add-config-group").on("click",function(){a.addConfigurationGroup();return!1})}this.loadGroupsToPanel()},loadGroupsToPanel:function(){this.configurationGroups.length?(this.selectedGroup=this.configurationGroups[0],this.loadConfigurationsFormserver(this.setSelectedConfig)):this.selectedGroup=null;this.configurationGroupListlement.html(can.view(this.options.basePath+
this.options.configGroupsTemplate,{groups:this.configurationGroups}))},loadConfigurationsFormserver:function(a){var b=this;b.blockElement();this.options.model.getConfigurationGroup(this.selectedGroup.id,function(c){b.selectedGroup.configurations=c.configurations;a.call(b);b.unBlockElement()},function(a){b.showErrorDialog("Failed to load","Failed to load configurations of group "+b.selectedGroup.name,a);b.unBlockElement()})},".config-group-panel click":function(a){a=$(a).attr("id").split("-")[1];if(this.selectedGroup.id!==
a){this.blockElement();var b=this,c=this.getGroupById(a);c&&setTimeout(function(){b.updateSelectedGroup(c);b.unBlockElement()},100)}},blockElement:function(a){this.options.app.blockElement(a||this.element.find(".config-editor-container"),'<div class="loading"><p class="small-waitingwheel"><img src="images/loader-white.gif"/></p></div>')},unBlockElement:function(a){this.options.app.unBlockElement(a||this.element.find(".config-editor-container"))},updateSelectedGroup:function(a){a?this.selectedGroup=
a:0<this.configurationGroups.length&&(this.selectedGroup=this.configurationGroups[0]);this.selectedGroup.configurations?this.displayConfigurations():this.loadConfigurationsFormserver(this.displayConfigurations)},displayConfigurations:function(){var a=this.getSelectedConfig(),b;a&&(b=a.id);this.setSelectedConfig(b);this.loadConfigurationsToEditor();this.element.find(".config-group-panel").removeClass("panel-selected");this.element.find(".config-group-panel#configgroup-"+this.selectedGroup.id).addClass("panel-selected")},
getGroupById:function(a){return $.grep(this.configurationGroups,function(b){return b.id===a})[0]},".menu click":function(a,b){switch(b.target.id.split("_")[0]){case "download":this.options.model.downloadConfigurationGroup(this.selectedGroup.id);break;case "upload":this.uploadConfiguration();break;case "duplicate":this.duplicateGroup();break;case "delete":this.deleteGroup(a)}},uploadConfiguration:function(){var a=this;$("#upload-configuration-dialog").length&&$("#upload-configuration-dialog").remove();
$("<div></div>").attr("id","upload-configuration-dialog").appendTo("body");$("#upload-configuration-dialog").html(can.view(this.options.basePath+this.options.configUploadTemplate,{}));var b=$("#upload-configuration-dialog").sentrana_dialog({app:this,title:"Upload Configuration File(s)",buttons:[{id:"btnUpload",label:"Upload",className:"btn-primary",callback:function(){0<$("#input-config-file-validation-msg")[0].innerHTML.length||(a.populateUploadedConfig(),b.closeDialog())}},{id:"btnClose",label:"Close",
className:"btn-default",callback:function(){b.closeDialog()}}],closeOnEscape:!0,modal:!0,autoOpen:!0}).control();document.getElementById("upload-config-file-input").addEventListener("change",function(){a.validateFiles(this)})},populateUploadedConfig:function(){var a=this,b=new FormData,c=$("#upload-config-file-input")[0].files;$.each(c,function(a,c){b.append("upload-config-file-input"+a,c)});this.options.model.uploadConfigFiles(b,function(b){a.loadConfigsFromFile(b)},function(b){a.showErrorDialog("Failed to upload",
"Failed to upload selected file(s)",b)})},loadConfigsFromFile:function(a){for(var b=0;b<a.length;b++){var c=a[b][0],c=this.makeIdFromName(c.substr(0,c.lastIndexOf("."))),d=a[b][1];this.clearEditor("editor-"+this.selectedGroup.id+"-"+c.toLowerCase());this.populateEditor("editor-"+this.selectedGroup.id+"-"+c.toLowerCase(),d)}},validateFiles:function(a){$("#input-config-file-validation-msg")[0].innerHTML="";var a=a.files,b=a.length,c=this.selectedGroup.configurations.length;if(b<=c)for(c=0;c<b;c++){if(!this.validateFile(a[c])){$("#input-config-file-validation-msg")[0].innerHTML=
"Invalid file name or format!! Please select valid configuration files with valid file name and format.";break}}else $("#input-config-file-validation-msg")[0].innerHTML="Maximum "+c+" configuration files can be uploaded!!"},validateFile:function(a){var b=a.name.substr(a.name.lastIndexOf(".")+1),a=a.name.substr(0,a.name.lastIndexOf("."));return b!==this.selectedGroup.configurationType||!this.isConfigExist(a)?!1:!0},deleteGroup:function(a){var b=this;Sentrana.ConfirmDialog("Confirm Delete","Are you sure to delete?",
function(){b.deleteConfigGroup(a)},function(){return!1},!0)},deleteConfigGroup:function(){var a=this;this.options.model.deleteConfigurationGroup(this.selectedGroup,function(){a.removeGroups(a.selectedGroup.id);a.loadGroupsToPanel();a.updateSelectedGroup()},function(b){a.showErrorDialog("Failed to delete","Failed to delete "+a.options.labels.groupName,b)})},getGroupIndex:function(a){for(var b=0;b<this.configurationGroups.length;b++)if(this.configurationGroups[b].id===a)return b;return-1},removeGroups:function(a){a=
this.getGroupIndex(a);-1<a&&this.configurationGroups.splice(a,1)},duplicateGroup:function(){var a=this;$("#duplicate-configuration-group-dialog").length&&$("#duplicate-configuration-group-dialog").remove();$("<div></div>").attr("id","duplicate-configuration-group-dialog").appendTo("body");$("#duplicate-configuration-group-dialog").html(can.view(this.options.basePath+this.options.configDuplicateGroupTemplate,{groupName:this.options.labels.groupName}));$(".input-duplicate-config-group-error").html("").hide();
var b=$("#duplicate-configuration-group-dialog").sentrana_dialog({app:this,title:"Duplicate "+this.options.labels.groupName,buttons:[{id:"btnAddConfigGroup",label:"Duplicate",className:"btn-primary",callback:function(){a.validateGroupDuplicateInput()&&a.duplicateConfigurationGroup(b)}},{id:"btnCloseConfigGroup",label:"Close",className:"btn-default",callback:function(){b.closeDialog()}}],closeOnEscape:!0,modal:!0,autoOpen:!0}).control();return!1},duplicateConfigurationGroup:function(a){for(var b=$(".input-duplicate-config-group-name").val(),
c=this.makeIdFromName(b),d=this.selectedGroup.configurationType,e=[],h=0;h<this.selectedGroup.configurations.length;h++){var g=this.selectedGroup.configurations;e.push({id:g[h].id,name:g[h].name,content:g[h].content})}var f=this,i={id:c,name:b,configurationType:d,configurations:e};this.options.model.saveConfigurationGroup(i,function(){f.configurationGroups.push(i);f.configurationGroupListlement.find(".panel-group").append(can.view(f.options.basePath+f.options.configGroupTemplate,{group:{id:c,name:b},
colapse:!1}));f.updateSelectedGroup(i);a.closeDialog()},function(a){a=f.buildErrorMessage("Failed to duplicate "+f.options.labels.groupName,a);$(".input-duplicate-config-group-error").html(a).show()})},validateGroupDuplicateInput:function(){var a=$(".input-duplicate-config-group-name").val();return""===$.trim(a)?($(".input-duplicate-config-group-error").html("Please enter "+this.options.labels.groupName+" name").show(),$(".input-duplicate-config-group-name").focus(),!1):this.isGroupExist(a)?($(".input-duplicate-config-group-error").html("Provided name is already in use").show(),
$(".input-duplicate-config-group-name").focus(),!1):!0},addConfigurationGroup:function(){var a=this;$("#add-configuration-group-dialog").length&&$("#add-configuration-group-dialog").remove();$("<div></div>").attr("id","add-configuration-group-dialog").appendTo("body");$("#add-configuration-group-dialog").html(can.view(this.options.basePath+this.options.configAddGroupTemplate,{groupName:this.options.labels.groupName}));$(".input-config-group-error").html("").hide();var b=$("#add-configuration-group-dialog").sentrana_dialog({app:this,
title:"Add new "+this.options.labels.groupName,buttons:[{id:"btnAddConfigGroup",label:"Add",className:"btn-primary",callback:function(){a.validateGroupCreationInput()&&a.addNewConfigurationGroup(b)}},{id:"btnCloseConfigGroup",label:"Close",className:"btn-default",callback:function(){b.closeDialog()}}],closeOnEscape:!0,modal:!0,autoOpen:!0}).control();return!1}," .add-new-configuration click":function(a){var b=this;$("#add-new-configuration-dialog").length&&$("#add-new-configuration-dialog").remove();
$("<div></div>").attr("id","add-new-configuration-dialog").appendTo("body");$("#add-new-configuration-dialog").html(can.view(this.options.basePath+this.options.configAddNewTemplate,{}));$(".input-new-config-error").html("").hide();var c=$("#add-new-configuration-dialog").sentrana_dialog({app:this,title:"Add new configuration",buttons:[{id:"btnAddConfiguration",label:"Add",className:"btn-primary",callback:function(){b.validateConfigCreationInput()&&b.addNewConfiguration(a,c)}},{id:"btnCloseConfiguration",
label:"Close",className:"btn-default",callback:function(){c.closeDialog()}}],closeOnEscape:!0,modal:!0,autoOpen:!0}).control();return!1},validateGroupCreationInput:function(){var a=$(".input-config-group-name").val();return""===$.trim(a)?($(".input-config-group-error").html("Please enter "+this.options.labels.groupName+" name").show(),$(".input-config-group-name").focus(),!1):this.isGroupExist(a)?($(".input-config-group-error").html("Provided name is already in use").show(),$(".input-config-group-name").focus(),
!1):!0},isGroupExist:function(a){return 0<$.grep(this.configurationGroups,function(b){return b.name===a}).length},validateConfigCreationInput:function(){var a=$(".input-new-config-name").val();return""===$.trim(a)?($(".input-new-config-error").html("Please enter configuration name").show(),$(".input-new-config-name").focus(),!1):this.isConfigExist(a)?($(".input-new-config-error").html("Configuration name is already in use").show(),$(".input-new-config-name").focus(),!1):!0},isConfigExist:function(a){return 0<
$.grep(this.selectedGroup.configurations,function(b){return b.name.toLowerCase()===a.toLowerCase()}).length},addNewConfiguration:function(a,b){var c=$(".input-new-config-name").val(),d=this.makeIdFromName(c),e=this,h={id:d,name:c,content:""};this.options.model.saveSelectedConfiguration({id:this.selectedGroup.id,name:this.selectedGroup.name,configurationType:this.selectedGroup.configurationType,configurations:[h]},function(){e.selectedGroup.configurations.push(h);e.setSelectedConfig(d);e.updateSelectedGroup(e.selectedGroup);
b.closeDialog()},function(a){a=e.buildErrorMessage("Failed to add configuration",a);$(".input-config-group-error").html(a).show()})},makeIdFromName:function(a){return a.replace(/[^a-zA-Z0-9]/g,"")},addNewConfigurationGroup:function(a){var b=$(".input-config-group-name").val(),c=this.makeIdFromName(b),d=$('input[name="config-editor-format"]:checked').val(),e=[];if(this.options.fixedConfigurations&&this.options.fixedConfigurations.length)for(var h=0;h<this.options.fixedConfigurations.length;h++){var g=
{id:this.makeIdFromName(this.options.fixedConfigurations[h]),name:this.options.fixedConfigurations[h],content:""};e.push(g)}var f=this,i={id:c,name:b,configurationType:d,configurations:e};this.options.model.saveConfigurationGroup(i,function(){f.configurationGroups.push(i);f.configurationGroupListlement.find(".panel-group").append(can.view(f.options.basePath+f.options.configGroupTemplate,{group:{id:c,name:b},colapse:!1}));f.updateSelectedGroup(i);a.closeDialog()},function(a){a=f.buildErrorMessage("Failed to add "+
f.options.labels.groupName,a);$(".input-config-group-error").html(a).show()})},".close-tab click":function(a){var b=this;$("#confirm-delete-configuration-dialog").length&&$("#confirm-delete-configuration-dialog").remove();$("<div></div>").attr("id","confirm-delete-configuration-dialog").appendTo("body");$("#confirm-delete-configuration-dialog").html(can.view(this.options.basePath+this.options.configConfirmDeleteTemplate,{}));var c=$(a).attr("id").split("-")[3],d=$("#confirm-delete-configuration-dialog").sentrana_dialog({app:this,
title:"Confirm Dlete",buttons:[{id:"btnAddConfiguration",label:"OK",className:"btn-primary",callback:function(){b.removeConfig(c);b.deleteSelectedConfiguration(d)}},{id:"btnCloseConfiguration",label:"Cancel",className:"btn-default",callback:function(){d.closeDialog()}}],closeOnEscape:!0,modal:!0,autoOpen:!0}).control();return!1},deleteSelectedConfiguration:function(a){var b=this;this.options.model.saveAllConfiguration(this.selectedGroup,function(){a.closeDialog();b.reloadGroup()},function(a){b.showErrorDialog("Failed to delete",
"Failed to delete configuration",a)})},reloadGroup:function(){this.setSelectedConfig();this.updateSelectedGroup()},getConfigIndex:function(a){for(var b=this.selectedGroup.configurations,c=0;c<b.length;c++)if(b[c].id.toLowerCase()===a.toLowerCase())return c;return-1},removeConfig:function(a){a=this.getConfigIndex(a);-1<a&&this.selectedGroup.configurations.splice(a,1)},populateEditors:function(a,b){for(var c=a.configurations,d=0;d<c.length;d++)this.isFixedConfiguration()?-1<this.getFixedConfigIndex(this.makeIdFromName(c[d].name.toLowerCase()))&&
(this.clearEditor("editor-"+a.id+"-"+c[d].id.toLowerCase()),this.populateEditor("editor-"+a.id+"-"+c[d].id.toLowerCase(),c[d].content,b)):(this.clearEditor("editor-"+a.id+"-"+c[d].id.toLowerCase()),this.populateEditor("editor-"+a.id+"-"+c[d].id.toLowerCase(),c[d].content,b)),c[d].isSelected&&this.loadEditorInfo(c[d])},clearEditor:function(a){ace.edit(a).setValue("",-1)},populateEditor:function(a,b,c){c||(c=this.selectedGroup.configurationType||"xml");a=ace.edit(a);a.setTheme("ace/theme/chrome");a.getSession().setMode("ace/mode/"+
c);a.setValue(b,-1);a.setOptions({maxLines:this.options.editorsMaxLine});a.setOptions({minLines:this.options.editorsMinLine});a.resize(!0);a.focus()},getConfigById:function(a){return $.grep(this.selectedGroup.configurations,function(b){return b.id.toLowerCase()===a.toLowerCase()})[0]},".save-config click":function(){var a=this.element.find(".config-editor-tab.active");if(a.length){var b=a.find("a").attr("key").split("-")[3],a=ace.edit("editor-"+this.selectedGroup.id+"-"+b).getValue();if(b=this.getConfigById(b)){b.content=
a;var c={id:this.selectedGroup.id,name:this.selectedGroup.name,configurationType:this.selectedGroup.configurationType,configurations:[b]},d=this;this.blockElement();setTimeout(function(){d.saveConfigToServer(c)},100)}}},saveConfigToServer:function(a){var b=this;this.options.model.saveSelectedConfiguration(a,function(){Sentrana.AlertDialog("Saved successfully","Configuration saved successfully");b.unBlockElement()},function(a){b.showErrorDialog("Failed to save","Failed to save configuration",a);b.unBlockElement()})},
".save-all-config click":function(){for(var a=this.selectedGroup.configurations,b=0;b<a.length;b++)this.isFixedConfiguration()?-1<this.getFixedConfigIndex(this.makeIdFromName(a[b].name.toLowerCase()))&&(a[b].content=ace.edit("editor-"+this.selectedGroup.id+"-"+a[b].id.toLowerCase()).getValue()):a[b].content=ace.edit("editor-"+this.selectedGroup.id+"-"+a[b].id.toLowerCase()).getValue();var c={id:this.selectedGroup.id,name:this.selectedGroup.name,configurationType:this.selectedGroup.configurationType,
configurations:a},d=this;this.blockElement();setTimeout(function(){d.saveAllConfigToServer(c)},100)},saveAllConfigToServer:function(a){var b=this;this.options.model.saveAllConfiguration(a,function(){Sentrana.AlertDialog("Saved successfully","All configurations saved successfully");b.unBlockElement()},function(a){b.showErrorDialog("Failed to save","Failed to save configurations",a);b.unBlockElement()})},".publish-config click":function(){var a=this;this.blockElement();setTimeout(function(){a.options.model.publishConfigFiles(a.selectedGroup,
function(){Sentrana.AlertDialog("Published successfully","All configurations published successfully");a.unBlockElement()},function(b){a.showErrorDialog("Failed to publish","Failed to publish configurations",b);a.unBlockElement()})},100)},"#txtSearch keypress":function(a,b){13===b.keyCode&&this.findNextMatch()},"#txtSearch keyup":function(){this.doSearch($("#txtSearch").val());this.disableEnableSearchButtons()},doSearch:function(a){var b=this.getCurrentEditor();b.find("needle",{backwards:!1,wrap:!0,
caseSensitive:!1,range:null,wholeWord:!1,regExp:!1});b.$search.set({needle:a});(a=b.$search.find(b.getSession()))&&b.getSession().getSelection().setSelectionRange(a,!1)},disableEnableSearchButtons:function(){var a=$("#txtSearch").val();$("#txtReplace").val();""===a?($(".ace-search-btn-left").prop("disabled",!0),$(".ace-search-btn-right").prop("disabled",!0),$("#btnReplace").prop("disabled",!0),$("#btnReplaceAll").prop("disabled",!0)):($(".ace-search-btn-left").prop("disabled",!1),$(".ace-search-btn-right").prop("disabled",
!1),$("#btnReplace").prop("disabled",!1),$("#btnReplaceAll").prop("disabled",!1))},getCurrentEditor:function(){var a=this.getSelectedConfig();return ace.edit("editor-"+this.selectedGroup.id+"-"+a.id.toLowerCase())},findNextMatch:function(){var a=$("#txtSearch").val(),b=this.getCurrentEditor();b.find("needle",{backwards:!0,wrap:!0,caseSensitive:!1,range:null,wholeWord:!1,regExp:!1});b.$search.set({needle:a});b.findNext();(a=b.$search.find(b.getSession()))&&b.getSession().getSelection().setSelectionRange(a,
!1)},".ace-search-btn-left click":function(){this.findPrevMatch()},findPrevMatch:function(){var a=$("#txtSearch").val(),b=this.getCurrentEditor();b.find("needle",{backwards:!1,wrap:!0,caseSensitive:!1,range:null,wholeWord:!1,regExp:!1});b.$search.set({needle:a});b.findPrevious();(a=b.$search.find(b.getSession()))&&b.getSession().getSelection().setSelectionRange(a,!1)},".ace-search-btn-right click":function(){this.findNextMatch()},"#btnReplace click":function(){this.getCurrentEditor().replace($("#txtReplace").val())},
"#btnReplaceAll click":function(){this.getCurrentEditor().replaceAll($("#txtReplace").val())},".search-box-close click":function(){$("#txtSearch").val("");this.disableEnableSearchButtons();this.doSearch("")},".replace-box-close click":function(){$("#txtReplace").val("")},clearSearchAndReplaceText:function(){$("#txtSearch").val("");$("#txtReplace").val("");this.disableEnableSearchButtons();this.doSearch("")}});steal.executed("lib/sentrana/ConfigManager/ConfigManagerController.js");
ace.define("ace/theme/chrome",["require","exports","module","ace/lib/dom"],function(a,b){b.isDark=!1;b.cssClass="ace-chrome";b.cssText='.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';
a("../lib/dom").importCssString(b.cssText,b.cssClass)});steal.executed("lib/external/ace-editor/theme-chrome.js");
ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(a,b){var c=a("../lib/oop"),d=a("./text_highlight_rules").TextHighlightRules,e=function(){this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.xml-decl.xml","keyword.xml-decl.xml"],regex:"(<\\?)(xml)(?=[\\s])",next:"xml_decl",caseInsensitive:!0},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)([-_a-zA-Z0-9]+)",
next:"processing_instruction"},{token:"comment.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],xml_decl:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:"(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"},{token:"keyword.operator.decl-attribute-equals.xml",
regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],processing_instruction:[{token:"punctuation.instruction.xml",regex:"\\?>",next:"start"},{defaultToken:"instruction.xml"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",
regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)([-_a-zA-Z0-9]+)",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.xml",regex:"--\>",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",
regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+)",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",
regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:"(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],
attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]};this.constructor===e&&this.normalizeRules()};(function(){this.embedTagRules=function(a,b,c){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml",
"meta.tag."+c+".tag-name.xml"],regex:"(<)("+c+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:b+"start"}]});this.$rules[c+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(a,b,c){c.splice(0);return this.token}}];this.embedRules(a,b,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+c+".tag-name.xml"],regex:"(</)("+c+"(?=\\s|>|$))",next:c+"-end"},{token:"string.cdata.xml",
regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(d.prototype);c.inherits(e,d);b.XmlHighlightRules=e});
ace.define("ace/mode/behaviour/xml","require exports module ace/lib/oop ace/mode/behaviour ace/token_iterator ace/lib/lang".split(" "),function(a,b){function c(a,b){return a.type.lastIndexOf(b+".xml")>-1}var d=a("../../lib/oop"),e=a("../behaviour").Behaviour,h=a("../../token_iterator").TokenIterator;a("../../lib/lang");var g=function(){this.add("string_dquotes","insertion",function(a,b,d,e,g){if(g=='"'||g=="'"){a=e.doc.getTextRange(d.getSelectionRange());if(a!==""&&a!=="'"&&a!='"'&&d.getWrapBehavioursEnabled())return{text:g+
a+g,selection:false};a=d.getCursorPosition();d=e.doc.getLine(a.row).substring(a.column,a.column+1);a=new h(e,a.row,a.column);e=a.getCurrentToken();if(d==g&&(c(e,"attribute-value")||c(e,"string")))return{text:"",selection:[1,1]};e||(e=a.stepBackward());if(e){for(;c(e,"tag-whitespace")||c(e,"whitespace");)e=a.stepBackward();a=!d||d.match(/\s/);if(c(e,"attribute-equals")&&(a||d==">")||c(e,"decl-attribute-equals")&&(a||d=="?"))return{text:g+g,selection:[1,1]}}}});this.add("string_dquotes","deletion",
function(a,b,c,d,e){a=d.doc.getTextRange(e);if(!e.isMultiLine()&&(a=='"'||a=="'")&&d.doc.getLine(e.start.row).substring(e.start.column+1,e.start.column+2)==a){e.end.column++;return e}});this.add("autoclosing","insertion",function(a,b,d,e,g){if(g==">"){a=d.getCursorPosition();e=new h(e,a.row,a.column);if((b=e.getCurrentToken()||e.stepBackward())&&(c(b,"tag-name")||c(b,"tag-whitespace")||c(b,"attribute-name")||c(b,"attribute-equals")||c(b,"attribute-value"))&&!c(b,"reference.attribute-value")){if(c(b,
"attribute-value")){d=b.value.charAt(0);if(d=='"'||d=="'"){var g=b.value.charAt(b.value.length-1),n=e.getCurrentTokenColumn()+b.value.length;if(n>a.column||n==a.column&&d!=g)return}}for(;!c(b,"tag-name");)b=e.stepBackward();d=e.getCurrentTokenRow();g=e.getCurrentTokenColumn();if(!c(e.stepBackward(),"end-tag-open")){e=b.value;d==a.row&&(e=e.substring(0,a.column-g));if(!this.voidElements.hasOwnProperty(e.toLowerCase()))return{text:"></"+e+">",selection:[1,1]}}}}});this.add("autoindent","insertion",
function(a,b,c,d,e){if(e=="\n"){a=c.getCursorPosition();d.getLine(a.row);c=new h(d,a.row,a.column);if((e=c.getCurrentToken())&&e.type.indexOf("tag-close")!==-1){for(;e&&e.type.indexOf("tag-name")===-1;)e=c.stepBackward();if(e){var g=e.value,b=c.getCurrentTokenRow();if((e=c.stepBackward())&&e.type.indexOf("end-tag")===-1&&this.voidElements&&!this.voidElements[g]){a=d.getTokenAt(a.row,a.column+1);b=d.getLine(b);b=this.$getIndent(b);d=b+d.getTabString();return a&&a.value==="</"?{text:"\n"+d+"\n"+b,selection:[1,
d.length,1,d.length]}:{text:"\n"+d}}}}}})};d.inherits(g,e);b.XmlBehaviour=g});
ace.define("ace/mode/folding/xml","require exports module ace/lib/oop ace/lib/lang ace/range ace/mode/folding/fold_mode ace/token_iterator".split(" "),function(a,b){function c(a,b){return a.type.lastIndexOf(b+".xml")>-1}var d=a("../../lib/oop");a("../../lib/lang");var e=a("../../range").Range,h=a("./fold_mode").FoldMode,g=a("../../token_iterator").TokenIterator,f=b.FoldMode=function(a,b){h.call(this);this.voidElements=a||{};this.optionalEndTags=d.mixin({},this.voidElements);b&&d.mixin(this.optionalEndTags,
b)};d.inherits(f,h);var i=function(){this.tagName="";this.selfClosing=this.closing=false;this.start={row:0,column:0};this.end={row:0,column:0}};(function(){this.getFoldWidget=function(a,b,c){var d=this._getFirstTagInLine(a,c);return!d?"":d.closing||!d.tagName&&d.selfClosing?b=="markbeginend"?"end":"":!d.tagName||d.selfClosing||this.voidElements.hasOwnProperty(d.tagName.toLowerCase())||this._findEndTagInLine(a,c,d.tagName,d.end.column)?"":"start"};this._getFirstTagInLine=function(a,b){for(var d=a.getTokens(b),
e=new i,f=0;f<d.length;f++){var g=d[f];if(c(g,"tag-open")){e.end.column=e.start.column+g.value.length;e.closing=c(g,"end-tag-open");g=d[++f];if(!g)break;e.tagName=g.value;e.end.column=e.end.column+g.value.length;for(f++;f<d.length;f++){g=d[f];e.end.column=e.end.column+g.value.length;if(c(g,"tag-close")){e.selfClosing=g.value=="/>";break}}return e}if(c(g,"tag-close")){e.selfClosing=g.value=="/>";return e}e.start.column=e.start.column+g.value.length}return null};this._findEndTagInLine=function(a,b,
d,e){for(var a=a.getTokens(b),f=b=0;f<a.length;f++){var g=a[f],b=b+g.value.length;if(!(b<e)&&c(g,"end-tag-open")&&(g=a[f+1])&&g.value==d)return true}return false};this._readTagForward=function(a){var b=a.getCurrentToken();if(!b)return null;var d=new i;do if(c(b,"tag-open")){d.closing=c(b,"end-tag-open");d.start.row=a.getCurrentTokenRow();d.start.column=a.getCurrentTokenColumn()}else if(c(b,"tag-name"))d.tagName=b.value;else if(c(b,"tag-close")){d.selfClosing=b.value=="/>";d.end.row=a.getCurrentTokenRow();
d.end.column=a.getCurrentTokenColumn()+b.value.length;a.stepForward();return d}while(b=a.stepForward());return null};this._readTagBackward=function(a){var b=a.getCurrentToken();if(!b)return null;var d=new i;do{if(c(b,"tag-open")){d.closing=c(b,"end-tag-open");d.start.row=a.getCurrentTokenRow();d.start.column=a.getCurrentTokenColumn();a.stepBackward();return d}if(c(b,"tag-name"))d.tagName=b.value;else if(c(b,"tag-close")){d.selfClosing=b.value=="/>";d.end.row=a.getCurrentTokenRow();d.end.column=a.getCurrentTokenColumn()+
b.value.length}}while(b=a.stepBackward());return null};this._pop=function(a,b){for(;a.length;){var c=a[a.length-1];if(!b||c.tagName==b.tagName)return a.pop();if(this.optionalEndTags.hasOwnProperty(b.tagName))break;else if(this.optionalEndTags.hasOwnProperty(c.tagName))a.pop();else return null}};this.getFoldWidgetRange=function(a,b,c){var d=this._getFirstTagInLine(a,c);if(!d)return null;b=[];if(!d.closing&&!d.selfClosing){a=new g(a,c,d.start.column);for(d={row:c,column:d.start.column+d.tagName.length+
2};c=this._readTagForward(a);){if(c.selfClosing)if(b.length)continue;else{c.start.column=c.start.column+(c.tagName.length+2);c.end.column=c.end.column-2;return e.fromPoints(c.start,c.end)}if(c.closing){this._pop(b,c);if(b.length==0)return e.fromPoints(d,c.start)}else b.push(c)}}else{a=new g(a,c,d.end.column);for(d={row:c,column:d.start.column};c=this._readTagBackward(a);){if(c.selfClosing)if(b.length)continue;else{c.start.column=c.start.column+(c.tagName.length+2);c.end.column=c.end.column-2;return e.fromPoints(c.start,
c.end)}if(c.closing)b.push(c);else{this._pop(b,c);if(b.length==0){c.start.column=c.start.column+(c.tagName.length+2);return e.fromPoints(c.start,d)}}}}}}).call(f.prototype)});
ace.define("ace/mode/xml","require exports module ace/lib/oop ace/lib/lang ace/mode/text ace/mode/xml_highlight_rules ace/mode/behaviour/xml ace/mode/folding/xml".split(" "),function(a,b){var c=a("../lib/oop"),d=a("../lib/lang"),e=a("./text").Mode,h=a("./xml_highlight_rules").XmlHighlightRules,g=a("./behaviour/xml").XmlBehaviour,f=a("./folding/xml").FoldMode,i=function(){this.HighlightRules=h;this.$behaviour=new g;this.foldingRules=new f};c.inherits(i,e);(function(){this.voidElements=d.arrayToMap([]);
this.blockComment={start:"<\!--",end:"--\>"};this.$id="ace/mode/xml"}).call(i.prototype);b.Mode=i});steal.executed("lib/external/ace-editor/mode-xml.js");
can.Control.extend("Sentrana.Controllers.PivotAnalysis",{pluginName:"sentrana_pivot_analysis",defaults:{app:null}},{init:function(){this.updateView();this.updateChartView()},updateChartView:function(){this.currentView="chart";this.$pivotChart.show();this.$pivotTable.hide();this.$pivotChart.control()&&this.$pivotChart.control().destroy();this.$pivotChart.sentrana_pivot_chart_control({app:this.options.app,data:this.options.data});this.showHideMenu(this.$configurePivotMenu,!1);this.showHideMenu(this.$exportChartMenu,
!0);this.showHideMenu(this.$exportTableMenu,!1);this.$nextButton.hide();this.$prevButton.hide()},showHideMenu:function(a,b){a&&(b?a.show():a.hide())},updateView:function(){this.element.html(can.view("templates/pivot-table-container.ejs"));this.element.find("button").button();this.pivotTableColupsible=this.element.find(".pivot-table-container-header").sentrana_collapsible_container({title:"Pivot Analysis",showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:this.resizePivotControl}).control();
this.pivotTableColupsible.addButtonToBar({title:"Show table view",cls:"fa-table",eventType:"change_pivot_view",dropdown:!1});this.pivotTableColupsible.addButtonToBar({title:"Pivot options",cls:"fa-tasks",eventType:"pivot_options",dropdown:!0,menuItems:[{id:"configure_pivot",name:"Configure Pivot Analysis"},{id:"maximize_pivot",name:"Maximize Pivot Analysis"},{id:"export_pivot_table",name:"Download pivot table"},{id:"export_pivot_chart",name:"Download pivot chart",submenuItems:[{id:"exportChart_png",
name:"Download PNG"},{id:"exportChart_jpeg",name:"Download JPEG"},{id:"exportChart_pdf",name:"Download PDF"}]}]});this.pivotTableColupsible.addButtonToBar({title:"Previous",cls:"fa-caret-left",eventType:"move_prev",dropdown:!1});this.pivotTableColupsible.addButtonToBar({title:"Next",cls:"fa-caret-right",eventType:"move_next",dropdown:!1});this.$pivotChart=this.element.find(".pivot-chart");this.$pivotTable=this.element.find("#pivot-table");this.$configurePivotMenu=$('.container-button-menu[elementid="configure_pivot"]');
this.$exportChartMenu=$('.container-button-menu[elementid="exportChart_png"]').closest(".dropdown-submenu");this.$exportTableMenu=$('.container-button-menu[elementid="export_pivot_table"]');this.$nextButton=this.element.find(".fa-caret-right").closest(".cc-button");this.$prevButton=this.element.find(".fa-caret-left").closest(".cc-button")},updateTableView:function(){this.currentView="table";this.$pivotChart.hide();this.$pivotTable.show();this.pivotData=this.getPivotData();this.maximizePivotDlg=this.element.find("#maximize-pivot-dlg").sentrana_dialogs_maximize_pivot({app:this.options.app,
dialogDimension:Sentrana.getMaxViewDialogDimension(),pivotData:this.getPivotData()}).control();this.pivotControl&&!this.pivotControl._destroyed&&this.pivotControl.destroy();this.pivotControl=this.element.find(".pivot-table-renderer").sentrana_pivot_control({app:this.options.app,structure:this.getInitialStructure(),pivotData:this.getPivotData(),pivotElement:"#pivot-table",pivotContainer:"pivot-table",pivotId:"pivot"}).control();this.showHideMenu(this.$configurePivotMenu,!0);this.showHideMenu(this.$exportChartMenu,
!1);this.showHideMenu(this.$exportTableMenu,!0);this.$nextButton.show();this.$prevButton.show()},resizePivotControl:function(){"table"===this.currentView?$$("pivot").resize():this.$pivotChart&&this.$pivotChart.control()&&this.$pivotChart.control().resizePivotControl()}," change_pivot_view":function(a){var b,c,d;switch(this.currentView){case "chart":this.updateTableView();b="Show table view";d="Show chart view";c="fa-bar-chart-o";break;default:this.updateChartView(),b="Show chart view",d="Show table view",
c="fa-table"}a=$(a).find(".cc-button[title='"+b+"']");b=a.find(".fa");b.removeClass("fa-bar-chart-o fa-table");b.addClass(c);a.attr("title",d)}," pivot_options":function(a,b,c){switch(c.type){case "configure_pivot":this.pivotControl.configurePivot();break;case "maximize_pivot":"table"===this.currentView?this.maximizePivotDlg.open(this.pivotControl.getStructure()):this.maximizeChart();break;case "export_pivot_table":this.pivotControl.exportToExcel();break;case "exportChart_png":this.exportPivotChart("png");
break;case "exportChart_jpeg":this.exportPivotChart("jpeg");break;case "exportChart_pdf":this.exportPivotChart("pdf")}}," move_prev":function(){this.options.app.handleUserInteraction();this.pivotControl.showPreviousItems()}," move_next":function(){this.options.app.handleUserInteraction();this.pivotControl.showNextItems()},maximizeChart:function(){this.$pivotChart&&this.$pivotChart.control()&&this.$pivotChart.control().maximizeChart()},exportPivotChart:function(a){this.options.app.handleUserInteraction();
this.$pivotChart&&this.$pivotChart.control()&&this.$pivotChart.control().exportChart(a)},getPivotData:function(){for(var a=this.options.data.colInfos,b=this.options.data.rows,c,d=[],e=0;e<b.length;e++){c={};for(var h=0;h<a.length;h++)c[a[h].title]="METRIC"===a[h].colType?b[e].cells[h].rawValue:b[e].cells[h].fmtValue;d.push(c)}return d},getColumn:function(a,b){for(var c=this.options.data.colInfos,d=0;d<c.length;d++)if(c[d].colType===a&&b!=d)return{col:c[d],index:d}},getInitialStructure:function(){var a=
this.getColumn("ATTRIBUTE",-1),b=[a.col.title],a=[this.getColumn("ATTRIBUTE",a.index).col.title],c=[{name:this.getColumn("METRIC",-1).col.title,operation:"sum",format:webix.Number.format}];return{rows:b,columns:a,values:c,filters:[]}}});steal.executed("js/controllers/PivotAnalysisController.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.MaximizePivot",{pluginName:"sentrana_dialogs_maximize_pivot",defaults:{title:"Maximize pivot",autoOpen:!1}},{init:function(a,b){this._super(a,b);this.$buttonContainer=this.element.find(".maximized-pivot-dialogs-buttons");this.prepareForm()},prepareForm:function(){this.element.find(".modal-header").hide();this.element.find(".modal-footer").hide();this.element.find(".modal-dialog").width(this.options.dialogDimension.width+
"px").css("margin","auto").css("margin-top","5px");this.element.find(".modal-content").css("min-height",this.options.dialogDimension.height+"px");this.configurePivotDlg=this.element.find("#configure-pivot-dlg-max").sentrana_dialogs_configure_pivot({app:this.options.app,allColumns:this.options.allColumns,parent:this}).control();this.createButtons()},createButtons:function(){var a=this;this.$buttonContainer.append("templates/collapsibleContainerButton.ejs",{title:"Previous",cls:"fa-caret-left",btnStyle:"",
eventType:"move_prev",dropdown:!1});this.$buttonContainer.append("templates/collapsibleContainerButton.ejs",{title:"Next",cls:"fa-caret-right",btnStyle:"",eventType:"move_next",dropdown:!1});this.$buttonContainer.append("templates/collapsibleContainerButton.ejs",{title:"Configure",cls:"fa-cogs",btnStyle:"",eventType:"configure_pivot",dropdown:!1});this.$buttonContainer.append("templates/collapsibleContainerButton.ejs",{title:"Export",cls:"fa-cloud-download",btnStyle:"",eventType:"export_all",dropdown:!1});
this.$buttonContainer.append("templates/collapsibleContainerButton.ejs",{title:"Close",cls:"fa-times",btnStyle:"",eventType:"close_dialog",dropdown:!1});this.$buttonContainer.append('<div class="clear"></div>');var b=this.$buttonContainer.find(".fa-times").closest(".cc-button");b.off("click");b.on("click",function(){a.origFocus=document.activeElement;a.closeDialog();return!1});b=this.$buttonContainer.find(".fa-cogs").closest(".cc-button");b.off("click");b.on("click",function(){a.origFocus=document.activeElement;
a.configurePivot()});b=this.$buttonContainer.find(".fa-cloud-download").closest(".cc-button");b.off("click");b.on("click",function(){a.origFocus=document.activeElement;a.exportToExcel()});b=this.$buttonContainer.find(".fa-caret-left").closest(".cc-button");b.off("click");b.on("click",function(){a.origFocus=document.activeElement;a.showPrevious()});b=this.$buttonContainer.find(".fa-caret-right").closest(".cc-button");b.off("click");b.on("click",function(){a.origFocus=document.activeElement;a.showNext()})},
showNext:function(){this.pivotControl.showNextItems()},showPrevious:function(){this.pivotControl.showPreviousItems()},configurePivot:function(){this.pivotControl.configurePivot()},exportToExcel:function(){this.pivotControl.exportToExcel()},open:function(a){this.openDialog();this.pivotControl&&!this.pivotControl._destroyed&&this.pivotControl.destroy();this.pivotControl=this.element.find(".maximized-pivot-container").sentrana_pivot_control({app:this.options.app,structure:a,pivotData:this.options.pivotData,
pivotElement:"#maximized-pivot-cntr",pivotContainer:"maximized-pivot-cntr",pivotId:"pivot-max",height:this.options.dialogDimension.height-50}).control()}})});steal.executed("js/controllers/MaximizePivotDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.ConfigurePivot",{pluginName:"sentrana_dialogs_configure_pivot",defaults:{title:"Configure pivot analysis",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b)},open:function(a){this.element.find(".configure-pivot-dlg-content").html(can.view("templates/pivot-elements.ejs",{fields:this.getRemainingColumns(a),
filters:a.filters,cols:a.columns,rows:a.rows,values:a.values}));this.makeItemSortable();this.openDialog()},getRemainingColumns:function(a){for(var b=[],c=0;c<this.options.allColumns.length;c++){var d=this.options.allColumns[c].title;this.isAddedToStructure(d,a)||b.push(d)}return b},isAddedToStructure:function(a,b){for(var c=0;c<b.rows.length;c++)if(b.rows[c]===a)return!0;for(c=0;c<b.filters.length;c++)if(b.filters[c].name===a)return!0;for(c=0;c<b.columns.length;c++)if(b.columns[c]===a)return!0;for(c=
0;c<b.values.length;c++)if(b.values[c].name===a)return!0;return!1},makeItemSortable:function(){this.element.find(".pivot-elements").sortable({items:".pivot-element",connectWith:".pivot-fields-connected"}).disableSelection()},handleCANCEL:function(){this.closeDialog()},handleOK:function(){this.closeDialog();this.options.parent.renderTable(this.getStructure())},getStructure:function(){for(var a=this.getSelectedItems(".pivot-filters"),b=[],c=0;c<a.length;c++)b.push({name:a[c].title,type:"multiselect"});
for(var d=this.getSelectedItems(".pivot-columns"),a=[],c=0;c<d.length;c++)a.push(d[c].title);for(var e=this.getSelectedItems(".pivot-rows"),d=[],c=0;c<e.length;c++)d.push(e[c].title);for(var e=this.getSelectedItems(".pivot-values"),h=[],c=0;c<e.length;c++)h.push({name:e[c].title,operation:"sum"});return{rows:d,columns:a,values:h,filters:b}},getSelectedItems:function(a){var b=this.options.allColumns,c=[];this.element.find(a).find(".pivot-element").each(function(){var a=$(this).attr("name"),e=$.grep(b,
function(b){return b.title===a});c.push(e[0])});return c},"button.close click":function(a,b){b.preventDefault();this.handleCANCEL()}})});steal.executed("js/controllers/ConfigurePivotDialog.js");
can.Control.extend("Sentrana.Controllers.PivotControl",{pluginName:"sentrana_pivot_control",defaults:{app:null,structure:{},pivotData:[],pivotElement:"",pivotContainer:"",pivotId:"",height:500,width:"auto",columnInfo:[]}},{init:function(){this.resetParameters();this.updateView(this.options.structure,this.getDataForCurrentPage(this.options.structure))},resetParameters:function(){this.nextItemIndex=0;this.pageSize=10;this.pageWiseItems={};this.currentPageIndex=0;this.sortData(this.options.pivotData,
this.options.structure.rows[0])},enableDisableNavigationButtons:function(){var a=this.element.parent().find(".fa-caret-right").closest(".btn"),b=this.element.parent().find(".fa-caret-left").closest(".btn");this.options.pivotData.length==this.pageWiseItems[this.currentPageIndex].length?(b.addClass("disabled"),a.addClass("disabled")):0===this.currentPageIndex&&this.currentPageIndex<Object.keys(this.pageWiseItems).length?(b.addClass("disabled"),a.removeClass("disabled")):this.nextItemIndex===this.options.pivotData.length?
(b.removeClass("disabled"),a.addClass("disabled")):(b.removeClass("disabled"),a.removeClass("disabled"))},getDataForCurrentPage:function(a){var b=this.pageWiseItems[this.currentPageIndex];if(b)return b;for(var a=a.rows[0],b=[],c=0;c<this.pageSize&&this.nextItemIndex<this.options.pivotData.length;)b.push(this.options.pivotData[this.nextItemIndex]),(this.nextItemIndex===this.options.pivotData.length-1||this.options.pivotData.length<=this.pageSize||b[b.length-1][a]!==this.options.pivotData[this.nextItemIndex+
1][a])&&c++,this.nextItemIndex++;return this.pageWiseItems[this.currentPageIndex]=b},updateView:function(a,b){this.renderTable(a,b);this.enableDisableNavigationButtons()},showNextItems:function(){if(!this.element.parent().find(".fa-caret-right").closest(".btn").hasClass("disabled")){var a=this.pageWiseItems[this.currentPageIndex+1];a&&(this.nextItemIndex+=a.length);this.currentPageIndex+=1;this.updateView(this.options.structure,this.getDataForCurrentPage(this.options.structure))}},showPreviousItems:function(){if(!this.element.parent().find(".fa-caret-left").closest(".btn").hasClass("disabled")){var a=
this.pageWiseItems[this.currentPageIndex];a&&(this.nextItemIndex-=a.length);this.currentPageIndex-=1;this.updateView(this.options.structure,this.getDataForCurrentPage(this.options.structure))}},sortData:function(a,b){a.sort(function(a,d){var e=a[b].toLowerCase(),h=d[b].toLowerCase();return e==h?0:e>h?1:-1})},configurePivot:function(){$$(this.options.pivotId).configure()},exportToExcel:function(){$$(this.options.pivotId).toExcel(Sentrana.Controllers.BIQController.generateUrl(Sentrana.Enums.PIVOT_EXPORT_URL))},
getStructure:function(){return $$(this.options.pivotId).getStructure()},renderTable:function(a,b){this.element.find(this.options.pivotElement).html("");var c=this;this.options.app.blockElement(this.element.find(this.options.pivotElement),'<div class="loading" ><p class="small-waitingwheel"><img src="images/loader-white.gif"/>&nbsp;Loading pivot analysis...</p></div>');webix.i18n.pivot={apply:"OK",cancel:"CANCEL",columns:"Columns",count:"count",fields:"Fields",filters:"Filters",max:"max",min:"min",
operationNotDefined:"Operation is not defined",pivotMessage:'<div class="btn btn-sm btn-collapse-expand-all" state="1"><span class="fa fa-minus-square"></span> Collapse All</div>',rows:"Rows",select:"select",sum:"sum",text:"text",values:"Values",windowTitle:"Pivot Configuration",windowMessage:""};setTimeout(function(){webix.ui({datatable:{css:"pivotrows",select:!1,select:!1,resizeColumn:!1,resizeRow:!1,on:{onBeforeRender:function(){c.adjustTableColumnWidth()}}},popup:{position:"center",head:{view:"toolbar",
cols:[{view:"button",label:"Apply",width:80,click:function(){var a=$$(c.options.pivotId).getConfigWindow(),b=a.getStructure();0===b.rows.length?Sentrana.AlertDialog("Not enough rows selected.","Please select at least one row for analysis."):($.each(b.values,function(a,b){b.format=function(a){return a||"0.00"}}),c.options.structure=b,c.resetParameters(),c.updateView(b,c.getDataForCurrentPage(b)),a.hide())}},{view:"button",label:"Cancel",width:80,click:function(){$$(c.options.pivotId).getConfigWindow().hide()}}]},
on:{onShow:function(){$($(".webix_el_button button:contains('Cancel')")).removeClass("webixtype_base").addClass("btn btn-default");$($(".webix_el_button button:contains('Apply')")).removeClass("webixtype_base").addClass("btn btn-primary")}}},view:"pivot",container:c.options.pivotContainer,id:c.options.pivotId,height:c.options.height,width:c.options.width,total:!0,data:b,structure:a,on:{onHeaderInit:function(a){for(var b=1;b<a.length;b++)a[b].template=function(a,b,c){return c||"0.00"}}},ready:function(){for(var a=
this.$$("data"),b=a.config.columns,h=1;h<b.length;h++)b[h].cssFormat=function(){return"text-right"};a.refresh();c.disableBuiltInDialog();c.options.app.unBlockElement(c.element.find(c.options.pivotElement));$$(c.options.pivotId).$$("data").attachEvent("onAfterRender",function(){c.disableBuiltInDialog();c.showHideCollapseExpandButton()});$$(c.options.pivotId).$$("data").attachEvent("onColumnResize",function(){c.disableBuiltInDialog();c.showHideCollapseExpandButton()});c.showHideCollapseExpandButton()}})},
450)},adjustTableColumnWidth:function(){var a=$$(this.options.pivotId).$$("data").config.columns.length;$$(this.options.pivotId).$$("data").config.columns[a-1].fillspace=!0},showHideCollapseExpandButton:function(){1<$$(this.options.pivotId).getFields().rows.length?this.element.find(".btn-collapse-expand-all").show():this.element.find(".btn-collapse-expand-all").hide()},disableBuiltInDialog:function(){this.element.find(".btn-collapse-expand-all").closest("tr").removeAttr("section");this.element.find(".btn-collapse-expand-all").parent().css("cursor",
"default")},".webix_el_select select change":function(){var a=!1;$(".webix_el_select select").each(function(){""!==$(this).val()&&(a=!0)});if(a){var b=this.element.parent().find(".fa-caret-right").closest(".btn");this.element.parent().find(".fa-caret-left").closest(".btn").addClass("disabled");b.addClass("disabled")}else this.enableDisableNavigationButtons()},".btn-collapse-expand-all click":function(a){var b=$(a).attr("state")^1,c=b?"minus":"plus",d=b?"Collapse":"Expand";"0"===$(a).attr("state")?
$$(this.options.pivotId).$$("data").openAll():$$(this.options.pivotId).$$("data").closeAll();c="fa fa-"+c+"-square";$(a).html('<span class="'+c+'"></span> '+d+" All");$(a).attr("state",b)}});steal.executed("js/controllers/PivotController.js");
can.Model.extend("Sentrana.Models.SavedFilterGroupInfo",{create:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("SavedFilterGroup"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},destroy:function(a,b,c){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("SavedFilterGroup/"+
a),type:"DELETE",headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:b,error:c})},update:function(a,b,c,d){return $.ajax({url:Sentrana.Controllers.BIQController.generateUrl("SavedFilterGroup/"+a),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(b),headers:{sessionID:Sentrana.Controllers.BIQController.sessionID,repositoryID:Sentrana.Controllers.BIQController.repositoryID},success:c,error:d})}},
{init:function(a){this.app=a}});steal.executed("js/models/SavedFilterGroupModel.js");
can.Observe.extend("Sentrana.Models.SavedFilter",{},{init:function(a){this.app=a.app;var b=a.dwRepository||a.app.dwRepository,c=a.id||a.name;this.setup({filters:a.filters||[],name:a.name||"",hid:b.makeHtmlIdForSavedFilterGroup(c),attrHID:b.makeHtmlIdForSavedFilterGroup(c),type:"ELEMENT",dimName:"GroupedFilter",dataSource:a.dataSource,id:a.id})},getIndexOfFilter:function(a){for(var b=0;b<this.filters.length;b++)if(this.filters[b].hid===a.hid)return b;return-1},getFiltersGroupBy:function(){var a={},
b;$.each(this.filters,function(c,d){b=d.attrHID;a[b]||(a[b]=[]);a[b].push(d)});return a}});steal.executed("js/observes/SavedFilterObserve.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.SavedFilters",{pluginName:"sentrana_dialogs_saved_filters",defaults:{title:"Saved Filters",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this.loadForm();this.buildElementsUI();this._super(a,b);this.setColumnName();this.updateFilterWindow();this.enableDissableOKButton()},handleCANCEL:function(){this.closeDialog()},
handleOK:function(){if(0>=this.options.savedFilter.filters.length)this.updateStatus(!1,"Please select at least one filter!","fail");else if(this.isValidName()){var a=this.element.find(".saved-filter-editor-filter-name").val();if(this.isFilterExistsWithSameName(a))this.updateStatus(!1,"Saved filter name already in use!","fail");else if(this.updateProperties(a),this.$reusableCheckbox.is(":checked")){this.updateStatus(!0,"Saving filter group...");var b=this;(new Sentrana.Models.SavedFilterGroupInfo({id:this.options.savedFilter.id,
name:this.options.savedFilter.name,dataSource:this.options.app.dwRepository.id,filterIds:$.map(this.options.savedFilter.filters,function(a){return a.oid})})).save().done(function(a){a=b.options.app.dwRepository.getSavedFilterGroupModel(a);b.addToRepotDefinition(a)}).fail(function(a){var d=a.getResponseHeader("ErrorCode"),a=a.getResponseHeader("ErrorMsg");d===Sentrana.Enums.ErrorCode.SAVED_FILTER_GROUP_NAME_IN_USE?b.updateStatus(!1,a,"fail"):b.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.save_operation.failed),
"fail")})}else this.options.app.dwRepository.objectMap[this.options.savedFilter.hid]=this.options.savedFilter,this.addToRepotDefinition(this.options.savedFilter)}},addToRepotDefinition:function(a){this.options.reportDefnModel.deselectObject(this.oldHid);this.options.reportDefnModel.deselectObject(a.hid,"update");this.options.reportDefnModel.selectObject(a.hid);this.closeDialog()},isFilterExistsWithSameName:function(a){return this.$reusableCheckbox.is(":checked")&&this.isFilterExistsInRepository(a)||
"create"===this.options.mode&&this.isFilterExistsInReportDefinition(a)?!0:!1},isFilterExistsInRepository:function(a){var b=$.grep(this.options.app.dwRepository.savedFilters,function(b){return $.trim(b.name.toUpperCase())===$.trim(a.toUpperCase())});return!this.options.savedFilter.attr("id")?0<b.length:1===b.length?b[0].id!==this.options.savedFilter.attr("id"):0<b.length},isFilterExistsInReportDefinition:function(a){for(var b=this.options.reportDefnModel.filterDims.GroupedFilter,c=0;c<b.length;c++)if(b[c].hid===
this.options.app.dwRepository.makeHtmlIdForSavedFilterGroup(a))return!0;return!1},updateProperties:function(a){this.options.savedFilter.attr("name",a);this.options.savedFilter.attr("desc",a);this.options.savedFilter.attr("oldHid",this.options.savedFilter.attr("hid"));this.options.savedFilter.attr("hid",this.options.app.dwRepository.makeHtmlIdForSavedFilterGroup(a));this.options.savedFilter.attr("attrHID",this.options.app.dwRepository.makeHtmlIdForSavedFilterGroup(a));this.options.savedFilter.attr("type",
"ELEMENT");this.options.savedFilter.attr("dimName","GroupedFilter")},isValidName:function(){var a=this.element.find(".saved-filter-editor-filter-name");return 0===$.trim(a.val()).length?(a.focus(),this.updateStatus(!1,Sentrana.getMessageText("Saved filter name can not be empty."),"fail"),!1):!0},open:function(){this.oldHid=this.options.savedFilter.hid;"create"!==this.options.mode&&this.options.savedFilter.attr("id")&&this.element.find(".saved-filter-editor-filter-name").prop("readonly",!0);this.options.savedFilter.attr("id")&&
(this.$reusableCheckbox.prop("checked",!0),this.$reusableCheckbox.prop("disabled",!0));this.openDialog()},setColumnName:function(){this.element.find(".saved-filter-editor-filter-name").val(this.options.savedFilter.name).attr("title",this.options.savedFilter.name)},loadForm:function(){this.element.html("");this.element.append(can.view("templates/saved-filters-dialog.ejs",{}));this.$attributeElements=this.element.find(".saved-filter-editor-filters");this.$reusableCheckboxContainer=this.element.find(".reusable-checkbox-container");
this.$reusableCheckbox=this.element.find("#chk-reusable-saved-filter")},buildElementsUI:function(){var a=this,b=!0;this.$attributeElements.html("");for(var c=0,d=this.options.app.dwRepository.dimensionNames.length;c<d;c++){var e=this.options.app.dwRepository.dimensionNames[c],h=this.options.app.dwRepository.dimensions[e];if(h)for(var g=0,f=(h.attributes||[]).length;g<f;g++){var i=h.attributes[g];if(i.formMap[i.defaultFormId].elements||"Calendar"===i.filterControl){var j=i.name.replace(/[^a-z0-9\s]/gi,
"").replace(/[_\s]/g,"-"),k=e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"),l="filter-"+k+j;this.$attributeElements.append('<div class="'+l+'"></div>');l=this.element.find("."+l);l=l.sentrana_only_when_collapsible_container({title:i.name+" ("+i.dimName+")",showHeader:!0,showBorder:!0,allowCollapsible:!0,initialCollapsed:!b,callBackFunctionOnExpand:function(b,c){return function(){a.options.app.handleUserInteraction();$.trim(c.find(".onlywhen-element-filter").html()).length||a.initFilterControl(b);
setTimeout(function(){a.selectFilterElements()},500)}}(i,l),callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();$(l).append(can.view("templates/elementHeaderOnlyWhen.ejs",{attr:i,group:k+j+"-savedfilter",tag:"savedfilter"}));if(b||"Calendar"===i.filterControl)this.initFilterControl(i),b=!1,setTimeout(function(){a.selectFiltersOfFirstBox()},500)}}}},selectFiltersOfFirstBox:function(){for(var a=this.getFilterElementsId(),b=0;b<a.length;b++)this.selectFilterElement(a[b].hid)},
getFilterElementsId:function(){for(var a=this.options.savedFilter.filters.attr(),b=[],c=0;c<a.length;c++)b.push(a[c].hid);return a},initFilterControl:function(a){var b={dwRepository:this.options.app.dwRepository,dwSelection:[],attr:a,form:null,filterentHids:"",filters:[]};$.each(a.forms,function(c,d){if(d.dataFilterOperator)switch(d.dataFilterOperator.toUpperCase()){case "IN":d.elements=$.grep(d.elements,function(a){return!0===a.isFilteredByDataFilter});break;case "NOT IN":d.elements=$.grep(d.elements,
function(a){return!1===a.isFilteredByDataFilter})}b.form=d;b.tag="savedfilter";("Button"===a.filterControl||!a.filterControl)&&$(".onlywhen-elements-"+a.oid+"-"+d.oid+"-savedfilter",this.element).sentrana_filter_control_checkbox_only_when(b);"Tree"===a.filterControl&&$(".onlywhen-elements-"+a.oid+"-"+d.oid+"-savedfilter",this.element).sentrana_filter_control_tree_only_when(b);"ListBox"===a.filterControl&&$(".onlywhen-elements-"+a.oid+"-"+d.oid+"-savedfilter",this.element).sentrana_filter_control_list_box_only_when(b)});
$("input[placeholder]").inputHints()},'.formsRadio input[type="radio"] click':function(a){var b=a.attr("attrOID"),c=a.attr("tag"),a=a.val();this.element.find(".onlywhen-formElements-"+b).hide();this.element.find(".onlywhen-elements-"+b+"-"+a+"-"+c).show()}," savedfilter-filter-selected":function(a,b,c){if(c.isListbox){can.Observe.startBatch();a=this.options.app.dwRepository.objectMap[$(c.options[0]).attr("hid")];this.removeOtherValueOfThisAttribute(a.attrHID);this.removeSelectionfromControls();for(b=
0;b<c.options.length;b++)a=this.options.app.dwRepository.objectMap[$(c.options[b]).attr("hid")],this.options.savedFilter.filters.push(a);can.Observe.stopBatch()}else this.removeSelectionfromControls(),this.addRemoveFilter(c)},addRemoveFilter:function(a){var a=this.options.app.dwRepository.objectMap[$(a).attr("hid")],b=this.options.savedFilter.getIndexOfFilter(a);0>b?this.options.savedFilter.filters.push(a):this.options.savedFilter.filters.splice(b,1)},removeOtherValueOfThisAttribute:function(a){for(var a=
this.getFiltersByAttr(a),b=0;b<a.length;b++){var c=this.options.savedFilter.getIndexOfFilter(a[b]);-1<c&&this.options.savedFilter.filters.splice(c,1)}},getFiltersByAttr:function(a){return $.grep(this.options.savedFilter.filters,function(b){return b.attrHID===a})},removeSelectionfromControls:function(){for(var a=this.options.savedFilter.filters,b=0;b<a.length;b++)this.removeSelectionfromControl(a[b].hid)},removeSelectionfromControl:function(a){var b=$.merge($('.object-selector[hid="'+a+'"]',".saved-filter-editor-filters"),
$('.tree-node-selector[hid="'+a+'"]',".saved-filter-editor-filters")),b=$.merge(b,$('.element-filter-listbox-onlywhen option[hid="'+a+'"]',".saved-filter-editor-filters"));$(b).is('input[type="checkbox"]')?(b.removeClass("object-selected"),$(b).is(":checked")&&(b=$('.object-selector[hid="'+a+'"]',".saved-filter-editor-filters"),$(b).prop("checked",!1))):$(b).is("option")?(b=$(b).parent("select"),$.each(b.find(":selected"),function(b,d){$(d).attr("hid")===a&&($(d).removeAttr("selected"),$(d).removeClass("object-selected"))})):
$(b).is("a")&&(b.removeClass("object-selected"),b.removeClass("tree-node-selected"))},updateSlectionAndName:function(){this.selectFilterElements();this.enableDissableOKButton();this.updateFilterWindow()},selectFilterElements:function(){for(var a=this.options.savedFilter.filters,b=0;b<a.length;b++)this.selectFilterElement(a[b].hid)},selectFilterElement:function(a){var b=$.merge($('.object-selector[hid="'+a+'"]',".saved-filter-editor-filters"),$('.tree-node-selector[hid="'+a+'"]',".saved-filter-editor-filters")),
b=$.merge(b,$('.element-filter-listbox-onlywhen option[hid="'+a+'"]',".saved-filter-editor-filters"));b.addClass("object-selected");a=$('.object-selector[hid="'+a+'"]',".saved-filter-editor-filters");$(a).prop("checked",!0);b.is("option")&&b.attr("selected","selected");$(b).is("a")&&b.addClass("tree-node-selected")},updateFilterWindow:function(){var a=this,b=this.element.find(".saved-filter-editor-filter-container");b.html("");$.each(this.options.savedFilter.getFiltersGroupBy(),function(c,d){var e=
a.options.app.dwRepository.objectMap[c];b.append(can.view("templates/onlywhen-column-filters.ejs",{attr:e.name+" ("+e.dimName+")",filters:d}))})},enableDissableOKButton:function(){this.enableButton("OK",0<this.options.savedFilter.filters.length)},".fu-close-container click":function(a){var a=$(a).parent().parent().attr("hid"),b=this.options.savedFilter.getIndexOfFilter(this.options.app.dwRepository.objectMap[a]);-1<=b&&(this.options.savedFilter.filters.splice(b,1),this.removeSelectionfromControl(a))},
"{savedFilter} change":function(a,b,c){switch(c){case "isReusable":break;case "name":break;default:this.updateSlectionAndName()}}})});steal.executed("js/controllers/SavedFiltersDialog.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.DeleteSavedFilter",{pluginName:"sentrana_dialogs_delete_saved_filter",defaults:{title:"Delete Saved Filter",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b);this.$name=this.element.find(".delete-saved-filter-name")},handleCANCEL:function(){this.closeDialog()},handleOK:function(){this.updateStatus(!0,
"Deleting the saved filter...");var a=(new Sentrana.Models.SavedFilterGroupInfo({id:this.savedFilter.id,name:this.savedFilter.name,dataSource:this.options.app.dwRepository.id,filterIds:$.map(this.savedFilter.filters,function(a){return a.oid})})).destroy(),b=this;a.done(function(){b.updateStatus(!1,"Saved filter deleted successfully");b.closeDialog()});a.fail(function(a){var d=a.getResponseHeader("ErrorCode"),a=a.getResponseHeader("ErrorMsg");d===Sentrana.Enums.ErrorCode.NO_SAVED_FILTER_GROUP_FOUND?
b.updateStatus(!1,a,"fail"):b.updateStatus(!1,Sentrana.getMessageText(window.app_resources.app_msg.save_operation.failed),"fail")})},loadForm:function(a){this.$name.text(a.name)},open:function(a){this.loadForm(a);this.savedFilter=a;this.openDialog()}})});steal.executed("js/controllers/DeleteSavedFilterDialog.js");
can.Control.extend("Sentrana.Controllers.PivotChartControl",{pluginName:"sentrana_pivot_chart_control",defaults:{app:null}},{init:function(){this.updateView()},updateView:function(){this.setInitialPivotChartStructure();this.setInitialSelectedRowCol();this.element.html(can.view("templates/pivot-chart-container.ejs"));this.$btnValues=this.element.find(".btn-select-pivot-value");this.$btnRows=this.element.find(".btn-select-pivot-row");this.$btnColumns=this.element.find(".btn-select-pivot-column");this.loadDropdownItems();
this.showPivotChart();this.maximizeChartDlg=this.element.find("#maximize-pivot-chart-dlg").sentrana_dialogs_maximize_pivot_chart({app:this.options.app,dialogDimension:Sentrana.getMaxViewDialogDimension()}).control()},loadDropdownItems:function(){this.loadMetrics();this.loadRows();this.loadColumns()},loadMetrics:function(){this.$btnValues.find(".dropdown-menu").html(can.view("templates/pivot-chart-dropdown-items.ejs",{items:this.getColumns("METRIC"),selectedId:this.pivotChartStructure.value.oid,type:"value"}))},
loadRows:function(){this.$btnRows.find(".dropdown-menu").html(can.view("templates/pivot-chart-dropdown-items.ejs",{items:this.getColumns("ATTRIBUTE"),selectedId:this.pivotChartStructure.row.oid,type:"row"}))},loadColumns:function(){this.$btnColumns.find(".dropdown-menu").html(can.view("templates/pivot-chart-dropdown-items.ejs",{items:this.getColumns("ATTRIBUTE"),selectedId:this.pivotChartStructure.column.oid,type:"column"}))},getColumns:function(a){return $.grep(this.options.data.colInfos,function(b){return b.colType===
a})},".pivot-chart-dropdown-item click":function(a){var b=a.attr("itemId"),a=$.trim(a.attr("type"));if(b!==this.pivotChartStructure[a].oid){switch(a){case "row":this.pivotChartStructure.column.oid===b&&(this.pivotChartStructure.column=this.pivotChartStructure.row);this.pivotChartStructure.row=this.getColumnByOid(b);break;case "column":this.pivotChartStructure.row.oid===b&&(this.pivotChartStructure.row=this.pivotChartStructure.column);this.pivotChartStructure.column=this.getColumnByOid(b);break;default:this.pivotChartStructure.value=
this.getColumnByOid(b)}this.updateDropdownButtonText();this.loadDropdownItems();this.updateRowColumn();"value"!==a&&this.setInitialSelectedRowCol();this.showPivotChart()}},getColumnByOid:function(a){return $.grep(this.options.data.colInfos,function(b){return b.oid===a})[0]},exportChart:function(a,b){this.pivotChartController&&this.pivotChartController.chart&&this.pivotChartController.chart.exportChart({type:"pdf"===a?"application/pdf":"image/"+a,sourceHeight:b?b.height:this.pivotChartController.chart.chartHeight,
sourceWidth:b?b.width:this.pivotChartController.chart.chartWidth,filename:this.pivotChartController.chartOptions.title.text})},maximizeChart:function(){if(this.pivotChartController.chart){var a=this.pivotChartController.chartAdapter.chartType;this.maximizeChartDlg.open(this.getChartOptionsForMaximize(),a)}}," export_all":function(a,b,c){this.exportChart(c.type,c.size)},getChartOptionsForMaximize:function(){var a={chartData:$.extend(!0,{},this.pivotChartController.chartAdapter.chartData),chart:{renderTo:".maximized-chart-cntr",
chartType:this.pivotChartController.chartAdapter.chartType},rowRange:!1,showOptions:!1,allowClickEvent:!1,optionDialogWidth:400,allowDrill:!1,donotInitChartData:!0,chartTextOptions:{chartTitle:" "},chartExport:{exporting:{enabled:!1},print:{enabled:!1}},chartHeight:900,startPos:0,endPos:12,showShortCategoryTitle:!0};a.pivotData=this.pivotChartController.chartAdapter.pivotData;return a}," restore-pivot-chart":function(){this.setInitialSelectedRowCol();this.showPivotChart()},showPivotChart:function(){var a=
this;this.options.app.blockElement(this.element.parent(),'<div class="loading" ><p class="small-waitingwheel"><img src="images/loader-white.gif"/>&nbsp;Loading pivot analysis...</p></div>');setTimeout(function(){a.renderChart()},100)},renderChart:function(){var a={chartData:new Sentrana.Models.ChartData,chart:{renderTo:".pivot-chart-cntr"},allowTypeSelectionOnFailure:!0,showOptions:!0,rowRange:!1,changeChartType:!0,preserveOptions:!0,showOptionsButton:!1,optionsDialogModal:!0,optionsDialogResizable:!1,
parent:this,optionDialogWidth:400,allowDrill:!1,stopInitialRendering:!1,chartTextOptions:{chartTitle:" "},chartExport:{url:Sentrana.Controllers.BIQController.generateUrl("ExportChart"),exporting:{enabled:!1},print:{enabled:!1}},chartHeight:400,donotInitChartData:!0,showShortCategoryTitle:!0};a.pivotData=this.summarizeDataForPivot();this.$pivotChart=this.element.find(".pivot-chart");if(this.pivotChartController&&!this.pivotChartController._destroyed){var b=this.pivotChartController.chartAdapter.chartType;
this.pivotChartController.destroy()}this.pivotChartController=this.$pivotChart.sentrana_pivot_chart(a).control();this.pivotChartController.staticUpdate(b);this.updateDropdownButtonText();this.addCheckboxForPivotItems(this.element.find(".pivot-chart-items-columns"),this.distinctColumns,this.selectedColumns);this.addCheckboxForPivotItems(this.element.find(".pivot-chart-items-rows"),this.distinctRows,this.selectedRows);this.options.app.unBlockElement(this.element.parent())},resizePivotControl:function(){this.pivotChartController&&
this.pivotChartController.reFlowChartView()},updateDropdownButtonText:function(){this.element.find(".btn-select-pivot-row").find(".pivot-chart-items-name").text(this.pivotChartStructure.row.title);this.element.find(".btn-select-pivot-column").find(".pivot-chart-items-name").text(this.pivotChartStructure.column.title);this.element.find(".btn-select-pivot-value").find(".pivot-chart-items-name").text(this.pivotChartStructure.value.title)},".pivot-chart mouseenter":function(){this.element.find(".chart-option").find(".chart-type").show().css("visibility",
"visible")},".pivot-chart  mouseleave":function(){this.element.find(".chart-option").find(".chart-type").css("visibility","hidden")},".btn-select-pivot-element click":function(a){a=$(a).find(".pivot-chart-items-body");"row"===a.attr("type")?this.previousSelectedRows=this.selectedRows:this.previousSelectedColumns=this.selectedColumns;a.find(".input-filter-search").val("");a.fadeIn().focus()},".btn-select-pivot-element mouseleave":function(a){$(a).find(".pivot-chart-items-body").fadeOut()},".pivot-chart-items-body mouseleave":function(a){var b=
$(a).attr("type"),c=this.previousSelectedColumns;"row"===b&&(c=this.previousSelectedRows);a=this.getCheckedItems(a);this.isSelectionUpdated(a,c)&&(this.updateSelectedItems(a,b),this.showPivotChart())},isSelectionUpdated:function(a,b){if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c].key!==b[c].key)return!0;return!1},getCheckedItems:function(a){a=$(a).find(".checkboxItem:checked");return $.map(a,function(a){return{key:$(a).attr("key"),value:$(a).attr("value")}})},".checkboxItem change":function(a){var a=
$(a).closest(".pivot-chart-items-body"),b=a.attr("type"),c=this.distinctColumns,d=a.find(".checkboxItem:checked");"row"===b&&(c=this.distinctRows);d.length===c.length?a.find(".checkboxAll").prop("checked",!0):a.find(".checkboxAll").prop("checked",!1)},updateSelectedItems:function(a,b){"column"===b?this.selectedColumns=a:this.selectedRows=a},".checkboxAll change":function(a){var b=$(a).closest(".pivot-chart-items-body"),a=b.find(".checkboxAll").is(":checked"),b=b.find(".checkboxItem");a?b.prop("checked",
!0):b.prop("checked",!1)},addCheckboxForPivotItems:function(a,b,c){a.html(can.view("templates/columnBaseFilterCheckList.ejs",{items:b}));this.updateCheckboxStatus(a,b,c)},updateCheckboxStatus:function(a,b,c){for(var b=c.length===b.length,d=0;d<c.length;d++)a.find('.checkboxItem[key="'+c[d].key+'"]').prop("checked",!0);b&&a.find(".checkboxAll").prop("checked",!0)},".accordion-search-input keyup":function(a){this.searchColumnValue(a)},searchColumnValue:function(a){var b=$(a).val(),c=this.distinctColumns,
d=this.element.find(".pivot-chart-items-columns"),e=this.selectedColumns;"row"===$(a).closest(".pivot-chart-items-body").attr("type")&&(c=this.distinctRows,e=this.selectedRows,d=this.element.find(".pivot-chart-items-rows"));a=$.grep(c,function(a){return-1<a.value.toLowerCase().indexOf(b.toLowerCase())});this.addCheckboxForPivotItems(d,a,e)},setInitialPivotChartStructure:function(){var a=this.getColumn("ATTRIBUTE",-1),b=this.getColumn("ATTRIBUTE",a.index),c=this.getColumn("METRIC",-1);this.pivotChartStructure=
{row:a.col,column:b.col,value:c.col};this.updateRowColumn()},updateRowColumn:function(){var a=this.getColIndexForPivotChart(this.pivotChartStructure.row),b=this.getColIndexForPivotChart(this.pivotChartStructure.column),c=this.options.data.rows;this.distinctRows=this.getDistinctColumnValues(c,a);this.distinctColumns=this.getDistinctColumnValues(c,b)},getColumn:function(a,b){for(var c=this.options.data.colInfos,d=0;d<c.length;d++)if(c[d].colType===a&&b!=d)return{col:c[d],index:d}},summarizeDataForPivot:function(){for(var a=
this.getColIndexForPivotChart(this.pivotChartStructure.row),b=this.getColIndexForPivotChart(this.pivotChartStructure.column),c=this.getColIndexForPivotChart(this.pivotChartStructure.value),d=this.options.data.rows,e=this.getDistinctColumnValues(d,a),h={},g=0;g<e.length;g++){for(var f=$.grep(d,function(b){return b.cells[a].rawValue===e[g].key}),i=this.getDistinctColumnValues(f,b),j={},k=0;k<i.length;k++){for(var l=$.grep(f,function(a){return a.cells[b].rawValue===i[k].key}),n=0,o=0;o<l.length;o++)n+=
1*l[o].cells[c].rawValue;j[i[k].key]=n}h[e[g].value]=j}c=this.getChartCategoryForPivot(h);d=this.getChartSeriesForPivot(h);return{data:h,categories:c,series:d,pivotStructure:this.pivotChartStructure}},getColIndexForPivotChart:function(a){for(var b=this.options.data.colInfos,c=0;c<b.length;c++)if(b[c].oid===a.oid)return c;return-1},getChartSeriesForPivot:function(a){for(var b=[],c=0;c<this.selectedColumns.length;c++){var d={};d.name=this.selectedColumns[c].key;d.data=[];for(var e=0;e<this.selectedRows.length;e++)d.data.push([e,
a[this.selectedRows[e].key][this.selectedColumns[c].key]]);b.push(d)}return b},setInitialSelectedRowCol:function(){this.selectedRows=5>this.distinctRows.length?this.distinctRows:this.distinctRows.slice(0,5);this.selectedColumns=10>this.distinctColumns.length?this.distinctColumns:this.distinctColumns.slice(0,10)},getChartCategoryForPivot:function(a){var b=[],c;for(c in a)b.push(c);return b},getDistinctColumnValues:function(a,b){for(var c=[],d=[],e=0;e<a.length;e++){var h=a[e].cells[b].fmtValue,g=a[e].cells[b].rawValue;
this.itemAdded(h,c)||(c.push(h),d.push({key:g,value:h.replace(/</g,"&lt;").replace(/>/g,"&gt;")}))}d.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});return d},itemAdded:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}});steal.executed("js/controllers/PivotChartController.js");
steal("lib/sentrana/DialogControl/SentranaDialog.js",function(){Sentrana.Controllers.Dialog.extend("Sentrana.Dialogs.SetupPrintOptions",{pluginName:"sentrana_dialogs_setup_print_options",defaults:{title:"Setup print options",autoOpen:!1,buttons:[{label:"CANCEL",className:"btn-cancel btn-default"},{label:"OK",className:"btn-ok btn-primary"}]}},{init:function(a,b){this._super(a,b)},".increase-value click":function(a){this.increaseValue($(a).attr("type"))},".decrease-value click":function(a){this.decreaseValue($(a).attr("type"))},
increaseValue:function(a){a="row"===a?this.$rowNum:this.$colNum;a.val(parseInt(a.val(),10)+1)},decreaseValue:function(a){a="row"===a?this.$rowNum:this.$colNum;"0"!==a.val()&&a.val(parseInt(a.val(),10)-1)},".decimal-place-num keypress":function(a,b){return!this.isNumberKey(a,b)?!1:!0},".decimal-place-num blur":function(a){var b=$(a).val(),c="row"===$(a).attr("inputfor")?window.app_resources.print_config.rows_in_page:window.app_resources.print_config.columns_in_page;(!b||0===b.length)&&$(a).val(c)},
isNumberKey:function(a,b){var c=b.which?b.which:event.keyCode;return 45===c||46===c||31<c&&(48>c||57<c)?!1:!0},open:function(){this.loadForm();this.openDialog()},loadForm:function(){this.element.find(".print-setup-dialog-body").html(can.view("templates/print_setup.ejs",{rows:window.app_resources.print_config.rows_in_page,cols:window.app_resources.print_config.columns_in_page}));this.$rowNum=this.element.find(".print-options-maximum-rows");this.$colNum=this.element.find(".print-options-maximum-columns")},
handleCANCEL:function(){this.closeDialog()},handleOK:function(){this.closeDialog();this.element.trigger("print-report-with-params",this.getSetupParams())},getSetupParams:function(){var a=this.element.find('input[name="print-options-outputtype"]:checked').val(),b=this.element.find('input[name="print-options-pagetype"]:checked').val(),c=parseInt(this.$rowNum.val(),10),d=parseInt(this.$colNum.val(),10);return{printItem:a,orientation:b,rows:c,cols:d}},"button.close click":function(a,b){b.preventDefault();
this.handleCANCEL()}})});steal.executed("js/controllers/PrintSetupDialog.js");
can.Control.extend("Sentrana.Controllers.ReportBuilder",{pluginName:"sentrana_report_builder",defaults:{app:null,sideBarWidth:280}},{init:function(){this.loadInitialView();this.initDOMObjects();this.initColumnSideBar();this.initFilterSideBar();this.initVisualizationSideBar();this.initModels();this.initControlls();this.modifyDOMObjects();this.makeColumnDraggable();this.reportController=this.element.find(".analytic-report-elements").sentrana_report({app:this.options.app,reportModel:new Sentrana.Models.ReportModel}).control()},
" action-button-clicked":function(){}," visualization_element-selected":function(a,b,c){this.reportController.addReportElement(c.type)},makeColumnDraggable:function(){this.$leftCol.find(".object-selector-wrapper").draggable({helper:"clone",appendTo:".report-builder",stack:".report-builder",cursor:"move",containment:".report-builder"})},loadInitialView:function(){this.element.html(can.view("templates/report-builder.ejs",{}))},initDOMObjects:function(){this.$reoprtBuilder=this.element.find(".report-builder");
this.$leftCol=this.$reoprtBuilder.find(".report-column");this.$rightCol=this.$reoprtBuilder.find(".report-filter");this.$actionButtonCol=this.$reoprtBuilder.find(".report-actionButton");this.$visualizationCol=this.$reoprtBuilder.find(".report-visualization");this.$contentCol=this.$reoprtBuilder.find(".contentcolumn")},modifyDOMObjects:function(){this.$leftCol.height(this.element.find(".dockablePanel-left").height()+"px")},showPopup:function(a){this.filterSideBar.hide();this.columnSideBar.hide();this.visualizationSideBar.hide();
"menu-columns"===a?this.columnSideBar.show():"menu-actions"!==a&&("menu-visualization"===a?this.visualizationSideBar.show():"menu-filters"===a&&this.filterSideBar.show())},initColumnSideBar:function(){var a=this;this.columnSideBar=a.$leftCol.sentrana_side_bar({title:"Columns",position:"left",dataContainerElement:".contentcolumn",autoHeight:!0,marginTop:46,marginBottom:27,headerIconClass:"fa fa-bars",headerCssClass:"",draggable:!0,containmentArea:".page-container",callBackFunctionOnShow:function(){a.updateSize()},
callBackFunctionOnHide:function(){a.updateSize();a.element.trigger("sidebar-collapsed")},callBackFunctionOnPin:function(){a.updateSize()},callBackFunctionOnUnPin:function(){a.updateSize()}}).control()},initFilterSideBar:function(){var a=this;this.filterSideBar=a.$rightCol.sentrana_side_bar({title:"Filters",position:"left",dataContainerElement:".contentcolumn",autoHeight:!0,marginTop:46,marginBottom:27,headerIconClass:"fa fa-bars",headerCssClass:"",draggable:!0,containmentArea:".page-container",callBackFunctionOnShow:function(){a.updateSize()},
callBackFunctionOnHide:function(){a.updateSize();a.element.trigger("sidebar-collapsed")},callBackFunctionOnPin:function(){a.updateSize()},callBackFunctionOnUnPin:function(){a.updateSize()}}).control()},initVisualizationSideBar:function(){var a=this;this.visualizationSideBar=a.$visualizationCol.sentrana_side_bar({title:"Visualization",position:"left",dataContainerElement:".contentcolumn",autoHeight:!0,marginTop:46,marginBottom:27,headerIconClass:"fa fa-bars",headerCssClass:"",draggable:!0,containmentArea:".page-container",
callBackFunctionOnShow:function(){a.updateSize()},callBackFunctionOnHide:function(){a.updateSize();a.element.trigger("sidebar-collapsed")},callBackFunctionOnPin:function(){a.updateSize()},callBackFunctionOnUnPin:function(){a.updateSize()}}).control()},updateSize:function(){this.reportController.updateSize()},initModels:function(){var a=this;this.model=new Sentrana.Models.Report({app:this.options.app});this.reportDefnModel=new Sentrana.Models.ReportDefin({app:this.options.app});this.dwSelection=(new Sentrana.Models.ObjectSelection).bind("change",
function(b,c,d,e,h){"add"===d?a.updateReportElement(e,d):"remove"===d&&a.updateReportElement(h,d)});this.reusableColumnModel=new Sentrana.Models.ReusableColumnInfo;this.resultDataModel=new Sentrana.Models.ResultDataModel({app:this.options.app});this.executionMonitorModel=new Sentrana.Models.ExecutionMonitor({app:this.options.app,reportDefinModel:this.reportDefnModel,resultDataModel:this.resultDataModel,resultOptions:[]})},"input[type=checkbox] change":function(a){var b=$(a).attr("hid"),a=$(a).is(":checked")?
"add":"remove";this.updateReportElement(b,a)},initControlls:function(){this.$leftCol.sentrana_report_columns({app:this.options.app,dwSelection:this.dwSelection});this.$rightCol.sentrana_report_filter_container({app:this.options.app,model:this.model,dwSelection:this.dwSelection});this.$actionButtonCol.sentrana_report_action_button({app:this.options.app,model:this.model,dwSelection:this.dwSelection});this.$visualizationCol.sentrana_report_visualization({app:this.options.app,model:this.model,dwSelection:this.dwSelection})},
updateReportElement:function(a,b){this.reportController.updateReportElement(a,b)}," report_element_selected":function(a,b,c){var d=this;this.dwSelection.unbind("change");this.$leftCol.find("input:checkbox").prop("checked",!1);$.each(c.templateUnits,function(a,b){d.$leftCol.find('input:checkbox[hid="'+b.hid+'"]').prop("checked",!0)})},".global-column-search-input keyup":function(a){var b=$(a).val();$(".object-selector-wrapper",".metrics").children("label").each(function(){var a=$(this);-1<a.text().toLowerCase().indexOf(b.toLowerCase())?
a.parent().show():a.parent().hide()})}});steal.executed("js/controllers/ReportBuilderController.js");
can.Control.extend("Sentrana.Controllers.ReportColumns",{pluginName:"sentrana_report_columns",defaults:{app:null}},{init:function(){this.dwRepository=this.options.app.dwRepository;this.loadColumns()},loadColumns:function(){this.loadMetrics();this.loadDimensions()},loadMetrics:function(){var a=this;this.dwRepository.hasMetrics()&&(this.metricsContainerController=this.element.find(".metrics-panel").sentrana_collapsible_container({title:"Metrics",titleIconClass:"fa fa-columns",showHeader:!0,showBorder:!0,
allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control(),this.$metrics=this.metricsContainerController.getContainerPanel(),this.buildMetricsUI())},buildMetricsUI:function(){this.$metrics.append('<div class="performance-metrics-grp"></div>');var a=this,b=this.element.find(".performance-metrics-grp").sentrana_side_bar_collapsible_container({title:"Performance Metrics",showHeader:!0,
showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();if(this.dwRepository.isOnlyOneGroup())b.append('<div class="performance-metrics-'+this.dwRepository.metricGroups[0].id+'" ></div>'),$(".performance-metrics-"+this.dwRepository.metricGroups[0].id+"",this.element).append(can.view("templates/objectCheckBox.ejs",{prefix:"reportbuilder",
objects:this.dwRepository.metricGroups[0].metrics,totoalCount:this.dwRepository.metricGroups[0].metrics.length}));else for(var c=0;c<this.dwRepository.metricGroups.length;c++)this.dwRepository.metricGroups[c].metrics.length&&(b.append('<div class="performance-metrics-'+this.dwRepository.metricGroups[c].id+'" ></div>'),this.element.find(".performance-metrics-"+this.dwRepository.metricGroups[c].id+"").sentrana_side_bar_collapsible_container({title:this.dwRepository.metricGroups[c].name,showHeader:!0,
showBorder:!0,allowCollapsible:!0,titleCssClass:"child",callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel().append(can.view("templates/objectCheckBox.ejs",{prefix:"reportbuilder",objects:this.dwRepository.metricGroups[c].metrics,totoalCount:this.dwRepository.metricGroups[c].metrics.length})))},loadDimensions:function(){var a=this;this.$dimention=this.element.find(".dimension").sentrana_collapsible_container({title:"Attributes",
titleIconClass:"fa fa-bars",showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();this.buildAttributesUI()},buildAttributesUI:function(){for(var a=this,b=0,c=this.dwRepository.dimensionNames.length;b<c;b++){var d=this.dwRepository.dimensionNames[b],e=this.dwRepository.dimensions[d];if(e){var h=d.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,
"-");this.$dimention.append('<div class="dimension-'+h+'"></div>');d=this.element.find(".dimension-"+h).sentrana_side_bar_collapsible_container({title:d,showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){a.options.app.handleUserInteraction()},callBackFunctionOnCollapse:function(){a.options.app.handleUserInteraction()}}).control().getContainerPanel();e=$.grep(e.attributes,function(a){return a.segmentable});$(d).append(can.view("templates/objectCheckBox.ejs",{prefix:"reportbuilder",
objects:e,totoalCount:e.length}))}}},".object-selector change":function(a){if("ELEMENT"!==this.dwRepository.objectMap[$(a).attr("hid")].type){var b=a.attr("hid");this.options.dwSelection[a.hasClass("object-selected")?"deselectObject":"selectObject"](b)}},"{dwSelection} change":function(a,b,c,d){this.updateSelectClass(c,d)},updateSelectClass:function(a,b){var c=$.merge(this.element.find('.object-selector[hid="'+a+'"]'),this.element.find('.tree-node-selector[hid="'+a+'"]')),c=$.merge(c,this.element.find('.element-filter-listbox option[hid="'+
a+'"]')),d;0<c.length&&("add"===b?(c.addClass("object-selected"),d=$('.object-selector[hid="'+a+'"]'),$(d).is(":checked")||$(d).prop("checked",!0),c.is("option")&&c.attr("selected","selected"),$(c).is("a")&&c.addClass("tree-node-selected")):"remove"===b&&($(c).is('input[type="checkbox"]')?(c.removeClass("object-selected"),$(c).is(":checked")&&(d=$('.object-selector[hid="'+a+'"]'),$(d).prop("checked",!1))):$(c).is("option")?(c=$(c).parent("select"),$.each(c.find(":selected"),function(b,c){$(c).attr("hid")===
a&&($(c).removeAttr("selected"),$(c).removeClass("object-selected"))})):$(c).is("a")&&(c.removeClass("object-selected"),c.removeClass("tree-node-selected"))))}});steal.executed("js/controllers/ReportColumnController.js");
can.Control.extend("Sentrana.Controllers.ReportFilterContainer",{pluginName:"sentrana_report_filter_container",defaults:{app:null}},{init:function(){this.dwRepository=this.options.app.dwRepository;this.addFilterPanels();this.makeFilterDropable();this.element.find(".attribute-elements").append('<div class="myTest"></div>');var a=new Sentrana.UI.Widgets.Properties.Model.PlainList;a.attr("items",[{iconClass:"fa fa-bar-chart-o",text:"Item 1",label:"5.0"},{iconClass:"fa fa-flag",text:"Item 2",label:"1233.0"},
{iconClass:"fa fa-folder",text:"Item 3",label:"3.0"}]);this.element.find(".myTest").sentrana_plain_list({properties:a})},makeFilterDropable:function(){var a=this;this.element.find(".report-filter-drop-area").droppable({drop:function(b,c){var d=c.draggable.find(".object-selector"),e=$(b.target).attr("type");a.AddFilter(d.attr("hid"),e)}})},AddFilter:function(a,b){var c=this.options.app.dwRepository.objectMap[a];if(c.dimName){var d={},e;switch(b){case "report":d=this.options.model.filters;e=this.$reportFilter;
break;case "page":d=this.options.model.pages[0].filters;e=this.$pageFilter;break;case "element":d=this.options.model.pages[0].reportElements[0].filters,e=this.$elementFilter}d[c.dimName]||(d[c.dimName]=[]);this.isFilterExists(d[c.dimName],a)||(d[c.dimName].push(c),this.addFilterToUI(e,b,c,!1))}},isFilterExists:function(a,b){return 0<$.grep(a,function(a){return a.hid===b}).length},addFilterPanels:function(){this.$reportFilter=this.getFilterPanel("attribute-elements-report-filter","Report Filter","report");
this.$pageFilter=this.getFilterPanel("attribute-elements-page-filter","Page Filter","page");this.$elementFilter=this.getFilterPanel("attribute-elements-element-filter","Element Filter","element")},getFilterPanel:function(a,b,c){var d=this;this.element.find(".attribute-elements").append('<div type="'+c+'" class="report-filter-drop-area  '+a+'"></div>');return this.element.find("."+a).sentrana_side_bar_collapsible_container({title:b,showHeader:!0,showBorder:!0,allowCollapsible:!0,callBackFunctionOnExpand:function(){d.options.app.handleUserInteraction()},
callBackFunctionOnCollapse:function(){d.options.app.handleUserInteraction()}}).control().getContainerPanel()},loadFilters:function(a,b,c){for(var d=0;d<c.length;d++)this.addFilterToUI(a,b,c[d],0===d)},addFilterToUI:function(a,b,c,d){var e=this,h=c.dimName;if(this.options.app.dwRepository.dimensions[h]&&(c.formMap[c.defaultFormId].elements||"Calendar"===c.filterControl)){var g=c.name.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"),h=h.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"),f="filter-"+
h+g;a.append('<div class="'+f+' filter-element-container" ></div>');f=a.find("."+f);f=f.sentrana_only_when_collapsible_container({title:c.name+" ("+c.dimName+")",showHeader:!0,showBorder:!0,titleCssClass:"child",allowCollapsible:!0,initialCollapsed:!d,callBackFunctionOnExpand:function(a,c){return function(){e.options.app.handleUserInteraction();$.trim(c.find(".onlywhen-element-filter").html()).length||e.initFilterControl(a,b)}}(c,f),callBackFunctionOnCollapse:function(){e.options.app.handleUserInteraction()}}).control();
f.addButtonToBar({title:"Remove this filter",cls:"fa fa-times",eventType:"remove_filter",dropdown:!1});var f=f.getContainerPanel(),i=f.parent(),j=i.find(".sideBarButtonBar");i.find(".sideBarCollapsibleContainerTitle").addClass("position-relative");j.addClass("btn-report-filter-remove").hide().attr("hid",c.hid).attr("oid",c.oid).attr("type",$(a).closest(".report-filter-drop-area").attr("type"));j.on("click",function(){var a={hid:$(this).attr("hid"),oid:$(this).attr("oid"),type:$(this).attr("type")};
e.removeFilter(a)&&$(this).closest(".filter-element-container ").remove();return!1});i.on("mouseover",function(){$(this).find(".sideBarButtonBar").show()});i.on("mouseout",function(){$(this).find(".sideBarButtonBar").hide()});f.append(can.view("templates/elementHeaderOnlyWhen.ejs",{attr:c,group:h+g+"-"+b,tag:b}));(d||"Calendar"===c.filterControl)&&this.initFilterControl(c,b)}},initFilterControl:function(a,b){var c={dwRepository:this.dwRepository,dwSelection:[],attr:a,form:null,filterentHids:"",filters:[]};
$.each(a.forms,function(d,e){if(e.dataFilterOperator)switch(e.dataFilterOperator.toUpperCase()){case "IN":e.elements=$.grep(e.elements,function(a){return!0===a.isFilteredByDataFilter});break;case "NOT IN":e.elements=$.grep(e.elements,function(a){return!1===a.isFilteredByDataFilter})}c.form=e;c.tag=b;("Button"===a.filterControl||!a.filterControl)&&$(".onlywhen-elements-"+a.oid+"-"+e.oid+"-"+b,this.element).sentrana_filter_control_checkbox_only_when(c);"Tree"===a.filterControl&&$(".onlywhen-elements-"+
a.oid+"-"+e.oid+"-"+b,this.element).sentrana_filter_control_tree_only_when(c);"ListBox"===a.filterControl&&$(".onlywhen-elements-"+a.oid+"-"+e.oid+"-"+b,this.element).sentrana_filter_control_list_box_only_when(c)});$("input[placeholder]").inputHints()},'.formsRadio input[type="radio"] click':function(a){var b=a.attr("attrOID"),c=a.attr("tag"),a=a.val();this.element.find(".onlywhen-formElements-"+b).hide();this.element.find(".onlywhen-elements-"+b+"-"+a+"-"+c).show()},removeFilter:function(a){var b=
{};switch(a.type){case "report":b=this.options.model.filters;break;case "page":b=this.options.model.pages[0].filters;break;case "element":b=this.options.model.pages[0].reportElements[0].filters}b=b[this.options.app.dwRepository.objectMap[a.hid].dimName];a=b.map(function(a){return a.hid}).indexOf(a.hid);-1<a&&b.splice(a,1);return!0},getFilterIndex:function(a,b){for(var c=0;c<a.length;c++)if(a[c].hid===b)return c;return-1}});steal.executed("js/controllers/ReportFilterContainerController.js");
can.Control.extend("Sentrana.Controllers.ReportPageController",{pluginName:"sentrana_report_page",defaults:{pageModel:null}},{init:function(){this.dimensionHeight=this.dimensionWidth=200;this.elementControlsMap={};this.initializeGoldenLayout();this.reportDefnModel=new Sentrana.Models.ReportDefin({app:this.options.app})},update:function(){},getLayoutOptions:function(){var a={},b=this;a.events=[];var c={name:"stateChanged",callback:function(){b.element.find(".sentrana-golden-layout-root .sentrana_report_element_view").each(function(){var a=
$(this).control();a&&a.resizeElementView($(this).width(),$(this).height())})}};a.events.push(c);c={name:"stackCreated",callback:function(a){var b=a._$getArea;a._$getArea=function(){var c=b.call(a);delete a._contentAreaDimensions.header;return c};$(a.element).addClass("sentrana_report_element_view_container")}};a.events.push(c);a.headerButtonInfo={title:"Report Options",cls:"fa-tasks",eventType:"report_element_options",dropdown:!0,btnStyle:"",menuItems:[{id:"dataFilters",name:"Data Filters"},{id:"chartOptions",
name:"Chart Options"},{id:"exportTable",name:"Download Table"},{id:"exportChart",name:"Download Chart",submenuItems:[{id:"exportChart_png",name:"Download PNG"},{id:"exportChart_jpeg",name:"Download JPEG"},{id:"exportChart_pdf",name:"Download PDF"}]},{id:"maximizeChart",name:"Maximize Chart"},{id:"printChartandTable",name:"Print Chart and Table",submenuItems:[{id:"printBoth",name:"Print Chart and Table"},{id:"printTable",name:"Print Table"},{id:"printChart",name:"Print Chart"},{id:"printSetup",name:"Setup Print Options"}]}]};
return a},initializeGoldenLayout:function(){this.reportElementContainer=this.element.find(".report-element-container-layout").sentrana_golden_layout({app:this.options.app,height:$(document).height()-110+"px",width:" calc(100% - 4px);",componentName:"report-element-component",containerButtonTemplate:"lib/sentrana/collapsible/templates/collapsibleContainerActionButton.ejs",layoutOptions:this.getLayoutOptions(),controllerName:"sentrana_report_element_view"}).control()}," report_element_options":function(a,
b){$(b.target).closest(".lm_item").find(".sentrana_report_element_view")},updateSize:function(){this.reportElementContainer.updateSize()},updateReportDefinition:function(a,b){that.reportDefnModel.clear();"add"===b?this.reportDefnModel.selectObject(a):"remove"===b&&this.reportDefnModel.deselectObject(a)},updateView:function(){},updateReportElement:function(a,b){var c=this.getSelectedReportElementController();c&&("add"===b?c.options.reportDefnModel.selectObject(a):"remove"===b&&c.options.reportDefnModel.deselectObject(a),
this.updateReportElementView(this.getSelectedElement()))},updateReportElementView:function(a){var b=this.getReportElementController(a.attr("report-element-id")),c=b.options.reportDefnModel.getReportDefinitionParameters(!0);0<c.template.length&&this.renderReport(c,b.options.reportDefinitionInfoModel.chartOptions.chartType,a)},getSelectedElement:function(){return this.element.find(".sentrana_report_element_view_container.report-section-container-selected").find(".sentrana_report_element_view.report-section-selected")},
renderReport:function(a,b,c){var d=this,a=new Sentrana.Models.ReportDefinitionInfo({name:"Hello",showChart:!0,definition:a,chartOptions:{chartType:b}});c||(c=this.getSelectedElement());c.control()&&c.control().destroy();c.sentrana_report_element_view({app:this.options.app,chartType:b,contentInitialHeight:$(c).height(),reportDefinitionInfoModel:a,callBackOnFail:function(){d.options.app.unBlockElement(d.element.find(".report-view"))}}).control().viewReport(a)},getSelectedReportElementController:function(){return this.getReportElementController(this.getSelectedElement().attr("report-element-id"))},
getReportElementController:function(a){if(a=this.elementControlsMap[a])return a},addReportElement:function(a){var b=this.getSelectedElement(),c,d,e,h=this.generateNewReId(),g=new Sentrana.Models.ReportDefin({app:this.options.app});if(0<b.length){e=b;for(var h=b.attr("report-element-id"),f=0;f<this.options.pageModel.reportElements.length;f++)if(c=this.options.pageModel.reportElements[f],c.id===h){c.type=a;$(b).control()&&$(b).control().destroy();if(h=this.elementControlsMap[h])d=h.options.reportDefnModel.getReportDefinitionParameters(!0),
g=h.options.reportDefnModel;break}}else c=Sentrana.Models.ReportElementModel(),c.id=h,c.row=this.getMaxRow(),c.col=1,c.sizeX=1,c.sizeY=1,c.type=a,this.options.pageModel.reportElements.push(c),d={filter:"",sort:"",template:"",totals:!1},this.addLayoutElement(a,h),e=this.reportElementContainer.getContentElement(h),e.attr("report-element-id",h);h=new Sentrana.Models.ReportDefinitionInfo({name:"Hello",showChart:!0,definition:d,chartOptions:{chartType:a}});a=$(e).sentrana_report_element_view({app:this.options.app,
chartType:a,contentInitialHeight:$(e).height(),reportDefinitionInfoModel:h,reportDefnModel:g,callBackOnFail:function(){that.unBlockElement(that.element.find(".report-view"))}}).control();0<d.template.length&&a.viewReport(h);this.elementControlsMap[c.id]=a;0===b.length&&this.addSelectedClass(e)},".sentrana_report_element_view_container mouseover":function(a){$(a).find(".lm_header").addClass("sentrana_report_element_view_header")},".sentrana_report_element_view_container mouseout":function(a){$(a).find(".lm_header").removeClass("sentrana_report_element_view_header")},
addLayoutElement:function(a,b){this.reportElementContainer.addNewElement({title:" ",type:"component",reportType:a,id:b,componentState:{text:a}})},getMaxRow:function(){var a=1;0<this.options.pageModel.reportElements.length&&(a=Math.max.apply(null,this.options.pageModel.reportElements.map(function(a){return a.row})));return a},"{pageModel} change":function(){},addSelectedClass:function(a){var b=$(a).hasClass("report-section-selected");this.element.find(".sentrana-golden-layout-root .lm_content.sentrana_report_element_view").removeClass("report-section-selected");
this.element.find(".sentrana-golden-layout-root .lm_content.sentrana_report_element_view").closest(".lm_stack").removeClass("report-section-container-selected");b||($(a).addClass("report-section-selected"),$(a).closest(".lm_stack").addClass("report-section-container-selected"),a=this.getSelectedReportElementController(),a.options.reportDefnModel.getReportDefinitionParameters(!0),this.element.trigger("report_element_selected",a.options.reportDefnModel))},".sentrana_report_element_view_header click":function(a){this.addSelectedClass($(a).closest(".lm_stack").find(".lm_content.sentrana_report_element_view"))},
generateNewReId:function(){return this.options.pageModel.id+"-re-"+(0===this.options.pageModel.reportElements.length?1:this.options.pageModel.reportElements.length+1)}});steal.executed("js/controllers/ReportPageController.js");
can.Control.extend("Sentrana.Controllers.ReportController",{pluginName:"sentrana_report",defaults:{}},{init:function(){this.updateView()},update:function(){},updateView:function(){this.pageControl=this.element.find(".analytic-page-container").sentrana_page_widget({app:this.options.app,reportModel:this.options.reportModel,pageTitle:"Page Title",isEditMode:!0}).control()}," setReportPage":function(){var a=this.getSelectedPageId(),b=$("#"+a).control();b?b.updateSize():(b=new Sentrana.Models.PageModel,
b.id=a,$("#"+a).sentrana_report_page({pageModel:b,app:this.options.app}).control())},getSelectedPageId:function(){return this.pageControl.getSelectedPageId()},updateSize:function(){var a=this.getSelectedPageId();$("#"+a).control().updateSize()},updateReportElement:function(a,b){var c=this.getSelectedPageId();$("#"+c).control().updateReportElement(a,b)},addReportElement:function(a){var b=this.getSelectedPageId();$("#"+b).control().addReportElement(a)}});steal.executed("js/controllers/ReportController.js");
can.Control.extend("Sentrana.Controllers.Actions",{pluginName:"sentrana_actions",defaults:{app:null}},{init:function(){this.updateView()},updateView:function(){this.element.html(can.view("templates/action_content.ejs",{buttons:[{text:"Save",action:"save",cls:""},{text:"Save As",action:"save-as",cls:""},{text:"Refresh",action:"refresh",cls:""},{text:"Publish",action:"publish",cls:""}]}))},".btn-action click":function(a){this.element.trigger("action-button-clicked",{action:$(a).attr("action")})}});
steal.executed("js/controllers/ActionController.js");
can.Control.extend("Sentrana.Controllers.ReportActionButton",{pluginName:"sentrana_report_action_button",defaults:{app:null}},{init:function(){this.dwRepository=this.options.app.dwRepository;this.updateView()},updateView:function(){this.element.find(".attribute-elements").html(can.view("templates/action_content.ejs",{buttons:[{text:"Save",action:"save",cls:""},{text:"Save As",action:"save-as",cls:""},{text:"Refresh",action:"refresh",cls:""},{text:"Publish",action:"publish",cls:""}]}))},".btn-action click":function(a){this.element.trigger("action-button-clicked",
{action:$(a).attr("action")})}});steal.executed("js/controllers/ReportActionButtonController.js");
can.Control.extend("Sentrana.Controllers.ReportVisualization",{pluginName:"sentrana_report_visualization",defaults:{app:null}},{init:function(){this.updateView()},updateView:function(){this.element.find(".attribute-elements").html(can.view("templates/report_visualization_content.ejs",{visualizations:[{type:"line",iconImage:"db_comp_icon_basic_line.png",cls:"",title:"Line"},{type:"pie",iconImage:"db_comp_icon_pie.png",cls:"",title:"Pie"},{type:"column",iconImage:"db_comp_icon_basic_column.png",cls:"",
title:"Column"},{type:"bar",iconImage:"db_comp_icon_basic_bar.png",cls:"",title:"Bar"},{type:"text",iconImage:"db_comp_icon_text.png",cls:"",title:"Text"},{type:"stacked column",iconImage:"db_comp_icon_stacked.png",cls:"",title:"Stacked Column"},{type:"stacked bar",iconImage:"db_comp_icon_stacked_bar.png",cls:"",title:"Stacked Bar"},{type:"scatter",iconImage:"db_comp_icon_scatter_plot.png",cls:"",title:"Scatter"},{type:"bubble",iconImage:"db_comp_icon_bouble.png",cls:"",title:"Bouble"},{type:"column-range",
iconImage:"db_comp_icon_column_range.png",cls:"",title:"Column Range"},{type:"map",iconImage:"db_comp_icon_map.png",cls:"",title:"Map"},{type:"scatter-plot",iconImage:"db_comp_icon_scatter_plot.png",cls:"",title:"Scatter Plot"},{type:"stacked-area",iconImage:"db_comp_icon_stacked_area.png",cls:"",title:"Stacked Area"},{type:"bar-range",iconImage:"db_comp_icon_bar_range.png",cls:"",title:"column"},{type:"data-table",iconImage:"db_comp_icon_data_table.png",cls:"",title:"DataTable"},{type:"spider-web",
iconImage:"db_comp_icon_spider_web.png",cls:"",title:"Spider Web"},{type:"stacked-bar",iconImage:"db_comp_icon_stacked_bar.png",cls:"",title:"Stacked Bar"},{type:"basic-area",iconImage:"db_comp_icon_basic_area.png",cls:"",title:"Basic Area"},{type:"donut",iconImage:"db_comp_icon_donut.png",cls:"",title:"Donut"},{type:"polar",iconImage:"db_comp_icon_polar.png",cls:"",title:"Polar"},{type:"spline",iconImage:"db_comp_icon_spline.png",cls:"",title:"Spline"},{type:"column-negetive",iconImage:"db_comp_icon_column_negetive.png",
cls:"",title:"Column Negetive"},{type:"dual-axes",iconImage:"db_comp_icon_dual_axes.png",cls:"",title:"Dual Axes"},{type:"pyramid",iconImage:"db_comp_icon_pyramid.png",cls:"",title:"Pyramid"},{type:"stacked",iconImage:"db_comp_icon_stacked.png",cls:"",title:"Stacked"}]}))},".report_visualization_element click":function(a){this.element.trigger("visualization_element-selected",{type:$(a).attr("type")})}});steal.executed("js/controllers/ReportVisualizationController.js");
can.Observe.extend("Sentrana.Models.Report",{},{init:function(a){this.app=a.app;this.filters={};this.pages=[];this.setDefultValues()},setDefultValues:function(){this.pages.push(new Sentrana.Models.Page({app:this.app}))}});can.Observe.extend("Sentrana.Models.Page",{},{init:function(a){this.app=a.app;this.filters={};this.reportElements=[];this.setDefultValues()},setDefultValues:function(){this.reportElements.push(new Sentrana.Models.ReportElement({app:this.app}))}});
can.Observe.extend("Sentrana.Models.ReportElement",{},{init:function(a){this.app=a.app;this.filters={};this.columns=[];this.visualizationType="grid"}});can.Observe.extend("Sentrana.Models.ReportModel",{},{init:function(){this.setup({pages:[]})}});can.Observe.extend("Sentrana.Models.PageModel",{},{init:function(){this.setup({reportElements:[]});this.title=this.id=""}});
can.Observe.extend("Sentrana.Models.ReportElementModel",{},{init:function(){this.setup({});this.id=null;this.sizeY=this.sizeX=this.col=this.row=1;this.type=""}});steal.executed("js/observes/ReportObserve.js");
steal("js/controllers/ExecutionMonitorController.js","js/observes/ExecutionMonitorObserve.js","js/constructs/ReportFilterUtil.js","js/controllers/RangeFilterController.js",function(){can.Control.extend("Sentrana.Controllers.ReportElementViewController",{pluginName:"sentrana_report_element_view",defaults:{callBackOnFail:void 0}},{show:function(){this.element.show()},hide:function(){this.element.hide()},initDOMObjects:function(){this.element.find(".view-report-container").remove();this.element.append(can.view("templates/reportElementViewer.ejs",
{}));this.$summary=this.element.find(".summary");this.$executionMonitor=this.element.find(".execution-monitor");this.$reportGrid=this.element.find(".report-grid");this.$reportChart=this.element.find(".report-chart");this.$textReport=this.element.find(".text-report")},getResultOptions:function(){var a;this.options.reportDefinitionInfoModel&&(a=this.options.reportDefinitionInfoModel.resultOptions);return a},initReportModels:function(){var a=this;this.chartDataModel=new Sentrana.Models.ChartData;this.chartDataModel.attr("chartCollapseTail",
!1);this.chartDataModel.attr("chartType",this.options.chartType);this.reportDefnModel=new Sentrana.Models.ReportDefin({app:this.options.app});this.resultDataModel=new Sentrana.Models.ResultDataModel({app:this.options.app});this.resultDataModel.bind("change",function(b,c,d,e){switch(e){case "SUCCESS":a.options.app.unBlockElement(a.element.find(".report-viewer-container"));a.executionMonitorModel.resultDataModel=a.resultDataModel;a.executionMonitorModel.startLocalDataChange();a.executionMonitorModel.setStaticData(void 0);
a.executionMonitorModel.endLocalDataChange("SUCCESS");break;case "STARTING":a.options.app.blockElement(a.element.find(".report-viewer-container"),'<div class="loading"><p class="small-waitingwheel"><img src="images/loader-white.gif"/></p></div>')}});this.showText=this.showGrid=this.showChart=!1;"data-table"===this.options.chartType?this.showGrid=!0:"text"===this.options.chartType?this.showText=!0:this.showChart=!0;this.executionMonitorModel=new Sentrana.Models.ExecutionMonitor({app:this.options.app,
reportDefinModel:this.reportDefnModel,resultDataModel:this.resultDataModel,resultOptions:this.getResultOptions(),showGrid:this.showGrid,showChart:this.showChart});this.options.executionMonitorModel&&(this.executionMonitorModel=this.options.executionMonitorModel,this.$executionMonitor.hide());this.executionMonitorModel.bind("change",function(b,c,d,e){"executionStatusDrilldown"===c&&"SUCCESS"===e&&setTimeout(function(){a.filterSectionRendered=!1;a.initReportFiltersController()},300);if("executionStatus"===
c)switch(e){case "FAILURE":a.options.callBackOnFail&&"function"===typeof a.options.callBackOnFail&&a.options.callBackOnFail();break;case "SUCCESS":a.$summary.hide(),a.filterSectionRendered=!1,a.resultDataModel.updateData(a.executionMonitorModel.data,a.getResultOptions()),a.updateDataView(),a.showText&&a.$textReport.show()}});this.chartOptions={model:this.executionMonitorModel,chartData:this.chartDataModel,chart:{renderTo:".report-chart-cntr"},allowTypeSelectionOnFailure:!1,showOptions:this.options.showChartOptions,
rowRange:this.options.rowRange,changeChartType:!1,preserveOptions:!0,showOptionsButton:!1,optionsDialogModal:!0,optionsDialogResizable:!1,parent:this,optionDialogWidth:400,allowDrill:this.options.allowDrillDown,stopInitialRendering:!1,chartTextOptions:{chartTitle:" "},chartExport:{url:Sentrana.Controllers.BIQController.generateUrl("ExportChart"),exporting:{enabled:!1},print:{enabled:!1}},chartHeight:this.options.contentInitialHeight,donotInitChartData:!0,showShortCategoryTitle:!0};"read"===this.options.displayMode&&
(this.chartOptions.showChartOptions={chartXAxisLabelRotation:!0,chartBinCount:!0,chartLegendAttribute:!0,chartCollapseTail:!0,chartCollapseItemName:!0,chartCollapseRowLimit:!0,chartAutoSegmentation:!0,chartAttrToSegment:!0,chartMetricToSegment:!0})},getChartType:function(){return this.chartOptions.chartData.chartType},updateDataView:function(){var a=$(document).scrollTop();$(document).scrollTop(a)},getChartOptions:function(){return this.reportChartController.getChartData()},initReportControls:function(a){this.executionMonitorController=
this.$executionMonitor.sentrana_execution_monitor({executionMonitorModel:this.executionMonitorModel,showHideGridFn:function(b){a.$reportGrid[b?"show":"hide"]()},showHideChartFn:function(b){a.$reportChart[b?"show":"hide"]()},parent:this}).control();this.reportGrid=this.$reportGrid.sentrana_report_grid({model:this.executionMonitorModel,reportDefnModel:this.reportDefnModel,donotUpdateModel:!0,stopInitialRendering:!1,allowSort:!1,autoHeight:!0});this.reportGridController=this.reportGrid.control();this.reportChartController=
this.$reportChart.sentrana_report_chart(this.chartOptions).control();this.textReportController=this.$textReport.sentrana_text_report({app:this.options.app,model:this.executionMonitorModel}).control()},init:function(){this.initDOMObjects();this.reportWiseFilters={};this.viewingReportColumnDefn=[];var a=this;this.app=this.options.app;this.initReportModels(a);this.initReportControls(a);this.options.callBackFunctionOnExpand=function(){a.updateView()};this.options.callBackFunctionOnCollapse=function(){}},
resizeElementView:function(a,b){"data-table"===this.options.chartType?this.updateGridView():"text"===this.options.chartType?this.updateTextReportView(a,b):this.reSizeChartView(a,b)},updateView:function(){this.reFlowChartView();this.updateGridView();this.initReportFiltersController()},updateChartView:function(){this.reportChartController&&!this.reportChartController._destroyed&&this.reportChartController.updateView(!1)},reFlowChartView:function(){this.reportChartController&&!this.reportChartController._destroyed&&
(this.reportChartController.reFlowChartView(),this.reportChartController.resizeRangeSlider())},reSizeChartView:function(a,b){this.reportChartController&&!this.reportChartController._destroyed&&this.reportChartController.reSizeChartView(a,b)},updateGridView:function(){this.reportGridController&&!this.reportGridController._destroyed&&this.reportGridController.resizeGrid(!1)},updateTextReportView:function(a,b){this.textReportController&&!this.textReportController._destroyed&&this.textReportController.updateTextSize(a,
b)},viewReport:function(a){this.viewingReport=a;(this.options.showName||this.options.showColumns||this.options.showFilters)&&this.$summary.addClass("report-viewer-panel-summary");this.reportDefnModel.setDefn(a.definition);this.reportGridController.options.allowDrill=this.options.allowDrillDown;a.chartOptions&&(this.chartOptions.chart.chartType=a.chartOptions.chartType||this.options.chartType,this.chartOptions.chartData.attr(a.chartOptions.attr?a.chartOptions.attr():a.chartOptions),this.chartOptions.chartData.fromDB=
!0);this.chartOptions.chartData.attr("chartTextOptions.chartTitle","");this.chartOptions.chartData.attr("chartTextOptions.chartSubtitle","");this.reportChartController&&!this.reportChartController._destroyed&&this.reportChartController.destroy();this.executionMonitorController.options.hasMetrics=this.hasMetrics(a.definition.template.split("|"));this.executionMonitorModel.attr("showGrid",this.showGrid);this.executionMonitorModel.attr("showChart",this.showChart);this.reportChartController=this.$reportChart.sentrana_report_chart(this.chartOptions).control();
if("write"===this.options.displayMode){var b=this.getColumns(),c=this.chartOptions.chart.chartType,d=this.getJoinedTitle(b.metrics)+" by "+this.getJoinedTitle(b.attributes),e=this.getXAxisLabel(c,b),b=this.getYAxisLabel(c,b);this.chartOptions.chartTextOptions.chartTitle=d;this.chartOptions.chartTextOptions.chartXAxisLabel=e;this.chartOptions.chartTextOptions.chartYAxisLabel=b}this.options.executionMonitorModel?this.$summary.hide():this.$summary.show();a.initializeFilters();this.executionMonitorModel.executeReportUsingDefnParams(a.definition.attr?
a.definition.attr():a.definition,"CLEAR")},hasMetrics:function(a){for(var b=0;b<a.length;b++)if("METRIC"===this.options.app.getDWRepository().getObjectByOID(a[b]).type)return!0;return!1},getXAxisLabel:function(a,b){return a===Sentrana.CHART_TYPE_SCATTER||a===Sentrana.CHART_TYPE_BUBBLE||a===Sentrana.CHART_TYPE_HISTOGRAM?b.metrics[0].name:this.getJoinedTitle(b.attributes)},getYAxisLabel:function(a,b){return a===Sentrana.CHART_TYPE_SCATTER||a===Sentrana.CHART_TYPE_BUBBLE?1<b.metrics.count?b.metrics[1].name:
this.getJoinedTitle(b.metrics):this.chartOptions.chartData.chartType===Sentrana.CHART_TYPE_HISTOGRAM?"Count":this.getJoinedTitle(b.metrics)},getColumns:function(){for(var a=this.reportDefnModel.templateUnits,b=[],c=[],d=0;d<a.length;d++)"ATTRIBUTE"===a[d].type?b.push(a[d]):c.push(a[d]);return{attributes:b,metrics:c}},getJoinedTitle:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].name);return b.join(", ")},getTableData:function(){var a=[];$.each(this.reportGrid.dataTableSettings[this.reportGrid.dataTableSettings.length-
1].aoColumns,function(b,c){a.push({columValue:c.sTitle,columnClass:c.sClass,rows:[]});a.rows=[]});for(var b=this.element.find(".table tbody tr"),c=[],d=0;d<b.length;d++){var e=this.reportGridController.dataTable.fnGetData(b[d]),h=[];$.each(a,function(a,b){h.push({columValue:e["c"+a+"_f"],columnClass:b.columnClass})});var g="odd-row";0===d%2&&(g="even-row");c.push({index:d,trclass:g,cols:h})}return{tablecolumns:a,tableRows:c}},applyFilterToGridAndChart:function(a){a&&(this.updateReportGridForFilter(a),
this.updateReportChartForFilter(a))},updateReportGridForFilter:function(a){this.reportGridController.staticUpdate(a)},updateReportChartForFilter:function(a){var b=$.extend(!0,{},this.chartOptions);this.reportChartController.chartAdapter&&(b.chart.chartType=this.reportChartController.chartAdapter.chartType);b.reportData=a;this.reportChartController.staticUpdate(b)},blockElement:function(a,b){$(a).block({message:b,css:{width:"auto",padding:0,border:0,backgroundColor:"transparent",cursor:"default"},
overlayCSS:{backgroundColor:"#000",opacity:0.3,cursor:"default"}})},unBlockElement:function(a){$(a).unblock()},inArray:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}})});steal.executed("js/controllers/ReportElementViewController.js");
can.Control.extend("Sentrana.Controllers.ReportElementExecutionMonitor",{pluginName:"sentrana_report_element_execution_monitor",defaults:{executionMonitorModel:null}},{init:function(){this.$spinner=this.element.find(".spinner");this.$executionMessage=this.element.find(".execution-message");this.$cancelBtn=this.element.find(".cancel-btn");this.$elapsedTime=this.element.find(".elapsed-time");this.updateView()},update:function(a){this._super(a);this.updateView()},updateView:function(){this.options.showHideGridFn=
this.options.showHideGridFn||$.noop;this.options.showHideChartFn=this.options.showHideChartFn||$.noop},updateShowAsButtonSelection:function(a,b){a[b?"addClass":"removeClass"](this.constructor.CLS_SHOW_AS_BTN_SELECTED)},showHideViewers:function(a){a?(this.options.executionMonitorModel.showGrid&&this.options.showHideGridFn(a),this.options.executionMonitorModel.showChart&&this.options.showHideChartFn(a)):(this.options.showHideGridFn(a),this.options.showHideChartFn(a))},indicateStatus:function(a){this.element.parent().removeClass("failed-status");
this.element.parent().removeClass("success-status");this.element.parent().removeClass("starting-status");this.element.parent().addClass(a+"-status")},".cancel-btn click":function(){this.options.executionMonitorModel.cancelExecutionDrillingCall()},"{executionMonitorModel} change":function(a,b,c,d,e){b=a.getData();switch(c){case "executionStatus":switch(e){case "STARTING":this.indicateStatus("starting");this.$executionMessage.text(Sentrana.getMessageText(window.app_resources.app_msg.report_execution.processing_msg));
this.showHideViewers(!1);this.$spinner.show();this.$cancelBtn.show();break;case "SUCCESS":this.indicateStatus("success");this.$executionMessage.text(a.attr("executionMessage"));this.showHideViewers(!0);this.$spinner.hide();this.$cancelBtn.hide();this.options.parent&&void 0!==this.options.parent.executionSuccessful&&(this.options.parent.executionSuccessful=!0);break;case "FAILURE":this.$executionMessage.html(can.view("templates/reportException.ejs",b)),this.showHideViewers(!1),this.$spinner.hide(),
this.$cancelBtn.hide(),this.$elapsedTime.hide(),$('[data-toggle="tooltip"]').tooltip()}break;case "elapsedTimeStr":this.$elapsedTime.text("Time: "+e)}}});steal.executed("js/controllers/ReportElementExecutionMonitorController.js");
can.Control.extend("Sentrana.Controllers.PageLayoutDemo",{pluginName:"sentrana_page_layout_demo",defaults:{app:null}},{init:function(){this.element.html(can.view("templates/page-layout-demo.ejs"));this.updateView()},updateView:function(){var a=this.getMenu();this.pageLayoutControl=this.element.find(".demo-element").sentrana_layout_widget({app:this.options.app,leftMenus:a}).control();this.builderControl=this.pageLayoutControl.getContentPanel().sentrana_report_builder({app:this.options.app}).control()},
" sidebar-collapsed":function(){this.pageLayoutControl.deselectMenu()}," layout-page-main-menu-selected":function(a,b,c){this.builderControl.showPopup(c.menuId);this.pageLayoutControl.selectMenu(c.menuId)}," layout-page-main-menu-toggled":function(){},getMenu:function(){var a=[];a.push({id:"menu-columns",text:"Columns",title:"Click to open Columns",cssClass:"fa-columns"});a.push({id:"menu-filters",text:"Filters",title:"Click to open filters",cssClass:"fa-filter"});a.push({id:"menu-visualization",
text:"Visualization",title:"Click to open visualization",cssClass:"fa-line-chart"});a.push({id:"menu-actions",text:"Actions",title:"Click to open action buttons",cssClass:"fa-toggle-right",menus:[{id:"menu_save",text:"Save",title:"Save",cssClass:"fa-save"},{id:"menu_saveall",text:"Save All",title:"Save All",cssClass:"fa-copy"},{id:"menu_refresh",text:"Refresh",title:"Refresh",cssClass:"fa-refresh"},{id:"menu_publish",text:"Publish",title:"Publish",cssClass:"fa-send-o"}]});return a},getMenu1:function(){var a=
[];a.push({id:"m1",text:"Menu-1",title:"click to open page",cssClass:"fa-th"});a.push({id:"m2",text:"Menu-2",title:"click to open page2",cssClass:"fa fa-bar-chart-o",menus:[{id:"m2-1",text:"Menu-2-1",title:"click to open page2",cssClass:"fa-dashboard",menus:[{id:"m2-1-1",text:"Menu-2-1-1",title:"click to open page2",cssClass:"fa-flask",menus:[{id:"m2-1-2",text:"Menu-2-1-2",title:"click to open page2",cssClass:"fa-flask"}]}]},{id:"m2-2",text:"Menu-2-2",title:"click to open page2",cssClass:"fa-desktop"}]});
a.push({id:"m3",text:"Menu-3",title:"click to open page2",cssClass:"fa fa-bar-chart-o",menus:[{id:"m3-1",text:"Menu-3-1",title:"click to open page2",cssClass:"fa-dashboard",menus:[{id:"m3-1-1",text:"Menu-3-1-1",title:"click to open page2",cssClass:"fa-flask"}]},{id:"m3-2",text:"Menu-3-2",title:"click to open page2",cssClass:"fa-desktop"}]});return a}});steal.executed("js/controllers/PageLayoutDemo.js");
steal("styles/styles.css","styles/pg-savedreports.css","styles/pg-builder.css","styles/sideBarCollapsibleContainer.css","styles/pg-repoman.css","styles/onlywhencolumn.css","styles/biqstyles.css","styles/result-definition.css","styles/analytic_report.css","styles/page-layout.css");steal.executed("js/Styles.js");
Sentrana.Controllers.ApplicationShellController.extend("Sentrana.Controllers.BIQController",{pluginName:"sentrana_biq",defaults:{},userLoginId:"",repositoryID:"",methodMap:{},repositoryCookiePrefix:"repo",menuCookiePrefix:"menu",pageBuilderReportInfoPrefix:"pg-builder-report-info",convertParamMapToUrlParams:function(a){var b=[],c;for(c in a)b.push(c+"="+escape(a[c]));return b.join("&")},generateUrl:function(a,b){var c=a.substr(0,0<a.indexOf("/")?a.indexOf("/"):a.length);this.methodMap[c.toLowerCase()]||
Sentrana.AlertDialog(Sentrana.getMessageText(window.app_resources.app_msg.method_map.no_entry.dialog_title),Sentrana.getMessageText(window.app_resources.app_msg.method_map.no_entry.dialog_msg,a),function(){return null});b=b||{};this.repositoryID&&(b.repositoryid=this.repositoryID);return this.methodMap[c.toLowerCase()]+"/"+a+"?"+this.convertParamMapToUrlParams(b)},menuModel:{mainMenuItems:[{menuItem:{id:"saved",text:"Reports & Booklets"}},{menuItem:{id:"bldr",text:"Builder"}},{menuItem:{id:"edit_config",
text:"Repository Manager"}},{menuItem:{id:"reportBldr",text:"Report"}},{menuItem:{id:"page-layout",text:"Layout Demo"}}],subNavigationMenus:{}}},{getMessageByErrorCode:function(a){switch(a){case Sentrana.Enums.ErrorCode.WRONG_PASSWORD:return Sentrana.getMessageText(window.app_resources.app_msg.change_password.wrong_current_password_msg);case Sentrana.Enums.ErrorCode.PREVIOUSLY_USED_PASSWORD:return Sentrana.getMessageText(window.app_resources.app_msg.change_password.same_password_msg);case Sentrana.Enums.ErrorCode.PASSWORD_CANNOT_BE_EMPTY:return Sentrana.getMessageText(window.app_resources.app_msg.change_password.empty_new_password_msg);
case Sentrana.Enums.ErrorCode.PASSWORD_FORMAT_IS_INVALID:return Sentrana.getMessageText(window.app_resources.app_msg.change_password.invalidPasswordformateMessage);case Sentrana.Enums.ErrorCode.PASSWORD_POLICY_VIOLATED:return Sentrana.getMessageText(window.app_resources.app_msg.change_password.passwordPolicyViolatedMessage)}},"{Sentrana.Models.SavedFilterGroupInfo} destroyed":function(){var a=$("#saved").control();a&&a.reloadReportsAndBooklets()},loadServiceInfo:function(){var a=this;$.ajax({url:"resources/serviceInfo.json",
dataType:"json",async:!1,success:function(b){a.constructor.methodMap={};for(var c=0,d=(b.endpoints||[]).length;c<d;c++)for(var e=b.endpoints[c],h=0,g=(e.methods||[]).length;h<g;h++)a.constructor.methodMap[e.methods[h].toLowerCase()]=b.baseUrl+"/"+e.name}})},initDOMObjects:function(){this.$biqMain=this.element.find("#biq-main");this.$mainContent=this.element.find("#biq-main")},handleGlobalAjaxComplete:function(a){$(document).ajaxComplete(function(b,c,d){a.retrieveUserInfo()?(b=new Date(c.getResponseHeader("Date")),
a.sessionObserver.attr("createTime",b)):window.clearTimeout(this.sessionExtensionTimer);a.isSiletServiceCall(d.url)||$.unblockUI();d=c.getResponseHeader("ErrorCode");c=c.getResponseHeader("ErrorMsg");c===app_resources.app_msg.session_time_out?a.closeSession("timeout"):d===Sentrana.Enums.ErrorCode.REPOSITORY_RETRIEVE_FAILED&&(c=Sentrana.getMessageText(window.app_resources.app_msg.repository.loading_error_msg),a.blockUI(c,a.ajaxCallStatus.ERROR,"OK",function(){a.undoDwSelection();$.unblockUI()}))})},
isSiletServiceCall:function(a){return 0<a.indexOf("WriteActionLog")||0<a.indexOf("ValidateSession")||0<a.indexOf("GetSharingUpdate")?!0:!1},updateUserSessoinVariables:function(a){var b=new Date($.cookie("timeout"));b&&(this.lastInteractionTime=this.cookieCreateTime=a,this.cookieExpireTime=b,this.cookieLifeTimeInMinutes=Sentrana.getDateDiff(a,b,"minutes"),this.timerCallingDelayInMinutes=this.cookieLifeTimeInMinutes-app_resources.runTimerBeforeSessionExpireInMinutes)},setSessionExtensionTimer:function(){var a=
this;this.sessionExtensionTimer=setTimeout(function(){a.lastInteractionTime!==a.cookieCreateTime&&a.sessionObserver.callServiceMethodToExtendSession(a)},6E4*a.timerCallingDelayInMinutes)},initUserSessionVariables:function(){this.timerCallingDelayInMinutes=this.cookieExpireTime=this.cookieCreateTime=this.cookieLifeTimeInMinutes=this.lastInteractionTime=void 0;this.sessionObserver=new Sentrana.Models.SessionKeepAlive;var a=this;this.sessionObserver.bind("change",function(b,c,d,e){"createTime"===c&&
(window.clearTimeout(this.sessionExtensionTimer),a.updateUserSessoinVariables(e),a.setSessionExtensionTimer())})},init:function(){jQuery.support.cors=!0;this._super();this.metricAtrributeMappingStatus=!Sentrana.Enums.ENABLE_METRIC_ATTRIBUTE_MAPPING_TOGGLE;this.initUserSessionVariables();this.ajaxCallStatus={PROGRESS:"progress",ERROR:"error"};if(this.externalLink&&"viewsharedobject"===this.externalLink.token){var a=this.externalLink.linkInfo;a.id&&a.type&&a.repository&&(this.sharedInfo={id:this.externalLink.linkInfo.id,
type:this.externalLink.linkInfo.type,repository:this.externalLink.linkInfo.repository},document.location.hash="")}this.loadServiceInfo(this);this.initDOMObjects();this.initDialogs();$(document.body).sentrana_router({app:this});this.repositoryViewDlg=$("#view-repository-metadata").sentrana_dialogs_view_repository_metadata({app:this}).control();this.handleGlobalAjaxComplete(this)},toggleMetricAtrributeMappingStatus:function(){this.metricAtrributeMappingStatus=!this.metricAtrributeMappingStatus},filterMenuModel:function(){var a=
!1;Sentrana.LoginData&&Sentrana.LoginData.userInfo&&Sentrana.LoginData.userInfo.appRoles&&(a=0<$.grep(Sentrana.LoginData.userInfo.appRoles,function(a){return a.id==Sentrana.Enums.ApplicationRoles.BIQ_ADMIN}).length);$.each(this.constructor.menuModel.mainMenuItems,function(b,c){"edit_config"===c.menuItem.id&&(c.menuItem.visible=a)})},redirectToCorrectPage:function(a){this.initdwChoicesModel(a);this.filterMenuModel();(a=this.retrieveRepositoryInfo())&&a.repositoryID?(this.$dwSelector&&this.$dwSelector.hide(),
this.loginController.showLoadingWheel(window.app_resources.app_msg.navigation.redirect_last_page),this.retrieveRepository(!1,a.repositoryID)):(this.renderDWSelector(),this.hideLoginForm(),this.$dwSelector.sentrana_dw_selector({dwChoicesModel:this.dwChoicesModel,app:this}),this.showLoginDWSelector())},blockMain:function(){this.blockElement(".main",'<div class="loading"><p class="small-waitingwheel"><img src="images/loader.gif"/></p></div>');this.isMainBlocked=!0},unBlockMain:function(){this.unBlockElement(".main");
this.isMainBlocked=!1},retrieveRepositoryInfo:function(a){var b="",c="",d="";a?d=a:d=this.constructor.userLoginId;if(a=$.cookie(this.constructor.repositoryCookiePrefix+d))a=JSON.parse(a),b=a.repositoryID,c=a.repositoryName;return!b?null:{repositoryID:b,repositoryName:c}},saveRepository:function(a,b){this.constructor.repositoryID=this.repositoryID=a;this.saveCookie(this.constructor.repositoryCookiePrefix+this.constructor.userLoginId,{repositoryID:a,repositoryName:b})},clearRepositoryInfo:function(){this.saveRepository("",
"")},savePageInfo:function(a){this.saveCookie(this.constructor.menuCookiePrefix+this.constructor.userLoginId,{lastAccessedPage:a})},retrievePageInfo:function(){var a=$.cookie(this.constructor.menuCookiePrefix+this.constructor.userLoginId);a&&(a=JSON.parse(a),a=a.lastAccessedPage);return a},clearPageInfo:function(){this.savePageInfo("")},retrieveBuilderPageReportInfo:function(){return $.cookie(this.constructor.pageBuilderReportInfoPrefix+this.constructor.userLoginId)},saveBuilderPageReportInfo:function(a){this.saveCookie(this.constructor.pageBuilderReportInfoPrefix+
this.constructor.userLoginId,a)},clearBuilderPageReportInfo:function(){this.saveBuilderPageReportInfo("")},getDWRepository:function(){return this.dwRepository},displayNavigationHeader:function(a){this.dwRepository?this._super(a):(this.loginController.show(),this.dwChoicesModel||this.loginController.showLoadingWheel(window.app_resources.app_msg.navigation.redirect_last_page))},retrieveRepository:function(a,b,c){var d=this;d.repositoryChanged=!1;$.ajax({url:this.constructor.generateUrl("Repository/"+
b),dataType:"json",success:function(a){a&&(c&&$("#main-content > div").each(function(a,b){$(b).control()&&($(b).control().destroy(),$(b).html(""))}),d.saveRepository(a.oid,a.name),d.loginController.hideLoadingWheel(),d.selectDWChoicesModel(a.oid,a.name),d.dwRepository=new Sentrana.Models.DataWarehouseRepository(a,d),d.displayNavigationHeader(d.getUserActionsForNavBar()),$.when(d.element).done(function(){d.repositoryChanged=!0;d.isFromLogin=!1;var a;d.sharedInfo?(a="saved",document.location.hash="saved"):
a=d.retrievePageInfo();a||(a="bldr");can.route.attr("page","");can.route.attr("page",a)}))}})},selectDWChoicesModel:function(a,b){this.dwChoicesModel&&(this.dwChoicesModel.attr("selectedID",a),this.dwChoicesModel.attr("selectedName",b))},getUserActionsForNavBar:function(){var a=[];a.push({templatePath:"templates/dwInfo.ejs",templateOptions:{},controllerName:"sentrana_user_options",controllerOptions:{},selector:".dwInfo"});Sentrana.LoginData&&Sentrana.LoginData.repositories&&1<Sentrana.LoginData.repositories.length&&
a.push({templatePath:"templates/topNavDWSelector.ejs",templateOptions:{dwModel:this.dwChoicesModel},controllerName:"sentrana_top_nav_dw_selector",controllerOptions:{app:this},selector:".top-nav-dw-selector"});a.push({templatePath:"templates/appHelp.ejs",templateOptions:{},controllerName:"sentrana_user_options",controllerOptions:{},selector:".app-help"});a.push({templatePath:"templates/userOptions.ejs",templateOptions:{},controllerName:"sentrana_user_options",controllerOptions:{},selector:".app-user-options"});
return a},sessionOut:function(){this.sessionInfo=void 0;this.isSessionOut=!0;this.lastUserLoginId=this.userLoginId;this.clearUserInfo();$("html,body").attr("style","height:auto");this.$nav.hide();this.$mainContent.hide();this.loginController.hideLoadingWheel();this.$dwSelector&&this.$dwSelector.hide();this.loginController.show();this.loginController.showErrorMessage(Sentrana.getMessageText(window.app_resources.app_msg.session_out.dialog_msg));this.redirectToLogin();this.clearSharingUpdateTimer()},
logout:function(){this.loginController.hideLoadingWheel();this.removeLoginDWSelector();this.clearSharingUpdateTimer();this._super()},clearSharingUpdateTimer:function(){this.sharingUpdate&&window.clearInterval(this.sharingUpdate)},clearApplicationInfo:function(){this.clearUserInfo();this.clearRepositoryInfo();this.clearPageInfo();this.initUserSessionVariables()},showLoginDWSelector:function(){this.loginController.hideLoadingWheel();this.hideLoginForm();this.$dwSelector.show()},removeLoginDWSelector:function(){this.showLoginForm();
$(".signin-form").find("#repository-selector-container").remove()},showLoginContainer:function(){this.$loginContainer.show()},resetFilmstrip:function(){this.hideFilmstripButtonInNavBar();this.filmstripController&&(this.filmstripController.hide(),this.filmstripController.isRendered=!1)},showFilmstripButtonInNavBar:function(){$(".btn-show-hide-filmstrip").css("display","block")},hideFilmstripButtonInNavBar:function(){$(".btn-show-hide-filmstrip").css("display","none")},blockElement:function(a,b){$(a).block({message:b,
css:{width:"auto",padding:0,border:0,backgroundColor:"transparent",cursor:"default"},overlayCSS:{backgroundColor:"#000",opacity:0.3,cursor:"default"}})},unBlockElement:function(a){$(a).unblock()},loginSuccess:function(a){this.lastUserLoginId===this.userLoginId&&this.isSessionOut?(this.lastUserLoginId=this.userLoginId,this.isSessionOut=!1,this.displayNavigationHeader(this.getUserActionsForNavBar()),(a=this.retrievePageInfo())||(a="bldr"),can.route.attr("page",a)):(this.constructor.userLoginId=a.userInfo.userName,
this.filterMenuModel(),this.renderDWSelector(),this.initdwChoicesModel(a),this.hideLoginForm(),this.$dwSelector.sentrana_dw_selector({dwChoicesModel:this.dwChoicesModel,app:this}))},isPasswordExpired:function(a){return(a.getResponseHeader?a.getResponseHeader("ErrorCode"):void 0)===Sentrana.Enums.ErrorCode.PASSWORD_EXPIRED},hideLoginForm:function(){this.element.find(".login-form").hide()},showLoginForm:function(){this.element.find(".login-form").show()},renderDWSelector:function(){$("#repository-selector-container").length?
this.$dwSelector.show():($(".signin-form").append('<div id="repository-selector-container"></div>'),this.$dwSelector=$("#repository-selector-container"))},initdwChoicesModel:function(a){this.dwChoicesModel=new Sentrana.Models.Choices;this.dwChoicesModel.attr("choices",a.repositories);this.dwChoicesModel.attr("jsonChoices",a.jsonRepositoryNames)}," repository_selected":function(a,b,c){this.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.RepositoriesAccessed,Context:Sentrana.ActionLog.Contexts.RepositorySelection,
ElementType:Sentrana.ActionLog.ElementTypes.Repository,ElementId:c.selectedID});this.isFromLogin=!0;this.$dwSelector.hide();this.loginController.showLoadingWheel(window.app_resources.app_msg.repository.loading_msg);this.retrieveRepository(!0,c.selectedID,!0)}," DWSelectionChanged":function(a,b,c){if(this.retrieveUserInfo()){this.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.RepositoriesAccessed,Context:Sentrana.ActionLog.Contexts.UserOptions,ElementType:Sentrana.ActionLog.ElementTypes.Repository,
ElementId:c.oid});var d=this,e=can.route.attr("page");this.blockUI(Sentrana.getMessageText(window.app_resources.app_msg.navigation.switch_repository),this.ajaxCallStatus.PROGRESS,"CANCEL",function(){$.ajaxManager.abortAll();d.undoDwSelection();can.route.attr("page",e);$.unblockUI()});this.retrieveRepository(!1,c.oid,!0)}}," UserSelectionChanged":function(a,b,c){switch(c.action){case "changepwd":this.changePasswordController.open();break;case "help":this.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.HelpAccesss,
Context:Sentrana.ActionLog.Contexts.ReportOption,ElementType:Sentrana.ActionLog.ElementTypes.HelpPage,ElementId:"help/index.html"});window.open("help/index.html","_blank");break;case "dwInfo":this.showDWinfo();break;case "logout":this.loginController.logout()}},initDialogs:function(){this.shareRptDlg=$("#share-report-dialog").sentrana_dialogs_share_report({app:this}).control()}," share_report":function(a,b,c){this.shareRptDlg.open(c)},changeReportIcon:function(a){var b=$("#saved").control();b&&b.changeReportIcon(a)},
showDWinfo:function(){this.writeActionLog({ActionName:Sentrana.ActionLog.ActionNames.ViewRepositoryInformation,Context:Sentrana.ActionLog.Contexts.RepositoryInformation,ElementType:Sentrana.ActionLog.ElementTypes.Dialog});this.repositoryViewDlg.open()},switchToPage:function(a,b,c){document.location.hash=can.route.url({page:a});this.routeEvent=b;this.routeEventParams=c},showPasswordResetPage:function(a){this.hideNavigationHeader();this.loginController.showResetPasswordForm(a);this.$dwSelector&&this.$dwSelector.hide()},
updateScreen:function(a){$("#application-loading-wheel").hide();if(!("login"!==a&&(this.displayNavigationHeader(),this.savePageInfo(a),!this.dwRepository))){switch(a){case "login":Sentrana.ApplicationStorage.getData("redirectedToLogin")&&Sentrana.ApplicationStorage.setData("redirectedToLogin",!1);if(this.retrieveRepositoryInfo(this.constructor.userLoginId))return;this.sessionInfo?this.redirectToCorrectPage(this.sessionInfo):(this.hideNavigationHeader(),this.removeLoginDWSelector(),this.loginController.show(),
this.loginController.showLoginForm());break;case "saved":$("#saved").show();$("#saved").sentrana_saved_reports({app:this});break;case "bldr":$("#bldr").show();$("#bldr").sentrana_builder_page({app:this});break;case "reportBldr":$("#reportBldr").show();$("#reportBldr").sentrana_report_builder({app:this});break;case "page-layout":$("#page-layout").show();$("#page-layout").sentrana_page_layout_demo({app:this});break;case "edit_config":$("#edit_config").show();$("#edit_config").sentrana_configuration_manager({app:this,
editorsMaxLine:43,editorsMinLine:43,serviceMethodMap:{getConfigurationGroup:"getRepo",saveConfigurationGroup:"SaveRepository",getAllConfigurationGroup:"GetRepoList",getAllConfigurationGroupNames:"getRepoNameList",saveSelectedConfiguration:"SaveConfigFile",saveAllConfiguration:"SaveAllConfigFiles",deleteConfigurationGroup:"DeleteRepository",publishConfigFiles:"PublishConfigChange",uploadConfigFiles:"UploadConfigFiles",downloadConfigurationGroup:"DownloadConfigurationFiles"},labels:{groupsHeader:"Repositories",
addGroupBtnLitle:"Add Repository",groupName:"repository"},fixedConfigurations:["Repository","Datafilter","MetricDimensionMappings"]});break;case "logout":this.loginController.logout(),Sentrana.ApplicationStorage.setData("redirectedToLogin",!0),can.route.attr("page","login")}this.routeEvent&&($("#"+a).trigger(this.routeEvent,this.routeEventParams),this.routeEventParams=this.routeEvent=void 0)}},blockUI:function(a,b,c,d){a=$('<div class="sentrana-common-dlg"></div>').html(can.view("templates/commonDlg.ejs",
{headerText:"Business IQ",bodyText:a,status:b,buttonCaption:c}));$.blockUI({message:a,css:{padding:0,width:500,left:"30%"},overlayCSS:{backgroundColor:"#000",opacity:0.3}});$(".block-ui-btn",$(".sentrana-common-dlg")).button().click(function(){d&&"function"===typeof d&&d()})},undoDwSelection:function(){this.isFromLogin&&this.showLoginDWSelector()},"{document} click":function(){this.handleUserInteraction()},"{document} keydown":function(){this.handleUserInteraction()},handleUserInteraction:function(){if(this.lastInteractionTime){var a=
this.retrieveUserInfo();if(!a||!a.sessionId)this.closeSession("timeout");else if(a=this.addMinutes(this.cookieCreateTime,this.timerCallingDelayInMinutes))new Date>a?this.sessionObserver.callServiceMethodToExtendSession(this):this.lastInteractionTime=new Date}},addMinutes:function(a,b){return a&&b?new Date(a.getTime()+6E4*b):null},post:function(a,b,c){var c=c||"post",d=document.createElement("form");d.setAttribute("method",c);d.setAttribute("action",a);for(var e in b)b.hasOwnProperty(e)&&(a=document.createElement("input"),
a.setAttribute("type","hidden"),a.setAttribute("name",e),a.setAttribute("value",b[e]),d.appendChild(a));document.body.appendChild(d);d.submit()},writeActionLog:function(a){a&&$.ajax({url:this.constructor.generateUrl("WriteActionLog"),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a),success:function(){},error:function(){}})}});
$.ajaxManager=function(){var a={};$(document).ajaxSend(function(b,c){c._id=1;a[c._id]=c});$(document).ajaxComplete(function(b,c){delete a[c._id]});return{abortAll:function(){var b=[];$.each(a,function(a,d){b.push(d._id);d.abort()});return b}}}();steal.executed("js/controllers/BIQController.js");steal.popPending();
